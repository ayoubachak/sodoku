var bae=Object.create;var j_=Object.defineProperty,xae=Object.defineProperties,vae=Object.getOwnPropertyDescriptor,_ae=Object.getOwnPropertyDescriptors,wae=Object.getOwnPropertyNames,W_=Object.getOwnPropertySymbols,Cae=Object.getPrototypeOf,bA=Object.prototype.hasOwnProperty,NB=Object.prototype.propertyIsEnumerable;var AB=(t,n,e)=>n in t?j_(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,re=(t,n)=>{for(var e in n||={})bA.call(n,e)&&AB(t,e,n[e]);if(W_)for(var e of W_(n))NB.call(n,e)&&AB(t,e,n[e]);return t},At=(t,n)=>xae(t,_ae(n));var xA=(t,n)=>{var e={};for(var i in t)bA.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&W_)for(var i of W_(t))n.indexOf(i)<0&&NB.call(t,i)&&(e[i]=t[i]);return e};var Yo=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Qo=(t,n)=>{for(var e in n)j_(t,e,{get:n[e],enumerable:!0})},Tae=(t,n,e,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of wae(n))!bA.call(t,r)&&r!==e&&j_(t,r,{get:()=>n[r],enumerable:!(i=vae(n,r))||i.enumerable});return t};var Wb=(t,n,e)=>(e=t!=null?bae(Cae(t)):{},Tae(n||!t||!t.__esModule?j_(e,"default",{value:t,enumerable:!0}):e,t));var W=(t,n,e)=>new Promise((i,r)=>{var o=l=>{try{a(e.next(l))}catch(c){r(c)}},s=l=>{try{a(e.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((e=e.apply(t,n)).next())});var kX=Yo((Umt,SX)=>{"use strict";SX.exports=zn;var ps=null;try{ps=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function zn(t,n,e){this.low=t|0,this.high=n|0,this.unsigned=!!e}zn.prototype.__isLong__;Object.defineProperty(zn.prototype,"__isLong__",{value:!0});function vo(t){return(t&&t.__isLong__)===!0}zn.isLong=vo;var gX={},yX={};function Vh(t,n){var e,i,r;return n?(t>>>=0,(r=0<=t&&t<256)&&(i=yX[t],i)?i:(e=Gn(t,(t|0)<0?-1:0,!0),r&&(yX[t]=e),e)):(t|=0,(r=-128<=t&&t<128)&&(i=gX[t],i)?i:(e=Gn(t,t<0?-1:0,!1),r&&(gX[t]=e),e))}zn.fromInt=Vh;function hs(t,n){if(isNaN(t))return n?$h:ms;if(n){if(t<0)return $h;if(t>=_X)return TX}else{if(t<=-xX)return xo;if(t+1>=xX)return CX}return t<0?hs(-t,n).neg():Gn(t%Iy|0,t/Iy|0,n)}zn.fromNumber=hs;function Gn(t,n,e){return new zn(t,n,e)}zn.fromBits=Gn;var gk=Math.pow;function X2(t,n,e){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ms;if(typeof n=="number"?(e=n,n=!1):n=!!n,e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return X2(t.substring(1),n,e).neg();for(var r=hs(gk(e,8)),o=ms,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),e);if(a<8){var c=hs(gk(e,a));o=o.mul(c).add(hs(l))}else o=o.mul(r),o=o.add(hs(l))}return o.unsigned=n,o}zn.fromString=X2;function Ys(t,n){return typeof t=="number"?hs(t,n):typeof t=="string"?X2(t,n):Gn(t.low,t.high,typeof n=="boolean"?n:t.unsigned)}zn.fromValue=Ys;var bX=65536,p1e=1<<24,Iy=bX*bX,_X=Iy*Iy,xX=_X/2,vX=Vh(p1e),ms=Vh(0);zn.ZERO=ms;var $h=Vh(0,!0);zn.UZERO=$h;var Ey=Vh(1);zn.ONE=Ey;var wX=Vh(1,!0);zn.UONE=wX;var q2=Vh(-1);zn.NEG_ONE=q2;var CX=Gn(-1,2147483647,!1);zn.MAX_VALUE=CX;var TX=Gn(-1,-1,!0);zn.MAX_UNSIGNED_VALUE=TX;var xo=Gn(0,-2147483648,!1);zn.MIN_VALUE=xo;var Me=zn.prototype;Me.toInt=function(){return this.unsigned?this.low>>>0:this.low};Me.toNumber=function(){return this.unsigned?(this.high>>>0)*Iy+(this.low>>>0):this.high*Iy+(this.low>>>0)};Me.toString=function(n){if(n=n||10,n<2||36<n)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(xo)){var e=hs(n),i=this.div(e),r=i.mul(e).sub(this);return i.toString(n)+r.toInt().toString(n)}else return"-"+this.neg().toString(n);for(var o=hs(gk(n,6),this.unsigned),s=this,a="";;){var l=s.div(o),c=s.sub(l.mul(o)).toInt()>>>0,u=c.toString(n);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Me.getHighBits=function(){return this.high};Me.getHighBitsUnsigned=function(){return this.high>>>0};Me.getLowBits=function(){return this.low};Me.getLowBitsUnsigned=function(){return this.low>>>0};Me.getNumBitsAbs=function(){if(this.isNegative())return this.eq(xo)?64:this.neg().getNumBitsAbs();for(var n=this.high!=0?this.high:this.low,e=31;e>0&&(n&1<<e)==0;e--);return this.high!=0?e+33:e+1};Me.isZero=function(){return this.high===0&&this.low===0};Me.eqz=Me.isZero;Me.isNegative=function(){return!this.unsigned&&this.high<0};Me.isPositive=function(){return this.unsigned||this.high>=0};Me.isOdd=function(){return(this.low&1)===1};Me.isEven=function(){return(this.low&1)===0};Me.equals=function(n){return vo(n)||(n=Ys(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low};Me.eq=Me.equals;Me.notEquals=function(n){return!this.eq(n)};Me.neq=Me.notEquals;Me.ne=Me.notEquals;Me.lessThan=function(n){return this.comp(n)<0};Me.lt=Me.lessThan;Me.lessThanOrEqual=function(n){return this.comp(n)<=0};Me.lte=Me.lessThanOrEqual;Me.le=Me.lessThanOrEqual;Me.greaterThan=function(n){return this.comp(n)>0};Me.gt=Me.greaterThan;Me.greaterThanOrEqual=function(n){return this.comp(n)>=0};Me.gte=Me.greaterThanOrEqual;Me.ge=Me.greaterThanOrEqual;Me.compare=function(n){if(vo(n)||(n=Ys(n)),this.eq(n))return 0;var e=this.isNegative(),i=n.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1};Me.comp=Me.compare;Me.negate=function(){return!this.unsigned&&this.eq(xo)?xo:this.not().add(Ey)};Me.neg=Me.negate;Me.add=function(n){vo(n)||(n=Ys(n));var e=this.high>>>16,i=this.high&65535,r=this.low>>>16,o=this.low&65535,s=n.high>>>16,a=n.high&65535,l=n.low>>>16,c=n.low&65535,u=0,d=0,p=0,h=0;return h+=o+c,p+=h>>>16,h&=65535,p+=r+l,d+=p>>>16,p&=65535,d+=i+a,u+=d>>>16,d&=65535,u+=e+s,u&=65535,Gn(p<<16|h,u<<16|d,this.unsigned)};Me.subtract=function(n){return vo(n)||(n=Ys(n)),this.add(n.neg())};Me.sub=Me.subtract;Me.multiply=function(n){if(this.isZero())return ms;if(vo(n)||(n=Ys(n)),ps){var e=ps.mul(this.low,this.high,n.low,n.high);return Gn(e,ps.get_high(),this.unsigned)}if(n.isZero())return ms;if(this.eq(xo))return n.isOdd()?xo:ms;if(n.eq(xo))return this.isOdd()?xo:ms;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(vX)&&n.lt(vX))return hs(this.toNumber()*n.toNumber(),this.unsigned);var i=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,a=n.high>>>16,l=n.high&65535,c=n.low>>>16,u=n.low&65535,d=0,p=0,h=0,m=0;return m+=s*u,h+=m>>>16,m&=65535,h+=o*u,p+=h>>>16,h&=65535,h+=s*c,p+=h>>>16,h&=65535,p+=r*u,d+=p>>>16,p&=65535,p+=o*c,d+=p>>>16,p&=65535,p+=s*l,d+=p>>>16,p&=65535,d+=i*u+r*c+o*l+s*a,d&=65535,Gn(h<<16|m,d<<16|p,this.unsigned)};Me.mul=Me.multiply;Me.divide=function(n){if(vo(n)||(n=Ys(n)),n.isZero())throw Error("division by zero");if(ps){if(!this.unsigned&&this.high===-2147483648&&n.low===-1&&n.high===-1)return this;var e=(this.unsigned?ps.div_u:ps.div_s)(this.low,this.high,n.low,n.high);return Gn(e,ps.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?$h:ms;var i,r,o;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return $h;if(n.gt(this.shru(1)))return wX;o=$h}else{if(this.eq(xo)){if(n.eq(Ey)||n.eq(q2))return xo;if(n.eq(xo))return Ey;var s=this.shr(1);return i=s.div(n).shl(1),i.eq(ms)?n.isNegative()?Ey:q2:(r=this.sub(n.mul(i)),o=i.add(r.div(n)),o)}else if(n.eq(xo))return this.unsigned?$h:ms;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();o=ms}for(r=this;r.gte(n);){i=Math.max(1,Math.floor(r.toNumber()/n.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),l=a<=48?1:gk(2,a-48),c=hs(i),u=c.mul(n);u.isNegative()||u.gt(r);)i-=l,c=hs(i,this.unsigned),u=c.mul(n);c.isZero()&&(c=Ey),o=o.add(c),r=r.sub(u)}return o};Me.div=Me.divide;Me.modulo=function(n){if(vo(n)||(n=Ys(n)),ps){var e=(this.unsigned?ps.rem_u:ps.rem_s)(this.low,this.high,n.low,n.high);return Gn(e,ps.get_high(),this.unsigned)}return this.sub(this.div(n).mul(n))};Me.mod=Me.modulo;Me.rem=Me.modulo;Me.not=function(){return Gn(~this.low,~this.high,this.unsigned)};Me.and=function(n){return vo(n)||(n=Ys(n)),Gn(this.low&n.low,this.high&n.high,this.unsigned)};Me.or=function(n){return vo(n)||(n=Ys(n)),Gn(this.low|n.low,this.high|n.high,this.unsigned)};Me.xor=function(n){return vo(n)||(n=Ys(n)),Gn(this.low^n.low,this.high^n.high,this.unsigned)};Me.shiftLeft=function(n){return vo(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?Gn(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):Gn(0,this.low<<n-32,this.unsigned)};Me.shl=Me.shiftLeft;Me.shiftRight=function(n){return vo(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?Gn(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):Gn(this.high>>n-32,this.high>=0?0:-1,this.unsigned)};Me.shr=Me.shiftRight;Me.shiftRightUnsigned=function(n){if(vo(n)&&(n=n.toInt()),n&=63,n===0)return this;var e=this.high;if(n<32){var i=this.low;return Gn(i>>>n|e<<32-n,e>>>n,this.unsigned)}else return n===32?Gn(e,0,this.unsigned):Gn(e>>>n-32,0,this.unsigned)};Me.shru=Me.shiftRightUnsigned;Me.shr_u=Me.shiftRightUnsigned;Me.toSigned=function(){return this.unsigned?Gn(this.low,this.high,!1):this};Me.toUnsigned=function(){return this.unsigned?this:Gn(this.low,this.high,!0)};Me.toBytes=function(n){return n?this.toBytesLE():this.toBytesBE()};Me.toBytesLE=function(){var n=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,n&255,n>>>8&255,n>>>16&255,n>>>24]};Me.toBytesBE=function(){var n=this.high,e=this.low;return[n>>>24,n>>>16&255,n>>>8&255,n&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};zn.fromBytes=function(n,e,i){return i?zn.fromBytesLE(n,e):zn.fromBytesBE(n,e)};zn.fromBytesLE=function(n,e){return new zn(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,e)};zn.fromBytesBE=function(n,e){return new zn(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],e)}});var fK=Yo((Ly,mK)=>{"use strict";var J1e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xh=J1e();mK.exports=Ly=Xh.fetch;Xh.fetch&&(Ly.default=Xh.fetch.bind(Xh));Ly.Headers=Xh.Headers;Ly.Request=Xh.Request;Ly.Response=Xh.Response});var gK=Yo(()=>{"use strict"});var VK=Yo(($K,UL)=>{"use strict";(function(t,n,e){function i(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function r(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function o(a,l){var c=new i(a),u=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.alea=o})($K,typeof UL=="object"&&UL,typeof define=="function"&&define)});var zK=Yo((BK,HL)=>{"use strict";(function(t,n,e){function i(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function r(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function o(s,a){var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xor128=o})(BK,typeof HL=="object"&&HL,typeof define=="function"&&define)});var UK=Yo((GK,WL)=>{"use strict";(function(t,n,e){function i(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function r(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function o(s,a){var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xorwow=o})(GK,typeof WL=="object"&&WL,typeof define=="function"&&define)});var WK=Yo((HK,jL)=>{"use strict";(function(t,n,e){function i(s){var a=this;a.next=function(){var c=a.x,u=a.i,d,p,h;return d=c[u],d^=d>>>7,p=d^d<<24,d=c[u+1&7],p^=d^d>>>10,d=c[u+3&7],p^=d^d>>>3,d=c[u+4&7],p^=d^d<<7,d=c[u+7&7],d=d^d<<13,p^=d^d<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var d,p,h=[];if(u===(u|0))p=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(a,s)}function r(s,a){return a.x=s.x.slice(),a.i=s.i,a}function o(s,a){s==null&&(s=+new Date);var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.x&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xorshift7=o})(HK,typeof jL=="object"&&jL,typeof define=="function"&&define)});var qK=Yo((jK,qL)=>{"use strict";(function(t,n,e){function i(s){var a=this;a.next=function(){var c=a.w,u=a.X,d=a.i,p,h;return a.w=c=c+1640531527|0,h=u[d+34&127],p=u[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=u[d]=h^p,a.i=d,h+(c^c>>>16)|0};function l(c,u){var d,p,h,m,g,f=[],y=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,y=Math.max(y,u.length)),h=0,m=-32;m<y;++m)u&&(p^=u.charCodeAt((m+32)%u.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,d=f[m&127]^=p+g,h=d==0?h+1:0);for(h>=128&&(f[(u&&u.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,f[h]=p^d;c.w=g,c.X=f,c.i=h}l(a,s)}function r(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function o(s,a){s==null&&(s=+new Date);var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.X&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xor4096=o})(jK,typeof qL=="object"&&qL,typeof define=="function"&&define)});var KK=Yo((XK,XL)=>{"use strict";(function(t,n,e){function i(s){var a=this,l="";a.next=function(){var u=a.b,d=a.c,p=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-p|0,a.d=p<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function r(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function o(s,a){var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.tychei=o})(XK,typeof XL=="object"&&XL,typeof define=="function"&&define)});var YK=Yo(()=>{"use strict"});var ZK=Yo((QK,Pk)=>{"use strict";(function(t,n,e){var i=256,r=6,o=52,s="random",a=e.pow(i,r),l=e.pow(2,o),c=l*2,u=i-1,d;function p(x,_,w){var C=[];_=_==!0?{entropy:!0}:_||{};var k=f(g(_.entropy?[x,b(n)]:x??y(),3),C),N=new h(C),P=function(){for(var F=N.g(r),z=a,Y=0;F<l;)F=(F+Y)*i,z*=i,Y=N.g(1);for(;F>=c;)F/=2,z/=2,Y>>>=1;return(F+Y)/z};return P.int32=function(){return N.g(4)|0},P.quick=function(){return N.g(4)/4294967296},P.double=P,f(b(N.S),n),(_.pass||w||function(F,z,Y,K){return K&&(K.S&&m(K,N),F.state=function(){return m(N,{})}),Y?(e[s]=F,z):F})(P,k,"global"in _?_.global:this==e,_.state)}function h(x){var _,w=x.length,C=this,k=0,N=C.i=C.j=0,P=C.S=[];for(w||(x=[w++]);k<i;)P[k]=k++;for(k=0;k<i;k++)P[k]=P[N=u&N+x[k%w]+(_=P[k])],P[N]=_;(C.g=function(F){for(var z,Y=0,K=C.i,Z=C.j,te=C.S;F--;)z=te[K=u&K+1],Y=Y*i+te[u&(te[K]=te[Z=u&Z+z])+(te[Z]=z)];return C.i=K,C.j=Z,Y})(i)}function m(x,_){return _.i=x.i,_.j=x.j,_.S=x.S.slice(),_}function g(x,_){var w=[],C=typeof x,k;if(_&&C=="object")for(k in x)try{w.push(g(x[k],_-1))}catch{}return w.length?w:C=="string"?x:x+"\0"}function f(x,_){for(var w=x+"",C,k=0;k<w.length;)_[u&k]=u&(C^=_[u&k]*19)+w.charCodeAt(k++);return b(_)}function y(){try{var x;return d&&(x=d.randomBytes)?x=x(i):(x=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(x)),b(x)}catch{var _=t.navigator,w=_&&_.plugins;return[+new Date,t,w,t.screen,b(n)]}}function b(x){return String.fromCharCode.apply(0,x)}if(f(e.random(),n),typeof Pk=="object"&&Pk.exports){Pk.exports=p;try{d=YK()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):e["seed"+s]=p})(typeof self<"u"?self:QK,[],Math)});var q0=Yo((EEt,JK)=>{"use strict";var xIe=VK(),vIe=zK(),_Ie=UK(),wIe=WK(),CIe=qK(),TIe=KK(),om=ZK();om.alea=xIe;om.xor128=vIe;om.xorwow=_Ie;om.xorshift7=wIe;om.xor4096=CIe;om.tychei=TIe;JK.exports=om});function CA(t,n){return Object.is(t,n)}var Ni=null,q_=!1,TA=1,Zo=Symbol("SIGNAL");function Bt(t){let n=Ni;return Ni=t,n}function SA(){return Ni}var Mm={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qb(t){if(q_)throw new Error("");if(Ni===null)return;Ni.consumerOnSignalRead(t);let n=Ni.nextProducerIndex++;if(Z_(Ni),n<Ni.producerNode.length&&Ni.producerNode[n]!==t&&jb(Ni)){let e=Ni.producerNode[n];Q_(e,Ni.producerIndexOfThis[n])}Ni.producerNode[n]!==t&&(Ni.producerNode[n]=t,Ni.producerIndexOfThis[n]=jb(Ni)?OB(t,Ni,n):0),Ni.producerLastReadVersion[n]=t.version}function MB(){TA++}function kA(t){if(!(jb(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===TA)){if(!t.producerMustRecompute(t)&&!Y_(t)){wA(t);return}t.producerRecomputeValue(t),wA(t)}}function EA(t){if(t.liveConsumerNode===void 0)return;let n=q_;q_=!0;try{for(let e of t.liveConsumerNode)e.dirty||Sae(e)}finally{q_=n}}function IA(){return Ni?.consumerAllowSignalWrites!==!1}function Sae(t){t.dirty=!0,EA(t),t.consumerMarkedDirty?.(t)}function wA(t){t.dirty=!1,t.lastCleanEpoch=TA}function Xb(t){return t&&(t.nextProducerIndex=0),Bt(t)}function K_(t,n){if(Bt(n),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(jb(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)Q_(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Y_(t){Z_(t);for(let n=0;n<t.producerNode.length;n++){let e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(kA(e),i!==e.version))return!0}return!1}function Kb(t){if(Z_(t),jb(t))for(let n=0;n<t.producerNode.length;n++)Q_(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function OB(t,n,e){if(RB(t),t.liveConsumerNode.length===0&&FB(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=OB(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(n)-1}function Q_(t,n){if(RB(t),t.liveConsumerNode.length===1&&FB(t))for(let i=0;i<t.producerNode.length;i++)Q_(t.producerNode[i],t.producerIndexOfThis[i]);let e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[n],r=t.liveConsumerNode[n];Z_(r),r.producerIndexOfThis[i]=n}}function jb(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Z_(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function RB(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function FB(t){return t.producerNode!==void 0}function DA(t,n){let e=Object.create(kae);e.computation=t,n!==void 0&&(e.equal=n);let i=()=>{if(kA(e),qb(e),e.value===X_)throw e.error;return e.value};return i[Zo]=e,i}var vA=Symbol("UNSET"),_A=Symbol("COMPUTING"),X_=Symbol("ERRORED"),kae=At(re({},Mm),{value:vA,dirty:!0,error:null,equal:CA,kind:"computed",producerMustRecompute(t){return t.value===vA||t.value===_A},producerRecomputeValue(t){if(t.value===_A)throw new Error("Detected cycle in computations.");let n=t.value;t.value=_A;let e=Xb(t),i,r=!1;try{i=t.computation(),Bt(null),r=n!==vA&&n!==X_&&i!==X_&&t.equal(n,i)}catch(o){i=X_,t.error=o}finally{K_(t,e)}if(r){t.value=n;return}t.value=i,t.version++}});function Eae(){throw new Error}var LB=Eae;function PB(t){LB(t)}function AA(t){LB=t}var Iae=null;function NA(t,n){let e=Object.create(J_);e.value=t,n!==void 0&&(e.equal=n);let i=()=>(qb(e),e.value);return i[Zo]=e,i}function Yb(t,n){IA()||PB(t),t.equal(t.value,n)||(t.value=n,Dae(t))}function MA(t,n){IA()||PB(t),Yb(t,n(t.value))}var J_=At(re({},Mm),{equal:CA,value:void 0,kind:"signal"});function Dae(t){t.version++,MB(),EA(t),Iae?.()}function OA(t){let n=Bt(null);try{return t()}finally{Bt(n)}}var RA;function Qb(){return RA}function ll(t){let n=RA;return RA=t,n}var ew=Symbol("NotFound");function ht(t){return typeof t=="function"}function Om(t){let e=t(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var tw=Om(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ap(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var tn=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(ht(i))try{i()}catch(o){n=o instanceof tw?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{$B(o)}catch(s){n=n??[],s instanceof tw?n=[...n,...s.errors]:n.push(s)}}if(n)throw new tw(n)}}add(n){var e;if(n&&n!==this)if(this.closed)$B(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&ap(e,n)}remove(n){let{_finalizers:e}=this;e&&ap(e,n),n instanceof t&&n._removeParent(this)}};tn.EMPTY=(()=>{let t=new tn;return t.closed=!0,t})();var FA=tn.EMPTY;function nw(t){return t instanceof tn||t&&"closed"in t&&ht(t.remove)&&ht(t.add)&&ht(t.unsubscribe)}function $B(t){ht(t)?t():t.unsubscribe()}var Os={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Rm={setTimeout(t,n,...e){let{delegate:i}=Rm;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=Rm;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function iw(t){Rm.setTimeout(()=>{let{onUnhandledError:n}=Os;if(n)n(t);else throw t})}function Zb(){}var VB=LA("C",void 0,void 0);function BB(t){return LA("E",void 0,t)}function zB(t){return LA("N",t,void 0)}function LA(t,n,e){return{kind:t,value:n,error:e}}var lp=null;function Fm(t){if(Os.useDeprecatedSynchronousErrorHandling){let n=!lp;if(n&&(lp={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:i}=lp;if(lp=null,e)throw i}}else t()}function GB(t){Os.useDeprecatedSynchronousErrorHandling&&lp&&(lp.errorThrown=!0,lp.error=t)}var cp=class extends tn{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,nw(n)&&n.add(this)):this.destination=Fae}static create(n,e,i){return new cl(n,e,i)}next(n){this.isStopped?$A(zB(n),this):this._next(n)}error(n){this.isStopped?$A(BB(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?$A(VB,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Oae=Function.prototype.bind;function PA(t,n){return Oae.call(t,n)}var VA=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){rw(i)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){rw(i)}else rw(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){rw(e)}}},cl=class extends cp{constructor(n,e,i){super();let r;if(ht(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Os.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&PA(n.next,o),error:n.error&&PA(n.error,o),complete:n.complete&&PA(n.complete,o)}):r=n}this.destination=new VA(r)}};function rw(t){Os.useDeprecatedSynchronousErrorHandling?GB(t):iw(t)}function Rae(t){throw t}function $A(t,n){let{onStoppedNotification:e}=Os;e&&Rm.setTimeout(()=>e(t,n))}var Fae={closed:!0,next:Zb,error:Rae,complete:Zb};var Lm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Pr(t){return t}function BA(...t){return zA(t)}function zA(t){return t.length===0?Pr:t.length===1?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}var Lt=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=Pae(e)?e:new cl(e,i,r);return Fm(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=UB(i),new i((r,o)=>{let s=new cl({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Lm](){return this}pipe(...e){return zA(e)(this)}toPromise(e){return e=UB(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=n=>new t(n),t})();function UB(t){var n;return(n=t??Os.Promise)!==null&&n!==void 0?n:Promise}function Lae(t){return t&&ht(t.next)&&ht(t.error)&&ht(t.complete)}function Pae(t){return t&&t instanceof cp||Lae(t)&&nw(t)}function GA(t){return ht(t?.lift)}function kt(t){return n=>{if(GA(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function _t(t,n,e,i,r){return new UA(t,n,e,i,r)}var UA=class extends cp{constructor(n,e,i,r,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function Pm(){return kt((t,n)=>{let e=null;t._refCount++;let i=_t(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let r=t._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}var $m=class extends Lt{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,GA(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new tn;let e=this.getSubject();n.add(this.source.subscribe(_t(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=tn.EMPTY)}return n}refCount(){return Pm()(this)}};var HB=Om(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class t extends Lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new ow(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new HB}next(e){Fm(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Fm(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Fm(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?FA:(this.currentObservers=null,o.push(e),new tn(()=>{this.currentObservers=null,ap(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new Lt;return e.source=this,e}}return t.create=(n,e)=>new ow(n,e),t})(),ow=class extends Oe{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,n)}error(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&i!==void 0?i:FA}};var Jn=class extends Oe{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}};var HA={now(){return(HA.delegate||Date).now()},delegate:void 0};var sw=class extends tn{constructor(n,e){super()}schedule(n,e=0){return this}};var Jb={setInterval(t,n,...e){let{delegate:i}=Jb;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){let{delegate:n}=Jb;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var aw=class extends sw{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return Jb.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Jb.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(n,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let i=!1,r;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ap(i,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var Vm=class t{constructor(n,e=t.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}};Vm.now=HA.now;var lw=class extends Vm{constructor(n,e=Vm.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}};var ex=new lw(aw),WB=ex;var yr=new Lt(t=>t.complete());function cw(t){return t&&ht(t.schedule)}function WA(t){return t[t.length-1]}function uw(t){return ht(WA(t))?t.pop():void 0}function pa(t){return cw(WA(t))?t.pop():void 0}function jB(t,n){return typeof WA(t)=="number"?t.pop():n}function XB(t,n,e,i){var r=arguments.length,o=r<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(n,e,o):s(n,e))||o);return r>3&&o&&Object.defineProperty(n,e,o),o}function KB(t,n,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((i=i.apply(t,n||[])).next())})}function qB(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function up(t){return this instanceof up?(this.v=t,this):new up(t)}function YB(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(t,n||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(h){return function(m){return Promise.resolve(m).then(h,d)}}function a(h,m){i[h]&&(r[h]=function(g){return new Promise(function(f,y){o.push([h,g,f,y])>1||l(h,g)})},m&&(r[h]=m(r[h])))}function l(h,m){try{c(i[h](m))}catch(g){p(o[0][3],g)}}function c(h){h.value instanceof up?Promise.resolve(h.value.v).then(u,d):p(o[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function p(h,m){h(m),o.shift(),o.length&&l(o[0][0],o[0][1])}}function QB(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof qB=="function"?qB(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Bm=t=>t&&typeof t.length=="number"&&typeof t!="function";function dw(t){return ht(t?.then)}function pw(t){return ht(t[Lm])}function hw(t){return Symbol.asyncIterator&&ht(t?.[Symbol.asyncIterator])}function mw(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $ae(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fw=$ae();function gw(t){return ht(t?.[fw])}function yw(t){return YB(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:i,done:r}=yield up(e.read());if(r)return yield up(void 0);yield yield up(i)}}finally{e.releaseLock()}})}function bw(t){return ht(t?.getReader)}function Tn(t){if(t instanceof Lt)return t;if(t!=null){if(pw(t))return Vae(t);if(Bm(t))return Bae(t);if(dw(t))return zae(t);if(hw(t))return ZB(t);if(gw(t))return Gae(t);if(bw(t))return Uae(t)}throw mw(t)}function Vae(t){return new Lt(n=>{let e=t[Lm]();if(ht(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Bae(t){return new Lt(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function zae(t){return new Lt(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,iw)})}function Gae(t){return new Lt(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function ZB(t){return new Lt(n=>{Hae(t,n).catch(e=>n.error(e))})}function Uae(t){return ZB(yw(t))}function Hae(t,n){var e,i,r,o;return KB(this,void 0,void 0,function*(){try{for(e=QB(t);i=yield e.next(),!i.done;){let s=i.value;if(n.next(s),n.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}n.complete()})}function so(t,n,e,i=0,r=!1){let o=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function xw(t,n=0){return kt((e,i)=>{e.subscribe(_t(i,r=>so(i,t,()=>i.next(r),n),()=>so(i,t,()=>i.complete(),n),r=>so(i,t,()=>i.error(r),n)))})}function vw(t,n=0){return kt((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function JB(t,n){return Tn(t).pipe(vw(n),xw(n))}function e3(t,n){return Tn(t).pipe(vw(n),xw(n))}function t3(t,n){return new Lt(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}function n3(t,n){return new Lt(e=>{let i;return so(e,n,()=>{i=t[fw](),so(e,n,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>ht(i?.return)&&i.return()})}function _w(t,n){if(!t)throw new Error("Iterable cannot be null");return new Lt(e=>{so(e,n,()=>{let i=t[Symbol.asyncIterator]();so(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function i3(t,n){return _w(yw(t),n)}function r3(t,n){if(t!=null){if(pw(t))return JB(t,n);if(Bm(t))return t3(t,n);if(dw(t))return e3(t,n);if(hw(t))return _w(t,n);if(gw(t))return n3(t,n);if(bw(t))return i3(t,n)}throw mw(t)}function Vn(t,n){return n?r3(t,n):Tn(t)}function Qe(...t){let n=pa(t);return Vn(t,n)}function pu(t,n){let e=ht(t)?t:()=>t,i=r=>r.error(e());return new Lt(n?r=>n.schedule(i,0,r):i)}function ww(t){return!!t&&(t instanceof Lt||ht(t.lift)&&ht(t.subscribe))}var ul=Om(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function o3(t){return t instanceof Date&&!isNaN(t)}function ot(t,n){return kt((e,i)=>{let r=0;e.subscribe(_t(i,o=>{i.next(t.call(n,o,r++))}))})}var{isArray:Wae}=Array;function jae(t,n){return Wae(n)?t(...n):t(n)}function zm(t){return ot(n=>jae(t,n))}var{isArray:qae}=Array,{getPrototypeOf:Xae,prototype:Kae,keys:Yae}=Object;function Cw(t){if(t.length===1){let n=t[0];if(qae(n))return{args:n,keys:null};if(Qae(n)){let e=Yae(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}function Qae(t){return t&&typeof t=="object"&&Xae(t)===Kae}function Tw(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function Gm(...t){let n=pa(t),e=uw(t),{args:i,keys:r}=Cw(t);if(i.length===0)return Vn([],n);let o=new Lt(Zae(i,n,r?s=>Tw(r,s):Pr));return e?o.pipe(zm(e)):o}function Zae(t,n,e=Pr){return i=>{s3(n,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)s3(n,()=>{let c=Vn(t[l],n),u=!1;c.subscribe(_t(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function s3(t,n,e){t?so(e,t,n):n()}function a3(t,n,e,i,r,o,s,a){let l=[],c=0,u=0,d=!1,p=()=>{d&&!l.length&&!c&&n.complete()},h=g=>c<i?m(g):l.push(g),m=g=>{o&&n.next(g),c++;let f=!1;Tn(e(g,u++)).subscribe(_t(n,y=>{r?.(y),o?h(y):n.next(y)},()=>{f=!0},void 0,()=>{if(f)try{for(c--;l.length&&c<i;){let y=l.shift();s?so(n,s,()=>m(y)):m(y)}p()}catch(y){n.error(y)}}))};return t.subscribe(_t(n,h,()=>{d=!0,p()})),()=>{a?.()}}function pi(t,n,e=1/0){return ht(n)?pi((i,r)=>ot((o,s)=>n(i,o,r,s))(Tn(t(i,r))),e):(typeof n=="number"&&(e=n),kt((i,r)=>a3(i,r,t,e)))}function Sw(t=1/0){return pi(Pr,t)}function l3(){return Sw(1)}function hu(...t){return l3()(Vn(t,pa(t)))}function ha(t){return new Lt(n=>{Tn(t()).subscribe(n)})}function tx(...t){let n=uw(t),{args:e,keys:i}=Cw(t),r=new Lt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;Tn(e[u]).subscribe(_t(o,p=>{d||(d=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?Tw(i,a):a),o.complete())}))}});return n?r.pipe(zm(n)):r}var Jae=["addListener","removeListener"],ele=["addEventListener","removeEventListener"],tle=["on","off"];function nx(t,n,e,i){if(ht(e)&&(i=e,e=void 0),i)return nx(t,n,e).pipe(zm(i));let[r,o]=rle(t)?ele.map(s=>a=>t[s](n,a,e)):nle(t)?Jae.map(c3(t,n)):ile(t)?tle.map(c3(t,n)):[];if(!r&&Bm(t))return pi(s=>nx(s,n,e))(Tn(t));if(!r)throw new TypeError("Invalid event target");return new Lt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function c3(t,n){return e=>i=>t[e](n,i)}function nle(t){return ht(t.addListener)&&ht(t.removeListener)}function ile(t){return ht(t.on)&&ht(t.off)}function rle(t){return ht(t.addEventListener)&&ht(t.removeEventListener)}function u3(t=0,n,e=WB){let i=-1;return n!=null&&(cw(n)?e=n:i=n),new Lt(r=>{let o=o3(t)?+t-e.now():t;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function dl(...t){let n=pa(t),e=jB(t,1/0),i=t;return i.length?i.length===1?Tn(i[0]):Sw(e)(Vn(i,n)):yr}function Sn(t,n){return kt((e,i)=>{let r=0;e.subscribe(_t(i,o=>t.call(n,o,r++)&&i.next(o)))})}function d3(t){return kt((n,e)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,e.next(c)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};n.subscribe(_t(e,c=>{i=!0,r=c,o||Tn(t(c)).subscribe(o=_t(e,a,l))},()=>{s=!0,(!i||!o||o.closed)&&e.complete()}))})}function kw(t,n=ex){return d3(()=>u3(t,n))}function Jo(t){return kt((n,e)=>{let i=null,r=!1,o;i=n.subscribe(_t(e,void 0,void 0,s=>{o=Tn(t(s,Jo(t)(n))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function p3(t,n,e,i,r){return(o,s)=>{let a=e,l=n,c=0;o.subscribe(_t(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function mu(t,n){return ht(n)?pi(t,n,1):pi(t,1)}function dp(t,n=ex){return kt((e,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+t,u=n.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}e.subscribe(_t(i,c=>{o=c,s=n.now(),r||(r=n.schedule(l,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function fu(t){return kt((n,e)=>{let i=!1;n.subscribe(_t(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function Xn(t){return t<=0?()=>yr:kt((n,e)=>{let i=0;n.subscribe(_t(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function Ew(t,n=Pr){return t=t??ole,kt((e,i)=>{let r,o=!0;e.subscribe(_t(i,s=>{let a=n(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function ole(t,n){return t===n}function Iw(t=sle){return kt((n,e)=>{let i=!1;n.subscribe(_t(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function sle(){return new ul}function pl(t){return kt((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function hl(t,n){let e=arguments.length>=2;return i=>i.pipe(t?Sn((r,o)=>t(r,o,i)):Pr,Xn(1),e?fu(n):Iw(()=>new ul))}function Um(t){return t<=0?()=>yr:kt((n,e)=>{let i=[];n.subscribe(_t(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function jA(t,n){let e=arguments.length>=2;return i=>i.pipe(t?Sn((r,o)=>t(r,o,i)):Pr,Um(1),e?fu(n):Iw(()=>new ul))}function qA(t,n){return kt(p3(t,n,arguments.length>=2,!0))}function KA(t={}){let{connector:n=()=>new Oe,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,l,c=0,u=!1,d=!1,p=()=>{a?.unsubscribe(),a=void 0},h=()=>{p(),s=l=void 0,u=d=!1},m=()=>{let g=s;h(),g?.unsubscribe()};return kt((g,f)=>{c++,!d&&!u&&p();let y=l=l??n();f.add(()=>{c--,c===0&&!d&&!u&&(a=XA(m,r))}),y.subscribe(f),!s&&c>0&&(s=new cl({next:b=>y.next(b),error:b=>{d=!0,p(),a=XA(h,e,b),y.error(b)},complete:()=>{u=!0,p(),a=XA(h,i),y.complete()}}),Tn(g).subscribe(s))})(o)}}function XA(t,n,...e){if(n===!0){t();return}if(n===!1)return;let i=new cl({next:()=>{i.unsubscribe(),t()}});return Tn(n(...e)).subscribe(i)}function ix(t){return Sn((n,e)=>t<=e)}function Ro(...t){let n=pa(t);return kt((e,i)=>{(n?hu(t,e,n):hu(t,e)).subscribe(i)})}function nr(t,n){return kt((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(_t(i,l=>{r?.unsubscribe();let c=0,u=o++;Tn(t(l,u)).subscribe(r=_t(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Bn(t){return kt((n,e)=>{Tn(t).subscribe(_t(e,()=>e.complete(),Zb)),!e.closed&&n.subscribe(e)})}function YA(t,n=!1){return kt((e,i)=>{let r=0;e.subscribe(_t(i,o=>{let s=t(o,r++);(s||n)&&i.next(o),!s&&i.complete()}))})}function ei(t,n,e){let i=ht(t)||n||e?{next:t,error:n,complete:e}:t;return i?kt((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(_t(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Pr}var nz="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ye=class extends Error{code;constructor(n,e){super(iz(n,e)),this.code=n}};function ale(t){return`NG0${Math.abs(t)}`}function iz(t,n){return`${ale(t)}${n?": "+n:""}`}var rz=Symbol("InputSignalNode#UNSET"),lle=At(re({},J_),{transformFn:void 0,applyValueToInputSignal(t,n){Yb(t,n)}});function oz(t,n){let e=Object.create(lle);e.value=t,e.transformFn=n?.transform;function i(){if(qb(e),e.value===rz){let r=null;throw new ye(-950,r)}return e.value}return i[Zo]=e,i}function gx(t){return{toString:t}.toString()}var Dw="__parameters__";function cle(t){return function(...e){if(t){let i=t(...e);for(let r in i)this[r]=i[r]}}}function sz(t,n,e){return gx(()=>{let i=cle(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(Dw)?l[Dw]:Object.defineProperty(l,Dw,{value:[]})[Dw];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Ym=globalThis;function Nn(t){for(let n in t)if(t[n]===Nn)return n;throw Error("Could not find renamed property on target object.")}function ule(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function co(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(co).join(", ")}]`;if(t==null)return""+t;let n=t.overriddenName||t.name;if(n)return`${n}`;let e=t.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function dN(t,n){return t?n?`${t} ${n}`:t:n||""}var dle=Nn({__forward_ref__:Nn});function ns(t){return t.__forward_ref__=ns,t.toString=function(){return co(this())},t}function ir(t){return az(t)?t():t}function az(t){return typeof t=="function"&&t.hasOwnProperty(dle)&&t.__forward_ref__===ns}function pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ve(t){return{providers:t.providers||[],imports:t.imports||[]}}function hC(t){return h3(t,cz)||h3(t,uz)}function lz(t){return hC(t)!==null}function h3(t,n){return t.hasOwnProperty(n)?t[n]:null}function ple(t){let n=t&&(t[cz]||t[uz]);return n||null}function m3(t){return t&&(t.hasOwnProperty(f3)||t.hasOwnProperty(hle))?t[f3]:null}var cz=Nn({\u0275prov:Nn}),f3=Nn({\u0275inj:Nn}),uz=Nn({ngInjectableDef:Nn}),hle=Nn({ngInjectorDef:Nn}),he=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,e){this._desc=n,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=pe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dz(t){return t&&!!t.\u0275providers}var mle=Nn({\u0275cmp:Nn}),fle=Nn({\u0275dir:Nn}),gle=Nn({\u0275pipe:Nn}),yle=Nn({\u0275mod:Nn}),Bw=Nn({\u0275fac:Nn}),ax=Nn({__NG_ELEMENT_ID__:Nn}),g3=Nn({__NG_ENV_ID__:Nn});function ma(t){return typeof t=="string"?t:t==null?"":String(t)}function ble(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ma(t)}function pz(t,n){throw new ye(-200,t)}function vM(t,n){throw new ye(-201,!1)}var Pt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Pt||{}),pN;function hz(){return pN}function ao(t){let n=pN;return pN=t,n}function mz(t,n,e){let i=hC(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Pt.Optional)return null;if(n!==void 0)return n;vM(t,"Injector")}var xle={},pp=xle,hN="__NG_DI_FLAG__",zw=class{injector;constructor(n){this.injector=n}retrieve(n,e){let i=e;return this.injector.get(n,i.optional?ew:pp,i)}},Gw="ngTempTokenPath",vle="ngTokenPath",_le=/\n/gm,wle="\u0275",y3="__source";function Cle(t,n=Pt.Default){if(Qb()===void 0)throw new ye(-203,!1);if(Qb()===null)return mz(t,void 0,n);{let e=Qb(),i;return e instanceof zw?i=e.injector:i=e,i.get(t,n&Pt.Optional?null:void 0,n)}}function qe(t,n=Pt.Default){return(hz()||Cle)(ir(t),n)}function E(t,n=Pt.Default){return qe(t,mC(n))}function mC(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mN(t){let n=[];for(let e=0;e<t.length;e++){let i=ir(t[e]);if(Array.isArray(i)){if(i.length===0)throw new ye(900,!1);let r,o=Pt.Default;for(let s=0;s<i.length;s++){let a=i[s],l=Tle(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}n.push(qe(r,o))}else n.push(qe(i))}return n}function fz(t,n){return t[hN]=n,t.prototype[hN]=n,t}function Tle(t){return t[hN]}function Sle(t,n,e,i){let r=t[Gw];throw n[y3]&&r.unshift(n[y3]),t.message=kle(`
`+t.message,r,e,i),t[vle]=r,t[Gw]=null,t}function kle(t,n,e,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==wle?t.slice(2):t;let r=co(n);if(Array.isArray(n))r=n.map(co).join(" -> ");else if(typeof n=="object"){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):co(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(_le,`
  `)}`}var fC=fz(sz("Optional"),8);var gz=fz(sz("SkipSelf"),4);function mp(t,n){let e=t.hasOwnProperty(Bw);return e?t[Bw]:null}function Ele(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function Ile(t){return t.flat(Number.POSITIVE_INFINITY)}function _M(t,n){t.forEach(e=>Array.isArray(e)?_M(e,n):n(e))}function yz(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Uw(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Dle(t,n){let e=[];for(let i=0;i<t;i++)e.push(n);return e}function Ale(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(r===1)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;){let o=r-2;t[r]=t[o],r--}t[n]=e,t[n+1]=i}}function gC(t,n,e){let i=yx(t,n);return i>=0?t[i|1]=e:(i=~i,Ale(t,i,n,e)),i}function QA(t,n){let e=yx(t,n);if(e>=0)return t[e|1]}function yx(t,n){return Nle(t,n,1)}function Nle(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<e];if(n===s)return o<<e;s>n?r=o:i=o+1}return~(r<<e)}var ga={},lo=[],Qm=new he(""),bz=new he("",-1),xz=new he(""),Hw=class{get(n,e=pp){if(e===pp){let i=new Error(`NullInjectorError: No provider for ${co(n)}!`);throw i.name="NullInjectorError",i}return e}};function vz(t,n){let e=t[yle]||null;if(!e&&n===!0)throw new Error(`Type ${co(t)} does not have '\u0275mod' property.`);return e}function fp(t){return t[mle]||null}function _z(t){return t[fle]||null}function Mle(t){return t[gle]||null}function cf(t){return{\u0275providers:t}}function Ole(...t){return{\u0275providers:wz(!0,t),\u0275fromNgModule:!0}}function wz(t,...n){let e=[],i=new Set,r,o=s=>{e.push(s)};return _M(n,s=>{let a=s;fN(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Cz(r,o),e}function Cz(t,n){for(let e=0;e<t.length;e++){let{ngModule:i,providers:r}=t[e];wM(r,o=>{n(o,i)})}}function fN(t,n,e,i){if(t=ir(t),!t)return!1;let r=null,o=m3(t),s=!o&&fp(t);if(!o&&!s){let l=t.ngModule;if(o=m3(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)fN(c,n,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{_M(o.imports,u=>{fN(u,n,e,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Cz(c,n)}if(!a){let c=mp(r)||(()=>new r);n({provide:r,useFactory:c,deps:lo},r),n({provide:xz,useValue:r,multi:!0},r),n({provide:Qm,useValue:()=>qe(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=t;wM(l,u=>{n(u,c)})}}else return!1;return r!==t&&t.providers!==void 0}function wM(t,n){for(let e of t)dz(e)&&(e=e.\u0275providers),Array.isArray(e)?wM(e,n):n(e)}var Rle=Nn({provide:String,useValue:Nn});function Tz(t){return t!==null&&typeof t=="object"&&Rle in t}function Fle(t){return!!(t&&t.useExisting)}function Lle(t){return!!(t&&t.useFactory)}function Zm(t){return typeof t=="function"}function Ple(t){return!!t.useClass}var yC=new he(""),Rw={},b3={},ZA;function bC(){return ZA===void 0&&(ZA=new Hw),ZA}var bi=class{},lx=class extends bi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,yN(n,s=>this.processProvider(s)),this.records.set(bz,Hm(void 0,this)),r.has("environment")&&this.records.set(bi,Hm(void 0,this));let o=this.records.get(yC);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xz,lo,Pt.Self))}retrieve(n,e){let i=e;return this.get(n,i.optional?ew:pp,i)}destroy(){ox(this),this._destroyed=!0;let n=Bt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Bt(n)}}onDestroy(n){return ox(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){ox(this);let e=ll(this),i=ao(void 0),r;try{return n()}finally{ll(e),ao(i)}}get(n,e=pp,i=Pt.Default){if(ox(this),n.hasOwnProperty(g3))return n[g3](this);i=mC(i);let r,o=ll(this),s=ao(void 0);try{if(!(i&Pt.SkipSelf)){let l=this.records.get(n);if(l===void 0){let c=Gle(n)&&hC(n);c&&this.injectableDefInScope(c)?l=Hm(gN(n),Rw):l=null,this.records.set(n,l)}if(l!=null)return this.hydrate(n,l,i)}let a=i&Pt.Self?bC():this.parent;return e=i&Pt.Optional&&e===pp?null:e,a.get(n,e)}catch(a){if(a.name==="NullInjectorError"){if((a[Gw]=a[Gw]||[]).unshift(co(n)),o)throw a;return Sle(a,n,"R3InjectorError",this.source)}else throw a}finally{ao(s),ll(o)}}resolveInjectorInitializers(){let n=Bt(null),e=ll(this),i=ao(void 0),r;try{let o=this.get(Qm,lo,Pt.Self);for(let s of o)s()}finally{ll(e),ao(i),Bt(n)}}toString(){let n=[],e=this.records;for(let i of e.keys())n.push(co(i));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=ir(n);let e=Zm(n)?n:ir(n&&n.provide),i=Vle(n);if(!Zm(n)&&n.multi===!0){let r=this.records.get(e);r||(r=Hm(void 0,Rw,!0),r.factory=()=>mN(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e,i){let r=Bt(null);try{return e.value===b3?pz(co(n)):e.value===Rw&&(e.value=b3,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&zle(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Bt(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=ir(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function gN(t){let n=hC(t),e=n!==null?n.factory:mp(t);if(e!==null)return e;if(t instanceof he)throw new ye(204,!1);if(t instanceof Function)return $le(t);throw new ye(204,!1)}function $le(t){if(t.length>0)throw new ye(204,!1);let e=ple(t);return e!==null?()=>e.factory(t):()=>new t}function Vle(t){if(Tz(t))return Hm(void 0,t.useValue);{let n=Sz(t);return Hm(n,Rw)}}function Sz(t,n,e){let i;if(Zm(t)){let r=ir(t);return mp(r)||gN(r)}else if(Tz(t))i=()=>ir(t.useValue);else if(Lle(t))i=()=>t.useFactory(...mN(t.deps||[]));else if(Fle(t))i=(r,o)=>qe(ir(t.useExisting),o!==void 0&&o&Pt.Optional?Pt.Optional:void 0);else{let r=ir(t&&(t.useClass||t.provide));if(Ble(t))i=()=>new r(...mN(t.deps));else return mp(r)||gN(r)}return i}function ox(t){if(t.destroyed)throw new ye(205,!1)}function Hm(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function Ble(t){return!!t.deps}function zle(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Gle(t){return typeof t=="function"||typeof t=="object"&&t instanceof he}function yN(t,n){for(let e of t)Array.isArray(e)?yN(e,n):e&&dz(e)?yN(e.\u0275providers,n):n(e)}function Lo(t,n){let e;t instanceof lx?(ox(t),e=t):e=new zw(t);let i,r=ll(e),o=ao(void 0);try{return n()}finally{ll(r),ao(o)}}function kz(){return hz()!==void 0||Qb()!=null}function CM(t){if(!kz())throw new ye(-203,!1)}function Ule(t){return typeof t=="function"}var xl=0,Nt=1,wt=2,xr=3,Ls=4,uo=5,Jm=6,Ww=7,Mi=8,ef=9,ml=10,ti=11,cx=12,x3=13,uf=14,Fo=15,gp=16,Wm=17,fl=18,xC=19,Ez=20,gu=21,JA=22,yp=23,es=24,Xm=25,Hi=26,Iz=1;var bp=7,jw=8,tf=9,br=10;function yu(t){return Array.isArray(t)&&typeof t[Iz]=="object"}function vl(t){return Array.isArray(t)&&t[Iz]===!0}function TM(t){return(t.flags&4)!==0}function df(t){return t.componentOffset>-1}function vC(t){return(t.flags&1)===1}function ya(t){return!!t.template}function qw(t){return(t[wt]&512)!==0}function pf(t){return(t[wt]&256)===256}var bN=class{previousValue;currentValue;firstChange;constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function Dz(t,n,e,i){n!==null?n.applyValueToInputSignal(n,i):t[e]=i}var Jt=(()=>{let t=()=>Az;return t.ngInherit=!0,t})();function Az(t){return t.type.prototype.ngOnChanges&&(t.setInput=Wle),Hle}function Hle(){let t=Mz(this),n=t?.current;if(n){let e=t.previous;if(e===ga)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function Wle(t,n,e,i,r){let o=this.declaredInputs[i],s=Mz(t)||jle(t,{previous:ga,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new bN(c&&c.currentValue,e,l===ga),Dz(t,n,r,e)}var Nz="__ngSimpleChanges__";function Mz(t){return t[Nz]||null}function jle(t,n){return t[Nz]=n}var v3=null;var kn=function(t,n=null,e){v3?.(t,n,e)},Oz="svg",qle="math";function ba(t){for(;Array.isArray(t);)t=t[xl];return t}function Rz(t,n){return ba(n[t])}function _a(t,n){return ba(n[t.index])}function SM(t,n){return t.data[n]}function Fz(t,n){return t[n]}function Xle(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}function xa(t,n){let e=n[t];return yu(e)?e:e[xl]}function Kle(t){return(t[wt]&4)===4}function kM(t){return(t[wt]&128)===128}function Yle(t){return vl(t[xr])}function bu(t,n){return n==null?null:t[n]}function Lz(t){t[Wm]=0}function Pz(t){t[wt]&1024||(t[wt]|=1024,kM(t)&&hf(t))}function Qle(t,n){for(;t>0;)n=n[uf],t--;return n}function _C(t){return!!(t[wt]&9216||t[es]?.dirty)}function xN(t){t[ml].changeDetectionScheduler?.notify(8),t[wt]&64&&(t[wt]|=1024),_C(t)&&hf(t)}function hf(t){t[ml].changeDetectionScheduler?.notify(0);let n=xp(t);for(;n!==null&&!(n[wt]&8192||(n[wt]|=8192,!kM(n)));)n=xp(n)}function $z(t,n){if(pf(t))throw new ye(911,!1);t[gu]===null&&(t[gu]=[]),t[gu].push(n)}function Zle(t,n){if(t[gu]===null)return;let e=t[gu].indexOf(n);e!==-1&&t[gu].splice(e,1)}function xp(t){let n=t[xr];return vl(n)?n[xr]:n}function EM(t){return t[Ww]??=[]}function IM(t){return t.cleanup??=[]}function Jle(t,n,e,i){let r=EM(n);r.push(e),t.firstCreatePass&&IM(t).push(i,r.length-1)}var $t={lFrame:jz(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var vN=!1;function ece(){return $t.lFrame.elementDepthCount}function tce(){$t.lFrame.elementDepthCount++}function nce(){$t.lFrame.elementDepthCount--}function DM(){return $t.bindingsEnabled}function Vz(){return $t.skipHydrationRootTNode!==null}function ice(t){return $t.skipHydrationRootTNode===t}function rce(){$t.skipHydrationRootTNode=null}function bt(){return $t.lFrame.lView}function ni(){return $t.lFrame.tView}function Le(t){return $t.lFrame.contextLView=t,t[Mi]}function Pe(t){return $t.lFrame.contextLView=null,t}function vr(){let t=Bz();for(;t!==null&&t.type===64;)t=t.parent;return t}function Bz(){return $t.lFrame.currentTNode}function oce(){let t=$t.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Tp(t,n){let e=$t.lFrame;e.currentTNode=t,e.isParent=n}function AM(){return $t.lFrame.isParent}function NM(){$t.lFrame.isParent=!1}function sce(){return $t.lFrame.contextLView}function zz(){return vN}function Xw(t){let n=vN;return vN=t,n}function wC(){let t=$t.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Gz(){return $t.lFrame.bindingIndex}function ace(t){return $t.lFrame.bindingIndex=t}function Sp(){return $t.lFrame.bindingIndex++}function CC(t){let n=$t.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function lce(){return $t.lFrame.inI18n}function cce(t,n){let e=$t.lFrame;e.bindingIndex=e.bindingRootIndex=t,_N(n)}function uce(){return $t.lFrame.currentDirectiveIndex}function _N(t){$t.lFrame.currentDirectiveIndex=t}function dce(t){let n=$t.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function Uz(){return $t.lFrame.currentQueryIndex}function MM(t){$t.lFrame.currentQueryIndex=t}function pce(t){let n=t[Nt];return n.type===2?n.declTNode:n.type===1?t[uo]:null}function Hz(t,n,e){if(e&Pt.SkipSelf){let r=n,o=t;for(;r=r.parent,r===null&&!(e&Pt.Host);)if(r=pce(o),r===null||(o=o[uf],r.type&10))break;if(r===null)return!1;n=r,t=o}let i=$t.lFrame=Wz();return i.currentTNode=n,i.lView=t,!0}function OM(t){let n=Wz(),e=t[Nt];$t.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Wz(){let t=$t.lFrame,n=t===null?null:t.child;return n===null?jz(t):n}function jz(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function qz(){let t=$t.lFrame;return $t.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Xz=qz;function RM(){let t=qz();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function hce(t){return($t.lFrame.contextLView=Qle(t,$t.lFrame.contextLView))[Mi]}function wa(){return $t.lFrame.selectedIndex}function vp(t){$t.lFrame.selectedIndex=t}function TC(){let t=$t.lFrame;return SM(t.tView,t.selectedIndex)}function Ze(){$t.lFrame.currentNamespace=Oz}function mce(){return $t.lFrame.currentNamespace}var Kz=!0;function SC(){return Kz}function kC(t){Kz=t}function fce(t,n,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){let s=Az(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}r&&(e.preOrderHooks??=[]).push(0-t,r),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}function FM(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){let o=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),u!=null&&(t.destroyHooks??=[]).push(e,u)}}function Fw(t,n,e){Yz(t,n,3,e)}function Lw(t,n,e,i){(t[wt]&3)===e&&Yz(t,n,e,i)}function eN(t,n){let e=t[wt];(e&3)===n&&(e&=16383,e+=1,t[wt]=e)}function Yz(t,n,e,i){let r=i!==void 0?t[Wm]&65535:0,o=i??-1,s=n.length-1,a=0;for(let l=r;l<s;l++)if(typeof n[l+1]=="number"){if(a=n[l],i!=null&&a>=i)break}else n[l]<0&&(t[Wm]+=65536),(a<o||o==-1)&&(gce(t,e,n,l),t[Wm]=(t[Wm]&4294901760)+l+2),l++}function _3(t,n){kn(4,t,n);let e=Bt(null);try{n.call(t)}finally{Bt(e),kn(5,t,n)}}function gce(t,n,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=t[s];r?t[wt]>>14<t[Wm]>>16&&(t[wt]&3)===n&&(t[wt]+=16384,_3(a,o)):_3(a,o)}var Km=-1,_p=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,e,i){this.factory=n,this.canSeeViewProviders=e,this.injectImpl=i}};function yce(t){return(t.flags&8)!==0}function bce(t){return(t.flags&16)!==0}function xce(t,n,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];t.setAttribute(n,s,a,o)}else{let o=r,s=e[++i];vce(o)?t.setProperty(n,o,s):t.setAttribute(n,o,s),i++}}return i}function Qz(t){return t===3||t===4||t===6}function vce(t){return t.charCodeAt(0)===64}function nf(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){let r=n[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?w3(t,e,r,null,n[++i]):w3(t,e,r,null,null))}}return t}function w3(t,n,e,i,r){let o=0,s=t.length;if(n===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===e){r!==null&&(t[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(t.splice(s,0,n),o=s+1),t.splice(o++,0,e),r!==null&&t.splice(o++,0,r)}function Zz(t){return t!==Km}function Kw(t){return t&32767}function _ce(t){return t>>16}function Yw(t,n){let e=_ce(t),i=n;for(;e>0;)i=i[uf],e--;return i}var wN=!0;function Qw(t){let n=wN;return wN=t,n}var wce=256,Jz=wce-1,e4=5,Cce=0,fa={};function Tce(t,n,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(ax)&&(i=e[ax]),i==null&&(i=e[ax]=Cce++);let r=i&Jz,o=1<<r;n.data[t+(r>>e4)]|=o}function Zw(t,n){let e=t4(t,n);if(e!==-1)return e;let i=n[Nt];i.firstCreatePass&&(t.injectorIndex=n.length,tN(i.data,t),tN(n,null),tN(i.blueprint,null));let r=LM(t,n),o=t.injectorIndex;if(Zz(r)){let s=Kw(r),a=Yw(r,n),l=a[Nt].data;for(let c=0;c<8;c++)n[o+c]=a[s+c]|l[s+c]}return n[o+8]=r,o}function tN(t,n){t.push(0,0,0,0,0,0,0,0,n)}function t4(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function LM(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;r!==null;){if(i=s4(r),i===null)return Km;if(e++,r=r[uf],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Km}function CN(t,n,e){Tce(t,n,e)}function Sce(t,n){if(n==="class")return t.classes;if(n==="style")return t.styles;let e=t.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(Qz(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===n)return e[r+1];r=r+2}}}return null}function n4(t,n,e){if(e&Pt.Optional||t!==void 0)return t;vM(n,"NodeInjector")}function i4(t,n,e,i){if(e&Pt.Optional&&i===void 0&&(i=null),(e&(Pt.Self|Pt.Host))===0){let r=t[ef],o=ao(void 0);try{return r?r.get(n,i,e&Pt.Optional):mz(n,i,e&Pt.Optional)}finally{ao(o)}}return n4(i,n,e)}function r4(t,n,e,i=Pt.Default,r){if(t!==null){if(n[wt]&2048&&!(i&Pt.Self)){let s=Dce(t,n,e,i,fa);if(s!==fa)return s}let o=o4(t,n,e,i,fa);if(o!==fa)return o}return i4(n,e,i,r)}function o4(t,n,e,i,r){let o=Ece(e);if(typeof o=="function"){if(!Hz(n,t,i))return i&Pt.Host?n4(r,e,i):i4(n,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Pt.Optional))vM(e);else return s}finally{Xz()}}else if(typeof o=="number"){let s=null,a=t4(t,n),l=Km,c=i&Pt.Host?n[Fo][uo]:null;for((a===-1||i&Pt.SkipSelf)&&(l=a===-1?LM(t,n):n[a+8],l===Km||!T3(i,!1)?a=-1:(s=n[Nt],a=Kw(l),n=Yw(l,n)));a!==-1;){let u=n[Nt];if(C3(o,a,u.data)){let d=kce(a,n,e,s,i,c);if(d!==fa)return d}l=n[a+8],l!==Km&&T3(i,n[Nt].data[a+8]===c)&&C3(o,a,n)?(s=u,a=Kw(l),n=Yw(l,n)):a=-1}}return r}function kce(t,n,e,i,r,o){let s=n[Nt],a=s.data[t+8],l=i==null?df(a)&&wN:i!=s&&(a.type&3)!==0,c=r&Pt.Host&&o===a,u=Pw(a,s,e,l,c);return u!==null?ux(n,s,u,a,r):fa}function Pw(t,n,e,i,r){let o=t.providerIndexes,s=n.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=i?a:a+u,p=r?a+u:c;for(let h=d;h<p;h++){let m=s[h];if(h<l&&e===m||h>=l&&m.type===e)return h}if(r){let h=s[l];if(h&&ya(h)&&h.type===e)return l}return null}function ux(t,n,e,i,r){let o=t[e],s=n.data;if(o instanceof _p){let a=o;a.resolving&&pz(ble(s[e]));let l=Qw(a.canSeeViewProviders);a.resolving=!0;let c,u=a.injectImpl?ao(a.injectImpl):null,d=Hz(t,i,Pt.Default);try{o=t[e]=a.factory(void 0,r,s,t,i),n.firstCreatePass&&e>=i.directiveStart&&fce(e,s[e],n)}finally{u!==null&&ao(u),Qw(l),a.resolving=!1,Xz()}}return o}function Ece(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(ax)?t[ax]:void 0;return typeof n=="number"?n>=0?n&Jz:Ice:n}function C3(t,n,e){let i=1<<t;return!!(e[n+(t>>e4)]&i)}function T3(t,n){return!(t&Pt.Self)&&!(t&Pt.Host&&n)}var hp=class{_tNode;_lView;constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return r4(this._tNode,this._lView,n,mC(i),e)}};function Ice(){return new hp(vr(),bt())}function Ri(t){return gx(()=>{let n=t.prototype.constructor,e=n[Bw]||TN(n),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Bw]||TN(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function TN(t){return az(t)?()=>{let n=TN(ir(t));return n&&n()}:mp(t)}function Dce(t,n,e,i,r){let o=t,s=n;for(;o!==null&&s!==null&&s[wt]&2048&&!qw(s);){let a=o4(o,s,e,i|Pt.Self,fa);if(a!==fa)return a;let l=o.parent;if(!l){let c=s[Ez];if(c){let u=c.get(e,fa,i);if(u!==fa)return u}l=s4(s),s=s[uf]}o=l}return r}function s4(t){let n=t[Nt],e=n.type;return e===2?n.declTNode:e===1?t[uo]:null}function a4(t){return Sce(vr(),t)}function S3(t,n=null,e=null,i){let r=l4(t,n,e,i);return r.resolveInjectorInitializers(),r}function l4(t,n=null,e=null,i,r=new Set){let o=[e||lo,Ole(t)];return i=i||(typeof t=="object"?void 0:co(t)),new lx(o,n||bC(),i||null,r)}var Vt=class t{static THROW_IF_NOT_FOUND=pp;static NULL=new Hw;static create(n,e){if(Array.isArray(n))return S3({name:""},e,n,"");{let i=n.name??"";return S3({name:i},n.parent,n.providers,i)}}static \u0275prov=pe({token:t,providedIn:"any",factory:()=>qe(bz)});static __NG_ELEMENT_ID__=-1};var xu=class{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>a4(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Ace=new he("");Ace.__NG_ELEMENT_ID__=t=>{let n=vr();if(n===null)throw new ye(204,!1);if(n.type&2)return n.value;if(t&Pt.Optional)return null;throw new ye(204,!1)};var c4=!1,mf=(()=>{class t{static __NG_ELEMENT_ID__=Nce;static __NG_ENV_ID__=e=>e}return t})(),Jw=class extends mf{_lView;constructor(n){super(),this._lView=n}onDestroy(n){let e=this._lView;return pf(e)?(n(),()=>{}):($z(e,n),()=>Zle(e,n))}};function Nce(){return new Jw(bt())}var wp=class{},EC=new he("",{providedIn:"root",factory:()=>!1});var u4=new he(""),d4=new he(""),vu=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Jn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new t})}return t})();var SN=class extends Oe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,kz()&&(this.destroyRef=E(mf,{optional:!0})??void 0,this.pendingTasks=E(vu,{optional:!0})??void 0)}emit(n){let e=Bt(null);try{super.next(n)}finally{Bt(e)}}subscribe(n,e,i){let r=n,o=e||(()=>null),s=i;if(n&&typeof n=="object"){let l=n;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return n instanceof tn&&n.add(a),a}wrapInTimeout(n){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{n(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},ke=SN;function dx(...t){}function p4(t){let n,e;function i(){t=dx;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{t(),i()})),()=>i()}function k3(t){return queueMicrotask(()=>t()),()=>{t=dx}}var PM="isAngularZone",eC=PM+"_ID",Mce=0,Xe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ke(!1);onMicrotaskEmpty=new ke(!1);onStable=new ke(!1);onError=new ke(!1);constructor(n){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=c4}=n;if(typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Fce(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(PM)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ye(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,n,Oce,dx,dx);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}},Oce={};function $M(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Rce(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function n(){p4(()=>{t.callbackScheduled=!1,kN(t),t.isCheckStableRunning=!0,$M(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),kN(t)}function Fce(t){let n=()=>{Rce(t)},e=Mce++;t._inner=t._inner.fork({name:"angular",properties:{[PM]:!0,[eC]:e,[eC+e]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(Lce(l))return i.invokeTask(o,s,a,l);try{return E3(t),i.invokeTask(o,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),I3(t)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return E3(t),i.invoke(o,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Pce(l)&&n(),I3(t)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,kN(t),$M(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function kN(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function E3(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function I3(t){t._nesting--,$M(t)}var EN=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ke;onMicrotaskEmpty=new ke;onStable=new ke;onError=new ke;run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}};function Lce(t){return h4(t,"__ignore_ng_zone__")}function Pce(t){return h4(t,"__scheduler_tick__")}function h4(t,n){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[n]===!0}var $r=class{_console=console;handleError(n){this._console.error("ERROR",n)}},$ce=new he("",{providedIn:"root",factory:()=>{let t=E(Xe),n=E($r);return e=>t.runOutsideAngular(()=>n.handleError(e))}});function D3(t,n){return oz(t,n)}function Vce(t){return oz(rz,t)}var m4=(D3.required=Vce,D3);function Bce(){return ff(vr(),bt())}function ff(t,n){return new nt(_a(t,n))}var nt=(()=>{class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=Bce}return t})();function zce(t){return t instanceof nt?t.nativeElement:t}function gf(t){return typeof t=="function"&&t[Zo]!==void 0}function Ca(t,n){let e=NA(t,n?.equal),i=e[Zo];return e.set=r=>Yb(i,r),e.update=r=>MA(i,r),e.asReadonly=Gce.bind(e),e}function Gce(){let t=this[Zo];if(t.readonlyFn===void 0){let n=()=>this();n[Zo]=t,t.readonlyFn=n}return t.readonlyFn}function f4(t){return gf(t)&&typeof t.set=="function"}function Uce(){return this._results[Symbol.iterator]()}var rf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Oe}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let i=Ile(n);(this._changesDetected=!Ele(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Uce};function g4(t){return(t.flags&128)===128}var y4=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(y4||{}),b4=new Map,Hce=0;function Wce(){return Hce++}function jce(t){b4.set(t[xC],t)}function IN(t){b4.delete(t[xC])}var A3="__ngContext__";function yf(t,n){yu(n)?(t[A3]=n[xC],jce(n)):t[A3]=n}function x4(t){return _4(t[cx])}function v4(t){return _4(t[Ls])}function _4(t){for(;t!==null&&!vl(t);)t=t[Ls];return t}var DN;function w4(t){DN=t}function C4(){if(DN!==void 0)return DN;if(typeof document<"u")return document;throw new ye(210,!1)}var kp=new he("",{providedIn:"root",factory:()=>qce}),qce="ng",VM=new he(""),zr=new he("",{providedIn:"platform",factory:()=>"unknown"});var En=new he(""),bx=new he("",{providedIn:"root",factory:()=>C4().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Xce="h",Kce="b";var T4=!1,Yce=new he("",{providedIn:"root",factory:()=>T4});var BM=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(BM||{}),bf=new he(""),N3=new Set;function _l(t){N3.has(t)||(N3.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var zM=(()=>{class t{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=Qce}return t})();function Qce(){return new zM(bt(),vr())}var jm=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(jm||{}),S4=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new t})}return t})(),Zce=[jm.EarlyRead,jm.Write,jm.MixedReadWrite,jm.Read],Jce=(()=>{class t{ngZone=E(Xe);scheduler=E(wp);errorHandler=E($r,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){E(bf,{optional:!0})}execute(){let e=this.sequences.size>0;e&&kn(16),this.executing=!0;for(let i of Zce)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&kn(17)}register(e){let{view:i}=e;i!==void 0?((i[Xm]??=[]).push(e),hf(i),i[wt]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(BM.AFTER_NEXT_RENDER,e):e()}static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new t})}return t})(),AN=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,e,i,r,o,s=null){this.impl=n,this.hooks=e,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[Xm];n&&(this.view[Xm]=n.filter(e=>e!==this))}};function xf(t,n){!n?.injector&&CM(xf);let e=n?.injector??E(Vt);return _l("NgAfterRender"),k4(t,e,n,!1)}function is(t,n){!n?.injector&&CM(is);let e=n?.injector??E(Vt);return _l("NgAfterNextRender"),k4(t,e,n,!0)}function eue(t,n){if(t instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[n]=t,e}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function k4(t,n,e,i){let r=n.get(S4);r.impl??=n.get(Jce);let o=n.get(bf,null,{optional:!0}),s=e?.phase??jm.MixedReadWrite,a=e?.manualCleanup!==!0?n.get(mf):null,l=n.get(zM,null,{optional:!0}),c=new AN(r.impl,eue(t,s),l?.view,i,a,o?.snapshot(null));return r.impl.register(c),c}var tue=(t,n,e,i)=>{};function nue(t,n,e,i){tue(t,n,e,i)}var iue=()=>null;function E4(t,n,e=!1){return iue(t,n,e)}function I4(t,n){let e=t.contentQueries;if(e!==null){let i=Bt(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=t.data[s];MM(o),a.contentQueries(2,n[s],s)}}}finally{Bt(i)}}}function NN(t,n,e){MM(0);let i=Bt(null);try{n(t,e)}finally{Bt(i)}}function GM(t,n,e){if(TM(n)){let i=Bt(null);try{let r=n.directiveStart,o=n.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Bt(i)}}}var va=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(va||{}),Aw;function rue(){if(Aw===void 0&&(Aw=null,Ym.trustedTypes))try{Aw=Ym.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Aw}function IC(t){return rue()?.createHTML(t)||t}var Nw;function oue(){if(Nw===void 0&&(Nw=null,Ym.trustedTypes))try{Nw=Ym.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Nw}function M3(t){return oue()?.createHTML(t)||t}var gl=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nz})`}},MN=class extends gl{getTypeName(){return"HTML"}},ON=class extends gl{getTypeName(){return"Style"}},RN=class extends gl{getTypeName(){return"Script"}},FN=class extends gl{getTypeName(){return"URL"}},LN=class extends gl{getTypeName(){return"ResourceURL"}};function wl(t){return t instanceof gl?t.changingThisBreaksApplicationSecurity:t}function Ep(t,n){let e=sue(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${nz})`)}return e===n}function sue(t){return t instanceof gl&&t.getTypeName()||null}function D4(t){return new MN(t)}function A4(t){return new ON(t)}function N4(t){return new RN(t)}function M4(t){return new FN(t)}function O4(t){return new LN(t)}function aue(t){let n=new $N(t);return lue()?new PN(n):n}var PN=class{inertDocumentHelper;constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let e=new window.DOMParser().parseFromString(IC(n),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(n):(e.firstChild?.remove(),e)}catch{return null}}},$N=class{defaultDoc;inertDocument;constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let e=this.inertDocument.createElement("template");return e.innerHTML=IC(n),e}};function lue(){try{return!!new window.DOMParser().parseFromString(IC(""),"text/html")}catch{return!1}}var cue=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function UM(t){return t=String(t),t.match(cue)?t:"unsafe:"+t}function Cl(t){let n={};for(let e of t.split(","))n[e]=!0;return n}function xx(...t){let n={};for(let e of t)for(let i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}var R4=Cl("area,br,col,hr,img,wbr"),F4=Cl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),L4=Cl("rp,rt"),uue=xx(L4,F4),due=xx(F4,Cl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),pue=xx(L4,Cl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),O3=xx(R4,due,pue,uue),P4=Cl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hue=Cl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mue=Cl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),fue=xx(P4,hue,mue),gue=Cl("script,style,template"),VN=class{sanitizedSomething=!1;buf=[];sanitizeChildren(n){let e=n.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=xue(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=bue(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(n){let e=R3(n).toLowerCase();if(!O3.hasOwnProperty(e))return this.sanitizedSomething=!0,!gue.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=n.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!fue.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;P4[a]&&(l=UM(l)),this.buf.push(" ",s,'="',F3(l),'"')}return this.buf.push(">"),!0}endElement(n){let e=R3(n).toLowerCase();O3.hasOwnProperty(e)&&!R4.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(F3(n))}};function yue(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function bue(t){let n=t.nextSibling;if(n&&t!==n.previousSibling)throw $4(n);return n}function xue(t){let n=t.firstChild;if(n&&yue(t,n))throw $4(n);return n}function R3(t){let n=t.nodeName;return typeof n=="string"?n:"FORM"}function $4(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var vue=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_ue=/([^\#-~ |!])/g;function F3(t){return t.replace(/&/g,"&amp;").replace(vue,function(n){let e=n.charCodeAt(0),i=n.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(_ue,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Mw;function HM(t,n){let e=null;try{Mw=Mw||aue(t);let i=n?String(n):"";e=Mw.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=Mw.getInertBodyElement(i)}while(i!==o);let a=new VN().sanitizeChildren(L3(e)||e);return IC(a)}finally{if(e){let i=L3(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function L3(t){return"content"in t&&wue(t)?t.content:null}function wue(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Gr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Gr||{});function DC(t){let n=Cue();return n?M3(n.sanitize(Gr.HTML,t)||""):Ep(t,"HTML")?M3(wl(t)):HM(C4(),ma(t))}function Cue(){let t=bt();return t&&t[ml].sanitizer}var Tue=/^>|^->|<!--|-->|--!>|<!-$/g,Sue=/(<|>)/g,kue="\u200B$1\u200B";function Eue(t){return t.replace(Tue,n=>n.replace(Sue,kue))}function V4(t){return t.ownerDocument.defaultView}function B4(t){return t instanceof Function?t():t}function Iue(t,n,e){let i=t.length;for(;;){let r=t.indexOf(n,e);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=n.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}e=r+1}}var z4="ng-template";function Due(t,n,e,i){let r=0;if(i){for(;r<n.length&&typeof n[r]=="string";r+=2)if(n[r]==="class"&&Iue(n[r+1].toLowerCase(),e,0)!==-1)return!0}else if(WM(t))return!1;if(r=n.indexOf(1,r),r>-1){let o;for(;++r<n.length&&typeof(o=n[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function WM(t){return t.type===4&&t.value!==z4}function Aue(t,n,e){let i=t.type===4&&!e?z4:t.value;return n===i}function Nue(t,n,e){let i=4,r=t.attrs,o=r!==null?Rue(r):0,s=!1;for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number"){if(!s&&!Rs(i)&&!Rs(l))return!1;if(s&&Rs(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!Aue(t,l,e)||l===""&&n.length===1){if(Rs(i))return!1;s=!0}}else if(i&8){if(r===null||!Due(t,r,l,e)){if(Rs(i))return!1;s=!0}}else{let c=n[++a],u=Mue(l,r,WM(t),e);if(u===-1){if(Rs(i))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Rs(i))return!1;s=!0}}}}return Rs(i)||s}function Rs(t){return(t&1)===0}function Mue(t,n,e,i){if(n===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<n.length;){let s=n[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=n[++r];for(;typeof a=="string";)a=n[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Fue(n,t)}function G4(t,n,e=!1){for(let i=0;i<n.length;i++)if(Nue(t,n[i],e))return!0;return!1}function Oue(t){let n=t.attrs;if(n!=null){let e=n.indexOf(5);if((e&1)===0)return n[e+1]}return null}function Rue(t){for(let n=0;n<t.length;n++){let e=t[n];if(Qz(e))return n}return t.length}function Fue(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let i=t[e];if(typeof i=="number")return-1;if(i===n)return e;e++}return-1}function Lue(t,n){e:for(let e=0;e<n.length;e++){let i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function P3(t,n){return t?":not("+n.trim()+")":n}function Pue(t){let n=t[0],e=1,i=2,r="",o=!1;for(;e<t.length;){let s=t[e];if(typeof s=="string")if(i&2){let a=t[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Rs(s)&&(n+=P3(o,r),r=""),i=s,o=o||!Rs(i);e++}return r!==""&&(n+=P3(o,r)),n}function $ue(t){return t.map(Pue).join(",")}function Vue(t){let n=[],e=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&n.push(o,t[++i]):r===8&&e.push(o);else{if(!Rs(r))break;r=o}i++}return e.length&&n.push(1,...e),n}var Ur={};function Bue(t,n){return t.createText(n)}function zue(t,n,e){t.setValue(n,e)}function Gue(t,n){return t.createComment(Eue(n))}function U4(t,n,e){return t.createElement(n,e)}function tC(t,n,e,i,r){t.insertBefore(n,e,i,r)}function H4(t,n,e){t.appendChild(n,e)}function $3(t,n,e,i,r){i!==null?tC(t,n,e,i,r):H4(t,n,e)}function Uue(t,n,e){t.removeChild(null,n,e)}function Hue(t,n,e){t.setAttribute(n,"style",e)}function Wue(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function W4(t,n,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&xce(t,n,i),r!==null&&Wue(t,n,r),o!==null&&Hue(t,n,o)}function jM(t,n,e,i,r,o,s,a,l,c,u){let d=Hi+i,p=d+r,h=jue(d,p),m=typeof c=="function"?c():c;return h[Nt]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}function jue(t,n){let e=[];for(let i=0;i<n;i++)e.push(i<t?null:Ur);return e}function que(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=jM(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function qM(t,n,e,i,r,o,s,a,l,c,u){let d=n.blueprint.slice();return d[xl]=r,d[wt]=i|4|128|8|64|1024,(c!==null||t&&t[wt]&2048)&&(d[wt]|=2048),Lz(d),d[xr]=d[uf]=t,d[Mi]=e,d[ml]=s||t&&t[ml],d[ti]=a||t&&t[ti],d[ef]=l||t&&t[ef]||null,d[uo]=o,d[xC]=Wce(),d[Jm]=u,d[Ez]=c,d[Fo]=n.type==2?t[Fo]:d,d}function Xue(t,n,e){let i=_a(n,t),r=que(e),o=t[ml].rendererFactory,s=XM(t,qM(t,r,null,j4(e),i,n,null,o.createRenderer(i,e),null,null,null));return t[n.index]=s}function j4(t){let n=16;return t.signals?n=4096:t.onPush&&(n=64),n}function q4(t,n,e,i){if(e===0)return-1;let r=n.length;for(let o=0;o<e;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function XM(t,n){return t[cx]?t[x3][Ls]=n:t[cx]=n,t[x3]=n,n}function V(t=1){X4(ni(),bt(),wa()+t,!1)}function X4(t,n,e,i){if(!i)if((n[wt]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Fw(n,o,e)}else{let o=t.preOrderHooks;o!==null&&Lw(n,o,0,e)}vp(e)}var AC=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(AC||{});function BN(t,n,e,i){let r=Bt(null);try{let[o,s,a]=t.inputs[e],l=null;(s&AC.SignalBased)!==0&&(l=n[o][Zo]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(n,i)),t.setInput!==null?t.setInput(n,l,i,e,o):Dz(n,l,o,i)}finally{Bt(r)}}function K4(t,n,e,i,r){let o=wa(),s=i&2;try{vp(-1),s&&n.length>Hi&&X4(t,n,Hi,!1),kn(s?2:0,r),e(i,r)}finally{vp(o),kn(s?3:1,r)}}function NC(t,n,e){ede(t,n,e),(e.flags&64)===64&&tde(t,n,e)}function KM(t,n,e=_a){let i=n.localNames;if(i!==null){let r=n.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(n,t):t[s];t[r++]=a}}}function Kue(t,n,e,i){let o=i.get(Yce,T4)||e===va.ShadowDom,s=t.selectRootElement(n,o);return Yue(s),s}function Yue(t){Que(t)}var Que=()=>null;function Zue(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function YM(t,n,e,i,r,o,s,a){if(!a&&ZM(n,t,e,i,r)){df(n)&&Jue(e,n.index);return}if(n.type&3){let l=_a(n,e);i=Zue(i),r=s!=null?s(r,n.value||"",i):r,o.setProperty(l,i,r)}else n.type&12}function Jue(t,n){let e=xa(n,t);e[wt]&16||(e[wt]|=64)}function ede(t,n,e){let i=e.directiveStart,r=e.directiveEnd;df(e)&&Xue(n,e,t.data[i+e.componentOffset]),t.firstCreatePass||Zw(e,n);let o=e.initialInputs;for(let s=i;s<r;s++){let a=t.data[s],l=ux(n,t,s,e);if(yf(l,n),o!==null&&ode(n,s-i,l,a,e,o),ya(a)){let c=xa(e.index,n);c[Mi]=ux(n,t,s,e)}}}function tde(t,n,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=uce();try{vp(o);for(let a=i;a<r;a++){let l=t.data[a],c=n[a];_N(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&nde(l,c)}}finally{vp(-1),_N(s)}}function nde(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function QM(t,n){let e=t.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let o=e[r];G4(n,o.selectors,!1)&&(i??=[],ya(o)?i.unshift(o):i.push(o))}return i}function ide(t,n,e,i,r,o){let s=_a(t,n);rde(n[ti],s,o,t.value,e,i,r)}function rde(t,n,e,i,r,o,s){if(o==null)t.removeAttribute(n,r,e);else{let a=s==null?ma(o):s(o,i||"",r);t.setAttribute(n,r,a,e)}}function ode(t,n,e,i,r,o){let s=o[n];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];BN(i,e,l,c)}}function sde(t,n){let e=t[ef],i=e?e.get($r,null):null;i&&i.handleError(n)}function ZM(t,n,e,i,r){let o=t.inputs?.[i],s=t.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=n.data[c];BN(d,e[c],u,r),a=!0}if(o)for(let l of o){let c=e[l],u=n.data[l];BN(u,c,i,r),a=!0}return a}function ade(t,n){let e=xa(n,t),i=e[Nt];lde(i,e);let r=e[xl];r!==null&&e[Jm]===null&&(e[Jm]=E4(r,e[ef])),kn(18),JM(i,e,e[Mi]),kn(19,e[Mi])}function lde(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function JM(t,n,e){OM(n);try{let i=t.viewQuery;i!==null&&NN(1,i,e);let r=t.template;r!==null&&K4(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[fl]?.finishViewCreation(t),t.staticContentQueries&&I4(t,n),t.staticViewQueries&&NN(2,t.viewQuery,e);let o=t.components;o!==null&&cde(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[wt]&=-5,RM()}}function cde(t,n){for(let e=0;e<n.length;e++)ade(t,n[e])}function vx(t,n,e,i){let r=Bt(null);try{let o=n.tView,a=t[wt]&4096?4096:16,l=qM(t,o,e,a,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=t[n.index];l[gp]=c;let u=t[fl];return u!==null&&(l[fl]=u.createEmbeddedView(o)),JM(o,l,e),l}finally{Bt(r)}}function of(t,n){return!n||n.firstChild===null||g4(t)}var ude;function eO(t,n){return ude(t,n)}var yl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(yl||{});function tO(t){return(t.flags&32)===32}function qm(t,n,e,i,r){if(i!=null){let o,s=!1;vl(i)?o=i:yu(i)&&(s=!0,i=i[xl]);let a=ba(i);t===0&&e!==null?r==null?H4(n,e,a):tC(n,e,a,r||null,!0):t===1&&e!==null?tC(n,e,a,r||null,!0):t===2?Uue(n,a,s):t===3&&n.destroyNode(a),o!=null&&vde(n,t,o,e,r)}}function dde(t,n){Y4(t,n),n[xl]=null,n[uo]=null}function pde(t,n,e,i,r,o){i[xl]=r,i[uo]=n,RC(t,i,e,1,r,o)}function Y4(t,n){n[ml].changeDetectionScheduler?.notify(9),RC(t,n,n[ti],2,null,null)}function hde(t){let n=t[cx];if(!n)return nN(t[Nt],t);for(;n;){let e=null;if(yu(n))e=n[cx];else{let i=n[br];i&&(e=i)}if(!e){for(;n&&!n[Ls]&&n!==t;)yu(n)&&nN(n[Nt],n),n=n[xr];n===null&&(n=t),yu(n)&&nN(n[Nt],n),e=n&&n[Ls]}n=e}}function nO(t,n){let e=t[tf],i=e.indexOf(n);e.splice(i,1)}function MC(t,n){if(pf(n))return;let e=n[ti];e.destroyNode&&RC(t,n,e,3,null,null),hde(n)}function nN(t,n){if(pf(n))return;let e=Bt(null);try{n[wt]&=-129,n[wt]|=256,n[es]&&Kb(n[es]),fde(t,n),mde(t,n),n[Nt].type===1&&n[ti].destroy();let i=n[gp];if(i!==null&&vl(n[xr])){i!==n[xr]&&nO(i,n);let r=n[fl];r!==null&&r.detachView(t)}IN(n)}finally{Bt(e)}}function mde(t,n){let e=t.cleanup,i=n[Ww];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[e[s+1]];e[s].call(a)}i!==null&&(n[Ww]=null);let r=n[gu];if(r!==null){n[gu]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=n[yp];if(o!==null){n[yp]=null;for(let s of o)s.destroy()}}function fde(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=n[e[i]];if(!(r instanceof _p)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];kn(4,a,l);try{l.call(a)}finally{kn(5,a,l)}}else{kn(4,r,o);try{o.call(r)}finally{kn(5,r,o)}}}}}function Q4(t,n,e){return gde(t,n.parent,e)}function gde(t,n,e){let i=n;for(;i!==null&&i.type&168;)n=i,i=n.parent;if(i===null)return e[xl];if(df(i)){let{encapsulation:r}=t.data[i.directiveStart+i.componentOffset];if(r===va.None||r===va.Emulated)return null}return _a(i,e)}function Z4(t,n,e){return bde(t,n,e)}function yde(t,n,e){return t.type&40?_a(t,e):null}var bde=yde,V3;function OC(t,n,e,i){let r=Q4(t,i,n),o=n[ti],s=i.parent||n[uo],a=Z4(s,i,n);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)$3(o,r,e[l],a,!1);else $3(o,r,e,a,!1);V3!==void 0&&V3(o,i,n,e,r)}function sx(t,n){if(n!==null){let e=n.type;if(e&3)return _a(n,t);if(e&4)return zN(-1,t[n.index]);if(e&8){let i=n.child;if(i!==null)return sx(t,i);{let r=t[n.index];return vl(r)?zN(-1,r):ba(r)}}else{if(e&128)return sx(t,n.next);if(e&32)return eO(n,t)()||ba(t[n.index]);{let i=J4(t,n);if(i!==null){if(Array.isArray(i))return i[0];let r=xp(t[Fo]);return sx(r,i)}else return sx(t,n.next)}}}return null}function J4(t,n){if(n!==null){let i=t[Fo][uo],r=n.projection;return i.projection[r]}return null}function zN(t,n){let e=br+t+1;if(e<n.length){let i=n[e],r=i[Nt].firstChild;if(r!==null)return sx(i,r)}return n[bp]}function iO(t,n,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],l=e.type;if(s&&n===0&&(a&&yf(ba(a),i),e.flags|=2),!tO(e))if(l&8)iO(t,n,e.child,i,r,o,!1),qm(n,t,r,a,o);else if(l&32){let c=eO(e,i),u;for(;u=c();)qm(n,t,r,u,o);qm(n,t,r,a,o)}else l&16?eG(t,n,i,e,r,o):qm(n,t,r,a,o);e=s?e.projectionNext:e.next}}function RC(t,n,e,i,r,o){iO(e,i,t.firstChild,n,r,o,!1)}function xde(t,n,e){let i=n[ti],r=Q4(t,e,n),o=e.parent||n[uo],s=Z4(o,e,n);eG(i,0,n,e,r,s)}function eG(t,n,e,i,r,o){let s=e[Fo],l=s[uo].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];qm(n,t,r,u,o)}else{let c=l,u=s[xr];g4(i)&&(c.flags|=128),iO(t,n,c,u,r,o,!0)}}function vde(t,n,e,i,r){let o=e[bp],s=ba(e);o!==s&&qm(n,t,i,o,r);for(let a=br;a<e.length;a++){let l=e[a];RC(l[Nt],l,t,n,i,o)}}function _de(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:yl.DashCase;r==null?t.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=yl.Important),t.setStyle(e,i,r,o))}}function nC(t,n,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=n[e.index];o!==null&&i.push(ba(o)),vl(o)&&wde(o,i);let s=e.type;if(s&8)nC(t,n,e.child,i);else if(s&32){let a=eO(e,n),l;for(;l=a();)i.push(l)}else if(s&16){let a=J4(n,e);if(Array.isArray(a))i.push(...a);else{let l=xp(n[Fo]);nC(l[Nt],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function wde(t,n){for(let e=br;e<t.length;e++){let i=t[e],r=i[Nt].firstChild;r!==null&&nC(i[Nt],i,r,n)}t[bp]!==t[xl]&&n.push(t[bp])}function tG(t){if(t[Xm]!==null){for(let n of t[Xm])n.impl.addSequence(n);t[Xm].length=0}}var nG=[];function Cde(t){return t[es]??Tde(t)}function Tde(t){let n=nG.pop()??Object.create(kde);return n.lView=t,n}function Sde(t){t.lView[es]!==t&&(t.lView=null,nG.push(t))}var kde=At(re({},Mm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{hf(t.lView)},consumerOnSignalRead(){this.lView[es]=this}});function Ede(t){let n=t[es]??Object.create(Ide);return n.lView=t,n}var Ide=At(re({},Mm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let n=xp(t.lView);for(;n&&!iG(n[Nt]);)n=xp(n);n&&Pz(n)},consumerOnSignalRead(){this.lView[es]=this}});function iG(t){return t.type!==2}function rG(t){if(t[yp]===null)return;let n=!0;for(;n;){let e=!1;for(let i of t[yp])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));n=e&&!!(t[wt]&8192)}}var Dde=100;function oG(t,n=!0,e=0){let r=t[ml].rendererFactory,o=!1;o||r.begin?.();try{Ade(t,e)}catch(s){throw n&&sde(t,s),s}finally{o||r.end?.()}}function Ade(t,n){let e=zz();try{Xw(!0),GN(t,n);let i=0;for(;_C(t);){if(i===Dde)throw new ye(103,!1);i++,GN(t,1)}}finally{Xw(e)}}function Nde(t,n,e,i){if(pf(n))return;let r=n[wt],o=!1,s=!1;OM(n);let a=!0,l=null,c=null;o||(iG(t)?(c=Cde(n),l=Xb(c)):SA()===null?(a=!1,c=Ede(n),l=Xb(c)):n[es]&&(Kb(n[es]),n[es]=null));try{Lz(n),ace(t.bindingStartIndex),e!==null&&K4(t,n,e,2,i);let u=(r&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Fw(n,h,null)}else{let h=t.preOrderHooks;h!==null&&Lw(n,h,0,null),eN(n,0)}if(s||Mde(n),rG(n),sG(n,0),t.contentQueries!==null&&I4(t,n),!o)if(u){let h=t.contentCheckHooks;h!==null&&Fw(n,h)}else{let h=t.contentHooks;h!==null&&Lw(n,h,1),eN(n,1)}Rde(t,n);let d=t.components;d!==null&&lG(n,d,0);let p=t.viewQuery;if(p!==null&&NN(2,p,i),!o)if(u){let h=t.viewCheckHooks;h!==null&&Fw(n,h)}else{let h=t.viewHooks;h!==null&&Lw(n,h,2),eN(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[JA]){for(let h of n[JA])h();n[JA]=null}o||(tG(n),n[wt]&=-73)}catch(u){throw o||hf(n),u}finally{c!==null&&(K_(c,l),a&&Sde(c)),RM()}}function sG(t,n){for(let e=x4(t);e!==null;e=v4(e))for(let i=br;i<e.length;i++){let r=e[i];aG(r,n)}}function Mde(t){for(let n=x4(t);n!==null;n=v4(n)){if(!(n[wt]&2))continue;let e=n[tf];for(let i=0;i<e.length;i++){let r=e[i];Pz(r)}}}function Ode(t,n,e){kn(18);let i=xa(n,t);aG(i,e),kn(19,i[Mi])}function aG(t,n){kM(t)&&GN(t,n)}function GN(t,n){let i=t[Nt],r=t[wt],o=t[es],s=!!(n===0&&r&16);if(s||=!!(r&64&&n===0),s||=!!(r&1024),s||=!!(o?.dirty&&Y_(o)),s||=!1,o&&(o.dirty=!1),t[wt]&=-9217,s)Nde(i,t,i.template,t[Mi]);else if(r&8192){rG(t),sG(t,1);let a=i.components;a!==null&&lG(t,a,1),tG(t)}}function lG(t,n,e){for(let i=0;i<n.length;i++)Ode(t,n[i],e)}function Rde(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)vp(~r);else{let o=r,s=e[++i],a=e[++i];cce(s,o);let l=n[o];kn(24,l),a(2,l),kn(25,l)}}}finally{vp(-1)}}function rO(t,n){let e=zz()?64:1088;for(t[ml].changeDetectionScheduler?.notify(n);t;){t[wt]|=e;let i=xp(t);if(qw(t)&&!i)return t;t=i}return null}function cG(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function uG(t,n){let e=br+n;if(e<t.length)return t[e]}function _x(t,n,e,i=!0){let r=n[Nt];if(Fde(r,n,t,e),i){let s=zN(e,t),a=n[ti],l=a.parentNode(t[bp]);l!==null&&pde(r,t[uo],a,n,l,s)}let o=n[Jm];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function dG(t,n){let e=px(t,n);return e!==void 0&&MC(e[Nt],e),e}function px(t,n){if(t.length<=br)return;let e=br+n,i=t[e];if(i){let r=i[gp];r!==null&&r!==t&&nO(r,i),n>0&&(t[e-1][Ls]=i[Ls]);let o=Uw(t,br+n);dde(i[Nt],i);let s=o[fl];s!==null&&s.detachView(o[Nt]),i[xr]=null,i[Ls]=null,i[wt]&=-129}return i}function Fde(t,n,e,i){let r=br+i,o=e.length;i>0&&(e[r-1][Ls]=n),i<o-br?(n[Ls]=e[r],yz(e,br+i,n)):(e.push(n),n[Ls]=null),n[xr]=e;let s=n[gp];s!==null&&e!==s&&pG(s,n);let a=n[fl];a!==null&&a.insertView(t),xN(n),n[wt]|=128}function pG(t,n){let e=t[tf],i=n[xr];if(yu(i))t[wt]|=2;else{let r=i[xr][Fo];n[Fo]!==r&&(t[wt]|=2)}e===null?t[tf]=[n]:e.push(n)}var hx=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let n=this._lView,e=n[Nt];return nC(e,n,e.firstChild,[])}constructor(n,e,i=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[Mi]}set context(n){this._lView[Mi]=n}get destroyed(){return pf(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[xr];if(vl(n)){let e=n[jw],i=e?e.indexOf(this):-1;i>-1&&(px(n,i),Uw(e,i))}this._attachedToViewContainer=!1}MC(this._lView[Nt],this._lView)}onDestroy(n){$z(this._lView,n)}markForCheck(){rO(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[wt]&=-129}reattach(){xN(this._lView),this._lView[wt]|=128}detectChanges(){this._lView[wt]|=1024,oG(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=qw(this._lView),e=this._lView[gp];e!==null&&!n&&nO(e,this._lView),Y4(this._lView[Nt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=n;let e=qw(this._lView),i=this._lView[gp];i!==null&&!e&&pG(i,this._lView),xN(this._lView)}};var Vr=(()=>{class t{static __NG_ELEMENT_ID__=$de}return t})(),Lde=Vr,Pde=class extends Lde{_declarationLView;_declarationTContainer;elementRef;constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){let r=vx(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:i});return new hx(r)}};function $de(){return FC(vr(),bt())}function FC(t,n){return t.type&4?new Pde(n,t,ff(t,n)):null}function wx(t,n,e,i,r){let o=t.data[n];if(o===null)o=Vde(t,n,e,i,r),lce()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=oce();o.injectorIndex=s===null?-1:s.injectorIndex}return Tp(o,!0),o}function Vde(t,n,e,i,r){let o=Bz(),s=AM(),a=s?o:o&&o.parent,l=t.data[n]=zde(t,a,e,n,i,r);return Bde(t,l,o,s),l}function Bde(t,n,e,i){t.firstChild===null&&(t.firstChild=n),e!==null&&(i?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e))}function zde(t,n,e,i,r,o){let s=n?n.injectorIndex:-1,a=0;return Vz()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Qqe=new RegExp(`^(\\d+)*(${Kce}|${Xce})*(.*)`);var Gde=()=>null;function sf(t,n){return Gde(t,n)}var Ude=class{},hG=class{},UN=class{resolveComponentFactory(n){throw Error(`No component factory found for ${co(n)}.`)}},vf=class{static NULL=new UN},Oi=class{},hi=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Hde()}return t})();function Hde(){let t=bt(),n=vr(),e=xa(n.index,t);return(yu(e)?e:t)[ti]}var Wde=(()=>{class t{static \u0275prov=pe({token:t,providedIn:"root",factory:()=>null})}return t})();var iN={},HN=class{injector;parentInjector;constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=mC(i);let r=this.injector.get(n,iN,i);return r!==iN||e===iN?r:this.parentInjector.get(n,e,i)}};function WN(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,o=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")o=a;else if(o==1)r=dN(r,a);else if(o==2){let l=a,c=n[++s];i=dN(i,l+": "+c+";")}}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function Ae(t,n=Pt.Default){let e=bt();if(e===null)return qe(t,n);let i=vr();return r4(i,e,ir(t),n)}function oO(t,n,e,i,r){let o=i===null?null:{"":-1},s=r(t,e);if(s!==null){let a,l=null,c=null,u=qde(s);u===null?a=s:[a,l,c]=u,Yde(t,n,e,a,o,l,c)}o!==null&&i!==null&&jde(e,i,o)}function jde(t,n,e){let i=t.localNames=[];for(let r=0;r<n.length;r+=2){let o=e[n[r+1]];if(o==null)throw new ye(-301,!1);i.push(n[r],o)}}function qde(t){let n=null,e=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&ya(a)&&(n=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,Xde(s,i,o,r)),s===n&&(i??=[],i.push(s));return i!==null?(i.push(...n===null?t:t.slice(1)),[i,r,o]):null}function Xde(t,n,e,i){let r=n.length;t.findHostDirectiveDefs(t,n,i),e.set(t,[r,n.length-1])}function Kde(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function Yde(t,n,e,i,r,o,s){let a=i.length,l=!1;for(let p=0;p<a;p++){let h=i[p];!l&&ya(h)&&(l=!0,Kde(t,e,p)),CN(Zw(e,n),t,h.type)}npe(e,t.data.length,a);for(let p=0;p<a;p++){let h=i[p];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=q4(t,n,a,null);a>0&&(e.directiveToIndex=new Map);for(let p=0;p<a;p++){let h=i[p];if(e.mergedAttrs=nf(e.mergedAttrs,h.hostAttrs),Zde(t,e,n,d,h),tpe(d,h,r),s!==null&&s.has(h)){let[g,f]=s.get(h);e.directiveToIndex.set(h.type,[d,g+e.directiveStart,f+e.directiveStart])}else(o===null||!o.has(h))&&e.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(e.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(e.flags|=64);let m=h.type.prototype;!c&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!u&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}Qde(t,e,o)}function Qde(t,n,e){for(let i=n.directiveStart;i<n.directiveEnd;i++){let r=t.data[i];if(e===null||!e.has(r))B3(0,n,r,i),B3(1,n,r,i),G3(n,i,!1);else{let o=e.get(r);z3(0,n,o,i),z3(1,n,o,i),G3(n,i,!0)}}}function B3(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;t===0?s=n.inputs??={}:s=n.outputs??={},s[o]??=[],s[o].push(i),mG(n,o)}}function z3(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;t===0?a=n.hostDirectiveInputs??={}:a=n.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),mG(n,s)}}function mG(t,n){n==="class"?t.flags|=8:n==="style"&&(t.flags|=16)}function G3(t,n,e){let{attrs:i,inputs:r,hostDirectiveInputs:o}=t;if(i===null||!e&&r===null||e&&o===null||WM(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===n){s??=[],s.push(l,i[a+1]);break}}else if(e&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===n){s??=[],s.push(c[u+1],i[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Zde(t,n,e,i,r){t.data[i]=r;let o=r.factory||(r.factory=mp(r.type,!0)),s=new _p(o,ya(r),Ae);t.blueprint[i]=s,e[i]=s,Jde(t,n,i,q4(t,e,r.hostVars,Ur),r)}function Jde(t,n,e,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~n.index;epe(s)!=a&&s.push(a),s.push(e,i,o)}}function epe(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function tpe(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;ya(n)&&(e[""]=t)}}function npe(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function fG(t,n,e,i,r,o,s,a){let l=n.consts,c=bu(l,s),u=wx(n,t,2,i,c);return o&&oO(n,e,u,bu(l,a),r),u.mergedAttrs=nf(u.mergedAttrs,u.attrs),u.attrs!==null&&WN(u,u.attrs,!1),u.mergedAttrs!==null&&WN(u,u.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,u),u}function gG(t,n){FM(t,n),TM(n)&&t.queries.elementEnd(n)}var iC=class extends vf{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=fp(n);return new af(e,this.ngModule)}};function ipe(t){return Object.keys(t).map(n=>{let[e,i,r]=t[n],o={propName:e,templateName:n,isSignal:(i&AC.SignalBased)!==0};return r&&(o.transform=r),o})}function rpe(t){return Object.keys(t).map(n=>({propName:t[n],templateName:n}))}function ope(t,n,e){let i=n instanceof bi?n:n?.injector;return i&&t.getStandaloneInjector!==null&&(i=t.getStandaloneInjector(i)||i),i?new HN(e,i):e}function spe(t){let n=t.get(Oi,null);if(n===null)throw new ye(407,!1);let e=t.get(Wde,null),i=t.get(wp,null);return{rendererFactory:n,sanitizer:e,changeDetectionScheduler:i}}function ape(t,n){let e=(t.selectors[0][0]||"div").toLowerCase();return U4(n,e,e==="svg"?Oz:e==="math"?qle:null)}var af=class extends hG{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ipe(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=rpe(this.componentDef.outputs),this.cachedOutputs}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=$ue(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!e}create(n,e,i,r){kn(22);let o=Bt(null);try{let s=this.componentDef,a=i?["ng-version","19.2.12"]:Vue(this.componentDef.selectors[0]),l=jM(0,null,null,1,0,null,null,null,null,[a],null),c=ope(s,r||this.ngModule,n),u=spe(c),d=u.rendererFactory.createRenderer(null,s),p=i?Kue(d,i,s.encapsulation,c):ape(s,d),h=qM(null,l,null,512|j4(s),null,null,u,d,c,null,E4(p,c,!0));h[Hi]=p,OM(h);let m=null;try{let g=fG(Hi,l,h,"#host",()=>[this.componentDef],!0,0);p&&(W4(d,p,g),yf(p,h)),NC(l,h,g),GM(l,g,h),gG(l,g),e!==void 0&&lpe(g,this.ngContentSelectors,e),m=xa(g.index,h),h[Mi]=m[Mi],JM(l,h,null)}catch(g){throw m!==null&&IN(m),IN(h),g}finally{kn(23),RM()}return new jN(this.componentType,h)}finally{Bt(o)}}},jN=class extends Ude{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,e){super(),this._rootLView=e,this._tNode=SM(e[Nt],Hi),this.location=ff(this._tNode,e),this.instance=xa(this._tNode.index,e)[Mi],this.hostView=this.changeDetectorRef=new hx(e,void 0,!1),this.componentType=n}setInput(n,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let r=this._rootLView,o=ZM(i,r[Nt],r,n,e);this.previousInputValues.set(n,e);let s=xa(i.index,r);rO(s,1)}get injector(){return new hp(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function lpe(t,n,e){let i=t.projection=[];for(let r=0;r<n.length;r++){let o=e[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Wi=(()=>{class t{static __NG_ELEMENT_ID__=cpe}return t})();function cpe(){let t=vr();return bG(t,bt())}var upe=Wi,yG=class extends upe{_lContainer;_hostTNode;_hostLView;constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return ff(this._hostTNode,this._hostLView)}get injector(){return new hp(this._hostTNode,this._hostLView)}get parentInjector(){let n=LM(this._hostTNode,this._hostLView);if(Zz(n)){let e=Yw(n,this._hostLView),i=Kw(n),r=e[Nt].data[i+8];return new hp(r,e)}else return new hp(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=U3(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-br}createEmbeddedView(n,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=sf(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,of(this._hostTNode,s)),a}createComponent(n,e,i,r,o){let s=n&&!Ule(n),a;if(s)a=e;else{let m=e||{};a=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let l=s?n:new af(fp(n)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let g=(s?c:this.parentInjector).get(bi,null);g&&(o=g)}let u=fp(l.componentType??{}),d=sf(this._lContainer,u?.id??null),p=d?.firstChild??null,h=l.create(c,r,p,o);return this.insertImpl(h.hostView,a,of(this._hostTNode,d)),h}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){let r=n._lView;if(Yle(r)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let l=r[xr],c=new yG(l,l[uo],l[xr]);c.detach(c.indexOf(n))}}let o=this._adjustIndex(e),s=this._lContainer;return _x(s,r,o,i),n.attachToViewContainerRef(),yz(rN(s),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=U3(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),i=px(this._lContainer,e);i&&(Uw(rN(this._lContainer),e),MC(i[Nt],i))}detach(n){let e=this._adjustIndex(n,-1),i=px(this._lContainer,e);return i&&Uw(rN(this._lContainer),e)!=null?new hx(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function U3(t){return t[jw]}function rN(t){return t[jw]||(t[jw]=[])}function bG(t,n){let e,i=n[t.index];return vl(i)?e=i:(e=cG(i,n,null,t),n[t.index]=e,XM(n,e)),ppe(e,n,t,i),new yG(e,t,n)}function dpe(t,n){let e=t[ti],i=e.createComment(""),r=_a(n,t),o=e.parentNode(r);return tC(e,o,i,e.nextSibling(r),!1),i}var ppe=fpe,hpe=()=>!1;function mpe(t,n,e){return hpe(t,n,e)}function fpe(t,n,e,i){if(t[bp])return;let r;e.type&8?r=ba(i):r=dpe(n,e),t[bp]=r}var qN=class t{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},XN=class t{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let i=n.contentQueries!==null?n.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)sO(n,e).matches!==null&&this.queries[e].setDirty()}},rC=class{flags;read;predicate;constructor(n,e,i=null){this.flags=e,this.read=i,typeof n=="string"?this.predicate=Cpe(n):this.predicate=n}},KN=class t{queries;constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new t(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},YN=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,e=-1){this.metadata=n,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=n.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(n,e,gpe(e,o)),this.matchTNodeWithReadOption(n,e,Pw(e,n,o,!1,!1))}else i===Vr?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Pw(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===nt||r===Wi||r===Vr&&e.type&4)this.addMatch(e.index,-2);else{let o=Pw(e,n,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function gpe(t,n){let e=t.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1]}return null}function ype(t,n){return t.type&11?ff(t,n):t.type&4?FC(t,n):null}function bpe(t,n,e,i){return e===-1?ype(n,t):e===-2?xpe(t,n,i):ux(t,t[Nt],e,n)}function xpe(t,n,e){if(e===nt)return ff(n,t);if(e===Vr)return FC(n,t);if(e===Wi)return bG(n,t)}function xG(t,n,e,i){let r=n[fl].queries[i];if(r.matches===null){let o=t.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(bpe(n,u,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function QN(t,n,e,i){let r=t.queries.getByIndex(e),o=r.matches;if(o!==null){let s=xG(t,n,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],u=n[-l];for(let d=br;d<u.length;d++){let p=u[d];p[gp]===p[xr]&&QN(p[Nt],p,c,i)}if(u[tf]!==null){let d=u[tf];for(let p=0;p<d.length;p++){let h=d[p];QN(h[Nt],h,c,i)}}}}}return i}function vpe(t,n){return t[fl].queries[n].queryList}function vG(t,n,e){let i=new rf((e&4)===4);return Jle(t,n,i,i.destroy),(n[fl]??=new XN).queries.push(new qN(i))-1}function _pe(t,n,e){let i=ni();return i.firstCreatePass&&(_G(i,new rC(t,n,e),-1),(n&2)===2&&(i.staticViewQueries=!0)),vG(i,bt(),n)}function wpe(t,n,e,i){let r=ni();if(r.firstCreatePass){let o=vr();_G(r,new rC(n,e,i),o.index),Tpe(r,t),(e&2)===2&&(r.staticContentQueries=!0)}return vG(r,bt(),e)}function Cpe(t){return t.split(",").map(n=>n.trim())}function _G(t,n,e){t.queries===null&&(t.queries=new KN),t.queries.track(new YN(n,e))}function Tpe(t,n){let e=t.contentQueries||(t.contentQueries=[]),i=e.length?e[e.length-1]:-1;n!==i&&e.push(t.queries.length-1,n)}function sO(t,n){return t.queries.getByIndex(n)}function Spe(t,n){let e=t[Nt],i=sO(e,n);return i.crossesNgTemplate?QN(e,t,n,[]):xG(e,t,i,n)}var bl=class{},aO=class{};var ZN=class extends bl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new iC(this);constructor(n,e,i,r=!0){super(),this.ngModuleType=n,this._parent=e;let o=vz(n);this._bootstrapComponents=B4(o.bootstrap),this._r3Injector=l4(n,e,[{provide:bl,useValue:this},{provide:vf,useValue:this.componentFactoryResolver},...i],co(n),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},JN=class extends aO{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new ZN(this.moduleType,n,[])}};var oC=class extends bl{injector;componentFactoryResolver=new iC(this);instance=null;constructor(n){super();let e=new lx([...n.providers,{provide:bl,useValue:this},{provide:vf,useValue:this.componentFactoryResolver}],n.parent||bC(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function LC(t,n,e=null){return new oC({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var kpe=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=wz(!1,e.type),r=i.length>0?LC([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=pe({token:t,providedIn:"environment",factory:()=>new t(qe(bi))})}return t})();function Ne(t){return gx(()=>{let n=CG(t),e=At(re({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===y4.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:n.standalone?r=>r.get(kpe).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||va.Emulated,styles:t.styles||lo,_:null,schemas:t.schemas||null,tView:null,id:""});n.standalone&&_l("NgStandalone"),TG(e);let i=t.dependencies;return e.directiveDefs=H3(i,!1),e.pipeDefs=H3(i,!0),e.id=Npe(e),e})}function Epe(t){return fp(t)||_z(t)}function Ipe(t){return t!==null}function Be(t){return gx(()=>({type:t.type,bootstrap:t.bootstrap||lo,declarations:t.declarations||lo,imports:t.imports||lo,exports:t.exports||lo,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Dpe(t,n){if(t==null)return ga;let e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=AC.None,l=null),e[o]=[i,a,l],n[o]=s}return e}function Ape(t){if(t==null)return ga;let n={};for(let e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function st(t){return gx(()=>{let n=CG(t);return TG(n),n})}function wG(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function CG(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputConfig:t.inputs||ga,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||lo,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Dpe(t.inputs,n),outputs:Ape(t.outputs),debugInfo:null}}function TG(t){t.features?.forEach(n=>n(t))}function H3(t,n){if(!t)return null;let e=n?Mle:Epe;return()=>(typeof t=="function"?t():t).map(i=>e(i)).filter(Ipe)}function Npe(t){let n=0,e=typeof t.consts=="function"?"":t.consts,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,e,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of i.join("|"))n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function Mpe(t){return Object.getPrototypeOf(t.prototype).constructor}function Mn(t){let n=Mpe(t.type),e=!0,i=[t];for(;n;){let r;if(ya(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new ye(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);let s=t;s.inputs=oN(t.inputs),s.declaredInputs=oN(t.declaredInputs),s.outputs=oN(t.outputs);let a=r.hostBindings;a&&Ppe(t,a);let l=r.viewQuery,c=r.contentQueries;if(l&&Fpe(t,l),c&&Lpe(t,c),Ope(t,r),ule(t.outputs,r.outputs),ya(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Mn&&(e=!1)}}n=Object.getPrototypeOf(n)}Rpe(i)}function Ope(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let i=n.inputs[e];i!==void 0&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e])}}function Rpe(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=nf(r.hostAttrs,e=nf(e,r.hostAttrs))}}function oN(t){return t===ga?{}:t===lo?[]:t}function Fpe(t,n){let e=t.viewQuery;e?t.viewQuery=(i,r)=>{n(i,r),e(i,r)}:t.viewQuery=n}function Lpe(t,n){let e=t.contentQueries;e?t.contentQueries=(i,r,o)=>{n(i,r,o),e(i,r,o)}:t.contentQueries=n}function Ppe(t,n){let e=t.hostBindings;e?t.hostBindings=(i,r)=>{n(i,r),e(i,r)}:t.hostBindings=n}function SG(t){let n=e=>{let i=Array.isArray(t);e.hostDirectives===null?(e.findHostDirectiveDefs=kG,e.hostDirectives=i?t.map(eM):[t]):i?e.hostDirectives.unshift(...t.map(eM)):e.hostDirectives.unshift(t)};return n.ngInherit=!0,n}function kG(t,n,e){if(t.hostDirectives!==null)for(let i of t.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)W3(eM(o),n,e)}else W3(i,n,e)}function W3(t,n,e){let i=_z(t.directive);$pe(i.declaredInputs,t.inputs),kG(i,n,e),e.set(i,t),n.push(i)}function eM(t){return typeof t=="function"?{directive:ir(t),inputs:ga,outputs:ga}:{directive:ir(t.directive),inputs:j3(t.inputs),outputs:j3(t.outputs)}}function j3(t){if(t===void 0||t.length===0)return ga;let n={};for(let e=0;e<t.length;e+=2)n[t[e]]=t[e+1];return n}function $pe(t,n){for(let e in n)if(n.hasOwnProperty(e)){let i=n[e],r=t[e];t[i]=r}}function EG(t){return Bpe(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Vpe(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{let e=t[Symbol.iterator](),i;for(;!(i=e.next()).done;)n(i.value)}}function Bpe(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function lO(t,n,e){return t[n]=e}function zpe(t,n){return t[n]}function ts(t,n,e){let i=t[n];return Object.is(i,e)?!1:(t[n]=e,!0)}function sC(t,n,e,i){let r=ts(t,n,e);return ts(t,n+1,i)||r}function Gpe(t,n,e,i,r,o){let s=sC(t,n,e,i);return sC(t,n+2,r,o)||s}function Upe(t,n,e,i,r,o,s,a,l){let c=n.consts,u=wx(n,t,4,s||null,a||null);DM()&&oO(n,e,u,bu(c,l),QM),u.mergedAttrs=nf(u.mergedAttrs,u.attrs),FM(n,u);let d=u.tView=jM(2,u,i,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return n.queries!==null&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}function aC(t,n,e,i,r,o,s,a,l,c){let u=e+Hi,d=n.firstCreatePass?Upe(u,n,t,i,r,o,s,a,l):n.data[u];Tp(d,!1);let p=Hpe(n,t,d,e);SC()&&OC(n,t,p,d),yf(p,t);let h=cG(p,t,p,d);return t[u]=h,XM(t,h),mpe(h,d,t),vC(d)&&NC(n,t,d),l!=null&&KM(t,d,c),d}function be(t,n,e,i,r,o,s,a){let l=bt(),c=ni(),u=bu(c.consts,o);return aC(l,c,t,n,e,i,r,u,s,a),be}var Hpe=Wpe;function Wpe(t,n,e,i){return kC(!0),n[ti].createComment("")}var cO=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var IG=new he("");var DG=(()=>{class t{static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new tM})}return t})(),tM=class{queuedEffectCount=0;queues=new Map;schedule(n){this.enqueue(n)}remove(n){let e=n.zone,i=this.queues.get(e);i.has(n)&&(i.delete(n),this.queuedEffectCount--)}enqueue(n){let e=n.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(n)||(this.queuedEffectCount++,i.add(n))}flush(){for(;this.queuedEffectCount>0;)for(let[n,e]of this.queues)n===null?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(let e of n)n.delete(e),this.queuedEffectCount--,e.run()}};function Ip(t){return!!t&&typeof t.then=="function"}function AG(t){return!!t&&typeof t.subscribe=="function"}var jpe=new he("");var NG=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=E(jpe,{optional:!0})??[];injector=E(Vt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=Lo(this.injector,r);if(Ip(o))e.push(o);else if(AG(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),uO=new he("");function qpe(){AA(()=>{throw new ye(600,!1)})}function Xpe(t){return t.isBoundToModule}var Kpe=10;var Br=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=E($ce);afterRenderManager=E(S4);zonelessEnabled=E(EC);rootEffectScheduler=E(DG);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Oe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=E(vu).hasPendingTasks.pipe(ot(e=>!e));constructor(){E(bf,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=E(bi);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Vt.NULL){kn(10);let o=e instanceof hG;if(!this._injector.get(NG).done){let h="";throw new ye(405,h)}let a;o?a=e:a=this._injector.get(vf).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let l=Xpe(a)?void 0:this._injector.get(bl),c=i||a.selector,u=a.create(r,[],c,l),d=u.location.nativeElement,p=u.injector.get(IG,null);return p?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),$w(this.components,u),p?.unregisterApplication(d)}),this._loadComponent(u),kn(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){kn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(BM.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ye(101,!1);let e=Bt(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Bt(e),this.afterTick.next(),kn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Oi,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<Kpe;)kn(14),this.synchronizeOnce(),kn(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)Ype(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>_C(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;$w(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(uO,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>$w(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new ye(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $w(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function Ype(t,n,e,i){if(!e&&!_C(t))return;oG(t,n,e&&!i?0:1)}function $e(t,n,e,i){let r=bt(),o=Sp();if(ts(r,o,n)){let s=ni(),a=TC();ide(a,r,t,n,e,i)}return $e}function MG(t,n,e,i){return ts(t,Sp(),e)?n+ma(e)+i:Ur}function Qpe(t,n,e,i,r,o){let s=Gz(),a=sC(t,s,e,r);return CC(2),a?n+ma(e)+i+ma(r)+o:Ur}function Zpe(t,n,e,i,r,o,s,a,l,c){let u=Gz(),d=Gpe(t,u,e,r,s,l);return CC(4),d?n+ma(e)+i+ma(r)+o+ma(s)+a+ma(l)+c:Ur}function Ow(t,n){return t<<17|n<<2}function Cp(t){return t>>17&32767}function Jpe(t){return(t&2)==2}function ehe(t,n){return t&131071|n<<17}function nM(t){return t|2}function lf(t){return(t&131068)>>2}function sN(t,n){return t&-131069|n<<2}function the(t){return(t&1)===1}function iM(t){return t|1}function nhe(t,n,e,i,r,o){let s=o?n.classBindings:n.styleBindings,a=Cp(s),l=lf(s);t[i]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||yx(d,u)>0)&&(c=!0)}else u=e;if(r)if(l!==0){let p=Cp(t[a+1]);t[i+1]=Ow(p,a),p!==0&&(t[p+1]=sN(t[p+1],i)),t[a+1]=ehe(t[a+1],i)}else t[i+1]=Ow(a,0),a!==0&&(t[a+1]=sN(t[a+1],i)),a=i;else t[i+1]=Ow(l,0),a===0?a=i:t[l+1]=sN(t[l+1],i),l=i;c&&(t[i+1]=nM(t[i+1])),q3(t,u,i,!0),q3(t,u,i,!1),ihe(n,u,t,i,o),s=Ow(a,l),o?n.classBindings=s:n.styleBindings=s}function ihe(t,n,e,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof n=="string"&&yx(o,n)>=0&&(e[i+1]=iM(e[i+1]))}function q3(t,n,e,i){let r=t[e+1],o=n===null,s=i?Cp(r):lf(r),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];rhe(l,n)&&(a=!0,t[s+1]=i?iM(c):nM(c)),s=i?Cp(c):lf(c)}a&&(t[e+1]=i?nM(r):iM(r))}function rhe(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?yx(t,n)>=0:!1}var Fs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ohe(t){return t.substring(Fs.key,Fs.keyEnd)}function she(t){return ahe(t),OG(t,RG(t,0,Fs.textEnd))}function OG(t,n){let e=Fs.textEnd;return e===n?-1:(n=Fs.keyEnd=lhe(t,Fs.key=n,e),RG(t,n,e))}function ahe(t){Fs.key=0,Fs.keyEnd=0,Fs.value=0,Fs.valueEnd=0,Fs.textEnd=t.length}function RG(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function lhe(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}function J(t,n,e){let i=bt(),r=Sp();if(ts(i,r,n)){let o=ni(),s=TC();YM(o,s,i,t,n,i[ti],e,!1)}return J}function rM(t,n,e,i,r){ZM(n,t,e,r?"class":"style",i)}function Fi(t,n,e){return LG(t,n,e,!1),Fi}function rt(t,n){return LG(t,n,null,!0),rt}function Hr(t){PG(mhe,FG,t,!0)}function FG(t,n){for(let e=she(n);e>=0;e=OG(n,e))gC(t,ohe(n),!0)}function LG(t,n,e,i){let r=bt(),o=ni(),s=CC(2);if(o.firstUpdatePass&&VG(o,t,s,i),n!==Ur&&ts(r,s,n)){let a=o.data[wa()];BG(o,a,r,r[ti],t,r[s+1]=ghe(n,e),i,s)}}function PG(t,n,e,i){let r=ni(),o=CC(2);r.firstUpdatePass&&VG(r,null,o,i);let s=bt();if(e!==Ur&&ts(s,o,e)){let a=r.data[wa()];if(zG(a,i)&&!$G(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=dN(l,e||"")),rM(r,a,s,e,i)}else fhe(r,a,s,s[ti],s[o+1],s[o+1]=hhe(t,n,e),i,o)}}function $G(t,n){return n>=t.expandoStartIndex}function VG(t,n,e,i){let r=t.data;if(r[e+1]===null){let o=r[wa()],s=$G(t,e);zG(o,i)&&n===null&&!s&&(n=!1),n=che(r,o,n,i),nhe(r,o,n,e,s,i)}}function che(t,n,e,i){let r=dce(t),o=i?n.residualClasses:n.residualStyles;if(r===null)(i?n.classBindings:n.styleBindings)===0&&(e=aN(null,t,n,e,i),e=mx(e,n.attrs,i),o=null);else{let s=n.directiveStylingLast;if(s===-1||t[s]!==r)if(e=aN(r,t,n,e,i),o===null){let l=uhe(t,n,i);l!==void 0&&Array.isArray(l)&&(l=aN(null,t,n,l[1],i),l=mx(l,n.attrs,i),dhe(t,n,i,l))}else o=phe(t,n,i)}return o!==void 0&&(i?n.residualClasses=o:n.residualStyles=o),e}function uhe(t,n,e){let i=e?n.classBindings:n.styleBindings;if(lf(i)!==0)return t[Cp(i)]}function dhe(t,n,e,i){let r=e?n.classBindings:n.styleBindings;t[Cp(r)]=i}function phe(t,n,e){let i,r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=mx(i,s,e)}return mx(i,n.attrs,e)}function aN(t,n,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=n[a],i=mx(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(e.directiveStylingLast=a),i}function mx(t,n,e){let i=e?1:2,r=-1;if(n!==null)for(let o=0;o<n.length;o++){let s=n[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),gC(t,s,e?!0:n[++o]))}return t===void 0?null:t}function hhe(t,n,e){if(e==null||e==="")return lo;let i=[],r=wl(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&n(i,r);return i}function mhe(t,n,e){let i=String(n);i!==""&&!i.includes(" ")&&gC(t,i,e)}function fhe(t,n,e,i,r,o,s,a){r===Ur&&(r=lo);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let p=l<r.length?r[l+1]:void 0,h=c<o.length?o[c+1]:void 0,m=null,g;u===d?(l+=2,c+=2,p!==h&&(m=d,g=h)):d===null||u!==null&&u<d?(l+=2,m=u):(c+=2,m=d,g=h),m!==null&&BG(t,n,e,i,m,g,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}function BG(t,n,e,i,r,o,s,a){if(!(n.type&3))return;let l=t.data,c=l[a+1],u=the(c)?X3(l,n,e,r,lf(c),s):void 0;if(!lC(u)){lC(o)||Jpe(c)&&(o=X3(l,null,e,r,a,s));let d=Rz(wa(),e);_de(i,s,d,r,o)}}function X3(t,n,e,i,r,o){let s=n===null,a;for(;r>0;){let l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,p=e[r+1];p===Ur&&(p=d?lo:void 0);let h=d?QA(p,i):u===i?p:void 0;if(c&&!lC(h)&&(h=QA(l,i)),lC(h)&&(a=h,s))return a;let m=t[r+1];r=s?Cp(m):lf(m)}if(n!==null){let l=o?n.residualClasses:n.residualStyles;l!=null&&(a=QA(l,i))}return a}function lC(t){return t!==void 0}function ghe(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=co(wl(t)))),t}function zG(t,n){return(t.flags&(n?8:16))!==0}function PC(t,n,e){let i=bt(),r=MG(i,t,n,e);PG(gC,FG,r,!0)}var oM=class{destroy(n){}updateValue(n,e){}swap(n,e){let i=Math.min(n,e),r=Math.max(n,e),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(n,e){this.attach(e,this.detach(n))}};function lN(t,n,e,i,r){return t===e&&Object.is(n,i)?1:Object.is(r(t,n),r(e,i))?-1:0}function yhe(t,n,e){let i,r,o=0,s=t.length-1,a=void 0;if(Array.isArray(n)){let l=n.length-1;for(;o<=s&&o<=l;){let c=t.at(o),u=n[o],d=lN(o,c,o,u,e);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let p=t.at(s),h=n[l],m=lN(s,p,l,h,e);if(m!==0){m<0&&t.updateValue(s,h),s--,l--;continue}let g=e(o,c),f=e(s,p),y=e(o,u);if(Object.is(y,f)){let b=e(l,h);Object.is(b,g)?(t.swap(o,s),t.updateValue(s,h),l--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(i??=new cC,r??=Y3(t,o,s,e),sM(t,i,o,y))t.updateValue(o,u),o++,s++;else if(r.has(y))i.set(g,t.detach(o)),s--;else{let b=t.create(o,n[o]);t.attach(o,b),o++,s++}}for(;o<=l;)K3(t,i,e,o,n[o]),o++}else if(n!=null){let l=n[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=t.at(o),d=c.value,p=lN(o,u,o,d,e);if(p!==0)p<0&&t.updateValue(o,d),o++,c=l.next();else{i??=new cC,r??=Y3(t,o,s,e);let h=e(o,d);if(sM(t,i,o,h))t.updateValue(o,d),o++,s++,c=l.next();else if(!r.has(h))t.attach(o,t.create(o,d)),o++,s++,c=l.next();else{let m=e(o,u);i.set(m,t.detach(o)),s--}}}for(;!c.done;)K3(t,i,e,t.length,c.value),c=l.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(l=>{t.destroy(l)})}function sM(t,n,e,i){return n!==void 0&&n.has(i)?(t.attach(e,n.get(i)),n.delete(i),!0):!1}function K3(t,n,e,i,r){if(sM(t,n,i,e(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function Y3(t,n,e,i){let r=new Set;for(let o=n;o<=e;o++)r.add(i(o,t.at(o)));return r}var cC=class{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let e=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let i=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,i]of this.kvMap)if(n(i,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),n(i,e)}}};function Li(t,n){_l("NgControlFlow");let e=bt(),i=Sp(),r=e[i]!==Ur?e[i]:-1,o=r!==-1?uC(e,Hi+r):void 0,s=0;if(ts(e,i,t)){let a=Bt(null);try{if(o!==void 0&&dG(o,s),t!==-1){let l=Hi+t,c=uC(e,l),u=uM(e[Nt],l),d=sf(c,u.tView.ssrId),p=vx(e,u,n,{dehydratedView:d});_x(c,p,s,of(u,d))}}finally{Bt(a)}}else if(o!==void 0){let a=uG(o,s);a!==void 0&&(a[Mi]=n)}}var aM=class{lContainer;$implicit;$index;constructor(n,e,i){this.lContainer=n,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-br}};function GG(t){return t}var lM=class{hasEmptyBlock;trackByFn;liveCollection;constructor(n,e,i){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=i}};function UG(t,n,e,i,r,o,s,a,l,c,u,d,p){_l("NgControlFlow");let h=bt(),m=ni(),g=l!==void 0,f=bt(),y=a?s.bind(f[Fo][Mi]):s,b=new lM(g,y);f[Hi+t]=b,aC(h,m,t+1,n,e,i,r,bu(m.consts,o)),g&&aC(h,m,t+2,l,c,u,d,bu(m.consts,p))}var cM=class extends oM{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,e,i){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=i}get length(){return this.lContainer.length-br}at(n){return this.getLView(n)[Mi].$implicit}attach(n,e){let i=e[Jm];this.needsIndexUpdate||=n!==this.length,_x(this.lContainer,e,n,of(this.templateTNode,i))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,bhe(this.lContainer,n)}create(n,e){let i=sf(this.lContainer,this.templateTNode.tView.ssrId),r=vx(this.hostLView,this.templateTNode,new aM(this.lContainer,e,n),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(n){MC(n[Nt],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[Mi].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[Mi].$index=n}getLView(n){return xhe(this.lContainer,n)}};function HG(t){let n=Bt(null),e=wa();try{let i=bt(),r=i[Nt],o=i[e],s=e+1,a=uC(i,s);if(o.liveCollection===void 0){let c=uM(r,s);o.liveCollection=new cM(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(yhe(l,t,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=Sp(),u=l.length===0;if(ts(i,c,u)){let d=e+2,p=uC(i,d);if(u){let h=uM(r,d),m=sf(p,h.tView.ssrId),g=vx(i,h,void 0,{dehydratedView:m});_x(p,g,0,of(h,m))}else dG(p,0)}}}finally{Bt(n)}}function uC(t,n){return t[n]}function bhe(t,n){return px(t,n)}function xhe(t,n){return uG(t,n)}function uM(t,n){return SM(t,n)}function M(t,n,e,i){let r=bt(),o=ni(),s=Hi+t,a=r[ti],l=o.firstCreatePass?fG(s,o,r,n,QM,DM(),e,i):o.data[s],c=vhe(o,r,l,a,n,t);r[s]=c;let u=vC(l);return Tp(l,!0),W4(a,c,l),!tO(l)&&SC()&&OC(o,r,c,l),(ece()===0||u)&&yf(c,r),tce(),u&&(NC(o,r,l),GM(o,l,r)),i!==null&&KM(r,l),M}function O(){let t=vr();AM()?NM():(t=t.parent,Tp(t,!1));let n=t;ice(n)&&rce(),nce();let e=ni();return e.firstCreatePass&&gG(e,n),n.classesWithoutHost!=null&&yce(n)&&rM(e,n,bt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&bce(n)&&rM(e,n,bt(),n.stylesWithoutHost,!1),O}function Ee(t,n,e,i){return M(t,n,e,i),O(),Ee}var vhe=(t,n,e,i,r,o)=>(kC(!0),U4(i,r,mce()));function _he(t,n,e,i,r){let o=n.consts,s=bu(o,i),a=wx(n,t,8,"ng-container",s);s!==null&&WN(a,s,!0);let l=bu(o,r);return DM()&&oO(n,e,a,l,QM),a.mergedAttrs=nf(a.mergedAttrs,a.attrs),n.queries!==null&&n.queries.elementStart(n,a),a}function Ps(t,n,e){let i=bt(),r=ni(),o=t+Hi,s=r.firstCreatePass?_he(o,r,i,n,e):r.data[o];Tp(s,!0);let a=whe(r,i,s,t);return i[o]=a,SC()&&OC(r,i,a,s),yf(a,i),vC(s)&&(NC(r,i,s),GM(r,s,i)),e!=null&&KM(i,s),Ps}function $s(){let t=vr(),n=ni();return AM()?NM():(t=t.parent,Tp(t,!1)),n.firstCreatePass&&(FM(n,t),TM(t)&&n.queries.elementEnd(t)),$s}function $C(t,n,e){return Ps(t,n,e),$s(),$C}var whe=(t,n,e,i)=>(kC(!0),Gue(n[ti],""));function qt(){return bt()}function Tl(t,n,e){let i=bt(),r=Sp();if(ts(i,r,n)){let o=ni(),s=TC();YM(o,s,i,t,n,i[ti],e,!0)}return Tl}var dC="en-US";var Che=dC;function The(t){typeof t=="string"&&(Che=t.toLowerCase().replace(/_/g,"-"))}function Q3(t,n,e){return function i(r){if(r===Function)return e;let o=df(t)?xa(t.index,n):n;rO(o,5);let s=n[Mi],a=Z3(n,s,e,r),l=i.__ngNextListenerFn__;for(;l;)a=Z3(n,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function Z3(t,n,e,i){let r=Bt(null);try{return kn(6,n,e),e(i)!==!1}catch(o){return She(t,o),!1}finally{kn(7,n,e),Bt(r)}}function She(t,n){let e=t[ef],i=e?e.get($r,null):null;i&&i.handleError(n)}function J3(t,n,e,i,r,o){let s=n[e],a=n[Nt],c=a.data[e].outputs[i],u=s[c],d=a.firstCreatePass?IM(a):null,p=EM(n),h=u.subscribe(o),m=p.length;p.push(o,h),d&&d.push(r,t.index,m,-(m+1))}function _e(t,n,e,i){let r=bt(),o=ni(),s=vr();return WG(o,r,r[ti],s,t,n,i),_e}function khe(t,n,e,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=n[Ww],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function WG(t,n,e,i,r,o,s){let a=vC(i),c=t.firstCreatePass?IM(t):null,u=EM(n),d=!0;if(i.type&3||s){let p=_a(i,n),h=s?s(p):p,m=u.length,g=s?y=>s(ba(y[i.index])):i.index,f=null;if(!s&&a&&(f=khe(t,n,r,i.index)),f!==null){let y=f.__ngLastListenerFn__||f;y.__ngNextListenerFn__=o,f.__ngLastListenerFn__=o,d=!1}else{o=Q3(i,n,o),nue(n,h,r,o);let y=e.listen(h,r,o);u.push(o,y),c&&c.push(r,g,m,m+1)}}else o=Q3(i,n,o);if(d){let p=i.outputs?.[r],h=i.hostDirectiveOutputs?.[r];if(h&&h.length)for(let m=0;m<h.length;m+=2){let g=h[m],f=h[m+1];J3(i,n,g,f,r,o)}if(p&&p.length)for(let m of p)J3(i,n,m,r,r,o)}}function ee(t=1){return hce(t)}function Ehe(t,n){let e=null,i=Oue(t);for(let r=0;r<n.length;r++){let o=n[r];if(o==="*"){e=r;continue}if(i===null?G4(t,o,!0):Lue(i,o))return r}return e}function Kn(t){let n=bt()[Fo][uo];if(!n.projection){let e=t?t.length:1,i=n.projection=Dle(e,null),r=i.slice(),o=n.child;for(;o!==null;){if(o.type!==128){let s=t?Ehe(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function bn(t,n=0,e,i,r,o){let s=bt(),a=ni(),l=i?t+1:null;l!==null&&aC(s,a,l,i,r,o,null,e);let c=wx(a,Hi+t,16,null,e||null);c.projection===null&&(c.projection=n),NM();let d=!s[Jm]||Vz();s[Fo][uo].projection[c.projection]===null&&l!==null?Ihe(s,a,l):d&&!tO(c)&&xde(a,s,c)}function Ihe(t,n,e){let i=Hi+e,r=n.data[i],o=t[i],s=sf(o,r.tView.ssrId),a=vx(t,r,void 0,{dehydratedView:s});_x(o,a,0,of(r,s))}function Vs(t,n,e,i){wpe(t,n,e,i)}function an(t,n,e){_pe(t,n,e)}function Gt(t){let n=bt(),e=ni(),i=Uz();MM(i+1);let r=sO(e,i);if(t.dirty&&Kle(n)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=Spe(n,i);t.reset(o,zce),t.notifyOnChanges()}return!0}return!1}function Ut(){return vpe(bt(),Uz())}function rs(t){let n=sce();return Fz(n,Hi+t)}function X(t,n=""){let e=bt(),i=ni(),r=t+Hi,o=i.firstCreatePass?wx(i,r,1,n,null):i.data[r],s=Dhe(i,e,o,n,t);e[r]=s,SC()&&OC(i,e,s,o),Tp(o,!1)}var Dhe=(t,n,e,i,r)=>(kC(!0),Bue(n[ti],i));function xt(t){return xn("",t,""),xt}function xn(t,n,e){let i=bt(),r=MG(i,t,n,e);return r!==Ur&&pO(i,wa(),r),xn}function Sl(t,n,e,i,r){let o=bt(),s=Qpe(o,t,n,e,i,r);return s!==Ur&&pO(o,wa(),s),Sl}function dO(t,n,e,i,r,o,s,a,l){let c=bt(),u=Zpe(c,t,n,e,i,r,o,s,a,l);return u!==Ur&&pO(c,wa(),u),dO}function pO(t,n,e){let i=Rz(n,t);zue(t[ti],i,e)}function rr(t,n,e){f4(n)&&(n=n());let i=bt(),r=Sp();if(ts(i,r,n)){let o=ni(),s=TC();YM(o,s,i,t,n,i[ti],e,!1)}return rr}function _r(t,n){let e=f4(t);return e&&t.set(n),e}function or(t,n){let e=bt(),i=ni(),r=vr();return WG(i,e,e[ti],r,t,n),or}function Ahe(t,n,e){let i=ni();if(i.firstCreatePass){let r=ya(t);dM(e,i.data,i.blueprint,r,!0),dM(n,i.data,i.blueprint,r,!1)}}function dM(t,n,e,i,r){if(t=ir(t),Array.isArray(t))for(let o=0;o<t.length;o++)dM(t[o],n,e,i,r);else{let o=ni(),s=bt(),a=vr(),l=Zm(t)?t:ir(t.provide),c=Sz(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Zm(t)||!t.multi){let h=new _p(c,r,Ae),m=uN(l,n,r?u:u+p,d);m===-1?(CN(Zw(a,s),o,l),cN(o,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(h),s.push(h)):(e[m]=h,s[m]=h)}else{let h=uN(l,n,u+p,d),m=uN(l,n,u,u+p),g=h>=0&&e[h],f=m>=0&&e[m];if(r&&!f||!r&&!g){CN(Zw(a,s),o,l);let y=Ohe(r?Mhe:Nhe,e.length,r,i,c);!r&&f&&(e[m].providerFactory=y),cN(o,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(y),s.push(y)}else{let y=jG(e[r?m:h],c,!r&&i);cN(o,t,h>-1?h:m,y)}!r&&i&&f&&e[m].componentProviders++}}}function cN(t,n,e,i){let r=Zm(n),o=Ple(n);if(r||o){let l=(o?ir(n.useClass):n).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){let u=c.indexOf(e);u===-1?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function jG(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function uN(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function Nhe(t,n,e,i,r){return pM(this.multi,[])}function Mhe(t,n,e,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=ux(i,i[Nt],this.providerFactory.index,r);s=l.slice(0,a),pM(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],pM(o,s);return s}function pM(t,n){for(let e=0;e<t.length;e++){let i=t[e];n.push(i())}return n}function Ohe(t,n,e,i,r){let o=new _p(t,e,Ae);return o.multi=[],o.index=n,o.componentProviders=0,jG(o,r,i&&!e),o}function xi(t,n=[]){return e=>{e.providersResolver=(i,r)=>Ahe(i,r?r(t):t,n)}}function _u(t,n,e){let i=wC()+t,r=bt();return r[i]===Ur?lO(r,i,e?n.call(e):n()):zpe(r,i)}function hO(t,n,e,i){return XG(bt(),wC(),t,n,e,i)}function Cx(t,n,e,i,r){return Rhe(bt(),wC(),t,n,e,i,r)}function qG(t,n){let e=t[n];return e===Ur?void 0:e}function XG(t,n,e,i,r,o){let s=n+e;return ts(t,s,r)?lO(t,s+1,o?i.call(o,r):i(r)):qG(t,s+1)}function Rhe(t,n,e,i,r,o,s){let a=n+e;return sC(t,a,r,o)?lO(t,a+2,s?i.call(s,r,o):i(r,o)):qG(t,a+2)}function Tx(t,n){let e=ni(),i,r=t+Hi;e.firstCreatePass?(i=Fhe(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=mp(i.type,!0)),s,a=ao(Ae);try{let l=Qw(!1),c=o();return Qw(l),Xle(e,bt(),r,c),c}finally{ao(a)}}function Fhe(t,n){if(n)for(let e=n.length-1;e>=0;e--){let i=n[e];if(t===i.name)return i}}function Sx(t,n,e){let i=t+Hi,r=bt(),o=Fz(r,i);return Lhe(r,i)?XG(r,wC(),n,o.transform,e,o):o.transform(e)}function Lhe(t,n){return t[Nt].data[n].pure}function Dp(t,n){return FC(t,n)}var fx=class{full;major;minor;patch;constructor(n){this.full=n;let e=n.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},mO=new fx("19.2.12"),hM=class{ngModuleFactory;componentFactories;constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},KG=(()=>{class t{compileModuleSync(e){return new JN(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=vz(e),o=B4(r.declarations).reduce((s,a)=>{let l=fp(a);return l&&s.push(new af(l)),s},[]);return new hM(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Phe=(()=>{class t{zone=E(Xe);changeDetectionScheduler=E(wp);applicationRef=E(Br);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$he=new he("",{factory:()=>!1});function YG({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new Xe(At(re({},ZG()),{scheduleInRootZone:e})),[{provide:Xe,useFactory:t},{provide:Qm,multi:!0,useFactory:()=>{let i=E(Phe,{optional:!0});return()=>i.initialize()}},{provide:Qm,multi:!0,useFactory:()=>{let i=E(Vhe);return()=>{i.initialize()}}},n===!0?{provide:u4,useValue:!0}:[],{provide:d4,useValue:e??c4}]}function QG(t){let n=t?.ignoreChangesOutsideZone,e=t?.scheduleInRootZone,i=YG({ngZoneFactory:()=>{let r=ZG(t);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&_l("NgZone_CoalesceEvent"),new Xe(r)},ignoreChangesOutsideZone:n,scheduleInRootZone:e});return cf([{provide:$he,useValue:!0},{provide:EC,useValue:!1},i])}function ZG(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Vhe=(()=>{class t{subscription=new tn;initialized=!1;zone=E(Xe);pendingTasks=E(vu);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Xe.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Xe.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Bhe=(()=>{class t{appRef=E(Br);taskService=E(vu);ngZone=E(Xe);zonelessEnabled=E(EC);tracing=E(bf,{optional:!0});disableScheduling=E(u4,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new tn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(eC):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(d4,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof EN||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?k3:p4;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(eC+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,k3(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zhe(){return typeof $localize<"u"&&$localize.locale||dC}var fO=new he("",{providedIn:"root",factory:()=>E(fO,Pt.Optional|Pt.SkipSelf)||zhe()});var mM=new he(""),Ghe=new he("");function rx(t){return!t.moduleRef}function Uhe(t){let n=rx(t)?t.r3Injector:t.moduleRef.injector,e=n.get(Xe);return e.run(()=>{rx(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=n.get($r,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),rx(t)){let o=()=>n.destroy(),s=t.platformInjector.get(mM);s.add(o),n.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(mM);s.add(o),t.moduleRef.onDestroy(()=>{$w(t.allPlatformModules,t.moduleRef),r.unsubscribe(),s.delete(o)})}return Whe(i,e,()=>{let o=n.get(NG);return o.runInitializers(),o.donePromise.then(()=>{let s=n.get(fO,dC);if(The(s||dC),!n.get(Ghe,!0))return rx(t)?n.get(Br):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(rx(t)){let l=n.get(Br);return t.rootComponent!==void 0&&l.bootstrap(t.rootComponent),l}else return Hhe(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Hhe(t,n){let e=t.injector.get(Br);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(e);else throw new ye(-403,!1);n.push(t)}function Whe(t,n,e){try{let i=e();return Ip(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}var Vw=null;function jhe(t=[],n){return Vt.create({name:n,providers:[{provide:yC,useValue:"platform"},{provide:mM,useValue:new Set([()=>Vw=null])},...t]})}function qhe(t=[]){if(Vw)return Vw;let n=jhe(t);return Vw=n,qpe(),Xhe(n),n}function Xhe(t){let n=t.get(VM,null);Lo(t,()=>{n?.forEach(e=>e())})}var mn=(()=>{class t{static __NG_ELEMENT_ID__=Khe}return t})();function Khe(t){return Yhe(vr(),bt(),(t&16)===16)}function Yhe(t,n,e){if(df(t)&&!e){let i=xa(t.index,n);return new hx(i,i)}else if(t.type&175){let i=n[Fo];return new hx(i,n)}return null}var fM=class{constructor(){}supports(n){return EG(n)}create(n){return new gM(n)}},Qhe=(t,n)=>n,gM=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||Qhe}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<ez(i,r,o)?e:i,a=ez(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){let h=p<o.length?o[p]:o[p]=0,m=h+p;u<=m&&m<c&&(o[p]=h+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!EG(n))throw new ye(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)o=n[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,Vpe(n,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,r)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,r),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,r)):n=this._addAfter(new yM(e,i),o,r)),n}_verifyReinsertion(n,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let r=n._prevRemoved,o=n._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){let r=e===null?this._itHead:e._next;return n._next=r,n._prev=e,r===null?this._itTail=n:r._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new pC),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,i=n._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},yM=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,e){this.item=n,this.trackById=e}},bM=class{_head=null;_tail=null;add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){let e=n._prevDup,i=n._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},pC=class{map=new Map;put(n){let e=n.trackById,i=this.map.get(e);i||(i=new bM,this.map.set(e,i)),i.add(n)}get(n,e){let i=n,r=this.map.get(i);return r?r.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ez(t,n,e){let i=t.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}function tz(){return new VC([new fM])}var VC=(()=>{class t{factories;static \u0275prov=pe({token:t,providedIn:"root",factory:tz});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||tz()),deps:[[t,new gz,new fC]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new ye(901,!1)}}return t})();function JG(t){kn(8);try{let{rootComponent:n,appProviders:e,platformProviders:i}=t,r=qhe(i),o=[YG({}),{provide:wp,useExisting:Bhe},...e||[]],s=new oC({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return Uhe({r3Injector:s.injector,platformInjector:r,rootComponent:n})}catch(n){return Promise.reject(n)}finally{kn(9)}}function Rt(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ji(t,n=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):n}function os(t){return OA(t)}function Ap(t,n){return DA(t,n?.equal)}var xM=class{[Zo];constructor(n){this[Zo]=n}destroy(){this[Zo].destroy()}};function gO(t,n){!n?.injector&&CM(gO);let e=n?.injector??E(Vt),i=n?.manualCleanup!==!0?e.get(mf):null,r,o=e.get(zM,null,{optional:!0}),s=e.get(wp);return o!==null&&!n?.forceRoot?(r=eme(o.view,s,t),i instanceof Jw&&i._lView===o.view&&(i=null)):r=tme(t,e.get(DG),s),r.injector=e,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new xM(r)}var eU=At(re({},Mm),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:dx,run(){if(this.dirty=!1,this.hasRun&&!Y_(this))return;this.hasRun=!0;let t=i=>(this.cleanupFns??=[]).push(i),n=Xb(this),e=Xw(!1);try{this.maybeCleanup(),this.fn(t)}finally{Xw(e),K_(this,n)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),Zhe=At(re({},eU),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){Kb(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),Jhe=At(re({},eU),{consumerMarkedDirty(){this.view[wt]|=8192,hf(this.view),this.notifier.notify(13)},destroy(){Kb(this),this.onDestroyFn(),this.maybeCleanup(),this.view[yp]?.delete(this)}});function eme(t,n,e){let i=Object.create(Jhe);return i.view=t,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=n,i.fn=e,t[yp]??=new Set,t[yp].add(i),i.consumerMarkedDirty(i),i}function tme(t,n,e){let i=Object.create(Zhe);return i.fn=t,i.scheduler=n,i.notifier=e,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(12),i}function BC(t,n){let e=fp(t),i=n.elementInjector||bC();return new af(e).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}var at=new he("");var iU=null;function ss(){return iU}function yO(t){iU??=t}var kx=class{},bO=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>E(rU),providedIn:"platform"})}return t})();var rU=(()=>{class t extends bO{_location;_history;_doc=E(at);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ss().getBaseHref(this._doc)}onPopState(e){let i=ss().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=ss().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function oU(t,n){return t?n?t.endsWith("/")?n.startsWith("/")?t+n.slice(1):t+n:n.startsWith("/")?t+n:`${t}/${n}`:t:n}function tU(t){let n=t.search(/#|\?|$/);return t[n-1]==="/"?t.slice(0,n-1)+t.slice(n):t}function wu(t){return t&&t[0]!=="?"?`?${t}`:t}var zC=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>E(aU),providedIn:"root"})}return t})(),sU=new he(""),aU=(()=>{class t extends zC{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return oU(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+wu(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+wu(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+wu(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||t)(qe(bO),qe(sU,8))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cu=(()=>{class t{_subject=new Oe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=rme(tU(nU(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+wu(i))}normalize(e){return t.stripTrailingSlash(ime(this._basePath,nU(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+wu(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+wu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=wu;static joinWithSlash=oU;static stripTrailingSlash=tU;static \u0275fac=function(i){return new(i||t)(qe(zC))};static \u0275prov=pe({token:t,factory:()=>nme(),providedIn:"root"})}return t})();function nme(){return new Cu(qe(zC))}function ime(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function nU(t){return t.replace(/\/index.html$/,"")}function rme(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var xO=/\s+/,lU=[],Np=(()=>{class t{_ngEl;_renderer;initialClasses=lU;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(xO):lU}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(xO):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(xO).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||t)(Ae(nt),Ae(hi))};static \u0275dir=st({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var GC=class{$implicit;ngForOf;index;count;constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Wr=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new GC(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),cU(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);cU(o,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(Ae(Wi),Ae(Vr),Ae(VC))};static \u0275dir=st({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function cU(t,n){t.context.$implicit=n.item}var Yn=(()=>{class t{_viewContainer;_context=new UC;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){uU(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){uU(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(Ae(Wi),Ae(Vr))};static \u0275dir=st({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),UC=class{$implicit=null;ngIf=null};function uU(t,n){if(t&&!t.createEmbeddedView)throw new ye(2020,!1)}var vO=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||t)(Ae(Wi))};static \u0275dir=st({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Jt]})}return t})();function ome(t,n){return new ye(2100,!1)}var sme=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,Ex=(()=>{class t{transform(e){if(e==null)return null;if(typeof e!="string")throw ome(t,e);return e.replace(sme,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=wG({name:"titlecase",type:t,pure:!0})}return t})();var mi=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({})}return t})();function Ix(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}var HC="browser",dU="server";function Bs(t){return t===HC}function kl(t){return t===dU}var Mp=class{};var qC=new he(""),TO=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,o){return this._findPluginFor(i).addEventListener(e,i,r,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new ye(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||t)(qe(qC),qe(Xe))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),Dx=class{_doc;constructor(n){this._doc=n}manager},WC="ng-app-id";function pU(t){for(let n of t)n.remove()}function hU(t,n){let e=n.createElement("style");return e.textContent=t,e}function ame(t,n,e,i){let r=t.head?.querySelectorAll(`style[${WC}="${n}"],link[${WC}="${n}"]`);if(r)for(let o of r)o.removeAttribute(WC),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function wO(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var SO=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=kl(o),ame(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,hU);i?.forEach(r=>this.addUsage(r,this.external,wO))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(pU(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])pU(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,hU(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,wO(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(WC,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||t)(qe(at),qe(kp),qe(bx,8),qe(zr))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),_O={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},kO=/%COMP%/g;var fU="%COMP%",lme=`_nghost-${fU}`,cme=`_ngcontent-${fU}`,ume=!0,dme=new he("",{providedIn:"root",factory:()=>ume});function pme(t){return cme.replace(kO,t)}function hme(t){return lme.replace(kO,t)}function gU(t,n){return n.map(e=>e.replace(kO,t))}var Mx=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,s,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=kl(a),this.defaultRenderer=new Ax(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===va.ShadowDom&&(i=At(re({},i),{encapsulation:va.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof jC?r.applyToHost(e):r instanceof Nx&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(i.encapsulation){case va.Emulated:o=new jC(l,c,i,this.appId,u,s,a,d,p);break;case va.ShadowDom:return new CO(l,c,e,i,s,a,this.nonce,d,p);default:o=new Nx(l,c,i,u,s,a,d,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||t)(qe(TO),qe(SO),qe(kp),qe(dme),qe(at),qe(zr),qe(Xe),qe(bx),qe(bf,8))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),Ax=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,i,r,o){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(_O[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(mU(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(mU(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){e.remove()}selectRootElement(n,e){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new ye(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;let o=_O[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){let r=_O[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(yl.DashCase|yl.Important)?n.style.setProperty(e,i,r&yl.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&yl.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n!=null&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i,r){if(typeof n=="string"&&(n=ss().getGlobalEventTarget(this.doc,n),!n))throw new ye(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,e,o)),this.eventManager.addEventListener(n,e,o,r)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function mU(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var CO=class extends Ax{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,i,r,o,s,a,l,c){super(n,o,s,l,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=gU(r.id,u);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}let d=r.getExternalStyles?.();if(d)for(let p of d){let h=wO(p,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Nx=class extends Ax{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,i,r,o,s,a,l,c){super(n,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?gU(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},jC=class extends Nx{contentAttr;hostAttr;constructor(n,e,i,r,o,s,a,l,c){let u=r+"-"+i.id;super(n,e,i,o,s,a,l,c,u),this.contentAttr=pme(u),this.hostAttr=hme(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}};var XC=class t extends kx{supportsDOMEvents=!0;static makeCurrent(){yO(new t)}onAndCancel(n,e,i,r){return n.addEventListener(e,i,r),()=>{n.removeEventListener(e,i,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=mme();return e==null?null:fme(e)}resetBaseElement(){Ox=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Ix(document.cookie,n)}},Ox=null;function mme(){return Ox=Ox||document.head.querySelector("base"),Ox?Ox.getAttribute("href"):null}function fme(t){return new URL(t,document.baseURI).pathname}var gme=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),bU=(()=>{class t extends Dx{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,o){return e.addEventListener(i,r,o),()=>this.removeEventListener(e,i,r,o)}removeEventListener(e,i,r,o){return e.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||t)(qe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),yU=["alt","control","meta","shift"],yme={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bme={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},xU=(()=>{class t extends Dx{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,i,r,o){let s=t.parseEventName(i),a=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ss().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),yU.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=yme[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),yU.forEach(s=>{if(s!==r){let a=bme[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||t)(qe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();function EO(t,n){return JG(re({rootComponent:t},xme(n)))}function xme(t){return{appProviders:[...Tme,...t?.providers??[]],platformProviders:Cme}}function vme(){XC.makeCurrent()}function _me(){return new $r}function wme(){return w4(document),document}var Cme=[{provide:zr,useValue:HC},{provide:VM,useValue:vme,multi:!0},{provide:at,useFactory:wme}];var Tme=[{provide:yC,useValue:"root"},{provide:$r,useFactory:_me},{provide:qC,useClass:bU,multi:!0,deps:[at]},{provide:qC,useClass:xU,multi:!0,deps:[at]},Mx,SO,TO,{provide:Oi,useExisting:Mx},{provide:Mp,useClass:gme},[]];var Cf=class{},Rx=class{},Tu=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=e.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(n.name,e);let r=(n.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(n,e){let i=n.toLowerCase();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(n,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var YC=class{encodeKey(n){return vU(n)}encodeValue(n){return vU(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function Sme(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var kme=/%(\d[a-f0-9])/gi,Eme={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function vU(t){return encodeURIComponent(t).replace(kme,(n,e)=>Eme[e]??n)}function KC(t){return`${t}`}var El=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new YC,n.fromString){if(n.fromObject)throw new ye(2805,!1);this.map=Sme(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let i=n.fromObject[e],r=Array.isArray(i)?i.map(KC):[KC(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(i=>{let r=n[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(KC(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let i=this.map.get(n.param)||[],r=i.indexOf(KC(n.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var QC=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function Ime(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function _U(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function wU(t){return typeof Blob<"u"&&t instanceof Blob}function CU(t){return typeof FormData<"u"&&t instanceof FormData}function Dme(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var TU="Content-Type",SU="Accept",kU="X-Request-URL",EU="text/plain",IU="application/json",Ame=`${IU}, ${EU}, */*`,wf=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,i,r){this.url=e,this.method=n.toUpperCase();let o;if(Ime(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Tu,this.context??=new QC,!this.params)this.params=new El,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||_U(this.body)||wU(this.body)||CU(this.body)||Dme(this.body)?this.body:this.body instanceof El?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||CU(this.body)?null:wU(this.body)?this.body.type||null:_U(this.body)?null:typeof this.body=="string"?EU:this.body instanceof El?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?IU:null}clone(n={}){let e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=n.transferCache??this.transferCache,s=n.body!==void 0?n.body:this.body,a=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress,c=n.headers||this.headers,u=n.params||this.params,d=n.context??this.context;return n.setHeaders!==void 0&&(c=Object.keys(n.setHeaders).reduce((p,h)=>p.set(h,n.setHeaders[h]),c)),n.setParams&&(u=Object.keys(n.setParams).reduce((p,h)=>p.set(h,n.setParams[h]),u)),new t(e,i,s,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Op=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Op||{}),Tf=class{headers;status;statusText;url;ok;type;constructor(n,e=200,i="OK"){this.headers=n.headers||new Tu,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},ZC=class t extends Tf{constructor(n={}){super(n)}type=Op.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Fx=class t extends Tf{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=Op.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Lx=class extends Tf{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},Nme=200,Mme=204;function IO(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Sf=(()=>{class t{handler;constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof wf)o=e;else{let l;r.headers instanceof Tu?l=r.headers:l=new Tu(r.headers);let c;r.params&&(r.params instanceof El?c=r.params:c=new El({fromObject:r.params})),o=new wf(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Qe(o).pipe(mu(l=>this.handler.handle(l)));if(e instanceof wf||r.observe==="events")return s;let a=s.pipe(Sn(l=>l instanceof Fx));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ot(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new ye(2806,!1);return l.body}));case"blob":return a.pipe(ot(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new ye(2807,!1);return l.body}));case"text":return a.pipe(ot(l=>{if(l.body!==null&&typeof l.body!="string")throw new ye(2808,!1);return l.body}));case"json":default:return a.pipe(ot(l=>l.body))}case"response":return a;default:throw new ye(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new El().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,IO(r,i))}post(e,i,r={}){return this.request("POST",e,IO(r,i))}put(e,i,r={}){return this.request("PUT",e,IO(r,i))}static \u0275fac=function(i){return new(i||t)(qe(Cf))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();var Ome=new he("");function Rme(t,n){return n(t)}function Fme(t,n,e){return(i,r)=>Lo(e,()=>n(i,o=>t(o,r)))}var DU=new he(""),AU=new he(""),NU=new he("",{providedIn:"root",factory:()=>!0});var JC=(()=>{class t extends Cf{backend;injector;chain=null;pendingTasks=E(vu);contributeToStability=E(NU);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(DU),...this.injector.get(AU,[])]));this.chain=i.reduceRight((r,o)=>Fme(r,o,this.injector),Rme)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(pl(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||t)(qe(Rx),qe(bi))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();var Lme=/^\)\]\}',?\n/,Pme=RegExp(`^${kU}:`,"m");function $me(t){return"responseURL"in t&&t.responseURL?t.responseURL:Pme.test(t.getAllResponseHeaders())?t.getResponseHeader(kU):null}var DO=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new ye(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Vn(i.\u0275loadImpl()):Qe(null)).pipe(nr(()=>new Lt(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((g,f)=>s.setRequestHeader(g,f.join(","))),e.headers.has(SU)||s.setRequestHeader(SU,Ame),!e.headers.has(TU)){let g=e.detectContentTypeHeader();g!==null&&s.setRequestHeader(TU,g)}if(e.responseType){let g=e.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let g=s.statusText||"OK",f=new Tu(s.getAllResponseHeaders()),y=$me(s)||e.url;return l=new ZC({headers:f,status:s.status,statusText:g,url:y}),l},u=()=>{let{headers:g,status:f,statusText:y,url:b}=c(),x=null;f!==Mme&&(x=typeof s.response>"u"?s.responseText:s.response),f===0&&(f=x?Nme:0);let _=f>=200&&f<300;if(e.responseType==="json"&&typeof x=="string"){let w=x;x=x.replace(Lme,"");try{x=x!==""?JSON.parse(x):null}catch(C){x=w,_&&(_=!1,x={error:C,text:x})}}_?(o.next(new Fx({body:x,headers:g,status:f,statusText:y,url:b||void 0})),o.complete()):o.error(new Lx({error:x,headers:g,status:f,statusText:y,url:b||void 0}))},d=g=>{let{url:f}=c(),y=new Lx({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:f||void 0});o.error(y)},p=!1,h=g=>{p||(o.next(c()),p=!0);let f={type:Op.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(f.total=g.total),e.responseType==="text"&&s.responseText&&(f.partialText=s.responseText),o.next(f)},m=g=>{let f={type:Op.UploadProgress,loaded:g.loaded};g.lengthComputable&&(f.total=g.total),o.next(f)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),e.reportProgress&&(s.addEventListener("progress",h),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Op.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),e.reportProgress&&(s.removeEventListener("progress",h),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||t)(qe(Mp))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),MU=new he(""),Vme="XSRF-TOKEN",Bme=new he("",{providedIn:"root",factory:()=>Vme}),zme="X-XSRF-TOKEN",Gme=new he("",{providedIn:"root",factory:()=>zme}),Px=class{},Ume=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ix(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||t)(qe(at),qe(Bme))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();function Hme(t,n){let e=t.url.toLowerCase();if(!E(MU)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let i=E(Px).getToken(),r=E(Gme);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}function AO(...t){let n=[Sf,DO,JC,{provide:Cf,useExisting:JC},{provide:Rx,useFactory:()=>E(Ome,{optional:!0})??E(DO)},{provide:DU,useValue:Hme,multi:!0},{provide:MU,useValue:!0},{provide:Px,useClass:Ume}];for(let e of t)n.push(...e.\u0275providers);return cf(n)}var RU=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||t)(qe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var NO=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=qe(Wme),r},providedIn:"root"})}return t})(),Wme=(()=>{class t extends NO{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case Gr.NONE:return i;case Gr.HTML:return Ep(i,"HTML")?wl(i):HM(this._doc,String(i)).toString();case Gr.STYLE:return Ep(i,"Style")?wl(i):i;case Gr.SCRIPT:if(Ep(i,"Script"))return wl(i);throw new ye(5200,!1);case Gr.URL:return Ep(i,"URL")?wl(i):UM(String(i));case Gr.RESOURCE_URL:if(Ep(i,"ResourceURL"))return wl(i);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(e){return D4(e)}bypassSecurityTrustStyle(e){return A4(e)}bypassSecurityTrustScript(e){return N4(e)}bypassSecurityTrustUrl(e){return M4(e)}bypassSecurityTrustResourceUrl(e){return O4(e)}static \u0275fac=function(i){return new(i||t)(qe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ft="primary",Qx=Symbol("RouteTitle"),LO=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Lp(t){return new LO(t)}function UU(t,n,e){let i=e.path.split("/");if(i.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function jme(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Ta(t[e],n[e]))return!1;return!0}function Ta(t,n){let e=t?PO(t):void 0,i=n?PO(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!HU(t[r],n[r]))return!1;return!0}function PO(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function HU(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),i=[...n].sort();return e.every((r,o)=>i[o]===r)}else return t===n}function WU(t){return t.length>0?t[t.length-1]:null}function Eu(t){return ww(t)?t:Ip(t)?Vn(Promise.resolve(t)):Qe(t)}var qme={exact:qU,subset:XU},jU={exact:Xme,subset:Kme,ignored:()=>!0};function LU(t,n,e){return qme[e.paths](t.root,n.root,e.matrixParams)&&jU[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function Xme(t,n){return Ta(t,n)}function qU(t,n,e){if(!Rp(t.segments,n.segments)||!nT(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!t.children[i]||!qU(t.children[i],n.children[i],e))return!1;return!0}function Kme(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>HU(t[e],n[e]))}function XU(t,n,e){return KU(t,n,n.segments,e)}function KU(t,n,e,i){if(t.segments.length>e.length){let r=t.segments.slice(0,e.length);return!(!Rp(r,e)||n.hasChildren()||!nT(r,e,i))}else if(t.segments.length===e.length){if(!Rp(t.segments,e)||!nT(t.segments,e,i))return!1;for(let r in n.children)if(!t.children[r]||!XU(t.children[r],n.children[r],i))return!1;return!0}else{let r=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!Rp(t.segments,r)||!nT(t.segments,r,i)||!t.children[Ft]?!1:KU(t.children[Ft],n,o,i)}}function nT(t,n,e){return n.every((i,r)=>jU[e](t[r].parameters,i.parameters))}var ka=class{root;queryParams;fragment;_queryParamMap;constructor(n=new fn([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Lp(this.queryParams),this._queryParamMap}toString(){return Zme.serialize(this)}},fn=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iT(this)}},Su=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Lp(this.parameters),this._parameterMap}toString(){return QU(this)}};function Yme(t,n){return Rp(t,n)&&t.every((e,i)=>Ta(e.parameters,n[i].parameters))}function Rp(t,n){return t.length!==n.length?!1:t.every((e,i)=>e.path===n[i].path)}function Qme(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===Ft&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Ft&&(e=e.concat(n(r,i)))}),e}var Zx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>new Pp,providedIn:"root"})}return t})(),Pp=class{parse(n){let e=new VO(n);return new ka(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${$x(n.root,!0)}`,i=tfe(n.queryParams),r=typeof n.fragment=="string"?`#${Jme(n.fragment)}`:"";return`${e}${i}${r}`}},Zme=new Pp;function iT(t){return t.segments.map(n=>QU(n)).join("/")}function $x(t,n){if(!t.hasChildren())return iT(t);if(n){let e=t.children[Ft]?$x(t.children[Ft],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Ft&&i.push(`${r}:${$x(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=Qme(t,(i,r)=>r===Ft?[$x(t.children[Ft],!1)]:[`${r}:${$x(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ft]!=null?`${iT(t)}/${e[0]}`:`${iT(t)}/(${e.join("//")})`}}function YU(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function eT(t){return YU(t).replace(/%3B/gi,";")}function Jme(t){return encodeURI(t)}function $O(t){return YU(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rT(t){return decodeURIComponent(t)}function PU(t){return rT(t.replace(/\+/g,"%20"))}function QU(t){return`${$O(t.path)}${efe(t.parameters)}`}function efe(t){return Object.entries(t).map(([n,e])=>`;${$O(n)}=${$O(e)}`).join("")}function tfe(t){let n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(r=>`${eT(e)}=${eT(r)}`).join("&"):`${eT(e)}=${eT(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var nfe=/^[^\/()?;#]+/;function MO(t){let n=t.match(nfe);return n?n[0]:""}var ife=/^[^\/()?;=#]+/;function rfe(t){let n=t.match(ife);return n?n[0]:""}var ofe=/^[^=?&#]+/;function sfe(t){let n=t.match(ofe);return n?n[0]:""}var afe=/^[^&#]+/;function lfe(t){let n=t.match(afe);return n?n[0]:""}var VO=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fn([],{}):new fn([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[Ft]=new fn(n,e)),i}parseSegment(){let n=MO(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(n),new Su(rT(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=rfe(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=MO(this.remaining);r&&(i=r,this.capture(i))}n[rT(e)]=rT(i)}parseQueryParam(n){let e=sfe(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=lfe(this.remaining);s&&(i=s,this.capture(i))}let r=PU(e),o=PU(i);if(n.hasOwnProperty(r)){let s=n[r];Array.isArray(s)||(s=[s],n[r]=s),s.push(o)}else n[r]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=MO(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ye(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Ft);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[Ft]:new fn([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new ye(4011,!1)}};function ZU(t){return t.segments.length>0?new fn([],{[Ft]:t}):t}function JU(t){let n={};for(let[i,r]of Object.entries(t.children)){let o=JU(r);if(i===Ft&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))n[s]=a;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}let e=new fn(t.segments,n);return cfe(e)}function cfe(t){if(t.numberOfChildren===1&&t.children[Ft]){let n=t.children[Ft];return new fn(t.segments.concat(n.segments),n.children)}return t}function Af(t){return t instanceof ka}function eH(t,n,e=null,i=null){let r=tH(t);return nH(r,n,e,i)}function tH(t){let n;function e(o){let s={};for(let l of o.children){let c=e(l);s[l.outlet]=c}let a=new fn(o.url,s);return o===t&&(n=a),a}let i=e(t.root),r=ZU(i);return n??r}function nH(t,n,e,i){let r=t;for(;r.parent;)r=r.parent;if(n.length===0)return OO(r,r,r,e,i);let o=ufe(n);if(o.toRoot())return OO(r,r,new fn([],{}),e,i);let s=dfe(o,r,t),a=s.processChildren?Bx(s.segmentGroup,s.index,o.commands):rH(s.segmentGroup,s.index,o.commands);return OO(r,s.segmentGroup,a,e,i)}function sT(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Gx(t){return typeof t=="object"&&t!=null&&t.outlets}function OO(t,n,e,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===n?s=e:s=iH(t,n,e);let a=ZU(JU(s));return new ka(a,o,r)}function iH(t,n,e){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===n?i[r]=e:i[r]=iH(o,n,e)}),new fn(t.segments,i)}var aT=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&sT(i[0]))throw new ye(4003,!1);let r=i.find(Gx);if(r&&r!==WU(i))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ufe(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new aT(!0,0,t);let n=0,e=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?n++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new aT(e,n,i)}var If=class{segmentGroup;processChildren;index;constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}};function dfe(t,n,e){if(t.isAbsolute)return new If(n,!0,0);if(!e)return new If(n,!1,NaN);if(e.parent===null)return new If(e,!0,0);let i=sT(t.commands[0])?0:1,r=e.segments.length-1+i;return pfe(e,r,t.numberOfDoubleDots)}function pfe(t,n,e){let i=t,r=n,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ye(4005,!1);r=i.segments.length}return new If(i,!1,r-o)}function hfe(t){return Gx(t[0])?t[0].outlets:{[Ft]:t}}function rH(t,n,e){if(t??=new fn([],{}),t.segments.length===0&&t.hasChildren())return Bx(t,n,e);let i=mfe(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new fn(t.segments.slice(0,i.pathIndex),{});return o.children[Ft]=new fn(t.segments.slice(i.pathIndex),t.children),Bx(o,0,r)}else return i.match&&r.length===0?new fn(t.segments,{}):i.match&&!t.hasChildren()?BO(t,n,e):i.match?Bx(t,0,r):BO(t,n,e)}function Bx(t,n,e){if(e.length===0)return new fn(t.segments,{});{let i=hfe(e),r={};if(Object.keys(i).some(o=>o!==Ft)&&t.children[Ft]&&t.numberOfChildren===1&&t.children[Ft].segments.length===0){let o=Bx(t.children[Ft],n,e);return new fn(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=rH(t.children[o],n,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new fn(t.segments,r)}}function mfe(t,n,e){let i=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return o;let s=t.segments[r],a=e[i];if(Gx(a))break;let l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!VU(l,c,s))return o;i+=2}else{if(!VU(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function BO(t,n,e){let i=t.segments.slice(0,n),r=0;for(;r<e.length;){let o=e[r];if(Gx(o)){let l=ffe(o.outlets);return new fn(i,l)}if(r===0&&sT(e[0])){let l=t.segments[n];i.push(new Su(l.path,$U(e[0]))),r++;continue}let s=Gx(o)?o.outlets[Ft]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&sT(a)?(i.push(new Su(s,$U(a))),r+=2):(i.push(new Su(s,{})),r++)}return new fn(i,{})}function ffe(t){let n={};return Object.entries(t).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[e]=BO(new fn([],{}),0,i))}),n}function $U(t){let n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function VU(t,n,e){return t==e.path&&Ta(n,e.parameters)}var oT="imperative",qi=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qi||{}),$o=class{id;url;constructor(n,e){this.id=n,this.url=e}},$p=class extends $o{type=qi.NavigationStart;navigationTrigger;restoredState;constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Il=class extends $o{urlAfterRedirects;type=qi.NavigationEnd;constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},po=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(po||{}),Ux=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Ux||{}),Sa=class extends $o{reason;code;type=qi.NavigationCancel;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dl=class extends $o{reason;code;type=qi.NavigationSkipped;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}},Nf=class extends $o{error;target;type=qi.NavigationError;constructor(n,e,i,r){super(n,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Hx=class extends $o{urlAfterRedirects;state;type=qi.RoutesRecognized;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lT=class extends $o{urlAfterRedirects;state;type=qi.GuardsCheckStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cT=class extends $o{urlAfterRedirects;state;shouldActivate;type=qi.GuardsCheckEnd;constructor(n,e,i,r,o){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},uT=class extends $o{urlAfterRedirects;state;type=qi.ResolveStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dT=class extends $o{urlAfterRedirects;state;type=qi.ResolveEnd;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pT=class{route;type=qi.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hT=class{route;type=qi.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mT=class{snapshot;type=qi.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fT=class{snapshot;type=qi.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gT=class{snapshot;type=qi.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yT=class{snapshot;type=qi.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Wx=class{},Mf=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function gfe(t,n){return t.providers&&!t._injector&&(t._injector=LC(t.providers,n,`Route: ${t.path}`)),t._injector??n}function zs(t){return t.outlet||Ft}function yfe(t,n){let e=t.filter(i=>zs(i)===n);return e.push(...t.filter(i=>zs(i)!==n)),e}function Jx(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var bT=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Jx(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Ff(this.rootInjector)}},Ff=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new bT(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||t)(qe(bi))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xT=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=zO(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){let e=zO(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=GO(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return GO(n,this._root).map(e=>e.value)}};function zO(t,n){if(t===n.value)return n;for(let e of n.children){let i=zO(t,e);if(i)return i}return null}function GO(t,n){if(t===n.value)return[n];for(let e of n.children){let i=GO(t,e);if(i.length)return i.unshift(n),i}return[]}var Po=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function Ef(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var jx=class extends xT{snapshot;constructor(n,e){super(n),this.snapshot=e,YO(this,n)}toString(){return this.snapshot.toString()}};function oH(t){let n=bfe(t),e=new Jn([new Su("",{})]),i=new Jn({}),r=new Jn({}),o=new Jn({}),s=new Jn(""),a=new ku(e,i,o,s,r,Ft,t,n.root);return a.snapshot=n.root,new jx(new Po(a,[]),n)}function bfe(t){let n={},e={},i={},r="",o=new Fp([],n,i,r,e,Ft,t,null,{});return new qx("",new Po(o,[]))}var ku=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,i,r,o,s,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ot(c=>c[Qx]))??Qe(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ot(n=>Lp(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ot(n=>Lp(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function vT(t,n,e="emptyOnly"){let i,{routeConfig:r}=t;return n!==null&&(e==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:re(re({},n.params),t.params),data:re(re({},n.data),t.data),resolve:re(re(re(re({},t.data),n.data),r?.data),t._resolvedData)}:i={params:re({},t.params),data:re({},t.data),resolve:re(re({},t.data),t._resolvedData??{})},r&&aH(r)&&(i.resolve[Qx]=r.title),i}var Fp=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Qx]}constructor(n,e,i,r,o,s,a,l,c){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Lp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Lp(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},qx=class extends xT{url;constructor(n,e){super(e),this.url=n,YO(this,e)}toString(){return sH(this._root)}};function YO(t,n){n.value._routerState=t,n.children.forEach(e=>YO(t,e))}function sH(t){let n=t.children.length>0?` { ${t.children.map(sH).join(", ")} } `:"";return`${t.value}${n}`}function RO(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Ta(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),Ta(n.params,e.params)||t.paramsSubject.next(e.params),jme(n.url,e.url)||t.urlSubject.next(e.url),Ta(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function UO(t,n){let e=Ta(t.params,n.params)&&Yme(t.url,n.url),i=!t.parent!=!n.parent;return e&&!i&&(!t.parent||UO(t.parent,n.parent))}function aH(t){return typeof t.title=="string"||t.title===null}var lH=new he(""),ev=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ft;activateEvents=new ke;deactivateEvents=new ke;attachEvents=new ke;detachEvents=new ke;routerOutletData=m4(void 0);parentContexts=E(Ff);location=E(Wi);changeDetector=E(mn);inputBinder=E(TT,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new HO(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Jt]})}return t})(),HO=class{route;childContexts;parent;outletData;constructor(n,e,i,r){this.route=n,this.childContexts=e,this.parent=i,this.outletData=r}get(n,e){return n===ku?this.route:n===Ff?this.childContexts:n===lH?this.outletData:this.parent.get(n,e)}},TT=new he("");var QO=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&Ee(0,"router-outlet")},dependencies:[ev],encapsulation:2})}return t})();function ZO(t){let n=t.children&&t.children.map(ZO),e=n?At(re({},t),{children:n}):re({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Ft&&(e.component=QO),e}function xfe(t,n,e){let i=Xx(t,n._root,e?e._root:void 0);return new jx(i,n)}function Xx(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=n.value;let r=vfe(t,n,e);return new Po(i,r)}else{if(t.shouldAttach(n.value)){let o=t.retrieve(n.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>Xx(t,a)),s}}let i=_fe(n.value),r=n.children.map(o=>Xx(t,o));return new Po(i,r)}}function vfe(t,n,e){return n.children.map(i=>{for(let r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Xx(t,i,r);return Xx(t,i)})}function _fe(t){return new ku(new Jn(t.url),new Jn(t.params),new Jn(t.queryParams),new Jn(t.fragment),new Jn(t.data),t.outlet,t.component,t)}var Of=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},cH="ngNavigationCancelingError";function _T(t,n){let{redirectTo:e,navigationBehaviorOptions:i}=Af(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=uH(!1,po.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function uH(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[cH]=!0,e.cancellationCode=n,e}function wfe(t){return dH(t)&&Af(t.url)}function dH(t){return!!t&&t[cH]}var Cfe=(t,n,e,i)=>ot(r=>(new WO(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)),WO=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,i,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),RO(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){let r=Ef(e);n.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=Ef(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=Ef(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){let r=Ef(e);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new yT(o.value.snapshot))}),n.children.length&&this.forwardEvent(new fT(n.value.snapshot))}activateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(RO(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),RO(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,i)}},wT=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Df=class{component;route;constructor(n,e){this.component=n,this.route=e}};function Tfe(t,n,e){let i=t._root,r=n?n._root:null;return Vx(i,r,e,[i.value])}function Sfe(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Lf(t,n){let e=Symbol(),i=n.get(t,e);return i===e?typeof t=="function"&&!lz(t)?t:n.get(t):i}function Vx(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ef(n);return t.children.forEach(s=>{kfe(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zx(a,e.getContext(s),r)),r}function kfe(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Efe(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new wT(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Vx(t,n,a?a.children:null,i,r):Vx(t,n,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Df(a.outlet.component,s))}else s&&zx(n,a,r),r.canActivateChecks.push(new wT(i)),o.component?Vx(t,null,a?a.children:null,i,r):Vx(t,null,e,i,r);return r}function Efe(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Rp(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Rp(t.url,n.url)||!Ta(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!UO(t,n)||!Ta(t.queryParams,n.queryParams);case"paramsChange":default:return!UO(t,n)}}function zx(t,n,e){let i=Ef(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?n?zx(s,n.children.getContext(o),e):zx(s,null,e):zx(s,n,e)}),r.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new Df(n.outlet.component,r)):e.canDeactivateChecks.push(new Df(null,r)):e.canDeactivateChecks.push(new Df(null,r))}function tv(t){return typeof t=="function"}function Ife(t){return typeof t=="boolean"}function Dfe(t){return t&&tv(t.canLoad)}function Afe(t){return t&&tv(t.canActivate)}function Nfe(t){return t&&tv(t.canActivateChild)}function Mfe(t){return t&&tv(t.canDeactivate)}function Ofe(t){return t&&tv(t.canMatch)}function pH(t){return t instanceof ul||t?.name==="EmptyError"}var tT=Symbol("INITIAL_VALUE");function Rf(){return nr(t=>Gm(t.map(n=>n.pipe(Xn(1),Ro(tT)))).pipe(ot(n=>{for(let e of n)if(e!==!0){if(e===tT)return tT;if(e===!1||Rfe(e))return e}return!0}),Sn(n=>n!==tT),Xn(1)))}function Rfe(t){return Af(t)||t instanceof Of}function Ffe(t,n){return pi(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Qe(At(re({},e),{guardsResult:!0})):Lfe(s,i,r,t).pipe(pi(a=>a&&Ife(a)?Pfe(i,o,t,n):Qe(a)),ot(a=>At(re({},e),{guardsResult:a})))})}function Lfe(t,n,e,i){return Vn(t).pipe(pi(r=>Gfe(r.component,r.route,e,n,i)),hl(r=>r!==!0,!0))}function Pfe(t,n,e,i){return Vn(n).pipe(mu(r=>hu(Vfe(r.route.parent,i),$fe(r.route,i),zfe(t,r.path,e),Bfe(t,r.route,e))),hl(r=>r!==!0,!0))}function $fe(t,n){return t!==null&&n&&n(new gT(t)),Qe(!0)}function Vfe(t,n){return t!==null&&n&&n(new mT(t)),Qe(!0)}function Bfe(t,n,e){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return Qe(!0);let r=i.map(o=>ha(()=>{let s=Jx(n)??e,a=Lf(o,s),l=Afe(a)?a.canActivate(n,t):Lo(s,()=>a(n,t));return Eu(l).pipe(hl())}));return Qe(r).pipe(Rf())}function zfe(t,n,e){let i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>Sfe(s)).filter(s=>s!==null).map(s=>ha(()=>{let a=s.guards.map(l=>{let c=Jx(s.node)??e,u=Lf(l,c),d=Nfe(u)?u.canActivateChild(i,t):Lo(c,()=>u(i,t));return Eu(d).pipe(hl())});return Qe(a).pipe(Rf())}));return Qe(o).pipe(Rf())}function Gfe(t,n,e,i,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Qe(!0);let s=o.map(a=>{let l=Jx(n)??r,c=Lf(a,l),u=Mfe(c)?c.canDeactivate(t,n,e,i):Lo(l,()=>c(t,n,e,i));return Eu(u).pipe(hl())});return Qe(s).pipe(Rf())}function Ufe(t,n,e,i){let r=n.canLoad;if(r===void 0||r.length===0)return Qe(!0);let o=r.map(s=>{let a=Lf(s,t),l=Dfe(a)?a.canLoad(n,e):Lo(t,()=>a(n,e));return Eu(l)});return Qe(o).pipe(Rf(),hH(i))}function hH(t){return BA(ei(n=>{if(typeof n!="boolean")throw _T(t,n)}),ot(n=>n===!0))}function Hfe(t,n,e,i){let r=n.canMatch;if(!r||r.length===0)return Qe(!0);let o=r.map(s=>{let a=Lf(s,t),l=Ofe(a)?a.canMatch(n,e):Lo(t,()=>a(n,e));return Eu(l)});return Qe(o).pipe(Rf(),hH(i))}var Kx=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Yx=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function kf(t){return pu(new Kx(t))}function Wfe(t){return pu(new ye(4e3,!1))}function jfe(t){return pu(uH(!1,po.GuardRejected))}var jO=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Qe(i);if(r.numberOfChildren>1||!r.children[Ft])return Wfe(`${n.redirectTo}`);r=r.children[Ft]}}applyRedirectCommands(n,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,params:h,data:m,title:g}=r,f=Lo(o,()=>a({params:h,data:m,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,title:g}));if(f instanceof ka)throw new Yx(f);e=f}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i);if(e[0]==="/")throw new Yx(s);return s}applyRedirectCreateUrlTree(n,e,i,r){let o=this.createSegmentGroup(n,e.root,i,r);return new ka(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let i={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(n,e,i,r){let o=this.createSegments(n,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(n,l,i,r)}),new fn(o,s)}createSegments(n,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,e,i){let r=i[e.path.substring(1)];if(!r)throw new ye(4001,!1);return r}findOrReturn(n,e){let i=0;for(let r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}},qO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qfe(t,n,e,i,r){let o=mH(t,n,e);return o.matched?(i=gfe(n,i),Hfe(i,n,e,r).pipe(ot(s=>s===!0?o:re({},qO)))):Qe(o)}function mH(t,n,e){if(n.path==="**")return Xfe(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?re({},qO):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(n.matcher||UU)(e,t,n);if(!r)return re({},qO);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?re(re({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Xfe(t){return{matched:!0,parameters:t.length>0?WU(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function BU(t,n,e,i){return e.length>0&&Qfe(t,e,i)?{segmentGroup:new fn(n,Yfe(i,new fn(e,t.children))),slicedSegments:[]}:e.length===0&&Zfe(t,e,i)?{segmentGroup:new fn(t.segments,Kfe(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new fn(t.segments,t.children),slicedSegments:e}}function Kfe(t,n,e,i){let r={};for(let o of e)if(ST(t,n,o)&&!i[zs(o)]){let s=new fn([],{});r[zs(o)]=s}return re(re({},i),r)}function Yfe(t,n){let e={};e[Ft]=n;for(let i of t)if(i.path===""&&zs(i)!==Ft){let r=new fn([],{});e[zs(i)]=r}return e}function Qfe(t,n,e){return e.some(i=>ST(t,n,i)&&zs(i)!==Ft)}function Zfe(t,n,e){return e.some(i=>ST(t,n,i))}function ST(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Jfe(t,n,e){return n.length===0&&!t.children[e]}var XO=class{};function ege(t,n,e,i,r,o,s="emptyOnly"){return new KO(t,n,e,i,r,s,o).recognize()}var tge=31,KO=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,i,r,o,s,a){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new jO(this.urlSerializer,this.urlTree)}noMatchError(n){return new ye(4002,`'${n.segmentGroup}'`)}recognize(){let n=BU(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(ot(({children:e,rootSnapshot:i})=>{let r=new Po(i,e),o=new qx("",r),s=eH(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(n){let e=new Fp([],Object.freeze({}),Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ft,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Ft,e).pipe(ot(i=>({children:i,rootSnapshot:e})),Jo(i=>{if(i instanceof Yx)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Kx?this.noMatchError(i):i}))}processSegmentGroup(n,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,e,i,o):this.processSegment(n,e,i,i.segments,r,!0,o).pipe(ot(s=>s instanceof Po?[s]:[]))}processChildren(n,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Vn(o).pipe(mu(s=>{let a=i.children[s],l=yfe(e,s);return this.processSegmentGroup(n,l,a,s,r)}),qA((s,a)=>(s.push(...a),s)),fu(null),jA(),pi(s=>{if(s===null)return kf(i);let a=fH(s);return nge(a),Qe(a)}))}processSegment(n,e,i,r,o,s,a){return Vn(e).pipe(mu(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,i,r,o,s,a).pipe(Jo(c=>{if(c instanceof Kx)return Qe(null);throw c}))),hl(l=>!!l),Jo(l=>{if(pH(l))return Jfe(i,r,o)?Qe(new XO):kf(i);throw l}))}processSegmentAgainstRoute(n,e,i,r,o,s,a,l){return zs(i)!==s&&(s===Ft||!ST(r,o,i))?kf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,o,s,l):kf(r)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=mH(e,r,o);if(!l)return kf(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>tge&&(this.allowRedirects=!1));let h=new Fp(o,c,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,zU(r),zs(r),r.component??r._loadedComponent??null,r,GU(r)),m=vT(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(m.params),h.data=Object.freeze(m.data);let g=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,h,n);return this.applyRedirects.lineralizeSegments(r,g).pipe(pi(f=>this.processSegment(n,i,e,f.concat(p),s,!1,a)))}matchSegmentAgainstRoute(n,e,i,r,o,s){let a=qfe(e,i,r,n,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(nr(l=>l.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(nr(({routes:c})=>{let u=i._loadedInjector??n,{parameters:d,consumedSegments:p,remainingSegments:h}=l,m=new Fp(p,d,Object.freeze(re({},this.urlTree.queryParams)),this.urlTree.fragment,zU(i),zs(i),i.component??i._loadedComponent??null,i,GU(i)),g=vT(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(g.params),m.data=Object.freeze(g.data);let{segmentGroup:f,slicedSegments:y}=BU(e,p,h,c);if(y.length===0&&f.hasChildren())return this.processChildren(u,c,f,m).pipe(ot(x=>new Po(m,x)));if(c.length===0&&y.length===0)return Qe(new Po(m,[]));let b=zs(i)===o;return this.processSegment(u,c,f,y,b?Ft:o,!0,m).pipe(ot(x=>new Po(m,x instanceof Po?[x]:[])))}))):kf(e)))}getChildConfig(n,e,i){return e.children?Qe({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?Qe({routes:e._loadedRoutes,injector:e._loadedInjector}):Ufe(n,e,i,this.urlSerializer).pipe(pi(r=>r?this.configLoader.loadChildren(n,e).pipe(ei(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):jfe(e))):Qe({routes:[],injector:n})}};function nge(t){t.sort((n,e)=>n.value.outlet===Ft?-1:e.value.outlet===Ft?1:n.value.outlet.localeCompare(e.value.outlet))}function ige(t){let n=t.value.routeConfig;return n&&n.path===""}function fH(t){let n=[],e=new Set;for(let i of t){if(!ige(i)){n.push(i);continue}let r=n.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):n.push(i)}for(let i of e){let r=fH(i.children);n.push(new Po(i.value,r))}return n.filter(i=>!e.has(i))}function zU(t){return t.data||{}}function GU(t){return t.resolve||{}}function rge(t,n,e,i,r,o){return pi(s=>ege(t,n,e,i,s.extractedUrl,r,o).pipe(ot(({state:a,tree:l})=>At(re({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function oge(t,n){return pi(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Qe(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of gH(l))s.add(c);let a=0;return Vn(s).pipe(mu(l=>o.has(l)?sge(l,i,t,n):(l.data=vT(l,l.parent,t).resolve,Qe(void 0))),ei(()=>a++),Um(1),pi(l=>a===s.size?Qe(e):yr))})}function gH(t){let n=t.children.map(e=>gH(e)).flat();return[t,...n]}function sge(t,n,e,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!aH(r)&&(o[Qx]=r.title),age(o,t,n,i).pipe(ot(s=>(t._resolvedData=s,t.data=vT(t,t.parent,e).resolve,null)))}function age(t,n,e,i){let r=PO(t);if(r.length===0)return Qe({});let o={};return Vn(r).pipe(pi(s=>lge(t[s],n,e,i).pipe(hl(),ei(a=>{if(a instanceof Of)throw _T(new Pp,a);o[s]=a}))),Um(1),ot(()=>o),Jo(s=>pH(s)?yr:pu(s)))}function lge(t,n,e,i){let r=Jx(n)??i,o=Lf(t,r),s=o.resolve?o.resolve(n,e):Lo(r,()=>o(n,e));return Eu(s)}function FO(t){return nr(n=>{let e=t(n);return e?Vn(e).pipe(ot(()=>n)):Qe(n)})}var JO=(()=>{class t{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Ft);return i}getResolvedTitleForRoute(e){return e.data[Qx]}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>E(yH),providedIn:"root"})}return t})(),yH=(()=>{class t extends JO{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||t)(qe(RU))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nv=new he("",{providedIn:"root",factory:()=>({})}),iv=new he(""),bH=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=E(KG);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Qe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Eu(e.loadComponent()).pipe(ot(vH),ei(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),pl(()=>{this.componentLoaders.delete(e)})),r=new $m(i,()=>new Oe).pipe(Pm());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Qe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=xH(i,this.compiler,e,this.onLoadEndListener).pipe(pl(()=>{this.childrenLoaders.delete(i)})),s=new $m(o,()=>new Oe).pipe(Pm());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function xH(t,n,e,i){return Eu(t.loadChildren()).pipe(ot(vH),pi(r=>r instanceof aO||Array.isArray(r)?Qe(r):Vn(n.compileModuleAsync(r))),ot(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(iv,[],{optional:!0,self:!0}).flat()),{routes:s.map(ZO),injector:o}}))}function cge(t){return t&&typeof t=="object"&&"default"in t}function vH(t){return cge(t)?t.default:t}var kT=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>E(uge),providedIn:"root"})}return t})(),uge=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),_H=new he("");var wH=new he(""),CH=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Oe;transitionAbortSubject=new Oe;configLoader=E(bH);environmentInjector=E(bi);destroyRef=E(mf);urlSerializer=E(Zx);rootContexts=E(Ff);location=E(Cu);inputBindingEnabled=E(TT,{optional:!0})!==null;titleStrategy=E(JO);options=E(nv,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=E(kT);createViewTransition=E(_H,{optional:!0});navigationErrorHandler=E(wH,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Qe(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new pT(r)),i=r=>this.events.next(new hT(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(At(re({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new Jn(null),this.transitions.pipe(Sn(i=>i!==null),nr(i=>{let r=!1,o=!1;return Qe(i).pipe(nr(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",po.SupersededByNewNavigation),yr;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?At(re({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new Dl(s.id,this.urlSerializer.serialize(s.rawUrl),c,Ux.IgnoredSameUrlNavigation)),s.resolve(!1),yr}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Qe(s).pipe(nr(c=>(this.events.next(new $p(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?yr:Promise.resolve(c))),rge(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),ei(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=At(re({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new Hx(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:p,extras:h}=s,m=new $p(c,this.urlSerializer.serialize(u),d,p);this.events.next(m);let g=oH(this.rootComponentType).snapshot;return this.currentTransition=i=At(re({},s),{targetSnapshot:g,urlAfterRedirects:u,extras:At(re({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,Qe(i)}else{let c="";return this.events.next(new Dl(s.id,this.urlSerializer.serialize(s.extractedUrl),c,Ux.IgnoredByUrlHandlingStrategy)),s.resolve(!1),yr}}),ei(s=>{let a=new lT(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ot(s=>(this.currentTransition=i=At(re({},s),{guards:Tfe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),Ffe(this.environmentInjector,s=>this.events.next(s)),ei(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw _T(this.urlSerializer,s.guardsResult);let a=new cT(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Sn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",po.GuardRejected),!1)),FO(s=>{if(s.guards.canActivateChecks.length!==0)return Qe(s).pipe(ei(a=>{let l=new uT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),nr(a=>{let l=!1;return Qe(a).pipe(oge(this.paramsInheritanceStrategy,this.environmentInjector),ei({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",po.NoDataFromResolver)}}))}),ei(a=>{let l=new dT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),FO(s=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(ei(u=>{l.component=u}),ot(()=>{})));for(let u of l.children)c.push(...a(u));return c};return Gm(a(s.targetSnapshot.root)).pipe(fu(null),Xn(1))}),FO(()=>this.afterPreactivation()),nr(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?Vn(l).pipe(ot(()=>i)):Qe(i)}),ot(s=>{let a=xfe(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=At(re({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),ei(()=>{this.events.next(new Wx)}),Cfe(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Xn(1),ei({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Il(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),Bn(this.transitionAbortSubject.pipe(ei(s=>{throw s}))),pl(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",po.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Jo(s=>{if(this.destroyed)return i.resolve(!1),yr;if(o=!0,dH(s))this.events.next(new Sa(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),wfe(s)?this.events.next(new Mf(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Nf(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=Lo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Of){let{message:c,cancellationCode:u}=_T(this.urlSerializer,l);this.events.next(new Sa(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new Mf(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return yr}))}))}cancelNavigationTransition(e,i,r){let o=new Sa(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dge(t){return t!==oT}var TH=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>E(pge),providedIn:"root"})}return t})(),CT=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},pge=(()=>{class t extends CT{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SH=(()=>{class t{urlSerializer=E(Zx);options=E(nv,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=E(Cu);urlHandlingStrategy=E(kT);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new ka;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,s=r??o;return s instanceof ka?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=oH(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>E(hge),providedIn:"root"})}return t})(),hge=(()=>{class t extends SH{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof $p?this.updateStateMemento():e instanceof Dl?this.commitTransition(i):e instanceof Hx?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Wx?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Sa&&(e.code===po.GuardRejected||e.code===po.NoDataFromResolver)?this.restoreHistory(i):e instanceof Nf?this.restoreHistory(i,!0):e instanceof Il&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,l=re(re({},s),this.generateNgRouterState(r,a));this.location.replaceState(e,"",l)}else{let a=re(re({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eR(t,n){t.events.pipe(Sn(e=>e instanceof Il||e instanceof Sa||e instanceof Nf||e instanceof Dl),ot(e=>e instanceof Il||e instanceof Dl?0:(e instanceof Sa?e.code===po.Redirect||e.code===po.SupersededByNewNavigation:!1)?2:1),Sn(e=>e!==2),Xn(1)).subscribe(()=>{n()})}var mge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},as=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=E(cO);stateManager=E(SH);options=E(nv,{optional:!0})||{};pendingTasks=E(vu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=E(CH);urlSerializer=E(Zx);location=E(Cu);urlHandlingStrategy=E(kT);_events=new Oe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=E(TH);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=E(iv,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!E(TT,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new tn;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Sa&&i.code!==po.Redirect&&i.code!==po.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Il)this.navigated=!0;else if(i instanceof Mf){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=re({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dge(r.source)},s);this.scheduleNavigation(a,oT,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}yge(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oT,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=re({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(ZO),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=re(re({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=r?r.snapshot:this.routerState.snapshot.root;d=tH(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return nH(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Af(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,oT,null,i)}navigate(e,i={skipLocationChange:!1}){return gge(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=re({},mge):i===!1?r=re({},fge):r=i,Af(e))return LU(this.currentUrlTree,e,r);let o=this.parseUrl(e);return LU(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,p)=>{a=d,l=p});let u=this.pendingTasks.add();return eR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gge(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new ye(4008,!1)}function yge(t){return!(t instanceof Wx)&&!(t instanceof Mf)}var xge=new he("");function tR(t,...n){return cf([{provide:iv,multi:!0,useValue:t},[],{provide:ku,useFactory:vge,deps:[as]},{provide:uO,multi:!0,useFactory:_ge},n.map(e=>e.\u0275providers)])}function vge(t){return t.routerState.root}function _ge(){let t=E(Vt);return n=>{let e=t.get(Br);if(n!==e.components[0])return;let i=t.get(as),r=t.get(wge);t.get(Cge)===1&&i.initialNavigation(),t.get(Tge,null,Pt.Optional)?.setUpPreloading(),t.get(xge,null,Pt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var wge=new he("",{factory:()=>new Oe}),Cge=new he("",{providedIn:"root",factory:()=>1});var Tge=new he("");var Mt=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Mt||{}),ls="*";function Pf(t,n){return{type:Mt.Trigger,name:t,definitions:n,options:{}}}function Bp(t,n=null){return{type:Mt.Animate,styles:n,timings:t}}function kH(t,n=null){return{type:Mt.Sequence,steps:t,options:n}}function jr(t){return{type:Mt.Style,styles:t,offset:null}}function zp(t,n,e=null){return{type:Mt.Transition,expr:t,animation:n,options:e}}var Ea=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,e=0){this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Vp=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let e=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){let e=n*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let n=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return n!=null?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},$f="!";function EH(t){return new ye(3e3,!1)}function kge(){return new ye(3100,!1)}function Ege(){return new ye(3101,!1)}function Ige(t){return new ye(3001,!1)}function Dge(t){return new ye(3003,!1)}function Age(t){return new ye(3004,!1)}function DH(t,n){return new ye(3005,!1)}function AH(){return new ye(3006,!1)}function NH(){return new ye(3007,!1)}function MH(t,n){return new ye(3008,!1)}function OH(t){return new ye(3002,!1)}function RH(t,n,e,i,r){return new ye(3010,!1)}function FH(){return new ye(3011,!1)}function LH(){return new ye(3012,!1)}function PH(){return new ye(3200,!1)}function $H(){return new ye(3202,!1)}function VH(){return new ye(3013,!1)}function BH(t){return new ye(3014,!1)}function zH(t){return new ye(3015,!1)}function GH(t){return new ye(3016,!1)}function UH(t,n){return new ye(3404,!1)}function Nge(t){return new ye(3502,!1)}function HH(t){return new ye(3503,!1)}function WH(){return new ye(3300,!1)}function jH(t){return new ye(3504,!1)}function qH(t){return new ye(3301,!1)}function XH(t,n){return new ye(3302,!1)}function KH(t){return new ye(3303,!1)}function YH(t,n){return new ye(3400,!1)}function QH(t){return new ye(3401,!1)}function ZH(t){return new ye(3402,!1)}function JH(t,n){return new ye(3505,!1)}function Al(t){switch(t.length){case 0:return new Ea;case 1:return t[0];default:return new Vp(t)}}function oR(t,n,e=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(n.forEach(l=>{let c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((p,h)=>{let m=h,g=p;if(h!=="offset")switch(m=t.normalizePropertyName(m,r),g){case $f:g=e.get(h);break;case ls:g=i.get(h);break;default:g=t.normalizeStyleValue(h,m,g,r);break}d.set(m,g)}),u||o.push(d),a=d,s=c}),r.length)throw Nge(r);return o}function IT(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&nR(e,"start",t)));break;case"done":t.onDone(()=>i(e&&nR(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&nR(e,"destroy",t)));break}}function nR(t,n,e){let i=e.totalTime,r=!!e.disabled,o=DT(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,i??t.totalTime,r),s=t._data;return s!=null&&(o._data=s),o}function DT(t,n,e,i,r="",o=0,s){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function ho(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function sR(t){let n=t.indexOf(":"),e=t.substring(1,n),i=t.slice(n+1);return[e,i]}var Mge=typeof document>"u"?null:document.documentElement;function AT(t){let n=t.parentNode||t.host||null;return n===Mge?null:n}function Oge(t){return t.substring(1,6)=="ebkit"}var Gp=null,IH=!1;function eW(t){Gp||(Gp=Rge()||{},IH=Gp.style?"WebkitAppearance"in Gp.style:!1);let n=!0;return Gp.style&&!Oge(t)&&(n=t in Gp.style,!n&&IH&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Gp.style)),n}function Rge(){return typeof document<"u"?document.body:null}function aR(t,n){for(;n;){if(n===t)return!0;n=AT(n)}return!1}function lR(t,n,e){if(e)return Array.from(t.querySelectorAll(n));let i=t.querySelector(n);return i?[i]:[]}var Fge=1e3,cR="{{",Lge="}}",uR="ng-enter",NT="ng-leave",rv="ng-trigger",ov=".ng-trigger",dR="ng-animating",MT=".ng-animating";function Ia(t){if(typeof t=="number")return t;let n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:iR(parseFloat(n[1]),n[2])}function iR(t,n){switch(n){case"s":return t*Fge;default:return t}}function sv(t,n,e){return t.hasOwnProperty("duration")?t:Pge(t,n,e)}function Pge(t,n,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof t=="string"){let a=t.match(i);if(a===null)return n.push(EH(t)),{duration:0,delay:0,easing:""};r=iR(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=iR(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=t;if(!e){let a=!1,l=n.length;r<0&&(n.push(kge()),a=!0),o<0&&(n.push(Ege()),a=!0),a&&n.splice(l,0,EH(t))}return{duration:r,delay:o,easing:s}}function tW(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}function Gs(t,n,e){n.forEach((i,r)=>{let o=OT(r);e&&!e.has(r)&&e.set(r,t.style[o]),t.style[o]=i})}function Iu(t,n){n.forEach((e,i)=>{let r=OT(i);t.style[r]=""})}function Vf(t){return Array.isArray(t)?t.length==1?t[0]:kH(t):t}function nW(t,n,e){let i=n.params||{},r=pR(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(Ige(o))})}var rR=new RegExp(`${cR}\\s*(.+?)\\s*${Lge}`,"g");function pR(t){let n=[];if(typeof t=="string"){let e;for(;e=rR.exec(t);)n.push(e[1]);rR.lastIndex=0}return n}function Bf(t,n,e){let i=`${t}`,r=i.replace(rR,(o,s)=>{let a=n[s];return a==null&&(e.push(Dge(s)),a=""),a.toString()});return r==i?t:r}var $ge=/-+([a-z0-9])/g;function OT(t){return t.replace($ge,(...n)=>n[1].toUpperCase())}function iW(t,n){return t===0||n===0}function rW(t,n,e){if(e.size&&n.length){let i=n[0],r=[];if(e.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<n.length;o++){let s=n[o];r.forEach(a=>s.set(a,RT(t,a)))}}return n}function mo(t,n,e){switch(n.type){case Mt.Trigger:return t.visitTrigger(n,e);case Mt.State:return t.visitState(n,e);case Mt.Transition:return t.visitTransition(n,e);case Mt.Sequence:return t.visitSequence(n,e);case Mt.Group:return t.visitGroup(n,e);case Mt.Animate:return t.visitAnimate(n,e);case Mt.Keyframes:return t.visitKeyframes(n,e);case Mt.Style:return t.visitStyle(n,e);case Mt.Reference:return t.visitReference(n,e);case Mt.AnimateChild:return t.visitAnimateChild(n,e);case Mt.AnimateRef:return t.visitAnimateRef(n,e);case Mt.Query:return t.visitQuery(n,e);case Mt.Stagger:return t.visitStagger(n,e);default:throw Age(n.type)}}function RT(t,n){return window.getComputedStyle(t)[n]}var DR=(()=>{class t{validateStyleProperty(e){return eW(e)}containsElement(e,i){return aR(e,i)}getParentElement(e){return AT(e)}query(e,i,r){return lR(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,s,a=[],l){return new Ea(r,o)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),Hp=class{static NOOP=new DR},Wp=class{};var Vge=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),VT=class extends Wp{normalizePropertyName(n,e){return OT(n)}normalizeStyleValue(n,e,i,r){let o="",s=i.toString().trim();if(Vge.has(e)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(DH(n,i))}return s+o}};var BT="*";function Bge(t,n){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>zge(i,e,n)):e.push(t),e}function zge(t,n,e){if(t[0]==":"){let l=Gge(t,e);if(typeof l=="function"){n.push(l);return}t=l}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(zH(t)),n;let r=i[1],o=i[2],s=i[3];n.push(oW(r,s));let a=r==BT&&s==BT;o[0]=="<"&&!a&&n.push(oW(s,r))}function Gge(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(GH(t)),"* => *"}}var FT=new Set(["true","1"]),LT=new Set(["false","0"]);function oW(t,n){let e=FT.has(t)||LT.has(t),i=FT.has(n)||LT.has(n);return(r,o)=>{let s=t==BT||t==r,a=n==BT||n==o;return!s&&e&&typeof r=="boolean"&&(s=r?FT.has(t):LT.has(t)),!a&&i&&typeof o=="boolean"&&(a=o?FT.has(n):LT.has(n)),s&&a}}var fW=":self",Uge=new RegExp(`s*${fW}s*,?`,"g");function gW(t,n,e,i){return new bR(t).build(n,e,i)}var sW="",bR=class{_driver;constructor(n){this._driver=n}build(n,e,i){let r=new xR(e);return this._resetContextStyleTimingState(r),mo(this,Vf(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector=sW,n.collectedStyles=new Map,n.collectedStyles.set(sW,new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0,o=[],s=[];return n.name.charAt(0)=="@"&&e.errors.push(AH()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==Mt.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,e))}),l.name=c}else if(a.type==Mt.Transition){let l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,s.push(l)}else e.errors.push(NH())}),{type:Mt.Trigger,name:n.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(n,e){let i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{pR(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(MH(n.name,[...o.values()]))}return{type:Mt.State,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;let i=mo(this,Vf(n.animation),e),r=Bge(n.expr,e.errors);return{type:Mt.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Up(n.options)}}visitSequence(n,e){return{type:Mt.Sequence,steps:n.steps.map(i=>mo(this,i,e)),options:Up(n.options)}}visitGroup(n,e){let i=e.currentTime,r=0,o=n.steps.map(s=>{e.currentTime=i;let a=mo(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:Mt.Group,steps:o,options:Up(n.options)}}visitAnimate(n,e){let i=qge(n.timings,e.errors);e.currentAnimateTimings=i;let r,o=n.styles?n.styles:jr({});if(o.type==Mt.Keyframes)r=this.visitKeyframes(o,e);else{let s=n.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=jr(c)}e.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:Mt.Animate,timings:i,style:r,options:null}}visitStyle(n,e){let i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){let i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of r)typeof a=="string"?a===ls?i.push(a):e.errors.push(OH(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(cR)>=0){o=!0;break}}}),{type:Mt.Style,styles:i,easing:s,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,e){let i=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),n.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l),d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(e.errors.push(RH(l,u.startTime,u.endTime,o,r)),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:r}),e.options&&nW(a,e.options,e.errors)})})}visitKeyframes(n,e){let i={type:Mt.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(FH()),i;let r=1,o=0,s=[],a=!1,l=!1,c=0,u=n.steps.map(y=>{let b=this._makeStyleAst(y,e),x=b.offset!=null?b.offset:jge(b.styles),_=0;return x!=null&&(o++,_=b.offset=x),l=l||_<0||_>1,a=a||_<c,c=_,s.push(_),b});l&&e.errors.push(LH()),a&&e.errors.push(PH());let d=n.steps.length,p=0;o>0&&o<d?e.errors.push($H()):o==0&&(p=r/(d-1));let h=d-1,m=e.currentTime,g=e.currentAnimateTimings,f=g.duration;return u.forEach((y,b)=>{let x=p>0?b==h?1:p*b:s[b],_=x*f;e.currentTime=m+g.delay+_,g.duration=_,this._validateStyleAst(y,e),y.offset=x,i.styles.push(y)}),i}visitReference(n,e){return{type:Mt.Reference,animation:mo(this,Vf(n.animation),e),options:Up(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:Mt.AnimateChild,options:Up(n.options)}}visitAnimateRef(n,e){return{type:Mt.AnimateRef,animation:this.visitReference(n.animation,e),options:Up(n.options)}}visitQuery(n,e){let i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;let[o,s]=Hge(n.selector);e.currentQuerySelector=i.length?i+" "+o:o,ho(e.collectedStyles,e.currentQuerySelector,new Map);let a=mo(this,Vf(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Mt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:n.selector,options:Up(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(VH());let i=n.timings==="full"?{duration:0,delay:0,easing:"full"}:sv(n.timings,e.errors,!0);return{type:Mt.Stagger,animation:mo(this,Vf(n.animation),e),timings:i,options:null}}};function Hge(t){let n=!!t.split(/\s*,\s*/).find(e=>e==fW);return n&&(t=t.replace(Uge,"")),t=t.replace(/@\*/g,ov).replace(/@\w+/g,e=>ov+"-"+e.slice(1)).replace(/:animating/g,MT),[t,n]}function Wge(t){return t?re({},t):null}var xR=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}};function jge(t){if(typeof t=="string")return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}function qge(t,n){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let o=sv(t,n).duration;return hR(o,0,"")}let e=t;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=hR(0,0,"");return o.dynamic=!0,o.strValue=e,o}let r=sv(e,n);return hR(r.duration,r.delay,r.easing)}function Up(t){return t?(t=re({},t),t.params&&(t.params=Wge(t.params))):t={},t}function hR(t,n,e){return{duration:t,delay:n,easing:e}}function AR(t,n,e,i,r,o,s=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var lv=class{_map=new Map;get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}},Xge=1,Kge=":enter",Yge=new RegExp(Kge,"g"),Qge=":leave",Zge=new RegExp(Qge,"g");function yW(t,n,e,i,r,o=new Map,s=new Map,a,l,c=[]){return new vR().buildKeyframes(t,n,e,i,r,o,s,a,l,c)}var vR=class{buildKeyframes(n,e,i,r,o,s,a,l,c,u=[]){c=c||new lv;let d=new _R(n,e,c,r,o,u,[]);d.options=l;let p=l.delay?Ia(l.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([s],null,d.errors,l),mo(this,i,d);let h=d.timelines.filter(m=>m.containsAnimation());if(h.length&&a.size){let m;for(let g=h.length-1;g>=0;g--){let f=h[g];if(f.element===e){m=f;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,l)}return h.length?h.map(m=>m.buildKeyframes()):[AR(e,[],[],[],0,p,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(n.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){let i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(let r of n){let o=r?.delay;if(o){let s=typeof o=="number"?o:Ia(Bf(o,r?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(n,e,i){let o=e.currentTimeline.currentTime,s=i.duration!=null?Ia(i.duration):null,a=i.delay!=null?Ia(i.delay):null;return s!==0&&n.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(n,e){e.updateOptions(n.options,!0),mo(this,n.animation,e),e.previousNode=n}visitSequence(n,e){let i=e.subContextCount,r=e,o=n.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Mt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=zT);let s=Ia(o.delay);r.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>mo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){let i=[],r=e.currentTimeline.currentTime,o=n.options&&n.options.delay?Ia(n.options.delay):0;n.steps.forEach(s=>{let a=e.createSubContext(n.options);o&&a.delayNextStep(o),mo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){let i=n.strValue,r=e.params?Bf(i,e.params,e.errors):i;return sv(r,e.errors)}else return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){let i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let o=n.style;o.type==Mt.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(o):i.setStyles(n.styles,o,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,n.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=n}visitQuery(n,e){let i=e.currentTimeline.currentTime,r=n.options||{},o=r.delay?Ia(r.delay):0;o&&(e.previousNode.type===Mt.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=zT);let s=i,a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;let d=e.createSubContext(n.options,c);o&&d.delayNextStep(o),c===e.element&&(l=d.currentTimeline),mo(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe();let p=d.currentTimeline.currentTime;s=Math.max(s,p)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){let i=e.parentContext,r=e.currentTimeline,o=n.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let u=e.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;mo(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},zT={},_R=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=zT;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,e,i,r,o,s,a,l){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new GT(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;let i=n,r=this.options;i.duration!=null&&(r.duration=Ia(i.duration)),i.delay!=null&&(r.delay=Ia(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Bf(o[a],s,this.errors))})}}_copyOptions(){let n={};if(this.options){let e=this.options.params;if(e){let i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){let r=e||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=zT,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){let r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},o=new wR(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,o,s){let a=[];if(r&&a.push(this.element),n.length>0){n=n.replace(Yge,"."+this._enterClassName),n=n.replace(Zge,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,n,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&s.push(BH(e)),a}},GT=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new t(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=Xge,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||ls),this._currentKeyframe.set(e,ls);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);let o=r&&r.params||{},s=Jge(n,this._globalTimelineStyles);for(let[a,l]of s){let c=Bf(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ls),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let n=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===$f?n.add(d):u===ls&&e.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});let o=[...n.values()],s=[...e.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return AR(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},wR=class extends GT{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,e,i,r,o,s,a=!1){super(n,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=i+e,a=e/s,l=new Map(n[0]);l.set("offset",0),o.push(l);let c=new Map(n[0]);c.set("offset",aW(a)),o.push(c);let u=n.length-1;for(let d=1;d<=u;d++){let p=new Map(n[d]),h=p.get("offset"),m=e+h*i;p.set("offset",aW(m/s)),o.push(p)}i=s,e=0,r="",n=o}return AR(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function aW(t,n=3){let e=Math.pow(10,n-1);return Math.round(t*e)/e}function Jge(t,n){let e=new Map,i;return t.forEach(r=>{if(r==="*"){i??=n.keys();for(let o of i)e.set(o,ls)}else for(let[o,s]of r)e.set(o,s)}),e}function lW(t,n,e,i,r,o,s,a,l,c,u,d,p){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:p}}var mR={},UT=class{_triggerName;ast;_stateStyles;constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return eye(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return n!==void 0&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,o,s,a,l,c,u){let d=[],p=this.ast.options&&this.ast.options.params||mR,h=a&&a.params||mR,m=this.buildStyles(i,h,d),g=l&&l.params||mR,f=this.buildStyles(r,g,d),y=new Set,b=new Map,x=new Map,_=r==="void",w={params:bW(g,p),delay:this.ast.options?.delay},C=u?[]:yW(n,e,this.ast.animation,o,s,m,f,w,c,d),k=0;return C.forEach(N=>{k=Math.max(N.duration+N.delay,k)}),d.length?lW(e,this._triggerName,i,r,_,m,f,[],[],b,x,k,d):(C.forEach(N=>{let P=N.element,F=ho(b,P,new Set);N.preStyleProps.forEach(Y=>F.add(Y));let z=ho(x,P,new Set);N.postStyleProps.forEach(Y=>z.add(Y)),P!==e&&y.add(P)}),lW(e,this._triggerName,i,r,_,m,f,C,[...y.values()],b,x,k))}};function eye(t,n,e,i,r){return t.some(o=>o(n,e,i,r))}function bW(t,n){let e=re({},n);return Object.entries(t).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var CR=class{styles;defaultParams;normalizer;constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){let i=new Map,r=bW(n,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Bf(s,r,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),i.set(a,s)})}),i}};function tye(t,n,e){return new TR(t,n,e)}var TR=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new CR(r.style,o,i))}),cW(this.states,"true","1"),cW(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new UT(n,r,this.states))}),this.fallbackTransition=nye(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(s=>s.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}};function nye(t,n,e){let i=[(s,a)=>!0],r={type:Mt.Sequence,steps:[],options:null},o={type:Mt.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new UT(t,o,n)}function cW(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}var iye=new lv,SR=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i}register(n,e){let i=[],r=[],o=gW(this._driver,e,i,r);if(i.length)throw HH(i);this._animations.set(n,o)}_buildPlayer(n,e,i){let r=n.element,o=oR(this._normalizer,n.keyframes,e,i);return this._driver.animate(r,o,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){let r=[],o=this._animations.get(n),s,a=new Map;if(o?(s=yW(this._driver,e,o,uR,NT,new Map,new Map,i,iye,r),s.forEach(u=>{let d=ho(a,u.element,new Map);u.postStyleProps.forEach(p=>d.set(p,null))})):(r.push(WH()),s=[]),r.length)throw jH(r);a.forEach((u,d)=>{u.forEach((p,h)=>{u.set(h,this._driver.computeStyle(d,h,ls))})});let l=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=Al(l);return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){let e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){let e=this._playersById.get(n);if(!e)throw qH(n);return e}listen(n,e,i,r){let o=DT(e,"","","");return IT(this._getPlayer(n),i,o,r),()=>{}}command(n,e,i,r){if(i=="register"){this.register(n,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(n,e,s);return}let o=this._getPlayer(n);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n);break}}},uW="ng-animate-queued",rye=".ng-animate-queued",fR="ng-animate-disabled",oye=".ng-animate-disabled",sye="ng-star-inserted",aye=".ng-star-inserted",lye=[],xW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cye={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Us="__ng_removed",cv=class{namespaceId;value;options;get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;let i=n&&n.hasOwnProperty("value"),r=i?n.value:n;if(this.value=dye(r),i){let o=n,{value:s}=o,a=xA(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){let e=n.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},av="void",gR=new cv(av),kR=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+n,cs(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw XH(i,e);if(i==null||i.length==0)throw KH(e);if(!pye(i))throw YH(i,e);let o=ho(this._elementListeners,n,[]),s={name:e,phase:i,callback:r};o.push(s);let a=ho(this._engine.statesByElement,n,new Map);return a.has(e)||(cs(n,rv),cs(n,rv+"-"+e),a.set(e,gR)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return this._triggers.has(n)?!1:(this._triggers.set(n,e),!0)}_getTrigger(n){let e=this._triggers.get(n);if(!e)throw QH(n);return e}trigger(n,e,i,r=!0){let o=this._getTrigger(e),s=new uv(this.id,e,n),a=this._engine.statesByElement.get(n);a||(cs(n,rv),cs(n,rv+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e),c=new cv(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=gR),!(c.value===av)&&l.value===c.value){if(!fye(l.params,c.params)){let g=[],f=o.matchStyles(l.value,l.params,g),y=o.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Iu(n,f),Gs(n,y)})}return}let p=ho(this._engine.playersByElement,n,[]);p.forEach(g=>{g.namespaceId==this.id&&g.triggerName==e&&g.queued&&g.destroy()});let h=o.matchTransition(l.value,c.value,n,c.params),m=!1;if(!h){if(!r)return;h=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:m}),m||(cs(n,uW),s.onStart(()=>{zf(n,uW)})),s.onDone(()=>{let g=this.players.indexOf(s);g>=0&&this.players.splice(g,1);let f=this._engine.playersByElement.get(n);if(f){let y=f.indexOf(s);y>=0&&f.splice(y,1)}}),this.players.push(s),p.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);let e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){let i=this._engine.driver.query(n,ov,!0);i.forEach(r=>{if(r[Us])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){let o=this._engine.statesByElement.get(n),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(n,c,av,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,s),i&&Al(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){let e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){let r=new Set;e.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||gR,u=new cv(av),d=new uv(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,e){let i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(n):[];if(o&&o.length)r=!0;else{let s=n;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{let o=n[Us];(!o||o===xW)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){cs(n,this._hostClassName)}drainQueuedTransitions(n){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=DT(o,i.triggerName,i.fromState.value,i.toState.value);l._data=n,IT(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}},ER=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,e)=>{};_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i}get queuedPlayers(){let n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){let i=new kR(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,n),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){let e=new Set,i=this.statesByElement.get(n);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}}return e}trigger(n,e,i,r){if(PT(e)){let o=this._fetchNamespace(n);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!PT(e))return;let o=e[Us];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){let s=this._fetchNamespace(n);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),cs(n,fR)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),zf(n,fR))}removeNode(n,e,i){if(PT(e)){let r=n?this._fetchNamespace(n):null;r?r.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);let o=this.namespacesByHostElement.get(e);o&&o.id!==n&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,r,o){this.collectedLeaveElements.push(e),e[Us]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,e,i,r,o){return PT(e)?this._fetchNamespace(n).listen(e,i,r,o):()=>{}}_buildInstruction(n,e,i,r,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,o)}destroyInnerAnimations(n){let e=this.driver.query(n,ov,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(n,MT,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){let e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){let e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Al(this.players).onDone(()=>n());n()})}processLeaveNode(n){let e=n[Us];if(e&&e.setForRemoval){if(n[Us]=xW,e.namespaceId){this.destroyInnerAnimations(n);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(fR)&&this.markElementAsDisabled(n,!1),this.driver.query(n,oye,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];cs(r,sye)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Al(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw ZH(n)}_flushAnimations(n,e){let i=new lv,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(U=>{u.add(U);let j=this.driver.query(U,rye,!0);for(let q=0;q<j.length;q++)u.add(j[q])});let d=this.bodyNode,p=Array.from(this.statesByElement.keys()),h=hW(p,this.collectedEnterElements),m=new Map,g=0;h.forEach((U,j)=>{let q=uR+g++;m.set(j,q),U.forEach(Q=>cs(Q,q))});let f=[],y=new Set,b=new Set;for(let U=0;U<this.collectedLeaveElements.length;U++){let j=this.collectedLeaveElements[U],q=j[Us];q&&q.setForRemoval&&(f.push(j),y.add(j),q.hasAnimation?this.driver.query(j,aye,!0).forEach(Q=>y.add(Q)):b.add(j))}let x=new Map,_=hW(p,Array.from(y));_.forEach((U,j)=>{let q=NT+g++;x.set(j,q),U.forEach(Q=>cs(Q,q))}),n.push(()=>{h.forEach((U,j)=>{let q=m.get(j);U.forEach(Q=>zf(Q,q))}),_.forEach((U,j)=>{let q=x.get(j);U.forEach(Q=>zf(Q,q))}),f.forEach(U=>{this.processLeaveNode(U)})});let w=[],C=[];for(let U=this._namespaceList.length-1;U>=0;U--)this._namespaceList[U].drainQueuedTransitions(e).forEach(q=>{let Q=q.player,oe=q.element;if(w.push(Q),this.collectedEnterElements.length){let ve=oe[Us];if(ve&&ve.setForMove){if(ve.previousTriggersValues&&ve.previousTriggersValues.has(q.triggerName)){let He=ve.previousTriggersValues.get(q.triggerName),ae=this.statesByElement.get(q.element);if(ae&&ae.has(q.triggerName)){let Te=ae.get(q.triggerName);Te.value=He,ae.set(q.triggerName,Te)}}Q.destroy();return}}let se=!d||!this.driver.containsElement(d,oe),ue=x.get(oe),fe=m.get(oe),ge=this._buildInstruction(q,i,fe,ue,se);if(ge.errors&&ge.errors.length){C.push(ge);return}if(se){Q.onStart(()=>Iu(oe,ge.fromStyles)),Q.onDestroy(()=>Gs(oe,ge.toStyles)),r.push(Q);return}if(q.isFallbackTransition){Q.onStart(()=>Iu(oe,ge.fromStyles)),Q.onDestroy(()=>Gs(oe,ge.toStyles)),r.push(Q);return}let xe=[];ge.timelines.forEach(ve=>{ve.stretchStartingKeyframe=!0,this.disabledNodes.has(ve.element)||xe.push(ve)}),ge.timelines=xe,i.append(oe,ge.timelines);let De={instruction:ge,player:Q,element:oe};s.push(De),ge.queriedElements.forEach(ve=>ho(a,ve,[]).push(Q)),ge.preStyleProps.forEach((ve,He)=>{if(ve.size){let ae=l.get(He);ae||l.set(He,ae=new Set),ve.forEach((Te,Ie)=>ae.add(Ie))}}),ge.postStyleProps.forEach((ve,He)=>{let ae=c.get(He);ae||c.set(He,ae=new Set),ve.forEach((Te,Ie)=>ae.add(Ie))})});if(C.length){let U=[];C.forEach(j=>{U.push(JH(j.triggerName,j.errors))}),w.forEach(j=>j.destroy()),this.reportError(U)}let k=new Map,N=new Map;s.forEach(U=>{let j=U.element;i.has(j)&&(N.set(j,j),this._beforeAnimationBuild(U.player.namespaceId,U.instruction,k))}),r.forEach(U=>{let j=U.element;this._getPreviousPlayers(j,!1,U.namespaceId,U.triggerName,null).forEach(Q=>{ho(k,j,[]).push(Q),Q.destroy()})});let P=f.filter(U=>mW(U,l,c)),F=new Map;pW(F,this.driver,b,c,ls).forEach(U=>{mW(U,l,c)&&P.push(U)});let Y=new Map;h.forEach((U,j)=>{pW(Y,this.driver,new Set(U),l,$f)}),P.forEach(U=>{let j=F.get(U),q=Y.get(U);F.set(U,new Map([...j?.entries()??[],...q?.entries()??[]]))});let K=[],Z=[],te={};s.forEach(U=>{let{element:j,player:q,instruction:Q}=U;if(i.has(j)){if(u.has(j)){q.onDestroy(()=>Gs(j,Q.toStyles)),q.disabled=!0,q.overrideTotalTime(Q.totalTime),r.push(q);return}let oe=te;if(N.size>1){let ue=j,fe=[];for(;ue=ue.parentNode;){let ge=N.get(ue);if(ge){oe=ge;break}fe.push(ue)}fe.forEach(ge=>N.set(ge,oe))}let se=this._buildAnimation(q.namespaceId,Q,k,o,Y,F);if(q.setRealPlayer(se),oe===te)K.push(q);else{let ue=this.playersByElement.get(oe);ue&&ue.length&&(q.parentPlayer=Al(ue)),r.push(q)}}else Iu(j,Q.fromStyles),q.onDestroy(()=>Gs(j,Q.toStyles)),Z.push(q),u.has(j)&&r.push(q)}),Z.forEach(U=>{let j=o.get(U.element);if(j&&j.length){let q=Al(j);U.setRealPlayer(q)}}),r.forEach(U=>{U.parentPlayer?U.syncPlayerEvents(U.parentPlayer):U.destroy()});for(let U=0;U<f.length;U++){let j=f[U],q=j[Us];if(zf(j,NT),q&&q.hasAnimation)continue;let Q=[];if(a.size){let se=a.get(j);se&&se.length&&Q.push(...se);let ue=this.driver.query(j,MT,!0);for(let fe=0;fe<ue.length;fe++){let ge=a.get(ue[fe]);ge&&ge.length&&Q.push(...ge)}}let oe=Q.filter(se=>!se.destroyed);oe.length?hye(this,j,oe):this.processLeaveNode(j)}return f.length=0,K.forEach(U=>{this.players.push(U),U.onDone(()=>{U.destroy();let j=this.players.indexOf(U);this.players.splice(j,1)}),U.play()}),K}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,o){let s=[];if(e){let a=this.playersByQueriedElement.get(n);a&&(s=a)}else{let a=this.playersByElement.get(n);if(a){let l=!o||o==av;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(n,e,i){let r=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:r;for(let l of e.timelines){let c=l.element,u=c!==o,d=ho(i,c,[]);this._getPreviousPlayers(c,u,s,a,e.toState).forEach(h=>{let m=h.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),h.destroy(),d.push(h)})}Iu(o,e.fromStyles)}_buildAnimation(n,e,i,r,o,s){let a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,p=e.timelines.map(m=>{let g=m.element;u.add(g);let f=g[Us];if(f&&f.removedBeforeQueried)return new Ea(m.duration,m.delay);let y=g!==l,b=mye((i.get(g)||lye).map(k=>k.getRealPlayer())).filter(k=>{let N=k;return N.element?N.element===g:!1}),x=o.get(g),_=s.get(g),w=oR(this._normalizer,m.keyframes,x,_),C=this._buildPlayer(m,w,b);if(m.subTimeline&&r&&d.add(g),y){let k=new uv(n,a,g);k.setRealPlayer(C),c.push(k)}return C});c.forEach(m=>{ho(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>uye(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>cs(m,dR));let h=Al(p);return h.onDestroy(()=>{u.forEach(m=>zf(m,dR)),Gs(l,e.toStyles)}),d.forEach(m=>{ho(r,m,[]).push(h)}),h}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new Ea(n.duration,n.delay)}},uv=class{namespaceId;triggerName;element;_player=new Ea;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>IT(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){let e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){ho(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){let e=this._player;e.triggerCallback&&e.triggerCallback(n)}};function uye(t,n,e){let i=t.get(n);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&t.delete(n)}return i}function dye(t){return t??null}function PT(t){return t&&t.nodeType===1}function pye(t){return t=="start"||t=="done"}function dW(t,n){let e=t.style.display;return t.style.display=n??"none",e}function pW(t,n,e,i,r){let o=[];e.forEach(l=>o.push(dW(l)));let s=[];i.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let p=n.computeStyle(c,d,r);u.set(d,p),(!p||p.length==0)&&(c[Us]=cye,s.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>dW(l,o[a++])),s}function hW(t,n){let e=new Map;if(t.forEach(a=>e.set(a,[])),n.length==0)return e;let i=1,r=new Set(n),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:r.has(c)?l=i:l=s(c),o.set(a,l),l}return n.forEach(a=>{let l=s(a);l!==i&&e.get(l).push(a)}),e}function cs(t,n){t.classList?.add(n)}function zf(t,n){t.classList?.remove(n)}function hye(t,n,e){Al(e).onDone(()=>t.processLeaveNode(n))}function mye(t){let n=[];return vW(t,n),n}function vW(t,n){for(let e=0;e<t.length;e++){let i=t[e];i instanceof Vp?vW(i.players,n):n.push(i)}}function fye(t,n){let e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let o=e[r];if(!n.hasOwnProperty(o)||t[o]!==n[o])return!1}return!0}function mW(t,n,e){let i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(o=>r.add(o)):n.set(t,i),e.delete(t),!0}var Gf=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,e)=>{};constructor(n,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new ER(n.body,e,i),this._timelineEngine=new SR(n.body,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(n,e,i,r,o){let s=n+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],u=gW(this._driver,o,l,c);if(l.length)throw UH(r,l);a=tye(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if(i.charAt(0)=="@"){let[o,s]=sR(i),a=r;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,o){if(i.charAt(0)=="@"){let[s,a]=sR(i);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(n,e,i,r,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}};function gye(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=yR(n[0]),n.length>1&&(i=yR(n[n.length-1]))):n instanceof Map&&(e=yR(n)),e||i?new yye(t,e,i):null}var yye=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let o=t.initialStylesByElement.get(e);o||t.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Gs(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Gs(this._element,this._initialStyles),this._endStyles&&(Gs(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Iu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Iu(this._element,this._endStyles),this._endStyles=null),Gs(this._element,this._initialStyles),this._state=3)}}return t})();function yR(t){let n=null;return t.forEach((e,i)=>{bye(i)&&(n=n||new Map,n.set(i,e))}),n}function bye(t){return t==="display"||t==="position"}var HT=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){let e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&n.set(r,this._finished?i:RT(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){let e=n==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},WT=class{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return aR(n,e)}getParentElement(n){return AT(n)}query(n,e,i){return lR(n,e,i)}computeStyle(n,e,i){return RT(n,e)}animate(n,e,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let c=new Map,u=s.filter(h=>h instanceof HT);iW(i,r)&&u.forEach(h=>{h.currentSnapshot.forEach((m,g)=>c.set(g,m))});let d=tW(e).map(h=>new Map(h));d=rW(n,d,c);let p=gye(n,d);return new HT(n,d,l,p)}};var $T="@",_W="@.disabled",jT=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){e.charAt(0)==$T&&e==_W?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i,r){return this.delegate.listen(n,e,i,r)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}},IR=class extends jT{factory;constructor(n,e,i,r,o){super(e,i,r,o),this.factory=n,this.namespaceId=e}setProperty(n,e,i){e.charAt(0)==$T?e.charAt(1)=="."&&e==_W?(i=i===void 0?!0:!!i,this.disableAnimations(n,i)):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i,r){if(e.charAt(0)==$T){let o=xye(n),s=e.slice(1),a="";return s.charAt(0)!=$T&&([s,a]=vye(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(n,e,i,r)}};function xye(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function vye(t){let n=t.indexOf("."),e=t.substring(0,n),i=t.slice(n+1);return[e,i]}var qT=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,e,i){this.delegate=n,this.engine=e,this._zone=i,e.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(n,e){let i="",r=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let d=()=>c.delete(r);u=new jT(i,r,this.engine,d),c.set(r,u)}return u}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,n,c.name,c)};return e.data.animation.forEach(a),new IR(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,i){if(n>=0&&n<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}};var wye=(()=>{class t extends Gf{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||t)(qe(at),qe(Hp),qe(Wp))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();function Cye(){return new VT}function Tye(t,n,e){return new qT(t,n,e)}var wW=[{provide:Wp,useFactory:Cye},{provide:Gf,useClass:wye},{provide:Oi,useFactory:Tye,deps:[Mx,Gf,Xe]}],AYe=[{provide:Hp,useClass:DR},{provide:En,useValue:"NoopAnimations"},...wW],Sye=[{provide:Hp,useFactory:()=>new WT},{provide:En,useFactory:()=>"BrowserAnimations"},...wW];function CW(){return _l("NgEagerAnimations"),[...Sye]}function dv(t){return t.buttons===0||t.detail===0}function pv(t){let n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var NR;function TW(){if(NR==null){let t=typeof document<"u"?document.head:null;NR=!!(t&&(t.createShadowRoot||t.attachShadow))}return NR}function MR(t){if(TW()){let n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function hv(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function qr(t){return t.composedPath?t.composedPath()[0]:t.target}function us(t,n,e,i,r){let o=parseInt(mO.major),s=parseInt(mO.minor);return o>19||o===19&&s>0||o===0&&s===0?t.listen(n,e,i,r):(n.addEventListener(e,i,r),()=>{n.removeEventListener(e,i,r)})}var OR;try{OR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{OR=!1}var ln=(()=>{class t{_platformId=E(zr);isBrowser=this._platformId?Bs(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||OR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mv;function SW(){if(mv==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>mv=!0}))}finally{mv=mv||!1}return mv}function Du(t){return SW()?t:!!t.capture}function Au(t,n=0){return kW(t)?Number(t):arguments.length===2?n:0}function kW(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Da(t){return t instanceof nt?t.nativeElement:t}var EW=new he("cdk-input-modality-detector-options"),IW={ignoreKeys:[18,17,224,91,16]},DW=650,RR={passive:!0,capture:!0},AW=(()=>{class t{_platform=E(ln);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Jn(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=qr(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<DW||(this._modality.next(dv(e)?"keyboard":"mouse"),this._mostRecentTarget=qr(e))};_onTouchstart=e=>{if(pv(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=qr(e)};constructor(){let e=E(Xe),i=E(at),r=E(EW,{optional:!0});if(this._options=re(re({},IW),r),this.modalityDetected=this._modality.pipe(ix(1)),this.modalityChanged=this.modalityDetected.pipe(Ew()),this._platform.isBrowser){let o=E(Oi).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[us(o,i,"keydown",this._onKeydown,RR),us(o,i,"mousedown",this._onMousedown,RR),us(o,i,"touchstart",this._onTouchstart,RR)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fv=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(fv||{}),NW=new he("cdk-focus-monitor-default-options"),XT=Du({passive:!0,capture:!0}),Nl=(()=>{class t{_ngZone=E(Xe);_platform=E(ln);_inputModalityDetector=E(AW);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=E(at,{optional:!0});_stopInputModalityDetector=new Oe;constructor(){let e=E(NW,{optional:!0});this._detectionMode=e?.detectionMode||fv.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=qr(e);for(let r=i;r;r=r.parentElement)e.type==="focus"?this._onFocus(e,r):this._onBlur(e,r)};monitor(e,i=!1){let r=Da(e);if(!this._platform.isBrowser||r.nodeType!==1)return Qe();let o=MR(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new Oe,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let i=Da(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let o=Da(e),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===fv.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===fv.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?DW:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),o=qr(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,XT),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,XT)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Bn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,XT),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,XT),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var KT=new WeakMap,Xi=(()=>{class t{_appRef;_injector=E(Vt);_environmentInjector=E(bi);load(e){let i=this._appRef=this._appRef||this._injector.get(Br),r=KT.get(i);r||(r={loaders:new Set,refs:[]},KT.set(i,r),i.onDestroy(()=>{KT.get(i)?.refs.forEach(o=>o.destroy()),KT.delete(i)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(BC(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Uf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return t})();function Hf(t){return Array.isArray(t)?t:[t]}var MW=new Set,jp,RW=(()=>{class t{_platform=E(ln);_nonce=E(bx,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Eye}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&kye(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kye(t,n){if(!MW.has(t))try{jp||(jp=document.createElement("style"),n&&jp.setAttribute("nonce",n),jp.setAttribute("type","text/css"),document.head.appendChild(jp)),jp.sheet&&(jp.sheet.insertRule(`@media ${t} {body{ }}`,0),MW.add(t))}catch(e){console.error(e)}}function Eye(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var gv=(()=>{class t{_mediaMatcher=E(RW);_zone=E(Xe);_queries=new Map;_destroySubject=new Oe;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return OW(Hf(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=OW(Hf(e)).map(s=>this._registerQuery(s).observable),o=Gm(r);return o=hu(o.pipe(Xn(1)),o.pipe(ix(1),dp(0))),o.pipe(ot(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),o={observable:new Lt(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Ro(i),ot(({matches:s})=>({query:e,matches:s})),Bn(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function OW(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}var Iye=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var YT=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({providers:[Iye]})}return t})();var PR=(()=>{class t{_platform=E(ln);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return Aye(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=Dye($ye(e));if(i&&(FW(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=FW(e);return e.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Lye(e)?!1:r==="audio"?e.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return Pye(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Dye(t){try{return t.frameElement}catch{return null}}function Aye(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function Nye(t){let n=t.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function Mye(t){return Rye(t)&&t.type=="hidden"}function Oye(t){return Fye(t)&&t.hasAttribute("href")}function Rye(t){return t.nodeName.toLowerCase()=="input"}function Fye(t){return t.nodeName.toLowerCase()=="a"}function $W(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let n=t.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function FW(t){if(!$W(t))return null;let n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function Lye(t){let n=t.nodeName.toLowerCase(),e=n==="input"&&t.type;return e==="text"||e==="password"||n==="select"||n==="textarea"}function Pye(t){return Mye(t)?!1:Nye(t)||Oye(t)||t.hasAttribute("contenteditable")||$W(t)}function $ye(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var LR=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,e,i,r,o=!1,s){this._element=n,this._checker=e,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){let e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?is(n,{injector:this._injector}):setTimeout(n)}},$R=(()=>{class t{_checker=E(PR);_ngZone=E(Xe);_document=E(at);_injector=E(Vt);constructor(){E(Xi).load(Uf)}create(e,i=!1){return new LR(e,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var VW=new he("liveAnnouncerElement",{providedIn:"root",factory:BW});function BW(){return null}var zW=new he("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Vye=0,yv=(()=>{class t{_ngZone=E(Xe);_defaultOptions=E(zW,{optional:!0});_liveElement;_document=E(at);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=E(VW,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...i){let r=this._defaultOptions,o,s;return i.length===1&&typeof i[0]=="number"?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${Vye++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Nu=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Nu||{}),LW="cdk-high-contrast-black-on-white",PW="cdk-high-contrast-white-on-black",FR="cdk-high-contrast-active",QT=(()=>{class t{_platform=E(ln);_hasCheckedHighContrastMode;_document=E(at);_breakpointSubscription;constructor(){this._breakpointSubscription=E(gv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Nu.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Nu.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Nu.BLACK_ON_WHITE}return Nu.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(FR,LW,PW),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Nu.BLACK_ON_WHITE?e.add(FR,LW):i===Nu.WHITE_ON_BLACK&&e.add(FR,PW)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bv=(()=>{class t{constructor(){E(QT)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[YT]})}return t})();var VR={},wr=(()=>{class t{_appId=E(kp);getId(e){return this._appId!=="ng"&&(e+=this._appId),VR.hasOwnProperty(e)||(VR[e]=0),`${e}${VR[e]++}`}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Bye=200,ZT=class{_letterKeyStream=new Oe;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Oe;selectedItem=this._selectedItem;constructor(n,e){let i=typeof e?.debounceInterval=="number"?e.debounceInterval:Bye;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(ei(e=>this._pressedLetters.push(e)),dp(n),Sn(()=>this._pressedLetters.length>0),ot(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function Cr(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var JT=class{_items;_activeItemIndex=-1;_activeItem=Ca(null);_wrap=!1;_typeaheadSubscription=tn.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof rf?this._itemChangesSubscription=n.changes.subscribe(i=>this._itemsChanged(i.toArray())):gf(n)&&(this._effectRef=gO(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new Oe;change=new Oe;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new ZT(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){let e=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Cr(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),i=typeof n=="number"?n:e.indexOf(n),r=e[i];this._activeItem.set(r??null),this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let r=(this._activeItemIndex+n*i+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){let i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(n+=e,!i[n])return;this.setActiveItem(n)}}_getItemsArray(){return gf(this._items)?this._items():this._items instanceof rf?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let i=n.indexOf(e);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i))}}};var xv=class extends JT{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};var jW=" ";function HR(t,n,e){let i=tS(t,n);e=e.trim(),!i.some(r=>r.trim()===e)&&(i.push(e),t.setAttribute(n,i.join(jW)))}function nS(t,n,e){let i=tS(t,n);e=e.trim();let r=i.filter(o=>o!==e);r.length?t.setAttribute(n,r.join(jW)):t.removeAttribute(n)}function tS(t,n){return t.getAttribute(n)?.match(/\S+/g)??[]}var qW="cdk-describedby-message",eS="cdk-describedby-host",UR=0,XW=(()=>{class t{_platform=E(ln);_document=E(at);_messageRegistry=new Map;_messagesContainer=null;_id=`${UR++}`;constructor(){E(Xi).load(Uf),this._id=E(kp)+"-"+UR++}describe(e,i,r){if(!this._canBeDescribed(e,i))return;let o=GR(i,r);typeof i!="string"?(WW(i,this._id),this._messageRegistry.set(o,{messageElement:i,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(i,r),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,i,r){if(!i||!this._isElementNode(e))return;let o=GR(i,r);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),typeof i=="string"){let s=this._messageRegistry.get(o);s&&s.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${eS}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(eS);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){let r=this._document.createElement("div");WW(r,this._id),r.textContent=e,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(GR(e,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<i.length;o++)i[o].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){let i=tS(e,"aria-describedby").filter(r=>r.indexOf(qW)!=0);e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){let r=this._messageRegistry.get(i);HR(e,"aria-describedby",r.messageElement.id),e.setAttribute(eS,this._id),r.referenceCount++}_removeMessageReference(e,i){let r=this._messageRegistry.get(i);r.referenceCount--,nS(e,"aria-describedby",r.messageElement.id),e.removeAttribute(eS)}_isElementDescribedByMessage(e,i){let r=tS(e,"aria-describedby"),o=this._messageRegistry.get(i),s=o&&o.messageElement.id;return!!s&&r.indexOf(s)!=-1}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&typeof i=="object")return!0;let r=i==null?"":`${i}`.trim(),o=e.getAttribute("aria-label");return r?!o||o.trim()!==r:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function GR(t,n){return typeof t=="string"?`${n||""}/${t}`:t}function WW(t,n){t.id||(t.id=`${qW}-${n}-${UR++}`)}var Hs=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(Hs||{}),iS,qp;function rS(){if(qp==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return qp=!1,qp;if("scrollBehavior"in document.documentElement.style)qp=!0;else{let t=Element.prototype.scrollTo;t?qp=!/\{\s*\[native code\]\s*\}/.test(t.toString()):qp=!1}}return qp}function Wf(){if(typeof document!="object"||!document)return Hs.NORMAL;if(iS==null){let t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),iS=Hs.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,iS=t.scrollLeft===0?Hs.NEGATED:Hs.INVERTED),t.remove()}return iS}function WR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function oS(t){return t!=null&&`${t}`!="false"}function fi(t){return t==null?"":typeof t=="string"?t:`${t}px`}var Xr=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Xr||{}),jR=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Xr.HIDDEN;constructor(n,e,i,r=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},KW=Du({passive:!0,capture:!0}),qR=class{_events=new Map;addHandler(n,e,i,r){let o=this._events.get(e);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,KW)})}removeHandler(n,e,i){let r=this._events.get(n);if(!r)return;let o=r.get(e);o&&(o.delete(i),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,KW)))}_delegateEventHandler=n=>{let e=qr(n);e&&this._events.get(n.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(n))})}},vv={enterDuration:225,exitDuration:150},zye=800,YW=Du({passive:!0,capture:!0}),QW=["mousedown","touchstart"],ZW=["mouseup","mouseleave","touchend","touchcancel"],Gye=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return t})(),_v=class t{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new qR;constructor(n,e,i,r,o){this._target=n,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=Da(i)),o&&o.get(Xi).load(Gye)}fadeInRipple(n,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=re(re({},vv),i.animation);i.centered&&(n=r.left+r.width/2,e=r.top+r.height/2);let s=i.radius||Uye(n,e,r),a=n-r.left,l=e-r.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${l-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),p=d.transitionProperty,h=d.transitionDuration,m=p==="none"||h==="0s"||h==="0s, 0s"||r.width===0&&r.height===0,g=new jR(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",g.state=Xr.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let f=null;return!m&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let y=()=>{f&&(f.fallbackTimer=null),clearTimeout(x),this._finishRippleTransition(g)},b=()=>this._destroyRipple(g),x=setTimeout(b,c+100);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",b),f={onTransitionEnd:y,onTransitionCancel:b,fallbackTimer:x}}),this._activeRipples.set(g,f),(m||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(n){if(n.state===Xr.FADING_OUT||n.state===Xr.HIDDEN)return;let e=n.element,i=re(re({},vv),n.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=Xr.FADING_OUT,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){let e=Da(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,QW.forEach(i=>{t._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){n.type==="mousedown"?this._onMousedown(n):n.type==="touchstart"?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{ZW.forEach(e=>{this._triggerElement.addEventListener(e,this,YW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===Xr.FADING_IN?this._startFadeOutTransition(n):n.state===Xr.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){let e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=Xr.VISIBLE,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){let e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=Xr.HIDDEN,e!==null&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),n.element.remove()}_onMousedown(n){let e=dv(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+zye;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!pv(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=n.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{let e=n.state===Xr.VISIBLE||n.config.terminateOnPointerUp&&n.state===Xr.FADING_IN;!n.config.persistent&&e&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let n=this._triggerElement;n&&(QW.forEach(e=>t._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&(ZW.forEach(e=>n.removeEventListener(e,this,YW)),this._pointerUpEventsRegistered=!1))}};function Uye(t,n,e){let i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+r*r)}var wv=new he("mat-ripple-global-options"),Xp=(()=>{class t{_elementRef=E(nt);_animationMode=E(En,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=E(Xe),i=E(ln),r=E(wv,{optional:!0}),o=E(Vt);this._globalOptions=r||{},this._rippleRenderer=new _v(this,e,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:re(re(re({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,re(re({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,re(re({},this.rippleConfig),e))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&rt("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})();var Hye={capture:!0},Wye=["focus","mousedown","mouseenter","touchstart"],XR="mat-ripple-loader-uninitialized",KR="mat-ripple-loader-class-name",JW="mat-ripple-loader-centered",sS="mat-ripple-loader-disabled",ej=(()=>{class t{_document=E(at);_animationMode=E(En,{optional:!0});_globalRippleOptions=E(wv,{optional:!0});_platform=E(ln);_ngZone=E(Xe);_injector=E(Vt);_eventCleanups;_hosts=new Map;constructor(){let e=E(Oi).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Wye.map(i=>us(e,this._document,i,this._onInteraction,Hye)))}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(e,i){e.setAttribute(XR,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(KR))&&e.setAttribute(KR,i.className||""),i.centered&&e.setAttribute(JW,""),i.disabled&&e.setAttribute(sS,"")}setDisabled(e,i){let r=this._hosts.get(e);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):i?e.setAttribute(sS,""):e.removeAttribute(sS)}_onInteraction=e=>{let i=qr(e);if(i instanceof HTMLElement){let r=i.closest(`[${XR}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(KR)),e.append(i);let r=this._animationMode==="NoopAnimations",o=this._globalRippleOptions,s=r?0:o?.animation?.enterDuration??vv.enterDuration,a=r?0:o?.animation?.exitDuration??vv.exitDuration,l={rippleDisabled:r||o?.disabled||e.hasAttribute(sS),rippleConfig:{centered:e.hasAttribute(JW),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:a}}},c=new _v(l,this._ngZone,i,this._platform,this._injector),u=!l.rippleDisabled;u&&c.setupTriggerEvents(e),this._hosts.set(e,{target:l,renderer:c,hasSetUpEvents:u}),e.removeAttribute(XR)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return t})();var jye=["mat-icon-button",""],qye=["*"];var Xye=new he("MAT_BUTTON_CONFIG");var Kye=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],YR=(()=>{class t{_elementRef=E(nt);_ngZone=E(Xe);_animationMode=E(En,{optional:!0});_focusMonitor=E(Nl);_rippleLoader=E(ej);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){E(Xi).load(Mu);let e=E(Xye,{optional:!0}),i=this._elementRef.nativeElement,r=i.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"});for(let{attribute:o,mdcClasses:s}of Kye)i.hasAttribute(o)&&r.add(...s)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Rt],disabled:[2,"disabled","disabled",Rt],ariaDisabled:[2,"aria-disabled","ariaDisabled",Rt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Rt]}})}return t})();var Kp=(()=>{class t extends YR{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&($e("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Hr(r.color?"mat-"+r.color:""),rt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Mn],attrs:jye,ngContentSelectors:qye,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Kn(),Ee(0,"span",0),bn(1),Ee(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var Yye=new he("cdk-dir-doc",{providedIn:"root",factory:Qye});function Qye(){return E(at)}var Zye=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function tj(t){let n=t?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?Zye.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var Kr=(()=>{class t{value="ltr";change=new ke;constructor(){let e=E(Yye,{optional:!0});if(e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=tj(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ou=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({})}return t})();var jt=(()=>{class t{constructor(){E(QT)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[Ou,Ou]})}return t})();var jf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt,jt]})}return t})();var Jye=["mat-button",""],ebe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],tbe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var ds=(()=>{class t extends YR{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275cmp=Ne({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&($e("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Hr(r.color?"mat-"+r.color:""),rt("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Mn],attrs:Jye,ngContentSelectors:tbe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Kn(ebe),Ee(0,"span",0),bn(1),M(2,"span",1),bn(3,1),O(),bn(4,2),Ee(5,"span",2)(6,"span",3)),i&2&&rt("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var fo=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt,jf,jt]})}return t})();var nbe=["*"];var ibe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],rbe=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],obe=new he("MAT_CARD_CONFIG"),Xf=(()=>{class t{appearance;constructor(){let e=E(obe,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&rt("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:nbe,decls:1,vars:0,template:function(i,r){i&1&&(Kn(),bn(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return t})(),Kf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var Yf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})(),Qf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return t})(),aS=(()=>{class t{align="start";static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(i,r){i&2&&rt("mat-mdc-card-actions-align-end",r.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return t})(),Zf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:rbe,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){i&1&&(Kn(ibe),bn(0),M(1,"div",0),bn(2,1),O(),bn(3,2))},encapsulation:2,changeDetection:0})}return t})();var Jf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt,jt]})}return t})();var lS;function sbe(){if(lS===void 0&&(lS=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(lS=t.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return lS}function Cv(t){return sbe()?.createHTML(t)||t}function nj(t){return Error(`Unable to find icon with the name "${t}"`)}function abe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function ij(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function rj(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var Ml=class{url;svgText;options;svgElement;constructor(n,e,i){this.url=n,this.svgText=e,this.options=i}},sj=(()=>{class t{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new Ml(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){let s=this._sanitizer.sanitize(Gr.HTML,r);if(!s)throw rj(r);let a=Cv(s);return this._addSvgIconConfig(e,i,new Ml("",a,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Ml(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){let o=this._sanitizer.sanitize(Gr.HTML,i);if(!o)throw rj(i);let s=Cv(o);return this._addSvgIconSetConfig(e,new Ml("",s,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(Gr.RESOURCE_URL,e);if(!i)throw ij(e);let r=this._cachedIconsByUrl.get(i);return r?Qe(cS(r)):this._loadSvgIconFromConfig(new Ml(e,null)).pipe(ei(o=>this._cachedIconsByUrl.set(i,o)),ot(o=>cS(o)))}getNamedSvgIcon(e,i=""){let r=oj(i,e),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(e,s):pu(nj(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Qe(cS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(ot(i=>cS(i)))}_getSvgFromIconSetConfigs(e,i){let r=this._extractIconWithNameFromAnySet(e,i);if(r)return Qe(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Jo(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(Gr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Qe(null)})));return tx(o).pipe(ot(()=>{let s=this._extractIconWithNameFromAnySet(e,i);if(!s)throw nj(e);return s}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(ei(i=>e.svgText=i),ot(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Qe(null):this._fetchIcon(e).pipe(ei(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){let o=e.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(Cv("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let i=this._svgElementFromString(Cv("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw abe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize(Gr.RESOURCE_URL,i);if(!s)throw ij(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(ot(c=>Cv(c)),pl(()=>this._inProgressUrlFetches.delete(s)),KA());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(oj(e,i),r),this}_addSvgIconSetConfig(e,i){let r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,e);if(o)return lbe(o)?new Ml(o.url,null,o.options):new Ml(o,null)}}static \u0275fac=function(i){return new(i||t)(qe(Sf,8),qe(NO),qe(at,8),qe($r))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cS(t){return t.cloneNode(!0)}function oj(t,n){return t+":"+n}function lbe(t){return!!(t.url&&t.options)}var cbe=["*"],ube=new he("MAT_ICON_DEFAULT_OPTIONS"),dbe=new he("mat-icon-location",{providedIn:"root",factory:pbe});function pbe(){let t=E(at),n=t?t.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}var aj=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],hbe=aj.map(t=>`[${t}]`).join(", "),mbe=/^url\(['"]?#(.*?)['"]?\)$/,Aa=(()=>{class t{_elementRef=E(nt);_iconRegistry=E(sj);_location=E(dbe);_errorHandler=E($r);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=tn.EMPTY;constructor(){let e=E(new xu("aria-hidden"),{optional:!0}),i=E(ube,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=e.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(hbe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)aj.forEach(s=>{let a=i[o],l=a.getAttribute(s),c=l?l.match(mbe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Xn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&($e("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Hr(r.color?"mat-"+r.color:""),rt("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Rt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:cbe,decls:1,vars:0,template:function(i,r){i&1&&(Kn(),bn(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return t})(),Na=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt,jt]})}return t})();var uS=class t{constructor(n){this.router=n}startGame(){this.router.navigate(["/game"])}watchAiLearn(){this.router.navigate(["/ai-learning"])}goToSettings(){this.router.navigate(["/settings"])}static \u0275fac=function(e){return new(e||t)(Ae(as))};static \u0275cmp=Ne({type:t,selectors:[["app-menu"]],decls:24,vars:0,consts:[[1,"menu-container"],[1,"menu-card"],[1,"game-description"],["mat-raised-button","","color","primary",1,"primary-btn",3,"click"],["mat-raised-button","","color","accent",1,"secondary-btn",3,"click"],["mat-raised-button","",1,"settings-btn",3,"click"]],template:function(e,i){e&1&&(M(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),X(4,"Sudoku Game"),O(),M(5,"mat-card-subtitle"),X(6,"Start playing and challenge yourself"),O()(),M(7,"mat-card-content")(8,"div",2)(9,"p"),X(10,"Get ready for a challenging Sudoku puzzle! Each game will present you with a randomly generated board."),O()()(),M(11,"mat-card-actions")(12,"button",3),_e("click",function(){return i.startGame()}),M(13,"mat-icon"),X(14,"play_arrow"),O(),X(15," New Game "),O(),M(16,"button",4),_e("click",function(){return i.watchAiLearn()}),M(17,"mat-icon"),X(18,"smart_toy"),O(),X(19," Watch AI Learn "),O(),M(20,"button",5),_e("click",function(){return i.goToSettings()}),M(21,"mat-icon"),X(22,"settings"),O(),X(23," Settings "),O()()()())},dependencies:[mi,fo,ds,Jf,Xf,aS,Yf,Zf,Qf,Kf,Na,Aa],styles:['.menu-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;max-width:500px;padding:1rem}.menu-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:2.5rem;background:#fff;border-radius:20px;box-shadow:0 12px 40px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);transition:all .3s ease}body.dark-theme[_ngcontent-%COMP%]   .menu-card[_ngcontent-%COMP%]{background:#2d2d2d;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 40px #0006}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;justify-content:center;text-align:center}mat-card-title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin-bottom:.75rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#6b7280;font-weight:400;line-height:1.4}body.dark-theme[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#9ca3af}.difficulty-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:2.5rem;gap:1.25rem}.difficulty-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#374151;text-align:center}body.dark-theme[_ngcontent-%COMP%]   .difficulty-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#f3f4f6}.difficulty-select[_ngcontent-%COMP%]{font-size:1.1rem;background:#f9fafb;border-radius:12px;padding:.75rem 1rem;border:2px solid #e5e7eb;transition:all .3s ease}.difficulty-select[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}body.dark-theme[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]{background:#374151;color:#f3f4f6;border-color:#4b5563}body.dark-theme[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]:hover{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa1a}mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem;padding:1.5rem 0 .5rem}button[_ngcontent-%COMP%]{width:100%;padding:1.25rem 1.5rem;font-size:1.1rem;font-weight:600;border-radius:14px;transition:all .3s ease;text-transform:none;letter-spacing:.5px;display:flex;align-items:center;justify-content:center;gap:.75rem;min-height:56px;position:relative;overflow:hidden}button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .6s}button[_ngcontent-%COMP%]:hover:before{left:100%}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.4rem;width:1.4rem;height:1.4rem}.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff;transform:translateY(0);box-shadow:0 4px 15px #667eea4d}.primary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #667eea66}.secondary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;border:none;box-shadow:0 4px 15px #f5576c4d}.secondary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #f5576c66}.settings-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#4b5563;border:2px solid #e5e7eb}.settings-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;transform:translateY(-3px);box-shadow:0 8px 15px #0000001a}body.dark-theme[_ngcontent-%COMP%]   .primary-btn[_ngcontent-%COMP%]{box-shadow:0 4px 15px #667eea66}body.dark-theme[_ngcontent-%COMP%]   .secondary-btn[_ngcontent-%COMP%]{box-shadow:0 4px 15px #f5576c66}body.dark-theme[_ngcontent-%COMP%]   .settings-btn[_ngcontent-%COMP%]{background:#4b5563;color:#f3f4f6;border-color:#6b7280}body.dark-theme[_ngcontent-%COMP%]   .settings-btn[_ngcontent-%COMP%]:hover{background:#6b7280;box-shadow:0 8px 15px #0000004d}.game-description[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.game-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#6b7280;line-height:1.6;margin:0}body.dark-theme[_ngcontent-%COMP%]   .game-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af}@media (min-width: 768px){mat-card-actions[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;justify-content:space-between;gap:1rem}button[_ngcontent-%COMP%]{width:auto;flex:1;min-width:160px;padding:1.25rem 1rem}}@media (max-width: 480px){.menu-container[_ngcontent-%COMP%]{padding:.5rem}.menu-card[_ngcontent-%COMP%]{padding:1.75rem}mat-card-title[_ngcontent-%COMP%]{font-size:2rem}button[_ngcontent-%COMP%]{padding:1rem;font-size:1rem;min-height:50px}}']})};var fbe=20,tg=(()=>{class t{_ngZone=E(Xe);_platform=E(ln);_renderer=E(Oi).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Oe;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=fbe){return this._platform.isBrowser?new Lt(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=e>0?this._scrolled.pipe(kw(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Qe()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Sn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_scrollableContainsElement(e,i){let r=Da(i),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ZR=(()=>{class t{elementRef=E(nt);scrollDispatcher=E(tg);ngZone=E(Xe);dir=E(Kr,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new Oe;_renderer=E(hi);_cleanupScroll;_elementScrolled=new Oe;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&Wf()!=Hs.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),Wf()==Hs.INVERTED?e.left=e.right:Wf()==Hs.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;rS()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",r="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?r:i:e=="end"&&(e=s?i:r),s&&Wf()==Hs.INVERTED?e==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&Wf()==Hs.NEGATED?e==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),gbe=20,ng=(()=>{class t{_platform=E(ln);_listeners;_viewportSize;_change=new Oe;_document=E(at,{optional:!0});constructor(){let e=E(Xe),i=E(Oi).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),s=-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(e=gbe){return e>0?this._change.pipe(kw(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Yp=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({})}return t})(),JR=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[Ou,Yp,Ou,Yp]})}return t})();var ig=class{_attachedHost;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},go=class extends ig{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(n,e,i,r,o){super(),this.component=n,this.viewContainerRef=e,this.injector=i,this.projectableNodes=o}},Ma=class extends ig{templateRef;viewContainerRef;context;injector;constructor(n,e,i,r){super(),this.templateRef=n,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},dS=class extends ig{element;constructor(n){super(),this.element=n instanceof nt?n.nativeElement:n}},Ol=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof go)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Ma)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof dS)return this._attachedPortal=n,this.attachDomPortal(n)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Qp=class extends Ol{outletElement;_appRef;_defaultInjector;_document;constructor(n,e,i,r,o){super(),this.outletElement=n,this._appRef=i,this._defaultInjector=r,this._document=o}attachComponentPortal(n){let e;if(n.viewContainerRef){let i=n.injector||n.viewContainerRef.injector,r=i.get(bl,null,{optional:!0})||void 0;e=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let i=this._appRef,r=n.injector||this._defaultInjector||Vt.NULL,o=r.get(bi,i.injector);e=BC(n.component,{elementInjector:r,environmentInjector:o,projectableNodes:n.projectableNodes||void 0}),i.attachView(e.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=n,e}attachTemplatePortal(n){let e=n.viewContainerRef,i=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=n,i}attachDomPortal=n=>{let e=n.element;e.parentNode;let i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=n,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var Rl=(()=>{class t extends Ol{_moduleRef=E(bl,{optional:!0});_document=E(at);_viewContainerRef=E(Wi);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new ke;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,r=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let r=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Mn]})}return t})();var Oa=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({})}return t})();var lj=rS(),pS=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,e){this._viewportRuler=n,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=fi(-this._previousScrollPosition.left),n.style.top=fi(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,i=n.style,r=e.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),lj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),lj&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var hS=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,e,i,r){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=i,this._config=r}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(Sn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},Sv=class{enable(){}disable(){}attach(){}};function eF(t,n){return n.some(e=>{let i=t.bottom<e.top,r=t.top>e.bottom,o=t.right<e.left,s=t.left>e.right;return i||r||o||s})}function cj(t,n){return n.some(e=>{let i=t.top<e.top,r=t.bottom>e.bottom,o=t.left<e.left,s=t.right>e.right;return i||r||o||s})}var mS=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,e,i,r){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=i,this._config=r}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();eF(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},fj=(()=>{class t{_scrollDispatcher=E(tg);_viewportRuler=E(ng);_ngZone=E(Xe);_document=E(at);constructor(){}noop=()=>new Sv;close=e=>new hS(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new pS(this._viewportRuler,this._document);reposition=e=>new mS(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fl=class{positionStrategy;scrollStrategy=new Sv;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(n){if(n){let e=Object.keys(n);for(let i of e)n[i]!==void 0&&(this[i]=n[i])}}};var fS=class{connectionPair;scrollableViewProperties;constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var gj=(()=>{class t{_attachedOverlays=[];_document=E(at);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),yj=(()=>{class t extends gj{_ngZone=E(Xe);_renderer=E(Oi).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bj=(()=>{class t extends gj{_platform=E(ln);_ngZone=E(Xe);_renderer=E(Oi).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,r={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[us(this._renderer,i,"pointerdown",this._pointerDownListener,r),us(this._renderer,i,"click",this._clickListener,r),us(this._renderer,i,"auxclick",this._clickListener,r),us(this._renderer,i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=qr(e)};_clickListener=e=>{let i=qr(e),r=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(uj(a.overlayElement,i)||uj(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function uj(t,n){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=n;for(;i;){if(i===t)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var xj=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),bS=(()=>{class t{_platform=E(ln);_containerElement;_document=E(at);_styleLoader=E(Xi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||WR()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(e),WR()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(xj)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),tF=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(n,e,i,r){this._renderer=e,this._ngZone=i,this.element=n.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let n=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(n,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),n.style.pointerEvents="none",n.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Jp=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Oe;_attachments=new Oe;_detachments=new Oe;_positionStrategy;_scrollStrategy;_locationChanges=tn.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new Oe;_outsidePointerEvents=new Oe;_renders=new Oe;_afterRenderRef;_afterNextRenderRef;constructor(n,e,i,r,o,s,a,l,c,u=!1,d,p){this._portalOutlet=n,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=p,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=os(()=>xf(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=is(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=re(re({},this._config),n),this._updateElementSize()}setDirection(n){this._config=At(re({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=fi(this._config.width),n.height=fi(this._config.height),n.minWidth=fi(this._config.minWidth),n.minHeight=fi(this._config.minHeight),n.maxWidth=fi(this._config.maxWidth),n.maxHeight=fi(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new tF(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(n))}):this._backdropRef.element.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(n,e,i){let r=Hf(e||[]).filter(o=>!!o);r.length&&(i?n.classList.add(...r):n.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let n=this._renders.pipe(Bn(dl(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n?.disable(),n?.detach?.()}},dj="cdk-overlay-connected-position-bounding-box",bbe=/([A-Za-z%]+)$/,gS=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Oe;_resizeSubscription=tn.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(dj),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,i)){o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(let c of o){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Zp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(dj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,i){let r;if(i.originX=="center")r=n.left+n.width/2;else{let s=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;r=i.originX=="start"?s:a}e.left<0&&(r-=e.left);let o;return i.originY=="center"?o=n.top+n.height/2:o=i.originY=="top"?n.top:n.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(n,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:n.x+r,y:n.y+o}}_getOverlayFit(n,e,i,r){let o=hj(e),{x:s,y:a}=n,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let u=0-s,d=s+o.width-i.width,p=0-a,h=a+o.height-i.height,m=this._subtractOverflows(o.width,u,d),g=this._subtractOverflows(o.height,p,h),f=m*g;return{visibleArea:f,isCompletelyWithinViewport:o.width*o.height===f,fitsInViewportVertically:g===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(n,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,o=i.right-e.x,s=pj(this._overlayRef.getConfig().minHeight),a=pj(this._overlayRef.getConfig().minWidth),l=n.fitsInViewportVertically||s!=null&&s<=r,c=n.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(n,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let r=hj(e),o=this._viewportRect,s=Math.max(n.x+r.width-o.width,0),a=Math.max(n.y+r.height-o.height,0),l=Math.max(o.top-i.top-n.y,0),c=Math.max(o.left-i.left-n.x,0),u=0,d=0;return r.width<=o.width?u=c||-s:u=n.x<this._viewportMargin?o.left-i.left-n.x:0,r.height<=o.height?d=l||-a:d=n.y<this._viewportMargin?o.top-i.top-n.y:0,this._previousPushAmount={x:u,y:d},{x:n.x+u,y:n.y+d}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!xbe(this._lastScrollVisibility,i)){let r=new fS(n,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=n.overlayY;n.overlayX==="center"?i="center":this._isRtl()?i=n.overlayX==="start"?"right":"left":i=n.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(n,e){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(e.overlayY==="top")s=n.y,o=i.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-n.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let h=Math.min(i.bottom-n.y+i.top,n.y),m=this._lastBoundingBoxSize.height;o=h*2,s=n.y-h,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-m/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,c=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,u,d,p;if(c)p=i.width-n.x+this._viewportMargin*2,u=n.x-this._viewportMargin;else if(l)d=n.x,u=i.right-n.x;else{let h=Math.min(i.right-n.x+i.left,n.x),m=this._lastBoundingBoxSize.width;u=h*2,d=n.x-h,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.x-m/2)}return{top:s,left:d,bottom:a,right:p,width:u,height:o}}_setBoundingBoxStyles(n,e){let i=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=fi(i.height),r.top=fi(i.top),r.bottom=fi(i.bottom),r.width=fi(i.width),r.left=fi(i.left),r.right=fi(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=fi(o)),s&&(r.maxWidth=fi(s))}this._lastBoundingBoxSize=i,Zp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Zp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Zp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();Zp(i,this._getExactOverlayY(e,n,u)),Zp(i,this._getExactOverlayX(e,n,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=fi(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=fi(s.maxWidth):o&&(i.maxWidth="")),Zp(this._pane.style,i)}_getExactOverlayY(n,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),n.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=fi(o.y);return r}_getExactOverlayX(n,e,i){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=n.overlayX==="end"?"left":"right":s=n.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=fi(o.x);return r}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:cj(n,i),isOriginOutsideView:eF(n,i),isOverlayClipped:cj(e,i),isOverlayOutsideView:eF(e,i)}}_subtractOverflows(n,...e){return e.reduce((i,r)=>i-Math.max(r,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&Hf(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof nt)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+e,height:i,width:e}}};function Zp(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function pj(t){if(typeof t!="number"&&t!=null){let[n,e]=t.split(bbe);return!e||e==="px"?parseFloat(n):null}return t||null}function hj(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function xbe(t,n){return t===n?!0:t.isOriginClipped===n.isOriginClipped&&t.isOriginOutsideView===n.isOriginOutsideView&&t.isOverlayClipped===n.isOverlayClipped&&t.isOverlayOutsideView===n.isOverlayOutsideView}var mj="cdk-global-overlay-wrapper",yS=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(mj),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",m="",g="";l?g="flex-start":u==="center"?(g="center",p?m=d:h=d):p?u==="left"||u==="end"?(g="flex-end",h=d):(u==="right"||u==="start")&&(g="flex-start",m=d):u==="left"||u==="start"?(g="flex-start",h=d):(u==="right"||u==="end")&&(g="flex-end",m=d),n.position=this._cssPosition,n.marginLeft=l?"0":h,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":m,e.justifyContent=g,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(mj),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},vj=(()=>{class t{_viewportRuler=E(ng);_document=E(at);_platform=E(ln);_overlayContainer=E(bS);constructor(){}global(){return new yS}flexibleConnectedTo(e){return new gS(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vi=(()=>{class t{scrollStrategies=E(fj);_overlayContainer=E(bS);_positionBuilder=E(vj);_keyboardDispatcher=E(yj);_injector=E(Vt);_ngZone=E(Xe);_document=E(at);_directionality=E(Kr);_location=E(Cu);_outsideClickDispatcher=E(bj);_animationsModuleType=E(En,{optional:!0});_idGenerator=E(wr);_renderer=E(Oi).createRenderer(null,null);_appRef;_styleLoader=E(Xi);constructor(){}create(e){this._styleLoader.load(xj);let i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new Fl(e);return s.direction=s.direction||this._directionality.value,new Jp(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(bi),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Br)),new Qp(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vbe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],_j=new he("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=E(vi);return()=>t.scrollStrategies.reposition()}}),rg=(()=>{class t{elementRef=E(nt);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),xS=(()=>{class t{_overlay=E(vi);_dir=E(Kr,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=tn.EMPTY;_attachSubscription=tn.EMPTY;_detachSubscription=tn.EMPTY;_positionSubscription=tn.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=E(_j);_disposeOnNavigation=!1;_ngZone=E(Xe);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new ke;positionChange=new ke;attach=new ke;detach=new ke;overlayKeydown=new ke;overlayOutsideClick=new ke;constructor(){let e=E(Vr),i=E(Wi);this._templatePortal=new Ma(e,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=vbe);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!Cr(i)&&(i.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let r=this._getOriginElement(),o=qr(i);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Fl({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){let i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof rg?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof rg?this.origin.elementRef.nativeElement:this.origin instanceof nt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(YA(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Rt],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Rt],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Rt],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Rt],push:[2,"cdkConnectedOverlayPush","push",Rt],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Rt]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Jt]})}return t})();function _be(t){return()=>t.scrollStrategies.reposition()}var wbe={provide:_j,deps:[vi],useFactory:_be},Ws=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({providers:[vi,wbe],imports:[Ou,Oa,JR,JR]})}return t})();var Cbe=["tooltip"],nF=20;var iF=new he("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let t=E(vi);return()=>t.scrollStrategies.reposition({scrollThrottle:nF})}});function Tj(t){return()=>t.scrollStrategies.reposition({scrollThrottle:nF})}var Sj={provide:iF,deps:[vi],useFactory:Tj};function kj(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var Ej=new he("mat-tooltip-default-options",{providedIn:"root",factory:kj});var wj="tooltip-panel",Cj=Du({passive:!0}),Tbe=8,Sbe=8,kbe=24,Ebe=200,rF=(()=>{class t{_elementRef=E(nt);_ngZone=E(Xe);_platform=E(ln);_ariaDescriber=E(XW);_focusMonitor=E(Nl);_dir=E(Kr);_injector=E(Vt);_viewContainerRef=E(Wi);_defaultOptions=E(Ej,{optional:!0});_overlayRef;_tooltipInstance;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=Ij;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=oS(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let i=oS(e);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Au(e)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Au(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(e){let i=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new Oe;_isDestroyed=!1;constructor(){let e=this._defaultOptions;e&&(this._showDelay=e.showDelay,this._hideDelay=e.hideDelay,e.position&&(this.position=e.position),e.positionAtOrigin&&(this.positionAtOrigin=e.positionAtOrigin),e.touchGestures&&(this.touchGestures=e.touchGestures),e.tooltipClass&&(this.tooltipClass=e.tooltipClass)),this._viewportMargin=Tbe}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Bn(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{e.removeEventListener(i,r,Cj)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(i);this._detach(),this._portal=this._portal||new go(this._tooltipComponent,this._viewContainerRef);let o=this._tooltipInstance=r.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(Bn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(e)}hide(e=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof nt)return this._overlayRef;this._detach()}let i=this._injector.get(tg).getAncestorScrollContainers(this._elementRef),r=this._injector.get(vi),o=r.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return o.positionChanges.pipe(Bn(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=r.create({direction:this._dir,positionStrategy:o,panelClass:`${this._cssClassPrefix}-${wj}`,scrollStrategy:this._injector.get(iF)()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Bn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Bn(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Bn(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!Cr(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(Bn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let i=e.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();i.withPositions([this._addOffset(re(re({},r.main),o.main)),this._addOffset(re(re({},r.fallback),o.fallback))])}_addOffset(e){let i=Sbe,r=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-i:e.originY==="bottom"?e.offsetY=i:e.originX==="start"?e.offsetX=r?-i:i:e.originX==="end"&&(e.offsetX=r?i:-i),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"||i=="below"?r={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&e||i=="right"&&!e?r={originX:"start",originY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(r={originX:"end",originY:"center"});let{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"?r={overlayX:"center",overlayY:"bottom"}:i=="below"?r={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&e||i=="right"&&!e?r={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(r={overlayX:"start",overlayY:"center"});let{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),is(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){let{overlayY:i,originX:r,originY:o}=e,s;if(i==="center"?this._dir&&this._dir.value==="rtl"?s=r==="end"?"left":"right":s=r==="start"?"left":"right":s=i==="bottom"&&o==="top"?"above":"below",s!==this._currentPosition){let a=this._overlayRef;if(a){let l=`${this._cssClassPrefix}-${wj}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let i;e.x!==void 0&&e.y!==void 0&&(i=e),this.show(void 0,i)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let i=e.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let o=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions?.touchLongPressShowDelay??o)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{let r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,Cj)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let i=this._injector.get(at).elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let i=this._elementRef.nativeElement,r=i.style;(e==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(e==="on"||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._isDestroyed||is({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,r){i&2&&rt("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return t})(),Ij=(()=>{class t{_changeDetectorRef=E(mn);_elementRef=E(nt);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled;_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new Oe;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){let e=E(En,{optional:!0});this._animationsDisabled=e==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>kbe&&e.width>=Ebe}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let i=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(i.classList.remove(e?o:r),i.classList.add(e?r:o),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let s=getComputedStyle(i);(s.getPropertyValue("animation-duration")==="0s"||s.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-tooltip-component"]],viewQuery:function(i,r){if(i&1&&an(Cbe,7),i&2){let o;Gt(o=Ut())&&(r._tooltip=o.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,r){i&1&&_e("mouseleave",function(s){return r._handleMouseLeave(s)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,r){if(i&1){let o=qt();M(0,"div",1,0),_e("animationend",function(a){return Le(o),Pe(r._handleAnimationEnd(a))}),M(2,"div",2),X(3),O()()}i&2&&(rt("mdc-tooltip--multiline",r._isMultiline),J("ngClass",r.tooltipClass),V(3),xt(r.message))},dependencies:[Np],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return t})(),oF=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({providers:[Sj],imports:[bv,Ws,jt,jt,Yp]})}return t})();var Dj={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function Dbe(t,n){if(t&1){let e=qt();M(0,"div",1)(1,"button",2),_e("click",function(){Le(e);let r=ee();return Pe(r.action())}),X(2),O()()}if(t&2){let e=ee();V(2),xn(" ",e.data.action," ")}}var Abe=["label"];function Nbe(t,n){}var Mbe=Math.pow(2,31)-1,kv=class{_overlayRef;instance;containerInstance;_afterDismissed=new Oe;_afterOpened=new Oe;_onAction=new Oe;_durationTimeoutId;_dismissedByAction=!1;constructor(n,e){this._overlayRef=e,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,Mbe))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Aj=new he("MatSnackBarData"),og=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},Obe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),Rbe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),Fbe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),Nj=(()=>{class t{snackBarRef=E(kv);data=E(Aj);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,r){i&1&&(M(0,"div",0),X(1),O(),be(2,Dbe,3,1,"div",1)),i&2&&(V(),xn(" ",r.data.message,`
`),V(),Li(r.hasAction?2:-1))},dependencies:[ds,Obe,Rbe,Fbe],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),sF="_mat-snack-bar-enter",aF="_mat-snack-bar-exit",Lbe=(()=>{class t extends Ol{_ngZone=E(Xe);_elementRef=E(nt);_changeDetectorRef=E(mn);_platform=E(ln);_rendersRef;_animationsDisabled=E(En,{optional:!0})==="NoopAnimations";snackBarConfig=E(og);_document=E(at);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new Oe;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new Oe;_onExit=new Oe;_onEnter=new Oe;_animationState="void";_live;_label;_role;_liveElementId=E(wr).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert")),this._rendersRef=xf(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}attachDomPortal=e=>{this._assertNotAttached();let i=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),i};onAnimationEnd(e){e===aF?this._completeExit():e===sF&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(Xn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(sF)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(sF)},200)))}exit(){return this._destroyed?Qe(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(Xn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(aF)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(aF),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(s=>e.classList.add(s)):e.classList.add(i)),this._exposeToModals();let r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){let e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");this._trackedModals.add(o),s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let i=e.getAttribute("aria-owns");if(i){let r=i.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,i=e.querySelector("[aria-hidden]"),r=e.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,r){if(i&1&&(an(Rl,7),an(Abe,7)),i&2){let o;Gt(o=Ut())&&(r._portalOutlet=o.first),Gt(o=Ut())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(i,r){i&1&&_e("animationend",function(s){return r.onAnimationEnd(s.animationName)})("animationcancel",function(s){return r.onAnimationEnd(s.animationName)}),i&2&&rt("mat-snack-bar-container-enter",r._animationState==="visible")("mat-snack-bar-container-exit",r._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[Mn],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(M(0,"div",1)(1,"div",2,0)(3,"div",3),be(4,Nbe,0,0,"ng-template",4),O(),Ee(5,"div"),O()()),i&2&&(V(5),$e("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[Rl],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function Pbe(){return new og}var $be=new he("mat-snack-bar-default-options",{providedIn:"root",factory:Pbe}),Ev=(()=>{class t{_overlay=E(vi);_live=E(yv);_injector=E(Vt);_breakpointObserver=E(gv);_parentSnackBar=E(t,{optional:!0,skipSelf:!0});_defaultConfig=E($be);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Nj;snackBarContainerComponent=Lbe;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){let o=re(re({},this._defaultConfig),r);return o.data={message:e,action:i},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){let r=i&&i.viewContainerRef&&i.viewContainerRef.injector,o=Vt.create({parent:r||this._injector,providers:[{provide:og,useValue:i}]}),s=new go(this.snackBarContainerComponent,i.viewContainerRef,o),a=e.attach(s);return a.instance.snackBarConfig=i,a.instance}_attach(e,i){let r=re(re(re({},new og),this._defaultConfig),i),o=this._createOverlay(r),s=this._attachSnackBarContainer(o,r),a=new kv(s,o);if(e instanceof Vr){let l=new Ma(e,null,{$implicit:r.data,snackBarRef:a});a.instance=s.attachTemplatePortal(l)}else{let l=this._createInjector(r,a),c=new go(e,void 0,l),u=s.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe(Dj.HandsetPortrait).pipe(Bn(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let i=new Fl;i.direction=e.direction;let r=this._overlay.position().global(),o=e.direction==="rtl",s=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!o||e.horizontalPosition==="end"&&o,a=!s&&e.horizontalPosition!=="center";return s?r.left("0"):a?r.right("0"):r.centerHorizontally(),e.verticalPosition==="top"?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){let r=e&&e.viewContainerRef&&e.viewContainerRef.injector;return Vt.create({parent:r||this._injector,providers:[{provide:kv,useValue:i},{provide:Aj,useValue:e.data}]})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mj=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({providers:[Ev],imports:[Ws,Oa,fo,jt,Nj,jt]})}return t})();function Vbe(t,n){}var Ru=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var cF=(()=>{class t extends Ol{_elementRef=E(nt);_focusTrapFactory=E($R);_config;_interactivityChecker=E(PR);_ngZone=E(Xe);_overlayRef=E(Jp);_focusMonitor=E(Nl);_renderer=E(hi);_changeDetectorRef=E(mn);_injector=E(Vt);_platform=E(ln);_document=E(at,{optional:!0});_portalOutlet;_focusTrapped=new Oe;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=E(Ru,{optional:!0})||new Ru,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),s(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",r),s=this._renderer.listen(e,"mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(e){this._isDestroyed||is(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=hv(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(e)}_containsFocus(){let e=this._elementRef.nativeElement,i=hv();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=hv()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&an(Rl,7),i&2){let o;Gt(o=Ut())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&$e("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Mn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&be(0,Vbe,0,0,"ng-template",0)},dependencies:[Rl],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),Iv=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new Oe;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,e){this.overlayRef=n,this.config=e,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Cr(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(n,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(n),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},Bbe=new he("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=E(vi);return()=>t.scrollStrategies.block()}}),zbe=new he("DialogData"),Gbe=new he("DefaultDialogConfig");var uF=(()=>{class t{_overlay=E(vi);_injector=E(Vt);_defaultOptions=E(Gbe,{optional:!0});_parentDialog=E(t,{optional:!0,skipSelf:!0});_overlayContainer=E(bS);_idGenerator=E(wr);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Oe;_afterOpenedAtThisLevel=new Oe;_ariaHiddenElements=new Map;_scrollStrategy=E(Bbe);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=ha(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ro(void 0)));constructor(){}open(e,i){let r=this._defaultOptions||new Ru;i=re(re({},r),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new Iv(s,i),l=this._attachContainer(s,a,i);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(Xn(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(e,a,l,i),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){lF(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){lF(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),lF(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new Fl({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){let o=r.injector||r.viewContainerRef?.injector,s=[{provide:Ru,useValue:r},{provide:Iv,useValue:i},{provide:Jp,useValue:e}],a;r.container?typeof r.container=="function"?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=cF;let l=new go(a,r.viewContainerRef,Vt.create({parent:o||this._injector,providers:s}));return e.attach(l).instance}_attachDialogContent(e,i,r,o){if(e instanceof Vr){let s=this._createInjector(o,i,r,void 0),a={$implicit:o.data,dialogRef:i};o.templateContext&&(a=re(re({},a),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),r.attachTemplatePortal(new Ma(e,null,a,s))}else{let s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new go(e,o.viewContainerRef,s));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,o){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:zbe,useValue:e.data},{provide:Iv,useValue:i}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!s||!s.get(Kr,null,{optional:!0}))&&a.push({provide:Kr,useValue:{value:e.direction,change:Qe()}}),Vt.create({parent:s||o,providers:a})}_removeOpenDialog(e,i){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let o=i[r];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lF(t,n){let e=t.length;for(;e--;)n(t[e])}var Rj=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({providers:[uF],imports:[Ws,Oa,bv,Oa]})}return t})();function Ube(t,n){}var Av=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},dF="mdc-dialog--open",Fj="mdc-dialog--opening",Lj="mdc-dialog--closing",Hbe=150,Wbe=75,Vj=(()=>{class t extends cF{_animationMode=E(En,{optional:!0});_animationStateChanged=new ke;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?$j(this._config.enterAnimationDuration)??Hbe:0;_exitAnimationDuration=this._animationsEnabled?$j(this._config.exitAnimationDuration)??Wbe:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Pj,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Fj,dF)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(dF),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(dF),this._animationsEnabled?(this._hostElement.style.setProperty(Pj,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Lj)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Fj,Lj)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275cmp=Ne({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(Tl("id",r._config.id),$e("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),rt("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},features:[Mn],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(M(0,"div",0)(1,"div",1),be(2,Ube,0,0,"ng-template",2),O()())},dependencies:[Rl],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return t})(),Pj="--mat-dialog-transition-duration";function $j(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Au(t.substring(0,t.length-2)):t.endsWith("s")?Au(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var Dv=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(Dv||{}),Fu=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new Oe;_beforeClosed=new Oe;_result;_closeFallbackTimeout;_state=Dv.OPEN;_closeInteractionType;constructor(n,e,i){this._ref=n,this._containerInstance=i,this.disableClose=e.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Sn(r=>r.state==="opened"),Xn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Sn(r=>r.state==="closed"),Xn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),dl(this.backdropClick(),this.keydownEvents().pipe(Sn(r=>r.keyCode===27&&!this.disableClose&&!Cr(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),pF(this,r.type==="keydown"?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(Sn(e=>e.state==="closing"),Xn(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=Dv.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=Dv.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function pF(t,n,e){return t._closeInteractionType=n,t.close(e)}var vS=new he("MatMdcDialogData"),Bj=new he("mat-mdc-dialog-default-options"),zj=new he("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=E(vi);return()=>t.scrollStrategies.block()}});var sg=(()=>{class t{_overlay=E(vi);_defaultOptions=E(Bj,{optional:!0});_scrollStrategy=E(zj);_parentDialog=E(t,{optional:!0,skipSelf:!0});_idGenerator=E(wr);_dialog=E(uF);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Oe;_afterOpenedAtThisLevel=new Oe;dialogConfigClass=Av;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=ha(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ro(void 0)));constructor(){this._dialogRefConstructor=Fu,this._dialogContainerType=Vj,this._dialogDataToken=vS}open(e,i){let r;i=re(re({},this._defaultOptions||new Av),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,At(re({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Ru,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hF=(()=>{class t{dialogRef=E(Fu,{optional:!0});_elementRef=E(nt);_dialog=E(sg);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=Uj(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){pF(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){i&1&&_e("click",function(s){return r._onButtonClick(s)}),i&2&&$e("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Jt]})}return t})(),Gj=(()=>{class t{_dialogRef=E(Fu,{optional:!0});_elementRef=E(nt);_dialog=E(sg);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=Uj(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t})}return t})(),mF=(()=>{class t extends Gj{id=E(wr).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275dir=st({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){i&2&&Tl("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Mn]})}return t})(),fF=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[SG([ZR])]})}return t})(),gF=(()=>{class t extends Gj{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275dir=st({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,r){i&2&&rt("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},features:[Mn]})}return t})();function Uj(t,n){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(i=>i.id===e.id):null}var Nv=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({providers:[sg],imports:[Rj,Ws,Oa,jt,jt]})}return t})();var jbe=()=>[1,2,3,4,5,6,7,8,9];function qbe(t,n){if(t&1&&(M(0,"div",3),X(1),O()),t&2){let e=ee();V(),xt(e.value)}}function Xbe(t,n){if(t&1&&(M(0,"span"),X(1),O()),t&2){let e=ee().$implicit;V(),xt(e)}}function Kbe(t,n){if(t&1&&(M(0,"div",6),be(1,Xbe,2,1,"span",7),O()),t&2){let e=n.$implicit,i=ee(2);V(),J("ngIf",i.notes.includes(e))}}function Ybe(t,n){t&1&&(M(0,"div",4),be(1,Kbe,2,1,"div",5),O()),t&2&&(V(),J("ngForOf",_u(1,jbe)))}var ag=class t{value=0;notes=[];isOriginal=!1;isSelected=!1;isSameNumber=!1;isConflict=!1;isHighlighted=!1;isCoachHighlighted=!1;cellClick=new ke;onClick(){this.cellClick.emit()}getNotesGrid(){let n=[[null,null,null],[null,null,null],[null,null,null]];return this.notes.forEach(e=>{let i=Math.floor((e-1)/3),r=(e-1)%3;n[i][r]=e}),n}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=Ne({type:t,selectors:[["app-cell"]],inputs:{value:"value",notes:"notes",isOriginal:"isOriginal",isSelected:"isSelected",isSameNumber:"isSameNumber",isConflict:"isConflict",isHighlighted:"isHighlighted",isCoachHighlighted:"isCoachHighlighted"},outputs:{cellClick:"cellClick"},decls:3,vars:14,consts:[[1,"cell",3,"click"],["class","cell-value",4,"ngIf"],["class","notes-grid",4,"ngIf"],[1,"cell-value"],[1,"notes-grid"],["class","note-cell",4,"ngFor","ngForOf"],[1,"note-cell"],[4,"ngIf"]],template:function(e,i){e&1&&(M(0,"div",0),_e("click",function(){return i.onClick()}),be(1,qbe,2,1,"div",1)(2,Ybe,2,2,"div",2),O()),e&2&&(rt("original",i.isOriginal)("selected",i.isSelected)("same-number",i.isSameNumber)("conflict",i.isConflict)("highlighted",i.isHighlighted)("coach-highlighted",i.isCoachHighlighted),V(),J("ngIf",i.value!==0),V(),J("ngIf",i.value===0&&i.notes.length>0))},dependencies:[mi,Wr,Yn],styles:[".cell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .2s ease;background-color:#fff;position:relative;box-sizing:border-box;aspect-ratio:1;min-height:35px;border-radius:2px;border:1px solid #ccc}.cell[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.cell.selected[_ngcontent-%COMP%]{background-color:#dbeafe!important;border-color:#3b82f6;box-shadow:inset 0 0 0 2px #3b82f6;color:#fff}.cell.original[_ngcontent-%COMP%]{font-weight:700;color:#1f2937;background-color:#f9fafb}.cell.same-number[_ngcontent-%COMP%]{background-color:#ecfdf5}.cell.conflict[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.cell.highlighted[_ngcontent-%COMP%]{background-color:#fef3c7}.coach-highlighted[_ngcontent-%COMP%]{background-color:#ffc10780;animation:_ngcontent-%COMP%_pulse-highlight 2s infinite}@keyframes _ngcontent-%COMP%_pulse-highlight{0%{box-shadow:0 0 #ffc107b3}70%{box-shadow:0 0 0 5px #ffc10700}to{box-shadow:0 0 #ffc10700}}.cell-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#374151;line-height:1}.cell.original[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]{color:#1f2937;font-weight:700}.notes-grid[_ngcontent-%COMP%]{position:absolute;inset:1px;display:grid;grid-template-rows:repeat(3,1fr);grid-template-columns:repeat(3,1fr);box-sizing:border-box;gap:0}.note-cell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:.5rem;font-weight:600;color:#6b7280;line-height:1}.note-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:inherit;line-height:1}@media (max-width: 768px){.cell[_ngcontent-%COMP%]{min-height:30px}.cell-value[_ngcontent-%COMP%]{font-size:1.25rem}.note-cell[_ngcontent-%COMP%]{font-size:.45rem}}@media (min-width: 1024px){.cell[_ngcontent-%COMP%]{min-height:50px}.cell-value[_ngcontent-%COMP%]{font-size:2rem}.note-cell[_ngcontent-%COMP%]{font-size:.65rem}}.dark-theme[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{border-color:#444}.dark-theme[_nghost-%COMP%]   .original[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .original[_ngcontent-%COMP%]{color:#ddd}.dark-theme[_nghost-%COMP%]   .selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#4285f4cc}.dark-theme[_nghost-%COMP%]   .same-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .same-number[_ngcontent-%COMP%]{background-color:#4285f466}.dark-theme[_nghost-%COMP%]   .highlighted[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .highlighted[_ngcontent-%COMP%]{background-color:#4285f433}.dark-theme[_nghost-%COMP%]   .notes-grid[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .notes-grid[_ngcontent-%COMP%]{color:#999}.dark-theme[_nghost-%COMP%]   .coach-highlighted[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .coach-highlighted[_ngcontent-%COMP%]{background-color:#ffc10799}.ai-decision-correct[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .ai-decision-correct[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .ai-decision-correct   [_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .cell.ai-decision-correct[_ngcontent-%COMP%]{background:#22c55e26!important;border:2px solid rgba(34,197,94,.5)!important;box-shadow:inset 0 0 0 1px #22c55e4d,0 0 6px #22c55e40!important;animation:_ngcontent-%COMP%_correctPulse .8s ease-in-out!important;z-index:100!important;color:#000!important}.ai-decision-incorrect[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .ai-decision-incorrect[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .ai-decision-incorrect   [_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .cell.ai-decision-incorrect[_ngcontent-%COMP%]{background:#ef444426!important;border:2px solid rgba(239,68,68,.5)!important;box-shadow:inset 0 0 0 1px #ef44444d,0 0 6px #ef444440!important;animation:_ngcontent-%COMP%_incorrectShake .8s ease-in-out!important;z-index:100!important;color:#000!important}.ai-decision-correct.highlighted[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .highlighted.ai-decision-correct[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .cell.ai-decision-correct.highlighted[_ngcontent-%COMP%], .cell.highlighted.ai-decision-correct[_ngcontent-%COMP%]{background:#22c55e33!important;border:2px solid rgba(34,197,94,.6)!important}.ai-decision-incorrect.highlighted[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .highlighted.ai-decision-incorrect[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .cell.ai-decision-incorrect.highlighted[_ngcontent-%COMP%], .cell.highlighted.ai-decision-incorrect[_ngcontent-%COMP%]{background:#ef444433!important;border:2px solid rgba(239,68,68,.6)!important}@keyframes _ngcontent-%COMP%_correctPulse{0%{box-shadow:inset 0 0 0 1px #22c55e4d,0 0 4px #22c55e33;transform:scale(1)}50%{box-shadow:inset 0 0 0 2px #22c55e66,0 0 8px #22c55e4d;transform:scale(1.02)}to{box-shadow:inset 0 0 0 1px #22c55e4d,0 0 6px #22c55e40;transform:scale(1)}}@keyframes _ngcontent-%COMP%_incorrectShake{0%,to{transform:translate(0) scale(1)}25%{transform:translate(-2px) scale(1.01)}75%{transform:translate(2px) scale(1.01)}}.dark-theme[_nghost-%COMP%]   .cell.ai-decision-correct[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .cell.ai-decision-correct[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   app-cell.ai-decision-correct[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   app-cell.ai-decision-correct[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   .cell.ai-decision-correct[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   app-cell.ai-decision-correct[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:#22c55e33!important;border-color:#22c55e99!important;box-shadow:inset 0 0 0 1px #22c55e66,0 0 6px #22c55e4d!important}.dark-theme[_nghost-%COMP%]   .cell.ai-decision-incorrect[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .cell.ai-decision-incorrect[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   app-cell.ai-decision-incorrect[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   app-cell.ai-decision-incorrect[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   .cell.ai-decision-incorrect[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   app-cell.ai-decision-incorrect[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{background-color:#ef444433!important;border-color:#ef444499!important;box-shadow:inset 0 0 0 1px #ef444466,0 0 6px #ef44444d!important}"]})};function Qbe(t,n){if(t&1&&(M(0,"p",13),X(1),O()),t&2){let e=ee(2);V(),xn(" Value: ",e.data.value," ")}}function Zbe(t,n){if(t&1&&(M(0,"div",10)(1,"p",11),X(2),O(),be(3,Qbe,2,1,"p",12),O()),t&2){let e=ee();V(2),Sl(" Position: Row ",e.data.position.row+1,", Column ",e.data.position.col+1," "),V(),J("ngIf",e.data.value)}}function Jbe(t,n){if(t&1&&(M(0,"div",14)(1,"p",15),X(2),O()()),t&2){let e=ee();V(2),Sl("Technique ",e.data.currentIndex+1," of ",e.data.techniqueCount,"")}}function exe(t,n){if(t&1&&(M(0,"div",16)(1,"div",17)(2,"button",18),X(3," Skip This "),O(),M(4,"button",18),X(5),O(),M(6,"button",18),X(7," Skip to End "),O()()()),t&2){let e=ee();V(2),J("mat-dialog-close","skip-this"),V(2),J("mat-dialog-close","skip-type"),V(),xn(" Skip All ",e.data.technique," "),V(),J("mat-dialog-close","skip-all")}}var th=class t{constructor(n,e){this.dialogRef=n;this.data=e}static \u0275fac=function(e){return new(e||t)(Ae(Fu),Ae(vS))};static \u0275cmp=Ne({type:t,selectors:[["app-technique-dialog"]],decls:15,vars:6,consts:[[1,"technique-dialog-container"],["mat-dialog-title",""],[3,"innerHTML"],["class","technique-details",4,"ngIf"],["class","teaching-progress",4,"ngIf"],[1,"button-container"],[1,"primary-actions"],["mat-raised-button","","color","primary",1,"apply-button",3,"mat-dialog-close"],["mat-button","","mat-dialog-close","",1,"cancel-button"],["class","skip-options",4,"ngIf"],[1,"technique-details"],[1,"position"],["class","value",4,"ngIf"],[1,"value"],[1,"teaching-progress"],[1,"progress-text"],[1,"skip-options"],[1,"skip-buttons"],["mat-stroked-button","",1,"skip-button",3,"mat-dialog-close"]],template:function(e,i){e&1&&(M(0,"div",0)(1,"h2",1),X(2),O(),M(3,"mat-dialog-content"),Ee(4,"p",2),be(5,Zbe,4,3,"div",3)(6,Jbe,3,2,"div",4),O(),M(7,"mat-dialog-actions")(8,"div",5)(9,"div",6)(10,"button",7),X(11," Apply "),O(),M(12,"button",8),X(13,"Cancel"),O()(),be(14,exe,8,4,"div",9),O()()()),e&2&&(V(2),xt(i.data.title),V(2),J("innerHTML",i.data.message,DC),V(),J("ngIf",i.data.position),V(),J("ngIf",i.data.isTeachingMode&&i.data.techniqueCount&&i.data.currentIndex!==void 0),V(4),J("mat-dialog-close","apply"),V(4),J("ngIf",i.data.showSkipOptions))},dependencies:[mi,Yn,Nv,hF,mF,gF,fF,fo,ds],styles:["[_nghost-%COMP%]{display:block}  .technique-dialog .mat-mdc-dialog-surface{background-color:#fffffff2!important;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);position:absolute;top:10px;right:10px;max-width:400px;max-height:calc(100vh - 20px);width:95%;overflow:auto;border-radius:12px;box-shadow:0 8px 32px #0003;border:1px solid rgba(255,255,255,.3)}  .dark-theme .technique-dialog .mat-mdc-dialog-surface{background-color:#2d2d2df2!important;border:1px solid rgba(255,255,255,.1)}.technique-dialog-container[_ngcontent-%COMP%]{color:#333;padding:0 5px}.dark-theme[_nghost-%COMP%]   .technique-dialog-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .technique-dialog-container[_ngcontent-%COMP%]{color:#f5f5f5}mat-dialog-content[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:0}.technique-details[_ngcontent-%COMP%]{margin:1rem 0;padding:.75rem;background:#0000000a;border-radius:8px}.technique-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.teaching-progress[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-style:italic;color:#0009}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%}.primary-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end}.apply-button[_ngcontent-%COMP%]{min-width:100px}.skip-options[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12);padding-top:1rem}.skip-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.skip-button[_ngcontent-%COMP%]{width:100%;justify-content:center}.dark-theme[_nghost-%COMP%]   .technique-details[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .technique-details[_ngcontent-%COMP%]{background:#ffffff1a}.dark-theme[_nghost-%COMP%]   .teaching-progress[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .teaching-progress[_ngcontent-%COMP%]{color:#ffffffb3}.dark-theme[_nghost-%COMP%]   .skip-options[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .skip-options[_ngcontent-%COMP%]{border-top-color:#ffffff1f}@media (max-width: 600px){.technique-dialog-container[_ngcontent-%COMP%]{padding:1rem .75rem}mat-dialog-content[_ngcontent-%COMP%]{margin-bottom:1rem}.button-container[_ngcontent-%COMP%]{gap:.75rem}.primary-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}.apply-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{width:100%;margin:0}.skip-buttons[_ngcontent-%COMP%]{gap:.5rem}.skip-button[_ngcontent-%COMP%]{padding:.5rem}}"]})};var lg=class t{constructor(){}generateBoard(n="medium"){let e=this.generateCompleteSolution(),i=this.removeNumbers(e,n);return{grid:this.deepCopy(i),solution:this.deepCopy(e),difficulty:n}}generateCompleteSolution(){let n=Array(9).fill(null).map(()=>Array(9).fill(0));return this.solveSudoku(n),this.shuffleBoard(n),n}solveSudoku(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0){let r=this.shuffleArray([1,2,3,4,5,6,7,8,9]);for(let o of r)if(this.isValidPlacement(n,e,i,o)){if(n[e][i]=o,this.solveSudoku(n))return!0;n[e][i]=0}return!1}return!0}isValidPlacement(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=0;a<3;a++)for(let l=0;l<3;l++)if(n[o+a][s+l]===r)return!1;return!0}removeNumbers(n,e){let i=this.deepCopy(n),r=this.getCellsToRemove(e),o=0,s=r*3;for(let a=0;a<s&&o<r;a++){let l=Math.floor(Math.random()*9),c=Math.floor(Math.random()*9);if(i[l][c]!==0){let u=i[l][c];i[l][c]=0,this.hasUniqueSolution(i)?o++:i[l][c]=u}}return i}getCellsToRemove(n){switch(n){case"easy":return 35;case"medium":return 45;case"hard":return 55;case"expert":return 64;default:return 45}}hasUniqueSolution(n){let e=this.deepCopy(n),i=0,r=o=>{if(!(i>1)){for(let s=0;s<9;s++)for(let a=0;a<9;a++)if(o[s][a]===0){for(let l=1;l<=9;l++)this.isValidPlacement(o,s,a,l)&&(o[s][a]=l,r(o),o[s][a]=0);return}i++}};return r(e),i===1}shuffleBoard(n){for(let e=0;e<3;e++){let i=[e*3,e*3+1,e*3+2];this.shuffleArray(i);let r=this.deepCopy(n);for(let o=0;o<3;o++)for(let s=0;s<9;s++)n[e*3+o][s]=r[i[o]][s]}for(let e=0;e<3;e++){let i=[e*3,e*3+1,e*3+2];this.shuffleArray(i);let r=this.deepCopy(n);for(let o=0;o<9;o++)for(let s=0;s<3;s++)n[o][e*3+s]=r[o][i[s]]}}shuffleArray(n){for(let e=n.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1));[n[e],n[i]]=[n[i],n[e]]}return n}deepCopy(n){return n.map(e=>[...e])}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var cg=class t{constructor(n,e){this.http=n;this.localGenerator=e}apiUrl="https://sudoku-api.vercel.app/api/dosuku";getNewBoard(n,e){let i;if(e?i=this.getAiSettings():i=this.getSettings(),i.useApi)return this.getApiBoard(n,e);{let r=e?i.aiDifficulty:i.localDifficulty;return this.getLocalBoard(r)}}getApiBoard(n,e){return this.http.get(`${this.apiUrl}?query=${encodeURIComponent("{newboard(limit:1){grids{value,solution,difficulty},results,message}}")}`).pipe(ot(r=>{let o=r.newboard.grids[0];return{grid:o.value,solution:o.solution,difficulty:o.difficulty}}),Jo(r=>{console.error("Error fetching Sudoku board from API:",r),console.log("Falling back to local generation...");let o=e?this.getAiSettings():this.getSettings(),s=e?o.aiDifficulty:o.localDifficulty;return this.getLocalBoard(s)}))}getLocalBoard(n){try{let e=this.localGenerator.generateBoard(n);return Qe({grid:e.grid,solution:e.solution,difficulty:e.difficulty})}catch(e){return console.error("Error generating local Sudoku board:",e),Qe(this.getFallbackBoard())}}getFallbackBoard(){return{grid:[[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]],solution:[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]],difficulty:"Medium"}}getAiSettings(){let n=localStorage.getItem("sudokuAiSettings");return n?JSON.parse(n):{useApi:!0,aiDifficulty:"medium"}}getSettings(){let n=localStorage.getItem("sudokuSettings");return n?JSON.parse(n):{useApi:!0,localDifficulty:"medium",showMistakes:!0,showTimer:!0,highlightSameNumbers:!0,theme:"light"}}saveAiSettings(n){localStorage.setItem("sudokuAiSettings",JSON.stringify(n))}getAiBoard(){return this.getNewBoard(void 0,!0)}forceApiBoard(n){return this.getApiBoard(n,!1)}forceLocalBoard(n="medium"){return this.getLocalBoard(n)}getCurrentSettings(){return this.getSettings()}getCurrentAiSettings(){return this.getAiSettings()}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=0;a<3;a++)for(let l=0;l<3;l++)if(n[o+a][s+l]===r)return!1;return!0}isSolved(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0)return!1;return!0}static \u0275fac=function(e){return new(e||t)(qe(Sf),qe(lg))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var qj=(c=>(c.NAKED_SINGLE="Naked Single",c.HIDDEN_SINGLE="Hidden Single",c.NAKED_PAIR="Naked Pair",c.HIDDEN_PAIR="Hidden Pair",c.NAKED_TRIPLE="Naked Triple",c.HIDDEN_TRIPLE="Hidden Triple",c.X_WING="X-Wing",c.SWORDFISH="Swordfish",c.Y_WING="Y-Wing",c))(qj||{}),_S=class t{model=null;modelLoaded=!1;modelLoading=!1;MODEL_URL="assets/models/sudoku_coach/model.json";userProfileSubject=new Jn({strengths:[],weaknesses:[],lastUpdated:new Date});techniqueStats=new Map;constructor(){this.initializeStats(),this.loadModel()}initializeStats(){Object.values(qj).forEach(e=>{this.techniqueStats.set(e,{technique:e,usageCount:0,successRate:0})});let n=localStorage.getItem("sudoku-technique-stats");if(n)try{let e=JSON.parse(n);Object.entries(e).forEach(([i,r])=>{this.techniqueStats.set(i,r)})}catch(e){console.error("Failed to parse saved technique statistics:",e)}}loadModel(){return W(this,null,function*(){if(!(this.modelLoaded||this.modelLoading)){this.modelLoading=!0;try{yield new Promise(n=>setTimeout(n,1e3)),this.modelLoaded=!0,console.log("Technique detection model loaded successfully")}catch(n){console.error("Failed to load technique detection model:",n)}finally{this.modelLoading=!1}}})}detectTechniques(n,e){return W(this,null,function*(){return yield this.ensureModelLoaded(),this.detectTechniquesRuleBased(n,e)})}detectTechniquesRuleBased(n,e){let i=[],r=this.checkEmptyCellsWithoutNotes(n,e);for(let o=0;o<9;o++)for(let s=0;s<9;s++)if(n[o][s]===0&&e[o][s].length===1){let a=e[o][s][0];i.push({technique:"Naked Single",targetCell:{row:o,col:s},explanation:`Only the number ${a} can go in this cell, as all other candidates have been eliminated.`,value:a,confidence:.95,detailExplanation:`In R${o+1}C${s+1}, all other candidates have been eliminated, leaving ${a} as the only possible value. This is called a "Naked Single" because the single candidate is directly visible.`})}for(let o=0;o<9;o++){let s=new Map;for(let a=0;a<9;a++)if(n[o][a]===0)for(let l of e[o][a])if(!s.has(l))s.set(l,{count:1,col:a});else{let c=s.get(l);s.set(l,{count:c.count+1,col:c.col})}for(let[a,l]of s.entries())l.count===1&&i.push({technique:"Hidden Single",targetCell:{row:o,col:l.col},explanation:`Only this cell in row ${o+1} can contain the number ${a}, as it's eliminated from all other cells.`,value:a,confidence:.9,detailExplanation:`In row ${o+1}, the number ${a} can only go in column ${l.col+1} because it's eliminated from all other cells in this row. This is called a "Hidden Single" because the unique placement isn't immediately obvious.`})}for(let o=0;o<9;o++){let s=new Map;for(let a=0;a<9;a++)if(n[a][o]===0)for(let l of e[a][o])if(!s.has(l))s.set(l,{count:1,row:a});else{let c=s.get(l);s.set(l,{count:c.count+1,row:c.row})}for(let[a,l]of s.entries())l.count===1&&i.push({technique:"Hidden Single",targetCell:{row:l.row,col:o},explanation:`Only this cell in column ${o+1} can contain the number ${a}, as it's eliminated from all other cells.`,value:a,confidence:.9,detailExplanation:`In column ${o+1}, the number ${a} can only go in row ${l.row+1} because it's eliminated from all other cells in this column. This is a column-based "Hidden Single".`})}for(let o=0;o<3;o++)for(let s=0;s<3;s++){let a=o*3,l=s*3,c=new Map;for(let u=a;u<a+3;u++)for(let d=l;d<l+3;d++)if(n[u][d]===0)for(let p of e[u][d])if(!c.has(p))c.set(p,{count:1,row:u,col:d});else{let h=c.get(p);c.set(p,{count:h.count+1,row:h.row,col:h.col})}for(let[u,d]of c.entries())d.count===1&&i.push({technique:"Hidden Single",targetCell:{row:d.row,col:d.col},explanation:`Only this cell in box ${o*3+s+1} can contain the number ${u}.`,value:u,confidence:.9,detailExplanation:`In the ${o*3+s+1} box, the number ${u} can only go at R${d.row+1}C${d.col+1} because it's eliminated from all other cells in this box. This is a box-based "Hidden Single".`})}return r&&i.forEach(o=>{o.prerequisites=["You need to fill in the notes (candidates) for empty cells to use this technique effectively."]}),i}checkEmptyCellsWithoutNotes(n,e){for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0&&e[i][r].length===0)return!0;return!1}getHint(n,e){return W(this,null,function*(){let i=yield this.detectTechniques(n,e);return i.length===0?null:(i.sort((r,o)=>o.confidence-r.confidence),i[0])})}getHintForCell(n,e,i,r){return W(this,null,function*(){if(n[i][r]!==0)return null;let s=(yield this.detectTechniques(n,e)).filter(a=>a.targetCell&&a.targetCell.row===i&&a.targetCell.col===r);return s.length>0?(s.sort((a,l)=>l.confidence-a.confidence),s[0]):null})}recordTechniqueUsage(n,e){let i=this.techniqueStats.get(n);if(i){i.usageCount++;let r=i.successRate*(i.usageCount-1)+(e?1:0);i.successRate=r/i.usageCount,this.saveTechniqueStats(),this.updateUserProfile()}}saveTechniqueStats(){try{let n=Object.fromEntries(this.techniqueStats);localStorage.setItem("sudoku-technique-stats",JSON.stringify(n))}catch(n){console.error("Failed to save technique statistics:",n)}}updateUserProfile(){let e=[...Array.from(this.techniqueStats.values())].filter(s=>s.usageCount>0).sort((s,a)=>a.successRate-s.successRate),i=e.slice(0,3).map(s=>s.technique),r=[...e].sort((s,a)=>s.successRate-a.successRate).slice(0,3).map(s=>s.technique),o={strengths:i,weaknesses:r,lastUpdated:new Date};this.userProfileSubject.next(o);try{localStorage.setItem("sudoku-user-profile",JSON.stringify(o))}catch(s){console.error("Failed to save user technique profile:",s)}}getUserProfile(){return this.userProfileSubject.asObservable()}recommendDifficulty(){let n=this.userProfileSubject.value,e=["X-Wing","Swordfish","Y-Wing"],i=n.weaknesses.some(o=>e.includes(o)),r=n.strengths.some(o=>e.includes(o));return i?"hard":r?"expert":n.weaknesses.includes("Hidden Pair")?"medium":"easy"}ensureModelLoaded(){return W(this,null,function*(){for(!this.modelLoaded&&!this.modelLoading&&(yield this.loadModel());this.modelLoading;)yield new Promise(n=>setTimeout(n,100))})}getTechniqueStats(){return Array.from(this.techniqueStats.values())}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var nxe=()=>[1,2,3,4,5,6,7,8,9];function ixe(t,n){t&1&&(M(0,"div",12),Ee(1,"div",13),M(2,"p"),X(3,"Loading puzzle..."),O()())}function rxe(t,n){if(t&1){let e=qt();M(0,"app-cell",20),_e("cellClick",function(){let r=Le(e).$implicit,o=ee(3);return Pe(o.selectCell(r.row,r.col))}),O()}if(t&2){let e=n.$implicit,i=ee(3);J("value",e.value)("notes",e.notes)("isOriginal",e.isOriginal)("isSelected",e.isSelected)("isSameNumber",e.isSameNumber)("isHighlighted",e.isHighlighted)("isCoachHighlighted",i.isCoachHighlighted(e.row,e.col))}}function oxe(t,n){if(t&1&&(M(0,"div",18),be(1,rxe,1,7,"app-cell",19),O()),t&2){let e=n.$implicit;V(),J("ngForOf",e)}}function sxe(t,n){if(t&1&&(M(0,"div",14)(1,"div",15)(2,"div",16),be(3,oxe,2,1,"div",17),O()()()),t&2){let e=ee();V(3),J("ngForOf",e.getSections())}}function axe(t,n){if(t&1){let e=qt();M(0,"button",30),_e("click",function(){let r=Le(e).$implicit,o=ee(2);return Pe(o.enterNumber(r))}),X(1),O()}if(t&2){let e=n.$implicit,i=ee(2);rt("notes-mode",i.notesMode),V(),xn(" ",e," ")}}function lxe(t,n){if(t&1){let e=qt();M(0,"div",21)(1,"div",22),be(2,axe,2,3,"button",23),O(),M(3,"div",24)(4,"button",25),_e("click",function(){Le(e);let r=ee();return Pe(r.toggleNotesMode())}),M(5,"mat-icon"),X(6,"edit"),O(),X(7," Notes "),O(),M(8,"button",26),_e("click",function(){Le(e);let r=ee();return Pe(r.autoFillAllNotes())}),M(9,"mat-icon"),X(10,"auto_fix_high"),O(),X(11," Auto Notes "),O(),M(12,"button",27),_e("click",function(){Le(e);let r=ee();return Pe(r.toggleCoachMode())}),M(13,"mat-icon"),X(14,"school"),O(),X(15," Teach Me "),O(),M(16,"button",28),_e("click",function(){Le(e);let r=ee();return Pe(r.getSmartHint())}),M(17,"mat-icon"),X(18,"lightbulb"),O(),X(19," Hint "),O(),M(20,"button",29),_e("click",function(){Le(e);let r=ee();return Pe(r.clearCell())}),M(21,"mat-icon"),X(22,"backspace"),O(),X(23," Clear "),O()()()}if(t&2){let e=ee();V(2),J("ngForOf",_u(7,nxe)),V(2),rt("active",e.notesMode),V(8),rt("active",e.coachMode),V(4),J("disabled",e.hintsUsed>=e.maxHints),V(4),J("disabled",!e.selectedCell||e.isOriginal(e.selectedCell.row||0,e.selectedCell.col||0))}}function cxe(t,n){if(t&1){let e=qt();M(0,"div",31)(1,"div",32)(2,"div",33)(3,"mat-icon",34),X(4,"check_circle"),O(),M(5,"h2"),X(6,"Puzzle Solved!"),O(),M(7,"div",35)(8,"div",36)(9,"span",37),X(10,"Time:"),O(),M(11,"span",38),X(12),O()(),M(13,"div",36)(14,"span",37),X(15,"Difficulty:"),O(),M(16,"span",38),X(17),Tx(18,"titlecase"),O()(),M(19,"div",36)(20,"span",37),X(21,"Mistakes:"),O(),M(22,"span",38),X(23),O()()(),M(24,"div",39)(25,"button",40),_e("click",function(){Le(e);let r=ee();return Pe(r.newGame())}),X(26," Play Again "),O(),M(27,"button",41),_e("click",function(){Le(e);let r=ee();return Pe(r.backToMenu())}),X(28," Main Menu "),O()()()()()}if(t&2){let e=ee();V(12),xt(e.formatTime()),V(5),xt(Sx(18,3,e.difficulty)),V(6),xt(e.mistakes)}}var wS=class t{constructor(n,e,i,r,o,s){this.router=n;this.sudokuService=e;this.localGenerator=i;this._snackBar=r;this.techniqueCoachService=o;this.dialog=s;this.initializeNotes()}board=[];notes=[];solution=[];originalBoard=[];difficulty="medium";selectedCell=null;loading=!0;timer=0;timerInterval;mistakes=0;gameCompleted=!1;notesMode=!1;hintsUsed=0;maxHints=3;Math=Math;highlightedCells=[];activeDetection=null;coachMode=!1;teachingStep="identify";pendingTechniques=[];currentTeachingIndex=-1;notesRequired=!1;singleCellHintRequested=!1;targetCellForHint=null;skippedTechniqueTypes=[];skipToEnd=!1;ngOnInit(){localStorage.getItem("sudoku-theme")==="dark"?(document.body.classList.add("dark-theme"),document.body.classList.remove("light-theme")):(document.body.classList.add("light-theme"),document.body.classList.remove("dark-theme")),this.startNewGame()}ngOnDestroy(){this.stopTimer()}initializeNotes(){this.notes=Array(9).fill(null).map(()=>Array(9).fill(null).map(()=>[]))}startNewGame(){this.loading=!0,this.resetGame();let n=this.getSettings();n.useApi?this.sudokuService.getNewBoard().subscribe({next:e=>{this.initializeGame(e.grid,e.solution,e.difficulty),this.loading=!1},error:e=>{console.error("Error loading puzzle from API:",e),this.generateLocalPuzzle(n.localDifficulty)}}):this.generateLocalPuzzle(n.localDifficulty)}generateLocalPuzzle(n){try{let e=this.localGenerator.generateBoard(n);this.initializeGame(e.grid,e.solution,e.difficulty),this.loading=!1}catch(e){console.error("Error generating local puzzle:",e),this.initializeGame(this.getFallbackPuzzle().grid,this.getFallbackPuzzle().solution,"Medium"),this.loading=!1}}getSettings(){let n=localStorage.getItem("sudokuSettings");return n?JSON.parse(n):{useApi:!0,localDifficulty:"medium"}}getFallbackPuzzle(){return{grid:[[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]],solution:[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]]}}loadNewGame(){this.startNewGame()}selectCell(n,e){this.selectedCell={row:n,col:e}}isSelected(n,e){return this.selectedCell?.row===n&&this.selectedCell?.col===e}isOriginal(n,e){return this.originalBoard[n][e]!==0}isSameNumber(n,e){if(!this.selectedCell||this.board[n][e]===0)return!1;let i=this.board[this.selectedCell.row][this.selectedCell.col];return this.board[n][e]===i&&i!==0}isHighlighted(n,e){return this.selectedCell?this.selectedCell.row===n||this.selectedCell.col===e||this.getSameBox(this.selectedCell.row,this.selectedCell.col,n,e):!1}getSameBox(n,e,i,r){let o=Math.floor(n/3)*3+Math.floor(e/3),s=Math.floor(i/3)*3+Math.floor(r/3);return o===s}enterNumber(n){if(!this.selectedCell||this.gameCompleted)return;let{row:e,col:i}=this.selectedCell;this.originalBoard[e][i]===0&&(this.notesMode?this.toggleNote(e,i,n):(this.notes[e][i]=[],n===this.solution[e][i]?(this.board[e][i]=n,this.eliminateNotesFromRelatedCells(e,i,n),this.sudokuService.isSolved(this.board)&&(this.gameCompleted=!0,this.stopTimer(),console.log("Congratulations! You solved the puzzle!"))):(this.mistakes++,console.log("Incorrect number!"),this._snackBar.open("Incorrect number!","Close",{duration:2e3}),this.mistakes>=3&&console.log("Game over! Too many mistakes."))))}eliminateNotesFromRelatedCells(n,e,i){for(let s=0;s<9;s++)s!==e&&this.board[n][s]===0&&this.removeNoteFromCell(n,s,i);for(let s=0;s<9;s++)s!==n&&this.board[s][e]===0&&this.removeNoteFromCell(s,e,i);let r=Math.floor(n/3)*3,o=Math.floor(e/3)*3;for(let s=r;s<r+3;s++)for(let a=o;a<o+3;a++)(s!==n||a!==e)&&this.board[s][a]===0&&this.removeNoteFromCell(s,a,i)}removeNoteFromCell(n,e,i){let r=this.notes[n][e].indexOf(i);r>-1&&this.notes[n][e].splice(r,1)}autoFillNotes(n,e){if(this.board[n][e]!==0)return;let i=[];for(let r=1;r<=9;r++)this.isValidPlacement(n,e,r)&&i.push(r);this.notes[n][e]=i}isValidPlacement(n,e,i){for(let s=0;s<9;s++)if(this.board[n][s]===i)return!1;for(let s=0;s<9;s++)if(this.board[s][e]===i)return!1;let r=Math.floor(n/3)*3,o=Math.floor(e/3)*3;for(let s=r;s<r+3;s++)for(let a=o;a<o+3;a++)if(this.board[s][a]===i)return!1;return!0}autoFillAllNotes(){for(let n=0;n<9;n++)for(let e=0;e<9;e++)this.board[n][e]===0&&this.autoFillNotes(n,e);console.log("Auto-filled notes for all empty cells!")}toggleNote(n,e,i){if(this.board[n][e]!==0)return;let r=this.notes[n][e].indexOf(i);r>-1?this.notes[n][e].splice(r,1):(this.notes[n][e].push(i),this.notes[n][e].sort((o,s)=>o-s))}clearCell(){this.selectedCell&&!this.isOriginal(this.selectedCell.row,this.selectedCell.col)&&(this.board[this.selectedCell.row][this.selectedCell.col]=0,this.notes[this.selectedCell.row][this.selectedCell.col]=[])}toggleNotesMode(){this.notesMode=!this.notesMode}toggleCoachMode(){this.coachMode=!this.coachMode,this.coachMode?this.startTeachingMode():(this.highlightedCells=[],this.activeDetection=null,this.pendingTechniques=[],this.currentTeachingIndex=-1,this.teachingStep="identify")}isCoachHighlighted(n,e){return this.highlightedCells.some(i=>i.row===n&&i.col===e)}startTeachingMode(){return W(this,null,function*(){this.highlightedCells=[],this.pendingTechniques=[];let n=!1;for(let e=0;e<9;e++){for(let i=0;i<9;i++)if(this.board[e][i]===0&&this.notes[e][i].length===0){n=!0;break}if(n)break}n?(this.notesRequired=!0,this._snackBar.open("To effectively learn techniques, notes are needed for empty cells. Would you like to auto-fill notes?","Auto-fill Notes",{duration:1e4}).onAction().subscribe(()=>{this.autoFillAllNotes(),this.continueTeachingProcess()})):this.continueTeachingProcess()})}continueTeachingProcess(){return W(this,null,function*(){if(this.pendingTechniques=yield this.techniqueCoachService.detectTechniques(this.board,this.notes),this.pendingTechniques.length===0){this._snackBar.open("No applicable solving techniques found. Try filling in more notes or using direct elimination.","Close",{duration:5e3});return}this.currentTeachingIndex=0,this.teachTechnique()})}teachTechnique(){return W(this,null,function*(){if(this.currentTeachingIndex<0||this.currentTeachingIndex>=this.pendingTechniques.length)return;let n=this.pendingTechniques[this.currentTeachingIndex];if(this.skipToEnd){this._snackBar.open("Skipping all remaining techniques.","Close",{duration:3e3}),this.currentTeachingIndex=this.pendingTechniques.length,this.highlightedCells=[],this.activeDetection=null;return}for(;this.skippedTechniqueTypes.includes(n.technique);){if(this.currentTeachingIndex++,this.currentTeachingIndex>=this.pendingTechniques.length){this._snackBar.open("No more applicable techniques to show.","Close",{duration:3e3}),this.highlightedCells=[],this.activeDetection=null;return}n=this.pendingTechniques[this.currentTeachingIndex]}this.activeDetection=n,this.teachingStep="identify",this.highlightedCells=[],n.targetCell&&(this.highlightedCells.push(n.targetCell),this.selectedCell=n.targetCell),n.relatedCells&&(this.highlightedCells=[...this.highlightedCells,...n.relatedCells]);let e=window.innerWidth<=600,i={data:{title:`Learn: ${n.technique}`,message:`<p>${n.detailExplanation||n.explanation}</p>
                 <p>Do you want to apply this technique to solve this cell?</p>`,technique:n.technique,position:n.targetCell,value:n.value,showSkipOptions:!0,isTeachingMode:!0,techniqueCount:this.pendingTechniques.length,currentIndex:this.currentTeachingIndex},width:e?"100%":"400px",panelClass:["technique-dialog","technique-dialog-section"],hasBackdrop:!e,autoFocus:!1,position:e?{bottom:"0",right:"0",left:"0"}:{top:"10px",right:"10px"}};this.dialog.open(th,i).afterClosed().subscribe(o=>{o==="apply"?this.applyTechniqueAndContinue():o==="skip-this"?this.skipCurrentTechnique():o==="skip-type"?this.skipTechniqueType(n.technique):o==="skip-all"?(this.skipToEnd=!0,this.highlightedCells=[],this.activeDetection=null):(this.highlightedCells=[],this.activeDetection=null)})})}applyAndSkipToNext(){if(!this.activeDetection||!this.activeDetection.targetCell||!this.activeDetection.value)return;let{row:n,col:e}=this.activeDetection.targetCell,i=this.activeDetection.value;if(this.board[n][e]=i,this.notes[n][e]=[],this.techniqueCoachService.recordTechniqueUsage(this.activeDetection.technique,!0),this.eliminateNotesFromRelatedCells(n,e,i),this.sudokuService.isSolved(this.board)){this.gameCompleted=!0,this.stopTimer(),this.coachMode=!1;return}this.highlightedCells=[],this.activeDetection=null,this.currentTeachingIndex++,this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),100):this._snackBar.open("You've applied all available techniques! Try using Auto Notes again to find more.","Continue",{duration:6e3}).onAction().subscribe(()=>{this.autoFillAllNotes(),this.startTeachingMode()})}skipCurrentTechnique(){this.highlightedCells=[],this.activeDetection=null,this.currentTeachingIndex++,this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),100):this._snackBar.open("You've reviewed all available techniques!","OK",{duration:3e3})}skipTechniqueType(n){this.skippedTechniqueTypes.includes(n)||this.skippedTechniqueTypes.push(n),this.highlightedCells=[],this.activeDetection=null;let e=!1;for(;this.currentTeachingIndex<this.pendingTechniques.length&&(this.currentTeachingIndex++,!(this.currentTeachingIndex>=this.pendingTechniques.length));){let i=this.pendingTechniques[this.currentTeachingIndex];if(!this.skippedTechniqueTypes.includes(i.technique)){e=!0;break}}e&&this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),100):this._snackBar.open("No more applicable techniques to show after skipping.","OK",{duration:3e3})}applyTechniqueAndContinue(){if(!this.activeDetection||!this.activeDetection.targetCell||!this.activeDetection.value)return;let{row:n,col:e}=this.activeDetection.targetCell,i=this.activeDetection.value;if(this.board[n][e]=i,this.notes[n][e]=[],this.techniqueCoachService.recordTechniqueUsage(this.activeDetection.technique,!0),this.eliminateNotesFromRelatedCells(n,e,i),this.highlightedCells=[],this.activeDetection=null,this.sudokuService.isSolved(this.board)){this.gameCompleted=!0,this.stopTimer(),this.coachMode=!1;return}this.currentTeachingIndex++,this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),500):this._snackBar.open("You've applied all available techniques! Try using Auto Notes again to find more.","Continue",{duration:6e3}).onAction().subscribe(()=>{this.autoFillAllNotes(),this.startTeachingMode()})}getSmartHint(){return W(this,null,function*(){if(this.selectedCell&&!this.coachMode){yield this.getHintForSelectedCell();return}if(this.singleCellHintRequested=!1,this.targetCellForHint=null,this.highlightedCells=[],this.hintsUsed>=this.maxHints){this._snackBar.open("No more hints available!","Close",{duration:3e3});return}let n=yield this.techniqueCoachService.getHint(this.board,this.notes);if(!n){this._snackBar.open("No applicable techniques found.","Close",{duration:2e3});return}this.activeDetection=n,n.targetCell&&(this.highlightedCells.push(n.targetCell),this.selectedCell=n.targetCell),n.relatedCells&&(this.highlightedCells=[...this.highlightedCells,...n.relatedCells]),this.coachMode?this.dialog.open(th,{data:{title:`Hint: ${n.technique}`,message:`<p>${n.detailExplanation||n.explanation}</p>`,technique:n.technique,position:n.targetCell,value:n.value},width:"400px"}).afterClosed().subscribe(i=>{i==="apply"?this.applyHint(n):(this.highlightedCells=[],this.activeDetection=null)}):this._snackBar.open(`${n.technique}: ${n.explanation}`,"Apply",{duration:5e3,panelClass:"technique-hint-snackbar"}).onAction().subscribe(()=>{this.applyHint(n)})})}getHintForSelectedCell(){return W(this,null,function*(){if(!this.selectedCell)return;this.singleCellHintRequested=!0,this.targetCellForHint=this.selectedCell;let{row:n,col:e}=this.selectedCell;if(this.hintsUsed>=this.maxHints){this._snackBar.open("No more hints available!","Close",{duration:3e3});return}if(this.board[n][e]!==0){this._snackBar.open("This cell is already filled.","Close",{duration:2e3});return}let i=yield this.techniqueCoachService.getHintForCell(this.board,this.notes,n,e);i?(this.activeDetection=i,this.highlightedCells=[],i.relatedCells&&(this.highlightedCells=[...i.relatedCells]),this.dialog.open(th,{data:{title:`Hint for Selected Cell: ${i.technique}`,message:`<p>${i.detailExplanation||i.explanation}</p>`,technique:i.technique,position:{row:n,col:e},value:i.value,showRevealOption:!0},width:"400px"}).afterClosed().subscribe(o=>{o==="apply"?this.applyHint(i):o==="reveal"?this.revealCellValue(n,e):(this.highlightedCells=[],this.activeDetection=null)})):this.dialog.open(th,{data:{title:"No Technique Available",message:"<p>There are no applicable techniques for this cell at the moment. Would you like to reveal the value?</p>",position:{row:n,col:e},showRevealOption:!0},width:"400px"}).afterClosed().subscribe(o=>{o==="reveal"&&this.revealCellValue(n,e)})})}revealCellValue(n,e){if(this.board[n][e]!==0)return;let i=this.solution[n][e];this.board[n][e]=i,this.notes[n][e]=[],this.hintsUsed++,this.eliminateNotesFromRelatedCells(n,e,i),this.sudokuService.isSolved(this.board)&&(this.gameCompleted=!0,this.stopTimer())}applyHint(n){if(n.targetCell&&n.value){let{row:e,col:i}=n.targetCell;this.board[e][i]=n.value,this.notes[e][i]=[],this.hintsUsed++,this.techniqueCoachService.recordTechniqueUsage(n.technique,!0),this.eliminateNotesFromRelatedCells(e,i,n.value),this.highlightedCells=[],this.activeDetection=null,this.sudokuService.isSolved(this.board)&&(this.gameCompleted=!0,this.stopTimer())}}getHint(){this.getSmartHint()}backToMenu(){this.stopTimer(),this.router.navigate(["/menu"])}newGame(){this.startNewGame()}getSections(){let n=[];for(let e=0;e<3;e++)for(let i=0;i<3;i++){let r=[];for(let o=0;o<3;o++)for(let s=0;s<3;s++){let a=e*3+o,l=i*3+s;r.push({value:this.board[a][l],notes:this.notes[a][l],isOriginal:this.isOriginal(a,l),isSelected:this.isSelected(a,l),isSameNumber:this.isSameNumber(a,l),isHighlighted:this.isHighlighted(a,l),row:a,col:l})}n.push(r)}return n}formatTime(){let n=Math.floor(this.timer/60),e=this.timer%60;return`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}startTimer(){this.stopTimer(),this.timer=0,this.timerInterval=setInterval(()=>{this.timer++},1e3)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}initializeGame(n,e,i){this.board=JSON.parse(JSON.stringify(n)),this.solution=JSON.parse(JSON.stringify(e)),this.originalBoard=JSON.parse(JSON.stringify(n)),this.difficulty=i,this.loading=!1,this.startTimer()}resetGame(){this.board=Array(9).fill(null).map(()=>Array(9).fill(0)),this.notes=Array(9).fill(null).map(()=>Array(9).fill(null).map(()=>[])),this.selectedCell=null,this.loading=!0,this.timer=0,this.mistakes=0,this.gameCompleted=!1,this.notesMode=!1,this.hintsUsed=0}static \u0275fac=function(e){return new(e||t)(Ae(as),Ae(cg),Ae(lg),Ae(Ev),Ae(_S),Ae(sg))};static \u0275cmp=Ne({type:t,selectors:[["app-game"]],decls:32,vars:10,consts:[[1,"game-container"],[1,"game-header"],[1,"header-top"],["mat-icon-button","",1,"back-button",3,"click"],[1,"game-title"],["mat-icon-button","",1,"new-game-button",3,"click"],[1,"game-stats"],[1,"stat-item"],["class","loading-container",4,"ngIf"],["class","board-container",4,"ngIf"],["class","controls-panel",4,"ngIf"],["class","completion-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"board-container"],[1,"sudoku-board"],[1,"board-grid"],["class","board-section",4,"ngFor","ngForOf"],[1,"board-section"],[3,"value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted","cellClick",4,"ngFor","ngForOf"],[3,"cellClick","value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted"],[1,"controls-panel"],[1,"number-pad"],["mat-raised-button","","class","number-button",3,"notes-mode","click",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-raised-button","","color","primary","matTooltip","Toggle notes mode",1,"action-btn","notes-btn",3,"click"],["mat-raised-button","","matTooltip","Auto-fill possible numbers for all empty cells",1,"action-btn","auto-notes-btn",3,"click"],["mat-raised-button","","color","accent","matTooltip","Toggle technique coach mode",1,"action-btn","coach-btn",3,"click"],["mat-raised-button","","matTooltip","Get a smart hint",1,"action-btn","hint-btn",3,"click","disabled"],["mat-raised-button","","color","warn","matTooltip","Clear selected cell",1,"action-btn","clear-btn",3,"click","disabled"],["mat-raised-button","",1,"number-button",3,"click"],[1,"completion-overlay"],[1,"completion-modal"],[1,"completion-content"],[1,"success-icon"],[1,"completion-stats"],[1,"stat"],[1,"label"],[1,"value"],[1,"completion-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"]],template:function(e,i){e&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),_e("click",function(){return i.backToMenu()}),M(4,"mat-icon"),X(5,"arrow_back"),O()(),M(6,"h2",4),X(7),Tx(8,"titlecase"),O(),M(9,"button",5),_e("click",function(){return i.newGame()}),M(10,"mat-icon"),X(11,"refresh"),O()()(),M(12,"div",6)(13,"div",7)(14,"mat-icon"),X(15,"timer"),O(),M(16,"span"),X(17),O()(),M(18,"div",7)(19,"mat-icon"),X(20,"error_outline"),O(),M(21,"span"),X(22),O()(),M(23,"div",7)(24,"mat-icon"),X(25,"lightbulb_outline"),O(),M(26,"span"),X(27),O()()()(),be(28,ixe,4,0,"div",8)(29,sxe,4,1,"div",9)(30,lxe,24,8,"div",10)(31,cxe,29,5,"div",11),O()),e&2&&(V(7),xt(Sx(8,8,i.difficulty)),V(10),xt(i.formatTime()),V(5),xn("",i.mistakes,"/3"),V(5),xt(i.maxHints-i.hintsUsed),V(),J("ngIf",i.loading),V(),J("ngIf",!i.loading),V(),J("ngIf",!i.loading),V(),J("ngIf",i.gameCompleted))},dependencies:[mi,Wr,Yn,Ex,fo,ds,Kp,Na,Aa,oF,rF,Mj,Nv,ag],styles:[".game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem;max-width:700px;margin:0 auto;height:calc(100vh - 2rem);box-sizing:border-box;gap:1rem}.game-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}.header-top[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:center}.game-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.back-button[_ngcontent-%COMP%], .new-game-button[_ngcontent-%COMP%]{color:#6b7280}.game-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-top:.5rem}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh}.loading-spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left:4px solid #3f51b5;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.board-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;padding:1rem 0}.sudoku-board[_ngcontent-%COMP%]{width:100%;max-width:500px;aspect-ratio:1}.board-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:4px;width:100%;height:100%;border:2px solid #333;background-color:#333;box-sizing:border-box}.board-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:1px;background-color:#ccc}.controls-panel[_ngcontent-%COMP%]{width:100%;max-width:500px}.number-pad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(9,1fr);gap:.25rem;margin-bottom:1rem}.number-button[_ngcontent-%COMP%]{min-width:unset;padding:0;aspect-ratio:1}.number-button[_ngcontent-%COMP%]:hover{background:#f3f4f6;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.number-button.notes-mode[_ngcontent-%COMP%]{background-color:#e3f2fd}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:1.2rem;height:1.2rem}.notes-btn.active[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.hint-btn[_ngcontent-%COMP%]{background:#fbbf24;color:#92400e}.hint-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f59e0b;color:#fff}.clear-btn[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.clear-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626}.auto-notes-btn[_ngcontent-%COMP%]{background:#8b5cf6;color:#fff}.auto-notes-btn[_ngcontent-%COMP%]:hover{background:#7c3aed}.completion-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000}.completion-modal[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:2rem;width:90%;max-width:400px;text-align:center;box-shadow:0 4px 20px #0003}.success-icon[_ngcontent-%COMP%]{font-size:4rem;height:4rem;width:4rem;color:#4caf50;margin-bottom:1rem}.completion-content[_ngcontent-%COMP%]{padding:2rem;text-align:center}.completion-stats[_ngcontent-%COMP%]{margin:1.5rem 0;text-align:left}.stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}.completion-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:1.5rem}@media (max-width: 768px){.game-container[_ngcontent-%COMP%]{padding:.5rem;height:calc(100vh - 1rem)}.number-pad[_ngcontent-%COMP%]{grid-template-columns:repeat(9,1fr)}.action-buttons[_ngcontent-%COMP%]{gap:.25rem}.action-btn[_ngcontent-%COMP%]{font-size:.75rem;padding:0 .5rem}}.dark-theme[_nghost-%COMP%]   .board-grid[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .board-grid[_ngcontent-%COMP%]{border-color:#555;background-color:#555}.dark-theme[_nghost-%COMP%]   .board-section[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .board-section[_ngcontent-%COMP%]{background-color:#444}.dark-theme[_nghost-%COMP%]   .completion-modal[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .completion-modal[_ngcontent-%COMP%]{background-color:#333;color:#fff}.dark-theme[_nghost-%COMP%]   .number-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .number-button[_ngcontent-%COMP%]{background-color:#424242;color:#fff}.dark-theme[_nghost-%COMP%]   .number-button.notes-mode[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .number-button.notes-mode[_ngcontent-%COMP%]{background-color:#263238}.dark-theme[_nghost-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{border-color:#ffffff1a;border-left-color:#7986cb}  .technique-hint-snackbar{background-color:#303f9f;color:#fff}.coach-btn.active[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}"]})};var t5=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||t)(Ae(hi),Ae(nt))};static \u0275dir=st({type:t})}return t})(),uxe=(()=>{class t extends t5{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})();static \u0275dir=st({type:t,features:[Mn]})}return t})(),pg=new he("");var dxe={provide:pg,useExisting:ns(()=>FS),multi:!0};function pxe(){let t=ss()?ss().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hxe=new he(""),FS=(()=>{class t extends t5{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!pxe())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||t)(Ae(hi),Ae(nt),Ae(hxe,8))};static \u0275dir=st({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&_e("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[xi([dxe]),Mn]})}return t})();function xF(t){return t==null||vF(t)===0}function vF(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Pv=new he(""),_F=new he(""),mxe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,TS=class{static min(n){return fxe(n)}static max(n){return gxe(n)}static required(n){return yxe(n)}static requiredTrue(n){return bxe(n)}static email(n){return xxe(n)}static minLength(n){return vxe(n)}static maxLength(n){return _xe(n)}static pattern(n){return wxe(n)}static nullValidator(n){return n5()}static compose(n){return l5(n)}static composeAsync(n){return c5(n)}};function fxe(t){return n=>{if(n.value==null||t==null)return null;let e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}function gxe(t){return n=>{if(n.value==null||t==null)return null;let e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}function yxe(t){return xF(t.value)?{required:!0}:null}function bxe(t){return t.value===!0?null:{required:!0}}function xxe(t){return xF(t.value)||mxe.test(t.value)?null:{email:!0}}function vxe(t){return n=>{let e=n.value?.length??vF(n.value);return e===null||e===0?null:e<t?{minlength:{requiredLength:t,actualLength:e}}:null}}function _xe(t){return n=>{let e=n.value?.length??vF(n.value);return e!==null&&e>t?{maxlength:{requiredLength:t,actualLength:e}}:null}}function wxe(t){if(!t)return n5;let n,e;return typeof t=="string"?(e="",t.charAt(0)!=="^"&&(e+="^"),e+=t,t.charAt(t.length-1)!=="$"&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(xF(i.value))return null;let r=i.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function n5(t){return null}function i5(t){return t!=null}function r5(t){return Ip(t)?Vn(t):t}function o5(t){let n={};return t.forEach(e=>{n=e!=null?re(re({},n),e):n}),Object.keys(n).length===0?null:n}function s5(t,n){return n.map(e=>e(t))}function Cxe(t){return!t.validate}function a5(t){return t.map(n=>Cxe(n)?n:e=>n.validate(e))}function l5(t){if(!t)return null;let n=t.filter(i5);return n.length==0?null:function(e){return o5(s5(e,n))}}function wF(t){return t!=null?l5(a5(t)):null}function c5(t){if(!t)return null;let n=t.filter(i5);return n.length==0?null:function(e){let i=s5(e,n).map(r5);return tx(i).pipe(ot(o5))}}function CF(t){return t!=null?c5(a5(t)):null}function Xj(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function u5(t){return t._rawValidators}function d5(t){return t._rawAsyncValidators}function yF(t){return t?Array.isArray(t)?t:[t]:[]}function SS(t,n){return Array.isArray(t)?t.includes(n):t===n}function Kj(t,n){let e=yF(n);return yF(t).forEach(r=>{SS(e,r)||e.push(r)}),e}function Yj(t,n){return yF(n).filter(e=>!SS(t,e))}var kS=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=wF(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=CF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},nh=class extends kS{name;get formDirective(){return null}get path(){return null}},ih=class extends kS{_parent=null;name=null;valueAccessor=null},bF=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Txe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},int=At(re({},Txe),{"[class.ng-submitted]":"isSubmitted"}),LS=(()=>{class t extends bF{constructor(e){super(e)}static \u0275fac=function(i){return new(i||t)(Ae(ih,2))};static \u0275dir=st({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&rt("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Mn]})}return t})();var Mv="VALID",CS="INVALID",ug="PENDING",Ov="DISABLED",Lu=class{},ES=class extends Lu{value;source;constructor(n,e){super(),this.value=n,this.source=e}},Fv=class extends Lu{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},Lv=class extends Lu{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},dg=class extends Lu{status;source;constructor(n,e){super(),this.status=n,this.source=e}},IS=class extends Lu{source;constructor(n){super(),this.source=n}},DS=class extends Lu{source;constructor(n){super(),this.source=n}};function p5(t){return(PS(t)?t.validators:t)||null}function Sxe(t){return Array.isArray(t)?wF(t):t||null}function h5(t,n){return(PS(n)?n.asyncValidators:t)||null}function kxe(t){return Array.isArray(t)?CF(t):t||null}function PS(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Exe(t,n,e){let i=t.controls;if(!(n?Object.keys(i):i).length)throw new ye(1e3,"");if(!i[e])throw new ye(1001,"")}function Ixe(t,n,e){t._forEachChild((i,r)=>{if(e[r]===void 0)throw new ye(1002,"")})}var AS=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return os(this.statusReactive)}set status(n){os(()=>this.statusReactive.set(n))}_status=Ap(()=>this.statusReactive());statusReactive=Ca(void 0);get valid(){return this.status===Mv}get invalid(){return this.status===CS}get pending(){return this.status==ug}get disabled(){return this.status===Ov}get enabled(){return this.status!==Ov}errors;get pristine(){return os(this.pristineReactive)}set pristine(n){os(()=>this.pristineReactive.set(n))}_pristine=Ap(()=>this.pristineReactive());pristineReactive=Ca(!0);get dirty(){return!this.pristine}get touched(){return os(this.touchedReactive)}set touched(n){os(()=>this.touchedReactive.set(n))}_touched=Ap(()=>this.touchedReactive());touchedReactive=Ca(!1);get untouched(){return!this.touched}_events=new Oe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Kj(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Kj(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Yj(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Yj(n,this._rawAsyncValidators))}hasValidator(n){return SS(this._rawValidators,n)}hasAsyncValidator(n){return SS(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(At(re({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new Lv(!0,i))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),e&&n.emitEvent!==!1&&this._events.next(new Lv(!1,i))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(At(re({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new Fv(!1,i))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),e&&n.emitEvent!==!1&&this._events.next(new Fv(!0,i))}markAsPending(n={}){this.status=ug;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new dg(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(At(re({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Ov,this.errors=null,this._forEachChild(r=>{r.disable(At(re({},n),{onlySelf:!0}))}),this._updateValue();let i=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new ES(this.value,i)),this._events.next(new dg(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(At(re({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Mv,this._forEachChild(i=>{i.enable(At(re({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(At(re({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mv||this.status===ug)&&this._runAsyncValidator(i,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new ES(this.value,e)),this._events.next(new dg(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(At(re({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ov:Mv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=ug,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=r5(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new dg(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,i)}_initObservables(){this.valueChanges=new ke,this.statusChanges=new ke}_calculateStatus(){return this._allControlsDisabled()?Ov:this.errors?CS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ug)?ug:this._anyControlsHaveStatus(CS)?CS:Mv}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),r&&this._events.next(new Fv(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new Lv(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){PS(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=Sxe(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=kxe(this._rawAsyncValidators)}},NS=class extends AS{constructor(n,e,i){super(p5(e),h5(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){Ixe(this,!0,n),Object.keys(n).forEach(i=>{Exe(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(i=>{let r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var $S=new he("",{providedIn:"root",factory:()=>TF}),TF="always";function Dxe(t,n){return[...n.path,t]}function MS(t,n,e=TF){SF(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),Nxe(t,n),Oxe(t,n),Mxe(t,n),Axe(t,n)}function Qj(t,n,e=!0){let i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),RS(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function OS(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Axe(t,n){if(n.valueAccessor.setDisabledState){let e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function SF(t,n){let e=u5(t);n.validator!==null?t.setValidators(Xj(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let i=d5(t);n.asyncValidator!==null?t.setAsyncValidators(Xj(i,n.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();OS(n._rawValidators,r),OS(n._rawAsyncValidators,r)}function RS(t,n){let e=!1;if(t!==null){if(n.validator!==null){let r=u5(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==n.validator);o.length!==r.length&&(e=!0,t.setValidators(o))}}if(n.asyncValidator!==null){let r=d5(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==n.asyncValidator);o.length!==r.length&&(e=!0,t.setAsyncValidators(o))}}}let i=()=>{};return OS(n._rawValidators,i),OS(n._rawAsyncValidators,i),e}function Nxe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&m5(t,n)})}function Mxe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&m5(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function m5(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Oxe(t,n){let e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function f5(t,n){t==null,SF(t,n)}function Rxe(t,n){return RS(t,n)}function Fxe(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function Lxe(t){return Object.getPrototypeOf(t.constructor)===uxe}function g5(t,n){t._syncPendingControls(),n.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Pxe(t,n){if(!n)return null;Array.isArray(n);let e,i,r;return n.forEach(o=>{o.constructor===FS?e=o:Lxe(o)?i=o:r=o}),r||i||e||null}function $xe(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}var Vxe={provide:nh,useExisting:ns(()=>kF)},Rv=Promise.resolve(),kF=(()=>{class t extends nh{callSetDisabledState;get submitted(){return os(this.submittedReactive)}_submitted=Ap(()=>this.submittedReactive());submittedReactive=Ca(!1);_directives=new Set;form;ngSubmit=new ke;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new NS({},wF(e),CF(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Rv.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),MS(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Rv.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Rv.then(()=>{let i=this._findContainer(e.path),r=new NS({});f5(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Rv.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Rv.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),g5(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new IS(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new DS(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||t)(Ae(Pv,10),Ae(_F,10),Ae($S,8))};static \u0275dir=st({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&_e("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xi([Vxe]),Mn]})}return t})();function Zj(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function Jj(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var y5=class extends AS{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,i){super(p5(e),h5(i,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),PS(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Jj(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Zj(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Zj(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Jj(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var Bxe=t=>t instanceof y5;var zxe={provide:ih,useExisting:ns(()=>$v)},e5=Promise.resolve(),$v=(()=>{class t extends ih{_changeDetectorRef;callSetDisabledState;control=new y5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ke;constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Pxe(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Fxe(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){MS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){e5.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Rt(i);e5.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Dxe(e,this._parent):[e]}static \u0275fac=function(i){return new(i||t)(Ae(nh,9),Ae(Pv,10),Ae(_F,10),Ae(pg,10),Ae(mn,8),Ae($S,8))};static \u0275dir=st({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[xi([zxe]),Mn,Jt]})}return t})();var Gxe={provide:nh,useExisting:ns(()=>EF)},EF=(()=>{class t extends nh{callSetDisabledState;get submitted(){return os(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Ap(()=>this._submittedReactive());_submittedReactive=Ca(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new ke;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(RS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return MS(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Qj(e.control||null,e,!1),$xe(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),g5(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new IS(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new DS(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Qj(i||null,e),Bxe(r)&&(MS(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);f5(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&Rxe(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){SF(this.form,this),this._oldForm&&RS(this._oldForm,this)}static \u0275fac=function(i){return new(i||t)(Ae(Pv,10),Ae(_F,10),Ae($S,8))};static \u0275dir=st({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&_e("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[xi([Gxe]),Mn,Jt]})}return t})();var Uxe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({})}return t})();var VS=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:$S,useValue:e.callSetDisabledState??TF}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[Uxe]})}return t})();var Hxe=["mat-internal-form-field",""],Wxe=["*"],x5=(()=>{class t{labelPosition;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){i&2&&rt("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:Hxe,ngContentSelectors:Wxe,decls:1,vars:0,template:function(i,r){i&1&&(Kn(),bn(0))},styles:[`.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
`],encapsulation:2,changeDetection:0})}return t})();var jxe=["switch"],qxe=["*"];function Xxe(t,n){t&1&&(M(0,"span",10),Ze(),M(1,"svg",12),Ee(2,"path",13),O(),M(3,"svg",14),Ee(4,"path",15),O()())}var Kxe=new he("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),Yxe={provide:pg,useExisting:ns(()=>hg),multi:!0},BS=class{source;checked;constructor(n,e){this.source=n,this.checked=e}},hg=(()=>{class t{_elementRef=E(nt);_focusMonitor=E(Nl);_changeDetectorRef=E(mn);defaults=E(Kxe);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new BS(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new ke;toggleChange=new ke;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){E(Xi).load(Mu);let e=E(new xu("tabindex"),{optional:!0}),i=this.defaults,r=E(En,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=i.color||"accent",this._noopAnimations=r==="NoopAnimations",this.id=this._uniqueId=E(wr).getId("mat-mdc-slide-toggle-"),this.hideIcon=i.hideIcon??!1,this.disabledInteractive=i.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new BS(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(i&1&&an(jxe,5),i&2){let o;Gt(o=Ut())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){i&2&&(Tl("id",r.id),$e("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Hr(r.color?"mat-"+r.color:""),rt("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",Rt],color:"color",disabled:[2,"disabled","disabled",Rt],disableRipple:[2,"disableRipple","disableRipple",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ji(e)],checked:[2,"checked","checked",Rt],hideIcon:[2,"hideIcon","hideIcon",Rt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Rt]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[xi([Yxe,{provide:Pv,useExisting:t,multi:!0}]),Jt],ngContentSelectors:qxe,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(i&1){let o=qt();Kn(),M(0,"div",1)(1,"button",2,0),_e("click",function(){return Le(o),Pe(r._handleClick())}),Ee(3,"span",3),M(4,"span",4)(5,"span",5)(6,"span",6),Ee(7,"span",7),O(),M(8,"span",8),Ee(9,"span",9),O(),be(10,Xxe,5,0,"span",10),O()()(),M(11,"label",11),_e("click",function(a){return Le(o),Pe(a.stopPropagation())}),bn(12),O()()}if(i&2){let o=rs(2);J("labelPosition",r.labelPosition),V(),rt("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),J("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),$e("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),V(8),J("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),V(),Li(r.hideIcon?-1:10),V(),J("for",r.buttonId),$e("id",r._labelId)}},dependencies:[Xp,x5],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}
`],encapsulation:2,changeDetection:0})}return t})();var zS=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[hg,jt,jt]})}return t})();var _5=(()=>{class t{_animationMode=E(En,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){i&2&&rt("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return t})();var Qxe=["text"],Zxe=[[["mat-icon"]],"*"],Jxe=["mat-icon","*"];function eve(t,n){if(t&1&&Ee(0,"mat-pseudo-checkbox",1),t&2){let e=ee();J("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function tve(t,n){if(t&1&&Ee(0,"mat-pseudo-checkbox",3),t&2){let e=ee();J("disabled",e.disabled)}}function nve(t,n){if(t&1&&(M(0,"span",4),X(1),O()),t&2){let e=ee();V(),xn("(",e.group.label,")")}}var DF=new he("MAT_OPTION_PARENT_COMPONENT"),AF=new he("MatOptgroup");var IF=class{source;isUserInput;constructor(n,e=!1){this.source=n,this.isUserInput=e}},rh=(()=>{class t{_element=E(nt);_changeDetectorRef=E(mn);_parent=E(DF,{optional:!0});group=E(AF,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=E(wr).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new ke;_text;_stateChanges=new Oe;constructor(){let e=E(Xi);e.load(Mu),e.load(Uf),this._signalDisableRipple=!!this._parent&&gf(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Cr(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new IF(this,e))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-option"]],viewQuery:function(i,r){if(i&1&&an(Qxe,7),i&2){let o;Gt(o=Ut())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){i&1&&_e("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),i&2&&(Tl("id",r.id),$e("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),rt("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Rt]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:Jxe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){i&1&&(Kn(Zxe),be(0,eve,1,2,"mat-pseudo-checkbox",1),bn(1),M(2,"span",2,0),bn(4,1),O(),be(5,tve,1,1,"mat-pseudo-checkbox",3)(6,nve,2,1,"span",4),Ee(7,"div",5)),i&2&&(Li(r.multiple?0:-1),V(5),Li(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),V(),Li(r.group&&r.group._inert?6:-1),V(),J("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[_5,Xp],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();function w5(t,n,e){if(e.length){let i=n.toArray(),r=e.toArray(),o=0;for(let s=0;s<t+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}function C5(t,n,e,i){return t<e?t:t+n>e+i?Math.max(0,t-i+n):e}var T5=(()=>{class t{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t})}return t})();var S5=new he("MatFormField");var Vv=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Oe;constructor(n=!1,e,i=!0,r){this._multiple=n,this._emitChanges=i,this.compareWith=r,e&&e.length&&(n?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);let e=this.selected,i=new Set(n.map(o=>this._getConcreteValue(o)));n.forEach(o=>this._markSelected(o)),e.filter(o=>!i.has(this._getConcreteValue(o,i))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();let e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){n.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(n,i))return i;return n}else return n}};var k5=(()=>{class t{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var HS=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(n,e,i,r,o){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o}updateErrorState(){let n=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,e)??!1;o!==n&&(this.errorState=o,this._stateChanges.next())}};var E5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt]})}return t})();var NF=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jf,jt,E5]})}return t})();var I5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt,YT,jt]})}return t})();var ive=["trigger"],rve=["panel"],ove=[[["mat-select-trigger"]],"*"],sve=["mat-select-trigger","*"];function ave(t,n){if(t&1&&(M(0,"span",4),X(1),O()),t&2){let e=ee();V(),xt(e.placeholder)}}function lve(t,n){t&1&&bn(0)}function cve(t,n){if(t&1&&(M(0,"span",11),X(1),O()),t&2){let e=ee(2);V(),xt(e.triggerValue)}}function uve(t,n){if(t&1&&(M(0,"span",5),be(1,lve,1,0)(2,cve,2,1,"span",11),O()),t&2){let e=ee();V(),Li(e.customTrigger?1:2)}}function dve(t,n){if(t&1){let e=qt();M(0,"div",12,1),_e("keydown",function(r){Le(e);let o=ee();return Pe(o._handleKeydown(r))}),bn(2,1),O()}if(t&2){let e=ee();PC("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),rt("mat-select-panel-animations-enabled",!e._animationsDisabled),J("ngClass",e.panelClass),$e("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var MF=new he("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=E(vi);return()=>t.scrollStrategies.reposition()}});function D5(t){return()=>t.scrollStrategies.reposition()}var A5=new he("MAT_SELECT_CONFIG"),N5={provide:MF,deps:[vi],useFactory:D5},M5=new he("MatSelectTrigger"),WS=class{source;value;constructor(n,e){this.source=n,this.value=e}},Bv=(()=>{class t{_viewportRuler=E(ng);_changeDetectorRef=E(mn);_elementRef=E(nt);_dir=E(Kr,{optional:!0});_idGenerator=E(wr);_renderer=E(hi);_parentFormField=E(S5,{optional:!0});ngControl=E(ih,{self:!0,optional:!0});_liveAnnouncer=E(yv);_defaultOptions=E(A5,{optional:!0});_animationsDisabled=E(En,{optional:!0})==="NoopAnimations";_initialized=new Oe;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let i=this.options.toArray()[e];if(i){let r=this.panel.nativeElement,o=w5(e,this.options,this.optionGroups),s=i._getHostElement();e===0&&o===1?r.scrollTop=0:r.scrollTop=C5(s.offsetTop,s.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new WS(this,e)}_scrollStrategyFactory=E(MF);_panelOpen=!1;_compareWith=(e,i)=>e===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Oe;_errorStateTracker;stateChanges=new Oe;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(TS.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=ha(()=>{let e=this.options;return e?e.changes.pipe(Ro(e),nr(()=>dl(...e.map(i=>i.onSelectionChange)))):this._initialized.pipe(nr(()=>this.optionSelectionChanges))});openedChange=new ke;_openedStream=this.openedChange.pipe(Sn(e=>e),ot(()=>{}));_closedStream=this.openedChange.pipe(Sn(e=>!e),ot(()=>{}));selectionChange=new ke;valueChange=new ke;constructor(){let e=E(k5),i=E(kF,{optional:!0}),r=E(EF,{optional:!0}),o=E(new xu("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new HS(e,this.ngControl,r,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Vv(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(Bn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Bn(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Ro(null),Bn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(Xn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let i=`${this.id}-panel`;this._trackedModal&&nS(this._trackedModal,"aria-owns",i),HR(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;nS(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel){this._detachOverlay();return}this._cleanupDetach?.(),this._cleanupDetach=()=>{i(),clearTimeout(r),this._cleanupDetach=void 0};let e=this.panel.nativeElement,i=this._renderer.listen(e,"animationend",o=>{o.animationName==="_mat-select-exit"&&(this._cleanupDetach?.(),this._detachOverlay())}),r=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);e.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let i=e.keyCode,r=i===40||i===38||i===37||i===39,o=i===13||i===32,s=this._keyManager;if(!s.isTyping()&&o&&!Cr(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(e);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){let i=this._keyManager,r=e.keyCode,o=r===40||r===38,s=i.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(!s&&(r===13||r===32)&&i.activeItem&&!Cr(e))e.preventDefault(),i.activeItem._selectViaInteraction();else if(!s&&this._multiple&&r===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=i.activeItemIndex;i.onKeydown(e),this._multiple&&o&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}}_handleOverlayKeydown(e){e.keyCode===27&&!Cr(e)&&(e.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return(r.value!=null||this.canSelectNullableOptions)&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof rg?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new xv(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=dl(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Bn(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),dl(...this.options.map(i=>i._stateChanges)).pipe(Bn(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){let r=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i;this.multiple?i=this.selected.map(r=>r.value):i=this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,i=e?e+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||"";return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e||(e=this._valueId),e}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-select"]],contentQueries:function(i,r,o){if(i&1&&(Vs(o,M5,5),Vs(o,rh,5),Vs(o,AF,5)),i&2){let s;Gt(s=Ut())&&(r.customTrigger=s.first),Gt(s=Ut())&&(r.options=s),Gt(s=Ut())&&(r.optionGroups=s)}},viewQuery:function(i,r){if(i&1&&(an(ive,5),an(rve,5),an(xS,5)),i&2){let o;Gt(o=Ut())&&(r.trigger=o.first),Gt(o=Ut())&&(r.panel=o.first),Gt(o=Ut())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,r){i&1&&_e("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),i&2&&($e("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),rt("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Rt],disableRipple:[2,"disableRipple","disableRipple",Rt],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ji(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Rt],placeholder:"placeholder",required:[2,"required","required",Rt],multiple:[2,"multiple","multiple",Rt],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Rt],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",ji],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",Rt]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[xi([{provide:T5,useExisting:t},{provide:DF,useExisting:t}]),Jt],ngContentSelectors:sve,decls:11,vars:9,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"detach","backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","cdkConnectedOverlayFlexibleDimensions"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,r){if(i&1){let o=qt();Kn(ove),M(0,"div",2,0),_e("click",function(){return Le(o),Pe(r.open())}),M(3,"div",3),be(4,ave,2,1,"span",4)(5,uve,3,1,"span",5),O(),M(6,"div",6)(7,"div",7),Ze(),M(8,"svg",8),Ee(9,"path",9),O()()()(),be(10,dve,3,10,"ng-template",10),_e("detach",function(){return Le(o),Pe(r.close())})("backdropClick",function(){return Le(o),Pe(r.close())})("overlayKeydown",function(a){return Le(o),Pe(r._handleOverlayKeydown(a))})}if(i&2){let o=rs(1);V(3),$e("id",r._valueId),V(),Li(r.empty?4:5),V(6),J("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)("cdkConnectedOverlayFlexibleDimensions",!0)}},dependencies:[rg,xS,Np],styles:[`@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}
`],encapsulation:2,changeDetection:0})}return t})();var zv=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({providers:[N5],imports:[Ws,NF,jt,Yp,I5,NF,jt]})}return t})();var mg=class t{isDarkModeSubject=new Jn(!1);isDarkMode$=this.isDarkModeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("sudoku-theme")==="dark";this.setTheme(e)}setTheme(n){this.isDarkModeSubject.next(n),localStorage.setItem("sudoku-theme",n?"dark":"light"),this.applyTheme(n)}toggleTheme(){let n=this.isDarkModeSubject.value;this.setTheme(!n)}getCurrentTheme(){return this.isDarkModeSubject.value}applyTheme(n){let e=document.body;n?(e.classList.add("dark-theme"),e.classList.remove("light-theme")):(e.classList.add("light-theme"),e.classList.remove("dark-theme"))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};function pve(t,n){if(t&1){let e=qt();M(0,"div",3)(1,"span"),X(2,"Local Difficulty"),O(),M(3,"mat-select",8),or("ngModelChange",function(r){Le(e);let o=ee();return _r(o.localDifficulty,r)||(o.localDifficulty=r),Pe(r)}),M(4,"mat-option",14),X(5,"Easy"),O(),M(6,"mat-option",15),X(7,"Medium"),O(),M(8,"mat-option",16),X(9,"Hard"),O(),M(10,"mat-option",17),X(11,"Expert"),O()()()}if(t&2){let e=ee();V(3),rr("ngModel",e.localDifficulty)}}function hve(t,n){t&1&&(M(0,"div",18)(1,"p")(2,"mat-icon"),X(3,"info"),O(),X(4," Random puzzles from online API"),O()())}function mve(t,n){t&1&&(M(0,"div",19)(1,"p")(2,"mat-icon"),X(3,"offline_pin"),O(),X(4," Locally generated puzzles with selected difficulty"),O()())}var jS=class t{constructor(n,e){this.router=n;this.themeService=e}showMistakes=!0;showTimer=!0;highlightSameNumbers=!0;theme="light";useApi=!0;localDifficulty="medium";ngOnInit(){this.themeService.isDarkMode$.subscribe(e=>{this.theme=e?"dark":"light"});let n=localStorage.getItem("sudokuSettings");if(n){let e=JSON.parse(n);this.showMistakes=e.showMistakes??!0,this.showTimer=e.showTimer??!0,this.highlightSameNumbers=e.highlightSameNumbers??!0,this.useApi=e.useApi??!0,this.localDifficulty=e.localDifficulty??"medium"}}onThemeChange(){this.themeService.setTheme(this.theme==="dark")}onApiToggle(){this.saveSettings()}saveSettings(){let n={showMistakes:this.showMistakes,showTimer:this.showTimer,highlightSameNumbers:this.highlightSameNumbers,theme:this.theme,useApi:this.useApi,localDifficulty:this.localDifficulty};localStorage.setItem("sudokuSettings",JSON.stringify(n)),this.router.navigate(["/menu"])}cancel(){this.router.navigate(["/menu"])}static \u0275fac=function(e){return new(e||t)(Ae(as),Ae(mg))};static \u0275cmp=Ne({type:t,selectors:[["app-settings"]],decls:49,vars:8,consts:[[1,"settings-container"],[1,"settings-card"],[1,"settings-group"],[1,"setting-item"],[3,"ngModelChange","change","ngModel"],["class","setting-item",4,"ngIf"],["class","api-info",4,"ngIf"],["class","local-info",4,"ngIf"],[3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","light"],["value","dark"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],["value","easy"],["value","medium"],["value","hard"],["value","expert"],[1,"api-info"],[1,"local-info"]],template:function(e,i){e&1&&(M(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),X(4,"Game Settings"),O(),M(5,"mat-card-subtitle"),X(6,"Customize your Sudoku experience"),O()(),M(7,"mat-card-content")(8,"div",2)(9,"h3"),X(10,"Puzzle Source"),O(),M(11,"div",3)(12,"span"),X(13,"Use Online API"),O(),M(14,"mat-slide-toggle",4),or("ngModelChange",function(o){return _r(i.useApi,o)||(i.useApi=o),o}),_e("change",function(){return i.onApiToggle()}),O()(),be(15,pve,12,1,"div",5)(16,hve,5,0,"div",6)(17,mve,5,0,"div",7),O(),M(18,"div",2)(19,"h3"),X(20,"Game Options"),O(),M(21,"div",3)(22,"span"),X(23,"Show Mistakes Counter"),O(),M(24,"mat-slide-toggle",8),or("ngModelChange",function(o){return _r(i.showMistakes,o)||(i.showMistakes=o),o}),O()(),M(25,"div",3)(26,"span"),X(27,"Show Timer"),O(),M(28,"mat-slide-toggle",8),or("ngModelChange",function(o){return _r(i.showTimer,o)||(i.showTimer=o),o}),O()(),M(29,"div",3)(30,"span"),X(31,"Highlight Same Numbers"),O(),M(32,"mat-slide-toggle",8),or("ngModelChange",function(o){return _r(i.highlightSameNumbers,o)||(i.highlightSameNumbers=o),o}),O()()(),M(33,"div",2)(34,"h3"),X(35,"Appearance"),O(),M(36,"div",3)(37,"span"),X(38,"Theme"),O(),M(39,"mat-select",9),or("ngModelChange",function(o){return _r(i.theme,o)||(i.theme=o),o}),_e("selectionChange",function(){return i.onThemeChange()}),M(40,"mat-option",10),X(41,"Light"),O(),M(42,"mat-option",11),X(43,"Dark"),O()()()()(),M(44,"mat-card-actions")(45,"button",12),_e("click",function(){return i.saveSettings()}),X(46,"Save"),O(),M(47,"button",13),_e("click",function(){return i.cancel()}),X(48,"Cancel"),O()()()()),e&2&&(V(14),rr("ngModel",i.useApi),V(),J("ngIf",!i.useApi),V(),J("ngIf",i.useApi),V(),J("ngIf",!i.useApi),V(7),rr("ngModel",i.showMistakes),V(4),rr("ngModel",i.showTimer),V(4),rr("ngModel",i.highlightSameNumbers),V(7),rr("ngModel",i.theme))},dependencies:[mi,Yn,VS,LS,$v,fo,ds,Jf,Xf,aS,Yf,Zf,Qf,Kf,zS,hg,zv,Bv,rh,Na,Aa],styles:[".settings-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;max-width:600px;padding:1rem}.settings-card[_ngcontent-%COMP%]{width:100%;max-width:550px;padding:2.5rem;background:#fff;border-radius:20px;box-shadow:0 12px 40px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);transition:all .3s ease}body.dark-theme[_ngcontent-%COMP%]   .settings-card[_ngcontent-%COMP%]{background:#2d2d2d;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 40px #0006}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;justify-content:center;text-align:center}mat-card-title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin-bottom:.75rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#6b7280;font-weight:400;line-height:1.4}body.dark-theme[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#9ca3af}.settings-group[_ngcontent-%COMP%]{margin-bottom:2.5rem;padding:2rem;background:#f9fafb;border-radius:16px;border:1px solid #e5e7eb;transition:all .3s ease}body.dark-theme[_ngcontent-%COMP%]   .settings-group[_ngcontent-%COMP%]{background:#374151;border-color:#4b5563}.settings-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 2rem;font-size:1.4rem;font-weight:600;color:#374151;padding-bottom:1rem;border-bottom:2px solid #e5e7eb;text-align:center}body.dark-theme[_ngcontent-%COMP%]   .settings-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f3f4f6;border-bottom-color:#4b5563}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.75rem;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;transition:all .3s ease;min-height:64px}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{background:#2d2d2d;box-shadow:0 2px 8px #0003}.setting-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000004d}.setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:#374151;flex:1}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f3f4f6}mat-slide-toggle[_ngcontent-%COMP%]{margin-left:2rem;min-width:50px}mat-select[_ngcontent-%COMP%]{margin-left:2rem;min-width:140px;background:#f3f4f6;border-radius:8px;padding:.75rem 1rem;border:2px solid #e5e7eb;font-size:1rem;font-weight:500;transition:all .3s ease}mat-select[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}body.dark-theme[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{background:#4b5563;color:#f3f4f6;border-color:#6b7280}body.dark-theme[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]:hover{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa1a}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;padding:2rem 0 0;border-top:1px solid #e5e7eb;margin-top:2rem}body.dark-theme[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{border-top-color:#4b5563}button[_ngcontent-%COMP%]{padding:1rem 2.5rem;font-size:1.1rem;font-weight:600;border-radius:12px;transition:all .3s ease;min-width:120px;text-transform:none}button[color=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;transform:translateY(0);box-shadow:0 4px 15px #667eea4d}button[color=primary][_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #667eea66}button[_ngcontent-%COMP%]:not([color]){background:#f3f4f6;color:#6b7280;border:2px solid #d1d5db}button[_ngcontent-%COMP%]:not([color]):hover{background:#e5e7eb;border-color:#9ca3af;transform:translateY(-1px)}body.dark-theme[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]){background:#374151;color:#f3f4f6;border-color:#4b5563}body.dark-theme[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]):hover{background:#4b5563;border-color:#6b7280}.api-info[_ngcontent-%COMP%], .local-info[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border-radius:8px;background:#f0f9ff;border:1px solid #bae6fd}body.dark-theme[_ngcontent-%COMP%]   .api-info[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   .local-info[_ngcontent-%COMP%]{background:#1e3a8a;border-color:#3b82f6}.api-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .local-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#0369a1;display:flex;align-items:center;gap:.5rem}body.dark-theme[_ngcontent-%COMP%]   .api-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   .local-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#93c5fd}.api-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .local-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.1rem;width:1.1rem;height:1.1rem}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:.5rem}.settings-card[_ngcontent-%COMP%]{padding:2rem}.settings-group[_ngcontent-%COMP%]{padding:1.5rem}.setting-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1.25rem;text-align:left;padding:1.25rem}mat-slide-toggle[_ngcontent-%COMP%], mat-select[_ngcontent-%COMP%]{margin-left:0;align-self:stretch;width:100%}mat-select[_ngcontent-%COMP%]{min-width:unset}mat-card-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){mat-card-title[_ngcontent-%COMP%]{font-size:2rem}.settings-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}}"]})};function fve(t,n){t&1&&Ee(0,"div",2)}var gve=new he("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var L5=(()=>{class t{_elementRef=E(nt);_ngZone=E(Xe);_changeDetectorRef=E(mn);_renderer=E(hi);_cleanupTransitionEnd;_animationMode=E(En,{optional:!0});constructor(){let e=E(gve,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=F5(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=F5(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new ke;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,r){i&2&&($e("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),Hr("mat-"+r.color),rt("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",ji],bufferValue:[2,"bufferValue","bufferValue",ji],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,r){i&1&&(M(0,"div",0),Ee(1,"div",1),be(2,fve,1,0,"div",2),O(),M(3,"div",3),Ee(4,"span",4),O(),M(5,"div",5),Ee(6,"span",4),O()),i&2&&(V(),Fi("flex-basis",r._getBufferBarFlexBasis()),V(),Li(r.mode==="buffer"?2:-1),V(),Fi("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return t})();function F5(t,n=0,e=100){return Math.max(n,Math.min(e,t))}var P5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt]})}return t})();var bve=["knob"],xve=["valueIndicatorContainer"];function vve(t,n){if(t&1&&(M(0,"div",2,1)(2,"div",5)(3,"span",6),X(4),O()()()),t&2){let e=ee();V(4),xt(e.valueIndicatorText)}}var _ve=["trackActive"],wve=["*"];function Cve(t,n){if(t&1&&Ee(0,"div"),t&2){let e=n.$implicit,i=n.$index,r=ee(3);Hr(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Fi("transform",r._calcTickMarkTransform(i))}}function Tve(t,n){if(t&1&&UG(0,Cve,1,4,"div",8,GG),t&2){let e=ee(2);HG(e._tickMarks)}}function Sve(t,n){if(t&1&&(M(0,"div",6,1),be(2,Tve,2,0),O()),t&2){let e=ee();V(2),Li(e._cachedWidth?2:-1)}}function kve(t,n){if(t&1&&Ee(0,"mat-slider-visual-thumb",7),t&2){let e=ee();J("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var Ct=function(t){return t[t.START=1]="START",t[t.END=2]="END",t}(Ct||{}),fg=function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t}(fg||{}),OF=new he("_MatSlider"),$5=new he("_MatSliderThumb"),Eve=new he("_MatSliderRangeThumb"),V5=new he("_MatSliderVisualThumb");var Ive=(()=>{class t{_cdr=E(mn);_ngZone=E(Xe);_slider=E(OF);_renderer=E(hi);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=E(nt).nativeElement;_platform=E(ln);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let i=this._sliderInputEl,r=this._renderer;this._listenerCleanups=[r.listen(i,"pointermove",this._onPointerMove),r.listen(i,"pointerdown",this._onDragStart),r.listen(i,"pointerup",this._onDragEnd),r.listen(i,"pointerleave",this._onMouseLeave),r.listen(i,"focus",this._onFocus),r.listen(i,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let i=this._hostElement.getBoundingClientRect(),r=this._slider._isCursorOnSliderThumb(e,i);this._isHovered=r,r?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===Xr.FADING_IN||e?.state===Xr.VISIBLE}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===Ct.START?Ct.END:Ct.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!i)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===Ct.START?Ct.END:Ct.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,r){if(i&1&&(an(Xp,5),an(bve,5),an(xve,5)),i&2){let o;Gt(o=Ut())&&(r._ripple=o.first),Gt(o=Ut())&&(r._knob=o.first),Gt(o=Ut())&&(r._valueIndicatorContainer=o.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[xi([{provide:V5,useExisting:t}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,r){i&1&&(be(0,vve,5,1,"div",2),Ee(1,"div",3,0)(3,"div",4)),i&2&&(Li(r.discrete?0:-1),V(3),J("matRippleDisabled",!0))},dependencies:[Xp],styles:[`.mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}
`],encapsulation:2,changeDetection:0})}return t})(),B5=(()=>{class t{_ngZone=E(Xe);_cdr=E(mn);_elementRef=E(nt);_dir=E(Kr,{optional:!0});_globalRippleOptions=E(wv,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let i=this._getInput(Ct.END),r=this._getInput(Ct.START);i&&(i.disabled=this._disabled),r&&(r.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;showTickMarks=!1;get min(){return this._min}set min(e){let i=isNaN(e)?this._min:e;this._min!==i&&this._updateMin(i)}_min=0;color;disableRipple=!1;_updateMin(e){let i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let i=this._getInput(Ct.END),r=this._getInput(Ct.START),o=i.value,s=r.value;r.min=e.new,i.min=Math.max(e.new,r.value),r.max=Math.min(i.max,i.value),r._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,r):this._onTranslateXChangeBySideEffect(r,i),o!==i.value&&this._onValueChange(i),s!==r.value&&this._onValueChange(r)}_updateMinNonRange(e){let i=this._getInput(Ct.END);if(i){let r=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){let i=isNaN(e)?this._max:e;this._max!==i&&this._updateMax(i)}_max=100;_updateMax(e){let i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let i=this._getInput(Ct.END),r=this._getInput(Ct.START),o=i.value,s=r.value;i.max=e.new,r.max=Math.min(e.new,i.value),i.min=r.value,i._updateWidthInactive(),r._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(r,i):this._onTranslateXChangeBySideEffect(i,r),o!==i.value&&this._onValueChange(i),s!==r.value&&this._onValueChange(r)}_updateMaxNonRange(e){let i=this._getInput(Ct.END);if(i){let r=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){let i=isNaN(e)?this._step:e;this._step!==i&&this._updateStep(i)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(Ct.END),i=this._getInput(Ct.START),r=e.value,o=i.value,s=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<s?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),r!==e.value&&this._onValueChange(e),o!==i.value&&this._onValueChange(i)}_updateStepNonRange(){let e=this._getInput(Ct.END);if(e){let i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations;_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=E(ln);constructor(){E(Xi).load(Mu);let e=E(En,{optional:!0});this._noopAnimations=e==="NoopAnimations",this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(Ct.END),i=this._getInput(Ct.START);this._isRange=!!e&&!!i,this._cdr.detectChanges();let r=this._getThumb(Ct.END);this._rippleRadius=r._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(Ct.END),i=this._getInput(Ct.START);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(Ct.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(Ct.START)._isActive||this._getThumb(Ct.END)._isActive}_getValue(e=Ct.END){let i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!!(this._getInput(Ct.START)?._skipUIUpdate||this._getInput(Ct.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let i=this._trackActive.nativeElement.style;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,i.transform=e.transform}_calcTickMarkTransform(e){let i=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-i:i}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){this._hasViewInitialized&&(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(Ct.END),i=this._getInput(Ct.START);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{let e=this._getInput(Ct.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(Ct.START),i=this._getInput(Ct.END);return!e||!i?!1:i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let i=e.getSibling(),r=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),r._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let i=this._getThumb(e.thumbPosition===Ct.END?Ct.END:Ct.START);i._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(i):e._hostElement.setAttribute("aria-valuetext",i),this.discrete){e.thumbPosition===Ct.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;let r=this._getThumb(e.thumbPosition);i.length<3?r._hostElement.classList.add("mdc-slider__thumb--short-value"):r._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(Ct.END),i=this._getInput(Ct.START);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,r=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*r}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let i=e.getSibling();if(!i||!this._cachedWidth)return;let r=Math.abs(i.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-i.translateX}px`,transformOrigin:"right",transform:`scaleX(${r})`}):this._setTrackActiveStyles({left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${r})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let i=this._getValue(),r=Math.max(Math.round((i-this.min)/e),0)+1,o=Math.max(Math.round((this.max-i)/e),0)-1;this._isRtl?r++:o++,this._tickMarks=Array(r).fill(fg.ACTIVE).concat(Array(o).fill(fg.INACTIVE))}_updateTickMarkUIRange(e){let i=this._getValue(),r=this._getValue(Ct.START),o=Math.max(Math.round((r-this.min)/e),0),s=Math.max(Math.round((i-r)/e)+1,0),a=Math.max(Math.round((this.max-i)/e),0);this._tickMarks=Array(o).fill(fg.INACTIVE).concat(Array(s).fill(fg.ACTIVE),Array(a).fill(fg.INACTIVE))}_getInput(e){if(e===Ct.END&&this._input)return this._input;if(this._inputs?.length)return e===Ct.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===Ct.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,i){let r=i.width/2,o=i.x+r,s=i.y+r,a=e.clientX-o,l=e.clientY-s;return Math.pow(a,2)+Math.pow(l,2)<Math.pow(r,2)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Ne({type:t,selectors:[["mat-slider"]],contentQueries:function(i,r,o){if(i&1&&(Vs(o,$5,5),Vs(o,Eve,4)),i&2){let s;Gt(s=Ut())&&(r._input=s.first),Gt(s=Ut())&&(r._inputs=s)}},viewQuery:function(i,r){if(i&1&&(an(_ve,5),an(V5,5)),i&2){let o;Gt(o=Ut())&&(r._trackActive=o.first),Gt(o=Ut())&&(r._thumbs=o)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,r){i&2&&(Hr("mat-"+(r.color||"primary")),rt("mdc-slider--range",r._isRange)("mdc-slider--disabled",r.disabled)("mdc-slider--discrete",r.discrete)("mdc-slider--tick-marks",r.showTickMarks)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",Rt],discrete:[2,"discrete","discrete",Rt],showTickMarks:[2,"showTickMarks","showTickMarks",Rt],min:[2,"min","min",ji],color:"color",disableRipple:[2,"disableRipple","disableRipple",Rt],max:[2,"max","max",ji],step:[2,"step","step",ji],displayWith:"displayWith"},exportAs:["matSlider"],features:[xi([{provide:OF,useExisting:t}])],ngContentSelectors:wve,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,r){i&1&&(Kn(),bn(0),M(1,"div",2),Ee(2,"div",3),M(3,"div",4),Ee(4,"div",5,0),O(),be(6,Sve,3,1,"div",6),O(),be(7,kve,1,3,"mat-slider-visual-thumb",7),Ee(8,"mat-slider-visual-thumb",7)),i&2&&(V(6),Li(r.showTickMarks?6:-1),V(),Li(r._isRange?7:-1),V(),J("discrete",r.discrete)("thumbPosition",2)("valueIndicatorText",r.endValueIndicatorText))},dependencies:[Ive],styles:[`.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mdc-slider-active-track-height, 4px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mdc-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mdc-slider-inactive-track-height, 4px);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mdc-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-width:calc(var(--mdc-slider-handle-height, 20px)/2) calc(var(--mdc-slider-handle-width, 20px)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size, 2px);height:var(--mdc-slider-with-tick-marks-container-size, 2px);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();var Dve={provide:pg,useExisting:ns(()=>RF),multi:!0};var RF=(()=>{class t{_ngZone=E(Xe);_elementRef=E(nt);_cdr=E(mn);_slider=E(OF);_platform=E(ln);_listenerCleanups;get value(){return ji(this._hostElement.value,0)}set value(e){e=isNaN(e)?0:e;let i=e+"";if(!this._hasSetInitialValue){this._initialValue=i;return}this._isActive||this._setValue(i)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new ke;dragStart=new ke;dragEnd=new ke;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=Ct.END;get min(){return ji(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return ji(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return ji(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return Rt(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=Ca("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new Oe;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=E(hi);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let i=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=i,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let i=e.clientX-this._slider._cachedLeft,r=this._slider._cachedWidth,o=this._slider.step===0?1:this._slider.step,s=Math.floor((this._slider.max-this._slider.min)/o),a=this._slider._isRtl?1-i/r:i/r,c=Math.round(a*s)/s*(this._slider.max-this._slider.min)+this._slider.min,u=Math.round(c/o)*o,d=this.value;if(u===d){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=u,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let i=this._tickMarkOffset,r=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,r),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=st({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,r){i&1&&_e("change",function(){return r._onChange()})("input",function(){return r._onInput()})("blur",function(){return r._onBlur()})("focus",function(){return r._onFocus()}),i&2&&$e("aria-valuetext",r._valuetext())},inputs:{value:[2,"value","value",ji]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[xi([Dve,{provide:$5,useExisting:t}])]})}return t})();var z5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=Be({type:t});static \u0275inj=Ve({imports:[jt,jf]})}return t})();var qS="http://www.w3.org/1999/xhtml",FF={svg:"http://www.w3.org/2000/svg",xhtml:qS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ll(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),FF.hasOwnProperty(n)?{space:FF[n],local:t}:t}function Nve(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===qS&&n.documentElement.namespaceURI===qS?n.createElement(t):n.createElementNS(e,t)}}function Mve(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function XS(t){var n=Ll(t);return(n.local?Mve:Nve)(n)}function Ove(){}function oh(t){return t==null?Ove:function(){return this.querySelector(t)}}function G5(t){typeof t!="function"&&(t=oh(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,a=i[r]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new ai(i,this._parents)}function LF(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Rve(){return[]}function Gv(t){return t==null?Rve:function(){return this.querySelectorAll(t)}}function Fve(t){return function(){return LF(t.apply(this,arguments))}}function U5(t){typeof t=="function"?t=Fve(t):t=Gv(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var s=n[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),r.push(l));return new ai(i,r)}function Uv(t){return function(){return this.matches(t)}}function KS(t){return function(n){return n.matches(t)}}var Lve=Array.prototype.find;function Pve(t){return function(){return Lve.call(this.children,t)}}function $ve(){return this.firstElementChild}function H5(t){return this.select(t==null?$ve:Pve(typeof t=="function"?t:KS(t)))}var Vve=Array.prototype.filter;function Bve(){return Array.from(this.children)}function zve(t){return function(){return Vve.call(this.children,t)}}function W5(t){return this.selectAll(t==null?Bve:zve(typeof t=="function"?t:KS(t)))}function j5(t){typeof t!="function"&&(t=Uv(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new ai(i,this._parents)}function YS(t){return new Array(t.length)}function q5(){return new ai(this._enter||this._groups.map(YS),this._parents)}function Hv(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Hv.prototype={constructor:Hv,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function X5(t){return function(){return t}}function Gve(t,n,e,i,r,o){for(var s=0,a,l=n.length,c=o.length;s<c;++s)(a=n[s])?(a.__data__=o[s],i[s]=a):e[s]=new Hv(t,o[s]);for(;s<l;++s)(a=n[s])&&(r[s]=a)}function Uve(t,n,e,i,r,o,s){var a,l,c=new Map,u=n.length,d=o.length,p=new Array(u),h;for(a=0;a<u;++a)(l=n[a])&&(p[a]=h=s.call(l,l.__data__,a,n)+"",c.has(h)?r[a]=l:c.set(h,l));for(a=0;a<d;++a)h=s.call(t,o[a],a,o)+"",(l=c.get(h))?(i[a]=l,l.__data__=o[a],c.delete(h)):e[a]=new Hv(t,o[a]);for(a=0;a<u;++a)(l=n[a])&&c.get(p[a])===l&&(r[a]=l)}function Hve(t){return t.__data__}function K5(t,n){if(!arguments.length)return Array.from(this,Hve);var e=n?Uve:Gve,i=this._parents,r=this._groups;typeof t!="function"&&(t=X5(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],p=d.length,h=Wve(t.call(u,u&&u.__data__,c,i)),m=h.length,g=a[c]=new Array(m),f=s[c]=new Array(m),y=l[c]=new Array(p);e(u,d,g,f,y,h,n);for(var b=0,x=0,_,w;b<m;++b)if(_=g[b]){for(b>=x&&(x=b+1);!(w=f[x])&&++x<m;);_._next=w||null}}return s=new ai(s,i),s._enter=a,s._exit=l,s}function Wve(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Y5(){return new ai(this._exit||this._groups.map(YS),this._parents)}function Q5(t,n,e){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(r=n(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function Z5(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,r=e.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c=e[l],u=i[l],d=c.length,p=a[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(p[m]=h);for(;l<r;++l)a[l]=e[l];return new ai(a,this._parents)}function J5(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function eq(t){t||(t=jve);function n(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var s=e[o],a=s.length,l=r[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(n)}return new ai(r,this._parents).order()}function jve(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function tq(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function nq(){return Array.from(this)}function iq(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function rq(){let t=0;for(let n of this)++t;return t}function oq(){return!this.node()}function sq(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function qve(t){return function(){this.removeAttribute(t)}}function Xve(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Kve(t,n){return function(){this.setAttribute(t,n)}}function Yve(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Qve(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Zve(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function aq(t,n){var e=Ll(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?Xve:qve:typeof n=="function"?e.local?Zve:Qve:e.local?Yve:Kve)(e,n))}function QS(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Jve(t){return function(){this.style.removeProperty(t)}}function e0e(t,n,e){return function(){this.style.setProperty(t,n,e)}}function t0e(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function lq(t,n,e){return arguments.length>1?this.each((n==null?Jve:typeof n=="function"?t0e:e0e)(t,n,e??"")):Pu(this.node(),t)}function Pu(t,n){return t.style.getPropertyValue(n)||QS(t).getComputedStyle(t,null).getPropertyValue(n)}function n0e(t){return function(){delete this[t]}}function i0e(t,n){return function(){this[t]=n}}function r0e(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function cq(t,n){return arguments.length>1?this.each((n==null?n0e:typeof n=="function"?r0e:i0e)(t,n)):this.node()[t]}function uq(t){return t.trim().split(/^|\s+/)}function PF(t){return t.classList||new dq(t)}function dq(t){this._node=t,this._names=uq(t.getAttribute("class")||"")}dq.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function pq(t,n){for(var e=PF(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function hq(t,n){for(var e=PF(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function o0e(t){return function(){pq(this,t)}}function s0e(t){return function(){hq(this,t)}}function a0e(t,n){return function(){(n.apply(this,arguments)?pq:hq)(this,t)}}function mq(t,n){var e=uq(t+"");if(arguments.length<2){for(var i=PF(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?a0e:n?o0e:s0e)(e,n))}function l0e(){this.textContent=""}function c0e(t){return function(){this.textContent=t}}function u0e(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function fq(t){return arguments.length?this.each(t==null?l0e:(typeof t=="function"?u0e:c0e)(t)):this.node().textContent}function d0e(){this.innerHTML=""}function p0e(t){return function(){this.innerHTML=t}}function h0e(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function gq(t){return arguments.length?this.each(t==null?d0e:(typeof t=="function"?h0e:p0e)(t)):this.node().innerHTML}function m0e(){this.nextSibling&&this.parentNode.appendChild(this)}function yq(){return this.each(m0e)}function f0e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bq(){return this.each(f0e)}function xq(t){var n=typeof t=="function"?t:XS(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function g0e(){return null}function vq(t,n){var e=typeof t=="function"?t:XS(t),i=n==null?g0e:typeof n=="function"?n:oh(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function y0e(){var t=this.parentNode;t&&t.removeChild(this)}function _q(){return this.each(y0e)}function b0e(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function x0e(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function wq(t){return this.select(t?x0e:b0e)}function Cq(t){return arguments.length?this.property("__data__",t):this.node().__data__}function v0e(t){return function(n){t.call(this,n,this.__data__)}}function _0e(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function w0e(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,o;e<r;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function C0e(t,n,e){return function(){var i=this.__on,r,o=v0e(n);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=n;return}}this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function Tq(t,n,e){var i=_0e(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=n?C0e:w0e,r=0;r<o;++r)this.each(a(i[r],n,e));return this}function Sq(t,n,e){var i=QS(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function T0e(t,n){return function(){return Sq(this,t,n)}}function S0e(t,n){return function(){return Sq(this,t,n.apply(this,arguments))}}function kq(t,n){return this.each((typeof n=="function"?S0e:T0e)(t,n))}function*Eq(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var $F=[null];function ai(t,n){this._groups=t,this._parents=n}function Iq(){return new ai([[document.documentElement]],$F)}function k0e(){return this}ai.prototype=Iq.prototype={constructor:ai,select:G5,selectAll:U5,selectChild:H5,selectChildren:W5,filter:j5,data:K5,enter:q5,exit:Y5,join:Q5,merge:Z5,selection:k0e,order:J5,sort:eq,call:tq,nodes:nq,node:iq,size:rq,empty:oq,each:sq,attr:aq,style:lq,property:cq,classed:mq,text:fq,html:gq,raise:yq,lower:bq,append:xq,insert:vq,remove:_q,clone:wq,datum:Cq,on:Tq,dispatch:kq,[Symbol.iterator]:Eq};var Pl=Iq;function Tr(t){return typeof t=="string"?new ai([[document.querySelector(t)]],[document.documentElement]):new ai([[t]],$F)}function Dq(t){let n;for(;n=t.sourceEvent;)t=n;return t}function ZS(t,n){if(t=Dq(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}var E0e={value:()=>{}};function Nq(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new JS(e)}function JS(t){this._=t}function I0e(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}JS.prototype=Nq.prototype={constructor:JS,on:function(t,n){var e=this._,i=I0e(t+"",e),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=D0e(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<s;)if(r=(t=i[o]).type)e[r]=Aq(e[r],t.name,n);else if(n==null)for(r in e)e[r]=Aq(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new JS(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function D0e(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function Aq(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=E0e,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}var Wv=Nq;var e1={capture:!0,passive:!1};function t1(t){t.preventDefault(),t.stopImmediatePropagation()}function VF(t){var n=t.document.documentElement,e=Tr(t).on("dragstart.drag",t1,e1);"onselectstart"in n?e.on("selectstart.drag",t1,e1):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function BF(t,n){var e=t.document.documentElement,i=Tr(t).on("dragstart.drag",null);n&&(i.on("click.drag",t1,e1),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function n1(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function zF(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function Xv(){}var jv=.7,o1=1/jv,gg="\\s*([+-]?\\d+)\\s*",qv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A0e=/^#([0-9a-f]{3,8})$/,N0e=new RegExp(`^rgb\\(${gg},${gg},${gg}\\)$`),M0e=new RegExp(`^rgb\\(${Ra},${Ra},${Ra}\\)$`),O0e=new RegExp(`^rgba\\(${gg},${gg},${gg},${qv}\\)$`),R0e=new RegExp(`^rgba\\(${Ra},${Ra},${Ra},${qv}\\)$`),F0e=new RegExp(`^hsl\\(${qv},${Ra},${Ra}\\)$`),L0e=new RegExp(`^hsla\\(${qv},${Ra},${Ra},${qv}\\)$`),Mq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};n1(Xv,qs,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Oq,formatHex:Oq,formatHex8:P0e,formatHsl:$0e,formatRgb:Rq,toString:Rq});function Oq(){return this.rgb().formatHex()}function P0e(){return this.rgb().formatHex8()}function $0e(){return Bq(this).formatHsl()}function Rq(){return this.rgb().formatRgb()}function qs(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=A0e.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Fq(n):e===3?new yo(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?i1(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?i1(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=N0e.exec(t))?new yo(n[1],n[2],n[3],1):(n=M0e.exec(t))?new yo(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=O0e.exec(t))?i1(n[1],n[2],n[3],n[4]):(n=R0e.exec(t))?i1(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=F0e.exec(t))?$q(n[1],n[2]/100,n[3]/100,1):(n=L0e.exec(t))?$q(n[1],n[2]/100,n[3]/100,n[4]):Mq.hasOwnProperty(t)?Fq(Mq[t]):t==="transparent"?new yo(NaN,NaN,NaN,0):null}function Fq(t){return new yo(t>>16&255,t>>8&255,t&255,1)}function i1(t,n,e,i){return i<=0&&(t=n=e=NaN),new yo(t,n,e,i)}function V0e(t){return t instanceof Xv||(t=qs(t)),t?(t=t.rgb(),new yo(t.r,t.g,t.b,t.opacity)):new yo}function yg(t,n,e,i){return arguments.length===1?V0e(t):new yo(t,n,e,i??1)}function yo(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}n1(yo,yg,zF(Xv,{brighter(t){return t=t==null?o1:Math.pow(o1,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?jv:Math.pow(jv,t),new yo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yo(ah(this.r),ah(this.g),ah(this.b),s1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lq,formatHex:Lq,formatHex8:B0e,formatRgb:Pq,toString:Pq}));function Lq(){return`#${sh(this.r)}${sh(this.g)}${sh(this.b)}`}function B0e(){return`#${sh(this.r)}${sh(this.g)}${sh(this.b)}${sh((isNaN(this.opacity)?1:this.opacity)*255)}`}function Pq(){let t=s1(this.opacity);return`${t===1?"rgb(":"rgba("}${ah(this.r)}, ${ah(this.g)}, ${ah(this.b)}${t===1?")":`, ${t})`}`}function s1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ah(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function sh(t){return t=ah(t),(t<16?"0":"")+t.toString(16)}function $q(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new js(t,n,e,i)}function Bq(t){if(t instanceof js)return new js(t.h,t.s,t.l,t.opacity);if(t instanceof Xv||(t=qs(t)),!t)return new js;if(t instanceof js)return t;t=t.rgb();var n=t.r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),o=Math.max(n,e,i),s=NaN,a=o-r,l=(o+r)/2;return a?(n===o?s=(e-i)/a+(e<i)*6:e===o?s=(i-n)/a+2:s=(n-e)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new js(s,a,l,t.opacity)}function zq(t,n,e,i){return arguments.length===1?Bq(t):new js(t,n,e,i??1)}function js(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}n1(js,zq,zF(Xv,{brighter(t){return t=t==null?o1:Math.pow(o1,t),new js(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?jv:Math.pow(jv,t),new js(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new yo(GF(t>=240?t-240:t+120,r,i),GF(t,r,i),GF(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new js(Vq(this.h),r1(this.s),r1(this.l),s1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=s1(this.opacity);return`${t===1?"hsl(":"hsla("}${Vq(this.h)}, ${r1(this.s)*100}%, ${r1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vq(t){return t=(t||0)%360,t<0?t+360:t}function r1(t){return Math.max(0,Math.min(1,t||0))}function GF(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function UF(t,n,e,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*n+(4-6*o+3*s)*e+(1+3*t+3*o-3*s)*i+s*r)/6}function Gq(t){var n=t.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),r=t[i],o=t[i+1],s=i>0?t[i-1]:2*r-o,a=i<n-1?t[i+2]:2*o-r;return UF((e-i/n)*n,s,r,o,a)}}function Uq(t){var n=t.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),r=t[(i+n-1)%n],o=t[i%n],s=t[(i+1)%n],a=t[(i+2)%n];return UF((e-i/n)*n,r,o,s,a)}}var Kv=t=>()=>t;function z0e(t,n){return function(e){return t+e*n}}function G0e(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}function Hq(t){return(t=+t)==1?a1:function(n,e){return e-n?G0e(n,e,t):Kv(isNaN(n)?e:n)}}function a1(t,n){var e=n-t;return e?z0e(t,e):Kv(isNaN(t)?n:t)}var lh=function t(n){var e=Hq(n);function i(r,o){var s=e((r=yg(r)).r,(o=yg(o)).r),a=e(r.g,o.g),l=e(r.b,o.b),c=a1(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i}(1);function Wq(t){return function(n){var e=n.length,i=new Array(e),r=new Array(e),o=new Array(e),s,a;for(s=0;s<e;++s)a=yg(n[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=t(i),r=t(r),o=t(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var U0e=Wq(Gq),H0e=Wq(Uq);function jq(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,i=n.slice(),r;return function(o){for(r=0;r<e;++r)i[r]=t[r]*(1-o)+n[r]*o;return i}}function qq(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Xq(t,n){var e=n?n.length:0,i=t?Math.min(e,t.length):0,r=new Array(i),o=new Array(e),s;for(s=0;s<i;++s)r[s]=$l(t[s],n[s]);for(;s<e;++s)o[s]=n[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function Kq(t,n){var e=new Date;return t=+t,n=+n,function(i){return e.setTime(t*(1-i)+n*i),e}}function sr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Yq(t,n){var e={},i={},r;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in t?e[r]=$l(t[r],n[r]):i[r]=n[r];return function(o){for(r in e)i[r]=e[r](o);return i}}var WF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,HF=new RegExp(WF.source,"g");function W0e(t){return function(){return t}}function j0e(t){return function(n){return t(n)+""}}function Yv(t,n){var e=WF.lastIndex=HF.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(t=t+"",n=n+"";(i=WF.exec(t))&&(r=HF.exec(n));)(o=r.index)>e&&(o=n.slice(e,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:sr(i,r)})),e=HF.lastIndex;return e<n.length&&(o=n.slice(e),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?j0e(l[0].x):W0e(n):(n=l.length,function(c){for(var u=0,d;u<n;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function $l(t,n){var e=typeof n,i;return n==null||e==="boolean"?Kv(n):(e==="number"?sr:e==="string"?(i=qs(n))?(n=i,lh):Yv:n instanceof qs?lh:n instanceof Date?Kq:qq(n)?jq:Array.isArray(n)?Xq:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Yq:sr)(t,n)}function jF(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Qq=180/Math.PI,l1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qF(t,n,e,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s),(l=t*e+n*i)&&(e-=t*l,i-=n*l),(a=Math.sqrt(e*e+i*i))&&(e/=a,i/=a,l/=a),t*i<n*e&&(t=-t,n=-n,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*Qq,skewX:Math.atan(l)*Qq,scaleX:s,scaleY:a}}var c1;function Zq(t){let n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?l1:qF(n.a,n.b,n.c,n.d,n.e,n.f)}function Jq(t){return t==null?l1:(c1||(c1=document.createElementNS("http://www.w3.org/2000/svg","g")),c1.setAttribute("transform",t),(t=c1.transform.baseVal.consolidate())?(t=t.matrix,qF(t.a,t.b,t.c,t.d,t.e,t.f)):l1)}function e6(t,n,e,i){function r(c){return c.length?c.pop()+" ":""}function o(c,u,d,p,h,m){if(c!==d||u!==p){var g=h.push("translate(",null,n,null,e);m.push({i:g-4,x:sr(c,d)},{i:g-2,x:sr(u,p)})}else(d||p)&&h.push("translate("+d+n+p+e)}function s(c,u,d,p){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),p.push({i:d.push(r(d)+"rotate(",null,i)-2,x:sr(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}function a(c,u,d,p){c!==u?p.push({i:d.push(r(d)+"skewX(",null,i)-2,x:sr(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}function l(c,u,d,p,h,m){if(c!==d||u!==p){var g=h.push(r(h)+"scale(",null,",",null,")");m.push({i:g-4,x:sr(c,d)},{i:g-2,x:sr(u,p)})}else(d!==1||p!==1)&&h.push(r(h)+"scale("+d+","+p+")")}return function(c,u){var d=[],p=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,d,p),s(c.rotate,u.rotate,d,p),a(c.skewX,u.skewX,d,p),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,p),c=u=null,function(h){for(var m=-1,g=p.length,f;++m<g;)d[(f=p[m]).i]=f.x(h);return d.join("")}}}var XF=e6(Zq,"px, ","px)","deg)"),KF=e6(Jq,", ",")",")");var bg=0,Zv=0,Qv=0,n6=1e3,u1,Jv,d1=0,ch=0,p1=0,e0=typeof performance=="object"&&performance.now?performance:Date,i6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function n0(){return ch||(i6(q0e),ch=e0.now()+p1)}function q0e(){ch=0}function t0(){this._call=this._time=this._next=null}t0.prototype=h1.prototype={constructor:t0,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?n0():+e)+(n==null?0:+n),!this._next&&Jv!==this&&(Jv?Jv._next=this:u1=this,Jv=this),this._call=t,this._time=e,YF()},stop:function(){this._call&&(this._call=null,this._time=1/0,YF())}};function h1(t,n,e){var i=new t0;return i.restart(t,n,e),i}function r6(){n0(),++bg;for(var t=u1,n;t;)(n=ch-t._time)>=0&&t._call.call(void 0,n),t=t._next;--bg}function t6(){ch=(d1=e0.now())+p1,bg=Zv=0;try{r6()}finally{bg=0,K0e(),ch=0}}function X0e(){var t=e0.now(),n=t-d1;n>n6&&(p1-=n,d1=t)}function K0e(){for(var t,n=u1,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:u1=e);Jv=t,YF(i)}function YF(t){if(!bg){Zv&&(Zv=clearTimeout(Zv));var n=t-ch;n>24?(t<1/0&&(Zv=setTimeout(t6,t-e0.now()-p1)),Qv&&(Qv=clearInterval(Qv))):(Qv||(d1=e0.now(),Qv=setInterval(X0e,n6)),bg=1,i6(t6))}}function m1(t,n,e){var i=new t0;return n=n==null?0:+n,i.restart(r=>{i.stop(),t(r+n)},n,e),i}var Y0e=Wv("start","end","cancel","interrupt"),Q0e=[],a6=0,o6=1,g1=2,f1=3,s6=4,y1=5,i0=6;function $u(t,n,e,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(e in s)return;Z0e(t,e,{name:n,index:i,group:r,on:Y0e,tween:Q0e,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:a6})}function r0(t,n){var e=Pi(t,n);if(e.state>a6)throw new Error("too late; already scheduled");return e}function ar(t,n){var e=Pi(t,n);if(e.state>f1)throw new Error("too late; already running");return e}function Pi(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Z0e(t,n,e){var i=t.__transition,r;i[n]=e,e.timer=h1(o,0,e.time);function o(c){e.state=o6,e.timer.restart(s,e.delay,e.time),e.delay<=c&&s(c-e.delay)}function s(c){var u,d,p,h;if(e.state!==o6)return l();for(u in i)if(h=i[u],h.name===e.name){if(h.state===f1)return m1(s);h.state===s6?(h.state=i0,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[u]):+u<n&&(h.state=i0,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[u])}if(m1(function(){e.state===f1&&(e.state=s6,e.timer.restart(a,e.delay,e.time),a(c))}),e.state=g1,e.on.call("start",t,t.__data__,e.index,e.group),e.state===g1){for(e.state=f1,r=new Array(p=e.tween.length),u=0,d=-1;u<p;++u)(h=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(r[++d]=h);r.length=d+1}}function a(c){for(var u=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=y1,1),d=-1,p=r.length;++d<p;)r[d].call(t,u);e.state===y1&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=i0,e.timer.stop(),delete i[n];for(var c in i)return;delete t.__transition}}function xg(t,n){var e=t.__transition,i,r,o=!0,s;if(e){n=n==null?null:n+"";for(s in e){if((i=e[s]).name!==n){o=!1;continue}r=i.state>g1&&i.state<y1,i.state=i0,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete e[s]}o&&delete t.__transition}}function l6(t){return this.each(function(){xg(this,t)})}function J0e(t,n){var e,i;return function(){var r=ar(this,t),o=r.tween;if(o!==e){i=e=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===n){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function e_e(t,n,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=ar(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:n,value:e},l=0,c=r.length;l<c;++l)if(r[l].name===n){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function c6(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i=Pi(this.node(),e).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((n==null?J0e:e_e)(e,t,n))}function vg(t,n,e){var i=t._id;return t.each(function(){var r=ar(this,i);(r.value||(r.value={}))[n]=e.apply(this,arguments)}),function(r){return Pi(r,i).value[n]}}function b1(t,n){var e;return(typeof n=="number"?sr:n instanceof qs?lh:(e=qs(n))?(n=e,lh):Yv)(t,n)}function t_e(t){return function(){this.removeAttribute(t)}}function n_e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function i_e(t,n,e){var i,r=e+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=n(i=s,e)}}function r_e(t,n,e){var i,r=e+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=n(i=s,e)}}function o_e(t,n,e){var i,r,o;return function(){var s,a=e(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,a)))}}function s_e(t,n,e){var i,r,o;return function(){var s,a=e(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,a)))}}function u6(t,n){var e=Ll(t),i=e==="transform"?KF:b1;return this.attrTween(t,typeof n=="function"?(e.local?s_e:o_e)(e,i,vg(this,"attr."+t,n)):n==null?(e.local?n_e:t_e)(e):(e.local?r_e:i_e)(e,i,n))}function a_e(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function l_e(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function c_e(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&l_e(t,o)),e}return r._value=n,r}function u_e(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&a_e(t,o)),e}return r._value=n,r}function d6(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var i=Ll(t);return this.tween(e,(i.local?c_e:u_e)(i,n))}function d_e(t,n){return function(){r0(this,t).delay=+n.apply(this,arguments)}}function p_e(t,n){return n=+n,function(){r0(this,t).delay=n}}function p6(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?d_e:p_e)(n,t)):Pi(this.node(),n).delay}function h_e(t,n){return function(){ar(this,t).duration=+n.apply(this,arguments)}}function m_e(t,n){return n=+n,function(){ar(this,t).duration=n}}function h6(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?h_e:m_e)(n,t)):Pi(this.node(),n).duration}function f_e(t,n){if(typeof n!="function")throw new Error;return function(){ar(this,t).ease=n}}function m6(t){var n=this._id;return arguments.length?this.each(f_e(n,t)):Pi(this.node(),n).ease}function g_e(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;ar(this,t).ease=e}}function f6(t){if(typeof t!="function")throw new Error;return this.each(g_e(this._id,t))}function g6(t){typeof t!="function"&&(t=Uv(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Yr(i,this._parents,this._name,this._id)}function y6(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=n[a],c=e[a],u=l.length,d=s[a]=new Array(u),p,h=0;h<u;++h)(p=l[h]||c[h])&&(d[h]=p);for(;a<i;++a)s[a]=n[a];return new Yr(s,this._parents,this._name,this._id)}function y_e(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function b_e(t,n,e){var i,r,o=y_e(n)?r0:ar;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(n,e),s.on=r}}function b6(t,n){var e=this._id;return arguments.length<2?Pi(this.node(),e).on.on(t):this.each(b_e(e,t,n))}function x_e(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function x6(){return this.on("end.remove",x_e(this._id))}function v6(t){var n=this._name,e=this._id;typeof t!="function"&&(t=oh(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,c=o[s]=new Array(l),u,d,p=0;p<l;++p)(u=a[p])&&(d=t.call(u,u.__data__,p,a))&&("__data__"in u&&(d.__data__=u.__data__),c[p]=d,$u(c[p],n,e,p,c,Pi(u,e)));return new Yr(o,this._parents,n,e)}function _6(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Gv(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var p=t.call(u,u.__data__,d,l),h,m=Pi(u,e),g=0,f=p.length;g<f;++g)(h=p[g])&&$u(h,n,e,g,p,m);o.push(p),s.push(u)}return new Yr(o,s,n,e)}var v_e=Pl.prototype.constructor;function w6(){return new v_e(this._groups,this._parents)}function __e(t,n){var e,i,r;return function(){var o=Pu(this,t),s=(this.style.removeProperty(t),Pu(this,t));return o===s?null:o===e&&s===i?r:r=n(e=o,i=s)}}function C6(t){return function(){this.style.removeProperty(t)}}function w_e(t,n,e){var i,r=e+"",o;return function(){var s=Pu(this,t);return s===r?null:s===i?o:o=n(i=s,e)}}function C_e(t,n,e){var i,r,o;return function(){var s=Pu(this,t),a=e(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Pu(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,a))}}function T_e(t,n){var e,i,r,o="style."+n,s="end."+o,a;return function(){var l=ar(this,t),c=l.on,u=l.value[o]==null?a||(a=C6(n)):void 0;(c!==e||r!==u)&&(i=(e=c).copy()).on(s,r=u),l.on=i}}function T6(t,n,e){var i=(t+="")=="transform"?XF:b1;return n==null?this.styleTween(t,__e(t,i)).on("end.style."+t,C6(t)):typeof n=="function"?this.styleTween(t,C_e(t,i,vg(this,"style."+t,n))).each(T_e(this._id,t)):this.styleTween(t,w_e(t,i,n),e).on("end.style."+t,null)}function S_e(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function k_e(t,n,e){var i,r;function o(){var s=n.apply(this,arguments);return s!==r&&(i=(r=s)&&S_e(t,s,e)),i}return o._value=n,o}function S6(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,k_e(t,n,e??""))}function E_e(t){return function(){this.textContent=t}}function I_e(t){return function(){var n=t(this);this.textContent=n??""}}function k6(t){return this.tween("text",typeof t=="function"?I_e(vg(this,"text",t)):E_e(t==null?"":t+""))}function D_e(t){return function(n){this.textContent=t.call(this,n)}}function A_e(t){var n,e;function i(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&D_e(r)),n}return i._value=t,i}function E6(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,A_e(t))}function I6(){for(var t=this._name,n=this._id,e=x1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=Pi(l,n);$u(l,t,e,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Yr(i,this._parents,t,e)}function D6(){var t,n,e=this,i=e._id,r=e.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};e.each(function(){var c=ar(this,i),u=c.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(a),n._.interrupt.push(a),n._.end.push(l)),c.on=n}),r===0&&o()})}var N_e=0;function Yr(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function A6(t){return Pl().transition(t)}function x1(){return++N_e}var Vl=Pl.prototype;Yr.prototype=A6.prototype={constructor:Yr,select:v6,selectAll:_6,selectChild:Vl.selectChild,selectChildren:Vl.selectChildren,filter:g6,merge:y6,selection:w6,transition:I6,call:Vl.call,nodes:Vl.nodes,node:Vl.node,size:Vl.size,empty:Vl.empty,each:Vl.each,on:b6,attr:u6,attrTween:d6,style:T6,styleTween:S6,text:k6,textTween:E6,remove:x6,tween:c6,delay:p6,duration:h6,ease:m6,easeVarying:f6,end:D6,[Symbol.iterator]:Vl[Symbol.iterator]};function v1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var M_e={time:null,delay:0,duration:250,ease:v1};function O_e(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function N6(t){var n,e;t instanceof Yr?(n=t._id,t=t._name):(n=x1(),(e=M_e).time=n0(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&$u(l,t,n,c,s,e||O_e(l,n));return new Yr(i,this._parents,t,n)}Pl.prototype.interrupt=l6;Pl.prototype.transition=N6;var _1=t=>()=>t;function QF(t,{sourceEvent:n,target:e,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function M6(t){t.stopImmediatePropagation()}function w1(t){t.preventDefault(),t.stopImmediatePropagation()}var O6={name:"drag"},ZF={name:"space"},_g={name:"handle"},wg={name:"center"},{abs:R6,max:Sr,min:kr}=Math;function F6(t){return[+t[0],+t[1]]}function t2(t){return[F6(t[0]),F6(t[1])]}var C1={name:"x",handles:["w","e"].map(o0),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},JF={name:"y",handles:["n","s"].map(o0),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},yut={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(o0),input:function(t){return t==null?null:t2(t)},output:function(t){return t}},Bl={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},L6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},P6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},R_e={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},F_e={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function o0(t){return{type:t}}function L_e(t){return!t.ctrlKey&&!t.button}function P_e(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function $_e(){return navigator.maxTouchPoints||"ontouchstart"in this}function e2(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function V_e(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function n2(){return B_e(C1)}function B_e(t){var n=P_e,e=L_e,i=$_e,r=!0,o=Wv("start","brush","end"),s=6,a;function l(f){var y=f.property("__brush",g).selectAll(".overlay").data([o0("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Bl.overlay).merge(y).each(function(){var x=e2(this).extent;Tr(this).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1])}),f.selectAll(".selection").data([o0("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Bl.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=f.selectAll(".handle").data(t.handles,function(x){return x.type});b.exit().remove(),b.enter().append("rect").attr("class",function(x){return"handle handle--"+x.type}).attr("cursor",function(x){return Bl[x.type]}),f.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(i).on("touchstart.brush",p).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(f,y,b){f.tween?f.on("start.brush",function(x){u(this,arguments).beforestart().start(x)}).on("interrupt.brush end.brush",function(x){u(this,arguments).end(x)}).tween("brush",function(){var x=this,_=x.__brush,w=u(x,arguments),C=_.selection,k=t.input(typeof y=="function"?y.apply(this,arguments):y,_.extent),N=$l(C,k);function P(F){_.selection=F===1&&k===null?null:N(F),c.call(x),w.brush()}return C!==null&&k!==null?P:P(1)}):f.each(function(){var x=this,_=arguments,w=x.__brush,C=t.input(typeof y=="function"?y.apply(x,_):y,w.extent),k=u(x,_).beforestart();xg(x),w.selection=C===null?null:C,c.call(x),k.start(b).brush(b).end(b)})},l.clear=function(f,y){l.move(f,null,y)};function c(){var f=Tr(this),y=e2(this).selection;y?(f.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),f.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?y[1][0]-s/2:y[0][0]-s/2}).attr("y",function(b){return b.type[0]==="s"?y[1][1]-s/2:y[0][1]-s/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?y[1][0]-y[0][0]+s:s}).attr("height",function(b){return b.type==="e"||b.type==="w"?y[1][1]-y[0][1]+s:s})):f.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(f,y,b){var x=f.__brush.emitter;return x&&(!b||!x.clean)?x:new d(f,y,b)}function d(f,y,b){this.that=f,this.args=y,this.state=f.__brush,this.active=0,this.clean=b}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(f,y){return this.starting?(this.starting=!1,this.emit("start",f,y)):this.emit("brush",f),this},brush:function(f,y){return this.emit("brush",f,y),this},end:function(f,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",f,y)),this},emit:function(f,y,b){var x=Tr(this.that).datum();o.call(f,this.that,new QF(f,{sourceEvent:y,target:l,selection:t.output(this.state.selection),mode:b,dispatch:o}),x)}};function p(f){if(a&&!f.touches||!e.apply(this,arguments))return;var y=this,b=f.target.__data__.type,x=(r&&f.metaKey?b="overlay":b)==="selection"?O6:r&&f.altKey?wg:_g,_=t===JF?null:R_e[b],w=t===C1?null:F_e[b],C=e2(y),k=C.extent,N=C.selection,P=k[0][0],F,z,Y=k[0][1],K,Z,te=k[1][0],U,j,q=k[1][1],Q,oe,se=0,ue=0,fe,ge=_&&w&&r&&f.shiftKey,xe,De,ve=Array.from(f.touches||[f],Fe=>{let gt=Fe.identifier;return Fe=ZS(Fe,y),Fe.point0=Fe.slice(),Fe.identifier=gt,Fe});xg(y);var He=u(y,arguments,!0).beforestart();if(b==="overlay"){N&&(fe=!0);let Fe=[ve[0],ve[1]||ve[0]];C.selection=N=[[F=t===JF?P:kr(Fe[0][0],Fe[1][0]),K=t===C1?Y:kr(Fe[0][1],Fe[1][1])],[U=t===JF?te:Sr(Fe[0][0],Fe[1][0]),Q=t===C1?q:Sr(Fe[0][1],Fe[1][1])]],ve.length>1&&ft(f)}else F=N[0][0],K=N[0][1],U=N[1][0],Q=N[1][1];z=F,Z=K,j=U,oe=Q;var ae=Tr(y).attr("pointer-events","none"),Te=ae.selectAll(".overlay").attr("cursor",Bl[b]);if(f.touches)He.moved=de,He.ended=lt;else{var Ie=Tr(f.view).on("mousemove.brush",de,!0).on("mouseup.brush",lt,!0);r&&Ie.on("keydown.brush",Dt,!0).on("keyup.brush",vt,!0),VF(f.view)}c.call(y),He.start(f,x.name);function de(Fe){for(let gt of Fe.changedTouches||[Fe])for(let Lr of ve)Lr.identifier===gt.identifier&&(Lr.cur=ZS(gt,y));if(ge&&!xe&&!De&&ve.length===1){let gt=ve[0];R6(gt.cur[0]-gt[0])>R6(gt.cur[1]-gt[1])?De=!0:xe=!0}for(let gt of ve)gt.cur&&(gt[0]=gt.cur[0],gt[1]=gt.cur[1]);fe=!0,w1(Fe),ft(Fe)}function ft(Fe){let gt=ve[0],Lr=gt.point0;var An;switch(se=gt[0]-Lr[0],ue=gt[1]-Lr[1],x){case ZF:case O6:{_&&(se=Sr(P-F,kr(te-U,se)),z=F+se,j=U+se),w&&(ue=Sr(Y-K,kr(q-Q,ue)),Z=K+ue,oe=Q+ue);break}case _g:{ve[1]?(_&&(z=Sr(P,kr(te,ve[0][0])),j=Sr(P,kr(te,ve[1][0])),_=1),w&&(Z=Sr(Y,kr(q,ve[0][1])),oe=Sr(Y,kr(q,ve[1][1])),w=1)):(_<0?(se=Sr(P-F,kr(te-F,se)),z=F+se,j=U):_>0&&(se=Sr(P-U,kr(te-U,se)),z=F,j=U+se),w<0?(ue=Sr(Y-K,kr(q-K,ue)),Z=K+ue,oe=Q):w>0&&(ue=Sr(Y-Q,kr(q-Q,ue)),Z=K,oe=Q+ue));break}case wg:{_&&(z=Sr(P,kr(te,F-se*_)),j=Sr(P,kr(te,U+se*_))),w&&(Z=Sr(Y,kr(q,K-ue*w)),oe=Sr(Y,kr(q,Q+ue*w)));break}}j<z&&(_*=-1,An=F,F=U,U=An,An=z,z=j,j=An,b in L6&&Te.attr("cursor",Bl[b=L6[b]])),oe<Z&&(w*=-1,An=K,K=Q,Q=An,An=Z,Z=oe,oe=An,b in P6&&Te.attr("cursor",Bl[b=P6[b]])),C.selection&&(N=C.selection),xe&&(z=N[0][0],j=N[1][0]),De&&(Z=N[0][1],oe=N[1][1]),(N[0][0]!==z||N[0][1]!==Z||N[1][0]!==j||N[1][1]!==oe)&&(C.selection=[[z,Z],[j,oe]],c.call(y),He.brush(Fe,x.name))}function lt(Fe){if(M6(Fe),Fe.touches){if(Fe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else BF(Fe.view,fe),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ae.attr("pointer-events","all"),Te.attr("cursor",Bl.overlay),C.selection&&(N=C.selection),V_e(N)&&(C.selection=null,c.call(y)),He.end(Fe,x.name)}function Dt(Fe){switch(Fe.keyCode){case 16:{ge=_&&w;break}case 18:{x===_g&&(_&&(U=j-se*_,F=z+se*_),w&&(Q=oe-ue*w,K=Z+ue*w),x=wg,ft(Fe));break}case 32:{(x===_g||x===wg)&&(_<0?U=j-se:_>0&&(F=z-se),w<0?Q=oe-ue:w>0&&(K=Z-ue),x=ZF,Te.attr("cursor",Bl.selection),ft(Fe));break}default:return}w1(Fe)}function vt(Fe){switch(Fe.keyCode){case 16:{ge&&(xe=De=ge=!1,ft(Fe));break}case 18:{x===wg&&(_<0?U=j:_>0&&(F=z),w<0?Q=oe:w>0&&(K=Z),x=_g,ft(Fe));break}case 32:{x===ZF&&(Fe.altKey?(_&&(U=j-se*_,F=z+se*_),w&&(Q=oe-ue*w,K=Z+ue*w),x=wg):(_<0?U=j:_>0&&(F=z),w<0?Q=oe:w>0&&(K=Z),x=_g),Te.attr("cursor",Bl[b]),ft(Fe));break}default:return}w1(Fe)}}function h(f){u(this,arguments).moved(f)}function m(f){u(this,arguments).ended(f)}function g(){var f=this.__brush||{selection:null};return f.extent=t2(n.apply(this,arguments)),f.dim=t,f}return l.extent=function(f){return arguments.length?(n=typeof f=="function"?f:_1(t2(f)),l):n},l.filter=function(f){return arguments.length?(e=typeof f=="function"?f:_1(!!f),l):e},l.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:_1(!!f),l):i},l.handleSize=function(f){return arguments.length?(s=+f,l):s},l.keyModifiers=function(f){return arguments.length?(r=!!f,l):r},l.on=function(){var f=o.on.apply(o,arguments);return f===o?l:f},l}function Fa(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function i2(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function uh(t){let n,e,i;t.length!==2?(n=Fa,e=(a,l)=>Fa(t(a),l),i=(a,l)=>t(a)-l):(n=t===Fa||t===i2?t:z_e,e=t,i=t);function r(a,l,c=0,u=a.length){if(c<u){if(n(l,l)!==0)return u;do{let d=c+u>>>1;e(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(n(l,l)!==0)return u;do{let d=c+u>>>1;e(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){let d=r(a,l,c,u-1);return d>c&&i(a[d-1],l)>-i(a[d],l)?d-1:d}return{left:r,center:s,right:o}}function z_e(){return 0}function s0(t){return t===null?NaN:+t}var $6=uh(Fa),V6=$6.right,G_e=$6.left,U_e=uh(s0).center,a0=V6;var Cg=class extends Map{constructor(n,e=j_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(let[i,r]of n)this.set(i,r)}get(n){return super.get(B6(this,n))}has(n){return super.has(B6(this,n))}set(n,e){return super.set(H_e(this,n),e)}delete(n){return super.delete(W_e(this,n))}};function B6({_intern:t,_key:n},e){let i=n(e);return t.has(i)?t.get(i):e}function H_e({_intern:t,_key:n},e){let i=n(e);return t.has(i)?t.get(i):(t.set(i,e),e)}function W_e({_intern:t,_key:n},e){let i=n(e);return t.has(i)&&(e=t.get(i),t.delete(i)),e}function j_e(t){return t!==null&&typeof t=="object"?t.valueOf():t}var q_e=Math.sqrt(50),X_e=Math.sqrt(10),K_e=Math.sqrt(2);function T1(t,n,e){let i=(n-t)/Math.max(0,e),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=q_e?10:o>=X_e?5:o>=K_e?2:1,a,l,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(t*c),l=Math.round(n*c),a/c<t&&++a,l/c>n&&--l,c=-c):(c=Math.pow(10,r)*s,a=Math.round(t/c),l=Math.round(n/c),a*c<t&&++a,l*c>n&&--l),l<a&&.5<=e&&e<2?T1(t,n,e*2):[a,l,c]}function S1(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];let i=n<t,[r,o,s]=i?T1(n,t,e):T1(t,n,e);if(!(o>=r))return[];let a=o-r+1,l=new Array(a);if(i)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(r+c)/-s;else for(let c=0;c<a;++c)l[c]=(r+c)*s;return l}function l0(t,n,e){return n=+n,t=+t,e=+e,T1(t,n,e)[2]}function Tg(t,n,e){n=+n,t=+t,e=+e;let i=n<t,r=i?l0(n,t,e):l0(t,n,e);return(i?-1:1)*(r<0?1/-r:r)}function r2(t,n,e=s0){if(!(!(i=t.length)||isNaN(n=+n))){if(n<=0||i<2)return+e(t[0],0,t);if(n>=1)return+e(t[i-1],i-1,t);var i,r=(i-1)*n,o=Math.floor(r),s=+e(t[o],o,t),a=+e(t[o+1],o+1,t);return s+(a-s)*(r-o)}}function Sg(t,n,e){t=+t,n=+n,e=(r=arguments.length)<2?(n=t,t=0,1):r<3?1:+e;for(var i=-1,r=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(r);++i<r;)o[i]=t+i*e;return o}function La(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}var o2=Symbol("implicit");function dh(){var t=new Cg,n=[],e=[],i=o2;function r(o){let s=t.get(o);if(s===void 0){if(i!==o2)return i;t.set(o,s=n.push(o)-1)}return e[s%e.length]}return r.domain=function(o){if(!arguments.length)return n.slice();n=[],t=new Cg;for(let s of o)t.has(s)||t.set(s,n.push(s)-1);return r},r.range=function(o){return arguments.length?(e=Array.from(o),r):e.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return dh(n,e).unknown(i)},La.apply(r,arguments),r}function kg(){var t=dh().unknown(void 0),n=t.domain,e=t.range,i=0,r=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var p=n().length,h=r<i,m=h?r:i,g=h?i:r;o=(g-m)/Math.max(1,p-l+c*2),a&&(o=Math.floor(o)),m+=(g-m-o*(p-l))*u,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var f=Sg(p).map(function(y){return m+o*y});return e(h?f.reverse():f)}return t.domain=function(p){return arguments.length?(n(p),d()):n()},t.range=function(p){return arguments.length?([i,r]=p,i=+i,r=+r,d()):[i,r]},t.rangeRound=function(p){return[i,r]=p,i=+i,r=+r,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(p){return arguments.length?(a=!!p,d()):a},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},t.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),d()):u},t.copy=function(){return kg(n(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},La.apply(d(),arguments)}function z6(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return z6(n())},t}function k1(){return z6(kg.apply(null,arguments).paddingInner(1))}function s2(t){return function(){return t}}function a2(t){return+t}var G6=[0,1];function Eg(t){return t}function l2(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:s2(isNaN(n)?NaN:.5)}function Q_e(t,n){var e;return t>n&&(e=t,t=n,n=e),function(i){return Math.max(t,Math.min(n,i))}}function Z_e(t,n,e){var i=t[0],r=t[1],o=n[0],s=n[1];return r<i?(i=l2(r,i),o=e(s,o)):(i=l2(i,r),o=e(o,s)),function(a){return o(i(a))}}function J_e(t,n,e){var i=Math.min(t.length,n.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<i;)r[s]=l2(t[s],t[s+1]),o[s]=e(n[s],n[s+1]);return function(a){var l=a0(t,a,1,i)-1;return o[l](r[l](a))}}function E1(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ewe(){var t=G6,n=G6,e=$l,i,r,o,s=Eg,a,l,c;function u(){var p=Math.min(t.length,n.length);return s!==Eg&&(s=Q_e(t[0],t[p-1])),a=p>2?J_e:Z_e,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?o:(l||(l=a(t.map(i),n,e)))(i(s(p)))}return d.invert=function(p){return s(r((c||(c=a(n,t.map(i),sr)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,a2),u()):t.slice()},d.range=function(p){return arguments.length?(n=Array.from(p),u()):n.slice()},d.rangeRound=function(p){return n=Array.from(p),e=jF,u()},d.clamp=function(p){return arguments.length?(s=p?!0:Eg,u()):s!==Eg},d.interpolate=function(p){return arguments.length?(e=p,u()):e},d.unknown=function(p){return arguments.length?(o=p,d):o},function(p,h){return i=p,r=h,u()}}function c0(){return ewe()(Eg,Eg)}function U6(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ph(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,i=t.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+t.slice(e+1)]}function Pa(t){return t=ph(Math.abs(t)),t?t[1]:NaN}function H6(t,n){return function(e,i){for(var r=e.length,o=[],s=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(e.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(n)}}function W6(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var twe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vu(t){if(!(n=twe.exec(t)))throw new Error("invalid format: "+t);var n;return new I1({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Vu.prototype=I1.prototype;function I1(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}I1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function j6(t){e:for(var n=t.length,e=1,i=-1,r;e<n;++e)switch(t[e]){case".":i=r=e;break;case"0":i===0&&(i=e),r=e;break;default:if(!+t[e])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var c2;function q6(t,n){var e=ph(t,n);if(!e)return t+"";var i=e[0],r=e[1],o=r-(c2=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ph(t,Math.max(0,n+o-1))[0]}function u2(t,n){var e=ph(t,n);if(!e)return t+"";var i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var d2={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:U6,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>u2(t*100,n),r:u2,s:q6,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function p2(t){return t}var X6=Array.prototype.map,K6=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Y6(t){var n=t.grouping===void 0||t.thousands===void 0?p2:H6(X6.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?p2:W6(X6.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Vu(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,f=d.zero,y=d.width,b=d.comma,x=d.precision,_=d.trim,w=d.type;w==="n"?(b=!0,w="g"):d2[w]||(x===void 0&&(x=12),_=!0,w="g"),(f||p==="0"&&h==="=")&&(f=!0,p="0",h="=");var C=g==="$"?e:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=g==="$"?i:/[%p]/.test(w)?s:"",N=d2[w],P=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function F(z){var Y=C,K=k,Z,te,U;if(w==="c")K=N(z)+K,z="";else{z=+z;var j=z<0||1/z<0;if(z=isNaN(z)?l:N(Math.abs(z),x),_&&(z=j6(z)),j&&+z==0&&m!=="+"&&(j=!1),Y=(j?m==="("?m:a:m==="-"||m==="("?"":m)+Y,K=(w==="s"?K6[8+c2/3]:"")+K+(j&&m==="("?")":""),P){for(Z=-1,te=z.length;++Z<te;)if(U=z.charCodeAt(Z),48>U||U>57){K=(U===46?r+z.slice(Z+1):z.slice(Z))+K,z=z.slice(0,Z);break}}}b&&!f&&(z=n(z,1/0));var q=Y.length+z.length+K.length,Q=q<y?new Array(y-q+1).join(p):"";switch(b&&f&&(z=n(Q+z,Q.length?y-K.length:1/0),Q=""),h){case"<":z=Y+z+K+Q;break;case"=":z=Y+Q+z+K;break;case"^":z=Q.slice(0,q=Q.length>>1)+Y+z+K+Q.slice(q);break;default:z=Q+Y+z+K;break}return o(z)}return F.toString=function(){return d+""},F}function u(d,p){var h=c((d=Vu(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(Pa(p)/3)))*3,g=Math.pow(10,-m),f=K6[8+m/3];return function(y){return h(g*y)+f}}return{format:c,formatPrefix:u}}var D1,A1,N1;h2({thousands:",",grouping:[3],currency:["$",""]});function h2(t){return D1=Y6(t),A1=D1.format,N1=D1.formatPrefix,D1}function m2(t){return Math.max(0,-Pa(Math.abs(t)))}function f2(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Pa(n)/3)))*3-Pa(Math.abs(t)))}function g2(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,Pa(n)-Pa(t))+1}function y2(t,n,e,i){var r=Tg(t,n,e),o;switch(i=Vu(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(n));return i.precision==null&&!isNaN(o=f2(r,s))&&(i.precision=o),N1(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=g2(r,Math.max(Math.abs(t),Math.abs(n))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=m2(r))&&(i.precision=o-(i.type==="%")*2);break}}return A1(i)}function nwe(t){var n=t.domain;return t.ticks=function(e){var i=n();return S1(i[0],i[i.length-1],e??10)},t.tickFormat=function(e,i){var r=n();return y2(r[0],r[r.length-1],e??10,i)},t.nice=function(e){e==null&&(e=10);var i=n(),r=0,o=i.length-1,s=i[r],a=i[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=r,r=o,o=c);u-- >0;){if(c=l0(s,a,e),c===l)return i[r]=s,i[o]=a,n(i);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function $a(){var t=c0();return t.copy=function(){return E1(t,$a())},La.apply(t,arguments),nwe(t)}function b2(t,n){t=t.slice();var e=0,i=t.length-1,r=t[e],o=t[i],s;return o<r&&(s=e,e=i,i=s,s=r,r=o,o=s),t[e]=n.floor(r),t[i]=n.ceil(o),t}function u0(){var t=[],n=[],e=[],i;function r(){var s=0,a=Math.max(1,n.length);for(e=new Array(a-1);++s<a;)e[s-1]=r2(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?i:n[a0(e,s)]}return o.invertExtent=function(s){var a=n.indexOf(s);return a<0?[NaN,NaN]:[a>0?e[a-1]:t[0],a<e.length?e[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Fa),r()},o.range=function(s){return arguments.length?(n=Array.from(s),r()):n.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return e.slice()},o.copy=function(){return u0().domain(t).range(n).unknown(i)},La.apply(o,arguments)}var x2=new Date,v2=new Date;function On(t,n,e,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),n(o,1),t(o),o),r.round=o=>{let s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=(o,s)=>(n(o=new Date(+o),s==null?1:Math.floor(s)),o),r.range=(o,s,a)=>{let l=[];if(o=r.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),n(o,a),t(o);while(c<o&&o<s);return l},r.filter=o=>On(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;n(s,-1),!o(s););else for(;--a>=0;)for(;n(s,1),!o(s););}),e&&(r.count=(o,s)=>(x2.setTime(+o),v2.setTime(+s),t(x2),t(v2),Math.floor(e(x2,v2))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?s=>i(s)%o===0:s=>r.count(0,s)%o===0):r)),r}var d0=On(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);d0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?On(n=>{n.setTime(Math.floor(n/t)*t)},(n,e)=>{n.setTime(+n+e*t)},(n,e)=>(e-n)/t):d0);var upt=d0.range;var Va=On(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*1e3)},(t,n)=>(n-t)/1e3,t=>t.getUTCSeconds()),Q6=Va.range;var Ig=On(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,n)=>{t.setTime(+t+n*6e4)},(t,n)=>(n-t)/6e4,t=>t.getMinutes()),iwe=Ig.range,M1=On(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*6e4)},(t,n)=>(n-t)/6e4,t=>t.getUTCMinutes()),rwe=M1.range;var Dg=On(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,n)=>{t.setTime(+t+n*36e5)},(t,n)=>(n-t)/36e5,t=>t.getHours()),owe=Dg.range,O1=On(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*36e5)},(t,n)=>(n-t)/36e5,t=>t.getUTCHours()),swe=O1.range;var zl=On(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),awe=zl.range,h0=On(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/864e5,t=>t.getUTCDate()-1),lwe=h0.range,R1=On(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/864e5,t=>Math.floor(t/864e5)),cwe=R1.range;function fh(t){return On(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,e)=>{n.setDate(n.getDate()+e*7)},(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/6048e5)}var Gl=fh(0),Ag=fh(1),J6=fh(2),e8=fh(3),Bu=fh(4),t8=fh(5),n8=fh(6),i8=Gl.range,uwe=Ag.range,dwe=J6.range,pwe=e8.range,hwe=Bu.range,mwe=t8.range,fwe=n8.range;function gh(t){return On(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e*7)},(n,e)=>(e-n)/6048e5)}var yh=gh(0),Ng=gh(1),r8=gh(2),o8=gh(3),zu=gh(4),s8=gh(5),a8=gh(6),l8=yh.range,gwe=Ng.range,ywe=r8.range,bwe=o8.range,xwe=zu.range,vwe=s8.range,_we=a8.range;var Mg=On(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),wwe=Mg.range,F1=On(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),Cwe=F1.range;var Vo=On(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());Vo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:On(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e*t)});var Twe=Vo.range,Xs=On(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:On(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e*t)});var Swe=Xs.range;function u8(t,n,e,i,r,o){let s=[[Va,1,1e3],[Va,5,5*1e3],[Va,15,15*1e3],[Va,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[r,1,36e5],[r,3,3*36e5],[r,6,6*36e5],[r,12,12*36e5],[i,1,864e5],[i,2,2*864e5],[e,1,6048e5],[n,1,2592e6],[n,3,3*2592e6],[t,1,31536e6]];function a(c,u,d){let p=u<c;p&&([c,u]=[u,c]);let h=d&&typeof d.range=="function"?d:l(c,u,d),m=h?h.range(c,+u+1):[];return p?m.reverse():m}function l(c,u,d){let p=Math.abs(u-c)/d,h=uh(([,,f])=>f).right(s,p);if(h===s.length)return t.every(Tg(c/31536e6,u/31536e6,d));if(h===0)return d0.every(Math.max(Tg(c,u,d),1));let[m,g]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return m.every(g)}return[a,l]}var[Ewe,Iwe]=u8(Xs,F1,yh,R1,O1,M1),[_2,w2]=u8(Vo,Mg,Gl,zl,Dg,Ig);function C2(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function T2(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function m0(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function S2(t){var n=t.dateTime,e=t.date,i=t.time,r=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=f0(r),u=g0(r),d=f0(o),p=g0(o),h=f0(s),m=g0(s),g=f0(a),f=g0(a),y=f0(l),b=g0(l),x={a:j,A:q,b:Q,B:oe,c:null,d:g8,e:g8,f:Qwe,g:aCe,G:cCe,H:Xwe,I:Kwe,j:Ywe,L:_8,m:Zwe,M:Jwe,p:se,q:ue,Q:x8,s:v8,S:eCe,u:tCe,U:nCe,V:iCe,w:rCe,W:oCe,x:null,X:null,y:sCe,Y:lCe,Z:uCe,"%":b8},_={a:fe,A:ge,b:xe,B:De,c:null,d:y8,e:y8,f:mCe,g:TCe,G:kCe,H:dCe,I:pCe,j:hCe,L:C8,m:fCe,M:gCe,p:ve,q:He,Q:x8,s:v8,S:yCe,u:bCe,U:xCe,V:vCe,w:_Ce,W:wCe,x:null,X:null,y:CCe,Y:SCe,Z:ECe,"%":b8},w={a:F,A:z,b:Y,B:K,c:Z,d:m8,e:m8,f:Hwe,g:h8,G:p8,H:f8,I:f8,j:Bwe,L:Uwe,m:Vwe,M:zwe,p:P,q:$we,Q:jwe,s:qwe,S:Gwe,u:Owe,U:Rwe,V:Fwe,w:Mwe,W:Lwe,x:te,X:U,y:h8,Y:p8,Z:Pwe,"%":Wwe};x.x=C(e,x),x.X=C(i,x),x.c=C(n,x),_.x=C(e,_),_.X=C(i,_),_.c=C(n,_);function C(ae,Te){return function(Ie){var de=[],ft=-1,lt=0,Dt=ae.length,vt,Fe,gt;for(Ie instanceof Date||(Ie=new Date(+Ie));++ft<Dt;)ae.charCodeAt(ft)===37&&(de.push(ae.slice(lt,ft)),(Fe=d8[vt=ae.charAt(++ft)])!=null?vt=ae.charAt(++ft):Fe=vt==="e"?" ":"0",(gt=Te[vt])&&(vt=gt(Ie,Fe)),de.push(vt),lt=ft+1);return de.push(ae.slice(lt,ft)),de.join("")}}function k(ae,Te){return function(Ie){var de=m0(1900,void 0,1),ft=N(de,ae,Ie+="",0),lt,Dt;if(ft!=Ie.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Te&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(lt=T2(m0(de.y,0,1)),Dt=lt.getUTCDay(),lt=Dt>4||Dt===0?Ng.ceil(lt):Ng(lt),lt=h0.offset(lt,(de.V-1)*7),de.y=lt.getUTCFullYear(),de.m=lt.getUTCMonth(),de.d=lt.getUTCDate()+(de.w+6)%7):(lt=C2(m0(de.y,0,1)),Dt=lt.getDay(),lt=Dt>4||Dt===0?Ag.ceil(lt):Ag(lt),lt=zl.offset(lt,(de.V-1)*7),de.y=lt.getFullYear(),de.m=lt.getMonth(),de.d=lt.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Dt="Z"in de?T2(m0(de.y,0,1)).getUTCDay():C2(m0(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Dt+5)%7:de.w+de.U*7-(Dt+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,T2(de)):C2(de)}}function N(ae,Te,Ie,de){for(var ft=0,lt=Te.length,Dt=Ie.length,vt,Fe;ft<lt;){if(de>=Dt)return-1;if(vt=Te.charCodeAt(ft++),vt===37){if(vt=Te.charAt(ft++),Fe=w[vt in d8?Te.charAt(ft++):vt],!Fe||(de=Fe(ae,Ie,de))<0)return-1}else if(vt!=Ie.charCodeAt(de++))return-1}return de}function P(ae,Te,Ie){var de=c.exec(Te.slice(Ie));return de?(ae.p=u.get(de[0].toLowerCase()),Ie+de[0].length):-1}function F(ae,Te,Ie){var de=h.exec(Te.slice(Ie));return de?(ae.w=m.get(de[0].toLowerCase()),Ie+de[0].length):-1}function z(ae,Te,Ie){var de=d.exec(Te.slice(Ie));return de?(ae.w=p.get(de[0].toLowerCase()),Ie+de[0].length):-1}function Y(ae,Te,Ie){var de=y.exec(Te.slice(Ie));return de?(ae.m=b.get(de[0].toLowerCase()),Ie+de[0].length):-1}function K(ae,Te,Ie){var de=g.exec(Te.slice(Ie));return de?(ae.m=f.get(de[0].toLowerCase()),Ie+de[0].length):-1}function Z(ae,Te,Ie){return N(ae,n,Te,Ie)}function te(ae,Te,Ie){return N(ae,e,Te,Ie)}function U(ae,Te,Ie){return N(ae,i,Te,Ie)}function j(ae){return s[ae.getDay()]}function q(ae){return o[ae.getDay()]}function Q(ae){return l[ae.getMonth()]}function oe(ae){return a[ae.getMonth()]}function se(ae){return r[+(ae.getHours()>=12)]}function ue(ae){return 1+~~(ae.getMonth()/3)}function fe(ae){return s[ae.getUTCDay()]}function ge(ae){return o[ae.getUTCDay()]}function xe(ae){return l[ae.getUTCMonth()]}function De(ae){return a[ae.getUTCMonth()]}function ve(ae){return r[+(ae.getUTCHours()>=12)]}function He(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var Te=C(ae+="",x);return Te.toString=function(){return ae},Te},parse:function(ae){var Te=k(ae+="",!1);return Te.toString=function(){return ae},Te},utcFormat:function(ae){var Te=C(ae+="",_);return Te.toString=function(){return ae},Te},utcParse:function(ae){var Te=k(ae+="",!0);return Te.toString=function(){return ae},Te}}}var d8={"-":"",_:" ",0:"0"},Ki=/^\s*\d+/,Dwe=/^%/,Awe=/[\\^$*+?|[\]().{}]/g;function cn(t,n,e){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<e?new Array(e-o+1).join(n)+r:r)}function Nwe(t){return t.replace(Awe,"\\$&")}function f0(t){return new RegExp("^(?:"+t.map(Nwe).join("|")+")","i")}function g0(t){return new Map(t.map((n,e)=>[n.toLowerCase(),e]))}function Mwe(t,n,e){var i=Ki.exec(n.slice(e,e+1));return i?(t.w=+i[0],e+i[0].length):-1}function Owe(t,n,e){var i=Ki.exec(n.slice(e,e+1));return i?(t.u=+i[0],e+i[0].length):-1}function Rwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.U=+i[0],e+i[0].length):-1}function Fwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.V=+i[0],e+i[0].length):-1}function Lwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.W=+i[0],e+i[0].length):-1}function p8(t,n,e){var i=Ki.exec(n.slice(e,e+4));return i?(t.y=+i[0],e+i[0].length):-1}function h8(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function Pwe(t,n,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function $we(t,n,e){var i=Ki.exec(n.slice(e,e+1));return i?(t.q=i[0]*3-3,e+i[0].length):-1}function Vwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.m=i[0]-1,e+i[0].length):-1}function m8(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.d=+i[0],e+i[0].length):-1}function Bwe(t,n,e){var i=Ki.exec(n.slice(e,e+3));return i?(t.m=0,t.d=+i[0],e+i[0].length):-1}function f8(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.H=+i[0],e+i[0].length):-1}function zwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.M=+i[0],e+i[0].length):-1}function Gwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.S=+i[0],e+i[0].length):-1}function Uwe(t,n,e){var i=Ki.exec(n.slice(e,e+3));return i?(t.L=+i[0],e+i[0].length):-1}function Hwe(t,n,e){var i=Ki.exec(n.slice(e,e+6));return i?(t.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function Wwe(t,n,e){var i=Dwe.exec(n.slice(e,e+1));return i?e+i[0].length:-1}function jwe(t,n,e){var i=Ki.exec(n.slice(e));return i?(t.Q=+i[0],e+i[0].length):-1}function qwe(t,n,e){var i=Ki.exec(n.slice(e));return i?(t.s=+i[0],e+i[0].length):-1}function g8(t,n){return cn(t.getDate(),n,2)}function Xwe(t,n){return cn(t.getHours(),n,2)}function Kwe(t,n){return cn(t.getHours()%12||12,n,2)}function Ywe(t,n){return cn(1+zl.count(Vo(t),t),n,3)}function _8(t,n){return cn(t.getMilliseconds(),n,3)}function Qwe(t,n){return _8(t,n)+"000"}function Zwe(t,n){return cn(t.getMonth()+1,n,2)}function Jwe(t,n){return cn(t.getMinutes(),n,2)}function eCe(t,n){return cn(t.getSeconds(),n,2)}function tCe(t){var n=t.getDay();return n===0?7:n}function nCe(t,n){return cn(Gl.count(Vo(t)-1,t),n,2)}function w8(t){var n=t.getDay();return n>=4||n===0?Bu(t):Bu.ceil(t)}function iCe(t,n){return t=w8(t),cn(Bu.count(Vo(t),t)+(Vo(t).getDay()===4),n,2)}function rCe(t){return t.getDay()}function oCe(t,n){return cn(Ag.count(Vo(t)-1,t),n,2)}function sCe(t,n){return cn(t.getFullYear()%100,n,2)}function aCe(t,n){return t=w8(t),cn(t.getFullYear()%100,n,2)}function lCe(t,n){return cn(t.getFullYear()%1e4,n,4)}function cCe(t,n){var e=t.getDay();return t=e>=4||e===0?Bu(t):Bu.ceil(t),cn(t.getFullYear()%1e4,n,4)}function uCe(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+cn(n/60|0,"0",2)+cn(n%60,"0",2)}function y8(t,n){return cn(t.getUTCDate(),n,2)}function dCe(t,n){return cn(t.getUTCHours(),n,2)}function pCe(t,n){return cn(t.getUTCHours()%12||12,n,2)}function hCe(t,n){return cn(1+h0.count(Xs(t),t),n,3)}function C8(t,n){return cn(t.getUTCMilliseconds(),n,3)}function mCe(t,n){return C8(t,n)+"000"}function fCe(t,n){return cn(t.getUTCMonth()+1,n,2)}function gCe(t,n){return cn(t.getUTCMinutes(),n,2)}function yCe(t,n){return cn(t.getUTCSeconds(),n,2)}function bCe(t){var n=t.getUTCDay();return n===0?7:n}function xCe(t,n){return cn(yh.count(Xs(t)-1,t),n,2)}function T8(t){var n=t.getUTCDay();return n>=4||n===0?zu(t):zu.ceil(t)}function vCe(t,n){return t=T8(t),cn(zu.count(Xs(t),t)+(Xs(t).getUTCDay()===4),n,2)}function _Ce(t){return t.getUTCDay()}function wCe(t,n){return cn(Ng.count(Xs(t)-1,t),n,2)}function CCe(t,n){return cn(t.getUTCFullYear()%100,n,2)}function TCe(t,n){return t=T8(t),cn(t.getUTCFullYear()%100,n,2)}function SCe(t,n){return cn(t.getUTCFullYear()%1e4,n,4)}function kCe(t,n){var e=t.getUTCDay();return t=e>=4||e===0?zu(t):zu.ceil(t),cn(t.getUTCFullYear()%1e4,n,4)}function ECe(){return"+0000"}function b8(){return"%"}function x8(t){return+t}function v8(t){return Math.floor(+t/1e3)}var Og,L1,S8,k8,E8;k2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function k2(t){return Og=S2(t),L1=Og.format,S8=Og.parse,k8=Og.utcFormat,E8=Og.utcParse,Og}function ICe(t){return new Date(t)}function DCe(t){return t instanceof Date?+t:+new Date(+t)}function I8(t,n,e,i,r,o,s,a,l,c){var u=c0(),d=u.invert,p=u.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),f=c("%I %p"),y=c("%a %d"),b=c("%b %d"),x=c("%B"),_=c("%Y");function w(C){return(l(C)<C?h:a(C)<C?m:s(C)<C?g:o(C)<C?f:i(C)<C?r(C)<C?y:b:e(C)<C?x:_)(C)}return u.invert=function(C){return new Date(d(C))},u.domain=function(C){return arguments.length?p(Array.from(C,DCe)):p().map(ICe)},u.ticks=function(C){var k=p();return t(k[0],k[k.length-1],C??10)},u.tickFormat=function(C,k){return k==null?w:c(k)},u.nice=function(C){var k=p();return(!C||typeof C.range!="function")&&(C=n(k[0],k[k.length-1],C??10)),C?p(b2(k,C)):u},u.copy=function(){return E1(u,I8(t,n,e,i,r,o,s,a,l,c))},u}function y0(){return La.apply(I8(_2,w2,Vo,Mg,Gl,zl,Dg,Ig,Va,L1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _i(t){return function(){return t}}var E2=Math.PI,I2=2*E2,bh=1e-6,ACe=I2-bh;function D8(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function NCe(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return D8;let e=10**n;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*e)/e+i[r]}}var xh=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?D8:NCe(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,i,r){this._append`Q${+n},${+e},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(n,e,i,r,o,s){this._append`C${+n},${+e},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(n,e,i,r,o){if(n=+n,e=+e,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-n,c=r-e,u=s-n,d=a-e,p=u*u+d*d;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(p>bh)if(!(Math.abs(d*l-c*u)>bh)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let h=i-s,m=r-a,g=l*l+c*c,f=h*h+m*m,y=Math.sqrt(g),b=Math.sqrt(p),x=o*Math.tan((E2-Math.acos((g+p-f)/(2*y*b)))/2),_=x/b,w=x/y;Math.abs(_-1)>bh&&this._append`L${n+_*u},${e+_*d}`,this._append`A${o},${o},0,0,${+(d*h>u*m)},${this._x1=n+w*l},${this._y1=e+w*c}`}}arc(n,e,i,r,o,s){if(n=+n,e=+e,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=n+a,u=e+l,d=1^s,p=s?r-o:o-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>bh||Math.abs(this._y1-u)>bh)&&this._append`L${c},${u}`,i&&(p<0&&(p=p%I2+I2),p>ACe?this._append`A${i},${i},0,1,${d},${n-a},${e-l}A${i},${i},0,1,${d},${this._x1=c},${this._y1=u}`:p>bh&&this._append`A${i},${i},0,${+(p>=E2)},${d},${this._x1=n+i*Math.cos(o)},${this._y1=e+i*Math.sin(o)}`)}rect(n,e,i,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function A8(){return new xh}A8.prototype=xh.prototype;function P1(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{let i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);n=i}return t},()=>new xh(n)}var ght=Array.prototype.slice;function $1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function N8(t){this._context=t}N8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function vh(t){return new N8(t)}function V1(t){return t[0]}function B1(t){return t[1]}function b0(t,n){var e=_i(!0),i=null,r=vh,o=null,s=P1(a);t=typeof t=="function"?t:t===void 0?V1:_i(t),n=typeof n=="function"?n:n===void 0?B1:_i(n);function a(l){var c,u=(l=$1(l)).length,d,p=!1,h;for(i==null&&(o=r(h=s())),c=0;c<=u;++c)!(c<u&&e(d=l[c],c,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+t(d,c,l),+n(d,c,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:_i(+l),a):t},a.y=function(l){return arguments.length?(n=typeof l=="function"?l:_i(+l),a):n},a.defined=function(l){return arguments.length?(e=typeof l=="function"?l:_i(!!l),a):e},a.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),a):i},a}function z1(t,n,e){var i=null,r=_i(!0),o=null,s=vh,a=null,l=P1(c);t=typeof t=="function"?t:t===void 0?V1:_i(+t),n=typeof n=="function"?n:n===void 0?_i(0):_i(+n),e=typeof e=="function"?e:e===void 0?B1:_i(+e);function c(d){var p,h,m,g=(d=$1(d)).length,f,y=!1,b,x=new Array(g),_=new Array(g);for(o==null&&(a=s(b=l())),p=0;p<=g;++p){if(!(p<g&&r(f=d[p],p,d))===y)if(y=!y)h=p,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=p-1;m>=h;--m)a.point(x[m],_[m]);a.lineEnd(),a.areaEnd()}y&&(x[p]=+t(f,p,d),_[p]=+n(f,p,d),a.point(i?+i(f,p,d):x[p],e?+e(f,p,d):_[p]))}if(b)return a=null,b+""||null}function u(){return b0().defined(r).curve(s).context(o)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:_i(+d),i=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:_i(+d),c):t},c.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:_i(+d),c):i},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:_i(+d),e=null,c):n},c.y0=function(d){return arguments.length?(n=typeof d=="function"?d:_i(+d),c):n},c.y1=function(d){return arguments.length?(e=d==null?null:typeof d=="function"?d:_i(+d),c):e},c.lineX0=c.lineY0=function(){return u().x(t).y(n)},c.lineY1=function(){return u().x(t).y(e)},c.lineX1=function(){return u().x(i).y(n)},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:_i(!!d),c):r},c.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),c):o},c}var LCe=["caretElm"],PCe=t=>({model:t});function $Ce(t,n){}function VCe(t,n){if(t&1&&(M(0,"span"),be(1,$Ce,0,0,"ng-template",5),O()),t&2){let e=ee();V(),J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",hO(2,PCe,e.context))}}function BCe(t,n){if(t&1&&Ee(0,"span",6),t&2){let e=ee();J("innerHTML",e.title,DC)}}function zCe(t,n){if(t&1&&(M(0,"header",4)(1,"span",5),X(2),O()()),t&2){let e=ee();V(2),xt(e.title)}}function GCe(t,n){if(t&1){let e=qt();M(0,"li",6)(1,"ngx-charts-legend-entry",7),_e("select",function(r){Le(e);let o=ee();return Pe(o.labelClick.emit(r))})("activate",function(r){Le(e);let o=ee();return Pe(o.activate(r))})("deactivate",function(r){Le(e);let o=ee();return Pe(o.deactivate(r))}),O()()}if(t&2){let e=n.$implicit,i=ee();V(),J("label",e.label)("formattedLabel",e.formattedLabel)("color",e.color)("isActive",i.isActive(e))}}var U8=["*"];function UCe(t,n){if(t&1&&Ee(0,"ngx-charts-scale-legend",4),t&2){let e=ee();J("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("valueRange",e.legendOptions.domain)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)}}function HCe(t,n){if(t&1){let e=qt();M(0,"ngx-charts-legend",5),_e("labelClick",function(r){Le(e);let o=ee();return Pe(o.legendLabelClick.emit(r))})("labelActivate",function(r){Le(e);let o=ee();return Pe(o.legendLabelActivate.emit(r))})("labelDeactivate",function(r){Le(e);let o=ee();return Pe(o.legendLabelDeactivate.emit(r))}),O()}if(t&2){let e=ee();J("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("data",e.legendOptions.domain)("title",e.legendOptions.title)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)("activeEntries",e.activeEntries)}}var WCe=["ngx-charts-axis-label",""],H8=["ticksel"],jCe=["ngx-charts-x-axis-ticks",""];function qCe(t,n){t&1&&(Ze(),$C(0))}function XCe(t,n){if(t&1&&(Ze(),M(0,"tspan",10),X(1),O()),t&2){let e=n.$implicit,i=n.index;$e("y",i*12),V(),xn(" ",e," ")}}function KCe(t,n){if(t&1&&(Ze(),Ps(0),be(1,XCe,2,2,"tspan",9),$s()),t&2){let e=n.ngIf;V(),J("ngForOf",e)}}function YCe(t,n){if(t&1&&be(0,KCe,2,1,"ng-container",6),t&2){let e=ee(2).$implicit,i=ee();J("ngIf",i.tickChunks(e))}}function QCe(t,n){if(t&1&&X(0),t&2){let e=ee().ngIf,i=ee(2);xn(" ",i.tickTrim(e)," ")}}function ZCe(t,n){if(t&1&&(Ze(),Ps(0),M(1,"title"),X(2),O(),M(3,"text",7),be(4,qCe,1,0,"ng-container",8),O(),be(5,YCe,1,1,"ng-template",null,1,Dp)(7,QCe,1,1,"ng-template",null,2,Dp),$s()),t&2){let e=n.ngIf,i=rs(6),r=rs(8),o=ee(2);V(2),xt(e),V(),$e("text-anchor",o.textAnchor)("transform",o.textTransform),V(),J("ngIf",o.isWrapTicksSupported)("ngIfThen",i)("ngIfElse",r)}}function JCe(t,n){if(t&1&&(Ze(),M(0,"g",5),be(1,ZCe,9,6,"ng-container",6),O()),t&2){let e=n.$implicit,i=ee();$e("transform",i.tickTransform(e)),V(),J("ngIf",i.tickFormat(e))}}function eTe(t,n){if(t&1&&(Ze(),M(0,"g"),Ee(1,"line",11),O()),t&2){let e=ee(2);$e("transform",e.gridLineTransform()),V(),$e("y1",-e.gridLineHeight)}}function tTe(t,n){if(t&1&&(Ze(),M(0,"g"),be(1,eTe,2,2,"g",6),O()),t&2){let e=n.$implicit,i=ee();$e("transform",i.tickTransform(e)),V(),J("ngIf",i.showGridLines)}}var nTe=["ngx-charts-x-axis",""];function iTe(t,n){if(t&1){let e=qt();Ze(),M(0,"g",2),_e("dimensionsChanged",function(r){Le(e);let o=ee();return Pe(o.emitTicksHeight(r))}),O()}if(t&2){let e=ee();J("trimTicks",e.trimTicks)("rotateTicks",e.rotateTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickStroke",e.tickStroke)("scale",e.xScale)("orient",e.xOrient)("showGridLines",e.showGridLines)("gridLineHeight",e.dims.height)("width",e.dims.width)("tickValues",e.ticks)("wrapTicks",e.wrapTicks)}}function rTe(t,n){if(t&1&&(Ze(),Ee(0,"g",3)),t&2){let e=ee();J("label",e.labelText)("offset",e.labelOffset)("orient",e.orientation.Bottom)("height",e.dims.height)("width",e.dims.width)}}var oTe=["ngx-charts-y-axis-ticks",""];function sTe(t,n){t&1&&(Ze(),$C(0))}function aTe(t,n){if(t&1&&(Ze(),M(0,"tspan",12),X(1),O()),t&2){let e=n.$implicit,i=n.index,r=ee(6);$e("y",i*(8+r.tickSpacing)),V(),xn(" ",e," ")}}function lTe(t,n){if(t&1&&(Ze(),Ps(0),be(1,aTe,2,2,"tspan",11),$s()),t&2){let e=ee().ngIf;V(),J("ngForOf",e)}}function cTe(t,n){if(t&1&&(Ze(),Ps(0),be(1,lTe,2,1,"ng-container",10),$s()),t&2){let e=n.ngIf;ee(2);let i=rs(8);V(),J("ngIf",e.length>1)("ngIfElse",i)}}function uTe(t,n){if(t&1&&be(0,cTe,2,2,"ng-container",7),t&2){let e=ee(2).$implicit,i=ee();J("ngIf",i.tickChunks(e))}}function dTe(t,n){if(t&1&&X(0),t&2){let e=ee().ngIf,i=ee(2);xn(" ",i.tickTrim(e)," ")}}function pTe(t,n){if(t&1&&(Ze(),Ps(0),M(1,"title"),X(2),O(),M(3,"text",8),be(4,sTe,1,0,"ng-container",9),O(),be(5,uTe,1,1,"ng-template",null,1,Dp)(7,dTe,1,1,"ng-template",null,2,Dp),$s()),t&2){let e=n.ngIf,i=rs(6),r=rs(8),o=ee(2);V(2),xt(e),V(),Fi("font-size","12px"),$e("dy",o.dy)("x",o.x1)("y",o.y1)("text-anchor",o.textAnchor),V(),J("ngIf",o.wrapTicks)("ngIfThen",i)("ngIfElse",r)}}function hTe(t,n){if(t&1&&(Ze(),M(0,"g",6),be(1,pTe,9,10,"ng-container",7),O()),t&2){let e=n.$implicit,i=ee();$e("transform",i.transform(e)),V(),J("ngIf",i.tickFormat(e))}}function mTe(t,n){if(t&1&&(Ze(),Ee(0,"path",13)),t&2){let e=ee();$e("d",e.referenceAreaPath)("transform",e.gridLineTransform())}}function fTe(t,n){if(t&1&&(Ze(),Ee(0,"line",15)),t&2){let e=ee(3);$e("x2",e.gridLineWidth)}}function gTe(t,n){if(t&1&&(Ze(),Ee(0,"line",15)),t&2){let e=ee(3);$e("x2",-e.gridLineWidth)}}function yTe(t,n){if(t&1&&(Ze(),M(0,"g"),be(1,fTe,1,1,"line",14)(2,gTe,1,1,"line",14),O()),t&2){let e=ee(2);$e("transform",e.gridLineTransform()),V(),J("ngIf",e.orient===e.Orientation.Left),V(),J("ngIf",e.orient===e.Orientation.Right)}}function bTe(t,n){if(t&1&&(Ze(),M(0,"g"),be(1,yTe,3,3,"g",7),O()),t&2){let e=n.$implicit,i=ee();$e("transform",i.transform(e)),V(),J("ngIf",i.showGridLines)}}function xTe(t,n){if(t&1&&(Ze(),M(0,"g")(1,"title"),X(2),O(),M(3,"text",17),X(4),O()()),t&2){let e=ee(2).$implicit,i=ee();V(2),xt(i.tickTrim(i.tickFormat(e.value))),V(),$e("dy",i.dy)("y",-6)("x",i.gridLineWidth)("text-anchor",i.textAnchor),V(),xn(" ",e.name," ")}}function vTe(t,n){if(t&1&&(Ze(),M(0,"g"),Ee(1,"line",16),be(2,xTe,5,6,"g",7),O()),t&2){let e=ee().$implicit,i=ee();$e("transform",i.transform(e.value)),V(),$e("x2",i.gridLineWidth)("transform",i.gridLineTransform()),V(),J("ngIf",i.showRefLabels)}}function _Te(t,n){if(t&1&&(Ze(),M(0,"g"),be(1,vTe,3,4,"g",7),O()),t&2){let e=ee();V(),J("ngIf",e.showRefLines)}}var wTe=["ngx-charts-y-axis",""];function CTe(t,n){if(t&1){let e=qt();Ze(),M(0,"g",2),_e("dimensionsChanged",function(r){Le(e);let o=ee();return Pe(o.emitTicksWidth(r))}),O()}if(t&2){let e=ee();J("trimTicks",e.trimTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickValues",e.ticks)("tickStroke",e.tickStroke)("scale",e.yScale)("orient",e.yOrient)("showGridLines",e.showGridLines)("gridLineWidth",e.dims.width)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("height",e.dims.height)("wrapTicks",e.wrapTicks)}}function TTe(t,n){if(t&1&&(Ze(),Ee(0,"g",3)),t&2){let e=ee();J("label",e.labelText)("offset",e.labelOffset)("orient",e.yOrient)("height",e.dims.height)("width",e.dims.width)}}var STe=["ngx-charts-circle",""],kTe=["ngx-charts-svg-linear-gradient",""];function ETe(t,n){if(t&1&&(Ze(),Ee(0,"stop")),t&2){let e=n.$implicit;Fi("stop-color",e.color)("stop-opacity",e.opacity),$e("offset",e.offset+"%")}}var ITe=["ngx-charts-circle-series",""],DTe=t=>({name:t});function ATe(t,n){if(t&1&&(Ze(),Ee(0,"rect",4)),t&2){let e=ee(2);J("@animationState","active"),$e("x",e.circle.cx-e.circle.radius)("y",e.circle.cy)("width",e.circle.radius*2)("height",e.circle.height)("fill",e.gradientFill)}}function NTe(t,n){if(t&1&&(Ze(),Ee(0,"rect",4)),t&2){let e=ee(2);$e("x",e.circle.cx-e.circle.radius)("y",e.circle.cy)("width",e.circle.radius*2)("height",e.circle.height)("fill",e.gradientFill)}}function MTe(t,n){if(t&1){let e=qt();Ze(),M(0,"g")(1,"defs"),Ee(2,"g",1),O(),be(3,ATe,1,6,"rect",2)(4,NTe,1,5,"rect",2),M(5,"g",3),_e("select",function(){Le(e);let r=ee();return Pe(r.onClick(r.circle.data))})("activate",function(){Le(e);let r=ee();return Pe(r.activateCircle())})("deactivate",function(){Le(e);let r=ee();return Pe(r.deactivateCircle())}),O()()}if(t&2){let e=ee();V(2),J("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.circle.gradientStops),V(),J("ngIf",!e.isSSR&&e.barVisible&&e.type==="standard"),V(),J("ngIf",e.isSSR&&e.barVisible&&e.type==="standard"),V(),rt("active",e.isActive(hO(20,DTe,e.circle.seriesName))),J("cx",e.circle.cx)("cy",e.circle.cy)("r",e.circle.radius)("fill",e.circle.color)("pointerEvents",e.circle.value===0?"none":"all")("data",e.circle.value)("classNames",e.circle.classNames)("tooltipDisabled",e.tooltipDisabled)("tooltipPlacement",e.placementTypes.Top)("tooltipType",e.styleTypes.tooltip)("tooltipTitle",e.tooltipTemplate?void 0:e.getTooltipText(e.circle))("tooltipTemplate",e.tooltipTemplate)("tooltipContext",e.circle.data)}}var OTe=["ngx-charts-area",""];function RTe(t,n){if(t&1&&(Ze(),M(0,"defs"),Ee(1,"g",2),O()),t&2){let e=ee();V(),J("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.gradientStops)}}var FTe=["tooltipAnchor"],LTe=["ngx-charts-tooltip-area",""];function PTe(t,n){if(t&1&&(M(0,"div",6),Ee(1,"span",7),X(2),O()),t&2){let e=n.$implicit,i=ee(2);V(),Fi("background-color",e.color),V(),xn(" ",i.getToolTipText(e)," ")}}function $Te(t,n){if(t&1&&(M(0,"div",4),be(1,PTe,3,3,"div",5),O()),t&2){let e=n.model;V(),J("ngForOf",e)}}var VTe=["ngx-charts-timeline",""];var BTe=["tooltipTemplate"],zTe=["seriesTooltipTemplate"],W8=(t,n)=>[t,n];var GTe=`.ngx-charts-outer{animation:chartFadeIn linear .6s}@keyframes chartFadeIn{0%{opacity:0}20%{opacity:0}to{opacity:1}}.ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .cell,.ngx-charts .bar,.ngx-charts .node,.ngx-charts .link,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .node.active,.ngx-charts .node:hover,.ngx-charts .link.active,.ngx-charts .link:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .node:focus,.ngx-charts .link:focus,.ngx-charts .card:focus{outline:none}.ngx-charts .bar.hidden,.ngx-charts .cell.hidden,.ngx-charts .arc.hidden,.ngx-charts .node.hidden,.ngx-charts .link.hidden,.ngx-charts .card.hidden{display:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .polar-series-path.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}
`;var UTe=["ngx-charts-line",""];function HTe(t,n){if(t&1&&(Ze(),M(0,"g"),Ee(1,"path",1),O()),t&2){let e=ee();V(),J("@animationState","active"),$e("d",e.initialPath)("fill",e.fill)("stroke",e.stroke)}}function WTe(t,n){if(t&1&&(Ze(),M(0,"g"),Ee(1,"path",1),O()),t&2){let e=ee();V(),$e("d",e.initialPath)("fill",e.fill)("stroke",e.stroke)}}var jTe=["ngx-charts-line-series",""];function qTe(t,n){if(t&1&&(Ze(),Ee(0,"g",4)),t&2){let e=ee();J("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.gradientStops)}}function XTe(t,n){if(t&1&&(Ze(),Ee(0,"g",5)),t&2){let e=ee();rt("active",e.isActive(e.data))("inactive",e.isInactive(e.data)),J("data",e.data)("path",e.outerPath)("fill",e.hasGradient?e.gradientUrl:e.colors.getColor(e.data.name))("opacity",e.rangeFillOpacity)("animations",e.animations)}}function KTe(t,n){if(t&1){let e=qt();Ze(),M(0,"g",7),_e("dimensionsChanged",function(r){Le(e);let o=ee();return Pe(o.updateXAxisHeight(r))}),O()}if(t&2){let e=ee();J("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)("wrapTicks",e.wrapTicks)}}function YTe(t,n){if(t&1){let e=qt();Ze(),M(0,"g",8),_e("dimensionsChanged",function(r){Le(e);let o=ee();return Pe(o.updateYAxisWidth(r))}),O()}if(t&2){let e=ee();J("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("wrapTicks",e.wrapTicks)}}function QTe(t,n){if(t&1&&(Ze(),M(0,"g"),Ee(1,"g",10),O()),t&2){let e=n.$implicit,i=ee(2);J("@animationState","active"),V(),J("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("scaleType",i.scaleType)("curve",i.curve)("rangeFillOpacity",i.rangeFillOpacity)("hasRange",i.hasRange)("animations",i.animations)}}function ZTe(t,n){if(t&1&&(Ze(),M(0,"g"),be(1,QTe,2,11,"g",9),O()),t&2){let e=ee();V(),J("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function JTe(t,n){if(t&1&&(Ze(),M(0,"g"),Ee(1,"g",10),O()),t&2){let e=n.$implicit,i=ee(2);V(),J("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("scaleType",i.scaleType)("curve",i.curve)("rangeFillOpacity",i.rangeFillOpacity)("hasRange",i.hasRange)("animations",i.animations)}}function eSe(t,n){if(t&1&&(Ze(),M(0,"g"),be(1,JTe,2,10,"g",9),O()),t&2){let e=ee();V(),J("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function tSe(t,n){if(t&1){let e=qt();Ze(),M(0,"g")(1,"g",14),_e("select",function(r){Le(e);let o=ee(2);return Pe(o.onClick(r))})("activate",function(r){Le(e);let o=ee(2);return Pe(o.onActivate(r))})("deactivate",function(r){Le(e);let o=ee(2);return Pe(o.onDeactivate(r))}),O()()}if(t&2){let e=n.$implicit,i=ee(2);V(),J("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("visibleValue",i.hoveredVertical)("activeEntries",i.activeEntries)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function nSe(t,n){if(t&1){let e=qt();Ze(),M(0,"g",11),_e("mouseleave",function(){Le(e);let r=ee();return Pe(r.hideCircles())}),M(1,"g",12),_e("hover",function(r){Le(e);let o=ee();return Pe(o.updateHoveredVertical(r))}),O(),be(2,tSe,2,9,"g",13),O()}if(t&2){let e=ee();V(),J("dims",e.dims)("xSet",e.xSet)("xScale",e.xScale)("yScale",e.yScale)("results",e.results)("colors",e.colors)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.seriesTooltipTemplate),V(),J("ngForOf",e.results)}}function iSe(t,n){if(t&1&&(Ze(),M(0,"g"),Ee(1,"g",16),O()),t&2){let e=n.$implicit,i=ee(2);V(),J("xScale",i.timelineXScale)("yScale",i.timelineYScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("curve",i.curve)("hasRange",i.hasRange)("animations",i.animations)}}function rSe(t,n){if(t&1){let e=qt();Ze(),M(0,"g",15),_e("onDomainChange",function(r){Le(e);let o=ee();return Pe(o.updateDomain(r))}),be(1,iSe,2,8,"g",9),O()}if(t&2){let e=ee();J("results",e.results)("view",Cx(10,W8,e.timelineWidth,e.height))("height",e.timelineHeight)("scheme",e.scheme)("customColors",e.customColors)("scaleType",e.scaleType)("legend",e.legend),$e("transform",e.timelineTransform),V(),J("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function oSe(t,n,e){e=e||{};let i,r,o,s=null,a=0;function l(){a=e.leading===!1?0:+new Date,s=null,o=t.apply(i,r)}return function(){let c=+new Date;!a&&e.leading===!1&&(a=c);let u=n-(c-a);return i=this,r=arguments,u<=0?(clearTimeout(s),s=null,a=c,o=t.apply(i,r)):!s&&e.trailing!==!1&&(s=setTimeout(l,u)),o}}function sSe(t,n){return function(i,r,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,r,{configurable:!0,enumerable:o.enumerable,value:oSe(o.value,t,n)}),this[r]}}}}var Xt=function(t){return t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.Center="center",t}(Xt||{}),Gu=7;function M8(t,n,e){if(e===Xt.Top)return t.top-Gu;if(e===Xt.Bottom)return t.top+t.height-n.height+Gu;if(e===Xt.Center)return t.top+t.height/2-n.height/2}function O8(t,n,e){if(e===Xt.Left)return t.left-Gu;if(e===Xt.Right)return t.left+t.width-n.width+Gu;if(e===Xt.Center)return t.left+t.width/2-n.width/2}var v0=class t{static calculateVerticalAlignment(n,e,i){let r=M8(n,e,i);return r+e.height>window.innerHeight&&(r=window.innerHeight-e.height),r}static calculateVerticalCaret(n,e,i,r){let o;r===Xt.Top&&(o=n.height/2-i.height/2+Gu),r===Xt.Bottom&&(o=e.height-n.height/2-i.height/2-Gu),r===Xt.Center&&(o=e.height/2-i.height/2);let s=M8(n,e,r);return s+e.height>window.innerHeight&&(o+=s+e.height-window.innerHeight),o}static calculateHorizontalAlignment(n,e,i){let r=O8(n,e,i);return r+e.width>window.innerWidth&&(r=window.innerWidth-e.width),r}static calculateHorizontalCaret(n,e,i,r){let o;r===Xt.Left&&(o=n.width/2-i.width/2+Gu),r===Xt.Right&&(o=e.width-n.width/2-i.width/2-Gu),r===Xt.Center&&(o=e.width/2-i.width/2);let s=O8(n,e,r);return s+e.width>window.innerWidth&&(o+=s+e.width-window.innerWidth),o}static shouldFlip(n,e,i,r){let o=!1;return i===Xt.Right&&n.left+n.width+e.width+r>window.innerWidth&&(o=!0),i===Xt.Left&&n.left-e.width-r<0&&(o=!0),i===Xt.Top&&n.top-e.height-r<0&&(o=!0),i===Xt.Bottom&&n.top+n.height+e.height+r>window.innerHeight&&(o=!0),o}static positionCaret(n,e,i,r,o){let s=0,a=0;return n===Xt.Right?(a=-7,s=t.calculateVerticalCaret(i,e,r,o)):n===Xt.Left?(a=e.width,s=t.calculateVerticalCaret(i,e,r,o)):n===Xt.Top?(s=e.height,a=t.calculateHorizontalCaret(i,e,r,o)):n===Xt.Bottom&&(s=-7,a=t.calculateHorizontalCaret(i,e,r,o)),{top:s,left:a}}static positionContent(n,e,i,r,o){let s=0,a=0;return n===Xt.Right?(a=i.left+i.width+r,s=t.calculateVerticalAlignment(i,e,o)):n===Xt.Left?(a=i.left-e.width-r,s=t.calculateVerticalAlignment(i,e,o)):n===Xt.Top?(s=i.top-e.height-r,a=t.calculateHorizontalAlignment(i,e,o)):n===Xt.Bottom&&(s=i.top+i.height+r,a=t.calculateHorizontalAlignment(i,e,o)),{top:s,left:a}}static determinePlacement(n,e,i,r){if(t.shouldFlip(i,e,n,r)){if(n===Xt.Right)return Xt.Left;if(n===Xt.Left)return Xt.Right;if(n===Xt.Top)return Xt.Bottom;if(n===Xt.Bottom)return Xt.Top}return n}},aSe=(()=>{class t{get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}constructor(e,i,r){this.element=e,this.renderer=i,this.platformId=r}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!Bs(this.platformId))return;let e=this.element.nativeElement,i=this.host.nativeElement.getBoundingClientRect();if(!i.height&&!i.width)return;let r=e.getBoundingClientRect();this.checkFlip(i,r),this.positionContent(e,i,r),this.showCaret&&this.positionCaret(i,r),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,i,r){let{top:o,left:s}=v0.positionContent(this.placement,r,i,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${o}px`),this.renderer.setStyle(e,"left",`${s}px`)}positionCaret(e,i){let r=this.caretElm.nativeElement,o=r.getBoundingClientRect(),{top:s,left:a}=v0.positionCaret(this.placement,i,e,o,this.alignment);this.renderer.setStyle(r,"top",`${s}px`),this.renderer.setStyle(r,"left",`${a}px`)}checkFlip(e,i){this.placement=v0.determinePlacement(this.placement,i,e,this.spacing)}onWindowResize(){this.position()}static{this.\u0275fac=function(i){return new(i||t)(Ae(nt),Ae(hi),Ae(zr))}}static{this.\u0275cmp=Ne({type:t,selectors:[["ngx-tooltip-content"]],viewQuery:function(i,r){if(i&1&&an(LCe,5),i&2){let o;Gt(o=Ut())&&(r.caretElm=o.first)}},hostVars:2,hostBindings:function(i,r){i&1&&_e("resize",function(){return r.onWindowResize()},!1,V4),i&2&&Hr(r.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},standalone:!1,decls:6,vars:6,consts:[["caretElm",""],[3,"hidden"],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(i,r){i&1&&(M(0,"div"),Ee(1,"span",1,0),M(3,"div",2),be(4,VCe,2,4,"span",3)(5,BCe,1,1,"span",4),O()()),i&2&&(V(),PC("tooltip-caret position-",r.placement,""),J("hidden",!r.showCaret),V(3),J("ngIf",!r.title),V(),J("ngIf",r.title))},dependencies:[Yn,vO],styles:[`.ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:#000000bf;font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translateZ(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}
`],encapsulation:2})}}return XB([sSe(100)],t.prototype,"onWindowResize",null),t})(),A2=class{constructor(n){this.injectionService=n,this.defaults={},this.components=new Map}getByType(n=this.type){return this.components.get(n)}create(n){return this.createByType(this.type,n)}createByType(n,e){e=this.assignDefaults(e);let i=this.injectComponent(n,e);return this.register(n,i),i}destroy(n){let e=this.components.get(n.componentType);if(e&&e.length){let i=e.indexOf(n);i>-1&&(e[i].destroy(),e.splice(i,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(n){let e=this.components.get(n);if(e&&e.length){let i=e.length-1;for(;i>=0;)this.destroy(e[i--])}}injectComponent(n,e){return this.injectionService.appendComponent(n,e)}assignDefaults(n){let e=re({},this.defaults.inputs),i=re({},this.defaults.outputs);return!n.inputs&&!n.outputs&&(n={inputs:n}),e&&(n.inputs=re(re({},e),n.inputs)),i&&(n.outputs=re(re({},i),n.outputs)),n}register(n,e){this.components.has(n)||this.components.set(n,[]),this.components.get(n).push(e)}};function lSe(t){return t.element}var j8=(()=>{class t{static{this.globalRootViewContainer=null}static setGlobalRootViewContainer(e){t.globalRootViewContainer=e}constructor(e,i,r){this.applicationRef=e,this.componentFactoryResolver=i,this.injector=r}getRootViewContainer(){if(this._container)return this._container;if(t.globalRootViewContainer)return t.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return lSe(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,i){if(i){if(i.inputs!==void 0){let r=Object.getOwnPropertyNames(i.inputs);for(let o of r)e.instance[o]=i.inputs[o]}if(i.outputs!==void 0){let r=Object.getOwnPropertyNames(i.outputs);for(let o of r)e.instance[o]=i.outputs[o]}}return e}appendComponent(e,i={},r){r||(r=this.getRootViewContainer());let o=this.getComponentRootNode(r),s=new Qp(o,this.componentFactoryResolver,this.applicationRef,this.injector),a=new go(e),l=s.attach(a);return this.projectComponentBindings(l,i),l}static{this.\u0275fac=function(i){return new(i||t)(qe(Br),qe(vf),qe(Vt))}}static{this.\u0275prov=pe({token:t,factory:t.\u0275fac})}}return t})(),O2=(()=>{class t extends A2{constructor(e){super(e),this.type=aSe}static{this.\u0275fac=function(i){return new(i||t)(qe(j8))}}static{this.\u0275prov=pe({token:t,factory:t.\u0275fac})}}return t})(),_h=function(t){return t.Right="right",t.Below="below",t}(_h||{}),x0=function(t){return t.ScaleLegend="scaleLegend",t.Legend="legend",t}(x0||{}),ct=function(t){return t.Time="time",t.Linear="linear",t.Ordinal="ordinal",t.Quantile="quantile",t}(ct||{});function q8(t){return t instanceof Date?t=t.toLocaleDateString():t=t.toLocaleString(),t}function R8(t){return t.toLocaleString().replace(/[&'`"<>]/g,n=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"})[n])}var cSe=(()=>{class t{constructor(){this.isActive=!1,this.select=new ke,this.activate=new ke,this.deactivate=new ke,this.toggle=new ke}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(i,r){i&1&&_e("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{color:"color",label:"label",formattedLabel:"formattedLabel",isActive:"isActive"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},standalone:!1,decls:4,vars:6,consts:[["tabindex","-1",3,"click","title"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(i,r){i&1&&(M(0,"span",0),_e("click",function(){return r.select.emit(r.formattedLabel)}),M(1,"span",1),_e("click",function(){return r.toggle.emit(r.formattedLabel)}),O(),M(2,"span",2),X(3),O()()),i&2&&(rt("active",r.isActive),J("title",r.formattedLabel),V(),Fi("background-color",r.color),V(2),xn(" ",r.trimmedLabel," "))},encapsulation:2,changeDetection:0})}}return t})(),uSe=(()=>{class t{constructor(e){this.cd=e,this.horizontal=!1,this.labelClick=new ke,this.labelActivate=new ke,this.labelDeactivate=new ke,this.legendEntries=[]}ngOnChanges(e){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){let e=[];for(let i of this.data){let r=q8(i);e.findIndex(s=>s.label===r)===-1&&e.push({label:i,formattedLabel:r,color:this.colors.getColor(i)})}return e}isActive(e){return this.activeEntries?this.activeEntries.find(r=>e.label===r.name)!==void 0:!1}activate(e){this.labelActivate.emit(e)}deactivate(e){this.labelDeactivate.emit(e)}trackBy(e,i){return i.label}static{this.\u0275fac=function(i){return new(i||t)(Ae(mn))}}static{this.\u0275cmp=Ne({type:t,selectors:[["ngx-charts-legend"]],inputs:{data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries",horizontal:"horizontal"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},standalone:!1,features:[Jt],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"select","activate","deactivate","label","formattedLabel","color","isActive"]],template:function(i,r){i&1&&(M(0,"div"),be(1,zCe,3,1,"header",0),M(2,"div",1)(3,"ul",2),be(4,GCe,2,4,"li",3),O()()()),i&2&&(Fi("width",r.width,"px"),V(),J("ngIf",(r.title==null?null:r.title.length)>0),V(2),Fi("max-height",r.height-45,"px"),rt("horizontal-legend",r.horizontal),V(),J("ngForOf",r.legendEntries)("ngForTrackBy",r.trackBy))},dependencies:[Wr,Yn,cSe],styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend ul,.chart-legend li{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:#0000000d}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;-webkit-transition:.2s;-moz-transition:.2s;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}
`],encapsulation:2,changeDetection:0})}}return t})(),dSe=(()=>{class t{constructor(){this.horizontal=!1}ngOnChanges(e){let i=this.gradientString(this.colors.range(),this.colors.domain()),r=this.horizontal?"right":"bottom";this.gradient=`linear-gradient(to ${r}, ${i})`}gradientString(e,i){i.push(1);let r=[];return e.reverse().forEach((o,s)=>{r.push(`${o} ${Math.round(i[s]*100)}%`)}),r.join(", ")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["ngx-charts-scale-legend"]],inputs:{valueRange:"valueRange",colors:"colors",height:"height",width:"width",horizontal:"horizontal"},standalone:!1,features:[Jt],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(i,r){i&1&&(M(0,"div",0)(1,"div",1)(2,"span"),X(3),O()(),Ee(4,"div",2),M(5,"div",1)(6,"span"),X(7),O()()()),i&2&&(Fi("height",r.horizontal?void 0:r.height,"px")("width",r.width,"px"),rt("horizontal-legend",r.horizontal),V(3),xt(r.valueRange[1].toLocaleString()),V(),Fi("background",r.gradient),V(3),xt(r.valueRange[0].toLocaleString()))},styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}
`],encapsulation:2,changeDetection:0})}}return t})(),pSe=(()=>{class t{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new ke,this.legendLabelActivate=new ke,this.legendLabelDeactivate=new ke,this.LegendPosition=_h,this.LegendType=x0}ngOnChanges(e){this.update()}update(){let e=0;this.showLegend&&(this.legendType=this.getLegendType(),(!this.legendOptions||this.legendOptions.position===_h.Right)&&(this.legendType===x0.ScaleLegend?e=1:e=2));let i=12-e;this.chartWidth=Math.floor(this.view[0]*i/12),this.legendWidth=!this.legendOptions||this.legendOptions.position===_h.Right?Math.floor(this.view[0]*e/12):this.chartWidth}getLegendType(){return this.legendOptions.scaleType===ct.Linear?x0.ScaleLegend:x0.Legend}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["ngx-charts-chart"]],inputs:{view:"view",showLegend:"showLegend",legendOptions:"legendOptions",legendType:"legendType",activeEntries:"activeEntries",animations:"animations"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},standalone:!1,features:[xi([O2]),Jt],ngContentSelectors:U8,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"labelClick","labelActivate","labelDeactivate","horizontal","data","title","colors","height","width","activeEntries"]],template:function(i,r){i&1&&(Kn(),M(0,"div",0),Ze(),M(1,"svg",1),bn(2),O(),be(3,UCe,1,5,"ngx-charts-scale-legend",2)(4,HCe,1,7,"ngx-charts-legend",3),O()),i&2&&(Fi("width",r.view[0],"px")("height",r.view[1],"px"),V(),$e("width",r.chartWidth)("height",r.view[1]),V(2),J("ngIf",r.showLegend&&r.legendType===r.LegendType.ScaleLegend),V(),J("ngIf",r.showLegend&&r.legendType===r.LegendType.Legend))},dependencies:[Yn,uSe,dSe],encapsulation:2,changeDetection:0})}}return t})(),hSe=(()=>{class t{constructor(e,i){this.element=e,this.zone=i,this.visible=new ke,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){let e=()=>{if(!this.element)return;let{offsetHeight:i,offsetWidth:r}=this.element.nativeElement;i&&r?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}static{this.\u0275fac=function(i){return new(i||t)(Ae(nt),Ae(Xe))}}static{this.\u0275dir=st({type:t,selectors:[["visibility-observer"]],outputs:{visible:"visible"},standalone:!1})}}return t})();function F8(t){return toString.call(t)==="[object Date]"}var mSe=(()=>{class t{constructor(e,i,r,o){this.chartElement=e,this.zone=i,this.cd=r,this.platformId=o,this.scheme="cool",this.schemeType=ct.Ordinal,this.animations=!0,this.select=new ke}ngOnInit(){kl(this.platformId)&&(this.animations=!1)}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new hSe(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(e){this.update()}update(){if(this.results?this.results=this.cloneData(this.results):this.results=[],this.view)this.width=this.view[0],this.height=this.view[1];else{let e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,i,r=this.chartElement.nativeElement;if(Bs(this.platformId)&&r.parentNode!==null){let o=r.parentNode.getBoundingClientRect();e=o.width,i=o.height}return e&&i?{width:e,height:i}:null}formatDates(){for(let e=0;e<this.results.length;e++){let i=this.results[e];if(i.label=i.name,F8(i.label)&&(i.label=i.label.toLocaleDateString()),i.series)for(let r=0;r<i.series.length;r++){let o=i.series[r];o.label=o.name,F8(o.label)&&(o.label=o.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){if(!Bs(this.platformId))return;let i=nx(window,"resize").pipe(dp(200)).subscribe(r=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=i}cloneData(e){let i=[];for(let r of e){let o={};if(r.name!==void 0&&(o.name=r.name),r.value!==void 0&&(o.value=r.value),r.series!==void 0){o.series=[];for(let s of r.series){let a=Object.assign({},s);o.series.push(a)}}r.extra!==void 0&&(o.extra=JSON.parse(JSON.stringify(r.extra))),r.source!==void 0&&(o.source=r.source),r.target!==void 0&&(o.target=r.target),i.push(o)}return i}static{this.\u0275fac=function(i){return new(i||t)(Ae(nt),Ae(Xe),Ae(mn),Ae(zr))}}static{this.\u0275cmp=Ne({type:t,selectors:[["base-chart"]],inputs:{results:"results",view:"view",scheme:"scheme",schemeType:"schemeType",customColors:"customColors",animations:"animations"},outputs:{select:"select"},standalone:!1,features:[Jt],decls:1,vars:0,template:function(i,r){i&1&&Ee(0,"div")},encapsulation:2})}}return t})(),lr=function(t){return t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t}(lr||{}),X8=(()=>{class t{constructor(e){this.textHeight=25,this.margin=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case lr.Top:this.y=this.offset,this.x=this.width/2;break;case lr.Bottom:this.y=this.offset,this.x=this.width/2;break;case lr.Left:this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case lr.Right:this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)";break;default:}}static{this.\u0275fac=function(i){return new(i||t)(Ae(nt))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},standalone:!1,features:[Jt],attrs:WCe,decls:2,vars:6,template:function(i,r){i&1&&(Ze(),M(0,"text"),X(1),O()),i&2&&($e("stroke-width",r.strokeWidth)("x",r.x)("y",r.y)("text-anchor",r.textAnchor)("transform",r.transform),V(),xn(" ",r.label," "))},encapsulation:2,changeDetection:0})}}return t})();function K8(t,n=16){return typeof t!="string"?typeof t=="number"?t+"":"":(t=t.trim(),t.length<=n?t:`${t.slice(0,n)}...`)}function Y8(t,n){if(t.length>n){let e=[],i=Math.floor(t.length/n);for(let r=0;r<t.length;r++)r%i===0&&e.push(t[r]);t=e}return t}function Q8(t,n,e){let i=(t||"").toString(),r=[];if(/\s/.test(i))r=i.split(/\s+/).reduce((o,s)=>{let a=(o.pop()||"")+" ";return a.length+s.length>n?[...o,a.trim(),s.trim()]:[...o,a+s]},[]);else{let o=0;for(;o<i.length;)r.push(i.substring(o,o+n)),o+=n}return r.length>e&&(r=r.splice(0,e),r[r.length-1]+="..."),r}var Ul=function(t){return t.Start="start",t.Middle="middle",t.End="end",t}(Ul||{}),L8=(()=>{class t{get isWrapTicksSupported(){return this.wrapTicks&&this.scale.step}constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.wrapTicks=!1,this.dimensionsChanged=new ke,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor=Ul.Middle,this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0,this.approxHeight=10,this.maxPossibleLengthForTickIfWrapped=16}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!Bs(this.platformId)){this.dimensionsChanged.emit({height:this.approxHeight});return}let e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);e!==this.height&&(this.height=e,this.dimensionsChanged.emit({height:this.height}),setTimeout(()=>this.updateDims()))}update(){let e=this.scale;this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(r){return r.constructor.name==="Date"?r.toLocaleDateString():r.toLocaleString()};let i=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(r){return this.scale(r)+this.scale.bandwidth()*.5}:this.scale,this.textTransform="",i&&i!==0?(this.textTransform=`rotate(${i})`,this.textAnchor=Ul.End,this.verticalSpacing=10):this.textAnchor=Ul.Middle,setTimeout(()=>this.updateDims())}getRotationAngle(e){let i=0;this.maxTicksLength=0;for(let d=0;d<e.length;d++){let p=this.tickFormat(e[d]).toString(),h=p.length;this.trimTicks&&(h=this.tickTrim(p).length),h>this.maxTicksLength&&(this.maxTicksLength=h)}let r=Math.min(this.maxTicksLength,this.maxAllowedLength),o=7,s=r*o,a=s,l=Math.floor(this.width/e.length);for(;a>l&&i>-90;)i-=30,a=Math.cos(i*(Math.PI/180))*s;let c=14;if(this.isWrapTicksSupported){let d=this.ticks.reduce((h,m)=>m.length>h.length?m:h,"");c=14*(this.tickChunks(d).length||1),this.maxPossibleLengthForTickIfWrapped=this.getMaxPossibleLengthForTick(d)}let u=i!==0?Math.max(Math.abs(Math.sin(i*Math.PI/180))*this.maxTickLength*o,10):c;return this.approxHeight=Math.min(u,200),i}getTicks(){let e,i=this.getMaxTicks(20),r=this.getMaxTicks(100);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[r]):(e=this.scale.domain(),e=Y8(e,i)),e}getMaxTicks(e){return Math.floor(this.width/e)}tickTransform(e){return"translate("+this.adjustedScale(e)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(e){return this.trimTicks?K8(e,this.maxTickLength):e}getMaxPossibleLengthForTick(e){if(this.scale.bandwidth){let r=Math.floor(this.scale.bandwidth()/7),o=e.slice(0,r);return Math.max(o.length,this.maxTickLength)}return this.maxTickLength}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){let r=this.rotateTicks?Math.floor(this.scale.step()/14):5;if(r<=1)return[this.tickTrim(e)];let o=Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength);return Bs(this.platformId)||(o=Math.floor(Math.min(this.approxHeight/5,Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength)))),r=Math.min(r,5),Q8(e,o,r<1?1:r)}return[this.tickTrim(e)]}static{this.\u0275fac=function(i){return new(i||t)(Ae(zr))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(i,r){if(i&1&&an(H8,5),i&2){let o;Gt(o=Ut())&&(r.ticksElement=o.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineHeight:"gridLineHeight",width:"width",rotateTicks:"rotateTicks",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Jt],attrs:jCe,decls:4,vars:2,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01","font-size","12px"],[4,"ngIf","ngIfThen","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(i,r){i&1&&(Ze(),M(0,"g",null,0),be(2,JCe,2,2,"g",3),O(),be(3,tTe,2,2,"g",4)),i&2&&(V(2),J("ngForOf",r.ticks),V(),J("ngForOf",r.ticks))},dependencies:[Wr,Yn],encapsulation:2,changeDetection:0})}}return t})(),fSe=(()=>{class t{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient=lr.Bottom,this.xAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new ke,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5,this.orientation=lr}ngOnChanges(e){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,typeof this.xAxisTickCount<"u"&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:e}){let i=e+25+5;i!==this.labelOffset&&(this.labelOffset=i,setTimeout(()=>{this.dimensionsChanged.emit({height:e})},0))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(i,r){if(i&1&&an(L8,5),i&2){let o;Gt(o=Ut())&&(r.ticksComponent=o.first)}},inputs:{xScale:"xScale",dims:"dims",trimTicks:"trimTicks",rotateTicks:"rotateTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickCount:"xAxisTickCount",xOrient:"xOrient",xAxisOffset:"xAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Jt],attrs:nTe,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"dimensionsChanged","trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(i,r){i&1&&(Ze(),M(0,"g"),be(1,iTe,1,13,"g",0)(2,rTe,1,5,"g",1),O()),i&2&&($e("class",r.xAxisClassName)("transform",r.transform),V(),J("ngIf",r.xScale),V(),J("ngIf",r.showLabel))},dependencies:[Yn,X8,L8],encapsulation:2,changeDetection:0})}}return t})();function gSe(t,n,e,i,r,[o,s,a,l]){let c="";return e=Math.floor(e),i=Math.floor(i),e=e===0?1:e,i=i===0?1:i,c=`M${[t+r,n]}`,c+=`h${e-2*r}`,s?c+=`a${[r,r]} 0 0 1 ${[r,r]}`:c+=`h${r}v${r}`,c+=`v${i-2*r}`,l?c+=`a${[r,r]} 0 0 1 ${[-r,r]}`:c+=`v${r}h${-r}`,c+=`h${2*r-e}`,a?c+=`a${[r,r]} 0 0 1 ${[-r,-r]}`:c+=`h${-r}v${-r}`,c+=`v${2*r-i}`,o?c+=`a${[r,r]} 0 0 1 ${[r,-r]}`:c+=`v${-r}h${r}`,c+="z",c}var P8=(()=>{class t{constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.wrapTicks=!1,this.dimensionsChanged=new ke,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor=Ul.Middle,this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0,this.Orientation=lr}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!Bs(this.platformId)){this.width=this.getApproximateAxisWidth(),this.dimensionsChanged.emit({width:this.width});return}let e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);e!==this.width&&(this.width=e,this.dimensionsChanged.emit({width:e}),setTimeout(()=>this.updateDims()))}update(){let e=this.scale,i=this.orient===lr.Top||this.orient===lr.Right?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(r){return r.constructor.name==="Date"?r.toLocaleDateString():r.toLocaleString()},this.adjustedScale=e.bandwidth?r=>{let o=e(r)+e.bandwidth()*.5;if(this.wrapTicks&&r.toString().length>this.maxTickLength){let s=this.tickChunks(r).length;if(s===1)return o;let a=e.bandwidth(),l=s*8,c=a*.5-l*.5;return e(r)+c}return o}:e,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case lr.Top:this.transform=function(r){return"translate("+this.adjustedScale(r)+",0)"},this.textAnchor=Ul.Middle,this.y2=this.innerTickSize*i,this.y1=this.tickSpacing*i,this.dy=i<0?"0em":".71em";break;case lr.Bottom:this.transform=function(r){return"translate("+this.adjustedScale(r)+",0)"},this.textAnchor=Ul.Middle,this.y2=this.innerTickSize*i,this.y1=this.tickSpacing*i,this.dy=i<0?"0em":".71em";break;case lr.Left:this.transform=function(r){return"translate(0,"+this.adjustedScale(r)+")"},this.textAnchor=Ul.End,this.x2=this.innerTickSize*-i,this.x1=this.tickSpacing*-i,this.dy=".32em";break;case lr.Right:this.transform=function(r){return"translate(0,"+this.adjustedScale(r)+")"},this.textAnchor=Ul.Start,this.x2=this.innerTickSize*-i,this.x1=this.tickSpacing*-i,this.dy=".32em";break;default:}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(e=>e.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(e=>e.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=gSe(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let e,i=this.getMaxTicks(20),r=this.getMaxTicks(50);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[r]):(e=this.scale.domain(),e=Y8(e,i)),e}getMaxTicks(e){return Math.floor(this.height/e)}tickTransform(e){return`translate(${this.adjustedScale(e)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(e){return this.trimTicks?K8(e,this.maxTickLength):e}getApproximateAxisWidth(){return Math.max(...this.ticks.map(r=>this.tickTrim(this.tickFormat(r)).length))*7}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){let i=this.maxTickLength,r=Math.floor(this.scale.bandwidth()/15);return r<=1?[this.tickTrim(e)]:Q8(e,i,Math.min(r,5))}return[this.tickFormat(e)]}static{this.\u0275fac=function(i){return new(i||t)(Ae(zr))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(i,r){if(i&1&&an(H8,5),i&2){let o;Gt(o=Ut())&&(r.ticksElement=o.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Jt],attrs:oTe,decls:6,vars:4,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],[1,"reference-area"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(i,r){i&1&&(Ze(),M(0,"g",null,0),be(2,hTe,2,2,"g",3),O(),be(3,mTe,1,2,"path",4)(4,bTe,2,2,"g",5)(5,_Te,2,1,"g",5)),i&2&&(V(2),J("ngForOf",r.ticks),V(),J("ngIf",r.referenceLineLength>1&&r.refMax&&r.refMin&&r.showRefLines),V(),J("ngForOf",r.ticks),V(),J("ngForOf",r.referenceLines))},dependencies:[Wr,Yn],encapsulation:2,changeDetection:0})}}return t})(),ySe=(()=>{class t{constructor(){this.showGridLines=!1,this.yOrient=lr.Left,this.yAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new ke,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(e){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),this.yOrient===lr.Right?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):this.transform=`translate(${this.offset} , 0)`,this.yAxisTickCount!==void 0&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:e}){e!==this.labelOffset&&this.yOrient===lr.Right?(this.labelOffset=e+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0)):e!==this.labelOffset&&(this.labelOffset=e,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(i,r){if(i&1&&an(P8,5),i&2){let o;Gt(o=Ut())&&(r.ticksComponent=o.first)}},inputs:{yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",yAxisTickCount:"yAxisTickCount",yOrient:"yOrient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",yAxisOffset:"yAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Jt],attrs:wTe,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"dimensionsChanged","trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(i,r){i&1&&(Ze(),M(0,"g"),be(1,CTe,1,15,"g",0)(2,TTe,1,5,"g",1),O()),i&2&&($e("class",r.yAxisClassName)("transform",r.transform),V(),J("ngIf",r.yScale),V(),J("ngIf",r.showLabel))},dependencies:[Yn,X8,P8],encapsulation:2,changeDetection:0})}}return t})(),$8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[mi]})}}return t})(),U1=function(t){return t.popover="popover",t.tooltip="tooltip",t}(U1||{}),Rg=function(t){return t[t.all="all"]="all",t[t.focus="focus"]="focus",t[t.mouseover="mouseover"]="mouseover",t}(Rg||{}),Z8=(()=>{class t{get listensForFocus(){return this.tooltipShowEvent===Rg.all||this.tooltipShowEvent===Rg.focus}get listensForHover(){return this.tooltipShowEvent===Rg.all||this.tooltipShowEvent===Rg.mouseover}constructor(e,i,r){this.tooltipService=e,this.viewContainerRef=i,this.renderer=r,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=Xt.Top,this.tooltipAlignment=Xt.Center,this.tooltipType=U1.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Rg.all,this.tooltipImmediateExit=!1,this.show=new ke,this.hide=new ke}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;let i=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?400:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();let r=this.createBoundOptions();this.component=this.tooltipService.create(r),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},i)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",i=>{e.contains(i.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;let i=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?i():this.timeout=setTimeout(i,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}static{this.\u0275fac=function(i){return new(i||t)(Ae(O2),Ae(Wi),Ae(hi))}}static{this.\u0275dir=st({type:t,selectors:[["","ngx-tooltip",""]],hostBindings:function(i,r){i&1&&_e("focusin",function(){return r.onFocus()})("blur",function(){return r.onBlur()})("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(s){return r.onMouseLeave(s.target)})("click",function(){return r.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"},standalone:!1})}}return t})(),V8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({providers:[j8,O2],imports:[mi]})}}return t})(),B8={};function Fg(){let t=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return t=`a${t}`,B8[t]?Fg():(B8[t]=!0,t)}var wh=function(t){return t.Vertical="vertical",t.Horizontal="horizontal",t}(wh||{}),bSe=(()=>{class t{constructor(){this.select=new ke,this.activate=new ke,this.deactivate=new ke}onClick(){this.select.emit(this.data)}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}ngOnChanges(e){this.classNames=Array.isArray(this.classNames)?this.classNames.join(" "):"",this.classNames+="circle"}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-circle",""]],hostBindings:function(i,r){i&1&&_e("click",function(){return r.onClick()})("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{cx:"cx",cy:"cy",r:"r",fill:"fill",stroke:"stroke",data:"data",classNames:"classNames",circleOpacity:"circleOpacity",pointerEvents:"pointerEvents"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},standalone:!1,features:[Jt],attrs:STe,decls:1,vars:8,template:function(i,r){i&1&&(Ze(),Ee(0,"circle")),i&2&&$e("cx",r.cx)("cy",r.cy)("r",r.r)("fill",r.fill)("stroke",r.stroke)("opacity",r.circleOpacity)("class",r.classNames)("pointer-events",r.pointerEvents)},encapsulation:2,changeDetection:0})}}return t})(),R2=(()=>{class t{constructor(){this.orientation=wh.Vertical}ngOnChanges(e){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%",this.orientation===wh.Horizontal?this.x2="100%":this.orientation===wh.Vertical&&(this.y1="100%")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},standalone:!1,features:[Jt],attrs:kTe,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(i,r){i&1&&(Ze(),M(0,"linearGradient",0),be(1,ETe,1,5,"stop",1),O()),i&2&&(J("id",r.name),$e("x1",r.x1)("y1",r.y1)("x2",r.x2)("y2",r.y2),V(),J("ngForOf",r.stops))},dependencies:[Wr],encapsulation:2,changeDetection:0})}}return t})(),G1=function(t){return t.Standard="standard",t.Stacked="stacked",t}(G1||{}),xSe=(()=>{class t{constructor(e){this.platformId=e,this.type=G1.Standard,this.tooltipDisabled=!1,this.select=new ke,this.activate=new ke,this.deactivate=new ke,this.barVisible=!1,this.barOrientation=wh,this.placementTypes=Xt,this.styleTypes=U1,this.isSSR=!1}ngOnInit(){this.gradientId="grad"+Fg().toString(),this.gradientFill=`url(#${this.gradientId})`,kl(this.platformId)&&(this.isSSR=!0)}ngOnChanges(){this.update()}update(){this.circle=this.getActiveCircle()}getActiveCircle(){let e=this.data.series.findIndex(i=>{let r=i.name;return r&&this.visibleValue&&r.toString()===this.visibleValue.toString()&&i.value!==void 0});if(e!==-1)return this.mapDataPointToCircle(this.data.series[e],e)}mapDataPointToCircle(e,i){let r=this.data.name,o=e.value,s=e.name,a=q8(s),l;this.scaleType===ct.Time?l=this.xScale(s):this.scaleType===ct.Linear?l=this.xScale(Number(s)):l=this.xScale(s);let c=this.yScale(this.type===G1.Standard?o:e.d1),u=5,d=this.yScale.range()[0]-c,p=1,h;this.colors.scaleType===ct.Linear?this.type===G1.Standard?h=this.colors.getColor(o):h=this.colors.getColor(e.d1):h=this.colors.getColor(r);let m=Object.assign({},e,{series:r,value:o,name:s});return{classNames:[`circle-data-${i}`],value:o,label:s,data:m,cx:l,cy:c,radius:u,height:d,tooltipLabel:a,color:h,opacity:p,seriesName:r,gradientStops:this.getGradientStops(h),min:e.min,max:e.max}}getTooltipText({tooltipLabel:e,value:i,seriesName:r,min:o,max:s}){return`
      <span class="tooltip-label">${R8(r)} \u2022 ${R8(e)}</span>
      <span class="tooltip-val">${i.toLocaleString()}${this.getTooltipMinMaxText(o,s)}</span>
    `}getTooltipMinMaxText(e,i){if(e!==void 0||i!==void 0){let r=" (";return e!==void 0?(i===void 0&&(r+="\u2265"),r+=e.toLocaleString(),i!==void 0&&(r+=" - ")):i!==void 0&&(r+="\u2264"),i!==void 0&&(r+=i.toLocaleString()),r+=")",r}else return""}getGradientStops(e){return[{offset:0,color:e,opacity:.2},{offset:100,color:e,opacity:1}]}onClick(e){this.select.emit(e)}isActive(e){return this.activeEntries?this.activeEntries.find(r=>e.name===r.name)!==void 0:!1}activateCircle(){this.barVisible=!0,this.activate.emit({name:this.data.name})}deactivateCircle(){this.barVisible=!1,this.circle.opacity=0,this.deactivate.emit({name:this.data.name})}static{this.\u0275fac=function(i){return new(i||t)(Ae(zr))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-circle-series",""]],inputs:{data:"data",type:"type",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",visibleValue:"visibleValue",activeEntries:"activeEntries",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},standalone:!1,features:[Jt],attrs:ITe,decls:1,vars:1,consts:[[4,"ngIf"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"],["class","tooltip-bar",4,"ngIf"],["ngx-charts-circle","","ngx-tooltip","",1,"circle",3,"select","activate","deactivate","cx","cy","r","fill","pointerEvents","data","classNames","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext"],[1,"tooltip-bar"]],template:function(i,r){i&1&&be(0,MTe,6,22,"g",0),i&2&&J("ngIf",r.circle)},dependencies:[Yn,Z8,bSe,R2],encapsulation:2,data:{animation:[Pf("animationState",[zp(":enter",[jr({opacity:0}),Bp(250,jr({opacity:1}))])])]},changeDetection:0})}}return t})();var vSe=(()=>{class t{constructor(e){this.opacity=1,this.startOpacity=.5,this.endOpacity=1,this.gradient=!1,this.animations=!0,this.select=new ke,this.animationsLoaded=!1,this.hasGradient=!1,this.barOrientation=wh,this.element=e.nativeElement}ngOnChanges(){this.update(),this.animationsLoaded||(this.loadAnimation(),this.animationsLoaded=!0)}update(){this.gradientId="grad"+Fg().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl()}loadAnimation(){this.areaPath=this.startingPath,setTimeout(this.updatePathEl.bind(this),100)}updatePathEl(){let e=Tr(this.element).select(".area");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.startOpacity},{offset:100,color:this.fill,opacity:this.endOpacity}]}static{this.\u0275fac=function(i){return new(i||t)(Ae(nt))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-area",""]],inputs:{data:"data",path:"path",startingPath:"startingPath",fill:"fill",opacity:"opacity",startOpacity:"startOpacity",endOpacity:"endOpacity",gradient:"gradient",stops:"stops",animations:"animations"},outputs:{select:"select"},standalone:!1,features:[Jt],attrs:OTe,decls:2,vars:5,consts:[[4,"ngIf"],[1,"area"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(i,r){i&1&&(be(0,RTe,2,3,"defs",0),Ze(),Ee(1,"path",1)),i&2&&(J("ngIf",r.gradient),V(),Fi("opacity",r.opacity),$e("d",r.areaPath)("fill",r.gradient?r.gradientFill:r.fill))},dependencies:[Yn,R2],encapsulation:2,changeDetection:0})}}return t})();var N2;typeof window<"u"?N2=window:typeof global<"u"&&(N2=global);var z8=N2.MouseEvent;function D2(t,n=!1,e=!0){if(typeof z8=="function")return new z8(t,{bubbles:n,cancelable:e});{let i=document.createEvent("MouseEvent");return i.initEvent(t,n,e),i}}var _Se=(()=>{class t{constructor(e){this.platformId=e,this.anchorOpacity=0,this.anchorPos=-1,this.anchorValues=[],this.placementTypes=Xt,this.styleTypes=U1,this.showPercentage=!1,this.tooltipDisabled=!1,this.hover=new ke}getValues(e){let i=[];for(let r of this.results){let o=r.series.find(a=>a.name.toString()===e.toString()),s=r.name;if(s instanceof Date&&(s=s.toLocaleDateString()),o){let a=o.name,l=o.value;this.showPercentage&&(l=(o.d1-o.d0).toFixed(2)+"%");let c;if(this.colors.scaleType===ct.Linear){let d=l;o.d1&&(d=o.d1),c=this.colors.getColor(d)}else c=this.colors.getColor(r.name);let u=Object.assign({},o,{value:l,name:a,series:s,min:o.min,max:o.max,color:c});i.push(u)}}return i}mouseMove(e){if(!Bs(this.platformId))return;let i=e.pageX-e.target.getBoundingClientRect().left,r=this.findClosestPointIndex(i),o=this.xSet[r];if(this.anchorPos=this.xScale(o),this.anchorPos=Math.max(0,this.anchorPos),this.anchorPos=Math.min(this.dims.width,this.anchorPos),this.anchorValues=this.getValues(o),this.anchorPos!==this.lastAnchorPos){let s=D2("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(s),this.anchorOpacity=.7,this.hover.emit({value:o}),this.showTooltip(),this.lastAnchorPos=this.anchorPos}}findClosestPointIndex(e){let i=0,r=this.xSet.length-1,o=Number.MAX_VALUE,s=0;for(;i<=r;){let a=(i+r)/2|0,l=this.xScale(this.xSet[a]),c=Math.abs(l-e);if(c<o&&(o=c,s=a),l<e)i=a+1;else if(l>e)r=a-1;else{o=0,s=a;break}}return s}showTooltip(){let e=D2("mouseenter");this.tooltipAnchor.nativeElement.dispatchEvent(e)}hideTooltip(){let e=D2("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(e),this.anchorOpacity=0,this.lastAnchorPos=-1}getToolTipText(e){let i="";return e.series!==void 0?i+=e.series:i+="???",i+=": ",e.value!==void 0&&(i+=e.value.toLocaleString()),(e.min!==void 0||e.max!==void 0)&&(i+=" (",e.min!==void 0?(e.max===void 0&&(i+="\u2265"),i+=e.min.toLocaleString(),e.max!==void 0&&(i+=" - ")):e.max!==void 0&&(i+="\u2264"),e.max!==void 0&&(i+=e.max.toLocaleString()),i+=")"),i}static{this.\u0275fac=function(i){return new(i||t)(Ae(zr))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-tooltip-area",""]],viewQuery:function(i,r){if(i&1&&an(FTe,5),i&2){let o;Gt(o=Ut())&&(r.tooltipAnchor=o.first)}},inputs:{dims:"dims",xSet:"xSet",xScale:"xScale",yScale:"yScale",results:"results",colors:"colors",showPercentage:"showPercentage",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate"},outputs:{hover:"hover"},standalone:!1,attrs:LTe,decls:6,vars:18,consts:[["defaultTooltipTemplate",""],["tooltipAnchor",""],["y","0",1,"tooltip-area",2,"opacity","0","cursor","'auto'",3,"mousemove","mouseleave"],["y","0","ngx-tooltip","",1,"tooltip-anchor",3,"tooltipDisabled","tooltipPlacement","tooltipType","tooltipSpacing","tooltipTemplate","tooltipContext","tooltipImmediateExit"],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"]],template:function(i,r){if(i&1){let o=qt();Ze(),M(0,"g")(1,"rect",2),_e("mousemove",function(a){return Le(o),Pe(r.mouseMove(a))})("mouseleave",function(){return Le(o),Pe(r.hideTooltip())}),O(),be(2,$Te,2,1,"ng-template",null,0,Dp),Ee(4,"rect",3,1),O()}if(i&2){let o=rs(3);V(),$e("x",0)("width",r.dims.width)("height",r.dims.height),V(3),Fi("opacity",r.anchorOpacity)("pointer-events","none"),J("@animationState",r.anchorOpacity!==0?"active":"inactive")("tooltipDisabled",r.tooltipDisabled)("tooltipPlacement",r.placementTypes.Right)("tooltipType",r.styleTypes.tooltip)("tooltipSpacing",15)("tooltipTemplate",r.tooltipTemplate?r.tooltipTemplate:o)("tooltipContext",r.anchorValues)("tooltipImmediateExit",!0),$e("x",r.anchorPos)("width",1)("height",r.dims.height)}},dependencies:[Wr,Z8],encapsulation:2,data:{animation:[Pf("animationState",[zp("inactive => active",[jr({opacity:0}),Bp(250,jr({opacity:.7}))]),zp("active => inactive",[jr({opacity:.7}),Bp(250,jr({opacity:0}))])])]},changeDetection:0})}}return t})(),wSe=(()=>{class t{constructor(e,i){this.cd=i,this.height=50,this.select=new ke,this.onDomainChange=new ke,this.initialized=!1,this.element=e.nativeElement}ngOnChanges(e){this.update(),this.initialized||(this.addBrush(),this.initialized=!0)}update(){this.dims=this.getDims(),this.height=this.dims.height;let e=this.view[1]-this.height;this.xDomain=this.getXDomain(),this.xScale=this.getXScale(),this.brush&&this.updateBrush(),this.transform=`translate(0 , ${e})`,this.filterId="filter"+Fg().toString(),this.filter=`url(#${this.filterId})`,this.cd.markForCheck()}getXDomain(){let e=[];for(let r of this.results)for(let o of r.series)e.includes(o.name)||e.push(o.name);let i=[];if(this.scaleType===ct.Time){let r=Math.min(...e),o=Math.max(...e);i=[r,o]}else if(this.scaleType===ct.Linear){e=e.map(s=>Number(s));let r=Math.min(...e),o=Math.max(...e);i=[r,o]}else i=e;return i}getXScale(){let e;return this.scaleType===ct.Time?e=y0().range([0,this.dims.width]).domain(this.xDomain):this.scaleType===ct.Linear?e=$a().range([0,this.dims.width]).domain(this.xDomain):this.scaleType===ct.Ordinal&&(e=k1().range([0,this.dims.width]).padding(.1).domain(this.xDomain)),e}addBrush(){if(this.brush)return;let e=this.height,i=this.view[0];this.brush=n2().extent([[0,0],[i,e]]).on("brush end",({selection:r})=>{let s=(r||this.xScale.range()).map(this.xScale.invert);this.onDomainChange.emit(s),this.cd.markForCheck()}),Tr(this.element).select(".brush").call(this.brush)}updateBrush(){if(!this.brush)return;let e=this.height,i=this.view[0];this.brush.extent([[0,0],[i,e]]),Tr(this.element).select(".brush").call(this.brush),Tr(this.element).select(".selection").attr("fill",void 0).attr("stroke",void 0).attr("fill-opacity",void 0),this.cd.markForCheck()}getDims(){return{width:this.view[0],height:this.height}}static{this.\u0275fac=function(i){return new(i||t)(Ae(nt),Ae(mn))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-timeline",""]],inputs:{view:"view",results:"results",scheme:"scheme",customColors:"customColors",legend:"legend",autoScale:"autoScale",scaleType:"scaleType",height:"height"},outputs:{select:"select",onDomainChange:"onDomainChange"},standalone:!1,features:[Jt],attrs:VTe,ngContentSelectors:U8,decls:7,vars:4,consts:[[1,"timeline"],["in","SourceGraphic","type","matrix","values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"],[1,"embedded-chart"],["x","0","y","0",1,"brush-background"],[1,"brush"]],template:function(i,r){i&1&&(Kn(),Ze(),M(0,"g",0)(1,"filter"),Ee(2,"feColorMatrix",1),O(),M(3,"g",2),bn(4),O(),Ee(5,"rect",3)(6,"g",4),O()),i&2&&($e("transform",r.transform),V(),$e("id",r.filterId),V(4),$e("width",r.view[0])("height",r.height))},styles:[`.timeline .brush-background{fill:#0000000d}.timeline .brush .selection{fill:#0000001a;stroke-width:1px;stroke:#888}.timeline .brush .handle{fill-opacity:0}.timeline .embedded-chart{opacity:.6}
`],encapsulation:2,changeDetection:0})}}return t})();var Bo=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[mi,$8,V8,mi,$8,V8]})}}return t})();function CSe({width:t,height:n,margins:e,showXAxis:i=!1,showYAxis:r=!1,xAxisHeight:o=0,yAxisWidth:s=0,showXLabel:a=!1,showYLabel:l=!1,showLegend:c=!1,legendType:u=ct.Ordinal,legendPosition:d=_h.Right,columns:p=12}){let h=e[3],m=t,g=n-e[0]-e[2];return c&&d===_h.Right&&(u===ct.Ordinal?p-=2:p-=1),m=m*p/12,m=m-e[1]-e[3],i&&(g-=5,g-=o,a&&(g-=30)),r&&(m-=5,m-=s,h+=s,h+=10,l&&(m-=30,h+=30)),m=Math.max(0,m),g=Math.max(0,g),{width:Math.floor(m),height:Math.floor(g),xOffset:Math.floor(h)}}var G8=[{name:"vivid",selectable:!0,group:ct.Ordinal,domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:ct.Ordinal,domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:ct.Ordinal,domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:ct.Ordinal,domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:ct.Linear,domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:ct.Linear,domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:ct.Linear,domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:ct.Ordinal,domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:ct.Ordinal,domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:ct.Ordinal,domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:ct.Ordinal,domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:ct.Ordinal,domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:ct.Ordinal,domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:ct.Ordinal,domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:ct.Ordinal,domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}],M2=class{constructor(n,e,i,r){typeof n=="string"&&(n=G8.find(o=>o.name===n)),this.colorDomain=n.domain,this.scaleType=e,this.domain=i,this.customColors=r,this.scale=this.generateColorScheme(n,e,this.domain)}generateColorScheme(n,e,i){typeof n=="string"&&(n=G8.find(o=>o.name===n));let r;switch(e){case ct.Quantile:r=u0().range(n.domain).domain(i);break;case ct.Ordinal:r=dh().range(n.domain).domain(i);break;case ct.Linear:{let o=[...n.domain];o.length===1&&(o.push(o[0]),this.colorDomain=o);let s=Sg(0,1,1/o.length);r=$a().range(o).domain(s)}break;default:break}return r}getColor(n){if(n==null)throw new Error("Value can not be null");if(this.scaleType===ct.Linear){let e=$a().domain(this.domain).range([0,1]);return this.scale(e(n))}else{if(typeof this.customColors=="function")return this.customColors(n);let e=n.toString(),i;return this.customColors&&this.customColors.length>0&&(i=this.customColors.find(r=>r.name.toLowerCase()===e.toLowerCase())),i?i.value:this.scale(n)}}getLinearGradientStops(n,e){e===void 0&&(e=this.domain[0]);let i=$a().domain(this.domain).range([0,1]),r=kg().domain(this.colorDomain).range([0,1]),o=this.getColor(n),s=i(e),a=this.getColor(e),l=i(n),c=1,u=s,d=[];for(d.push({color:a,offset:s,originalOffset:s,opacity:1});u<l&&c<this.colorDomain.length;){let p=this.colorDomain[c],h=r(p);if(h<=s){c++;continue}if(h.toFixed(4)>=(l-r.bandwidth()).toFixed(4))break;d.push({color:p,offset:h,opacity:1}),u=h,c++}if(d[d.length-1].offset<100&&d.push({color:o,offset:l,opacity:1}),l===s)d[0].offset=0,d[1].offset=100;else if(d[d.length-1].offset!==100)for(let p of d)p.offset=(p.offset-s)/(l-s)*100;return d}};function TSe(t){let n=new Set;for(let e of t)for(let i of e.series)n.add(i.name);return Array.from(n)}function SSe(t,n=!0){return n&&t.every(r=>r instanceof Date)?ct.Time:t.every(i=>typeof i=="number")?ct.Linear:ct.Ordinal}function kSe(t,n,e="asc"){return t.sort((i,r)=>e==="asc"?i[n]-r[n]:r[n]-i[n])}function ESe(t,n,e="asc",i){return t.sort((r,o)=>{let s=r[n],a=o[n],l=i.indexOf(s),c=i.indexOf(a);return e==="asc"?l-c:c-l})}function ISe(t,n,e="asc"){return t.sort((i,r)=>{let o=i[n].getTime(),s=r[n].getTime();return e==="asc"?o>s?1:s>o?-1:0:o>s?-1:s>o?1:0})}var DSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})();var J8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})();var ASe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})();var NSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})();var MSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})(),OSe=(()=>{class t{constructor(e,i){this.element=e,this.platformId=i,this.fill="none",this.animations=!0,this.initialized=!1,this.isSSR=!1}ngOnInit(){kl(this.platformId)&&(this.isSSR=!0)}ngOnChanges(e){this.initialized?this.updatePathEl():(this.initialized=!0,this.initialPath=this.path)}updatePathEl(){let e=Tr(this.element.nativeElement).select(".line");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}static{this.\u0275fac=function(i){return new(i||t)(Ae(nt),Ae(zr))}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-line",""]],inputs:{path:"path",stroke:"stroke",data:"data",fill:"fill",animations:"animations"},standalone:!1,features:[Jt],attrs:UTe,decls:2,vars:2,consts:[[4,"ngIf"],["stroke-width","1.5px",1,"line"]],template:function(i,r){i&1&&be(0,HTe,2,4,"g",0)(1,WTe,2,3,"g",0),i&2&&(J("ngIf",!r.isSSR),V(),J("ngIf",r.isSSR))},dependencies:[Yn],encapsulation:2,data:{animation:[Pf("animationState",[zp(":enter",[jr({strokeDasharray:2e3,strokeDashoffset:2e3}),Bp(1e3,jr({strokeDashoffset:0}))])])]},changeDetection:0})}}return t})(),RSe=(()=>{class t{constructor(){this.animations=!0,this.barOrientation=wh}ngOnChanges(e){this.update()}update(){this.updateGradients();let e=this.sortData(this.data.series),i=this.getLineGenerator();this.path=i(e)||"";let r=this.getAreaGenerator();if(this.areaPath=r(e)||"",this.hasRange){let o=this.getRangeGenerator();this.outerPath=o(e)||""}if(this.hasGradient){this.stroke=this.gradientUrl;let o=this.data.series.map(l=>l.value),s=Math.max(...o),a=Math.min(...o);s===a&&(this.stroke=this.colors.getColor(s))}else this.stroke=this.colors.getColor(this.data.name)}getLineGenerator(){return b0().x(e=>{let i=e.name,r;return this.scaleType===ct.Time?r=this.xScale(i):this.scaleType===ct.Linear?r=this.xScale(Number(i)):r=this.xScale(i),r}).y(e=>this.yScale(e.value)).curve(this.curve)}getRangeGenerator(){return z1().x(e=>{let i=e.name,r;return this.scaleType===ct.Time?r=this.xScale(i):this.scaleType===ct.Linear?r=this.xScale(Number(i)):r=this.xScale(i),r}).y0(e=>this.yScale(typeof e.min=="number"?e.min:e.value)).y1(e=>this.yScale(typeof e.max=="number"?e.max:e.value)).curve(this.curve)}getAreaGenerator(){let e=i=>{let r=i.name;return this.xScale(r)};return z1().x(e).y0(()=>this.yScale.range()[0]).y1(i=>this.yScale(i.value)).curve(this.curve)}sortData(e){return this.scaleType===ct.Linear?e=kSe(e,"name"):this.scaleType===ct.Time?e=ISe(e,"name"):e=ESe(e,"name","asc",this.xScale.domain()),e}updateGradients(){if(this.colors.scaleType===ct.Linear){this.hasGradient=!0,this.gradientId="grad"+Fg().toString(),this.gradientUrl=`url(#${this.gradientId})`;let e=this.data.series.map(o=>o.value),i=Math.max(...e),r=Math.min(...e);this.gradientStops=this.colors.getLinearGradientStops(i,r),this.areaGradientStops=this.colors.getLinearGradientStops(i)}else this.hasGradient=!1,this.gradientStops=void 0,this.areaGradientStops=void 0}isActive(e){return this.activeEntries?this.activeEntries.find(r=>e.name===r.name)!==void 0:!1}isInactive(e){return!this.activeEntries||this.activeEntries.length===0?!1:this.activeEntries.find(r=>e.name===r.name)===void 0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=Ne({type:t,selectors:[["g","ngx-charts-line-series",""]],inputs:{data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",curve:"curve",activeEntries:"activeEntries",rangeFillOpacity:"rangeFillOpacity",hasRange:"hasRange",animations:"animations"},standalone:!1,features:[Jt],attrs:jTe,decls:6,vars:22,consts:[["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops",4,"ngIf"],["ngx-charts-area","",1,"line-highlight",3,"data","path","fill","opacity","startOpacity","gradient","stops","animations"],["ngx-charts-line","",1,"line-series",3,"data","path","stroke","animations"],["ngx-charts-area","","class","line-series-range",3,"data","path","fill","active","inactive","opacity","animations",4,"ngIf"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"],["ngx-charts-area","",1,"line-series-range",3,"data","path","fill","opacity","animations"]],template:function(i,r){i&1&&(Ze(),M(0,"g")(1,"defs"),be(2,qTe,1,3,"g",0),O(),Ee(3,"g",1)(4,"g",2),be(5,XTe,1,9,"g",3),O()),i&2&&(V(2),J("ngIf",r.hasGradient),V(),rt("active",r.isActive(r.data))("inactive",r.isInactive(r.data)),J("data",r.data)("path",r.areaPath)("fill",r.hasGradient?r.gradientUrl:r.colors.getColor(r.data.name))("opacity",.25)("startOpacity",0)("gradient",!0)("stops",r.areaGradientStops)("animations",r.animations),V(),rt("active",r.isActive(r.data))("inactive",r.isInactive(r.data)),J("data",r.data)("path",r.path)("stroke",r.stroke)("animations",r.animations),V(),J("ngIf",r.hasRange))},dependencies:[Yn,vSe,R2,OSe],encapsulation:2,changeDetection:0})}}return t})(),eX=(()=>{class t extends mSe{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition=_h.Right,this.showGridLines=!0,this.curve=vh,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.showRefLines=!1,this.showRefLabels=!0,this.wrapTicks=!1,this.activate=new ke,this.deactivate=new ke,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.timelineHeight=50,this.timelinePadding=10,this.isSSR=!1}ngOnInit(){kl(this.platformId)&&(this.isSSR=!0)}ngOnChanges(){this.update()}update(){super.update(),this.dims=CSe({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height),this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.clipPathId="clip"+Fg().toString(),this.clipPath=`url(#${this.clipPathId})`}updateTimeline(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform=`translate(${this.dims.xOffset}, ${-this.margin[2]})`)}getXDomain(){let e=TSe(this.results);this.scaleType=SSe(e);let i=[];this.scaleType===ct.Linear&&(e=e.map(s=>Number(s)));let r,o;return(this.scaleType===ct.Time||this.scaleType===ct.Linear)&&(r=this.xScaleMin?this.xScaleMin:Math.min(...e),o=this.xScaleMax?this.xScaleMax:Math.max(...e)),this.scaleType===ct.Time?(i=[new Date(r),new Date(o)],this.xSet=[...e].sort((s,a)=>{let l=s.getTime(),c=a.getTime();return l>c?1:c>l?-1:0})):this.scaleType===ct.Linear?(i=[r,o],this.xSet=[...e].sort((s,a)=>s-a)):(i=e,this.xSet=e),i}getYDomain(){let e=[];for(let s of this.results)for(let a of s.series)e.indexOf(a.value)<0&&e.push(a.value),a.min!==void 0&&(this.hasRange=!0,e.indexOf(a.min)<0&&e.push(a.min)),a.max!==void 0&&(this.hasRange=!0,e.indexOf(a.max)<0&&e.push(a.max));let i=[...e];this.autoScale||i.push(0);let r=this.yScaleMin?this.yScaleMin:Math.min(...i),o=this.yScaleMax?this.yScaleMax:Math.max(...i);return[r,o]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,i){let r;return this.scaleType===ct.Time?r=y0().range([0,i]).domain(e):this.scaleType===ct.Linear?(r=$a().range([0,i]).domain(e),this.roundDomains&&(r=r.nice())):this.scaleType===ct.Ordinal&&(r=k1().range([0,i]).padding(.1).domain(e)),r}getYScale(e,i){let r=$a().range([i,0]).domain(e);return this.roundDomains?r.nice():r}updateDomain(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}updateHoveredVertical(e){this.hoveredVertical=e.value,this.deactivateAll()}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}onClick(e){this.select.emit(e)}trackBy(e,i){return`${i.name}`}setColors(){let e;this.schemeType===ct.Ordinal?e=this.seriesDomain:e=this.yDomain,this.colors=new M2(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){let e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return e.scaleType===ct.Ordinal?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.deactivateAll(),!(this.activeEntries.findIndex(r=>r.name===e.name&&r.value===e.value)>-1)&&(this.activeEntries=[e],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){let i=this.activeEntries.findIndex(r=>r.name===e.name&&r.value===e.value);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(let e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Ri(t)))(r||t)}})()}static{this.\u0275cmp=Ne({type:t,selectors:[["ngx-charts-line-chart"]],contentQueries:function(i,r,o){if(i&1&&(Vs(o,BTe,5),Vs(o,zTe,5)),i&2){let s;Gt(s=Ut())&&(r.tooltipTemplate=s.first),Gt(s=Ut())&&(r.seriesTooltipTemplate=s.first)}},hostBindings:function(i,r){i&1&&_e("mouseleave",function(){return r.hideCircles()})},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",autoScale:"autoScale",timeline:"timeline",gradient:"gradient",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",schemeType:"schemeType",rangeFillOpacity:"rangeFillOpacity",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",showRefLines:"showRefLines",referenceLines:"referenceLines",showRefLabels:"showRefLabels",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax",wrapTicks:"wrapTicks"},outputs:{activate:"activate",deactivate:"deactivate"},standalone:!1,features:[Mn,Jt],decls:12,vars:20,consts:[[3,"legendLabelClick","legendLabelActivate","legendLabelDeactivate","view","showLegend","legendOptions","activeEntries","animations"],[1,"line-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","wrapTicks","dimensionsChanged",4,"ngIf"],[4,"ngIf"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"dimensionsChanged","xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","wrapTicks"],["ngx-charts-y-axis","",3,"dimensionsChanged","yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","wrapTicks"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","hasRange","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"hover","dims","xSet","xScale","yScale","results","colors","tooltipDisabled","tooltipTemplate"],[4,"ngFor","ngForOf"],["ngx-charts-circle-series","",3,"select","activate","deactivate","xScale","yScale","colors","data","scaleType","visibleValue","activeEntries","tooltipDisabled","tooltipTemplate"],["ngx-charts-timeline","",3,"onDomainChange","results","view","height","scheme","customColors","scaleType","legend"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","scaleType","curve","hasRange","animations"]],template:function(i,r){i&1&&(M(0,"ngx-charts-chart",0),_e("legendLabelClick",function(s){return r.onClick(s)})("legendLabelActivate",function(s){return r.onActivate(s)})("legendLabelDeactivate",function(s){return r.onDeactivate(s)}),Ze(),M(1,"defs")(2,"clipPath"),Ee(3,"rect"),O()(),M(4,"g",1),be(5,KTe,1,11,"g",2)(6,YTe,1,13,"g",3),M(7,"g"),be(8,ZTe,2,2,"g",4)(9,eSe,2,2,"g",4)(10,nSe,3,9,"g",5),O()(),be(11,rSe,2,13,"g",6),O()),i&2&&(J("view",Cx(17,W8,r.width,r.height))("showLegend",r.legend)("legendOptions",r.legendOptions)("activeEntries",r.activeEntries)("animations",r.animations),V(2),$e("id",r.clipPathId),V(),$e("width",r.dims.width+10)("height",r.dims.height+10)("transform","translate(-5, -5)"),V(),$e("transform",r.transform),V(),J("ngIf",r.xAxis),V(),J("ngIf",r.yAxis),V(),$e("clip-path",r.clipPath),V(),J("ngIf",!r.isSSR),V(),J("ngIf",r.isSSR),V(),J("ngIf",!r.tooltipDisabled),V(),J("ngIf",r.timeline&&r.scaleType!="ordinal"))},dependencies:[Wr,Yn,fSe,ySe,_Se,pSe,xSe,wSe,RSe],styles:[GTe],encapsulation:2,data:{animation:[Pf("animationState",[zp(":leave",[jr({opacity:1}),Bp(500,jr({opacity:0}))])])]},changeDetection:0})}}return t})(),tX=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})();var Amt=2*Math.PI;var F2=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})(),FSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo,F2,tX]})}}return t})();var LSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})();var PSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})();var $Se=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo,F2,J8]})}}return t})();function VSe(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}var BSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo]})}}return t})(),nX=(()=>{class t{constructor(){VSe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=Be({type:t})}static{this.\u0275inj=Ve({imports:[Bo,DSe,J8,ASe,NSe,MSe,BSe,tX,FSe,LSe,F2,PSe,$Se]})}}return t})();var Ch=class{constructor(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)}set(n,e){this.dataIdsCount++,this.data.set(n,e)}has(n){return this.data.has(n)}delete(n){return this.dataIdsCount--,this.data.delete(n)}numDataIds(){return this.dataIdsCount}},Hl=class{refCount(n){return bo("refCount")}incRef(n){return bo("incRef")}timerAvailable(){return!0}time(n){return bo("time")}read(n){return bo("read")}readSync(n){return bo("readSync")}readToGPU(n,e){return bo("readToGPU")}numDataIds(){return bo("numDataIds")}disposeData(n,e){return bo("disposeData")}write(n,e,i){return bo("write")}move(n,e,i,r,o){return bo("move")}createTensorFromGPUData(n,e,i){return bo("createTensorFromGPUData")}memory(){return bo("memory")}floatPrecision(){return bo("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return bo("dispose")}};function bo(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function iX(t){let n=t.length,e=0;for(;n>0;)e=Math.random()*n|0,n--,H1(t,n,e)}function GSe(t,n){if(t.length!==n.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${n.length}`);let e=t.length,i=0;for(;e>0;)i=Math.random()*e|0,e--,H1(t,e,i),H1(n,e,i)}function Lg(t,n,e){return Math.max(t,Math.min(n,e))}function USe(t){return t%2===0?t:t+1}function H1(t,n,e){let i=t[n];t[n]=t[e],t[e]=i}function HSe(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}function WSe(t,n){let e=Math.random();return n*e+(1-e)*t}function jSe(t,n){let e=0;for(let i=0;i<t.length;i++){let r=Number(t[i])-Number(n[i]);e+=r*r}return e}function A(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function W1(t,n,e=""){A(Uu(t,n),()=>e+` Shapes ${t} and ${n} must match`)}function _0(t){A(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ht(t){if(t.length===0)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function qSe(t){return t.length===0}function XSe(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==null&&n[e]!==null&&t[e]!==n[e])return!1;return!0}function Uu(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Wl(t){return t%1===0}function KSe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let n=Math.exp(2*t);return(n-1)/(n+1)}}function YSe(t){let n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function QSe(t){let n=new Uint32Array(t);for(let e=0;e<t;++e)n[e]=e;return iX(n),n}function Sh(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function ZSe(t,n=r=>0,e,i){return new Promise((r,o)=>{let s=0,a=()=>{if(t()){r();return}s++;let l=n(s);if(e!=null&&s>=e){o();return}i!=null?i(a,l):setTimeout(a,l)};a()})}function JSe(t,n){let e=1,i=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)e*=t[o];else if(t[o]===-1){if(i!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${i} and dim ${o}`);i=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(i===-1){if(n>0&&n!==e)throw Error(`Size(${n}) must match the product of shape ${t}`);return t}if(e===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(n%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${e}`);let r=t.slice();return r[i]=n/e,r}function li(t,n){let e=n.length;return t=t==null?n.map((i,r)=>r):[].concat(t),A(t.every(i=>i>=-e&&i<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${t}`),A(t.every(i=>Wl(i)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(i=>i<0?e+i:i)}function L2(t,n){let e=[],i=[],r=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||r?null:li(n,t).sort(),s=0;for(let a=0;a<t.length;++a){if(o!=null){if(o[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(o[s]==null||o[s]>a)&&t[a]===1&&(e.push(t[a]),i.push(a)),o[s]<=a&&s++}t[a]!==1&&(e.push(t[a]),i.push(a))}return{newShape:e,keptDims:i}}function e1e(t,n){return j1(t,n)}function j1(t,n){let e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else if(t==="string")e=new Array(n);else throw new Error(`Unknown data type ${t}`);return e}function P2(t,n){for(let e=0;e<t.length;e++){let i=t[e];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${n} being uploaded contains ${i}.`)}}function $2(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function t1e(t,n){return!(n==="complex64"||n==="float32"&&t!=="complex64"||n==="int32"&&t!=="float32"&&t!=="complex64"||n==="bool"&&t==="bool")}function Pg(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function V2(t){if(t==null)return 0;let n=0;return t.forEach(e=>n+=e.length),n}function $g(t){return typeof t=="string"||t instanceof String}function rX(t){return typeof t=="boolean"}function oX(t){return typeof t=="number"}function Hu(t){return Array.isArray(t)?Hu(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":oX(t)?"float32":$g(t)?"string":rX(t)?"bool":"float32"}function Vg(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Bg(t,n){for(let e=n;e<t;++e)if(t%e===0)return e;return t}function za(t){let n=t.length;if(n<2)return[];let e=new Array(n-1);e[n-2]=t[n-1];for(let i=n-3;i>=0;--i)e[i]=e[i+1]*t[i+1];return e}function sX(t,n,e,i=!1){let r=new Array;if(n.length===1){let o=n[0]*(i?2:1);for(let s=0;s<o;s++)r[s]=e[t+s]}else{let o=n[0],s=n.slice(1),a=s.reduce((l,c)=>l*c)*(i?2:1);for(let l=0;l<o;l++)r[l]=sX(t+l*a,s,e,i)}return r}function Th(t,n,e=!1){if(t.length===0)return n[0];let i=t.reduce((r,o)=>r*o)*(e?2:1);if(i===0)return[];if(i!==n.length)throw new Error(`[${t}] does not match the input size ${n.length}${e?" for a complex tensor":""}.`);return sX(0,t,n,e)}function n1e(t,n){if(Array.isArray(t))return t;if(n==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(n==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(n==="bool"||n==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${n}`)}function w0(t,n){let e=zg(t,n);for(let i=0;i<e.length;i++)e[i]=1;return e}function zg(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${n}`)}function i1e(t,n){let e=t.reduce((i,r)=>i*r,1);if(n==null||n==="float32")return Th(t,new Float32Array(e));if(n==="int32")return Th(t,new Int32Array(e));if(n==="bool")return Th(t,new Uint8Array(e));throw new Error(`Unknown data type ${n}`)}function $i(t){t.forEach(n=>{A(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function r1e(t,n,e){if(n===0)return 0;if(n===1)return t[0];let i=t[t.length-1];for(let r=0;r<t.length-1;++r)i+=e[r]*t[r];return i}function o1e(t,n,e){if(n===0)return[];if(n===1)return[t];let i=new Array(n);for(let r=0;r<i.length-1;++r)i[r]=Math.floor(t/e[r]),t-=i[r]*e[r];return i[i.length-1]=t,i}function kh(t){return t&&t.then&&typeof t.then=="function"}var aX="tfjsflags",C0=class{constructor(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=a1e,this.populateURLFlags()}setPlatform(n,e){this.platform!=null&&(G().getBool("IS_TEST")||G().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=n,this.platform=e}registerFlag(n,e,i){if(this.flagRegistry[n]={evaluationFn:e,setHook:i},this.urlFlags[n]!=null){let r=this.urlFlags[n];G().getBool("IS_TEST")||G().getBool("PROD")||console.warn(`Setting feature override from URL ${n}: ${r}.`),this.set(n,r)}}getAsync(n){return W(this,null,function*(){return n in this.flags?this.flags[n]:(this.flags[n]=yield this.evaluateFlag(n),this.flags[n])})}get(n){if(n in this.flags)return this.flags[n];let e=this.evaluateFlag(n);if(kh(e))throw new Error(`Flag ${n} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[n]=e,this.flags[n]}getNumber(n){return this.get(n)}getBool(n){return this.get(n)}getString(n){return this.get(n)}getFlags(){return this.flags}get features(){return this.flags}set(n,e){if(this.flagRegistry[n]==null)throw new Error(`Cannot set flag ${n} as it has not been registered.`);this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)}evaluateFlag(n){if(this.flagRegistry[n]==null)throw new Error(`Cannot evaluate flag '${n}': no evaluation function found.`);return this.flagRegistry[n].evaluationFn()}setFlags(n){this.flags=Object.assign({},n)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let n=this.getQueryParams(this.global.location.search);aX in n&&n[aX].split(",").forEach(i=>{let[r,o]=i.split(":");this.urlFlags[r]=c1e(r,o)})}};function a1e(t){let n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...i)=>(l1e(n,i[0],i[1]),i.join("="))),n}function l1e(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function c1e(t,n){let e=n.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:n}function G(){return B2}var B2=null;function lX(t){B2=t}var z2;function G2(){if(z2==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");z2=t}return z2}function u1e(){let t=G2();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function T0(t,n){let e=u1e();if(e.has(t))return e.get(t);{let i=n();return e.set(t,i),e.get(t)}}var Wu="Abs",jl="Acos",ql="Acosh",Ks="Add",Gg="AddN",Ug="All",Hg="Any",ju="ArgMax",qu="ArgMin",Xl="Asin",Kl="Asinh",Yl="Atan",Ql="Atanh",Zl="Atan2",Xu="AvgPool",Wg="AvgPoolGrad",Ku="AvgPool3D",jg="AvgPool3DGrad",Yu="BatchMatMul",Qu="BatchToSpaceND",qg="Bincount",S0="BitwiseAnd",cX="BroadcastTo",q1="BroadcastArgs",Ga="Cast",Jl="Ceil",ec="ClipByValue",Xg="Complex",Zu="ComplexAbs",Ju="Concat",ed="Conv2D",Kg="Conv2DBackpropFilter",td="Conv2DBackpropInput",nd="Conv3D",Yg="Conv3DBackpropFilterV2",Qg="Conv3DBackpropInputV2",tc="Cos",nc="Cosh",Zg="Cumprod",id="Cumsum",Jg="CropAndResize",ey="DenseBincount",ty="DepthToSpace",rd="DepthwiseConv2dNative",ny="DepthwiseConv2dNativeBackpropFilter",iy="DepthwiseConv2dNativeBackpropInput",X1="Diag",od="Dilation2D",k0="Dilation2DBackpropInput",E0="Dilation2DBackpropFilter",uX="Draw",ic="RealDiv",ry="Einsum",rc="Elu",oy="EluGrad",oc="Erf",Eh="Equal",sc="Exp",sd="ExpandDims",ac="Expm1",sy="FFT",ay="Fill",ly="FlipLeftRight",lc="Floor",cc="FloorDiv",ad="FusedBatchNorm",ld="GatherV2",K1="GatherNd",Ih="Greater",uc="GreaterEqual",Ua="Identity",cy="IFFT",uy="Imag",dc="IsFinite",pc="IsInf",hc="IsNan",cd="LeakyRelu",Dh="Less",Ah="LessEqual",Y1="LinSpace",mc="Log",fc="Log1p",Nh="LogicalAnd",Mh="LogicalNot",Oh="LogicalOr";var dX="LogSoftmax";var ud="LRN",dy="LRNGrad";var dd="Max",gc="Maximum",pd="MaxPool",py="MaxPoolGrad",hd="MaxPool3D",hy="MaxPool3DGrad",Q1="MaxPoolWithArgmax",md="Mean",fd="Min",yc="Minimum",gd="MirrorPad",bc="Mod",Z1="Multinomial",xc="Multiply",yd="Neg",Rh="NotEqual",my="NonMaxSuppressionV3",fy="NonMaxSuppressionV4",gy="NonMaxSuppressionV5",bd="OnesLike",xd="OneHot",vd="Pack",_d="PadV2";var vc="Pow",wd="Prelu",Cd="Prod",J1="RaggedGather",ek="RaggedRange",tk="RaggedTensorToTensor",yy="Range",by="Real",_c="Reciprocal",wc="Relu",Td="Reshape",Sd="ResizeNearestNeighbor",xy="ResizeNearestNeighborGrad",kd="ResizeBilinear",vy="ResizeBilinearGrad",Cc="Relu6",Ed="Reverse",Tc="Round",Sc="Rsqrt",nk="ScatterNd",ik="TensorScatterUpdate",rk="SearchSorted",Id="Select",kc="Selu",Dd="Slice",Ec="Sin",Ic="Sinh",Dc="Sign",Ac="Sigmoid",Nc="Softplus",Mc="Sqrt",Ad="Sum",Nd="SpaceToBatchND",Md="SplitV",Od="Softmax",ok="SparseFillEmptyRows",sk="SparseReshape",ak="SparseSegmentMean",lk="SparseSegmentSum",ck="SparseToDense",Oc="SquaredDifference",_y="Square",I0="StaticRegexReplace",wy="StridedSlice",uk="StringNGrams",dk="StringSplit",pk="StringToHashBucketFast",Rc="Sub",Fc="Tan",Lc="Tanh",Ha="Tile",Cy="TopK",Ty="Transform",Wa="Transpose",Sy="Unique",Rd="Unpack",Fd="UnsortedSegmentSum";var Ld="ZerosLike",Pc="Step",pX="FromPixels",ky="RotateWithOffset",Fh="_FusedMatMul",Lh="FusedConv2D",Ph="FusedDepthwiseConv2D";function ja(...t){G().getBool("IS_TEST")||G().getBool("PROD")||console.warn(...t)}function d1e(...t){G().getBool("IS_TEST")||G().getBool("PROD")||console.log(...t)}var hk=T0("kernelRegistry",()=>new Map),U2=T0("gradRegistry",()=>new Map);function H2(t,n){let e=fX(t,n);return hk.get(e)}function W2(t){return U2.get(t)}function j2(t){let n=hk.entries(),e=[];for(;;){let{done:i,value:r}=n.next();if(i)break;let[o,s]=r,[a]=o.split("_");a===t&&e.push(s)}return e}function mk(t){let{kernelName:n,backendName:e}=t,i=fX(n,e);hk.has(i)&&ja(`The kernel '${n}' for backend '${e}' is already registered`),hk.set(i,t)}function mX(t){let{kernelName:n}=t;U2.has(n)&&G().getBool("DEBUG")&&ja(`Overriding the gradient for '${n}'`),U2.set(n,t)}function fX(t,n){return`${n}_${t}`}var v={};Qo(v,{arraysEqual:()=>Uu,arraysEqualWithNull:()=>XSe,assert:()=>A,assertNonNegativeIntegerDimensions:()=>$i,assertNonNull:()=>_0,assertShapesMatch:()=>W1,bytesFromStringArray:()=>V2,bytesPerElement:()=>Pg,checkConversionForErrors:()=>P2,clamp:()=>Lg,computeStrides:()=>za,convertBackendValuesAndArrayBuffer:()=>n1e,createScalarValue:()=>b1e,createShuffledIndices:()=>QSe,decodeString:()=>Ny,distSquared:()=>jSe,encodeString:()=>Ay,fetch:()=>v1e,fingerPrint64:()=>y1e,flatten:()=>$d,getArrayFromDType:()=>j1,getTypedArrayFromDType:()=>e1e,hasEncodingLoss:()=>t1e,hexToLong:()=>D0,indexToLoc:()=>o1e,inferDtype:()=>Hu,inferFromImplicitShape:()=>JSe,isBoolean:()=>rX,isFunction:()=>Vg,isInt:()=>Wl,isNumber:()=>oX,isPromise:()=>kh,isScalarShape:()=>qSe,isString:()=>$g,isTypedArray:()=>cr,isValidDtype:()=>$2,locToIndex:()=>r1e,makeOnesTypedArray:()=>w0,makeZerosNestedTypedArray:()=>i1e,makeZerosTypedArray:()=>zg,nearestDivisor:()=>Bg,nearestLargerEven:()=>USe,now:()=>Gh,parseAxisParam:()=>li,randUniform:()=>WSe,repeatedTry:()=>ZSe,rightPad:()=>Sh,shuffle:()=>iX,shuffleCombo:()=>GSe,sizeFromShape:()=>Ht,sizeToSquarishShape:()=>YSe,squeezeShape:()=>L2,sum:()=>HSe,swap:()=>H1,tanh:()=>KSe,toNestedArray:()=>Th,toTypedArray:()=>Dy});function fk(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var Y2=Wb(kX());var zh=Y2.default||Y2;function D0(t){return zh.fromString(t,!0,16)}var IX=D0("c3a5c85c97cb3127"),Bh=D0("b492b66fbe98f273"),Er=D0("9ae16a3b2f90404f");function K2(t){return t.xor(t.shru(47))}function DX(t,n,e){let i=t.slice(n,n+e);return zh.fromBytes(Array.from(i),!0,!0)}function Rn(t,n){return DX(t,n,8)}function EX(t,n){return DX(t,n,4)}function Vi(t,n){return n===0?t:t.shru(n).or(t.shl(64-n))}function Pd(t,n,e=D0("9ddfea08eb382d69")){let i=t.xor(n).mul(e);i=i.xor(i.shru(47));let r=n.xor(i).mul(e);return r=r.xor(r.shru(47)),r=r.mul(e),r}function h1e(t,n,e,i,r,o){r=r.add(t),o=Vi(o.add(r).add(i),21);let s=r;return r=r.add(n),r=r.add(e),o=o.add(Vi(r,44)),[r.add(i),o.add(s)]}function yk(t,n,e,i){return h1e(Rn(t,n),Rn(t,n+8),Rn(t,n+16),Rn(t,n+24),e,i)}function m1e(t,n=t.length){if(n>=8){let e=Er.add(n*2),i=Rn(t,0).add(Er),r=Rn(t,n-8),o=Vi(r,37).mul(e).add(i),s=Vi(i,25).add(r).mul(e);return Pd(o,s,e)}if(n>=4){let e=Er.add(n*2),i=EX(t,0);return Pd(i.shl(3).add(n),EX(t,n-4),e)}if(n>0){let e=t[0],i=t[n>>1],r=t[n-1],o=e+(i<<8),s=n+(r<<2);return K2(Er.mul(o).xor(IX.mul(s))).mul(Er)}return Er}function f1e(t,n=t.length){let e=Er.add(n*2),i=Rn(t,0).mul(Bh),r=Rn(t,8),o=Rn(t,n-8).mul(e),s=Rn(t,n-16).mul(Er);return Pd(Vi(i.add(r),43).add(Vi(o,30)).add(s),i.add(Vi(r.add(Er),18)).add(o),e)}function g1e(t,n=t.length){let e=Er.add(n*2),i=Rn(t,0).mul(Er),r=Rn(t,8),o=Rn(t,n-8).mul(e),s=Rn(t,n-16).mul(Er),a=Vi(i.add(r),43).add(Vi(o,30)).add(s),l=Pd(a,i.add(Vi(r.add(Er),18)).add(o),e),c=Rn(t,16).mul(e),u=Rn(t,24),d=a.add(Rn(t,n-32)).mul(e),p=l.add(Rn(t,n-24)).mul(e);return Pd(Vi(c.add(u),43).add(Vi(d,30)).add(p),c.add(Vi(u.add(i),18)).add(d),e)}function y1e(t,n=t.length){let e=zh.fromNumber(81,!0);if(n<=32)return n<=16?m1e(t,n):f1e(t,n);if(n<=64)return g1e(t,n);let i=e,r=e.mul(Bh).add(113),o=K2(r.mul(Er).add(113)).mul(Er),s=[zh.UZERO,zh.UZERO],a=[zh.UZERO,zh.UZERO];i=i.mul(Er).add(Rn(t,0));let l=0,c=(n-1>>6)*64,u=c+(n-1&63)-63;do i=Vi(i.add(r).add(s[0]).add(Rn(t,l+8)),37).mul(Bh),r=Vi(r.add(s[1]).add(Rn(t,l+48)),42).mul(Bh),i=i.xor(a[1]),r=r.add(s[0]).add(Rn(t,l+40)),o=Vi(o.add(a[0]),33).mul(Bh),s=yk(t,l,s[1].mul(Bh),i.add(a[0])),a=yk(t,l+32,o.add(a[1]),r.add(Rn(t,l+16))),[o,i]=[i,o],l+=64;while(l!==c);let d=Bh.add(o.and(255).shl(1));return l=u,a[0]=a[0].add(n-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),i=Vi(i.add(r).add(s[0]).add(Rn(t,l+8)),37).mul(d),r=Vi(r.add(s[1]).add(Rn(t,l+48)),42).mul(d),i=i.xor(a[1].mul(9)),r=r.add(s[0].mul(9).add(Rn(t,l+40))),o=Vi(o.add(a[0]),33).mul(d),s=yk(t,l,s[1].mul(d),i.add(a[0])),a=yk(t,l+32,o.add(a[1]),r.add(Rn(t,l+16))),[o,i]=[i,o],Pd(Pd(s[0],a[0],d).add(K2(r).mul(IX)).add(o),Pd(s[1],a[1],d).add(i),d)}function b1e(t,n){return n==="string"?Ay(t):Dy([t],n)}function x1e(t,n){return t instanceof Float32Array&&n==="float32"||t instanceof Int32Array&&n==="int32"||t instanceof Uint8Array&&n==="bool"}function Dy(t,n){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=$d(t)),G().getBool("DEBUG")&&P2(t,n),x1e(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){let e=new Uint8Array(t.length);for(let i=0;i<e.length;++i)Math.round(t[i])!==0&&(e[i]=1);return e}else throw new Error(`Unknown data type ${n}`)}function Gh(){return G().platform.now()}function v1e(t,n){return G().platform.fetch(t,n)}function Ay(t,n="utf-8"){return n=n||"utf-8",G().platform.encode(t,n)}function Ny(t,n="utf-8"){return n=n||"utf-8",G().platform.decode(t,n)}function cr(t){return G().platform.isTypedArray!=null?G().platform.isTypedArray(t):fk(t)}function $d(t,n=[],e=!1){if(n==null&&(n=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||kh(t)||t==null||cr(t)&&e)n.push(t);else if(Array.isArray(t)||cr(t))for(let i=0;i<t.length;++i)$d(t[i],n,e);else{let i=-1;for(let r of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(r)&&(i=Math.max(i,Number(r)));for(let r=0;r<=i;r++)$d(t[r],n,e)}return n}var bk=class{constructor(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new Q2)}profileKernel(n,e,i){let r,o=()=>{r=i()},s,a=Gh();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(o);else{o();for(let c of r)c.dataSync();s=Promise.resolve({kernelMs:Gh()-a})}if(G().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<r.length;c++){let u=r[c];u.data().then(d=>{_1e(d,u.dtype,n)})}return{kernelName:n,outputs:r,inputs:e,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(n){let{kernelName:e,outputs:i,timeMs:r,inputs:o,extraInfo:s}=n;i.forEach(a=>{Promise.all([a.data(),r,s]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],o,l[2])})})}};function _1e(t,n,e){if(n!=="float32")return!1;for(let i=0;i<t.length;i++){let r=t[i];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${e}'`),!0}return!1}var Q2=class{logKernelProfile(n,e,i,r,o,s){let a=typeof r=="number"?Sh(`${r}ms`,9):r.error,l=Sh(n,25),c=e.rank,u=e.size,d=Sh(e.shape.toString(),14),p="";for(let h in o){let m=o[h];if(m!=null){let g=m.shape||e.shape,f=g.length;p+=`${h}: ${f}D ${f>0?g:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function AX(t,n,e){let i={},r={};for(let l=0;l<n.length;l++)i[n[l].id]=!0;for(let l=0;l<t.length;l++){let c=t[l],u=c.inputs;for(let d in u){let p=u[d],h=!1;for(let m=0;m<n.length;m++)if(i[p.id]){c.outputs.forEach(g=>i[g.id]=!0),h=!0,r[c.id]=!0;break}if(h)break}}let o={};o[e.id]=!0;let s={};for(let l=t.length-1;l>=0;l--){let c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(o[c.outputs[d].id]){for(let p in u)o[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<t.length;l++){let c=t[l];if(r[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let h=c.inputs[p];i[h.id]&&(u[p]=h)}let d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function NX(t,n,e,i){for(let r=n.length-1;r>=0;r--){let o=n[r],s=[];if(o.outputs.forEach(l=>{let c=t[l.id];c!=null?s.push(c):s.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);let a=o.gradient(s);for(let l in o.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=e(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=o.inputs[l];if(!Uu(c.shape,u.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{let d=t[u.id];t[u.id]=i(d,c),d.dispose()}}}}var MX=20,A0=3,Z2=7;function OX(t,n,e,i){let r=za(n),o=w1e(t,n,e,r),s=n.length,a=xk(t,n,e,r,o),l=["Tensor"];return i&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${s}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function w1e(t,n,e,i){let r=Ht(n),o=i[i.length-1],s=new Array(o).fill(0),a=n.length,l=e==="complex64"?M0(t):t;if(a>1)for(let c=0;c<r/o;c++){let u=c*o;for(let d=0;d<o;d++)s[d]=Math.max(s[d],N0(l[u+d],0,e).length)}return s}function N0(t,n,e){let i;return Array.isArray(t)?i=`${parseFloat(t[0].toFixed(Z2))} + ${parseFloat(t[1].toFixed(Z2))}j`:$g(t)?i=`'${t}'`:e==="bool"?i=RX(t):i=parseFloat(t.toFixed(Z2)).toString(),Sh(i,n)}function RX(t){return t===0?"false":"true"}function xk(t,n,e,i,r,o=!0){let s=e==="complex64"?2:1,a=n[0],l=n.length;if(l===0){if(e==="complex64"){let g=M0(t);return[N0(g[0],0,e)]}return e==="bool"?[RX(t[0])]:[t[0].toString()]}if(l===1){if(a>MX){let f=A0*s,y=Array.from(t.slice(0,f)),b=Array.from(t.slice((a-A0)*s,a*s));return e==="complex64"&&(y=M0(y),b=M0(b)),["["+y.map((x,_)=>N0(x,r[_],e)).join(", ")+", ..., "+b.map((x,_)=>N0(x,r[a-A0+_],e)).join(", ")+"]"]}return["["+(e==="complex64"?M0(t):Array.from(t)).map((f,y)=>N0(f,r[y],e)).join(", ")+"]"]}let c=n.slice(1),u=i.slice(1),d=i[0]*s,p=[];if(a>MX){for(let g=0;g<A0;g++){let f=g*d,y=f+d;p.push(...xk(t.slice(f,y),c,e,u,r,!1))}p.push("...");for(let g=a-A0;g<a;g++){let f=g*d,y=f+d;p.push(...xk(t.slice(f,y),c,e,u,r,g===a-1))}}else for(let g=0;g<a;g++){let f=g*d,y=f+d;p.push(...xk(t.slice(f,y),c,e,u,r,g===a-1))}let h=l===2?",":"";p[0]="["+(a>0?p[0]+h:"");for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+h;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":m),p}function M0(t){let n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var nn=class{constructor(n,e,i){if(this.dtype=e,this.shape=n.slice(),this.size=Ht(n),i!=null){let r=i.length;A(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||j1(e,this.size),this.strides=za(n)}set(n,...e){e.length===0&&(e=[0]),A(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let i=this.locToIndex(e);this.values[i]=n}get(...n){n.length===0&&(n=[0]);let e=0;for(let r of n){if(r<0||r>=this.shape[e]){let o=`Requested out of range element at ${n}.   Buffer shape=${this.shape}`;throw new Error(o)}e++}let i=n[n.length-1];for(let r=0;r<n.length-1;++r)i+=this.strides[r]*n[r];return this.values[i]}locToIndex(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];let e=n[n.length-1];for(let i=0;i<n.length-1;++i)e+=this.strides[i]*n[i];return e}indexToLoc(n){if(this.rank===0)return[];if(this.rank===1)return[n];let e=new Array(this.shape.length);for(let i=0;i<e.length-1;++i)e[i]=Math.floor(n/this.strides[i]),n-=e[i]*this.strides[i];return e[e.length-1]=n,e}get rank(){return this.shape.length}toTensor(){return Qs().makeTensor(this.values,this.shape,this.dtype)}},Qs=null,My=null,C1e=null;function FX(t){Qs=t}function LX(t){My=t}function PX(t){C1e=t}var Yt=class{constructor(n,e,i,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Ht(n),this.strides=za(n),this.dataId=i,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return W(this,null,function*(){let n=yield this.data();return My.buffer(this.shape,this.dtype,n)})}bufferSync(){return My.buffer(this.shape,this.dtype,this.dataSync())}array(){return W(this,null,function*(){let n=yield this.data();return Th(this.shape,n,this.dtype==="complex64")})}arraySync(){return Th(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return W(this,null,function*(){this.throwIfDisposed();let n=Qs().read(this.dataId);if(this.dtype==="string"){let e=yield n;try{return e.map(i=>Ny(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return n})}dataToGPU(n){return this.throwIfDisposed(),Qs().readToGPU(this.dataId,n)}dataSync(){this.throwIfDisposed();let n=Qs().readSync(this.dataId);if(this.dtype==="string")try{return n.map(e=>Ny(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n}bytes(){return W(this,null,function*(){this.throwIfDisposed();let n=yield Qs().read(this.dataId);return this.dtype==="string"?n:new Uint8Array(n.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Qs().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(n=!1){return My.print(this,n)}clone(){return this.throwIfDisposed(),My.clone(this)}toString(n=!1){let e=this.dataSync();return OX(e,this.shape,this.dtype,n)}cast(n){return this.throwIfDisposed(),My.cast(this,n)}variable(n=!0,e,i){return this.throwIfDisposed(),Qs().makeVariable(this,n,e,i)}};Object.defineProperty(Yt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function L(){return T0("Tensor",()=>Yt)}L();var $c=class extends Yt{constructor(n,e,i,r){super(n.shape,n.dtype,n.dataId,r),this.trainable=e,this.name=i}assign(n){if(n.dtype!==this.dtype)throw new Error(`dtype of the new value (${n.dtype}) and previous value (${this.dtype}) must match`);if(!Uu(n.shape,this.shape))throw new Error(`shape of the new value (${n.shape}) and previous value (${this.shape}) must match`);Qs().disposeTensor(this),this.dataId=n.dataId,Qs().incRef(this,null)}dispose(){Qs().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty($c,Symbol.hasInstance,{value:t=>t instanceof Yt&&t.assign!=null&&t.assign instanceof Function});var $X=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}($X||{}),VX=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(VX||{}),BX=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(BX||{}),zX=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}(zX||{}),T1e={float32:BX,int32:$X,bool:VX,complex64:zX};function ii(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error(`Can not upcast ${t} with ${n}`)}return T1e[t][n]}function Uh(t){return ii(t,"int32")}function vk(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function _k(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function Tt(t,n){if(t.dtype===n.dtype)return[t,n];let e=ii(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function wk(t){let n=[];return GX(t,n,new Set),n}function GX(t,n,e){if(t==null)return;if(t instanceof Yt){n.push(t);return}if(!S1e(t))return;let i=t;for(let r in i){let o=i[r];e.has(o)||(e.add(o),GX(o,n,e))}}function S1e(t){return Array.isArray(t)||typeof t=="object"}function J2(t){return t.kernelName!=null}var Ck=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(n=>n.name)))}}}dispose(){for(let n in this.registeredVariables)this.registeredVariables[n].dispose()}},E1e=(()=>{class t{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ck}ready(){return W(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let i=0;i<e.length;i++){let r=e[i];if(yield this.initializeBackend(r).success){yield this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:i}=this.initializeBackendsAndReturnBest();if(i)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:i}=this.initializeBackend(e);if(i)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,i,r=1){return e in this.registryFactory?(ja(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:i,priority:r},!0)}setBackend(e){return W(this,null,function*(){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:i,asyncInit:r}=this.initializeBackend(e);if(!(r?yield i:i))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new bk(this.backendInstance),!0})}setupRegisteredKernels(){j2(this.backendName).forEach(i=>{i.setupFunc!=null&&i.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){j2(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){let i=this.registryFactory[e];if(i==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let r=i.factory();if(r&&!(r instanceof Hl)&&typeof r.then=="function"){let o=++this.pendingBackendInitId,s=r.then(a=>o<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,ja(`Initialization of backend ${e} failed`),ja(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ja(`Initialization of backend ${e} failed`),ja(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,i)=>this.registryFactory[i].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let i=0;i<e.length;i++){let r=e[i],{success:o,asyncInit:s}=this.initializeBackend(r);if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,i){let r=this.state.tensorInfo.get(i),o=r.backend,s=this.readSync(i),a=o.refCount(i);o.disposeData(i,!0),r.backend=e,e.move(i,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,i){let r=null;if(i==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");i=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof i!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=i(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,i,r){e();try{let o=r();return i(),o}catch(o){throw i(),o}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(e){let i=I.runKernel(Ua,{x:e}),r={x:e},o=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return I.runKernel(Ga,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[i],o,s,{}),i}runKernel(e,i,r){if(this.backendName==null&&this.backend,!(H2(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:i,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,i,r){let o=this.backend.numDataIds(),s=0;r.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=o-i-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let i,r=[],o=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=J2(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(J2(e)){let{kernelName:g,inputs:f,attrs:y}=e;this.backendName==null&&this.backend;let b=H2(g,this.backendName);A(b!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),l=()=>{let x=this.backend.numDataIds();c=b.kernelFunc({inputs:f,attrs:y,backend:this.backend});let _=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,x,_);let w=_.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(o){let C=this.getTensorsForGradient(g,f,w);r=this.saveTensorsForBackwardMode(C)}return w}}else{let{forwardFunc:g}=e,f=y=>{o&&(r=y.map(b=>this.keep(this.clone(b))))};l=()=>{let y=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,f));let b=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,y,b),b}}let{inputs:d,attrs:p}=e,h=J2(e)?null:e.backwardsFunc,m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?i=l():(m=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),i=m.outputs)}),o&&this.addTapeNode(u,d,i,h,r,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>d[g]!=null?d[g].shape:null),outputShapes:i.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(c)?i:i[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,i,r){let o=W2(e);if(o!=null){let s=o.inputsToSave||[],a=o.outputsToSave||[],l;o.saveAllInputs?(A(Array.isArray(i),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(i).map(u=>i[u])):l=s.map(u=>i[u]);let c=r.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,i,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let s=e;r==="string"&&$g(e[0])&&(s=e.map(c=>Ay(c)));let a=o.write(s,i,r),l=new Yt(i,r,a,this.nextTensorId());if(this.trackTensor(l,o),r==="string"){let c=this.state.tensorInfo.get(a),u=V2(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,i,r,o){r=r||"float32";let s={dataId:e,shape:i,dtype:r};return this.makeTensorFromTensorInfo(s,o)}makeTensorFromTensorInfo(e,i){let{dataId:r,shape:o,dtype:s}=e,a=new Yt(o,s,r,this.nextTensorId());return this.trackTensor(a,i),a}makeVariable(e,i=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));let s=new $c(e,i,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,i){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Pg(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:i||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof $c||this.track(e)}incRef(e,i){this.trackTensor(e,i),this.backend.incRef(e.dataId)}removeDataId(e,i){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===i&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let i=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=i.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let r=e.size*Pg(e.dtype);this.state.numBytes-=r}i.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,i.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let i=this.state.registeredVariables[e];this.disposeVariable(i)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){return W(this,null,function*(){this.state.profiling=!0;let i=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-i,this.state.activeProfile.newTensors=this.state.numTensors-r;for(let o of this.state.activeProfile.kernels)o.kernelTimeMs=yield o.kernelTimeMs,o.extraInfo=yield o.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,i,r,o,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:i,outputs:r,saved:s},c=W2(e);c!=null&&(o=c.gradFunc),o!=null&&(l.gradient=u=>(u=u.map((d,p)=>{if(d==null){let h=r[p],m=zg(h.size,h.dtype);return this.makeTensor(m,h.shape,h.dtype)}return d}),o(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let i={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(i.name=e),this.state.scopeStack.push(i),this.state.activeScope=i}endScope(e){let i=wk(e),r=new Set(i.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}let o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],i.forEach(s=>{!s.kept&&s.scopeId===o.id&&this.track(s)})}gradients(e,i,r,o=!1){if(A(i.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));A(s instanceof Yt,()=>"The result y returned by f() must be a tensor.");let a=AX(this.state.activeTape,i,s);if(!o&&a.length===0&&i.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=r??I1e(s.shape),NX(l,a,u=>this.tidy(u),D1e);let c=i.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let d of u.saved)d.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(e){return A(Vg(e),()=>"The f passed in customGrad(f) must be a function."),(...i)=>{A(i.every(l=>l instanceof Yt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r,o={};i.forEach((l,c)=>{o[c]=l});let s=(l,c)=>(r=e(...i,c),A(r.value instanceof Yt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),A(Vg(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(l,c)=>{let u=r.gradFunc(l,c),d=Array.isArray(u)?u:[u];A(d.length===i.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),A(d.every(h=>h instanceof Yt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,m)=>{p[m]=()=>h}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,i){return this.state.tensorInfo.get(e).backend.readToGPU(e,i)}time(e){return W(this,null,function*(){let i=Gh(),r=yield this.backend.time(e);return r.wallMs=Gh()-i,r})}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ck;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function I1e(t){let n=w0(Ht(t),"float32");return I.makeTensor(n,t,"float32")}function eL(){let t=G2();if(t._tfengine==null){let n=new C0(t);t._tfengine=new E1e(n)}return lX(t._tfengine.ENV),FX(()=>t._tfengine),t._tfengine}var I=eL();function D1e(t,n){let e={a:t,b:n};return I.runKernel(Ks,e)}var Vd={};Qo(Vd,{isBrowser:()=>nL,isMobile:()=>M1e,mockIsMobile:()=>N1e});function A1e(){return typeof navigator<"u"&&navigator!=null}var tL;function N1e(t){tL=t}function M1e(t){if(tL!==void 0)return tL;if(t||A1e()){if(t||(t=navigator),t.product==="ReactNative")return!0;let n=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!n){let e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))}return!1}function nL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Qr=G();Qr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Qr.registerFlag("IS_BROWSER",()=>nL());Qr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Qr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Qr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Qr.registerFlag("PROD",()=>!1);Qr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Qr.getBool("DEBUG"));Qr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Qr.registerFlag("IS_TEST",()=>!1);Qr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Qr.getBool("DEBUG"));Qr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Qr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Qr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function Hh(t,n){let e=t;if(cr(t))return n==="string"?[]:[t.length];if(vk(t)){let r=t.channels||"RGBA";return[t.height,t.width*r.length]}else if(_k(t))return[t.buffer.size/(n==null?4:Pg(n))];if(!Array.isArray(t))return[];let i=[];for(;Array.isArray(e)||cr(e)&&n!=="string";)i.push(e.length),e=e[0];return Array.isArray(t)&&G().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&HX(t,i,[]),i}function HX(t,n,e){if(e=e||[],!Array.isArray(t)&&!cr(t)){A(n.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}A(n.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${t.length} elements`),A(t.length===n[0],()=>`Element arr[${e.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let i=n.slice(1);for(let r=0;r<t.length;++r)HX(t[r],i,e.concat(r))}function UX(t,n,e,i){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==n||t==="numeric"&&n==="string")throw new Error(`Argument '${e}' passed to '${i}' must be ${t} tensor, but got ${n} tensor`)}}function S(t,n,e,i="numeric"){if(t instanceof L())return UX(i,t.dtype,n,e),t;let r=Hu(t);if(r!=="string"&&["bool","int32","float32"].indexOf(i)>=0&&(r=i),UX(i,r,n,e),t==null||!cr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${n}' passed to '${e}' must be a Tensor or TensorLike, but got '${l}'`)}let o=Hh(t,r);!cr(t)&&!Array.isArray(t)&&(t=[t]);let a=r!=="string"?Dy(t,r):$d(t,[],!0);return I.makeTensor(a,o,r)}function Tk(t,n,e,i="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${n} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((o,s)=>S(o,`${n}[${s}]`,e,i))}var O1e="__op";function D(t){let n=Object.keys(t);if(n.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let e=n[0],i=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+O1e;let r=(...o)=>{I.startScope(e);try{let s=i(...o);return kh(s)&&console.error("Cannot return a Promise inside of tidy."),I.endScope(s),s}catch(s){throw I.endScope(null),s}};return Object.defineProperty(r,"name",{value:e,configurable:!0}),r}function R1e(t,n){let e=S(t,"real","complex"),i=S(n,"imag","complex");W1(e.shape,i.shape,`real and imag shapes, ${e.shape} and ${i.shape}, must match in call to tf.complex().`);let r={real:e,imag:i};return I.runKernel(Xg,r)}var zo=D({complex_:R1e});function Bd(t,n,e,i){if(i==null)i=Hu(t);else if(i==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(_k(t)||vk(t)){if(i!=="float32"&&i!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return I.backend.createTensorFromGPUData(t,n||e,i)}if(!cr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){$i(n);let r=Ht(n),o=Ht(e);A(r===o,()=>`Based on the provided shape, [${n}], the tensor should have ${r} values but has ${o}`);for(let s=0;s<e.length;++s){let a=e[s],l=s===e.length-1?a!==Ht(n.slice(s)):!0;A(e[s]===n[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${n}). `)}}return!cr(t)&&!Array.isArray(t)&&(t=[t]),n=n||e,t=i!=="string"?Dy(t,i):$d(t,[],!0),I.makeTensor(t,n,i)}function ci(t,n,e){let i=Hh(t,e);return Bd(t,n,i,e)}var Vc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var Yi=class t{static join(n){return new t(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,n==null||(n instanceof Array||(n=[n]),n=n.map(i=>cr(i)?i.buffer:i),n.length===0))return;this.bufferUniformSize=n[0].byteLength;let e=0;for(let i=0;i<n.length;i++){let r=n[i];i!==n.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let o=e+r.byteLength;this.shards.push({buffer:r,start:e,end:o}),e=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,e=isNaN(Number(e))?0:e,n=Math.max(0,n),e=Math.min(this.byteLength,e),e<=n)return new ArrayBuffer(0);let i=this.findShardForByte(n);if(i===-1)throw new Error(`Could not find start shard for byte ${n}`);let r=e-n,o=new ArrayBuffer(r),s=new Uint8Array(o),a=0;for(let l=i;l<this.shards.length;l++){let c=this.shards[l],d=n+a-c.start,p=a,m=Math.min(e,c.end)-c.start,g=new Uint8Array(c.buffer,d,m-d);if(s.set(g,p),a+=g.length,e<c.end)break}return o}findShardForByte(n){if(this.shards.length===0||n<0||n>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function e(r){return n<r.start?-1:n>=r.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let i=F1e(this.shards,e);return i===-1?-1:(this.previousShardIndex=i,this.previousShardIndex)}};function F1e(t,n){let e=0,i=t.length;for(;e<=i;){let r=Math.floor((i-e)/2)+e,o=n(t[r]);if(o===0)return r;o<0?i=r:e=r+1}return-1}function L1e(t){G().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}PX(L1e);function fs(){return I}function O0(){return I.memory()}function H(t,n){return I.tidy(t,n)}function it(t){wk(t).forEach(e=>e.dispose())}function wi(t){return I.keep(t)}function WX(){return I.backendName}function Sk(t,n,e=1){return I.registerBackend(t,n,e)}function kk(){return I.backend}var zd=4;function XX(t,n){return W(this,null,function*(){let e=[],i=[],r=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<r.length;++s){let a=r[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(d=>W(null,null,function*(){let p=yield l.bytes(),h=p.reduce((f,y)=>f+y.length,0)+zd*p.length,m=new Uint8Array(h),g=0;for(let f=0;f<p.length;f++){let y=p[f],b=new Uint8Array(new Uint32Array([y.length]).buffer);m.set(b,g),g+=zd,m.set(y,g),g+=y.length}d(m)}));i.push(u)}else i.push(l.data());n!=null&&(c.group=n),e.push(c)}let o=yield Promise.all(i);return{data:V1e(o),specs:e}})}function Ek(t,n){let e=new Yi(t),i={},r=0;for(let o of n){let s=P1e(o,(a,l)=>e.slice(r+a,r+l));i[o.name]=KX(o,e.slice(r,r+s)),r+=s}return i}function P1e(t,n){let e=Ht(t.shape),i;if("quantization"in t){let r=t.quantization;i=Vc[r.dtype]}else if(t.dtype==="string"){let r=0;for(let o=0;o<e;o++)r+=zd+new Uint32Array(n(r,r+zd))[0];return r}else i=Vc[t.dtype];return e*i}function $1e(t,n){return W(this,null,function*(){let e=Ht(t.shape),i;if("quantization"in t){let r=t.quantization;i=Vc[r.dtype]}else if(t.dtype==="string"){let r=0;for(let o=0;o<e;o++)r+=zd+new Uint32Array(yield n(r,r+zd))[0];return r}else i=Vc[t.dtype];return e*i})}function KX(t,n){let e=t.name,i=t.dtype,r=t.shape,o=Ht(r),s,a=0;if("quantization"in t){let l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(i!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${i}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=Vc[l.dtype],u=l.dtype==="uint8"?new Uint8Array(n):new Uint16Array(n);if(i==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=p*l.scale+l.min}}else if(l.dtype==="float16")s=U1e()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(i==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${e}': ${i}`);a+=o*c}else if(i==="string"){let l=Ht(t.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(n.slice(a,a+zd))[0];a+=zd;let d=new Uint8Array(n.slice(a,a+u));s.push(d),a+=u}}else{let l=Vc[i];if(i==="float32")s=new Float32Array(n);else if(i==="int32")s=new Int32Array(n);else if(i==="bool")s=new Uint8Array(n);else if(i==="complex64"){s=new Float32Array(n);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let m=0;m<c.length;m++)c[m]=s[m*2],u[m]=s[m*2+1];let d=ci(c,r,"float32"),p=ci(u,r,"float32"),h=zo(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${e}': ${i}`);a+=o*l}return ci(s,r,i)}function jX(t,n,e){return W(this,null,function*(){let i=new Uint8Array(n);for(;i.byteLength<e;){let{done:r,value:o}=yield t.read();if(r&&o==null){let a=e-i.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(i.length+o.byteLength);s.set(i,0),s.set(new Uint8Array(o),i.length),i=s}return i.buffer})}function iL(t,n){return W(this,null,function*(){let e={},i=t.getReader(),r=new ArrayBuffer(0);for(let o of n){let s=yield $1e(o,(c,u)=>W(null,null,function*(){return r=yield jX(i,r,u),r.slice(c,u)}));r=yield jX(i,r,s);let a=r.slice(0,s);r=r.slice(s);let l=KX(o,a);if(e[o.name]=l,WX()==="webgpu"){let c=kk();"uploadToGPU"in c&&Ht(l.shape)>=G().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e})}function V1e(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let n=0,e=[];t.forEach(o=>{if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});let i=new Uint8Array(n),r=0;return e.forEach(o=>{i.set(new Uint8Array(o.buffer),r),r+=o.byteLength}),i.buffer}var rL=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function qX(t){return rL?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function YX(t){if(rL)return Buffer.from(t).toString("base64");let n=new Uint8Array(t),e="";for(let i=0,r=n.length;i<r;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function QX(t){if(rL){let i=Buffer.from(t,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}let n=atob(t),e=new Uint8Array(n.length);for(let i=0;i<n.length;++i)e.set([n.charCodeAt(i)],i);return e.buffer}function ZX(t){return Yi.join(t)}function oL(t){let n="/";for(t=t.trim();t.endsWith(n);)t=t.slice(0,t.length-1);let e=t.split(n);return e[e.length-1]}function Ik(t,n){let e={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};return t.signature!=null&&(e.signature=t.signature),t.userDefinedMetadata!=null&&(e.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(e.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(e.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(e.trainingConfig=t.trainingConfig),e}function sL(t,n,e){let i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(i.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");i.weightSpecs=n,i.weightData=e}return t.signature!=null&&(i.signature=t.signature),t.userDefinedMetadata!=null&&(i.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(i.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(i.initializerSignature=t.initializerSignature),i}function Oy(t,n){return W(this,null,function*(){let e,i;return t.weightsManifest!=null&&([e,i]=yield n(t.weightsManifest)),sL(t,e,i)})}function qa(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:qX(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:qX(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Yi(t.weightData).byteLength}}function R0(t){let n=[];for(let e of t)n.push(...e.weights);return n}function B1e(){let t=e=>{let i=e<<13,r=0;for(;(i&8388608)===0;)r-=8388608,i<<=1;return i&=-8388609,r+=947912704,i|r},n=new Uint32Array(2048);n[0]=0;for(let e=1;e<1024;e++)n[e]=t(e);for(let e=1024;e<2048;e++)n[e]=939524096+(e-1024<<13);return n}function z1e(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let n=1;n<31;n++)t[n]=n<<23;for(let n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}function G1e(){let t=new Uint32Array(64);for(let n=0;n<64;n++)t[n]=1024;return t[0]=t[32]=0,t}function U1e(){let t=B1e(),n=z1e(),e=G1e();return i=>{let r=new ArrayBuffer(4*i.length),o=new Uint32Array(r);for(let s=0;s<i.length;s++){let a=i[s],l=t[e[a>>10]+(a&1023)]+n[a>>10];o[s]=l}return new Float32Array(r)}}var Ci=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(n){t.getInstance().saveRouters.push(n)}static registerLoadRouter(n){t.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return t.getHandlers(n,"save")}static getLoadHandlers(n,e){return t.getHandlers(n,"load",e)}static getHandlers(n,e,i){let r=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(n,i);a!==null&&r.push(a)}),r}},JX=t=>Ci.registerSaveRouter(t),eK=t=>Ci.registerLoadRouter(t),tK=t=>Ci.getSaveHandlers(t),nK=(t,n)=>Ci.getLoadHandlers(t,n);var aL="tensorflowjs",lL=1,Wh="models_store",Gd="model_info_store";function iK(){if(!G().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function cL(t){let n=t.result;n.createObjectStore(Wh,{keyPath:"modelPath"}),n.createObjectStore(Gd,{keyPath:"modelPath"})}var jh=(()=>{class t{constructor(e){if(this.indexedDB=iK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){return W(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)})}load(){return W(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(e,i){return new Promise((r,o)=>{let s=this.indexedDB.open(aL,lL);s.onupgradeneeded=()=>cL(s),s.onsuccess=()=>{let a=s.result;if(i==null){let l=a.transaction(Wh,"readonly"),u=l.objectStore(Wh).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=d=>(a.close(),o(u.error)),l.oncomplete=()=>a.close()}else{i.weightData=Yi.join(i.weightData);let l=qa(i),c=a.transaction(Gd,"readwrite"),u=c.objectStore(Gd),d;try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(h){return o(h)}let p;d.onsuccess=()=>{p=a.transaction(Wh,"readwrite");let h=p.objectStore(Wh),m;try{m=h.put({modelPath:this.modelPath,modelArtifacts:i,modelArtifactsInfo:l})}catch(g){return o(g)}m.onsuccess=()=>r({modelArtifactsInfo:l}),m.onerror=g=>{u=c.objectStore(Gd);let f=u.delete(this.modelPath);f.onsuccess=()=>(a.close(),o(m.error)),f.onerror=y=>(a.close(),o(m.error))}},d.onerror=h=>(a.close(),o(d.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>o(s.error)})}}return t.URL_SCHEME="indexeddb://",t})();var rK=t=>G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(jh.URL_SCHEME)?H1e(t.slice(jh.URL_SCHEME.length)):null;Ci.registerSaveRouter(rK);Ci.registerLoadRouter(rK);function H1e(t){return new jh(t)}function W1e(t){return t.startsWith(jh.URL_SCHEME)?t.slice(jh.URL_SCHEME.length):t}var Dk=class{constructor(){this.indexedDB=iK()}listModels(){return W(this,null,function*(){return new Promise((n,e)=>{let i=this.indexedDB.open(aL,lL);i.onupgradeneeded=()=>cL(i),i.onsuccess=()=>{let r=i.result,o=r.transaction(Gd,"readonly"),a=o.objectStore(Gd).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;n(l)},a.onerror=l=>(r.close(),e(a.error)),o.oncomplete=()=>r.close()},i.onerror=r=>e(i.error)})})}removeModel(n){return W(this,null,function*(){return n=W1e(n),new Promise((e,i)=>{let r=this.indexedDB.open(aL,lL);r.onupgradeneeded=()=>cL(r),r.onsuccess=()=>{let o=r.result,s=o.transaction(Gd,"readwrite"),a=s.objectStore(Gd),l=a.get(n),c;l.onsuccess=()=>{if(l.result==null)return o.close(),i(new Error(`Cannot find model with path '${n}' in IndexedDB.`));{let u=a.delete(n),d=()=>{c=o.transaction(Wh,"readwrite");let h=c.objectStore(Wh).delete(n);h.onsuccess=()=>e(l.result.modelArtifactsInfo),h.onerror=m=>i(l.error)};u.onsuccess=d,u.onerror=p=>(d(),o.close(),i(l.error))}},l.onerror=u=>(o.close(),i(l.error)),s.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},r.onerror=o=>i(r.error)})})}};var Bc="/",Ry="tensorflowjs_models",oK="info",j1e="model_topology",q1e="weight_specs",X1e="weight_data",K1e="model_metadata";function sK(t){return{info:[Ry,t,oK].join(Bc),topology:[Ry,t,j1e].join(Bc),weightSpecs:[Ry,t,q1e].join(Bc),weightData:[Ry,t,X1e].join(Bc),modelMetadata:[Ry,t,K1e].join(Bc)}}function aK(t){for(let n of Object.values(t))window.localStorage.removeItem(n)}function Y1e(t){let n=t.split(Bc);if(n.length<3)throw new Error(`Invalid key format: ${t}`);return n.slice(1,n.length-1).join(Bc)}function Q1e(t){return t.startsWith(qh.URL_SCHEME)?t.slice(qh.URL_SCHEME.length):t}var qh=(()=>{class t{constructor(e){if(!G().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=sK(this.modelPath)}save(e){return W(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let i=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=qa(e),s=Yi.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,i),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,YX(s));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:o}}catch{throw aK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}})}load(){return W(this,null,function*(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let i={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);i.modelTopology=r;let o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);i.weightSpecs=o;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);i.format=l.format,i.generatedBy=l.generatedBy,i.convertedBy=l.convertedBy,l.signature!=null&&(i.signature=l.signature),l.userDefinedMetadata!=null&&(i.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(i.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(i.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(i.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return i.weightData=QX(a),i})}}return t.URL_SCHEME="localstorage://",t})();var lK=t=>G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qh.URL_SCHEME)?Z1e(t.slice(qh.URL_SCHEME.length)):null;Ci.registerSaveRouter(lK);Ci.registerLoadRouter(lK);function Z1e(t){return new qh(t)}var Ak=class{constructor(){A(G().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),A(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return W(this,null,function*(){let n={},e=Ry+Bc,i=Bc+oK;for(let r=0;r<this.LS.length;++r){let o=this.LS.key(r);if(o.startsWith(e)&&o.endsWith(i)){let s=Y1e(o);n[s]=JSON.parse(this.LS.getItem(o))}}return n})}removeModel(n){return W(this,null,function*(){n=Q1e(n);let e=sK(n);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${n}'`);let i=JSON.parse(this.LS.getItem(e.info));return aK(e),i})}};var Fy="://",Zs=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(n,e){A(n!=null,()=>"scheme must not be undefined or null."),n.endsWith(Fy)&&(n=n.slice(0,n.indexOf(Fy))),A(n.length>0,()=>"scheme must not be an empty string.");let i=t.getInstance();A(i.managers[n]==null,()=>`A model store manager is already registered for scheme '${n}'.`),i.managers[n]=e}static getManager(n){let e=t.getInstance().managers[n];if(e==null)throw new Error(`Cannot find model manager for scheme '${n}'`);return e}static getSchemes(){return Object.keys(t.getInstance().managers)}};function Nk(t){if(t.indexOf(Fy)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Zs.getSchemes().join(",")}`);return{scheme:t.split(Fy)[0],path:t.split(Fy)[1]}}function cK(t,n,e=!1){return W(this,null,function*(){A(t!==n,()=>`Old path and new path are the same: '${t}'`);let i=Ci.getLoadHandlers(t);A(i.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),A(i.length<2,()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${t}.`);let r=i[0],o=Ci.getSaveHandlers(n);A(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),A(o.length<2,()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${n}.`);let s=o[0],a=Nk(t).scheme,l=Nk(t).path,c=a===Nk(t).scheme,u=yield r.load();e&&c&&(yield Zs.getManager(a).removeModel(l));let d=yield s.save(u);return e&&!c&&(yield Zs.getManager(a).removeModel(l)),d.modelArtifactsInfo})}function uK(){return W(this,null,function*(){let t=Zs.getSchemes(),n={};for(let e of t){let i=yield Zs.getManager(e).listModels();for(let r in i){let o=e+Fy+r;n[o]=i[r]}}return n})}function dK(t){return W(this,null,function*(){let n=Nk(t);return Zs.getManager(n.scheme).removeModel(n.path)})}function pK(t,n){return W(this,null,function*(){return cK(t,n,!1)})}function hK(t,n){return W(this,null,function*(){return cK(t,n,!0)})}var uL=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(n,e){return fetch(n,e)}now(){return performance.now()}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)}decode(n,e){return new TextDecoder(e).decode(n)}setTimeoutCustom(n,e){if(typeof window>"u"||!G().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(n,e);return}this.functionRefs.push(n),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{if(i.source===window&&i.data.name===this.messageName){i.stopPropagation();let r=this.functionRefs[i.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(n){return fk(n)}};if(G().get("IS_BROWSER")){G().setPlatform("browser",new uL);try{Zs.registerManager(qh.URL_SCHEME,new Ak)}catch{}try{Zs.registerManager(jh.URL_SCHEME,new Dk)}catch{}}var eke={importFetch:()=>fK()},dL;var pL=class{constructor(){this.util=gK(),this.textEncoder=new this.util.TextEncoder}fetch(n,e){return G().global.fetch!=null?G().global.fetch(n,e):(dL==null&&(dL=eke.importFetch()),dL(n,e))}now(){let n=process.hrtime();return n[0]*1e3+n[1]/1e6}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(n)}decode(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)}isTypedArray(n){return this.util.types.isFloat32Array(n)||this.util.types.isInt32Array(n)||this.util.types.isUint8Array(n)||this.util.types.isUint8ClampedArray(n)}};G().get("IS_NODE")&&!G().get("IS_BROWSER")&&G().setPlatform("node",new pL);function Ue(t,n="float32",e){return n=n||"float32",$i(t),new nn(t,n,e)}function tke(t,n){let e=S(t,"x","cast");if(!$2(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");let i={x:e},r={dtype:n};return I.runKernel(Ga,i,r)}var le=D({cast_:tke});function nke(t){let e={x:S(t,"x","clone","string_or_numeric")};return I.runKernel(Ua,e)}var _o=D({clone_:nke});function yK(t,n=!1){console.log(t.toString(n))}eL();var ike={buffer:Ue,cast:le,clone:_o,print:yK};LX(ike);function rke(t,n){let e=S(t,"a","add"),i=S(n,"b","add");[e,i]=Tt(e,i);let r={a:e,b:i};return I.runKernel(Ks,r)}var ne=D({add_:rke});function oke(t,n){let e=S(t,"a","floorDiv"),i=S(n,"b","floorDiv");[e,i]=Tt(e,i);let r={a:e,b:i};return I.runKernel(cc,r)}var Mk=D({floorDiv_:oke});function ske(t,n){let e=S(t,"a","div"),i=S(n,"b","div");if([e,i]=Tt(e,i),e.dtype==="int32"&&i.dtype==="int32")return Mk(e,i);let r={a:e,b:i},o={};return I.runKernel(ic,r,o)}var we=D({div_:ske});function ake(t,n){let e=S(t,"a","mul"),i=S(n,"b","mul");[e,i]=Tt(e,i);let r={a:e,b:i};return I.runKernel(xc,r)}var R=D({mul_:ake});function lke(t){let n=S(t,"x","abs");if(n.dtype==="complex64"){let e={x:n};return I.runKernel(Zu,e)}else{let e={x:n};return I.runKernel(Wu,e)}}var ri=D({abs_:lke});function cke(t){let e={x:S(t,"x","acos")};return I.runKernel(jl,e)}var hL=D({acos_:cke});function uke(t){let e={x:S(t,"x","acosh")};return I.runKernel(ql,e)}var mL=D({acosh_:uke});function dke(t,n=null,e=!1){let r={x:S(t,"x","all","bool")},o={axis:n,keepDims:e};return I.runKernel(Ug,r,o)}var F0=D({all_:dke});function pke(t,n=null,e=!1){let r={x:S(t,"x","any","bool")},o={axis:n,keepDims:e};return I.runKernel(Hg,r,o)}var Py=D({any_:pke});function hke(t,n=0){let i={x:S(t,"x","argMax")},r={axis:n};return I.runKernel(ju,i,r)}var Js=D({argMax_:hke});function mke(t,n=0){let i={x:S(t,"x","argMin")},r={axis:n};return I.runKernel(qu,i,r)}var bK=D({argMin_:mke});function fke(t){let e={x:S(t,"x","asin")};return I.runKernel(Xl,e)}var fL=D({asin_:fke});function gke(t){let e={x:S(t,"x","asinh")};return I.runKernel(Kl,e)}var gL=D({asinh_:gke});function yke(t){let e={x:S(t,"x","atan")};return I.runKernel(Yl,e)}var yL=D({atan_:yke});function bke(t,n){let e=S(t,"a","atan2"),i=S(n,"b","atan2");[e,i]=Tt(e,i);let r={a:e,b:i};return I.runKernel(Zl,r)}var xK=D({atan2_:bke});function xke(t){let e={x:S(t,"x","atanh")};return I.runKernel(Ql,e)}var bL=D({atanh_:xke});function vke(t,n,e,i,r="NHWC",o){let s=t[3],a=[...n,s],l=_K(r);return Kh(t,a,e,o,i,null,null,l)}function vL(t,n,e,i,r,o,s="channelsLast"){let[a,l]=L0(n),c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Kh(t,c,e,i,r,o,!1,s)}function _ke(t,n,e,i,r,o,s="NDHWC"){let[a,l,c]=xL(n),u,d;if(s==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return vK(t,u,e,i,r,!1,d,o)}function Kh(t,n,e,i,r,o,s=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,h,,m]=n,[g,f]=L0(e),[y,b]=L0(i),x=$y(p,y),_=$y(h,b),{padInfo:w,outHeight:C,outWidth:k}=Tke(r,c,u,g,f,x,_,o,a),N=s?m*d:m,P;return a==="channelsFirst"?P=[l,N,C,k]:a==="channelsLast"&&(P=[l,C,k,N]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:C,outWidth:k,outChannels:N,padInfo:w,strideHeight:g,strideWidth:f,filterHeight:p,filterWidth:h,effectiveFilterHeight:x,effectiveFilterWidth:_,dilationHeight:y,dilationWidth:b,inShape:t,outShape:P,filterShape:n}}function vK(t,n,e,i,r,o=!1,s="channelsLast",a){let[l,c,u,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d,p]=t;else if(s==="channelsFirst")[l,p,c,u,d]=t;else throw new Error(`Unknown dataFormat ${s}`);let[h,m,g,,f]=n,[y,b,x]=xL(e),[_,w,C]=xL(i),k=$y(h,_),N=$y(m,w),P=$y(g,C),{padInfo:F,outDepth:z,outHeight:Y,outWidth:K}=Ske(r,c,u,d,y,b,x,k,N,P,a),Z=o?f*p:f,te;return s==="channelsFirst"?te=[l,Z,z,Y,K]:s==="channelsLast"&&(te=[l,z,Y,K,Z]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:p,outDepth:z,outHeight:Y,outWidth:K,outChannels:Z,padInfo:F,strideDepth:y,strideHeight:b,strideWidth:x,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:k,effectiveFilterHeight:N,effectiveFilterWidth:P,dilationDepth:_,dilationHeight:w,dilationWidth:C,inShape:t,outShape:te,filterShape:n}}function wke(t,n,e,i,r){i==null&&(i=_L(t,n,e));let o=t[0],s=t[1],a=P0((o-n+2*i)/e+1,r),l=P0((s-n+2*i)/e+1,r);return[a,l]}function Cke(t,n,e,i,r,o){r==null&&(r=_L(t,n[0],i[0]));let s=[0,0,0,e];for(let a=0;a<3;a++)t[a]+2*r>=n[a]&&(s[a]=P0((t[a]-n[a]+2*r)/i[a]+1,o));return s}function _L(t,n,e,i=1){let r=$y(n,i);return Math.floor((t[0]*(e-1)-e+r)/2)}function L0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function xL(t){return typeof t=="number"?[t,t,t]:t}function $y(t,n){return n<=1?t:t+(t-1)*(n-1)}function Tke(t,n,e,i,r,o,s,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=wke([n,e],o,i,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(n/i),d=Math.ceil(e/r);let p=Math.max(0,(u-1)*i+o-n),h=Math.max(0,(d-1)*r+s-e),m=Math.floor(p/2),g=p-m,f=Math.floor(h/2),y=h-f;c={top:m,bottom:g,left:f,right:y,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-o+1)/i),d=Math.ceil((e-s+1)/r);else if(typeof t=="object"){let p=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],g=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:m,right:g,type:p===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},u=P0((n-o+p+h)/i+1,a),d=P0((e-s+m+g)/r+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function Ske(t,n,e,i,r,o,s,a,l,c,u){let d,p,h,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let f=Cke([n,e,i,1],[a,l,c],1,[r,o,s],t,u);p=f[0],h=f[1],m=f[2]}else if(t==="same"){p=Math.ceil(n/r),h=Math.ceil(e/o),m=Math.ceil(i/s);let g=(p-1)*r+a-n,f=(h-1)*o+l-e,y=(m-1)*s+c-i,b=Math.floor(g/2),x=g-b,_=Math.floor(f/2),w=f-_,C=Math.floor(y/2),k=y-C;d={top:_,bottom:w,left:C,right:k,front:b,back:x,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:m}}function P0(t,n){if(!n)return Math.trunc(t);switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${n}`)}}function Go(t){let[n,e,i]=L0(t);return n===1&&e===1&&i===1}function Bi(t,n){return Go(t)||Go(n)}function Xa(t){return L0(t).every(n=>n>0)}function _K(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function gn(t,n,e){if(e!=null){if(typeof n=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);if(typeof n=="number")A(Wl(n),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);else if(typeof n=="object")n.forEach(i=>{i.forEach(r=>{A(Wl(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${r}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${n}`)}}function kke(t,n){let i={x:S(t,"x","reshape","string_or_numeric")},r={shape:n};return I.runKernel(Td,i,r)}var $=D({reshape_:kke});function Eke(t,n,e,i,r){let o=S(t,"x","avgPool","float32"),s=1;A(Bi(e,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`);let a=o,l=!1;o.rank===3&&(l=!0,a=$(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),gn("avgPool",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r},d=I.runKernel(Xu,c,u);return d=le(d,o.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Yh=D({avgPool_:Eke});function Ike(t,n,e,i,r,o="NDHWC"){let s=S(t,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),A(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),A(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),gn("avgPool3d",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r,dataFormat:o},d=I.runKernel(Ku,c,u);return d=le(d,a.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var wL=D({avgPool3d_:Ike});function Dke(t,n=0){A(t.length>=1,()=>"Pass at least one tensor to concat");let e=Tk(t,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),e.length===1)return _o(e[0]);let i=e,r={axis:n};return I.runKernel(Ju,i,r)}var vn=D({concat_:Dke});function Ake(t,n,e=!1,i=!1){let r=S(t,"a","matMul"),o=S(n,"b","matMul");[r,o]=Tt(r,o);let s={a:r,b:o},a={transposeA:e,transposeB:i};return I.runKernel(Yu,s,a)}var Wt=D({matMul_:Ake});function Nke(t){let e={x:S(t,"x","sigmoid","float32")};return I.runKernel(Ac,e)}var gs=D({sigmoid_:Nke});function Mke(t,n,e){let i=S(t,"x","slice","string_or_numeric");if(i.rank===0)throw new Error("Slicing scalar is not possible");let r={x:i},o={begin:n,size:e};return I.runKernel(Dd,r,o)}var Ot=D({slice_:Mke});function Oke(t){let e={x:S(t,"x","tanh","float32")};return I.runKernel(Lc,e)}var Qh=D({tanh_:Oke});function Rke(t,n,e){let i=S(t,"x","batchToSpaceND"),r=n.reduce((a,l)=>a*l);A(i.rank>=1+n.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${n.length}`),A(e.length===n.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${n.length}`),A(i.shape[0]%r===0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${r}`);let o={x:i},s={blockShape:n,crops:e};return I.runKernel(Qu,o,s)}var Vy=D({batchToSpaceND_:Rke});function wK(t){let n;return t.rank===0||t.rank===1?n=$(t,[1,1,1,t.size]):t.rank===2?n=$(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?n=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]):n=t,n}function Fke(t,n,e,i,r,o){o==null&&(o=.001);let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;i!=null&&(u=S(i,"offset","batchNorm")),A(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:wK(s),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:o},m=I.runKernel(ad,p,h);return $(m,s.shape)}var Ud=D({batchNorm_:Fke});function Lke(t,n,e,i,r,o){let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;return i!=null&&(u=S(i,"offset","batchNorm")),A(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),A(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),A(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&A(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&A(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Ud(s,a,l,u,c,o)}var CL=D({batchNorm2d_:Lke});function Pke(t,n,e,i,r,o){let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;return i!=null&&(u=S(i,"offset","batchNorm")),A(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),A(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),A(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&A(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&A(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Ud(s,a,l,u,c,o)}var TL=D({batchNorm3d_:Pke});function $ke(t,n,e,i,r,o){let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;return i!=null&&(u=S(i,"offset","batchNorm")),A(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),A(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),A(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&A(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&A(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Ud(s,a,l,u,c,o)}var SL=D({batchNorm4d_:$ke});function Vke(t,n,e){let i=S(t,"x","bincount"),r=S(n,"weights","bincount");A(i.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`),A(e>=0,()=>`size must be non-negative, but got ${e}.`),A(r.size===i.size||r.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${r.shape}.`);let o={x:i,weights:r},s={size:e};return I.runKernel(qg,o,s)}var CK=D({bincount_:Vke});function Bke(t,n){let e=S(t,"broadcastTo","x"),i=e.shape;if($i(n),n.length<e.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${e.rank}.`);if(n.length>e.rank){let c=e.shape.slice();for(;c.length<n.length;)c.unshift(1);e=$(e,c)}let r=e.shape,o=Array.from(n);for(let c=n.length-1;c>=0;c--)if(r[c]===n[c])o[c]=1;else if(e.shape[c]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${n}].`);if(o.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return _o(e);let a={x:e},l={reps:o};return I.runKernel(Ha,a,l)}var zc=D({broadcastTo_:Bke});function zke(t){let e={x:S(t,"x","ceil","float32")};return I.runKernel(Jl,e)}var kL=D({ceil_:zke});function Gc(t,n,e){$i(t),e=e||Hu(n);let i={shape:t,value:n,dtype:e};return I.runKernel(ay,{},i)}function Gke(t,n,e){let i=S(t,"x","clipByValue");if(A(n<=e,()=>`Error in clip: min (${n}) must be less than or equal to max (${e}).`),n===e)return Gc(i.shape,n,i.dtype);let r={x:i},o={clipValueMin:n,clipValueMax:e};return I.runKernel(ec,r,o)}var Qn=D({clipByValue_:Gke});function Uke(t){return vn(t,0)}var EL=D({concat1d_:Uke});function Hke(t,n){return vn(t,n)}var IL=D({concat2d_:Hke});function Wke(t,n){return vn(t,n)}var DL=D({concat3d_:Wke});function jke(t,n){return vn(t,n)}var AL=D({concat4d_:jke});function qke(t,n,e,i,r="NHWC",o=[1,1],s){let a=S(t,"x","conv2d","float32"),l=S(n,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),A(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),gn("conv2d",i,s);let d=r==="NHWC"?c.shape[3]:c.shape[1];A(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),A(Bi(e,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),A(Xa(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),A(Xa(e),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},h={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s},m=I.runKernel(ed,p,h);return u?$(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var wo=D({conv2d_:qke});function Xke(t,n,e,i,r="NWC",o=1,s){let a=S(t,"x","conv1d"),l=S(n,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1]])),A(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),A(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),gn("conv1d",i,s),A(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),A(Bi(e,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${o}'`),A(Xa(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),A(Xa(e),()=>"Error in conv1D: Stride should be larger than 0."),A(r==="NWC",()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`);let d=$(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=$(c,[c.shape[0],1,c.shape[1],c.shape[2]]),f=wo(p,d,[1,e],i,"NHWC",[1,o],s);return u?$(f,[f.shape[2],f.shape[3]]):$(f,[f.shape[0],f.shape[2],f.shape[3]])}var $0=D({conv1d_:Xke});function Kke(t,n,e,i,r,o="NHWC",s){A(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let a=t,l=n,c=!1;n.rank===3&&(c=!0,l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]),a=[1,t[0],t[1],t[2]]),A(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),A(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),A(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);let u=o==="NHWC"?a[3]:a[1],d=o==="NHWC"?l.shape[3]:l.shape[1];A(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),A(d===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${e.shape[3]}.`),gn("conv2dDerInput",r,s);let p={dy:l,filter:e},h={strides:i,pad:r,dataFormat:o,dimRoundingMode:s,inputShape:a},m=I.runKernel(td,p,h);return c?$(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var By=D({conv2DBackpropInput_:Kke});function Yke(t,n,e,i,r,o){let s=S(t,"x","conv2dTranspose"),a=S(n,"filter","conv2dTranspose");return By(e,s,a,i,r,"NHWC",o)}var V0=D({conv2dTranspose_:Yke});function Qke(t,n,e,i,r="NDHWC",o=[1,1,1]){let s=S(t,"x","conv3d"),a=S(n,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),A(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),A(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),A(Bi(e,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),A(r==="NDHWC",()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`),A(Xa(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),A(Xa(e),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},d={strides:e,pad:i,dataFormat:r,dilations:o},p=I.runKernel(nd,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var NL=D({conv3d_:Qke});function Zke(t,n,e,i,r){A(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let o=t,s=n,a=!1;n.rank===4&&(a=!0,s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);let l=o[4],c=s.shape[4];A(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),A(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),A(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),A(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),A(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);let u={dy:s,filter:e},d={pad:r,strides:i,inputShape:o},p=I.runKernel(Qg,u,d);return a?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Ok=D({conv3DBackpropInput_:Zke});function Jke(t,n,e,i,r){let o=S(t,"x","conv3dTranspose"),s=S(n,"filter","conv3dTranspose");return Ok(e,o,s,i,r)}var ML=D({conv3dTranspose_:Jke});function eEe(t){let e={x:S(t,"x","cos","float32")};return I.runKernel(tc,e)}var Zh=D({cos_:eEe});function tEe(t){let e={x:S(t,"x","cosh","float32")};return I.runKernel(nc,e)}var B0=D({cosh_:tEe});function nEe(t,n=0,e=!1,i=!1){let o={x:S(t,"x","cumprod")},s={axis:n,exclusive:e,reverse:i};return I.runKernel(Zg,o,s)}var z0=D({cumprod_:nEe});function iEe(t,n=0,e=!1,i=!1){let o={x:S(t,"x","cumsum")},s={axis:n,exclusive:e,reverse:i};return I.runKernel(id,o,s)}var Rk=D({cumsum_:iEe});function rEe(t,n,e,i=!1){let r=S(t,"x","denseBincount"),o=S(n,"weights","denseBincount");A(r.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${r.dtype}`),A(r.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${r.rank}.`),A(e>=0,()=>`size must be non-negative, but got ${e}.`),A(o.size===r.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${r.shape}, weights shape: ${o.shape}.`);let s={x:r,weights:o},a={size:e,binaryOutput:i};return I.runKernel(ey,s,a)}var Fk=D({denseBincount_:rEe});function oEe(t,n,e="NHWC"){let i=S(t,"x","depthToSpace","float32"),r=e==="NHWC"?i.shape[1]:i.shape[2],o=e==="NHWC"?i.shape[2]:i.shape[3],s=e==="NHWC"?i.shape[3]:i.shape[1];A(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),A(r*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${n}  for depthToSpace with input shape
    ${i.shape}`),A(o*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${n} for depthToSpace with input shape
        ${i.shape}`),A(s%(n*n)===0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${s} for depthToSpace with input shape ${i.shape}`);let a={x:i},l={blockSize:n,dataFormat:e};return I.runKernel(ty,a,l)}var TK=D({depthToSpace_:oEe});function sEe(t,n,e,i,r="NHWC",o=[1,1],s){let a=S(t,"x","depthwiseConv2d","float32"),l=S(n,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),A(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let d=r==="NHWC"?c.shape[3]:c.shape[1];A(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),gn("depthwiseConv2d",i,s);let p={x:c,filter:l},h={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s},m=I.runKernel(rd,p,h);return u?$(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var Uc=D({depthwiseConv2d_:sEe});function aEe(t,n,e,i,r=[1,1],o="NHWC"){let s=S(t,"x","dilation2d"),a=S(n,"filter","dilation2d");A(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),A(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),A(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=s,c=!1;s.rank===3&&(l=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),A(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},d={strides:e,pad:i,dilations:r},p=I.runKernel(od,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var SK=D({dilation2d_:aEe});var Co={};Qo(Co,{assertAndGetBroadcastShape:()=>ut,getBroadcastDims:()=>kK,getReductionAxes:()=>un});function kK(t,n){let e=t.length,i=[];for(let r=0;r<e;r++){let o=e-1-r,s=t[o]||1;(n[n.length-1-r]||1)>1&&s===1&&i.unshift(o)}return i}function un(t,n){let e=[];for(let i=0;i<n.length;i++){let r=t[t.length-i-1],o=n.length-i-1,s=n[o];(r==null||r===1&&s>1)&&e.unshift(o)}return e}function ut(t,n){let e=Math.max(t.length,n.length),i=new Array(e);for(let r=0;r<e;r++){let o=t[t.length-r-1];o==null&&(o=1);let s=n[n.length-r-1];if(s==null&&(s=1),o===1)i[e-r-1]=s;else if(s===1)i[e-r-1]=o;else if(o!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${n}.`;throw Error(a)}else i[e-r-1]=o}return i}function lEe(t,n){let e=S(t,"a","equal","string_or_numeric"),i=S(n,"b","equal","string_or_numeric");[e,i]=Tt(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Eh,r)}var Ir=D({equal_:lEe});function cEe(t,n,e){let i=S(n,"a","where"),r=S(e,"b","where"),o=S(t,"condition","where","bool"),s=ut(ut(o.shape,i.shape),r.shape),a=zc(o,s),l=zc(i,s),c=zc(r,s),u={condition:a,t:l,e:c};return I.runKernel(Id,u)}var _n=D({where_:cEe});function uEe(t){let e={x:S(t,"x","zerosLike")};return I.runKernel(Ld,e)}var We=D({zerosLike_:uEe});function dEe(t,n){let e=S(t,"a","div"),i=S(n,"b","div");[e,i]=Tt(e,i);let r=we(e,i),o=We(r),s=Ir(i,o);return _n(s,o,r)}var EK=D({divNoNan_:dEe});function pEe(t,n){let e=S(t,"t1","dot"),i=S(n,"t2","dot");A((e.rank===1||e.rank===2)&&(i.rank===1||i.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${i.rank}.`);let r=e.rank===1?e.size:e.shape[1],o=i.rank===1?i.size:i.shape[0];if(A(r===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${o}.`),e.rank===1&&i.rank===1){let s=$(e,[1,-1]),a=$(i,[-1,1]),l=Wt(s,a);return $(l,[])}else if(e.rank===1&&i.rank===2){let s=$(e,[1,-1]),a=$(i,[i.shape[0],i.shape[1]]),l=Wt(s,a);return $(l,[l.size])}else if(e.rank===2&&i.rank===1){let s=$(i,[-1,1]),a=Wt(e,s);return $(a,[a.size])}else{let s=$(i,[i.shape[0],i.shape[1]]);return Wt(e,s)}}var IK=D({dot_:pEe});function hEe(t,...n){let e=n.map((r,o)=>S(r,`tensors${o}`,"einsum")),i={equation:t};return I.runKernel(ry,e,i)}var zy=D({einsum_:hEe});function mEe(t){let e={x:S(t,"x","elu","float32")};return I.runKernel(rc,e)}var Hc=D({elu_:mEe});function fEe(t){let n=S(t,"x","erf");A(n.dtype==="int32"||n.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),n.dtype==="int32"&&(n=le(n,"float32"));let e={x:n};return I.runKernel(oc,e)}var G0=D({erf_:fEe});function OL(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function DK(t,n,e){let i=t.length+n.length,r=[],o=0,s=0;for(let a=0;a<i;a++)e.indexOf(a)===-1?r.push(t[o++]):r.push(n[s++]);return r}function RL(t,n){let e=[],i=t.length;for(let o=0;o<i;o++)n.indexOf(o)===-1&&e.push(t[o]);let r=n.map(o=>t[o]);return[e,r]}function Ka(t,n){let e=n.map(i=>1);return DK(t,e,n)}function gEe(t,n,e){A(OL(n,e),()=>`${t} supports only inner-most axes for now. Got axes ${n} and rank-${e} input.`)}function FL(t,n){if(OL(t,n))return null;let e=[];for(let i=0;i<n;++i)t.indexOf(i)===-1&&e.push(i);return t.forEach(i=>e.push(i)),e}function U0(t){return t.map((n,e)=>[e,n]).sort((n,e)=>n[1]-e[1]).map(n=>n[0])}function yEe(t,n){let e=[];for(let i=n-t;i<n;++i)e.push(i);return e}function bEe(t,n=null,e=!1){let r={x:S(t,"x","max")},o={reductionIndices:n,keepDims:e};return I.runKernel(dd,r,o)}var zi=D({max_:bEe});function xEe(t,n=null,e=!1){let r={x:S(t,"x","min")},o={axis:n,keepDims:e};return I.runKernel(fd,r,o)}var Hd=D({min_:xEe});function vEe(t,n){let e=S(t,"base","pow"),i=S(n,"exp","pow");[e,i]=Tt(e,i);let r={a:e,b:i};return I.runKernel(vc,r)}var Zr=D({pow_:vEe});function Ge(t,n){if((cr(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&cr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bd(t,[],[],n)}function _Ee(t){let e={x:S(t,"x","sqrt","float32")};return I.runKernel(Mc,e)}var dn=D({sqrt_:_Ee});function wEe(t){let n=S(t,"x","square"),e={};return I.runKernel("Square",{x:n},e)}var dt=D({square_:wEe});function CEe(t,n=null,e=!1){let i=S(t,"x","sum");i.dtype==="bool"&&(i=le(i,"int32"));let r={x:i},o={axis:n,keepDims:e};return I.runKernel(Ad,r,o)}var Se=D({sum_:CEe});function TEe(t,n="euclidean",e=null,i=!1){t=S(t,"x","norm");let r=AK(t,n,e),o=r.shape;if(i){let s=li(e,t.shape);o=Ka(r.shape,s)}return $(r,o)}function AK(t,n,e=null){if(t.rank===0)return ri(t);if(t.rank!==1&&e===null)return AK($(t,[-1]),n,e);if(t.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(n===1)return Se(ri(t),e);if(n===1/0)return zi(ri(t),e);if(n===-1/0)return Hd(ri(t),e);if(n==="euclidean"||n===2)return dn(Se(Zr(ri(t),Ge(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(e)&&e.length===2){if(n===1)return zi(Se(ri(t),e[0]),e[1]-1);if(n===1/0)return zi(Se(ri(t),e[1]),e[0]);if(n===-1/0)return Hd(Se(ri(t),e[1]),e[0]);if(n==="fro"||n==="euclidean")return dn(Se(dt(t),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}var Wd=D({norm_:TEe});function SEe(t,n=null,e=!1){return Wd(t,"euclidean",n,e)}var NK=D({euclideanNorm_:SEe});function kEe(t){let e={x:S(t,"x","exp")};return I.runKernel(sc,e)}var oi=D({exp_:kEe});function EEe(t,n=0){let e=S(t,"x","expandDims","string_or_numeric");A(n<=e.rank,()=>"Axis must be <= rank of the tensor");let i={input:e},r={dim:n};return I.runKernel(sd,i,r)}var Zn=D({expandDims_:EEe});function IEe(t){let e={x:S(t,"x","expm1")};return I.runKernel(ac,e)}var PL=D({expm1_:IEe});function DEe(t,n){let e=S(t,"x","tile","string_or_numeric");A(e.rank===n.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${n}.`);let i={x:e},r={reps:n};return I.runKernel(Ha,i,r)}var Qi=D({tile_:DEe});function AEe(t,n,e,i="float32"){n==null&&(n=t);let r=Ue([t,n],i),o=t<=n?t:n;for(let a=0;a<o;++a)r.set(1,a,a);let s=$(r.toTensor(),[t,n]);if(e==null)return s;if(e.length===1)return Qi(Zn(s,0),[e[0],1,1]);if(e.length===2)return Qi(Zn(Zn(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return Qi(Zn(Zn(Zn(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}var Gy=D({eye_:AEe});function NEe(t){let e={x:S(t,"x","floor","float32")};return I.runKernel(lc,e)}var Wc=D({floor_:NEe});function MEe(t,n,e=0,i=0){let r=S(t,"x","gather"),o=S(n,"indices","gather","int32"),s={x:r,indices:o},a={axis:e,batchDims:i};return I.runKernel(ld,s,a)}var Jh=D({gather_:MEe});function OEe(t,n){let e=S(t,"a","greater","string_or_numeric"),i=S(n,"b","greater","string_or_numeric");[e,i]=Tt(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Ih,r)}var Un=D({greater_:OEe});function REe(t,n){let e=S(t,"a","greaterEqual","string_or_numeric"),i=S(n,"b","greaterEqual","string_or_numeric");[e,i]=Tt(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(uc,r)}var Jr=D({greaterEqual_:REe});function FEe(t){let e={input:S(t,"input","imag")};return I.runKernel(uy,e)}var Uy=D({imag_:FEe});function LEe(t){let e={x:S(t,"x","isFinite")};return I.runKernel(dc,e)}var $L=D({isFinite_:LEe});function PEe(t){let e={x:S(t,"x","isInf")};return I.runKernel(pc,e)}var VL=D({isInf_:PEe});function $Ee(t){let e={x:S(t,"x","isNaN")};return I.runKernel(hc,e)}var BL=D({isNaN_:$Ee});function VEe(t,n=.2){let i={x:S(t,"x","leakyRelu")},r={alpha:n};return I.runKernel(cd,i,r)}var em=D({leakyRelu_:VEe});function BEe(t,n){let e=S(t,"a","less","string_or_numeric"),i=S(n,"b","less","string_or_numeric");[e,i]=Tt(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Dh,r)}var tm=D({less_:BEe});function zEe(t,n){let e=S(t,"a","lessEqual","string_or_numeric"),i=S(n,"b","lessEqual","string_or_numeric");[e,i]=Tt(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Ah,r)}var ys=D({lessEqual_:zEe});function GEe(t,n=5,e=1,i=1,r=.5){let o=S(t,"x","localResponseNormalization");A(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),A(Wl(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let s=o,a=!1;o.rank===3&&(a=!0,s=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let l={x:s},c={depthRadius:n,bias:e,alpha:i,beta:r},u=I.runKernel(ud,l,c);return a?$(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var MK=D({localResponseNormalization_:GEe});function UEe(t){let e={x:S(t,"x","log","float32")};return I.runKernel(mc,e)}var Ti=D({log_:UEe});function HEe(t){let e={x:S(t,"x","log1p")};return I.runKernel(fc,e)}var H0=D({log1p_:HEe});function Hy(t,n){A(Vg(t),()=>"The f passed in variableGrads(f) must be a function"),A(n==null||Array.isArray(n)&&n.every(c=>c instanceof $c),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let e=n!=null;if(!e){n=[];for(let c in I.registeredVariables)n.push(I.registeredVariables[c])}let i=e?n.filter(c=>!c.trainable):null,r=n.length;n=n.filter(c=>c.trainable),A(n.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`);let o=!0,{value:s,grads:a}=I.gradients(t,n,null,o);A(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),A(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return n.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),i?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function To(t){return I.customGrad(t)}function WEe(t){let e={x:S(t,"x","neg")};return I.runKernel(yd,e)}var St=D({neg_:WEe});function jEe(t){let e={x:S(t,"x","softplus")};return I.runKernel(Nc,e)}var Ya=D({softplus_:jEe});function qEe(t){let n=S(t,"x","logSigmoid");return To(i=>({value:St(Ya(St(i))),gradFunc:s=>R(s,gs(St(i)))}))(n)}var zL=D({logSigmoid_:qEe});function XEe(t,n){let e=S(t,"a","sub"),i=S(n,"b","sub");[e,i]=Tt(e,i);let r={a:e,b:i};return I.runKernel(Rc,r)}var Ce=D({sub_:XEe});function KEe(t,n=-1){let e=S(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${n}`);return To((r,o)=>{let a=zi(r,n,!0),l=Ce(r,a),c=Ce(le(l,"float32"),Ti(Se(oi(l),n,!0)));return o([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,m=!0,g=oi(h);return Ce(d,R(Se(d,n,m),g))}}})(e)}var W0=D({logSoftmax_:KEe});function YEe(t,n=null,e=!1){let i=S(t,"x","logSumExp"),r=li(n,i.shape),o=zi(i,r,!0),s=Ce(i,o),a=oi(s),l=Se(a,r),c=Ti(l),u=ne($(o,c.shape),c);if(e){let d=Ka(u.shape,r);return $(u,d)}return u}var j0=D({logSumExp_:YEe});function QEe(t,n){let e=S(t,"a","logicalAnd","bool"),i=S(n,"b","logicalAnd","bool");ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Nh,r)}var ur=D({logicalAnd_:QEe});function ZEe(t){let e={x:S(t,"x","logicalNot","bool")};return I.runKernel(Mh,e)}var Wy=D({logicalNot_:ZEe});function JEe(t,n){let e=S(t,"a","logicalOr","bool"),i=S(n,"b","logicalOr","bool");ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Oh,r)}var Lk=D({logicalOr_:JEe});function eIe(t,n){let e=S(t,"a","logicalXor","bool"),i=S(n,"b","logicalXor","bool");return ut(e.shape,i.shape),ur(Lk(t,n),Wy(ur(t,n)))}var OK=D({logicalXor_:eIe});function tIe(t,n,e,i,r){let o=S(t,"x","maxPool"),s=1,a=o,l=!1;o.rank===3&&(l=!0,a=$(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),A(Bi(e,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),gn("maxPool",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r},d=I.runKernel(pd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var nm=D({maxPool_:tIe});function nIe(t,n=[1,1,1],e,i,r,o="NDHWC"){let s=S(t,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),A(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),gn("maxPool3d",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r,dataFormat:o},d=I.runKernel(hd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var GL=D({maxPool3d_:nIe});function iIe(t,n){let e=S(t,"a","maximum"),i=S(n,"b","maximum");[e,i]=Tt(e,i),e.dtype==="bool"&&(e=le(e,"int32"),i=le(i,"int32")),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(gc,r)}var dr=D({maximum_:iIe});function rIe(t,n=null,e=!1){let r={x:S(t,"x","mean")},o={axis:n,keepDims:e};return I.runKernel(md,r,o)}var Kt=D({mean_:rIe});function wn(t,n="float32"){if($i(t),n==="complex64"){let i=wn(t,"float32"),r=wn(t,"float32");return zo(i,r)}let e=zg(Ht(t),n);return I.makeTensor(e,t,n)}function Dr(t,n="float32"){if($i(t),n==="complex64"){let i=Dr(t,"float32"),r=wn(t,"float32");return zo(i,r)}let e=w0(Ht(t),n);return I.makeTensor(e,t,n)}function oIe(t,n){let e=S(t,"a","minimum"),i=S(n,"b","minimum");[e,i]=Tt(e,i),e.dtype==="bool"&&(e=le(e,"int32"),i=le(i,"int32")),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(yc,r)}var Ho=D({minimum_:oIe});function sIe(t,n,e){A(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);let i=S(t,"x","mirrorPad");if(i.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");A(n.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${n.length}.`);let r=e==="reflect"?1:0;for(let a=0;a<i.rank;a++)A(n[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),A(n[a][0]>=0&&n[a][0]<=i.shape[a]-r&&n[a][1]>=0&&n[a][1]<=i.shape[a]-r,()=>`Padding in dimension ${a} cannot be greater than or equal to ${i.shape[a]-r} or less than 0 for input of shape ${i.shape}`);let o={paddings:n,mode:e},s={x:i};return I.runKernel(gd,s,o)}var RK=D({mirrorPad_:sIe});function aIe(t,n){let e=S(t,"a","mod"),i=S(n,"b","mod");[e,i]=Tt(e,i);let r={a:e,b:i};return I.runKernel(bc,r)}var FK=D({mod_:aIe});function lIe(t,n=null,e=!1){t=S(t,"x","moments");let i=li(n,t.shape),r=Kt(t,i,e),o=r.shape;e||(o=Ka(r.shape,i));let s=dt(Ce(le(t,"float32"),$(r,o))),a=Kt(s,i,e);return{mean:r,variance:a}}var jy=D({moments_:lIe});function cIe(t,n){let e=S(t,"a","notEqual","string_or_numeric"),i=S(n,"b","notEqual","string_or_numeric");[e,i]=Tt(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Rh,r)}var jd=D({notEqual_:cIe});function uIe(t,n,e=1,i=0,r="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);let s={indices:S(t,"indices","oneHot","int32")},a={dtype:r,depth:n,onValue:e,offValue:i};return I.runKernel(xd,s,a)}var jc=D({oneHot_:uIe});function dIe(t){let e={x:S(t,"x","onesLike")};return I.runKernel(bd,e)}var Si=D({onesLike_:dIe});function pIe(t,n,e=0){let i=S(t,"x","pad");if(i.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let r={paddings:n,constantValue:e},o={x:i};return I.runKernel(_d,o,r)}var im=D({pad_:pIe});function hIe(t,n,e){let i=S(t,"x","spaceToBatchND");A(i.rank>=1+n.length,()=>`input rank ${i.rank} should be > than [blockShape] ${n.length}`),A(e.length===n.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${n.length}`),A(i.shape.reduce((s,a,l)=>l>0&&l<=n.length?s&&(a+e[l-1][0]+e[l-1][1])%n[l-1]===0:s,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${n.toString()}`);let r={x:i},o={blockShape:n,paddings:e};return I.runKernel(Nd,r,o)}var qy=D({spaceToBatchND_:hIe});function mIe(t,n,e,i,r,o,s){r==null&&(r=[1,1]),o==null&&(o=1),i===0&&(i="valid");let a=S(t,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(Bi(o,r),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${r}'`);let u=vL(l.shape,n,o,r,i),d=[u.dilationHeight,u.dilationWidth],p;i==="same"?p=gIe([u.filterHeight,u.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[m,g]=fIe([u.inHeight,u.inWidth],d,p),f=h?i:"valid",y=h?l:qy(l,d,m),x=(e==="avg"?()=>Yh(y,n,o,f,s):()=>nm(y,n,o,f,s))(),_=h?x:Vy(x,d,g);return c?$(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function fIe(t,n,e){let i=e.map(u=>u[0]),r=e.map(u=>u[1]),o=t.concat(i,r),s=n.map((u,d)=>(u-o[d]%u)%u),a=r.map((u,d)=>u+s[d]),l=n.map((u,d)=>[i[d],a[d]]),c=n.map((u,d)=>[0,s[d]]);return[l,c]}function gIe(t,n){let i=t.map((s,a)=>s+(s-1)*(n[a]-1)).map(s=>s-1),r=i.map(s=>Math.floor(s/2)),o=i.map((s,a)=>s-r[a]);return i.map((s,a)=>[r[a],o[a]])}var LK=D({pool_:mIe});function yIe(t,n){let e=S(t,"x","prelu"),i=S(n,"alpha","prelu"),r={x:e,alpha:i};return I.runKernel(wd,r)}var rm=D({prelu_:yIe});function bIe(t,n=null,e=!1){let i=S(t,"x","prod");i.dtype==="bool"&&(i=le(i,"int32"));let r={x:i},o={axis:n,keepDims:e};return I.runKernel(Cd,r,o)}var PK=D({prod_:bIe});var KL=Wb(q0());var Xy=class{constructor(n,e,i,r,o){this.mean=n,this.stdDev=e,this.dtype=i,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=o||Math.random();this.random=KL.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let r=this.nextVal;return this.nextVal=NaN,r}let n,e,i=!1;for(;!i;){let r,o,s;do r=2*this.random()-1,o=2*this.random()-1,s=r*r+o*o;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*r*a,e=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(n))&&(i=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(n)}convertValue(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)}isValidTruncated(n){return n<=this.upper&&n>=this.lower}};var $k=class{constructor(n=0,e=1,i,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=n,this.range=e-n,this.dtype=i,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${n} - ${e} <= 1 and dtype is not float`);this.random=KL.alea(r)}convertValue(n){return this.canReturnFloat()?n:Math.round(n)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function SIe(t,n=0,e=1,i,r){if($i(t),i!=null&&i==="bool")throw new Error(`Unsupported data type ${i}`);let o=new Xy(n,e,i,!1,r),s=Ue(t,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}var Vk=D({randomNormal_:SIe});function kIe(t,n=0,e=1,i="float32",r){$i(t);let o=Ue(t,i),s=new $k(n,e,null,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}var ea=D({randomUniform_:kIe});function qc(t,n,e=1,i="float32"){if(e===0)throw new Error("Cannot have a step of zero");let r={start:t,stop:n,step:e,dtype:i};return I.runKernel(yy,{},r)}function EIe(t){let e={input:S(t,"input","real")};return I.runKernel(by,e)}var sm=D({real_:EIe});function IIe(t){let e={x:S(t,"x","reciprocal")};return I.runKernel(_c,e)}var YL=D({reciprocal_:IIe});function DIe(t){let e={x:S(t,"x","relu")};return I.runKernel(wc,e)}var So=D({relu_:DIe});function AIe(t){let e={x:S(t,"x","relu6")};return I.runKernel(Cc,e)}var Bk=D({relu6_:AIe});function NIe(t,n){let i={x:S(t,"x","reverse")},r={dims:n};return I.runKernel(Ed,i,r)}var Wo=D({reverse_:NIe});function MIe(t){let e={x:S(t,"x","round")};return I.runKernel(Tc,e)}var X0=D({round_:MIe});function OIe(t){let e={x:S(t,"x","rsqrt","float32")};return I.runKernel(Sc,e)}var K0=D({rsqrt_:OIe});function RIe(t){let e={x:S(t,"x","selu")};return I.runKernel(kc,e)}var Y0=D({selu_:RIe});function FIe(t,n,e,i,r,o=[1,1],s="NHWC"){let a=S(t,"x","separableConv2d"),l=S(n,"depthwiseFilter","separableConv2d"),c=S(e,"pointwiseFilter","separableConv2d"),u=a,d=!1;if(a.rank===3&&(d=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");A(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),A(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),A(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),A(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],h=l.shape[3];A(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let m=Uc(u,l,i,r,s,o),f=wo(m,c,1,"valid",s);return d?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var Q0=D({separableConv2d_:FIe});function LIe(t){let e={x:S(t,"x","sign")};return I.runKernel(Dc,e)}var QL=D({sign_:LIe});function PIe(t){let e={x:S(t,"x","sin","float32")};return I.runKernel(Ec,e)}var Z0=D({sin_:PIe});function $Ie(t){let e={x:S(t,"x","sinh")};return I.runKernel(Ic,e)}var J0=D({sinh_:$Ie});function VIe(t,n,e){let i=S(t,"x","slice1d");return A(i.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${i.rank} tensor`),Ot(i,[n],[e])}var e_=D({slice1d_:VIe});function BIe(t,n,e){let i=S(t,"x","slice2d");return A(i.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${i.rank} tensor`),Ot(i,n,e)}var zk=D({slice2d_:BIe});function zIe(t,n,e){let i=S(t,"x","slice3d");return A(i.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${i.rank} tensor`),Ot(i,n,e)}var t_=D({slice3d_:zIe});function GIe(t,n,e){let i=S(t,"x","slice4d");return A(i.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${i.rank} tensor`),Ot(i,n,e)}var Ky=D({slice4d_:GIe});function UIe(t,n=-1){let e=S(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${n}`);let i={logits:e},r={dim:n};return I.runKernel(Od,i,r)}var am=D({softmax_:UIe});function HIe(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let n={input:t};return I.runKernel(sy,n)}var n_=D({fft_:HIe});function WIe(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let n={input:t};return I.runKernel(cy,n)}var Yy=D({ifft_:WIe});function jIe(t){let n=t.shape[t.shape.length-1],e=t.size/n,i;if(n<=2){let r=$(t,[e,n]);i=Yy(r)}else{let r=[e,2*(n-1)],o=$(sm(t),[e,n]),s=$(Uy(t),[e,n]),a=Wo(Ot(o,[0,1],[e,n-2]),1),l=R(Wo(Ot(s,[0,1],[e,n-2]),1),Ge(-1)),c=vn([o,a],1),u=vn([s,l],1),d=$(zo(c,u),[r[0],r[1]]);i=Yy(d)}if(i=sm(i),t.rank===3&&t.shape[0]!==0){let r=i,o=t.shape[0];i=$(i,[o,i.shape[0]/o,i.shape[1]]),r.dispose()}return i}var ZL=D({irfft_:jIe});function qIe(t,n,e=0){let r={x:S(t,"x","split")},o={numOrSizeSplits:n,axis:e};return I.runKernel(Md,r,o)}var gi=D({split_:qIe});function XIe(t,n){A(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let e=t.shape[t.shape.length-1],i=t.size/e,r;if(n!=null&&n<e){let m=t.shape.map(f=>0),g=t.shape.map(f=>f);g[t.shape.length-1]=n,r=Ot(t,m,g),e=n}else if(n!=null&&n>e){let m=t.shape.map(g=>g);m[t.shape.length-1]=n-e,r=vn([t,wn(m)],t.shape.length-1),e=n}else r=t;let o=We(r),s=$(zo(r,o),[i,e]),a=n_(s),l=Math.floor(e/2)+1,c=sm(a),u=Uy(a),d=gi(c,[l,e-l],c.shape.length-1),p=gi(u,[l,e-l],u.shape.length-1),h=r.shape.slice();return h[r.shape.length-1]=l,$(zo(d[0],p[0]),h)}var JL=D({rfft_:XIe});function KIe(t,n){let e=S(t,"a","squaredDifference"),i=S(n,"b","squaredDifference");[e,i]=Tt(e,i),ut(e.shape,i.shape);let r={a:e,b:i},o={};return I.runKernel(Oc,r,o)}var eY=D({squaredDifference_:KIe});function YIe(t,n){let e=S(t,"x","squeeze","string_or_numeric");return $(e,L2(e.shape,n).newShape)}var ko=D({squeeze_:YIe});function QIe(t,n=0){let e=Tk(t,"tensors","stack","string_or_numeric");A(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&A(n<=e[0].rank,()=>"Axis must be <= rank of the tensor");let i=e,r={axis:n};return I.runKernel(vd,i,r)}var ui=D({stack_:QIe});function ZIe(t,n=0){let i={x:S(t,"x","step")},r={alpha:n};return I.runKernel(Pc,i,r)}var ta=D({step_:ZIe});function JIe(t,n,e,i,r=0,o=0,s=0,a=0,l=0){let u={x:S(t,"x","stridedSlice","string_or_numeric")},d={begin:n,end:e,strides:i,beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return I.runKernel(wy,u,d)}var eP=D({stridedSlice_:JIe});function eDe(t){let e={x:S(t,"x","tan","float32")};return I.runKernel(Fc,e)}var tP=D({tan_:eDe});function Cn(t,n){_0(t);let e=Hh(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bd(t,null,e,n)}function pr(t,n,e){if(_0(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let i=Hh(t,e);if(i.length!==2&&i.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(i.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bd(t,n,i,e)}function tY(t,n,e){let i=n.rank>1?n.shape[n.rank-1]:1,r=n.rank>1?n.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${n.shape}, shape: ${t}, sliceDim: ${i}, and batchDim: ${r}.`;if(e.rank<r)throw new Error(o+` update.rank < ${r}. `);if(t.length<i+(e.rank-r))throw new Error(o+` Output shape length < ${i+(e.rank-r)}`);if(e.rank!==r+t.length-i)throw new Error(o+` update.rank != ${r+t.length-i}`);for(let s=0;s<r;++s)if(e.shape[s]!==n.shape[s])throw new Error(o+` updates.shape[${s}] (${e.shape[s]}) != indices.shape[${s}] (${n.shape[s]}).`);for(let s=0;s<e.rank-r;++s)if(e.shape[s+r]!==t[s+i])throw new Error(o+` updates.shape[${s+r}] (${e.shape[s+r]}) != shape[${s+r}] (${t[s+r]})`)}function tDe(t,n,e){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(n.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(e.length===0){if(n.size===0)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}tY(e,n,t)}function nDe(t,n,e){let i=n.shape.length,r=i>1?n.shape[i-1]:1,o=e.length,s=1;for(let d=r;d<o;++d)s*=e[d];let a=r<1?1:r,l=Ht(n.shape)/a,c=[...za(e.slice(0,r)),1],u=Ht(e);return{sliceRank:r,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function iDe(t,n=1,e=!0){let i=S(t,"x","topk");if(i.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let r=i.shape[i.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${n}`);let o={x:i},s={k:n,sorted:e},[a,l]=I.runKernel(Cy,o,s);return{values:a,indices:l}}var nY=D({topk_:iDe});function rDe(t,n=0,e=1,i,r){if($i(t),i!=null&&i==="bool")throw new Error("Unsupported data type $ { dtype }");let o=new Xy(n,e,i,!0,r),s=Ue(t,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}var i_=D({truncatedNormal_:rDe});function oDe(t,n=0){let e=S(t,"x","unique","string_or_numeric");A(e.rank>0,()=>"The input tensor must be at least 1D");let i={x:e},r={axis:n},[o,s]=I.runKernel(Sy,i,r);return{values:o,indices:s}}var iY=D({unique_:oDe});function sDe(t,n,e){let i=S(t,"x","unsortedSegmentSum"),r=S(n,"segmentIds","unsortedSegmentSum","int32");A(Wl(e),()=>"numSegments must be of dtype int");let o={x:i,segmentIds:r},s={numSegments:e};return I.runKernel(Fd,o,s)}var Gk=D({unsortedSegmentSum_:sDe});function aDe(t,n=0){let e=S(t,"x","unstack","string_or_numeric");A(n>=-e.shape.length&&n<e.shape.length,()=>`Axis = ${n} is not in [-${e.shape.length}, ${e.shape.length})`);let i={value:e},r={axis:n};return I.runKernel(Rd,i,r)}var hr=D({unstack_:aDe});function nP(t,n=!0,e,i){return I.makeVariable(t,n,e,i)}function rY(t,n){let e=[];for(let o=0;o<n.length;o++)n[o]&&e.push(o);let i=Ue(t,"int32"),r=Ue([e.length,t.length],"int32");for(let o=0;o<e.length;o++){let s=i.indexToLoc(e[o]),a=o*t.length;r.values.set(s,a)}return r.toTensor()}function lDe(t,n,e){let i=S(t,"x","transpose");if(n==null&&(n=i.shape.map((s,a)=>a).reverse()),A(i.rank===n.length,()=>`Error in transpose: rank of input ${i.rank} must match length of perm ${n}.`),n.forEach(s=>{A(s>=0&&s<i.rank,()=>`All entries in 'perm' must be between 0 and ${i.rank-1} but got ${n}`)}),i.rank<=1)return i.clone();let r={x:i},o={perm:n};return i.dtype==="complex64"?H(()=>{let s=sm(i),a=Uy(i);return s=I.runKernel(Wa,{x:s},o),a=I.runKernel(Wa,{x:a},o),e&&(a=St(a)),zo(s,a)}):I.runKernel(Wa,r,o)}var yt=D({transpose_:lDe});function oY(t,n){if(n==null)return t.shape.slice();if(Uu(t.shape,n))return n;if(t.shape.length===n.length){let e=[];for(let i=0;i<t.shape.length;i++)n[i]==null&&t.shape[i]!=null?e.push(t.shape[i]):e.push(n[i]);return e}return n}function cDe(t,n,e,i){let r=S(t,"x","dropout");if(A(r.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`),A(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),n===0)return t instanceof Yt?r.clone():r;let o=oY(r,e),s=1-n,a=we(Wc(ne(ea(o,0,1,"float32",i),s)),s);return R(r,a)}var sY=D({dropout_:cDe});var pm={};Qo(pm,{conv2d:()=>aY,depthwiseConv2d:()=>lY,matMul:()=>cY});function uDe(t,n,e,i,r,o="NHWC",s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]])),A(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),A(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),A(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);let c=o==="NHWC"?a.shape[3]:a.shape[1],u=o==="NHWC"?l.shape[3]:l.shape[1];A(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),A(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),gn("conv2dDerFilter",r,s);let d={x:a,dy:l},p={strides:i,pad:r,dataFormat:o,dimRoundingMode:s,filterShape:e};return I.runKernel(Kg,d,p)}var Qy=D({conv2DBackpropFilter_:uDe});function lm(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return R(t,ta(n));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function cm(t,n){let e=n,i=un(t.shape,n.shape);return i.length>0&&(e=Se(e,i)),$(e,t.shape)}function um(t,n,e,i){if(n==="linear")return t;if(n==="relu")return So(t);if(n==="elu")return Hc(t);if(n==="relu6")return Bk(t);if(n==="prelu")return rm(t,e);if(n==="leakyrelu")return em(t,i);if(n==="sigmoid")return gs(t);throw new Error(`Unknown fused activation ${n}.`)}var dm=(t,n)=>!(t>0)||n==="linear";function dDe({x:t,filter:n,strides:e,pad:i,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",dm(I.state.gradientDepth,l)===!1){A(r==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${r} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let C=wo(t,n,e,i,r,o,s);return a!=null&&(C=ne(C,a)),um(C,l,c,u)}let d=S(t,"x","conv2d","float32"),p=S(n,"filter","conv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),A(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),gn("fused conv2d",i,s);let g=r==="NHWC"?h.shape[3]:h.shape[1];A(p.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`),A(Bi(e,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`);let f=Kh(h.shape,p.shape,e,o,i,s),y;a!=null&&(y=S(a,"bias","fused conv2d"),[y]=Tt(y,d),r==="NHWC"?ut(f.outShape,y.shape):(A(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),A(y.shape.length===0||y.shape[0]===f.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${f.outChannels})`)));let b;if(c!=null){let C=c.shape;if(A(C.length<=1||C.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${C.length}.`),C.length===1)A(C[0]===1||C[0]===f.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the number of output channels (${f.outChannels}).`);else if(C.length===3)try{ut(C,f.outShape)}catch{let N=`Error in fused conv2d: PReLU activation weights (${C}) is not compatible with the output shape of the conv2d (${f.outShape}).`;throw Error(N)}b=S(c,"prelu weights","fused conv2d")}let x=(C,k)=>{A(r==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${r} but only NHWC is currently supported.`);let[N,P,F,z]=k,Y=lm(C,F,l);A(Go(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let K=By(P.shape,Y,N,e,i),Z=Qy(P,Y,N.shape,e,i),te=[K,Z];if(z!=null){let U=cm(z,Y);te.push(U)}return te},_={x:h,filter:p,bias:y,preluActivationWeights:b},w={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?To((k,N,P)=>{let F=I.runKernel(Lh,_,w);return P([N,k,F]),m&&(F=$(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:x}})(h,p):To((k,N,P,F)=>{let z=I.runKernel(Lh,_,w);return F([N,k,z,P]),m&&(z=$(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:x}})(h,p,y)}var aY=D({fusedConv2d_:dDe});function pDe(t,n,e,i,r,o=[1,1],s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={x:a,dy:l},u={strides:i,pad:r,dimRoundingMode:s,dilations:o,filterShape:e};return I.runKernel(ny,c,u)}var Uk=D({depthwiseConv2dNativeBackpropFilter_:pDe});function hDe(t,n,e,i,r,o=[1,1],s){let a=n,l=!1;n.rank===3&&(l=!0,a=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={dy:a,filter:e},u={strides:i,pad:r,dimRoundingMode:s,dilations:o,inputShape:t},d=I.runKernel(iy,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Hk=D({depthwiseConv2dNativeBackpropInput_:hDe});function mDe({x:t,filter:n,strides:e,pad:i,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(dm(I.state.gradientDepth,l)===!1){let w=Uc(t,n,e,i,r,o,s);return a!=null&&(w=ne(w,a)),um(w,l,c,u)}let d=S(t,"x","depthwiseConv2d","float32"),p=S(n,"filter","depthwiseConv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),A(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),A(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),o==null&&(o=[1,1]),A(Bi(e,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),gn("fused depthwiseConv2d",i,s);let g=Kh(h.shape,p.shape,e,o,i,s,!0),f;a!=null&&(f=S(a,"bias","fused conv2d"),[f]=Tt(f,d),ut(g.outShape,f.shape));let y;c!=null&&(y=S(c,"prelu weights","fused depthwiseConv2d"));let b=(w,C)=>{A(Go(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[k,N,P,F]=C,z=lm(w,P,l),Y=Hk(N.shape,z,k,e,i,o,s),K=Uk(N,z,k.shape,e,i,o,s);if(F!=null){let Z=cm(f,z);return[Y,K,Z]}return[Y,K]},x={x:h,filter:p,bias:f,preluActivationWeights:y},_={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?To((C,k,N)=>{let P=I.runKernel(Ph,x,_);return N([k,C,P]),m&&(P=$(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:b}})(h,p):To((C,k,N,P)=>{let F=I.runKernel(Ph,x,_);return P([k,C,F,N]),m&&(F=$(F,[F.shape[1],F.shape[2],F.shape[3]])),{value:F,gradFunc:b}})(h,p,f)}var lY=D({fusedDepthwiseConv2d_:mDe});function fDe({a:t,b:n,transposeA:e=!1,transposeB:i=!1,bias:r,activation:o="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(dm(I.state.gradientDepth,o)===!1){let z=Wt(t,n,e,i);return r!=null&&(z=ne(z,r)),um(z,o,s,a)}let l=S(t,"a","fused matMul"),c=S(n,"b","fused matMul");[l,c]=Tt(l,c);let u=e?l.shape[l.rank-2]:l.shape[l.rank-1],d=i?c.shape[c.rank-1]:c.shape[c.rank-2],p=e?l.shape[l.rank-1]:l.shape[l.rank-2],h=i?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),g=c.shape.slice(0,-2),f=Ht(m),y=Ht(g);A(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${i} must match.`);let x=ut(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),_=e?$(l,[f,u,p]):$(l,[f,p,u]),w=i?$(c,[y,h,d]):$(c,[y,d,h]),C;r!=null&&(C=S(r,"bias","fused matMul"),[C]=Tt(C,l),ut(x,C.shape));let k;s!=null&&(k=S(s,"prelu weights","fused matMul"));let N=(z,Y)=>{let[K,Z,te,U]=Y,j=lm($(z,te.shape),te,o),q,Q;if(!e&&!i?(q=Wt(j,Z,!1,!0),Q=Wt(K,j,!0,!1)):!e&&i?(q=Wt(j,Z,!1,!1),Q=Wt(j,K,!0,!1)):e&&!i?(q=Wt(Z,j,!1,!0),Q=Wt(K,j,!1,!1)):(q=Wt(Z,j,!0,!0),Q=Wt(j,K,!0,!0)),r!=null){let oe=cm(U,j);return[q,Q,oe]}else return[q,Q]},P={a:_,b:w,bias:C,preluActivationWeights:k},F={transposeA:e,transposeB:i,activation:o,leakyreluAlpha:a};return r==null?To((Y,K,Z)=>{let te=I.runKernel(Fh,P,F);return Z([Y,K,te]),{value:$(te,x),gradFunc:N}})(_,w):To((Y,K,Z,te)=>{let U=I.runKernel(Fh,P,F);return te([Y,K,U,Z]),{value:$(U,x),gradFunc:N}})(_,w,C)}var cY=D({fusedMatMul_:fDe});function gDe(t,n,e,i,r="bilinear",o=0){let s=S(t,"image","cropAndResize"),a=S(n,"boxes","cropAndResize","float32"),l=S(e,"boxInd","cropAndResize","int32"),c=a.shape[0];A(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),A(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),A(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),A(i.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`),A(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),A(r==="bilinear"||r==="nearest",()=>`method must be bilinear or nearest, but was ${r}`);let u={image:s,boxes:a,boxInd:l},d={method:r,extrapolationValue:o,cropSize:i};return I.runKernel(Jg,u,d)}var uY=D({cropAndResize_:gDe});function yDe(t){let n=S(t,"image","flipLeftRight","float32");A(n.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`);let e={image:n};return I.runKernel(ly,e,{})}var dY=D({flipLeftRight_:yDe});function bDe(t){let n=S(t,"image","grayscaleToRGB"),e=n.rank-1,i=n.shape[e];A(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),A(i===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${i}.`);let r=new Array(n.rank);return r.fill(1,0,e),r[e]=3,Qi(n,r)}var pY=D({grayscaleToRGB_:bDe});function xDe(t){let n=S(t,"image","RGBToGrayscale"),e=n.rank-1,i=n.shape[e];A(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),A(i===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);let r=n.dtype,o=le(n,"float32"),s=Cn([.2989,.587,.114]),a;switch(n.rank){case 2:a=zy("ij,j->i",o,s);break;case 3:a=zy("ijk,k->ij",o,s);break;case 4:a=zy("ijkl,l->ijk",o,s);break;case 5:a=zy("ijklm,m->ijkl",o,s);break;case 6:a=zy("ijklmn,n->ijklm",o,s);break;default:throw new Error("Not a valid tensor rank.")}return a=Zn(a,-1),le(a,r)}var hY=D({rgbToGrayscale_:xDe});function vDe(t,n,e=0,i=.5){let r=S(t,"image","rotateWithOffset","float32");A(r.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`);let o={image:r},s={radians:n,fillValue:e,center:i};return I.runKernel(ky,o,s)}var mY=D({rotateWithOffset_:vDe});function bs(t,n,e,i,r,o){i==null&&(i=.5),r==null&&(r=Number.NEGATIVE_INFINITY),o==null&&(o=0);let s=t.shape[0];return e=Math.min(e,s),A(0<=i&&i<=1,()=>`iouThreshold must be in [0, 1], but was '${i}'`),A(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),A(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),A(n.rank===1,()=>"scores must be a 1D tensor"),A(n.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${n.shape[0]}`),A(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:e,iouThreshold:i,scoreThreshold:r,softNmsSigma:o}}function _De(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY){let o=S(t,"boxes","nonMaxSuppression","float32"),s=S(n,"scores","nonMaxSuppression","float32"),a=bs(o,s,e,i,r);e=a.maxOutputSize,i=a.iouThreshold,r=a.scoreThreshold;let l={maxOutputSize:e,iouThreshold:i,scoreThreshold:r};return I.runKernel(my,{boxes:o,scores:s},l)}var fY=D({nonMaxSuppression_:_De});function gY(t,n,e){let i=wDe(t,n,e),r=i<0?-(i+1):i;t.splice(r,0,n)}function wDe(t,n,e){return TDe(t,n,e||CDe)}function CDe(t,n){return t>n?1:t<n?-1:0}function TDe(t,n,e){let i=0,r=t.length,o=0,s=!1;for(;i<r;){o=i+(r-i>>>1);let a=e(n,t[o]);a>0?i=o+1:(r=o,s=!a)}return s?i:-i-1}function Wk(t,n,e,i,r){return iP(t,n,e,i,r,0)}function jk(t,n,e,i,r,o){return iP(t,n,e,i,r,0,!1,o,!0)}function qk(t,n,e,i,r,o){return iP(t,n,e,i,r,o,!0)}function iP(t,n,e,i,r,o,s=!1,a=!1,l=!1){let c=[];for(let f=0;f<n.length;f++)n[f]>r&&c.push({score:n[f],boxIndex:f,suppressBeginIndex:0});c.sort(yY);let u=o>0?-.5/o:0,d=[],p=[];for(;d.length<e&&c.length>0;){let f=c.pop(),{score:y,boxIndex:b,suppressBeginIndex:x}=f;if(y<r)break;let _=!1;for(let w=d.length-1;w>=x;--w){let C=SDe(t,b,d[w]);if(C>=i){_=!0;break}if(f.score=f.score*kDe(i,u,C),f.score<=r)break}f.suppressBeginIndex=d.length,_||(f.score===y?(d.push(b),p.push(f.score)):f.score>r&&gY(c,f,yY))}let h=d.length,m=e-h;a&&m>0&&(d.push(...new Array(m).fill(0)),p.push(...new Array(m).fill(0)));let g={selectedIndices:d};return s&&(g.selectedScores=p),l&&(g.validOutputs=h),g}function SDe(t,n,e){let i=t.subarray(n*4,n*4+4),r=t.subarray(e*4,e*4+4),o=Math.min(i[0],i[2]),s=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]),c=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),d=Math.max(r[0],r[2]),p=Math.max(r[1],r[3]),h=(a-o)*(l-s),m=(d-c)*(p-u);if(h<=0||m<=0)return 0;let g=Math.max(o,c),f=Math.max(s,u),y=Math.min(a,d),b=Math.min(l,p),x=Math.max(y-g,0)*Math.max(b-f,0);return x/(h+m-x)}function kDe(t,n,e){let i=Math.exp(n*e*e);return e<=t?i:0}function yY(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function EDe(o,s,a){return W(this,arguments,function*(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY){let l=S(t,"boxes","nonMaxSuppressionAsync"),c=S(n,"scores","nonMaxSuppressionAsync"),u=bs(l,c,e,i,r);e=u.maxOutputSize,i=u.iouThreshold,r=u.scoreThreshold;let d=yield Promise.all([l.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:m}=Wk(p,h,e,i,r);return l!==t&&l.dispose(),c!==n&&c.dispose(),Cn(m,"int32")})}var bY=EDe;function IDe(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=0){let s=S(t,"boxes","nonMaxSuppression"),a=S(n,"scores","nonMaxSuppression"),l=bs(s,a,e,i,r,o);e=l.maxOutputSize,i=l.iouThreshold,r=l.scoreThreshold,o=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:e,iouThreshold:i,scoreThreshold:r,softNmsSigma:o},d=I.runKernel(gy,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}var xY=D({nonMaxSuppressionWithScore_:IDe});function DDe(s,a,l){return W(this,arguments,function*(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=0){let c=S(t,"boxes","nonMaxSuppressionAsync"),u=S(n,"scores","nonMaxSuppressionAsync"),d=bs(c,u,e,i,r,o);e=d.maxOutputSize,i=d.iouThreshold,r=d.scoreThreshold,o=d.softNmsSigma;let p=yield Promise.all([c.data(),u.data()]),h=p[0],m=p[1],{selectedIndices:g,selectedScores:f}=qk(h,m,e,i,r,o);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Cn(g,"int32"),selectedScores:Cn(f)}})}var vY=DDe;function ADe(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=!1){let s=S(t,"boxes","nonMaxSuppression"),a=S(n,"scores","nonMaxSuppression"),l=bs(s,a,e,i,r,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:o},m=I.runKernel(fy,p,h);return{selectedIndices:m[0],validOutputs:m[1]}}var _Y=D({nonMaxSuppressionPadded_:ADe});function NDe(s,a,l){return W(this,arguments,function*(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=!1){let c=S(t,"boxes","nonMaxSuppressionAsync"),u=S(n,"scores","nonMaxSuppressionAsync"),d=bs(c,u,e,i,r,null),p=d.maxOutputSize,h=d.iouThreshold,m=d.scoreThreshold,[g,f]=yield Promise.all([c.data(),u.data()]),{selectedIndices:y,validOutputs:b}=jk(g,f,p,h,m,o);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:Cn(y,"int32"),validOutputs:Ge(b,"int32")}})}var wY=NDe;function MDe(t,n,e=!1,i=!1){let r=S(t,"images","resizeBilinear");A(r.rank===3||r.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),A(n.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),A(i===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=r,s=!1;r.rank===3&&(s=!0,o=$(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let[]=n,a={images:o},l={alignCorners:e,halfPixelCenters:i,size:n},c=I.runKernel(kd,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var Xk=D({resizeBilinear_:MDe});function ODe(t,n,e=!1,i=!1){let r=S(t,"images","resizeNearestNeighbor");A(r.rank===3||r.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),A(n.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),A(r.dtype==="float32"||r.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),A(i===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=r,s=!1;r.rank===3&&(s=!0,o=$(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let[]=n,a={images:o},l={alignCorners:e,halfPixelCenters:i,size:n},c=I.runKernel(Sd,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var Kk=D({resizeNearestNeighbor_:ODe});function RDe(t,n="binary",e=!1,i=.5){let r=S(t,"image","threshold"),o=.2989,s=.587,a=.114,l=r.shape[0]*r.shape[1],c=R(Cn([i]),255),u,d,p,h;if(A(r.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`),A(r.shape[2]===3||r.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`),A(r.dtype==="int32"||r.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`),A(n==="otsu"||n==="binary",()=>`Method must be binary or otsu, but was ${n}`),r.shape[2]===3){[u,d,p]=gi(r,[1,1,1],-1);let f=R(u,o),y=R(d,s),b=R(p,a);h=ne(ne(f,y),b)}else h=t;if(n==="otsu"){let f=CK(le(X0(h),"int32"),ci([]),256);c=FDe(f,l)}let m=e?ys(h,c):Un(h,c);return le(R(m,255),"int32")}function FDe(t,n){let e=Cn([-1]),i=Cn([0]),r=Cn([0]),o,s,a,l,c,u;for(let d=0;d<t.size-1;d++){o=Ot(t,0,d+1),s=Ot(t,d+1),c=we(Se(o),n),u=we(Se(s),n);let p=Se(R(o,qc(0,o.size)));a=we(p,Se(o));let h=Gc(s.shape,o.size),m=ne(qc(0,s.size),h),g=R(s,m);l=we(Se(g),Se(s));let f=Ce(a,l),y=Ce(a,l),b=R(c,u);r=R(R(b,f),y);let x=Un(r,i);i=_n(x,r,i),e=_n(x,Cn([d]),e)}return e}var CY=D({threshold_:RDe});function LDe(t,n,e="nearest",i="constant",r=0,o){let s=S(t,"image","transform","float32"),a=S(n,"transforms","transform","float32");A(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),A(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),A(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);let l={image:s,transforms:a},c={interpolation:e,fillMode:i,fillValue:r,outputShape:o};return I.runKernel(Ty,l,c)}var TY=D({transform_:LDe});function PDe(t,n,e){let i=S(t,"a","bandPart");A(i.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${i.rank}.`);let r=i.shape,[o,s]=i.shape.slice(-2),a,l;typeof n=="number"?(A(n%1===0,()=>`bandPart(): numLower must be an integer, got ${n}.`),A(n<=o,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${o}).`),a=S(n<0?o:n,"numLower","bandPart")):(A(n.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=_n(tm(n,0),o,Ho(n,o))),typeof e=="number"?(A(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),A(e<=s,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${s}).`),l=S(e<0?s:e,"numUpper","bandPart")):(A(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=_n(tm(e,0),s,Ho(e,s)));let c=$(qc(0,o,1,"int32"),[-1,1]),u=qc(0,s,1,"int32"),d=Ce(c,u),p=ur(ys(d,a),Jr(d,St(l))),h=wn([o,s],i.dtype);return $(ui(hr($(i,[-1,o,s])).map(m=>_n(p,m,h))),r)}var SY=D({bandPart_:PDe});function $De(t){let n;if(Array.isArray(t)){n=!1,A(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let r=t[0].shape[0];for(let o=1;o<t.length;++o)A(t[o].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[o].shape[0]} vs. ${r})`)}else n=!0,t=gi(t,t.shape[0],0).map(r=>ko(r,[0]));A(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let e=[],i=t;for(let r=0;r<t.length;++r)e.push(I.tidy(()=>{let o=i[r];if(r>0)for(let s=0;s<r;++s){let a=R(Se(R(e[s],o)),e[s]);o=Ce(o,a)}return we(o,Wd(o,"euclidean"))}));return n?ui(e,0):e}var kY=D({gramSchmidt_:$De});function VDe(t,n=!1){if(A(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return EY(t,n);{let e=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),i=hr($(t,[e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),r=[],o=[];i.forEach(l=>{let[c,u]=EY(l,n);r.push(c),o.push(u)});let s=$(ui(r,0),t.shape),a=$(ui(o,0),t.shape);return[s,a]}}function EY(t,n=!1){return I.tidy(()=>{A(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let e=t.shape[0],i=t.shape[1],r=Gy(e),o=_o(t),s=pr([[1]],[1,1]),a=_o(s),l=e>=i?i:e;for(let c=0;c<l;++c){let u=o,d=a,p=r;[a,o,r]=I.tidy(()=>{let h=Ot(o,[c,c],[e-c,1]),m=Wd(h),g=Ot(o,[c,c],[1,1]),f=_n(Un(g,0),pr([[-1]]),pr([[1]])),y=Ce(g,R(f,m)),b=we(h,y);b.shape[0]===1?a=_o(s):a=vn([s,Ot(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);let x=St(we(Wt(f,y),m)),_=Ot(o,[c,0],[e-c,i]),w=R(x,a),C=yt(a);if(c===0)o=Ce(_,Wt(w,Wt(C,_)));else{let P=Ce(_,Wt(w,Wt(C,_)));o=vn([Ot(o,[0,0],[c,i]),P],0)}let k=yt(w),N=Ot(r,[0,c],[e,r.shape[1]-c]);if(c===0)r=Ce(N,Wt(Wt(N,a),k));else{let P=Ce(N,Wt(Wt(N,a),k));r=vn([Ot(r,[0,0],[e,c]),P],1)}return[a,o,r]}),it([u,d,p])}return!n&&e>i&&(r=Ot(r,[0,0],[e,i]),o=Ot(o,[0,0],[i,i])),[r,o]})}var IY=D({qr_:VDe});var Eo={flipLeftRight:dY,grayscaleToRGB:pY,resizeNearestNeighbor:Kk,resizeBilinear:Xk,rgbToGrayscale:hY,rotateWithOffset:mY,cropAndResize:uY,nonMaxSuppression:fY,nonMaxSuppressionAsync:bY,nonMaxSuppressionWithScore:xY,nonMaxSuppressionWithScoreAsync:vY,nonMaxSuppressionPadded:_Y,nonMaxSuppressionPaddedAsync:wY,threshold:CY,transform:TY},DY={bandPart:SY,gramSchmidt:kY,qr:IY};var ie={};Qo(ie,{Serializable:()=>r_,SerializationMap:()=>Yk,getRegisteredName:()=>zDe,registerClass:()=>oP});var BDe=new Map,rP=new Map,r_=class{getClassName(){return this.constructor.className}static fromConfig(n,e){return new n(e)}},Yk=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]}};function oP(t,n,e){A(t.className!=null,()=>"Class being registered does not have the static className property defined."),A(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),A(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof e>"u"&&(e=t.className);let i=e,r=n+">"+i;return Yk.register(t),BDe.set(r,t),rP.set(t,r),t}function zDe(t){return rP.has(t)?rP.get(t):t.className}var Zi=class extends r_{minimize(n,e=!1,i){let{value:r,grads:o}=this.computeGradients(n,i);if(i!=null){let s=i.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(s)}else this.applyGradients(o);return it(o),e?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(n,e){return Hy(n,e)}dispose(){this.iterations_!=null&&it(this.iterations_)}saveIterations(){return W(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ge(this.iterations_,"int32")}})}getWeights(){return W(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(n){return W(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(n){return W(this,null,function*(){return this.iterations_=(yield n[0].tensor.data())[0],n.slice(1)})}};Object.defineProperty(Zi,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var Zy=class extends Zi{static get className(){return"Adadelta"}constructor(n,e,i=null){super(),this.learningRate=n,this.rho=e,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],i==null&&(this.epsilon=I.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i],s=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${i}/accum_grad`,variable:H(()=>We(o).variable(s))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${i}/accum_var`,variable:H(()=>We(o).variable(s))});let a=Array.isArray(n)?n[r].tensor:n[i];if(a==null)return;let l=this.accumulatedGrads[r].variable,c=this.accumulatedUpdates[r].variable;H(()=>{let u=ne(R(l,this.rho),R(dt(a),1-this.rho)),d=R(we(dn(ne(c,this.epsilon)),dn(ne(l,this.epsilon))),a),p=ne(R(c,this.rho),R(dt(d),1-this.rho));l.assign(u),c.assign(p);let h=ne(R(d,-this.learningRate),o);o.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(it(this.accumulatedGrads.map(n=>n.variable)),it(this.accumulatedUpdates.map(n=>n.variable)))}getWeights(){return W(this,null,function*(){let n=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return W(this,null,function*(){n=yield this.extractIterations(n);let e=n.length/2,i=!1;this.accumulatedGrads=n.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedUpdates=n.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.rho,e.epsilon)}};var Jy=class extends Zi{static get className(){return"Adagrad"}constructor(n,e=.1){super(),this.learningRate=n,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${i}/accumulator`,variable:H(()=>Gc(o.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(n)?n[r].tensor:n[i];if(s==null)return;let a=this.accumulatedGrads[r].variable;H(()=>{let l=ne(a,dt(s));a.assign(l);let c=ne(R(we(s,dn(ne(l,I.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&it(this.accumulatedGrads.map(n=>n.variable))}getWeights(){return W(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return W(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulatedGrads=n.map(i=>({originalName:i.name,variable:i.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(n,e){return new n(e.learningRate,e.initialAccumulatorValue)}};var eb=class extends Zi{static get className(){return"Adam"}constructor(n,e,i,r=null){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],H(()=>{this.accBeta1=Ge(e).variable(),this.accBeta2=Ge(i).variable()}),r==null&&(this.epsilon=I.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);H(()=>{let i=Ce(1,this.accBeta1),r=Ce(1,this.accBeta2);e.forEach((o,s)=>{let a=I.registeredVariables[o],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:H(()=>We(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${o}/v`,variable:H(()=>We(a).variable(l))});let c=Array.isArray(n)?n[s].tensor:n[o];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,p=ne(R(u,this.beta1),R(c,1-this.beta1)),h=ne(R(d,this.beta2),R(dt(c),1-this.beta2)),m=we(p,i),g=we(h,r);u.assign(p),d.assign(h);let f=ne(R(we(m,ne(dn(g),this.epsilon)),-this.learningRate),a);a.assign(f)}),this.accBeta1.assign(R(this.accBeta1,this.beta1)),this.accBeta2.assign(R(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&it(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedSecondMoment!=null&&it(this.accumulatedSecondMoment.map(n=>n.variable))}getWeights(){return W(this,null,function*(){let n=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return W(this,null,function*(){n=yield this.extractIterations(n),H(()=>{this.accBeta1.assign(Zr(this.beta1,this.iterations_+1)),this.accBeta2.assign(Zr(this.beta2,this.iterations_+1))});let e=n.length/2,i=!1;this.accumulatedFirstMoment=n.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedSecondMoment=n.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)}};var tb=class extends Zi{static get className(){return"Adamax"}constructor(n,e,i,r=null,o=0){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],H(()=>{this.iteration=Ge(0).variable(),this.accBeta1=Ge(e).variable()}),r==null&&(this.epsilon=I.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);H(()=>{let i=Ce(1,this.accBeta1),r=we(-this.learningRate,ne(R(this.iteration,this.decay),1));e.forEach((o,s)=>{let a=I.registeredVariables[o],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:We(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${o}/v`,variable:We(a).variable(l)});let c=Array.isArray(n)?n[s].tensor:n[o];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,p=ne(R(u,this.beta1),R(c,1-this.beta1)),h=R(d,this.beta2),m=ri(c),g=dr(h,m);u.assign(p),d.assign(g);let f=ne(R(we(r,i),we(p,ne(g,this.epsilon))),a);a.assign(f)}),this.iteration.assign(ne(this.iteration,1)),this.accBeta1.assign(R(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&it(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedWeightedInfNorm!=null&&it(this.accumulatedWeightedInfNorm.map(n=>n.variable))}getWeights(){return W(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(n){return W(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}};var qd=class extends Zi{static get className(){return"SGD"}constructor(n){super(),this.learningRate=n,this.setLearningRate(n)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=Array.isArray(n)?n[r].tensor:n[i];if(o==null)return;let s=I.registeredVariables[i];H(()=>{let a=ne(R(this.c,o),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=wi(Ge(-n))}dispose(){this.c.dispose()}getWeights(){return W(this,null,function*(){return[yield this.saveIterations()]})}setWeights(n){return W(this,null,function*(){if(n=yield this.extractIterations(n),n.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(n,e){return new n(e.learningRate)}};var nb=class extends qd{static get className(){return"Momentum"}constructor(n,e,i=!1){super(n),this.learningRate=n,this.momentum=e,this.useNesterov=i,this.accumulations=[],this.m=Ge(this.momentum)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${i}/momentum`,variable:H(()=>We(o).variable(!1))});let s=this.accumulations[r].variable,a=Array.isArray(n)?n[r].tensor:n[i];a!=null&&H(()=>{let l,c=ne(R(this.m,s),a);this.useNesterov?l=ne(R(this.c,ne(a,R(c,this.m))),o):l=ne(R(this.c,c),o),s.assign(c),o.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&it(this.accumulations.map(n=>n.variable))}setMomentum(n){this.momentum=n}getWeights(){return W(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return W(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulations=n.map(i=>({originalName:i.name,variable:i.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)}};var ib=class extends Zi{static get className(){return"RMSProp"}constructor(n,e=.9,i=0,r=null,o=!1){if(super(),this.learningRate=n,this.decay=e,this.momentum=i,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,r==null&&(this.epsilon=I.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i],s=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${i}/rms`,variable:H(()=>We(o).variable(s))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${i}/momentum`,variable:H(()=>We(o).variable(s))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${i}/mg`,variable:H(()=>We(o).variable(s))});let a=Array.isArray(n)?n[r].tensor:n[i];if(a==null)return;let l=this.accumulatedMeanSquares[r].variable,c=this.accumulatedMoments[r].variable;H(()=>{let u=ne(R(l,this.decay),R(dt(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[r].variable,p=ne(R(d,this.decay),R(a,1-this.decay)),h=we(R(a,this.learningRate),dn(Ce(u,ne(dt(p),this.epsilon)))),m=ne(R(c,this.momentum),h);l.assign(u),d.assign(p),c.assign(m);let g=Ce(o,m);o.assign(g)}else{let d=ne(R(l,this.decay),R(dt(a),1-this.decay)),p=ne(R(c,this.momentum),we(R(a,this.learningRate),dn(ne(d,this.epsilon))));l.assign(d),c.assign(p);let h=Ce(o,p);o.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&it(this.accumulatedMeanSquares.map(n=>n.variable)),this.accumulatedMeanGrads!=null&&this.centered&&it(this.accumulatedMeanGrads.map(n=>n.variable)),this.accumulatedMoments!=null&&it(this.accumulatedMoments.map(n=>n.variable))}getWeights(){return W(this,null,function*(){let n=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&n.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return W(this,null,function*(){n=yield this.extractIterations(n);let e=this.centered?n.length/3:n.length/2,i=!1;this.accumulatedMeanSquares=n.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedMoments=n.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.centered&&(this.accumulatedMeanGrads=n.slice(e*2,e*3).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}};var GDe=[Zy,Jy,eb,tb,nb,ib,qd];function AY(){for(let t of GDe)oP(t)}var xs={};Qo(xs,{CompositeArrayBuffer:()=>Yi,browserFiles:()=>MY,browserHTTPRequest:()=>PY,concatenateArrayBuffers:()=>ZX,copyModel:()=>pK,decodeWeights:()=>Ek,decodeWeightsStream:()=>iL,encodeWeights:()=>XX,fromMemory:()=>$Y,fromMemorySync:()=>pP,getLoadHandlers:()=>nK,getModelArtifactsForJSON:()=>Oy,getModelArtifactsForJSONSync:()=>sL,getModelArtifactsInfoForJSON:()=>qa,getSaveHandlers:()=>tK,getWeightSpecs:()=>R0,http:()=>Zk,isHTTPScheme:()=>Qk,listModels:()=>uK,loadWeights:()=>RY,moveModel:()=>hK,registerLoadRouter:()=>eK,registerSaveRouter:()=>JX,removeModel:()=>dK,weightsLoaderFactory:()=>uP,withSaveHandler:()=>VY,withSaveHandlerSync:()=>BY});var UDe="model",HDe=".json",WDe=".weights.bin";function NY(t){return new Promise(n=>setTimeout(n)).then(t)}var sP=(()=>{class t{constructor(e){if(!G().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(e==null||e.length===0)&&(e=UDe),this.modelJsonFileName=e+HDe,this.weightDataFileName=e+WDe}save(e){return W(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let i=Yi.join(e.weightData),r=window.URL.createObjectURL(new Blob([i],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let o=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=Ik(e,o),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,yield NY(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=r,yield NY(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:qa(e)}}})}}return t.URL_SCHEME="downloads://",t})();var aP=class{constructor(n){if(n==null||n.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${n}`);this.jsonFile=n[0],this.weightsFiles=n.slice(1)}load(){return W(this,null,function*(){return new Promise((n,e)=>{let i=new FileReader;i.onload=r=>{let o=JSON.parse(r.target.result),s=o.modelTopology;if(s==null){e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){n({modelTopology:s});return}let l=Oy(o,c=>this.loadWeights(c));n(l)},i.onerror=r=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(this.jsonFile)})})}loadWeights(n){let e=[],i=[];for(let s of n)e.push(...s.weights),i.push(...s.paths);let r=this.checkManifestAndWeightFiles(n),o=i.map(s=>this.loadWeightsFile(s,r[s]));return Promise.all(o).then(s=>[e,s])}loadWeightsFile(n,e){return new Promise((i,r)=>{let o=new FileReader;o.onload=s=>{let a=s.target.result;i(a)},o.onerror=s=>r(`Failed to weights data from file of path '${n}'.`),o.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(n){let e=[],i=this.weightsFiles.map(o=>oL(o.name)),r={};for(let o of n)o.paths.forEach(s=>{let a=oL(s);if(e.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),i.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);r[s]=this.weightsFiles[i.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}},jDe=t=>G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(sP.URL_SCHEME)?qDe(t.slice(sP.URL_SCHEME.length)):null;Ci.registerSaveRouter(jDe);function qDe(t="model"){return new sP(t)}function MY(t){return new aP(t)}function lP(t,n,e,i){s(t),e=e??0,i=i??1,a(e,i);let r=0,o=l=>(l.then(c=>{let u=e+ ++r/t.length*(i-e);return n(u),c}),l);function s(l){A(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){A(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),A(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),A(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(o))}function cP(t,n){return W(this,null,function*(){n==null&&(n={});let e=n.fetchFunc==null?G().platform.fetch:n.fetchFunc,i=t.map(d=>e(d,n.requestInit,{isBinary:!0})),a=(n.onProgress==null?yield Promise.all(i):yield lP(i,n.onProgress,0,.5)).map(d=>d.arrayBuffer());return n.onProgress==null?yield Promise.all(a):yield lP(a,n.onProgress,.5,1)})}function OY(t,n){var e;let i=n.fetchFunc==null?G().platform.fetch:n.fetchFunc,r=0,o;return(e=n.onProgress)===null||e===void 0||e.call(n,0),new ReadableStream({pull:s=>W(null,null,function*(){for(var a;r<t.length;){o||(o=(yield i(t[r],n.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=yield o.read();if(l){r++,o=void 0,(a=n.onProgress)===null||a===void 0||a.call(n,r/t.length);continue}s.enqueue(c);return}s.close()})})}function RY(t,n="",e,i){return W(this,null,function*(){return uP(s=>cP(s,{requestInit:i}))(t,n,e)})}function uP(t){return(n,e="",i)=>W(null,null,function*(){let r=n.map(()=>!1),o={},s=i!=null?i.map(()=>!1):[],a=[];if(n.forEach((h,m)=>{let g=0;h.weights.forEach(f=>{let y="quantization"in f?f.quantization.dtype:f.dtype,b=Vc[y]*Ht(f.shape),x=()=>{r[m]=!0,o[m]==null&&(o[m]=[]),o[m].push({manifestEntry:f,groupOffset:g,sizeBytes:b})};i!=null?i.forEach((_,w)=>{_===f.name&&(x(),s[w]=!0)}):x(),a.push(f.name),g+=b})}),!s.every(h=>h)){let h=i.filter((m,g)=>!s[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=r.reduce((h,m,g)=>(m&&h.push(g),h),[]),c=[];l.forEach(h=>{n[h].paths.forEach(m=>{let g=e+(e.endsWith("/")?"":"/")+m;c.push(g)})});let u=yield t(c),d={},p=0;return l.forEach(h=>{let m=n[h].paths.length,g=new Yi(u.slice(p,p+m));o[h].forEach(y=>{let b=g.slice(y.groupOffset,y.groupOffset+y.sizeBytes),x=Ek(b,[y.manifestEntry]);for(let _ in x)d[_]=x[_]}),p+=m}),d})}var XDe="application/octet-stream",KDe="application/json",FY=(()=>{class t{constructor(e,i){if(this.DEFAULT_METHOD="POST",i==null&&(i={}),this.weightPathPrefix=i.weightPathPrefix,this.weightUrlConverter=i.weightUrlConverter,i.fetchFunc!=null?(A(typeof i.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=i.fetchFunc):this.fetch=G().platform.fetch,A(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&A(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,i.requestInit!=null&&i.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=i.requestInit||{},this.loadOptions=i}save(e){return W(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let i=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);i.body=new FormData;let r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o=Ik(e,r);if(i.body.append("model.json",new Blob([JSON.stringify(o)],{type:KDe}),"model.json"),e.weightData!=null){let a=Yi.join(e.weightData);i.body.append("model.weights.bin",new Blob([a],{type:XDe}),"model.weights.bin")}let s=yield this.fetch(this.path,i);if(s.ok)return{modelArtifactsInfo:qa(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return W(this,null,function*(){let e=yield this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let i;try{i=yield e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let r=i.modelTopology,o=i.weightsManifest;if(r==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return i})}load(){return W(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let e=yield this.loadModelJSON();return Oy(e,i=>this.loadWeights(i))})}loadStream(){return W(this,null,function*(){let e=yield this.loadModelJSON(),i=yield this.getWeightUrls(e.weightsManifest),r=R0(e.weightsManifest),o=()=>OY(i,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:o})})}getWeightUrls(e){return W(this,null,function*(){let i=Array.isArray(this.path)?this.path[1]:this.path,[r,o]=YDe(i),s=this.weightPathPrefix||r,a=[],l=[];for(let c of e)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+o);return this.weightUrlConverter&&a.push(...yield Promise.all(l)),a})}loadWeights(e){return W(this,null,function*(){let i=yield this.getWeightUrls(e),r=R0(e),o=yield cP(i,this.loadOptions);return[r,o]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function YDe(t){let n=t.lastIndexOf("/"),e=t.lastIndexOf("?"),i=t.substring(0,n),r=e>n?t.substring(e):"";return[i+"/",r]}function Qk(t){return t.match(FY.URL_SCHEME_REGEX)!=null}var LY=(t,n)=>{if(typeof fetch>"u"&&(n==null||n.fetchFunc==null))return null;{let e=!0;if(Array.isArray(t)?e=t.every(i=>Qk(i)):e=Qk(t),e)return Zk(t,n)}return null};Ci.registerSaveRouter(LY);Ci.registerLoadRouter(LY);function Zk(t,n){return new FY(t,n)}function PY(t,n){return Zk(t,n)}var o_=class{constructor(n){this.modelArtifacts=n}load(){return this.modelArtifacts}},Jk=class{constructor(n){this.saveHandler=n}save(n){return this.saveHandler(n)}},dP=class{constructor(n){n.load&&(this.load=()=>Promise.resolve(n.load())),n.save&&(this.save=e=>Promise.resolve(n.save(e)))}};function $Y(t,n,e,i){let r=arguments;return new dP(pP(...r))}function pP(t,n,e,i){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new o_(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new o_({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new o_({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:i}))}function VY(t){return new Jk(t)}function BY(t){return new Jk(t)}function QDe(t,n){let e=t.shape.length,i=n.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(i<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${i}.`);if(n.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[i-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[i-1]} vs. ${e}`);if(Ht(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let r=n.shape,o=r[r.length-1],s=1;for(let d=0;d<r.length-1;++d)s*=r[d];let a=t.shape,l=r.slice();l.pop();let c=1;for(let d=o;d<e;++d)c*=a[d],l.push(a[d]);let u=[...za(t.shape).map(d=>d/c),1].slice(0,o);return[l,s,c,u]}var ki={};Qo(ki,{assertParamsValid:()=>JDe,computeFlatOffset:()=>rAe,computeOutShape:()=>tAe,getNormalizedAxes:()=>nAe,isSliceContinous:()=>iAe,maskToAxes:()=>eAe,parseSliceParams:()=>mP,sliceInfo:()=>oAe,startForAxis:()=>XY,startIndicesWithElidedDims:()=>WY,stopForAxis:()=>KY,stopIndicesWithElidedDims:()=>jY,stridesForAxis:()=>qY,stridesWithElidedDims:()=>GY});var hP=-2,ZDe=-1;function JDe(t,n,e){let i=t.shape.length;A(i===n.length,()=>`Error in slice${i}D: Length of begin ${n} must match the rank of the array (${i}).`),A(i===e.length,()=>`Error in slice${i}D: Length of size ${e} must match the rank of the array (${i}).`);for(let r=0;r<i;++r)A(n[r]+e[r]<=t.shape[r],()=>`Error in slice${i}D: begin[${r}] + size[${r}] (${n[r]+e[r]}) would overflow input.shape[${r}] (${t.shape[r]})`)}function eAe(t){let n=[],e=0;for(;t>0;)t&1&&n.push(e),t/=2,e++;return n}function tAe(t,n,e){let i=[];for(let r=0;r<t.length;r++)i[r]=Math.ceil((n[r]-t[r])/e[r]);return i}function GY(t,n,e,i){let r=[...t];for(let o=r.length;o<i.length;o++)r.push(1);for(let o=0;o<e;o++)o===0?r[n]=1:(r.splice(n,0,1),r.pop());return r}function UY(t,n,e){return e<=t?e:e-(n-1)}function HY(t,n){let e=[];for(let i=0;i<t;i++)e.push(n+i);return e}function nAe(t,n,e,i,r,o,s,a,l){let c=t.length,u=new Array(c),d=new Array(c),p=new Array(c);if(n.length&&e>0){let h=n[0],m=e+1;u=WY(s,h,m,i,t),d=jY(a,h,m,r,t),p=GY(o,h,m,t)}else for(let h=0;h<c;h++)u[h]=XY(s,i,o,t,h,l),d[h]=KY(a,r,o,t,h,l),p[h]=qY(o,h,l);return{begin:u,end:d,strides:p}}function WY(t,n,e,i,r){let o=[...r],s=HY(e,n);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=0;else{let l=UY(n,e,a),c=i[l];t&1<<l&&(c=0),o[a]=c}return o}function jY(t,n,e,i,r){let o=[...r],s=HY(e,n);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{let l=UY(n,e,a),c=i[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),o[a]=c}for(let a=0;a<o.length;a++){let l=r[a];o[a]<0&&(o[a]+=l),o[a]=Lg(0,o[a],r[a])}return o}function qY(t,n,e){let i=t[n];return(e&1<<n||i==null)&&(i=1),i}function XY(t,n,e,i,r,o){let s=n[r],a=e[r]||1;(t&1<<r||o&1<<r||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=i[r];return s<0&&(s+=l),s=Lg(0,s,l-1),s}function KY(t,n,e,i,r,o){let s=n[r],a=e[r]||1;(t&1<<r||o&1<<r||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=i[r];return s<0&&(s+=l),a>0?s=Lg(0,s,l):s=Lg(-1,s,l-1),s}function iAe(t,n,e){let i=e.length;for(let r=0;r<e.length;r++)if(e[r]>1){i=r;break}for(let r=i+1;r<e.length;r++)if(n[r]>0||e[r]!==t[r])return!1;return!0}function rAe(t,n){let e=t.length>0?t[t.length-1]:1;for(let i=0;i<t.length-1;i++)e+=t[i]*n[i];return e}function mP(t,n,e){let i,r=t.shape.length;typeof n=="number"?i=[n,...new Array(r-1).fill(0)]:n.length<r?i=n.concat(new Array(r-n.length).fill(0)):i=n.slice(),i.forEach(s=>{A(s!==-1,()=>"slice() does not support negative begin indexing.")});let o;return e==null?o=new Array(r).fill(-1):typeof e=="number"?o=[e,...new Array(r-1).fill(-1)]:e.length<r?o=e.concat(new Array(r-e.length).fill(-1)):o=e,o=o.map((s,a)=>s>=0?s:(A(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-i[a])),[i,o]}function oAe(t,n,e,i,r,o,s,a,l){let c;if(i==null?(c=new Array(n.length),c.fill(1)):c=i,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:e.slice(),strides:c.slice(),beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let x=0;x<d.dims;x++)u&&(1<<x&a)!==0&&d.numAddAxisAfterEllipsis++,1<<x&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};sAe(d,p);let h=!0,m=!0,g=!0,f=[],y=[];for(let x=0;x<t.length;++x){if(p.strides[x]===0)throw Error(`strides[${x}] must be non-zero`);let _=!!(p.shrinkAxisMask&1<<x),w=t[x];if(w===-1){f.push(_?1:-1);continue}let C=[p.beginMask&1<<x,p.endMask&1<<x],k=[p.strides[x]>0?0:-1,p.strides[x]>0?w:w-1];if(_&&p.strides[x]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&p.strides[x]===1;let N=!!(p.beginMask&1<<x&&p.endMask&1<<x);if(p.beginValid&&p.endValid){if(_){let Y=p.begin[x]<0?w+p.begin[x]:p.begin[x];if(p.begin[x]=Y,p.end[x]=p.begin[x]+1,Y<0||Y>=w)throw Error(`slice index ${p.begin[x]} of dimension ${x} out of bounds.`)}else p.begin[x]=zY(p.begin[x],0,p.strides[x],w,C,k),p.end[x]=zY(p.end[x],1,p.strides[x],w,C,k);let z=p.strides[x]===1&&p.begin[x]===0&&p.end[x]===w;h=h&&z,m=m&&(x===0&&p.strides[x]===1||z)}else h=h&&p.strides[x]===1&&N,m=m&&(x===0&&p.strides[x]===1||N);let P,F=!1;if(p.beginValid&&p.endValid?(P=p.end[x]-p.begin[x],F=!0):_?(P=1,F=!0):N&&w>=0&&(p.strides[x]<0?P=-w:P=w,F=!0),F){let z;P===0||P<0!=p.strides[x]<0?z=0:z=Math.trunc(P/p.strides[x])+(P%p.strides[x]!==0?1:0),f.push(z)}else f.push(-1)}for(let x=0;x<p.finalShapeGatherIndices.length;++x){let _=p.finalShapeGatherIndices[x];_>=0?y.push(f[_]):_===hP&&y.push(1)}return{finalShapeSparse:y.filter((x,_)=>p.finalShapeGatherIndices[_]!==hP),finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function sAe(t,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let e=0;n.beginValid=t.begin!=null,n.endValid=t.end!=null,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let i=0;i<t.dims;i++)if(1<<i&t.ellipsisMask){let r=Math.min(n.dims-(t.dims-i)+1+t.numAddAxisAfterEllipsis,n.dims);for(;e<r;e++)n.begin[e]=0,n.end[e]=0,n.strides[e]=1,n.beginMask|=1<<e,n.endMask|=1<<e,n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[e]=i}else if(1<<i&t.newAxisMask)n.finalShapeGatherIndices.push(hP),n.finalShapeGatherIndicesSparse.push(-1);else{if(e===n.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${n.dims} dims, ${n.begin.length}.`);t.begin!=null&&(n.begin[e]=t.begin[i]),t.end!=null&&(n.end[e]=t.end[i]),n.strides[e]=t.strides[i],t.beginMask&1<<i&&(n.beginMask|=1<<e),t.endMask&1<<i&&(n.endMask|=1<<e),t.shrinkAxisMask&1<<i?(n.finalShapeGatherIndices.push(ZDe),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<e):(n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(i)),n.inputShapeGatherIndicesSparse[e]=i,e++}}function zY(t,n,e,i,r,o){if(r[n])return e>0?o[n]:o[n+1&1];{let s=t<0?i+t:t;return s<o[0]?o[0]:s>o[1]?o[1]:s}}var eE=class{static sgd(n){return new qd(n)}static momentum(n,e,i=!1){return new nb(n,e,i)}static rmsprop(n,e=.9,i=0,r=null,o=!1){return new ib(n,e,i,r,o)}static adam(n=.001,e=.9,i=.999,r=null){return new eb(n,e,i,r)}static adadelta(n=.001,e=.95,i=null){return new Zy(n,e,i)}static adamax(n=.002,e=.9,i=.999,r=null,o=0){return new tb(n,e,i,r,o)}static adagrad(n,e=.1){return new Jy(n,e)}};var jo=eE;var aAe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function s_(){return new Promise(t=>aAe(()=>t()))}var T={};Qo(T,{ERF_A1:()=>wAe,ERF_A2:()=>CAe,ERF_A3:()=>TAe,ERF_A4:()=>SAe,ERF_A5:()=>kAe,ERF_P:()=>_Ae,PARALLELIZE_THRESHOLD:()=>tE,RowPartitionType:()=>Xc,SELU_SCALE:()=>gP,SELU_SCALEALPHA:()=>fP,applyActivation:()=>um,assertAndGetBroadcastShape:()=>ut,assertAxesAreInnerMostDims:()=>gEe,assertParamsConsistent:()=>lAe,assignToTypedArray:()=>MAe,axesAreInnerMostDims:()=>OL,calculateShapes:()=>nDe,checkEinsumDimSizes:()=>$Ae,checkPadOnDimRoundingMode:()=>gn,combineLocations:()=>DK,combineRaggedTensorToTensorShapes:()=>uAe,complexWithEvenIndex:()=>DAe,complexWithOddIndex:()=>AAe,computeConv2DInfo:()=>Kh,computeConv3DInfo:()=>vK,computeDefaultPad:()=>_L,computeDilation2DInfo:()=>vke,computeOptimalWindowSize:()=>mAe,computeOutAndReduceShapes:()=>RL,computeOutShape:()=>cAe,computePool2DInfo:()=>vL,computePool3DInfo:()=>_ke,convertConv2DDataFormat:()=>_K,decodeEinsumEquation:()=>LAe,eitherStridesOrDilationsAreOne:()=>Bi,expandShapeToKeepDim:()=>Ka,exponent:()=>RAe,exponents:()=>OAe,fromStringArrayToUint8:()=>oNe,fromUint8ToStringArray:()=>rNe,getAxesPermutation:()=>FL,getBroadcastDims:()=>kK,getComplexWithIndex:()=>NAe,getEinsumComputePath:()=>VAe,getEinsumPermutation:()=>PAe,getFusedBiasGradient:()=>cm,getFusedDyActivation:()=>lm,getImageCenter:()=>fAe,getInnerMostAxes:()=>yEe,getPermuted:()=>yAe,getRaggedRank:()=>pAe,getReductionAxes:()=>un,getReshaped:()=>gAe,getReshapedPermuted:()=>bAe,getRowPartitionTypesHelper:()=>dAe,getSliceBeginCoords:()=>xAe,getSliceSize:()=>vAe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>UAe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>HAe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>WAe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>XAe,getSparseReshapeInputOutputMismatchErrorMessage:()=>YAe,getSparseReshapeInputOutputMultipleErrorMessage:()=>KAe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>jAe,getSparseReshapeNegativeOutputDimErrorMessage:()=>qAe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>eNe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>QAe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>ZAe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>JAe,getUndoAxesPermutation:()=>U0,isIdentityPermutation:()=>BAe,log:()=>d1e,mergeRealAndImagArrays:()=>EAe,prepareAndValidate:()=>QDe,prepareSplitSize:()=>GAe,segment_util:()=>bP,shouldFuse:()=>dm,slice_util:()=>ki,splitRealAndImagArrays:()=>IAe,stridesOrDilationsArePositive:()=>Xa,tupleValuesAreOne:()=>Go,upcastType:()=>ii,validateDefaultValueShape:()=>hAe,validateInput:()=>tDe,validateUpdateShape:()=>tY,warn:()=>ja});function lAe(t,n){let e=t[0].length;t.forEach((r,o)=>{A(r.length===e,()=>`Error in concat${e}D: rank of tensors[${o}] must be the same as the rank of the rest (${e})`)}),A(n>=0&&n<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);let i=t[0];t.forEach((r,o)=>{for(let s=0;s<e;s++)A(s===n||r[s]===i[s],()=>`Error in concat${e}D: Shape of tensors[${o}] (${r}) does not match the shape of the rest (${i}) along the non-concatenated axis ${o}.`)})}function cAe(t,n){let e=t[0].slice();for(let i=1;i<t.length;i++)e[n]+=t[i][n];return e}var Xc=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(Xc||{});function uAe(t,n,e){let i=new Array;if(e==null&&n==null)return i;if(n==null)for(;i.length<t+e.length;)i.push(-1);else i=n.slice();if(e==null)return i;if(t+e.length!==i.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${t+e.length}, but shape.rank = ${i.length}`);for(let r=1;r<e.length;++r){let o=e[r],s=i[i.length-e.length+r],a=i[s];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${r+t}] = ${o} but shape[${r+t}] = ${a}`)}else i[s]=o}return i}function dAe(t){let n={FIRST_DIM_SIZE:Xc.FIRST_DIM_SIZE,VALUE_ROWIDS:Xc.VALUE_ROWIDS,ROW_LENGTHS:Xc.ROW_LENGTHS,ROW_SPLITS:Xc.ROW_SPLITS,ROW_LIMITS:Xc.ROW_LIMITS,ROW_STARTS:Xc.ROW_STARTS},e=[];for(let i of t)if(i in n)e.push(n[i]);else break;return e}function pAe(t){return t.length===0?0:t[0]===Xc.FIRST_DIM_SIZE?t.length-1:t.length}function hAe(t,n){if(t==null||n==null)return;let e=t.length,i=n.length;if(e>=i)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${i})`);for(let r=0;r<Math.min(e,i-1);++r){let o=t[r],s=n[r+1];if(o>=0&&s>=0&&o!==1&&o!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${r-t.length}] = ${o} but ragged tensor input.flatValues.shape[${r-t.length}] = ${s}`)}}var tE=30;function mAe(t){return t<=tE?t:Bg(t,Math.floor(Math.sqrt(t)))}function fAe(t,n,e){let i=e*(typeof t=="number"?t:t[0]),r=n*(typeof t=="number"?t:t[1]);return[i,r]}function gAe(t,n,e,i=!0){let r=[];if(i)r=r.concat(n.slice(0)),r.push(t[0]/e),r=r.concat(t.slice(1));else{r=r.concat(t[0]);let o=n.length;for(let s=0;s<o;++s)r=r.concat([t[s+1]/n[s],n[s]]);r=r.concat(t.slice(o+1))}return r}function yAe(t,n,e=!0){let i=[];if(e){i.push(n);for(let r=n+1;r<t;++r)r<=2*n?(i.push(r),i.push(r-(n+1))):i.push(r)}else{let r=[],o=[];for(let s=1;s<t;++s)s>=n*2+1||s%2===1?o.push(s):r.push(s);i.push(...r),i.push(0),i.push(...o)}return i}function bAe(t,n,e,i=!0){let r=[];i?r.push(t[0]/e):r.push(t[0]*e);for(let o=1;o<t.length;++o)o<=n.length?i?r.push(n[o-1]*t[o]):r.push(t[o]/n[o-1]):r.push(t[o]);return r}function xAe(t,n){let e=[0];for(let i=0;i<n;++i)e.push(t[i][0]);return e}function vAe(t,n,e){let i=t.slice(0,1);for(let r=0;r<e;++r)i.push(t[r+1]-n[r][0]-n[r][1]);return i}var fP=1.7580993408473768,gP=1.0507009873554805;var _Ae=.3275911,wAe=.254829592,CAe=-.284496736,TAe=1.421413741,SAe=-1.453152027,kAe=1.061405429;function EAe(t,n){if(t.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${n.length}.`);let e=new Float32Array(t.length*2);for(let i=0;i<e.length;i+=2)e[i]=t[i/2],e[i+1]=n[i/2];return e}function IAe(t){let n=new Float32Array(t.length/2),e=new Float32Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i/2]=t[i],e[i/2]=t[i+1];return{real:n,imag:e}}function DAe(t){let n=Math.ceil(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let r=0;r<t.length;r+=4)e[Math.floor(r/4)]=t[r],i[Math.floor(r/4)]=t[r+1];return{real:e,imag:i}}function AAe(t){let n=Math.floor(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let r=2;r<t.length;r+=4)e[Math.floor(r/4)]=t[r],i[Math.floor(r/4)]=t[r+1];return{real:e,imag:i}}function NAe(t,n){let e=t[n*2],i=t[n*2+1];return{real:e,imag:i}}function MAe(t,n,e,i){t[i*2]=n,t[i*2+1]=e}function OAe(t,n){let e=new Float32Array(t/2),i=new Float32Array(t/2);for(let r=0;r<Math.ceil(t/2);r++){let o=(n?2:-2)*Math.PI*(r/t);e[r]=Math.cos(o),i[r]=Math.sin(o)}return{real:e,imag:i}}function RAe(t,n,e){let i=(e?2:-2)*Math.PI*(t/n),r=Math.cos(i),o=Math.sin(i);return{real:r,imag:o}}var yP="->",FAe=/->/g,YY=",",QY="...";function LAe(t,n){t=t.replace(/\s/g,"");let e=(t.length-t.replace(FAe,"").length)/yP.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${yP}").`);let[i,r]=t.split(yP);A(i.indexOf(QY)===-1,()=>`The ellipsis notation ("${QY}") is not supported yet.`);let o=i.split(YY),s=o.length;if(n!==s)throw new Error(`Expected ${s} input tensors, received ${n}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<r.length;++p){let h=r[p];if(!o.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let p=0;p<i.length;++p){let h=i[p];a.indexOf(h)===-1&&h!==YY&&a.push(h)}let l=new Array(o.length);for(let p=0;p<s;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error(`Found duplicate axes in input component ${o[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let h=0;h<o[p].length;++h)l[p].push(a.indexOf(o[p][h]))}let c=a.length,u=r.length,d=[];for(let p=u;p<c;++p)d.push(p);return{allDims:a,summedDims:d,idDims:l}}function PAe(t,n){let e=new Array(t);e.fill(-1);for(let r=0;r<n.length;++r)e[n[r]]=r;let i=[];for(let r=0;r<t;++r)e[r]===-1&&i.push(r);return e=e.filter(r=>r!==-1),{permutationIndices:e,expandDims:i}}function $Ae(t,n,e){let i=new Array(t);for(let r=0;r<e.length;++r){let o=e[r].shape;for(let s=0;s<n[r].length;++s)i[n[r][s]]===void 0?i[n[r][s]]=o[s]:A(i[n[r][s]]===o[s],()=>`Expected dimension ${i[n[r][s]]} at axis ${s} of input shaped ${JSON.stringify(o)}, but got dimension ${o[s]}`)}}function VAe(t,n){let e=t,i=[],r=0;t.length===0&&e.push(-1),r=t.length+1;for(let s=0;s<r;++s)i.push([]);let o=[];for(let s=0;s<e.length;++s){let a=e[s],l=zAe(n,a);for(let c of l)o.indexOf(c)===-1&&(i[s].push(c),o.push(c))}return{path:e,steps:i}}function BAe(t){return t.every((n,e)=>n===e)}function zAe(t,n){let e=[];for(let i=0;i<t.length;++i)(t[i].length===0||t[i].indexOf(n)!==-1||n===-1)&&e.push(i);return e}function GAe(t,n,e=0){let i=[];if(typeof n=="number")A(t.shape[e]%n===0,()=>"Number of splits must evenly divide the axis."),i=new Array(n).fill(t.shape[e]/n);else{let r=n.reduce((s,a)=>(a===-1&&(s+=1),s),0);A(r<=1,()=>"There should be only one negative value in split array.");let o=n.indexOf(-1);if(o!==-1){let s=n.reduce((a,l)=>l>0?a+l:a);n[o]=t.shape[e]-s}A(t.shape[e]===n.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),i=n}return i}function UAe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function HAe(t,n){return`indices(${t}, 0) is invalid: ${n} < 0`}function WAe(t,n,e){return`indices(${t}, 0) is invalid: ${n} >= ${e}`}function jAe(t,n){return`only one output dimension may be -1, not both ${t} and ${n}`}function qAe(t,n){return`size ${t} must be non-negative, not ${n}`}function XAe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function KAe(t,n){let e=Ht(t),i=Ht(n);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${i}. inputShape=${t} outputShape= ${n}`}function YAe(t,n){let e=Ht(t),i=Ht(n);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${i}. inputShape=${t} outputShape=${n}`}function QAe(){return"segment ids must be >= 0"}function ZAe(){return"segment ids are not increasing"}function JAe(t,n){return`Segment id ${t} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function eNe(t,n,e){return`Bad: indices[${t}] == ${n} out of range [0, ${e})`}var bP={};Qo(bP,{collectGatherOpShapeInfo:()=>iNe,computeOutShape:()=>nNe,segOpComputeOptimalWindowSize:()=>tNe});function tNe(t,n){let e=!1,i;for(t<=tE?(i=t,e=!0):i=Bg(t,Math.floor(Math.sqrt(t)));!e;)i>n||i===t?e=!0:i=Bg(t,i+1);return i}function nNe(t,n,e){let i=[],r=t.length;for(let o=0;o<r;o++)o!==n?i.push(t[o]):i.push(e);return i}function iNe(t,n,e,i){let r=n.shape.length,o=t.shape.length;if(i!==0&&(i<-r||i>r))throw new Error(`Expect batchDims in the range of [-${r}, ${r}], but got ${i}`);if(i<0&&(i+=r),i>o)throw new Error(`batchDims (${i}) must be less than rank(x) (
    ${o}).`);if(e<i)throw new Error(`batchDims (${i}) must be less than or equal to axis (${e}).`);for(let d=0;d<i;++d)if(t.shape[d]!==n.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${n.shape[d]}.`);let s=t.shape[e],a=[],l=1,c=1,u=1;for(let d=0;d<i;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=i;d<e;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=i;d<r;d++)a.push(n.shape[d]);for(let d=e+1;d<o;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function rNe(t){try{return t.map(n=>Ny(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function oNe(t){return t.map(n=>Ay(n))}var Ji={};Qo(Ji,{nonMaxSuppressionV3Impl:()=>Wk,nonMaxSuppressionV4Impl:()=>jk,nonMaxSuppressionV5Impl:()=>qk,whereImpl:()=>rY});AY();var nE={kernelName:Wu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(t,ta(le(e,"float32"),-1))}}};var ZY={kernelName:jl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=dt(le(e,"float32")),r=dn(Ce(Ge(1),i));return St(we(t,r))}}}};var JY={kernelName:ql,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=dn(Ce(dt(le(e,"float32")),1));return we(t,i)}}}};var e7={kernelName:Ks,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=t,l=un(e.shape,r);return l.length>0&&(a=Se(a,l)),$(a,e.shape)},b:()=>{let a=t,l=un(i.shape,r);return l.length>0&&(a=Se(a,l)),$(a,i.shape)}}}};var t7={kernelName:Gg,saveAllInputs:!0,gradFunc:(t,n)=>{let e={};return n.forEach((i,r)=>{e[r]=()=>t.clone()}),e}};var n7={kernelName:ju,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>We(e)}}};var i7={kernelName:qu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>We(e)}}};var r7={kernelName:Xl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,dn(Ce(Ge(1),dt(le(e,"float32")))))}}};var o7={kernelName:Kl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=dn(ne(Ge(1),dt(le(e,"float32"))));return we(t,i)}}}};var s7={kernelName:Zl,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=ne(dt(e),dt(i)),l=R(t,we(i,a)),c=un(e.shape,r);return c.length>0&&(l=Se(l,c)),$(l,e.shape)},b:()=>{let a=ne(dt(e),dt(i)),l=St(R(t,we(e,a))),c=un(i.shape,r);return c.length>0&&(l=Se(l,c)),$(l,i.shape)}}}};var a7={kernelName:Yl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,ne(dt(le(e,"float32")),1))}}};var l7={kernelName:Ql,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,Ce(Ge(1),dt(le(e,"float32"))))}}};function sNe(t,n,e,i,r,o){let s=S(t,"dy","avgPool3dGrad"),a=S(n,"input","avgPool3dGrad"),l=s,c=a,u=!1;a.rank===4&&(u=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),A(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),A(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),gn("avgPool3dGrad",r,o);let d={dy:l,input:c},p={filterSize:e,strides:i,pad:r,dimRoundingMode:o},h=I.runKernel(jg,d,p);return u?$(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var c7=D({avgPool3dGrad_:sNe});var u7={kernelName:Ku,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{filterSize:r,strides:o,pad:s,dimRoundingMode:a}=e;return{x:()=>c7(t,i,r,o,s,a)}}};function aNe(t,n,e,i,r){let o=S(t,"dy","avgPoolGrad"),s=S(n,"input","avgPoolGrad");A(s.rank===o.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${o.rank})`);let a=s,l=o,c=!1;s.rank===3&&(c=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=$(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),A(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);let u={dy:l,input:a},d={filterSize:e,strides:i,pad:r},p=I.runKernel(Wg,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var d7=D({avgPoolGrad_:aNe});var p7={kernelName:Xu,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{filterSize:r,strides:o,pad:s}=e;return{x:()=>d7(t,i,r,o,s)}}};var h7={kernelName:Yu,inputsToSave:["a","b"],gradFunc:(t,n,e)=>{let[i,r]=n,{transposeA:o,transposeB:s}=e;return!o&&!s?{a:()=>Wt(t,r,!1,!0),b:()=>Wt(i,t,!0,!1)}:!o&&s?{a:()=>Wt(t,r,!1,!1),b:()=>Wt(t,i,!0,!1)}:o&&!s?{a:()=>Wt(r,t,!1,!0),b:()=>Wt(i,t,!1,!1)}:{a:()=>Wt(r,t,!0,!0),b:()=>Wt(t,i,!0,!0)}}};var m7={kernelName:Qu,gradFunc:(t,n,e)=>{let{blockShape:i,crops:r}=e;return{x:()=>qy(t,i,r)}}};var f7={kernelName:cX,gradFunc:(t,n,e)=>{let i=e,r=i.inputShape,o=i.shape,s=Array.from(o);for(let l=r.length-1;l>=0;l--)if(r[l]===o[l])s[l]=1;else if(r[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${o}].`);let a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>Se(t,a,!0)}}};var g7={kernelName:Ga,gradFunc:t=>({x:()=>t.clone()})};var y7={kernelName:Jl,gradFunc:t=>({x:()=>We(t)})};var b7={kernelName:ec,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{clipValueMin:r,clipValueMax:o}=e;return{x:()=>_n(ur(Jr(i,r),ys(i,o)),t,We(t))}}};var x7={kernelName:Zu,inputsToSave:["x"],gradFunc:nE.gradFunc};var v7={kernelName:Ju,saveAllInputs:!0,gradFunc:(t,n,e)=>{let i=n.map(l=>l.shape),{axis:r}=e,o=li(r,n[0].shape)[0],s=i.map(l=>l[o]);return gi(t,s,o).map(l=>()=>l)}};var _7={kernelName:ed,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[i,r]=n,{dilations:o,strides:s,pad:a,dataFormat:l}=e;return A(Go(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>By(i.shape,t,r,s,a,l),filter:()=>Qy(i,t,r.shape,s,a,l)}}};var w7={kernelName:td,inputsToSave:["dy","filter"],gradFunc:(t,n,e)=>{let[i,r]=n,{strides:o,pad:s,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>wo(t,r,o,s,a,1,l),filter:()=>Qy(t,i,r.shape,o,s,a,l)}}};function lNe(t,n,e,i,r){let o=t;t.rank===4&&(o=$(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=n;s.rank===4&&(s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),A(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),A(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),A(e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),A(o.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${e[3]}.`),A(s.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${e[4]}).`);let a={x:o,dy:s},l={strides:i,pad:r,filterShape:e};return I.runKernel(Yg,a,l)}var C7=D({conv3DBackpropFilter_:lNe});var T7={kernelName:nd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:i,strides:r,pad:o}=e;A(Go(i),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let[s,a]=n;return{x:()=>Ok(s.shape,t,a,r,o),filter:()=>C7(s,t,a.shape,r,o)}}};var S7={kernelName:tc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(St(Z0(le(e,"float32"))),t)}}};var k7={kernelName:nc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(J0(le(e,"float32")),t)}}};var E7={kernelName:id,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{axis:r,exclusive:o,reverse:s}=e;return{x:()=>{let a=FL([r],i.rank),l=Rk(t,r,o,!s);return a!=null&&(l=yt(l,a)),l}}}};var I7={kernelName:rd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:i,strides:r,pad:o,dimRoundingMode:s}=e,a=i??[1,1];A(Go(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[l,c]=n;return A(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),A(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),A(Bi(r,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${r} and dilations '${a}'.`),gn("depthwiseConv2d",o,s),{x:()=>Hk(l.shape,t,c,r,o,a,s),filter:()=>Uk(l,t,c.shape,r,o,a,s)}}};var D7={kernelName:od,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[i,r]=n,o={x:i,filter:r,dy:t},s={x:i,filter:r,dy:t};return{x:()=>I.runKernel(k0,o,e),filter:()=>I.runKernel(E0,s,e)}}};var A7={kernelName:rc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n,i={dy:t,y:e};return{x:()=>I.runKernel(oy,i)}}};var N7={kernelName:oc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,i=R(oi(St(dt(e))),2/Math.sqrt(Math.PI));return{x:()=>R(t,i)}}};var M7={kernelName:sc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(t,e)}}};var O7={kernelName:sd,inputsToSave:["input"],gradFunc:(t,n)=>{let[e]=n;return{input:()=>$(t,e.shape)}}};var R7={kernelName:ac,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(t,oi(e))}}};var F7={kernelName:lc,gradFunc:t=>({x:()=>We(t)})};var L7={kernelName:cc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=we(t,le(i,"float32")),l=un(e.shape,r);return l.length>0?$(Se(a,l),e.shape):a},b:()=>{let a=R(t,le(e,"float32")),l=un(i.shape,r);l.length>0&&(a=$(Se(a,l),i.shape));let c=dt(i);return St(we(a,le(c,"float32")))}}}};var P7={kernelName:ad,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,n,e)=>{let{varianceEpsilon:i}=e,[r,o,s,a]=n,l=a??Ge(1),c=un(o.shape,r.shape),u=[];if(o.rank===1){for(let _=0;_<r.shape.length-1;++_)u.push(r.shape[_]);u.push(1)}let d=Ce(r,o),p=R(t,l),h=K0(ne(s,Ge(i))),m=R(R(R(h,h),h),Ge(-.5));return{x:()=>o.rank===1?$(R(R(t,Qi($(h,[1,1,1,o.shape[0]]),u)),l),r.shape):$(R(R(t,h),l),r.shape),mean:()=>{let _=R(R(h,Ge(-1)),p);return o.rank===1&&(_=Se(_,c)),$(_,o.shape)},variance:()=>{let _=R(R(m,d),p);return o.rank===1&&(_=Se(_,c)),$(_,o.shape)},scale:()=>{let _=R(d,h),w=R(t,_);return o.rank===1&&(w=Se(w,c)),$(w,o.shape)},offset:()=>{let _=t;return o.rank===1&&(_=Se(_,c)),$(_,o.shape)}}}};var B7={kernelName:ld,inputsToSave:["x","indices"],gradFunc:(t,n,e)=>{let[i,r]=n,{axis:o,batchDims:s}=e,a=li(o,i.shape)[0],l=(c,u,d)=>()=>{let p=c.shape,h=u.size,m=p.slice(0,a),g=m.length,f=p.slice(o,p.length).slice(1),y=f.length,b=$7(0,g),x=$7(g+1,g+1+y),_=V7([m,[h],f]),w=$(d,_),C=$(u,[h]),k=V7([[g],b,x]),N=yt(w,k),P=Gk(N,C,c.shape[a]),F=U0(k);return P=yt(P,F),P};if(s===1){let c=i.shape[0],u=i.split(c,0);return{x:()=>ui(u.map((h,m)=>l(h,r.slice(m,1),t.slice(m,1))())).reshape(i.shape),indices:()=>r}}else return{x:l(i,r,t),indices:()=>r}}};function $7(t,n){let e=[];for(let i=t;i<n;++i)e.push(i);return e}function V7(t){let n=[];for(let e=0;e<t.length;++e)for(let i=0;i<t[e].length;++i)n.push(t[e][i]);return n}var z7={kernelName:uc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n;return{a:()=>We(e),b:()=>We(i)}}};var G7={kernelName:Ua,gradFunc:t=>({x:()=>le(t,"float32")})};var U7={kernelName:dc,gradFunc:t=>({x:()=>We(t)})};var H7={kernelName:pc,gradFunc:t=>({x:()=>We(t)})};var W7={kernelName:hc,gradFunc:t=>({x:()=>We(t)})};var j7={kernelName:cd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{alpha:r}=e,o=Un(i,0);return{x:()=>_n(o,t,R(t,r))}}};var q7={kernelName:fc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,ne(e,1))}}};var X7={kernelName:mc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,le(e,"float32"))}}};var K7={kernelName:dX,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i]=n,{axis:r}=e;return{logits:()=>{let s=oi(i);return Ce(t,R(Se(t,r,!0),s))}}}};function cNe(t,n,e,i=5,r=1,o=1,s=.5){let a={x:t,y:n,dy:e},l={depthRadius:i,bias:r,alpha:o,beta:s};return I.runKernel(dy,a,l)}var Y7=D({localResponseNormalizationBackprop_:cNe});var Q7={kernelName:ud,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i,r]=n,{depthRadius:o,bias:s,alpha:a,beta:l}=e;return{x:()=>Y7(i,r,t,o,s,a,l)}}};function iE(t,n,e,i){return n.rank<e.rank&&(n=$(n,Ka(n.shape,i))),t.rank<e.rank&&(t=$(t,Ka(t.shape,i))),{x:()=>R(t,le(Ir(e,n),t.dtype))}}var xP={kernelName:dd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let i=e,{reductionIndices:r}=i,o=n[0],s=n[1],a=li(r,o.shape),l=iE(t,s,o,a);return{x:()=>l.x()}}};var Z7={kernelName:gc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n;return{a:()=>R(t,le(Jr(e,i),"float32")),b:()=>R(t,le(tm(e,i),"float32"))}}};function uNe(t,n,e,i,r,o,s){let a=S(t,"dy","maxPool3dGrad"),l=S(n,"input","maxPool3dGrad"),c=S(e,"output","maxPool3dGrad"),u=a,d=l,p=c,h=!1;l.rank===4&&(h=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=$(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=$(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),A(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),A(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),A(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),gn("maxPool3dGrad",o,s);let m={dy:u,input:d,output:p},g={filterSize:i,strides:r,pad:o,dimRoundingMode:s},f=I.runKernel(hy,m,g);return h?$(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var J7=D({maxPool3dGrad_:uNe});var e9={kernelName:hd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i,r]=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=e;return{x:()=>J7(t,i,r,o,s,a,l)}}};function dNe(t,n,e,i,r,o,s){let a=S(t,"dy","maxPoolGrad"),l=S(n,"input","maxPoolGrad"),c=S(e,"output","maxPoolGrad");A(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),A(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),A(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),gn("maxPoolGrad",o,s);let u={dy:a,input:l,output:c},d={filterSize:i,strides:r,pad:o,dimRoundingMode:s};return I.runKernel(py,u,d)}var t9=D({maxPoolGrad_:dNe});var n9={kernelName:pd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i,r]=n,{filterSize:o,strides:s,pad:a}=e;return{x:()=>t9(t,i,r,o,s,a)}}};var i9={kernelName:md,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{axis:r}=e,o=li(r,i.shape),a=RL(i.shape,o)[1],l=Ht(a);return{x:()=>{let u=i.shape.slice();o.forEach(h=>{u[h]=1});let d=$(t,u);return we(R(d,Dr(i.shape,"float32")),l)}}}};var r9={kernelName:fd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let i=e,{axis:r}=i,[o,s]=n,a=li(r,o.shape),l=iE(t,s,o,a);return{x:()=>l.x()}}};var o9={kernelName:yc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n;return{a:()=>R(t,le(ys(e,i),"float32")),b:()=>R(t,le(Un(e,i),"float32"))}}};var s9={kernelName:gd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let i=n[0],{paddings:r}=e,o=r.map(s=>s[0]);return{x:()=>Ot(t,o,i.shape)}}};var a9={kernelName:bc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=un(e.shape,r);return a.length>0?$(Se(t,a),e.shape):t},b:()=>{let a=R(t,St(Wc(we(e,i)))),l=un(i.shape,r);return l.length>0?$(Se(a,l),i.shape):a}}}};var l9={kernelName:xc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=R(t,le(i,"float32")),l=un(e.shape,r);return l.length>0?$(Se(a,l),e.shape):a},b:()=>{let a=R(t,le(e,"float32")),l=un(i.shape,r);return l.length>0?$(Se(a,l),i.shape):a}}}};var c9={kernelName:yd,gradFunc:t=>({x:()=>St(t)})};var u9={kernelName:xd,inputsToSave:["indices"],gradFunc:(t,n)=>{let e=n[0];return{indices:()=>wn(e.shape,"float32")}}};var d9={kernelName:bd,gradFunc:t=>({x:()=>We(t)})};var p9={kernelName:vd,saveAllInputs:!0,gradFunc:(t,n,e)=>{let{axis:i}=e;return hr(t,i).map(o=>()=>o)}};var vP={kernelName:_d,inputsToSave:["x"],gradFunc:(t,n,e)=>{let i=n[0],{paddings:r}=e,o=r.map(s=>s[0]);return{x:()=>Ot(t,o,i.shape)}}};var h9={kernelName:vc,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,n)=>{let[e,i,r]=n,o=e,s=i,a=ut(o.shape,s.shape);return{a:()=>{let u=le(s,"float32"),d=R(t,R(u,Zr(o,Ce(u,Ge(1))))),p=un(o.shape,a);return p.length>0&&(d=Se(d,p)),$(d,o.shape)},b:()=>{let u=Un(o,0),d=_n(u,Ti(o),We(o)),p=R(t,R(r,d)),h=un(s.shape,a);return h.length>0&&(p=Se(p,h)),$(p,s.shape)}}}};var m9={kernelName:wd,inputsToSave:["x","alpha"],gradFunc:(t,n)=>{let[e,i]=n,r=Un(e,0);return{x:()=>_n(r,t,R(t,i)),alpha:()=>{let o=_n(r,We(t),R(t,e)),s=un(i.shape,t.shape);return s.length>0&&(o=Se(o,s)),$(o,i.shape)}}}};function pNe(t,n,e){let i=t.shape.slice();i[e]=1;let r=$(n,i),o=z0(t,e,!0,!1),s=z0(t,e,!0,!0),a=R(o,s);return R(r,a)}function hNe(t,n,e){let i=t.shape.length,r=i-e.length,o=T.getAxesPermutation(e,i),s=t;o!=null&&(s=yt(t,o));let a=s.shape.slice(),c=a.splice(i-e.length,e.length).reduce((p,h)=>p*h,1);a.push(c);let u=s.reshape(a),d=pNe(u,n,r);if(d=d.reshape(s.shape),o!=null){let p=T.getUndoAxesPermutation(o);d=yt(d,p)}return d}var f9={kernelName:Cd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{axis:r}=e,o=[];return r==null?o=i.shape.map((s,a)=>a):typeof r=="number"?o=[r]:o=r,{x:()=>hNe(i,t,o)}}};var g9={kernelName:ic,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=we(t,le(i,"float32")),l=un(e.shape,r);return l.length>0?$(Se(a,l),e.shape):a},b:()=>{let a=R(t,le(e,"float32")),l=un(i.shape,r);l.length>0&&(a=$(Se(a,l),i.shape));let c=dt(i);return St(we(a,le(c,"float32")))}}}};var y9={kernelName:_c,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,St(dt(e)))}}};var b9={kernelName:Cc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,i=R(ys(e,6),ta(e));return{x:()=>R(t,le(i,"float32"))}}};var x9={kernelName:wc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(t,le(ta(e),"float32"))}}};var v9={kernelName:Td,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$(t,e.shape)}}};var _9={kernelName:kd,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[i]=n,r={dy:t,images:i};return{images:()=>I.runKernel(vy,r,e)}}};var w9={kernelName:Sd,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[i]=n,r={dy:t,images:i};return{images:()=>I.runKernel(xy,r,e)}}};var C9={kernelName:Ed,gradFunc:(t,n,e)=>{let{dims:i}=e,r=li(i,t.shape);return{x:()=>Wo(t,r)}}};var T9={kernelName:Tc,gradFunc:t=>({x:()=>We(t)})};var S9={kernelName:Sc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>St(we(t,R(Zr(e,1.5),2)))}}};var k9={kernelName:Id,inputsToSave:["condition"],gradFunc:(t,n)=>{let[e]=n;return{condition:()=>le(We(e),"float32"),t:()=>R(t,le(e,t.dtype)),e:()=>R(t,le(Wy(e),t.dtype))}}};var E9={kernelName:kc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=Un(e,Ge(0)),r=Ge(fP),o=Ge(gP),s=R(t,o),a=R(R(t,r),oi(le(e,"float32")));return _n(i,s,a)}}}};var I9={kernelName:Ac,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(t,R(e,Ce(Ge(1),e)))}}};var D9={kernelName:Dc,gradFunc:t=>({x:()=>We(t)})};var A9={kernelName:Ec,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(Zh(le(e,"float32")),t)}}};var N9={kernelName:Ic,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(B0(le(e,"float32")),t)}}};var M9={kernelName:Dd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{begin:r,size:o}=e,s=i.shape,[a,l]=mP(i,r,o),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],s[u]-a[u]-l[u]]);return{x:()=>im(t,c)}}};var O9={kernelName:Od,outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i]=n,{dim:r}=e,o=!0,s=R(t,i);return{logits:()=>Ce(s,R(Se(s,[r],o),i))}}};var R9={kernelName:Nc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(t,gs(e))}}};var _P={kernelName:Nd,gradFunc:(t,n,e)=>{let{blockShape:i,paddings:r}=e;return{x:()=>Vy(t,i,r)}}};var wP={kernelName:Md,gradFunc:(t,n,e)=>{let{axis:i}=e;return{x:()=>vn(t,i)}}};var F9={kernelName:Mc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,R(dn(le(e,"float32")),2))}}};var L9={kernelName:_y,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(t,R(le(e,"float32"),2))}}};var P9={kernelName:Oc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=Ge(2);return{a:()=>R(t,R(r,Ce(e,i))),b:()=>R(t,R(r,Ce(i,e)))}}};var $9={kernelName:Pc,gradFunc:t=>({x:()=>We(t)})};var V9={kernelName:Rc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=t,l=un(e.shape,r);return l.length>0&&(a=Se(a,l)),$(a,e.shape)},b:()=>{let a=t,l=un(i.shape,r);return l.length>0&&(a=Se(a,l)),$(St(a),i.shape)}}}};var B9={kernelName:Ad,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,r=i.shape.slice(),{axis:o}=e;li(o,i.shape).forEach(c=>{r[c]=1});let a=$(t,r),l=R(a,Dr(i.shape,"float32"));return{x:()=>l}}};var z9={kernelName:Fc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>we(t,dt(Zh(e)))}}};var G9={kernelName:Lc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>R(Ce(Ge(1),dt(e)),t)}}};var U9={kernelName:Ha,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{reps:r}=e;return{x:()=>{let s=We(i);if(i.rank===1)for(let a=0;a<r[0];++a)s=ne(s,Ot(t,[a*i.shape[0]],[i.shape[0]]));else if(i.rank===2)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)s=ne(s,Ot(t,[a*i.shape[0],l*i.shape[1]],[i.shape[0],i.shape[1]]));else if(i.rank===3)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)for(let c=0;c<r[2];++c)s=ne(s,Ot(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2]],[i.shape[0],i.shape[1],i.shape[2]]));else if(i.rank===4)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)for(let c=0;c<r[2];++c)for(let u=0;u<r[3];++u)s=ne(s,Ot(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2],u*i.shape[3]],[i.shape[0],i.shape[1],i.shape[2],i.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${i.rank} tensors yet.`);return s}}}};var H9={kernelName:Wa,gradFunc:(t,n,e)=>{let i=e,{perm:r}=i,o=U0(r);return{x:()=>yt(t,o)}}};var W9={kernelName:Rd,gradFunc:(t,n,e)=>{let i=e,{axis:r}=i;return{value:()=>ui(t,r)}}};var j9={kernelName:Fd,inputsToSave:["segmentIds"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>mNe(t,e)}}};function mNe(t,n){let e=dr(n,We(n)),i=Jh(t,e),r=Jr(n,Ge(0,"int32")),o=i.rank-r.rank;for(let a=0;a<o;++a)r=Zn(r,a+1);r=ur(r,Dr(i.shape,"bool"));let s=We(i);return _n(r,i,s)}var q9={kernelName:Ld,gradFunc:t=>({x:()=>We(t)})};var fNe=[nE,ZY,JY,e7,t7,n7,i7,r7,o7,s7,a7,l7,u7,p7,h7,m7,f7,g7,y7,b7,x7,v7,w7,_7,T7,S7,k7,E7,I7,D7,g9,A7,N7,M7,O7,R7,L7,F7,P7,B7,z7,G7,U7,H7,W7,j7,q7,X7,K7,Q7,xP,xP,Z7,e9,n9,i9,r9,o9,s9,a9,l9,c9,u9,d9,p9,vP,vP,h9,m9,f9,y9,b9,x9,v9,_9,w9,C9,T9,S9,k9,E9,I9,D9,A9,N9,M9,O9,R9,_P,_P,wP,wP,F9,P9,L9,$9,V9,B9,z9,G9,U9,H9,W9,j9,q9];for(let t of fNe)mX(t);L().prototype.abs=function(){return this.throwIfDisposed(),ri(this)};L().prototype.acos=function(){return this.throwIfDisposed(),hL(this)};L().prototype.acosh=function(){return this.throwIfDisposed(),mL(this)};L().prototype.add=function(t){return this.throwIfDisposed(),ne(this,t)};L().prototype.all=function(t,n){return this.throwIfDisposed(),F0(this,t,n)};L().prototype.any=function(t,n){return this.throwIfDisposed(),Py(this,t,n)};L().prototype.argMax=function(t){return this.throwIfDisposed(),Js(this,t)};L().prototype.argMin=function(t){return this.throwIfDisposed(),bK(this,t)};L().prototype.asScalar=function(){return this.throwIfDisposed(),A(this.size===1,()=>"The array must have only 1 element."),$(this,[])};L().prototype.asType=function(t){return this.throwIfDisposed(),le(this,t)};L().prototype.as1D=function(){return this.throwIfDisposed(),$(this,[this.size])};L().prototype.as2D=function(t,n){return this.throwIfDisposed(),$(this,[t,n])};L().prototype.as3D=function(t,n,e){return this.throwIfDisposed(),$(this,[t,n,e])};L().prototype.as4D=function(t,n,e,i){return this.throwIfDisposed(),$(this,[t,n,e,i])};L().prototype.as5D=function(t,n,e,i,r){return this.throwIfDisposed(),$(this,[t,n,e,i,r])};L().prototype.asin=function(){return this.throwIfDisposed(),fL(this)};L().prototype.asinh=function(){return this.throwIfDisposed(),gL(this)};L().prototype.atan=function(){return this.throwIfDisposed(),yL(this)};L().prototype.atan2=function(t){return this.throwIfDisposed(),xK(this,t)};L().prototype.atanh=function(){return this.throwIfDisposed(),bL(this)};L().prototype.avgPool=function(t,n,e,i){return this.throwIfDisposed(),Yh(this,t,n,e,i)};L().prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),Vy(this,t,n)};L().prototype.batchNorm=function(t,n,e,i,r){return this.throwIfDisposed(),Ud(this,t,n,e,i,r)};L().prototype.broadcastTo=function(t){return this.throwIfDisposed(),zc(this,t)};L().prototype.cast=function(t){return this.throwIfDisposed(),le(this,t)};L().prototype.ceil=function(){return this.throwIfDisposed(),kL(this)};L().prototype.clipByValue=function(t,n){return this.throwIfDisposed(),Qn(this,t,n)};L().prototype.concat=function(t,n){return this.throwIfDisposed(),t instanceof Yt&&(t=[t]),vn([this,...t],n)};L().prototype.conv1d=function(t,n,e,i,r,o){return this.throwIfDisposed(),$0(this,t,n,e,i,r,o)};L().prototype.conv2dTranspose=function(t,n,e,i,r){return this.throwIfDisposed(),V0(this,t,n,e,i,r)};L().prototype.conv2d=function(t,n,e,i,r,o){return this.throwIfDisposed(),wo(this,t,n,e,i,r,o)};L().prototype.cos=function(){return this.throwIfDisposed(),Zh(this)};L().prototype.cosh=function(){return this.throwIfDisposed(),B0(this)};L().prototype.cumprod=function(t,n,e){return this.throwIfDisposed(),z0(this,t,n,e)};L().prototype.cumsum=function(t,n,e){return this.throwIfDisposed(),Rk(this,t,n,e)};L().prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),TK(this,t,n)};L().prototype.depthwiseConv2d=function(t,n,e,i,r,o){return this.throwIfDisposed(),Uc(this,t,n,e,i,r,o)};L().prototype.dilation2d=function(t,n,e,i,r){return this.throwIfDisposed(),SK(this,t,n,e,i,r)};L().prototype.divNoNan=function(t){return this.throwIfDisposed(),EK(this,t)};L().prototype.div=function(t){return this.throwIfDisposed(),we(this,t)};L().prototype.dot=function(t){return this.throwIfDisposed(),IK(this,t)};L().prototype.elu=function(){return this.throwIfDisposed(),Hc(this)};L().prototype.equal=function(t){return this.throwIfDisposed(),Ir(this,t)};L().prototype.erf=function(){return this.throwIfDisposed(),G0(this)};L().prototype.euclideanNorm=function(t,n){return this.throwIfDisposed(),NK(this,t,n)};L().prototype.exp=function(){return this.throwIfDisposed(),oi(this)};L().prototype.expandDims=function(t){return this.throwIfDisposed(),Zn(this,t)};L().prototype.expm1=function(){return this.throwIfDisposed(),PL(this)};L().prototype.fft=function(){return this.throwIfDisposed(),n_(this)};L().prototype.flatten=function(){return this.throwIfDisposed(),$(this,[this.size])};L().prototype.floor=function(){return this.throwIfDisposed(),Wc(this)};L().prototype.floorDiv=function(t){return this.throwIfDisposed(),Mk(this,t)};L().prototype.gather=function(t,n,e){return this.throwIfDisposed(),Jh(this,t,n,e)};L().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Jr(this,t)};L().prototype.greater=function(t){return this.throwIfDisposed(),Un(this,t)};L().prototype.ifft=function(){return this.throwIfDisposed(),Yy(this)};L().prototype.irfft=function(){return this.throwIfDisposed(),ZL(this)};L().prototype.isFinite=function(){return this.throwIfDisposed(),$L(this)};L().prototype.isInf=function(){return this.throwIfDisposed(),VL(this)};L().prototype.isNaN=function(){return this.throwIfDisposed(),BL(this)};L().prototype.leakyRelu=function(t){return this.throwIfDisposed(),em(this,t)};L().prototype.lessEqual=function(t){return this.throwIfDisposed(),ys(this,t)};L().prototype.less=function(t){return this.throwIfDisposed(),tm(this,t)};L().prototype.localResponseNormalization=function(t,n,e,i){return this.throwIfDisposed(),MK(this,t,n,e,i)};L().prototype.logSigmoid=function(){return this.throwIfDisposed(),zL(this)};L().prototype.logSoftmax=function(t){return this.throwIfDisposed(),W0(this,t)};L().prototype.logSumExp=function(t,n){return this.throwIfDisposed(),j0(this,t,n)};L().prototype.log=function(){return this.throwIfDisposed(),Ti(this)};L().prototype.log1p=function(){return this.throwIfDisposed(),H0(this)};L().prototype.logicalAnd=function(t){return this.throwIfDisposed(),ur(this,t)};L().prototype.logicalNot=function(){return this.throwIfDisposed(),Wy(this)};L().prototype.logicalOr=function(t){return this.throwIfDisposed(),Lk(this,t)};L().prototype.logicalXor=function(t){return this.throwIfDisposed(),OK(this,t)};L().prototype.matMul=function(t,n,e){return this.throwIfDisposed(),Wt(this,t,n,e)};L().prototype.maxPool=function(t,n,e,i){return this.throwIfDisposed(),nm(this,t,n,e,i)};L().prototype.max=function(t,n){return this.throwIfDisposed(),zi(this,t,n)};L().prototype.maximum=function(t){return this.throwIfDisposed(),dr(this,t)};L().prototype.mean=function(t,n){return this.throwIfDisposed(),Kt(this,t,n)};L().prototype.min=function(t,n){return this.throwIfDisposed(),Hd(this,t,n)};L().prototype.minimum=function(t){return this.throwIfDisposed(),Ho(this,t)};L().prototype.mirrorPad=function(t,n){return this.throwIfDisposed(),RK(this,t,n)};L().prototype.mod=function(t){return this.throwIfDisposed(),FK(this,t)};L().prototype.mul=function(t){return this.throwIfDisposed(),R(this,t)};L().prototype.neg=function(){return this.throwIfDisposed(),St(this)};L().prototype.norm=function(t,n,e){return this.throwIfDisposed(),Wd(this,t,n,e)};L().prototype.notEqual=function(t){return this.throwIfDisposed(),jd(this,t)};L().prototype.oneHot=function(t,n=1,e=0){return this.throwIfDisposed(),jc(this,t,n,e)};L().prototype.onesLike=function(){return this.throwIfDisposed(),Si(this)};L().prototype.pad=function(t,n){return this.throwIfDisposed(),im(this,t,n)};L().prototype.pool=function(t,n,e,i,r,o){return this.throwIfDisposed(),LK(this,t,n,e,i,r,o)};L().prototype.pow=function(t){return this.throwIfDisposed(),Zr(this,t)};L().prototype.prelu=function(t){return this.throwIfDisposed(),rm(this,t)};L().prototype.prod=function(t,n){return this.throwIfDisposed(),PK(this,t,n)};L().prototype.reciprocal=function(){return this.throwIfDisposed(),YL(this)};L().prototype.relu=function(){return this.throwIfDisposed(),So(this)};L().prototype.relu6=function(){return this.throwIfDisposed(),Bk(this)};L().prototype.reshapeAs=function(t){return this.throwIfDisposed(),$(this,t.shape)};L().prototype.reshape=function(t){return this.throwIfDisposed(),$(this,t)};L().prototype.resizeBilinear=function(t,n,e){return this.throwIfDisposed(),Xk(this,t,n,e)};L().prototype.resizeNearestNeighbor=function(t,n,e){return this.throwIfDisposed(),Kk(this,t,n,e)};L().prototype.reverse=function(t){return this.throwIfDisposed(),Wo(this,t)};L().prototype.rfft=function(){return this.throwIfDisposed(),JL(this)};L().prototype.round=function(){return this.throwIfDisposed(),X0(this)};L().prototype.rsqrt=function(){return this.throwIfDisposed(),K0(this)};L().prototype.selu=function(){return this.throwIfDisposed(),Y0(this)};L().prototype.separableConv2d=function(t,n,e,i,r,o){return this.throwIfDisposed(),Q0(this,t,n,e,i,r,o)};L().prototype.sigmoid=function(){return this.throwIfDisposed(),gs(this)};L().prototype.sign=function(){return this.throwIfDisposed(),QL(this)};L().prototype.sin=function(){return this.throwIfDisposed(),Z0(this)};L().prototype.sinh=function(){return this.throwIfDisposed(),J0(this)};L().prototype.slice=function(t,n){return this.throwIfDisposed(),Ot(this,t,n)};L().prototype.softmax=function(t){return this.throwIfDisposed(),am(this,t)};L().prototype.softplus=function(){return this.throwIfDisposed(),Ya(this)};L().prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),qy(this,t,n)};L().prototype.split=function(t,n){return this.throwIfDisposed(),gi(this,t,n)};L().prototype.sqrt=function(){return this.throwIfDisposed(),dn(this)};L().prototype.square=function(){return this.throwIfDisposed(),dt(this)};L().prototype.squaredDifference=function(t){return this.throwIfDisposed(),eY(this,t)};L().prototype.squeeze=function(t){return this.throwIfDisposed(),ko(this,t)};L().prototype.stack=function(t,n){this.throwIfDisposed();let e=t instanceof Yt?[this,t]:[this,...t];return ui(e,n)};L().prototype.step=function(t){return this.throwIfDisposed(),ta(this,t)};L().prototype.stridedSlice=function(t,n,e,i,r,o,s,a){return this.throwIfDisposed(),eP(this,t,n,e,i,r,o,s,a)};L().prototype.sub=function(t){return this.throwIfDisposed(),Ce(this,t)};L().prototype.sum=function(t,n){return this.throwIfDisposed(),Se(this,t,n)};L().prototype.tan=function(){return this.throwIfDisposed(),tP(this)};L().prototype.tanh=function(){return this.throwIfDisposed(),Qh(this)};L().prototype.tile=function(t){return this.throwIfDisposed(),Qi(this,t)};L().prototype.toBool=function(){return this.throwIfDisposed(),le(this,"bool")};L().prototype.toFloat=function(){return this.throwIfDisposed(),le(this,"float32")};L().prototype.toInt=function(){return this.throwIfDisposed(),le(this,"int32")};L().prototype.topk=function(t,n){return this.throwIfDisposed(),nY(this,t,n)};L().prototype.transpose=function(t){return this.throwIfDisposed(),yt(this,t)};L().prototype.unique=function(t){return this.throwIfDisposed(),iY(this,t)};L().prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),Gk(this,t,n)};L().prototype.unstack=function(t){return this.throwIfDisposed(),hr(this,t)};L().prototype.where=function(t,n){return this.throwIfDisposed(),_n(t,this,n)};L().prototype.zerosLike=function(){return this.throwIfDisposed(),We(this)};var qo=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},Ar=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},B=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},et=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},rE=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}};var a_=class{constructor(n){this.maxEntries=n||100,this.cache=new Map}get(n){let e;return this.cache.has(n)&&(e=this.cache.get(n),this.cache.delete(n),this.cache.set(n,e)),e}put(n,e){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxEntries){let i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(n,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(n){if(n<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${n}.`);if(this.maxEntries>n)for(let e=0;e<this.maxEntries-n;e++){let i=this.cache.keys().next().value;this.cache.delete(i)}this.maxEntries=n}};function _s(t,n){if(Array.isArray(t)){let e=[];for(let i=0;i<n;i++)e=e.concat(t);return e}else{let e=new Array(n);return e.fill(t),e}}function Xo(t,n){if(!t)throw new rE(n)}function TP(t,n){let e=0;for(let i of t)i===n&&e++;return e}function Ei(t){return t.length===1?t[0]:t}function Qt(t){return Array.isArray(t)?t:[t]}function ws(t){let e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function Kc(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(n,e)=>e.toUpperCase())}var vs={};function rb(t){if(t==null)return null;let n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function CP(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(n=>CP(n));else{let n=Object.keys(t);for(let e of n){let i=t[e];i!=null&&typeof i=="object"&&(!Array.isArray(i)&&i.type==="ndarray"&&typeof i.value=="number"?t[e]=i.value:CP(i))}}}function Qa(t,n={},e={},i="object",r=!1){if(typeof t=="string"){let o=t,s;if(o in e)s=e[o];else if(o in vs)s=vs[o];else if(s=n[o],s==null)throw new B(`Unknown ${i}: ${t}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let o=t;if(o.className==null||o.config==null)throw new B(`${i}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);let s=o.className,a,l;if(s in e?[a,l]=e[s]:s in vs?[a,l]=vs.className:s in n&&([a,l]=n[s]),a==null)throw new B(`Unknown ${i}: ${s}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let c={};for(let h of Object.keys(vs))c[h]=vs[h];for(let h of Object.keys(e))c[h]=e[h];let u=o.config;u.customObjects=c;let d=Object.assign({},vs);for(let h of Object.keys(e))vs[h]=e[h];CP(o.config);let p=l(a,o.config,e,r);return vs=Object.assign({},d),p}else{let c=Object.assign({},vs);for(let d of Object.keys(e))vs[d]=e[d];let u=new a(o.config);return vs=Object.assign({},c),u}}}function gNe(t,n){return t<n?-1:t>n?1:0}function l_(t,n){return-1*gNe(t,n)}function Cs(t){if(t==null)return t;let n=[];for(let e of t)n.indexOf(e)===-1&&n.push(e);return n}function X9(t){if(t==null)throw new B(`Invalid value in obj: ${JSON.stringify(t)}`);for(let n in t)if(t.hasOwnProperty(n))return!1;return!0}function Za(t,n,e){if(e!=null&&t.indexOf(e)<0)throw new B(`${e} is not a valid ${n}.  Valid values are ${t} or null/undefined.`)}function oE(t,n,e=0,i=1/0){return Xo(e>=0),Xo(i>=e),Array.isArray(t)&&t.length>=e&&t.length<=i&&t.every(r=>typeof r===n)}function Wn(t,n){Array.isArray(t)?(v.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((e,i)=>Wn(e,`element ${i+1} of ${n}`))):v.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${K9(t)}.`)}function K9(t){return t===null?"null":Array.isArray(t)?"["+t.map(n=>K9(n)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function Y9(t,n,e){let i=e!=null?e():v.now(),r;return(...s)=>{let a=e!=null?e():v.now();return a-i<n||(i=a,r=t(...s)),r}}function sE(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}var yNe=0;function lE(){return yNe++}var aE={};function Xd(t=""){return t in aE||(aE[t]=0),aE[t]+=1,t+aE[t].toString()}var Q9=["channelsFirst","channelsLast"],Z9=["nearest","bilinear"],J9=["valid","same","causal"],eQ=["max","avg"],tQ=["sum","mul","concat","ave"];var ob=new Map;function In(t){Za(Q9,"DataFormat",t)}function iQ(t){Za(Z9,"InterpolationFormat",t)}function Nr(t){Za(J9,"PaddingMode",t)}function SP(t){Za(eQ,"PoolMode",t)}var c_=[],nQ="/";function ia(t,n){c_.push(t);try{let e=n();return c_.pop(),e}catch(e){throw c_.pop(),e}}function bNe(){return c_.length===0?"":c_.join(nQ)+nQ}function cE(t){if(!rQ(t))throw new Error("Not a valid tensor name: '"+t+"'");return bNe()+t}function uE(t){if(!rQ(t))throw new Error("Not a valid tensor name: '"+t+"'");ob.has(t)||ob.set(t,0);let n=ob.get(t);if(ob.set(t,ob.get(t)+1),n>0){let e=`${t}_${n}`;return ob.set(e,1),e}else return t}var xNe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function rQ(t){return!!t.match(xNe)}function oQ(t){return t===parseInt(t.toString(),10)}function Ts(t,n,e){n==null&&(n=0),e==null&&(e=t.length);let i=1;for(let r=n;r<e;++r)i*=t[r];return i}function hm(t){if(t.length===0)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){let i=t[e];i<n&&(n=i)}return n}function ra(t){if(t.length===0)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){let i=t[e];i>n&&(n=i)}return n}function Mr(t,n){if(n<t)throw new B(`end (${n}) < begin (${t}) is forbidden.`);let e=[];for(let i=t;i<n;++i)e.push(i);return e}var kP;function si(){return kP==null&&(kP=kk().epsilon()),kP}function Or(){return"channelsLast"}function mr(t,n){return le(t,n)}function Qc(t,n=-1){let e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),$(t,e)}function sQ(t,n){return H(()=>{if(t.shape.length!==2)throw new B(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let e=Qc(t,1);return pE(e,[1,n,1])})}function aQ(t){let n=[Ts(t.shape)];return $(t,n)}function lQ(t){if(t.rank<=1)throw new B(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let n=[t.shape[0],Ts(t.shape,1)];return $(t,n)}function Yc(t,n,e){return H(()=>{switch(t.rank){case 1:return e_(t,n,e);case 2:return zk(t,[n,0],[e,t.shape[1]]);case 3:return t_(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return Ky(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Ot(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Ot(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new B(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function EP(t,n,e){return H(()=>{switch(t.rank){case 1:return e_(t,n,e);case 2:return zk(t,[0,n],[t.shape[0],e]);case 3:return t_(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return Ky(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new B(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function u_(t,n,e,i){return H(()=>{switch(t.rank){case 1:return e_(t,n,e);case 2:switch(i){case 1:return Yc(t,n,e);case 2:return EP(t,n,e);default:throw new B(`The axis is not within the rank of the tensor ${i}`)}case 3:switch(i){case 1:return Yc(t,n,e);case 2:return t_(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return EP(t,n,e);default:throw new B(`The axis is not within the rank of the tensor ${i}`)}case 4:switch(i){case 1:return Yc(t,n,e);case 2:return Ky(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return Ky(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return EP(t,n,e);default:throw new B(`The axis is not within the rank of the tensor ${i}`)}default:throw new B(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function sb(t,n=-1){let e;return n<0&&(e=t[0].rank,e!==0?n=e:n=0),n===t[0].rank&&(n=-1),vn(t,n)}function DP(t,n){switch(t.rank){case 1:return EL([t,n]);case 2:return IL([t,n],0);case 3:return DL([t,n],0);case 4:return AL([t,n],0);default:throw new B(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function pE(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new B(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return Qi(t,n)}function ab(t,n=0,e=1,i,r){return Vk(t,n,e,i,r)}function Ss(t,n,e,i){if(t.rank<2||n.rank<2)throw new et(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3){let r=t.shape.slice(-1)[0],o=n.shape.slice(-2)[0];if(r!==o)throw new et(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`)}if(t.rank===2&&n.rank===2)return pm.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?IP(t.rank,i,Or()):null,activation:e});{let r=t.shape.slice(),o=r.pop();t=$(t,[-1,o]);let s=n.shape.slice(),a=s.pop(),l=s.pop(),c=[...s,a],u=Array.from({length:n.rank},(m,g)=>g===0?n.rank-2:g<=n.rank-2?g-1:g);n=$(yt(n,u),[l,-1]);let d=[...r,...c];return $(pm.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?IP(t.rank,i,Or()):null,activation:e}),d)}}function hE(t,n,e){return H(()=>(Array.isArray(n)?n=Cn(n,"int32"):n=le(n,"int32"),Jh(t,n,e)))}function mm(t){return R(t,t)}function IP(t,n,e){let i=n.shape;if(n.rank!==1&&n.rank!==t)throw new B(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(t===5){if(e==="channelsFirst")return i.length===1?$(n,[1,i[0],1,1,1]):$(n,[1,i[3],i[0],i[1],i[2]]);if(e==="channelsLast")return i.length===1?$(n,[1,1,1,1,i[0]]):$(n,[1].concat(i))}else if(t===4){if(e==="channelsFirst")return i.length===1?$(n,[1,i[0],1,1]):$(n,[1,i[2],i[0],i[1]]);if(e==="channelsLast")return i.length===1?$(n,[1,1,1,i[0]]):$(n,[1].concat(i))}else if(t===3){if(e==="channelsFirst")return i.length===1?$(n,[1,i[0],1]):$(n,[1,i[1],i[0]]);if(e==="channelsLast")return i.length===1?$(n,[1,1,i[0]]):$(n,[1].concat(i))}else if(t<3)return n;throw new B(`Unsupported input rank by biasAdd: ${n.rank}`)}function Rr(t,n,e){return H(()=>(e==null&&(e=Or()),In(e),ne(t,IP(t.rank,n,e))))}function cQ(t,n=1){if(n!==1)throw new et(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return Hc(t)}function uQ(t){return H(()=>we(t,ne(ri(t),1)))}function mE(t,n,e,i){return H(()=>sY(t,n,e,i))}function dQ(t){return H(()=>{let n=ne(.5,R(.2,t));return Qn(n,0,1)})}function Kd(t,n,e=!1){return e?t():n()}var pQ=["fanIn","fanOut","fanAvg"],hQ=["normal","uniform","truncatedNormal"];function vNe(t){Za(pQ,"FanMode",t)}function _Ne(t){Za(hQ,"Distribution",t)}var Fr=class extends ie.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},gQ=(()=>{class t extends Fr{apply(e,i){return wn(e,i)}}return t.className="Zeros",t})();ie.registerClass(gQ);var fE=(()=>{class t extends Fr{apply(e,i){return Dr(e,i)}}return t.className="Ones",t})();ie.registerClass(fE);var yQ=(()=>{class t extends Fr{constructor(e){if(super(),typeof e!="object")throw new B(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new B(`config must have value set but got ${e}`);this.value=e.value}apply(e,i){return H(()=>R(Ge(this.value),Dr(e,i)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();ie.registerClass(yQ);var bQ=(()=>{class t extends Fr{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,i){return ea(e,this.minval,this.maxval,i,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();ie.registerClass(bQ);var xQ=(()=>{class t extends Fr{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if(i=i||"float32",i!=="float32"&&i!=="int32")throw new et(`randomNormal does not support dType ${i}.`);return ab(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();ie.registerClass(xQ);var vQ=(()=>{class t extends Fr{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if(i=i||"float32",i!=="float32"&&i!=="int32")throw new et(`truncatedNormal does not support dType ${i}.`);return i_(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();ie.registerClass(vQ);var _Q=(()=>{class t extends Fr{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,i){return H(()=>{if(e.length!==2||e[0]!==e[1])throw new B("Identity matrix initializer can only be used for 2D square matrices.");return R(this.gain,Gy(e[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();ie.registerClass(_Q);function wNe(t,n="channelsLast"){let e,i;if(In(n),t.length===2)e=t[0],i=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(n==="channelsFirst"){let r=Ts(t,2);e=t[1]*r,i=t[0]*r}else if(n==="channelsLast"){let r=Ts(t,0,t.length-2);e=t[t.length-2]*r,i=t[t.length-1]*r}}else{let r=Ts(t);e=Math.sqrt(r),i=Math.sqrt(r)}return[e,i]}var Io=(()=>{class t extends Fr{constructor(e){if(super(),e.scale<0)throw new B(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,vNe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,_Ne(this.distribution),this.seed=e.seed}apply(e,i){let r=wNe(e),o=r[0],s=r[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,o):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(o+s)/2),this.distribution==="normal"){let l=Math.sqrt(a);if(i=i||"float32",i!=="float32"&&i!=="int32")throw new et(`${this.getClassName()} does not support dType ${i}.`);return i_(e,0,l,i,this.seed)}else{let l=Math.sqrt(3*a);return ea(e,-l,l,i,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();ie.registerClass(Io);var AP=(()=>{class t extends Io{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Io.className}}return t.className="GlorotUniform",t})();ie.registerClass(AP);var NP=(()=>{class t extends Io{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Io.className}}return t.className="GlorotNormal",t})();ie.registerClass(NP);var MP=(()=>{class t extends Io{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Io.className}}return t.className="HeNormal",t})();ie.registerClass(MP);var OP=(()=>{class t extends Io{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Io.className}}return t.className="HeUniform",t})();ie.registerClass(OP);var RP=(()=>{class t extends Io{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return Io.className}}return t.className="LeCunNormal",t})();ie.registerClass(RP);var FP=(()=>{class t extends Io{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return Io.className}}return t.className="LeCunUniform",t})();ie.registerClass(FP);var wQ=(()=>{class t extends Fr{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,i){return H(()=>{if(e.length<2)throw new et("Shape must be at least 2D.");if(i!=="int32"&&i!=="float32"&&i!==void 0)throw new TypeError(`Unsupported data type ${i}.`);i=i;let r=v.sizeFromShape(e.slice(0,-1)),o=e[e.length-1],s=r*o;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);let a=[Math.max(o,r),Math.min(o,r)],l=ab(a,0,1,i,this.seed),c=DY.qr(l,!1),u=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(o,r)*Math.min(o,r)],[Math.min(o,r)+1]);return u=R(u,p.sign()),r<o&&(u=u.transpose()),R(Ge(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();ie.registerClass(wQ);var mQ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function fQ(t,n={}){return Qa(t,ie.SerializationMap.getMap().classNameMap,n,"initializer")}function yn(t){return rb(t)}function on(t){if(typeof t=="string"){let n=t in mQ?mQ[t]:t;if(n==="GlorotNormal")return new NP;if(n==="GlorotUniform")return new AP;if(n==="HeNormal")return new MP;if(n==="HeUniform")return new OP;if(n==="LeCunNormal")return new RP;if(n==="LeCunUniform")return new FP;{let e={};return e.className=n,e.config={},fQ(e)}}else return t instanceof Fr?t:fQ(t)}function gE(t){return Array.isArray(t)&&Array.isArray(t[0])}function lb(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function je(t){let n;if(Array.isArray(t)){if(t.length!==1)throw new B(`Expected Tensor length to be 1; got ${t.length}`);n=t[0]}else n=t;return n}function mt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new B(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function cb(t){let n=0;for(let e of t)e.shape.length===0?n+=1:n+=e.shape.reduce((i,r)=>i*r);return n}var TQ="Variable",d_=class{constructor(n,e="float32",i=TQ,r=!0,o=null){this.dtype=e??"float32",this.shape=n.shape,this.id=lE(),i=i??TQ,this.originalName=cE(i),this.name=uE(this.originalName),this.trainable_=r,this.constraint=o,this.val=nP(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(n){return this.assertNotDisposed(),TNe(this.val,n),this.val.id!==n.id&&(this.val.assign(n),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(n){this.trainable_=n,this.val.trainable=n}};function TNe(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}function p_(t){return t.map(n=>n.read())}function ub(t){t.forEach(n=>{n[0].write(n[1])})}var pn=class{constructor(n){this.dtype=n.dtype,this.shape=n.shape,n.shape!=null?this.ndim=n.shape.length:this.ndim=n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}},fr=class{constructor(n,e,i,r,o,s,a){this.dtype=n,this.shape=e,this.sourceLayer=i,this.inputs=r,this.callArgs=o,this.outputTensorIndex=a,this.id=lE(),s!=null&&(this.originalName=cE(s),this.name=uE(this.originalName)),this.rank=e.length}},SNe=0,Zc=class{constructor(n,e){this.callArgs=e,this.id=SNe++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(let i of n.inboundLayers)i?.outboundNodes.push(this);n.outboundLayer.inboundNodes.push(this)}getConfig(){let n=[];for(let e of this.inboundLayers)e!=null?n.push(e.name):n.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},kNe=0,Je=class extends ie.Serializable{constructor(n={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=kNe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=n.name;if(!e){let i=this.getClassName();e=ws(i)+"_"+Xd(i)}if(this.name=e,this.trainable_=n.trainable==null?!0:n.trainable,n.inputShape!=null||n.batchInputShape!=null){let i;if(n.batchInputShape!=null)i=n.batchInputShape;else if(n.inputShape!=null){let o=null;n.batchSize!=null&&(o=n.batchSize),i=[o].concat(n.inputShape)}this.batchInputShape=i;let r=n.dtype;r==null&&(r=n.inputDType),r==null&&(r="float32"),this.dtype=r}n.weights!=null?this.initialWeights=n.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(n,e){return n.name+"_ib-"+e.toString()}getNodeAtIndex(n,e){if(this.inboundNodes.length===0)throw new Ar(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=n)throw new B(`Asked to get ${e} at node ${n}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[n]}getInputAt(n){return Ei(this.getNodeAtIndex(n,"input").inputTensors)}getOutputAt(n){return Ei(this.getNodeAtIndex(n,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new qo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new qo(`Layer ${this.name} is not connected, no input to return.`);return Ei(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new qo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new qo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Ei(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(n=>n())}get updates(){return this._updates}get built(){return this._built}set built(n){this._built=n}get trainable(){return this.trainable_}set trainable(n){this._trainableWeights.forEach(e=>e.trainable=n),this.trainable_=n}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(n=>n.trainable):[]}set trainableWeights(n){this._trainableWeights=n}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(n=>!n.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(n){this._nonTrainableWeights=n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(n){let e=Qt(n);if(this.inputSpec==null||this.inputSpec.length===0)return;let i=Qt(this.inputSpec);if(e.length!==i.length)throw new B(`Layer ${this.name} expects ${i.length} inputs, but it received ${e.length} input tensors. Input received: ${n}`);for(let r=0;r<e.length;r++){let o=e[r],s=i[r];if(s==null)continue;let a=o.rank;if(s.ndim!=null&&a!==s.ndim)throw new B(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new B(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new B(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&o.dtype!==s.dtype)throw new B(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${o.dtype}.`);if(s.axes){let l=o.shape;for(let c in s.axes){let u=Number(c),d=s.axes[c],p=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(p)===-1)throw new B(`Input ${r} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){let c=s.shape[l],u=o.shape[l];if(c!=null&&u!=null&&c!==u)throw new B(`Input ${r} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${o.shape}.`)}}}call(n,e){return n}invokeCallHook(n,e){this._callHook!=null&&this._callHook(n,e)}setCallHook(n){this._callHook=n}clearCallHook(){this._callHook=null}apply(n,e){e=e||{},this.assertNotDisposed();let i=Qt(n),r=DNe(n),o=ANe(n);if(r===o)throw new B("Arguments to apply() must be all SymbolicTensors or all Tensors");return ia(this.name,()=>{if(!this.built){this.assertInputCompatibility(n);let s=[];for(let a of Qt(n))s.push(a.shape);this.build(Ei(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(n),o){let s=this.call(n,e);this.supportsMasking&&this.setMaskMetadata(n,s);let a=Qt(s),l=[];for(let c of a)i.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=Ei(l),this.activityRegularizer!=null)throw new et("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{let s=ENe(n),a=this.computeOutputShape(s),l,c=INe(n);if(this.warnOnIncompatibleInputShape(Array.isArray(n)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new fr(c,u,this,Qt(n),e,this.name,d)):l=new fr(c,a,this,Qt(n),e,this.name),this.addInboundNode(n,l,null,null,s,a,e),this._refCount++,this.activityRegularizer!=null)throw new et("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(n){if(this.batchInputShape!=null)if(n.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(n)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((i,r)=>{i!=null&&n[r]!=null&&n[r]!==i&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(n)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new qo(`The layer ${this.name} has never been called and thus has no defined output shape.`);let n=[];for(let e of this.inboundNodes){let i=JSON.stringify(e.outputShapes);n.indexOf(i)===-1&&n.push(i)}if(n.length===1){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&e.length===1?e[0]:e}else throw new qo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Ar(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return cb(this.weights)}build(n){this.built=!0}getWeights(n=!1){return p_(n?this.trainableWeights:this.weights)}setWeights(n){H(()=>{let e=this.weights;if(e.length!==n.length)throw new B(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${n.length}, but the layer was expecting ${e.length} weights. Provided weights: ${n}...`);if(e.length===0)return;let i=[],r=p_(e);for(let o=0;o<r.length;++o){let s=r[o],a=e[o],l=n[o];if(!v.arraysEqual(s.shape,l.shape))throw new B(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);i.push([a,l])}ub(i)})}addWeight(n,e,i,r,o,s,a,l){if(this._addedWeightNames.indexOf(n)!==-1)throw new B(`Duplicate weight name ${n} for layer ${this.name}`);this._addedWeightNames.push(n),i==null&&(i="float32"),this.fastWeightInitDuringBuild&&(r=l!=null?l():on("zeros"));let c=r.apply(e,i),u=new d_(c,i,n,s,a);return c.dispose(),o!=null&&this.addLoss(()=>o.apply(u.read())),s==null&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(n){this.fastWeightInitDuringBuild=n}addLoss(n){n==null||Array.isArray(n)&&n.length===0||(n=Qt(n),this._losses!==void 0&&this._losses!==null&&this.losses.push(...n))}computeOutputShape(n){return n}computeMask(n,e){if(!this.supportsMasking){if(e!=null)if(Array.isArray(e))e.forEach(i=>{if(i!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return e}setMaskMetadata(n,e,i){if(!this.supportsMasking)return;let r=this.computeMask(n,i),o=Qt(e),s=Qt(r);if(o.length!==s.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let a=0;a<o.length;a++)o[a].kerasMask=s[a]}addInboundNode(n,e,i,r,o,s,a=null){let l=Qt(n);e=Qt(e),i=Qt(i),r=Qt(r),o=lb(o),s=lb(s);let c=[],u=[],d=[];for(let p of l)c.push(p.sourceLayer),u.push(p.nodeIndex),d.push(p.tensorIndex);new Zc({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:e,inputMasks:i,outputMasks:r,inputShapes:o,outputShapes:s},a);for(let p=0;p<e.length;p++)e[p].sourceLayer=this,e[p].nodeIndex=this.inboundNodes.length-1,e[p].tensorIndex=p}getConfig(){let n={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(n.batchInputShape=this.batchInputShape),this.dtype!=null&&(n.dtype=this.dtype),n}disposeWeights(){return this.weights.forEach(n=>n.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let n=0;return--this._refCount===0&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}}};function ENe(t){t=Qt(t);let n=[];for(let e of t)n.push(e.shape);return Ei(n)}function INe(t){return"float32"}function LP(t,n,e){if((n==null||e!=null&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),n.inboundNodes.length===0)return[t];{let i=n.inboundNodes[e];if(i.inboundLayers.length===0)return i.inputTensors;{let r=[];for(let o=0;o<i.inboundLayers.length;o++){let s=i.inputTensors[o],a=i.inboundLayers[o],l=i.nodeIndices[o],c=LP(s,a,l);for(let u of c)r.indexOf(u)===-1&&r.push(u)}return r}}}function DNe(t){let n=!0;for(let e of Qt(t))if(!(e instanceof fr)){n=!1;break}return n}function ANe(t){let n=!0;for(let e of Qt(t))if(e instanceof fr){n=!1;break}return n}var Yd=(()=>{class t extends Je{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Xd("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new B("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let i=e.batchInputShape;if(i==null){if(e.inputShape==null)throw new B("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");i=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new B("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let r=e.dtype||"float32";this.batchInputShape=i,this.dtype=r,this.inputSpec=[{shape:i}];let o=new fr(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new Zc({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[i],outputShapes:[i]})}apply(e,i){throw new B(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();ie.registerClass(Yd);function yE(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new B("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=t.batchShape;t.shape!=null&&n==null&&(n=[null].concat(t.shape));let e=t.dtype;return e==null&&(e="float32"),new Yd({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function NNe(t,n){if(t.dtype==null||t.dtype===n.dtype)return n;try{return le(n,t.dtype)}catch{throw new B(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var Ja=class t{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof t)for(let e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(n==null)return;for(let e of n)this.add(e.key,e.value)}}add(n,e,i){if(this.id2Value[n.id]==null)this.id2Value[n.id]=NNe(n,e),this.name2Id[n.name]=n.id,i!=null&&(this.id2Mask[n.id]=i);else throw new B(`Duplicate key: name=${n.name}, id=${n.id}`);return this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return this.id2Value[n.id]!=null}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof fr){if(this.id2Value[n.id]==null)throw new B(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}else{let e=this.name2Id[n];if(e==null)throw new B(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[e]}}getMask(n){if(n instanceof fr){if(this.id2Value[n.id]==null)throw new B(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}else{let e=this.name2Id[n];if(e==null)throw new B(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[e]}}disposeMasks(){this.id2Mask!=null&&it(this.id2Mask)}},bE=new a_,xE=new a_;function kQ(t){bE?.setMaxEntries(t),xE?.setMaxEntries(t)}function fm(t,n,e,i){let r=e==null?!1:e.training,o=Array.isArray(t),s=o?t:[t],a=s.map(m=>m.name),l=[],c=n.names();for(let m of a)c.indexOf(m)!==-1?l.push(n.getValue(m)):l.push(null);i!=null&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);let u=a.join(",")+"|"+n.names().sort().join(","),d=bE.get(u),p;if(d==null){let m=MNe(s,n);d=m.sorted,p=m.recipientCounts,bE.put(u,d),xE.put(u,p)}p={},r||Object.assign(p,xE.get(u));let h=new Ja(n);for(let m=0;m<d.length;++m){if(i!=null){let P=O0().numTensors;P>i.maxNumTensors&&(i.maxNumTensors=P),P<i.minNumTensors&&(i.minNumTensors=P)}let g=d[m],f=g.sourceLayer;if(f instanceof Yd)continue;let y=[],b=[],x=[],_=!1;for(let P of g.inputs){let F=h.getValue(P),z=h.getMask(P);y.push(F),b.push(z),z!=null&&(_=!0),r||(p[P.name]--,p[P.name]===0&&!n.hasKey(P)&&a.indexOf(P.name)===-1&&!F.isDisposed&&P.sourceLayer.stateful!==!0&&x.push(F))}_&&(e=e||{},e.mask=b[0]);let w=Qt(f.apply(y,e)),C=null;f.supportsMasking&&(C=f.computeMask(y,b));let k=RNe(g),N=Array.isArray(k)?k:[k];for(let P=0;P<N.length;++P){h.hasKey(N[P])||h.add(N[P],w[P],Array.isArray(C)?C[0]:C);let F=a.indexOf(N[P].name);F!==-1&&(l[F]=w[P])}r||it(x)}return h.disposeMasks(),o?l:l[0]}function MNe(t,n){v.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let e=[],i={};if(t.length===1){let r=SQ(t[0],n);e=r.sorted,i=r.recipientMap}else{let r=new Set;for(let o of t){let{sorted:s,recipientMap:a}=SQ(o,n);for(let l of s)r.has(l.name)||(e.push(l),r.add(l.name));for(let l in a)i[l]==null&&(i[l]=new Set),a[l].forEach(c=>i[l].add(c))}}return{sorted:e,recipientCounts:ONe(i)}}function ONe(t){let n={};for(let e in t)n[e]=t[e].size;return n}function SQ(t,n){let e=new Set,i=[],r={};for(let a of n.names())e.add(a);let o=[],s=[];for(o.push(t);o.length>0;){let a=o[o.length-1];if(e.has(a.name)){o.pop();continue}let l=s[s.length-1]===o.length-1;if(a.inputs.length===0||l)o.pop(),i.push(a),e.add(a.name),l&&s.pop();else{s.push(o.length-1);for(let c of a.inputs)r[c.name]==null&&(r[c.name]=new Set),r[c.name].add(a.name),!e.has(c.name)&&o.push(c)}}return{sorted:i,recipientMap:r}}function RNe(t){let n;if(t.sourceLayer.inboundNodes.length===1)n=t.sourceLayer.output;else{let e=null;for(let i=0;i<t.sourceLayer.inboundNodes.length;++i)for(let r of t.sourceLayer.inboundNodes[i].outputTensors)if(r.id===t.id){e=i;break}n=t.sourceLayer.getOutputAt(e)}return n}var FNe=G();FNe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,kQ);function PP(t,n){return H(()=>dn(Se(R(t,t),n,!0)))}var gm=class extends ie.Serializable{getConfig(){return{}}},DQ=(()=>{class t extends gm{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return H(()=>{let i=PP(e,this.axis),r=Qn(i,0,this.maxValue);return R(e,we(r,ne(si(),i)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();ie.registerClass(DQ);var AQ=(()=>{class t extends gm{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return H(()=>we(e,ne(si(),PP(e,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();ie.registerClass(AQ);var NQ=(()=>{class t extends gm{apply(e){return So(e)}}return t.className="NonNeg",t})();ie.registerClass(NQ);var MQ=(()=>{class t extends gm{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return H(()=>{let i=PP(e,this.axis),r=ne(R(this.rate,Qn(i,this.minValue,this.maxValue)),R(1-this.rate,i));return R(e,we(r,ne(si(),i)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();ie.registerClass(MQ);var EQ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Fn(t){return rb(t)}function IQ(t,n={}){return Qa(t,ie.SerializationMap.getMap().classNameMap,n,"constraint")}function Ln(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in EQ?EQ[t]:t,config:{}};return IQ(e)}else return t instanceof gm?t:IQ(t)}var sn={};Qo(sn,{Layer:()=>Je,RNN:()=>tl,RNNCell:()=>eu,activation:()=>bOe,add:()=>EOe,alphaDropout:()=>uRe,average:()=>IOe,averagePooling1d:()=>eV,averagePooling2d:()=>tV,averagePooling3d:()=>nV,avgPool1d:()=>POe,avgPool2d:()=>VOe,avgPool3d:()=>zOe,avgPooling1d:()=>$Oe,avgPooling2d:()=>BOe,avgPooling3d:()=>GOe,batchNormalization:()=>ROe,bidirectional:()=>nRe,categoryEncoding:()=>fRe,centerCrop:()=>hRe,concatenate:()=>DOe,conv1d:()=>cOe,conv2d:()=>uOe,conv2dTranspose:()=>dOe,conv3d:()=>pOe,conv3dTranspose:()=>hOe,convLstm2d:()=>ZOe,convLstm2dCell:()=>JOe,cropping2D:()=>fOe,dense:()=>xOe,depthwiseConv2d:()=>yOe,dot:()=>OOe,dropout:()=>vOe,elu:()=>iOe,embedding:()=>kOe,flatten:()=>wOe,gaussianDropout:()=>cRe,gaussianNoise:()=>lRe,globalAveragePooling1d:()=>UOe,globalAveragePooling2d:()=>HOe,globalMaxPool1d:()=>rRe,globalMaxPool2d:()=>oRe,globalMaxPooling1d:()=>sZ,globalMaxPooling2d:()=>aZ,gru:()=>jOe,gruCell:()=>qOe,input:()=>b_,inputLayer:()=>nOe,layerNormalization:()=>FOe,leakyReLU:()=>oOe,lstm:()=>XOe,lstmCell:()=>KOe,masking:()=>dRe,maxPool1d:()=>sRe,maxPool2d:()=>aRe,maxPooling1d:()=>lZ,maxPooling2d:()=>cZ,maxPooling3d:()=>WOe,maximum:()=>AOe,minimum:()=>NOe,multiply:()=>MOe,permute:()=>SOe,prelu:()=>sOe,randomWidth:()=>gRe,reLU:()=>rOe,repeatVector:()=>COe,rescaling:()=>pRe,reshape:()=>TOe,resizing:()=>mRe,rnn:()=>eRe,separableConv2d:()=>mOe,simpleRNN:()=>YOe,simpleRNNCell:()=>QOe,softmax:()=>aOe,spatialDropout1d:()=>_Oe,stackedRNNCells:()=>tRe,thresholdedReLU:()=>lOe,timeDistributed:()=>iRe,upSampling2d:()=>gOe,zeroPadding2d:()=>LOe});function Jc(t){return W(this,null,function*(){if(t==null)return;let n=[],e=[],i=[];for(let r in t){let o=t[r];if(typeof o!="number"){let s=o;n.push(s.data()),e.push(r),i.push(s)}}if(n.length>0){let r=yield Promise.all(n);for(let o=0;o<r.length;++o)t[e[o]]=r[o][0];it(i)}})}function vE(t){if(t!=null)for(let n in t){let e=t[n];typeof e!="number"&&e.dispose()}}var $Ne=125,Qd=class{constructor(){this.validationData=null}setParams(n){this.params=n}onEpochBegin(n,e){return W(this,null,function*(){})}onEpochEnd(n,e){return W(this,null,function*(){})}onBatchBegin(n,e){return W(this,null,function*(){})}onBatchEnd(n,e){return W(this,null,function*(){})}onTrainBegin(n){return W(this,null,function*(){})}onTrainEnd(n){return W(this,null,function*(){})}setModel(n){}},_E=class{constructor(n,e=10){n==null&&(n=[]),this.callbacks=n,this.queueLength=e}append(n){this.callbacks.push(n)}setParams(n){for(let e of this.callbacks)e.setParams(n)}setModel(n){for(let e of this.callbacks)e.setModel(n)}onEpochBegin(n,e){return W(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onEpochBegin(n,e)})}onEpochEnd(n,e){return W(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onEpochEnd(n,e)})}onBatchBegin(n,e){return W(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onBatchBegin(n,e)})}onBatchEnd(n,e){return W(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onBatchEnd(n,e)})}onTrainBegin(n){return W(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainBegin(n)})}onTrainEnd(n){return W(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainEnd(n)})}},$P=class extends Qd{constructor(){super()}onEpochBegin(n){return W(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(n,e){return W(this,null,function*(){e==null&&(e={});let i=e.size==null?0:e.size;this.seen+=i;for(let r in e){let o=e[r];if(typeof o=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+o*i;else{let s;r in this.totals?s=this.totals[r]:this.totals[r]=0;let a=H(()=>ne(this.totals[r],R(o,i)));this.totals[r]=a,s?.dispose()}}})}onEpochEnd(n,e){return W(this,null,function*(){if(e!=null)for(let i of this.params.metrics)this.totals[i]!=null&&(typeof this.totals[i]=="number"?e[i]=this.totals[i]/this.seen:H(()=>{let r=R(we(1,this.seen),this.totals[i]);e[i]=r,this.totals[i].dispose(),wi(e[i])}))})}},wE=class extends Qd{onTrainBegin(n){return W(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(n,e){return W(this,null,function*(){e==null&&(e={}),this.epoch.push(n);for(let i in e)this.history[i]==null&&(this.history[i]=[]),this.history[i].push(e[i])})}syncData(){return W(this,null,function*(){let n=[],e=[],i=[];for(let o in this.history){let s=this.history[o];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){let l=s[a];n.push(l.data()),e.push(o),i.push(a)}}let r=yield Promise.all(n);for(let o=0;o<r.length;++o)this.history[e[o]][i[o]].dispose(),this.history[e[o]][i[o]]=r[o][0]})}},CE=class extends Qd{constructor(n,e){if(super(),this.currentEpoch=0,this.nowFunc=n.nowFunc,this.nextFrameFunc=n.nextFrameFunc||s_,this.yieldEvery=e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=$Ne),this.yieldEvery==="never"&&n.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");v.isNumber(this.yieldEvery)&&(this.maybeWait=Y9(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=n.onTrainBegin,this.trainEnd=n.onTrainEnd,this.epochBegin=n.onEpochBegin,this.epochEnd=n.onEpochEnd,this.batchBegin=n.onBatchBegin,this.batchEnd=n.onBatchEnd,this.yield=n.onYield}maybeWait(n,e,i){return W(this,null,function*(){let r=[];this.yield!=null&&(yield Jc(i),r.push(this.yield(n,e,i))),r.push(this.nextFrameFunc()),yield Promise.all(r)})}onEpochBegin(n,e){return W(this,null,function*(){this.currentEpoch=n,this.epochBegin!=null&&(yield Jc(e),yield this.epochBegin(n,e))})}onEpochEnd(n,e){return W(this,null,function*(){let i=[];this.epochEnd!=null&&(yield Jc(e),i.push(this.epochEnd(n,e))),this.yieldEvery==="epoch"&&i.push(this.nextFrameFunc()),yield Promise.all(i)})}onBatchBegin(n,e){return W(this,null,function*(){this.batchBegin!=null&&(yield Jc(e),yield this.batchBegin(n,e))})}onBatchEnd(n,e){return W(this,null,function*(){let i=[];this.batchEnd!=null&&(yield Jc(e),i.push(this.batchEnd(n,e))),this.yieldEvery==="batch"?i.push(this.nextFrameFunc()):v.isNumber(this.yieldEvery)&&i.push(this.maybeWait(this.currentEpoch,n,e)),yield Promise.all(i)})}onTrainBegin(n){return W(this,null,function*(){this.trainBegin!=null&&(yield Jc(n),yield this.trainBegin(n))})}onTrainEnd(n){return W(this,null,function*(){this.trainEnd!=null&&(yield Jc(n),yield this.trainEnd(n))})}};function TE(t,n){return t==null&&(t={}),t instanceof Qd?[t]:Array.isArray(t)&&t[0]instanceof Qd?t:Qt(t).map(i=>new CE(i,n))}var OQ=(()=>{class t{constructor(){}static registerCallbackConstructor(e,i){v.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),t.checkForDuplicate(i),t.constructors[e]==null&&(t.constructors[e]=[]),t.constructors[e].push(i)}static checkForDuplicate(e){for(let i in t.constructors)t.constructors[+i].forEach(o=>{if(o===e)throw new B("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(e){let i=[];for(let r in t.constructors){let o=+r;e>=o&&i.push(...t.constructors[o])}return i.map(r=>new r)}}return t.constructors={},t})();function SE(t,n,e,i,r,o,s,a,l){let c=new wE,u=[new $P,...OQ.createCallbacks(n)];t!=null&&u.push(...t),u.push(c);let d=new _E(u);return d.setParams({epochs:e,initialEpoch:i,samples:r,steps:o,batchSize:s,verbose:n,doValidation:a,metrics:l}),{callbackList:d,history:c}}function eo(t,n={},e=!1){return Qa(t,ie.SerializationMap.getMap().classNameMap,n,"layer",e)}function h_(t,n){return H(()=>{t.dtype!=="float32"&&(t=le(t,"float32"));let e=Se(mm(t),n,!0),i=Gc(e.shape,si()),r=dn(dr(e,i));return we(t,r)})}function ym(t,n){return H(()=>Kt(mm(Ce(n,t)),-1))}function f_(t,n){return H(()=>Kt(ri(Ce(n,t)),-1))}function g_(t,n){return H(()=>{let e=Ce(t,n),i=Qn(ri(t),si(),Number.MAX_VALUE),r=ri(we(e,i));return R(100,Kt(r,-1))})}function VNe(t,n){return H(()=>{let e=Qn(n,si(),Number.MAX_VALUE),i=Ti(ne(1,e)),r=Qn(t,si(),Number.MAX_VALUE),o=Ti(ne(1,r));return Kt(mm(Ce(i,o)),-1)})}function BNe(t,n){return H(()=>{let e=dr(0,Ce(1,R(t,n)));return Kt(mm(e),-1)})}function zNe(t,n){return H(()=>{let e=dr(0,Ce(1,R(t,n)));return Kt(e,-1)})}function GNe(t,n){return H(()=>{let e=Se(R(t,n),-1),i=zi(R(Ce(1,t),n),-1);return dr(0,ne(1,Ce(i,e)))})}function UNe(t,n){return H(()=>{let e=Math.log(2),i=Ce(n,t),r=Ce(ne(i,Ya(R(-2,i))),e);return Kt(r,-1)})}function bm(t,n,e=!1){return H(()=>{if(e)n=am(n);else{let i=Se(n,n.shape.length-1,!0);n=we(n,i)}return n=Qn(n,si(),1-si()),St(Se(R(le(t,"float32"),Ti(n)),n.shape.length-1))})}function db(t,n,e=!1){return H(()=>{let i=le(Wc(aQ(t)),"int32");n=Qn(n,si(),1-si());let r=n.shape,o=$(jc(i,r[r.length-1]),r);return bm(o,n,e)})}function HNe(t,n){if(!v.arraysEqual(t.shape,n.shape))throw new B(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(n.shape)}`);return H(()=>{let e=So(n),i=St(ri(n));return ne(Ce(e,R(n,t)),H0(oi(i)))})}function pb(t,n){return H(()=>{let e;return e=Qn(n,si(),1-si()),e=Ti(we(e,Ce(1,e))),Kt(HNe(t,e),-1)})}function WNe(t,n){return H(()=>{let e=Qn(t,si(),1),i=Qn(n,si(),1);return Se(R(t,Ti(we(e,i))),-1)})}function jNe(t,n){return H(()=>{let e=Ti(ne(si(),n));return Kt(Ce(n,R(t,e)),-1)})}function kE(t,n){return H(()=>{let e=h_(t,-1),i=h_(n,-1),r=R(e,i);return St(Se(r,-1))})}var m_={meanSquaredError:ym,meanAbsoluteError:f_,meanAbsolutePercentageError:g_,meanSquaredLogarithmicError:VNe,squaredHinge:BNe,hinge:zNe,categoricalHinge:GNe,logcosh:UNe,categoricalCrossentropy:bm,sparseCategoricalCrossentropy:db,binaryCrossentropy:pb,kullbackLeiblerDivergence:WNe,poisson:jNe,cosineProximity:kE};function EE(t){if(typeof t=="string"){if(t in m_)return m_[t];let n=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new B(n)}else return t}function DE(t,n){return H(()=>{let e=R(.5,Si(n)),i=mr(Un(n,e),t.dtype);return Kt(Ir(t,i),-1)})}function AE(t,n){return H(()=>mr(Ir(Js(t,-1),Js(n,-1)),"float32"))}function qNe(t,n){return H(()=>le(Se(ur(Ir(t,1),Ir(n,1))),"float32"))}function XNe(t,n){return H(()=>le(Se(ur(Ir(t,0),Ir(n,1))),"float32"))}function FQ(t,n){return H(()=>{let e=qNe(t,n),i=XNe(t,n),r=ne(e,i);return le(_n(Un(r,0),we(e,r),0),"float32")})}function VP(t,n){return pb(t,n)}function BP(t,n){return t.rank===n.rank&&(t=ko(t,[t.rank-1])),n=Js(n,-1),n.dtype!==t.dtype&&(n=le(n,t.dtype)),le(Ir(t,n),"float32")}var KNe=ym,YNe=ym,QNe=f_,ZNe=f_,JNe=g_,eMe=g_,NE=bm,tMe=kE,zP=db,IE={binaryAccuracy:DE,categoricalAccuracy:AE,precision:FQ,categoricalCrossentropy:NE,sparseCategoricalCrossentropy:zP,mse:KNe,MSE:YNe,mae:QNe,MAE:ZNe,mape:JNe,MAPE:eMe,cosine:tMe};function LQ(t){if(typeof t=="string"&&t in IE)return IE[t];if(typeof t!="string"&&t!=null)return t;throw new B(`Unknown metric ${t}`)}function y_(t){if(Xo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let n;for(let e of Object.keys(m_))if(m_[e]===t){n=e;break}if(n!==void 0)return n;for(let e of Object.keys(IE))if(IE[e]===t){n=e;break}return n!==void 0?n:t.name}}function $Q(t){let n={Adagrad:()=>jo.adagrad(.01),Adadelta:()=>jo.adadelta(1,.95,si()),Adam:()=>jo.adam(.001,.9,.999,si()),Adamax:()=>jo.adamax(.002,.9,.999,si(),0),RMSProp:()=>jo.rmsprop(.001,.9,0,si()),SGD:()=>jo.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new B(`Unknown Optimizer ${t}`)}function UP(t,n,e=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!GP(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){let i=JSON.stringify(t);i.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${i.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function GP(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t);for(let e of n)if(typeof e!="string"||!GP(t[e]))return!1;return!0}else if(Array.isArray(t)){for(let n of t)if(!GP(n))return!1;return!0}else return!1;else{let n=typeof t;return n==="string"||n==="number"||n==="boolean"}}function VQ(t,n,e,i=console.log){let r=rMe(t),o=["Layer (type)","Input Shape","Output shape","Param #"];r?(n=n||90,e=e||[.32,.61,.89,1]):(n=n||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(n*u)));let s;if(!r){o.push("Receives inputs"),s=[];for(let u in t.nodesByDepth)s.push(...t.nodesByDepth[u])}i("_".repeat(n)),ME(o,e,i),i("=".repeat(n));let a=t.layers;for(let u=0;u<a.length;++u)r?oMe(a[u],e,i):sMe(a[u],e,s,i),i((u===a.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();let l=iMe(t),c=cb(t.nonTrainableWeights);i(`Total params: ${l+c}`),i(`Trainable params: ${l}`),i(`Non-trainable params: ${c}`),i("_".repeat(n))}function iMe(t){let n;return t.collectedTrainableWeights!=null?n=cb(t.collectedTrainableWeights):n=cb(t.trainableWeights),n}function rMe(t){let n=!0,e=[],i=[];for(let r in t.nodesByDepth)e.push(t.nodesByDepth[r]);for(let r of e){if(r.length>1||r.length===1&&r[0].inboundLayers.length>1){n=!1;break}i.push(...r)}if(n)for(let r of t.layers){let o=!1;for(let s of r.inboundNodes)if(i.indexOf(s)!==-1)if(o){n=!1;break}else o=!0;if(!n)break}return n}function ME(t,n,e=console.log){let i="";for(let r=0;r<t.length;++r)r>0&&(i=i.slice(0,i.length-1)+" "),i+=t[r],i=i.slice(0,n[r]),i+=" ".repeat(n[r]-i.length);e(i)}function oMe(t,n,e){let i,r;try{r=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{r="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}let o=t.name,s=t.getClassName(),a=[`${o} (${s})`,r,i,t.countParams().toString()];ME(a,n,e)}function sMe(t,n,e,i){let r,o;try{o=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}let s=[];for(let d of t.inboundNodes)if(!(e!=null&&e.length>0&&e.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,m=d.nodeIndices[p],g=d.tensorIndices[p];s.push(`${h}[${m}][${g}]`)}let a=t.name,l=t.getClassName(),c=s.length===0?"":s[0],u=[`${a} (${l})`,o,r,t.countParams().toString(),c];ME(u,n,i);for(let d=1;d<s.length;++d)ME(["","","","",s[d]],n,i)}function BQ(t,n,e){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&n===0&&typeof e=="string"}function hb(t,n){if(t===null)return null;if(typeof t=="string")return Kc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],i=t.length;for(let r=0;r<i;++r){let o=t[r];BQ(n,r,o)?e.push(o):e.push(hb(o,n))}return e}else{let e={};for(let i of Object.keys(t)){let r=t[i];if(i==="name"&&typeof r=="string")e[i]=r;else{let o=Kc(i);e[o]=hb(r,o)}}return e}}function OE(t,n){if(t==null)return null;if(typeof t=="string")return ws(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],i=t.length;for(let r=0;r<i;++r){let o=t[r];BQ(n,r,o)?e.push(o):e.push(OE(o,n))}return e}else{let e={};for(let i of Object.keys(t)){let r=t[i],o=ws(i);(i==="name"||i==="className")&&typeof r=="string"?e[o]=r:e[o]=OE(r,i)}return e}}var mb="4.22.0";var aMe=t=>{let n=Object.keys(t);if(n.length===0)return!1;let e=n[0].split("/");return!isNaN(parseInt(e[e.length-1],10))},RE=class t extends Je{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,this.name==null){let b=this.getClassName().toLowerCase();this.name=Xd(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(n.inputs)?this.inputs=n.inputs.slice():this.inputs=[n.inputs],Array.isArray(n.outputs)?this.outputs=n.outputs.slice():this.outputs=[n.outputs],Cs(this.inputs).length!==this.inputs.length)throw new B(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);Cs(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let b of this.outputs){let x=b.sourceLayer,_=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push(x),this.outputLayersNodeIndices.push(_),this.outputLayersTensorIndices.push(w)}for(let b of this.inputs){let x=b.sourceLayer,_=b.nodeIndex,w=b.tensorIndex;Xo(_===0,"input layer has >1 nodes"),Xo(w===0,"input layer has >1 tensors"),this.inputLayers.push(x),this.inputLayersNodeIndices.push(_),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){let x=this.inputLayers[b];if(!(x instanceof Yd))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${b} (0-based) originates from layer type ${x.getClassName()}.`);this.inputNames.push(x.name),this.feedInputShapes.push(x.batchInputShape),this.feedInputNames.push(x.name)}for(let b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);let e={},i={},r={},o={},s={},a=[],l=(b,x,_,w,C,k)=>{(w==null||C==null||k==null)&&(w=b.sourceLayer,C=b.nodeIndex,k=b.tensorIndex);let N=w.inboundNodes[C];if(_.indexOf(N)!==-1)throw new Ar(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if(x.indexOf(N)!==-1)return;this.containerNodes.add(t.nodeKey(w,C)),w.id in s||(s[w.id]=Object.keys(s).length),_.indexOf(N)===-1&&_.push(N);let P=N.inboundLayers.length;for(let F=0;F<P;F++){let z=N.inputTensors[F],Y=N.inboundLayers[F],K=N.nodeIndices[F],Z=N.tensorIndices[F];l(z,x,_,Y,K,Z)}for(x.push(N);_.indexOf(N)>=0;)_.splice(_.indexOf(N),1);a.push(N)},c=[],u=[];for(let b of this.outputs)l(b,c,u);let d=a.slice().reverse();for(let b of d){i[b.id]=b,b.id in e||(e[b.id]=0);let x=e[b.id],_=r[b.outboundLayer.id]==null?0:r[b.outboundLayer.id];x=Math.max(x,_),r[b.outboundLayer.id]=x,o[b.outboundLayer.id]=b.outboundLayer,e[b.id]=x;for(let w=0;w<b.inboundLayers.length;w++){let C=b.inboundLayers[w],k=b.nodeIndices[w],N=C.inboundNodes[k],P=e[N.id]==null?0:e[N.id];e[N.id]=Math.max(x+1,P),i[N.id]=N}}let p={};for(let b in e){let x=e[b];x in p||(p[x]=[]),p[x].push(i[b])}let h={};for(let b in r){let x=r[b];x in h||(h[x]=[]),h[x].push(o[b])}let m=Object.keys(h).map(b=>parseInt(b,10)).sort(l_);this.layers=[];for(let b of m){let x=h[b];x.sort((_,w)=>{let C=s[_.id],k=s[w.id];return C<k?-1:C>k?1:0});for(let _ of x)_ instanceof t&&this.internalContainerRefs.push(_),this.layers.push(_)}this.layersByDepth=h,m=Object.keys(p).map(b=>parseInt(b,10)).sort(l_);let g=this.inputs.slice(),f=[];for(let b of m)for(let x of p[b]){let _=x.outboundLayer;if(_!=null){for(let w of x.inputTensors)if(g.indexOf(w)===-1)throw new Ar(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${_.name}". The following previous layers were accessed without issue: ${f}`);for(let w of x.outputTensors)g.push(w);f.push(_.name)}}this.nodesByDepth=p;let y=this.layers.map(b=>b.name);for(let b of y){let x=y.filter(_=>_===b).length;if(x!==1)throw new Ar(`The name "${b}" is used ${x} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Zc({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let n={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let e of this.layers)n.numDisposedVariables+=e.dispose().numDisposedVariables;for(let e of this.internalContainerRefs)n.numDisposedVariables+=e.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(e=>{e._trainableWeights.forEach(i=>i.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new B("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(let e of this.layers)n=n.concat(e.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let e of this.layers)n.push(...e.nonTrainableWeights);if(!this.trainable){let e=[];for(let i of this.layers)e.push(...i.trainableWeights);return e.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,e=!0){let i={},r=0,o=aMe(n);o&&this.parseWeights(n);for(let a of this.layers)for(let[l,c]of a.weights.entries()){let u=o?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(i[u]!=null)throw new B(`Duplicate weight name: ${u}`);i[u]=c,r++}let s=[];for(let a in n){let l=a;if(i[a]==null){let c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(i[l]!=null)s.push([i[l],n[a]]);else if(e)throw new B(`Provided weight data has no target variable: ${a}`);delete i[l]}if(e){let a=[];for(let l in i)a.push(l);if(a.length>0)throw new B(`${a.length} of ${r} weights are not set: ${a}`)}ub(s)}parseWeights(n){for(let e in Object.keys(n)){let i=e.split("/"),r=["vars","layer_checkpoint_dependencies"],o=i.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!r.includes(s)).join("/");o!==e&&(n[o]=n[e],delete n[e])}}updatedConfig(){let n=this.getConfig(),e={};return e.className=this.getClassName(),e.config=n,e.kerasVersion=`tfjs-layers ${mb}`,e.backend="TensorFlow.js",e}toJSON(n,e=!0){let i=OE(this.updatedConfig());return e?JSON.stringify(i):i}call(n,e){return H(()=>{n=Qt(n);let i=new Ja;for(let r=0;r<this.inputs.length;++r)i.add(this.inputs[r],n[r]);return fm(this.outputs,i,e)})}computeMask(n,e){return H(()=>{n=Qt(n);let i;return e==null?i=_s(null,n.length):i=Qt(e),this.runInternalGraph(n,i)[1]})}computeOutputShape(n){let e=lb(n);if(e.length!==this.inputLayers.length)throw new B(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);let i={};for(let a=0;a<e.length;a++){let l=this.inputLayers[a],c=e[a],u=l.name+"_0_0";i[u]=c}let r=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(l_);if(r.length>1)for(let a of r){let l=this.nodesByDepth[a];for(let c of l){let u=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(u.id)!==-1)continue;let d=[];for(let g=0;g<c.inboundLayers.length;g++){let f=c.inboundLayers[g],y=c.nodeIndices[g],b=c.tensorIndices[g],x=`${f.name}_${y}_${b}`,_=i[x];d.push(_)}let p=u.computeOutputShape(Ei(d)),h=lb(p),m=u.inboundNodes.indexOf(c);for(let g=0;g<h.length;g++){let f=`${u.name}_${m}_${g}`;i[f]=h[g]}}}let o=[],s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;s.push(d)}for(let a=0;a<s.length;a++){let l=s[a];Xo(l in i),o.push(i[l])}return Ei(o)}runInternalGraph(n,e){e==null&&(e=_s(null,n.length));let i={};for(let l=0;l<this.inputs.length;++l){let c=this.inputs[l],u=n[l],d=e[l];i[c.id]=[u,d]}let r=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(l_);for(let l of r){let c=this.nodesByDepth[l];for(let u of c){let d=u.outboundLayer,p=u.inputTensors,h=u.outputTensors,m=new Array;for(let g of p)g.id in i&&m.push(i[g.id]);if(m.length===p.length){let g={},f,y,b,x;if(u.callArgs!=null&&(g=u.callArgs),m.length===1){let[_,w]=m[0];g.mask==null&&(g.mask=w),b=Qt(d.call(_,g)),x=Qt(d.computeMask(_,w)),f=[_],y=[w]}else f=m.map(_=>_[0]),y=m.map(_=>_[1]),g.mask==null&&(g.mask=y),b=Qt(d.call(f,g)),x=Qt(d.computeMask(f,y));if(d.activityRegularizer)throw new et("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _=0;_<h.length;++_){let w=h[_],C=b[_],k=x[_];i[w.id]=[C,k]}}}}let o=[],s=[],a=[];for(let l of this.outputs){Xo(l.id in i,`Could not compute output ${l.name} : ${l.id}`);let[c,u]=i[l.id];a.push(c.shape),o.push(c),s.push(u)}return[o,s,a]}buildNodeConversionMap(n){let e={},i;for(let r of this.layers){i=r instanceof t?1:0;for(let o=0;o<r.inboundNodes.length;o++){let s=t.nodeKey(r,o);this.containerNodes.has(s)&&(e[s]=i,i+=1)}}return e}getLayer(n,e){if(e!=null)return this.findLayer(e);if(n==null)throw new B("Provide either a layer name or layer index");if(typeof n=="number")return this.findLayer(n);for(let i of this.layers)if(i.name===n)return i;throw new B(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new B(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return H(()=>{let n=[];for(let e of this.layers)for(let i=0;i<e.inboundNodes.length;++i){let r=t.nodeKey(e,i);this.containerNodes.has(r)&&n.push(...e.calculateLosses())}return n})}getConfig(){let n={name:this.name},e=this.buildNodeConversionMap(this.layers),i=[];for(let s of this.layers){let a=s.getClassName(),l=s.getConfig(),c=[];for(let d=0;d<s.inboundNodes.length;d++){let p=s.inboundNodes[d],h=t.nodeKey(s,d),m={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),m=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(p.inboundLayers.length>0){let g=[];for(let f=0;f<p.inboundLayers.length;f++){let y=p.inboundLayers[f],b=p.nodeIndices[f],x=p.tensorIndices[f],_=t.nodeKey(y,b),w=e[_];w==null&&(w=0),g.push([y.name,w,x,m])}c.push(g)}}}let u={};u.name=s.name,u.className=a,u.config=l,u.inboundNodes=c,i.push(u)}n.layers=i;let r=[];for(let s=0;s<this.inputLayers.length;s++){let a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.inputLayersTensorIndices[s];r.push([a.name,u,d])}n.inputLayers=r;let o=[];for(let s=0;s<this.outputLayers.length;s++){let a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.outputLayersTensorIndices[s];o.push([a.name,u,d])}return n.outputLayers=o,n}static fromConfig(n,e,i={},r=!1){let o={},s={};function a(f,y){f.name in s?s[f.name].push(y):s[f.name]=[y]}function l(f,y){let b=[],x;for(let _ of y){let w=_[0],C=_[1],k=_[2];if(x=_[3]==null?{}:_[3],!(w in o)){a(f,y);return}let N=o[w];if(N.inboundNodes.length<=C){a(f,y);return}let P=N.inboundNodes[C];b.push(P.outputTensors[k])}b.length>0&&f.apply(Ei(b),x)}function c(f){let y=f.name,b=eo(f,e.customObjects!=null?e.customObjects:{});b.setFastWeightInitDuringBuild(r),o[y]=b,f.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new B(`Corrupted configuration, expected array for nodeData: ${_}`);a(b,_)})}let u=e.name,d=e.layers;for(let f of d)c(f);for(;!X9(s);)for(let f of d){let y=o[f.name];if(y.name in s){let b=s[y.name];delete s[y.name];for(let x of b)l(y,x)}}let p=[],h=[],m=e.inputLayers;for(let f of m){let y=f[0],b=f[1],x=f[2];Xo(y in o);let w=o[y].inboundNodes[b].outputTensors;p.push(w[x])}let g=e.outputLayers;for(let f of g){let y=f[0],b=f[1],x=f[2];Xo(y in o);let w=o[y].inboundNodes[b].outputTensors;h.push(w[x])}return new n({inputs:p,outputs:h,name:u})}get stateful(){if(this._stateful)throw new B("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let n of this.layers)if(n.stateful)return!0;return!1}resetStates(){H(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}};function lMe(t,n,e){let i=n.length;if(t==null||Array.isArray(t)&&t.length===0)return n.map(r=>null);if(i===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==i)throw new Error(`Provided ${e} is an array of ${t.length} element(s), but the model has ${i} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let r=[];return n.forEach(o=>{o in t?r.push(t[o]):r.push(null)}),r}else throw new Error(`The model has multiple (${i}) outputs, so ${e} must be either an array with ${i} elements or an object with ${n} keys. Provided ${e} not understood: ${JSON.stringify(t)}`)}function FE(t,n){return lMe(t,n,"classWeight")}function LE(t,n,e,i){return W(this,null,function*(){if(n!=null||i!=null)throw new Error("Support sampleWeight is not implemented yet");if(e!=null){let r=H(()=>{if(t.shape.length===1)return _o(t);if(t.shape.length===2){if(t.shape[1]>1)return Js(t,1);if(t.shape[1]===1)return $(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(yield r.data());it(r);let s=[];return o.forEach(a=>{if(e[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(e[a])}),Cn(s,"float32")}else return null})}function zQ(t,n){return R(t,n)}var cMe=32;function HQ(t,n){let e,i,r=n;e=r.xs,i=r.ys,v.assert(e!=null&&i!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);let o=GQ("input",t.inputNames,e),s=GQ("output",t.outputNames,i),a=o[0].shape[0];v.assert(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),v.assert(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<o.length;l++)v.assert(o[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)v.assert(s[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:o,ys:s}}function GQ(t,n,e){if(e instanceof Yt)return[e];if(Array.isArray(e))return v.assert(e.length===n.length,()=>`Received an array of ${e.length} Tensors, but expected ${n.length} to match the ${t} keys ${n}.`),e;{let i=[];for(let r of n){if(e[r]==null)throw new B(`The feature data generated by the dataset lacks the required ${t} key '${r}'.`);i.push(e[r])}return i}}function uMe(t){if(t.length===3)throw new et("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function WQ(t,n,e){return W(this,null,function*(){let i=e.batchesPerEpoch!=null;if(v.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),v.assert(e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),v.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),v.assert(!i||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),v.assert(e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let r=e.validationData!=null,o,s;if(r)if(UQ(e.validationData))v.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{let f=uMe(e.validationData);o=f.xs,s=f.ys}let a=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),c;r?c=l.slice().concat(l.map(f=>"val_"+f)):c=l.slice();let u=TE(e.callbacks,e.yieldEvery),d=e.verbose==null?1:e.verbose,{callbackList:p,history:h}=SE(u,d,e.epochs,null,null,dMe(n,e),null,r,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let m=e.initialEpoch==null?0:e.initialEpoch,g=yield n.iterator();for(;m<e.epochs;){let f={};yield p.onEpochBegin(m);let y=0,b=0;for(i||(g=yield n.iterator());!i||y<e.batchesPerEpoch;){let x=yield g.next();if(i&&x.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(x.value!=null){let{xs:_,ys:w}=HQ(t,x.value),C={};C.batch=b,C.size=_[0].shape[0],yield p.onBatchBegin(b,C);let k=[];if(e.classWeight!=null){let F=FE(e.classWeight,t.outputNames);for(let z=0;z<F.length;++z)k.push(yield LE(w[z],null,F[z]))}let N=_.concat(w).concat(k),P=a(N);it(N);for(let F=0;F<l.length;++F){let z=l[F],Y=P[F];C[z]=Y,wi(Y)}yield p.onBatchEnd(b,C),vE(C),b++,y++}if(i?y>=e.batchesPerEpoch:x.done){if(r){let _;UQ(e.validationData)?_=Qt(yield t.evaluateDataset(e.validationData,{batches:e.validationBatches})):_=Qt(t.evaluate(o,s,{batchSize:e.validationBatchSize==null?cMe:e.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)f[`val_${t.metricsNames[w]}`]=_[w]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(m,f),m++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function dMe(t,n){let e=null;return n.batchesPerEpoch!=null?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}function UQ(t){return typeof t.iterator=="function"}function pMe(t){return typeof t.next=="function"}function jQ(t,n,e){return W(this,null,function*(){e=e||{};let i=e.batches!=null,r=t.testFunction,o=[];if(e.verbose>0)throw new et("Verbose mode is not implemented yet.");v.assert(!i||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);let s=pMe(n)?n:yield n.iterator(),a=0,l=0;for(;!i||l<e.batches;){let c=yield s.next();if(o=H(()=>{if(c.value){let{xs:u,ys:d}=HQ(t,c.value),p=u.concat(d),h=H(()=>r(p));if(it(p),l===0)for(let g=0;g<h.length;++g)o.push(Ge(0));let m=p[0].shape[0];for(let g=0;g<h.length;++g){let f=h[g],y=o[g];o[g]=H(()=>ne(o[g],R(m,f))),l>0&&it(y)}it(h),a+=m,++l}return o}),c.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<o.length;++c){let u=o[c];o[c]=we(o[c],a),it(u)}return Ei(o)})}function PE(t){v.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function fb(t,n,e){return t==null?[null]:Array.isArray(t)?t.map(i=>Yc(i,n,e-n)):Yc(t,n,e-n)}function $E(t,n){return H(()=>t==null?null:Array.isArray(t)?t.map(e=>$E(e,n)):hE(t,n.dtype==="int32"?n:le(n,"int32")))}function VE(t,n){let e=[],i=0,r=null;for(;i<t;)r=i+n,r>=t&&(r=t),e.push([i,r]),i=r;return e}function HP(t){let n=[];t instanceof Yt&&(t=[t]);for(let e=0;e<t.length;++e){let i=t[e];if(i.rank===1)n.push(Qc(i,1));else{if(i.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(i)}}return n}function ks(t,n){if(t==null)return;let e=[];if(n instanceof Yt)e.push(n.id);else if(Array.isArray(n))n.forEach(r=>e.push(r.id));else if(n!=null)for(let r in n){let o=n[r];e.push(o.id)}let i=[];if(t instanceof Yt)e.indexOf(t.id)===-1&&i.push(t);else if(Array.isArray(t))t.forEach(r=>{e.indexOf(r.id)===-1&&i.push(r)});else if(t!=null)for(let r in t){let o=t[r];e.indexOf(o.id)===-1&&i.push(o)}i.forEach(r=>{r.isDisposed||r.dispose()})}function hMe(t){return t instanceof Yt}function WP(t){return Array.isArray(t)}function qQ(t){return!hMe(t)&&!WP(t)}function XQ(t,n,e,i=!0,r=""){if(n==null||n.length===0){if(t!=null){let s=!1;if(WP(t)&&t.length>0)s=!0;else if(qQ(t)){for(let a in t)if(t.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new B(`Error when checking model ${r} expected no data, but got ${t}`)}return[]}if(t==null)return n.map(s=>null);let o;if(qQ(t)){t=t,o=[];for(let s of n){if(t[s]==null)throw new B(`No data provided for "${s}". Need data for each key in: ${n}`);o.push(t[s])}}else if(WP(t)){if(t=t,t.length!==n.length)throw new B(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);o=t}else{if(t=t,n.length>1)throw new B(`The model ${r} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);o=[t]}if(o=HP(o),e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=o[s];if(a.shape.length!==e[s].length)throw new B(`Error when checking ${r}: expected ${n[s]} to have ${e[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[s].length;++l){if(l===0&&!i)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u>=0&&c!==u)throw new B(`${r} expected a batch of elements where each example has shape [${e[s].slice(1,e[s].length)}] (i.e.,tensor shape [*,${e[s].slice(1,e[s].length)}]) but the ${r} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function mMe(t,n,e){let i=Cs(t.map(o=>o.shape[0]));i.sort();let r=Cs(n.map(o=>o.shape[0]));if(r.sort(),i.length>1)throw new B(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(o=>o.shape))}`);if(r.length>1)throw new B(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(o=>o.shape))}`);if(i.length>0&&r.length>0&&!v.arraysEqual(i,r))throw new B(`Input Tensors should have the same number of samples as target Tensors. Found ${i[0]} input sample(s) and ${r[0]} target sample(s).`)}function fMe(t,n,e){let i=[ym,pb,bm];for(let r=0;r<t.length;++r){let o=t[r],s=n[r],a=e[r];if(s!=null){if(s===bm&&o.shape[o.shape.length-1]===1)throw new B(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(i.indexOf(s)!==-1){let l=o.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){let d=l[u],p=c[u];if(p!=null&&d!==p)throw new B(`A target Tensor with shape ${o.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function KQ(t,n,e,i=!0,r=""){let o;if(Array.isArray(t)){if(t.length!==n.length)throw new B(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(n.length>1)throw new B(`The model expects ${n.length} ${r} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);o=[t]}if(e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=o[s];if(a.shape.length!==e[s].length)throw new B(`Error when checking ${r}: expected ${n[s]} to have ${e[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[s].length;++l){if(l===0&&!i)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u!==c)throw new B(`Error when checking ${r}: expected ${n[s]} to have shape ${JSON.stringify(e[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function gMe(t,n){if(t==null||Array.isArray(t)&&t.length===0)return n.map(i=>[]);let e;if(typeof t=="string"||typeof t=="function")e=[t];else if(Array.isArray(t)||typeof t=="object")e=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(e))return n.map(i=>e);{let i=[];for(let r of n){let o=e.hasOwnProperty(r)?e[r]:[];Array.isArray(o)||(o=[o]),i.push(o)}return i}}var yMe="layers-model",el=(()=>{class t extends RE{constructor(e){super(e),this.isTraining=!1}summary(e,i,r=console.log){if(!this.built)throw new B("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");VQ(this,e,i,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=$Q(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Zi))throw new B("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let i=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new B(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),i.push(EE(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new B(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);i=e.loss.map(l=>EE(l))}else{let a=EE(e.loss);this.outputs.forEach(l=>{i.push(a)})}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}let r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],ia("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;let l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let o=gMe(e.metrics,this.outputNames),s=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};ia("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;let l=o[a];(u=>{let d="",p,h,m;for(let g of u){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){let y=this.internalOutputShapes[a];y[y.length-1]===1||this.lossFunctions[a]===pb?["accuracy","acc"].indexOf(g)!==-1?h=DE:["crossentropy","ce"].indexOf(g)!==-1&&(h=VP):this.lossFunctions[a]===db?["accuracy","acc"].indexOf(g)!==-1?h=BP:["crossentropy","ce"].indexOf(g)!==-1&&(h=zP):["accuracy","acc"].indexOf(g)!==-1?h=AE:["crossentropy","ce"].indexOf(g)!==-1&&(h=NE);let b;["accuracy","acc"].indexOf(g)!==-1?b="acc":["crossentropy","ce"].indexOf(g)!==-1&&(b="ce"),m=h,p=d+b}else m=LQ(g),p=d+y_(g);let f;ia(p,()=>{f=m}),s(a,p,f)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,i,r={}){let o=r.batchSize==null?32:r.batchSize;PE(o);let a=this.standardizeUserDataXY(e,i,!0,o);try{let l=a[0].concat(a[1]);this.makeTestFunction();let c=this.testFunction,u=this.testLoop(c,l,o,r.verbose,r.steps);return Ei(u)}finally{ks(a[0],e),ks(a[1],i)}}evaluateDataset(e,i){return W(this,null,function*(){return this.makeTestFunction(),jQ(this,e,i)})}checkNumSamples(e,i,r,o="steps"){let s;if(r!=null){if(s=null,i!=null)throw new B(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${i}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new B(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return s}execute(e,i){if(Array.isArray(i)&&i.length===0)throw new B("`outputs` is an empty Array, which is not allowed.");let r=Array.isArray(i),o=r?i:[i],s=this.retrieveSymbolicTensors(o),a=new Ja;if(e instanceof Yt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new B(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(let c of this.inputs){let u=e[c.name];if(u==null)throw new B(`No value is provided for the model's input ${c.name}`);a.add(c,u)}let l=fm(s,a);return r?l:l[0]}retrieveSymbolicTensors(e){let i=_s(null,e.length),r=e.length;for(let o of this.layers){let s=Array.isArray(o.output)?o.output:[o.output],a=s.map(l=>l.name);for(let l=0;l<e.length;++l){let c=a.indexOf(e[l]);if(c!==-1&&(i[l]=s[c],r--),r===0)break}if(r===0)break}if(r>0){let o=[];throw i.forEach((s,a)=>{s==null&&o.push(e[a])}),new B(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return i}predictLoop(e,i=32,r=!1){return H(()=>{let o=this.checkNumSamples(e);if(r)throw new et("Verbose predictLoop() is not implemented yet.");let s=VE(o,i),a=this.outputs.map(l=>[]);for(let l=0;l<s.length;++l)H(()=>{let u=s[l][0],d=s[l][1],p=fb(e,u,d),h=[];if(Array.isArray(p))for(let g=0;g<p.length;++g)h.push({key:this.inputs[g],value:p[g]});else h.push({key:this.inputs[0],value:p});let m=new Ja(h);return fm(this.outputs,m)}).forEach((u,d)=>a[d].push(u));return Ei(a.map(l=>vn(l,0)))})}predict(e,i={}){let r=HP(e);KQ(r,this.inputNames,this.feedInputShapes,!1);try{let o=i.batchSize==null?32:i.batchSize;return PE(o),this.predictLoop(r,o)}finally{ks(r,e)}}predictOnBatch(e){KQ(e,this.inputNames,this.feedInputShapes,!0);let i=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,i)}standardizeUserDataXY(e,i,r=!0,o){if(this.optimizer_==null)throw new Ar("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let s=[];for(let a=0;a<this.feedOutputShapes.length;++a){let l=this.feedOutputShapes[a];this.feedLossFns[a]===db?s.push(l.slice(0,l.length-1).concat([1])):s.push(l)}if(e=XQ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),i=XQ(i,this.feedOutputNames,s,!1,"target"),mMe(e,i,null),fMe(i,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new B(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,i]}standardizeUserData(e,i,r,o,s=!0,a){return W(this,null,function*(){let[l,c]=this.standardizeUserDataXY(e,i,s,a);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){let d=FE(o,this.outputNames);u=[];for(let p=0;p<d.length;++p)u.push(yield LE(c[p],null,d[p]))}return[l,c,u]})}testLoop(e,i,r,o=0,s){return H(()=>{let a=this.checkNumSamples(i,r,s,"steps"),l=[];if(o>0)throw new et("Verbose mode is not implemented yet.");if(s!=null)throw new et("steps mode in testLoop() is not implemented yet");{let c=VE(a,r),u=Cn(Mr(0,a));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],m=Yc(u,p,h-p),g=$E(i,m),f=e(g);if(d===0)for(let y=0;y<f.length;++y)l.push(Ge(0));for(let y=0;y<f.length;++y){let b=f[y];l[y]=ne(l[y],R(h-p,b))}}for(let d=0;d<l.length;++d)l[d]=we(l[d],a)}return l})}getDedupedMetricsNames(){let e=this.metricsNames,i=[];for(let r=0;r<e.length;++r){let o=e[r],s=o;if(TP(e,o)>1){let a=TP(e.slice(0,r),o);s+=`_${a}`}i.push(s)}return i}makeTrainFunction(){return e=>{let i=[],r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{let p=[];for(let f=0;f<this.inputs.length;++f)p.push({key:this.inputs[f],value:r[f]});let h=new Ja(p),m=fm(this.outputs,h,{training:!0}),g;for(let f=0;f<this.lossFunctions.length;++f){let y=this.lossFunctions[f],b=y(o[f],m[f]);s[f]!=null&&(b=zQ(b,s[f]));let x=Kt(b);i.push(x),f===0?g=b:g=ne(g,b)}for(let f=0;f<this.metricsTensors.length;++f){let y;if(this.outputs.length>1&&f<this.outputs.length)y=i[f];else{let b=this.metricsTensors[f][0],x=this.metricsTensors[f][1];y=Kt(b(o[x],m[x]))}wi(y),a.push(y)}return g=Kt(g),this.calculateLosses().forEach(f=>{g=ne(g,f)}),g},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>H(()=>{let i=[],r,o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:o[u]});let l=new Ja(a),c=fm(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){let d=this.lossFunctions[u],p=Kt(d(s[u],c[u]));u===0?r=p:r=ne(r,p),i.push(r)}for(let u=0;u<this.metricsTensors.length;++u){let d=this.metricsTensors[u][0],p=this.metricsTensors[u][1],h=Kt(d(s[p],c[p]));i.push(h)}return i})}fit(o,s){return W(this,arguments,function*(e,i,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,l,c,u,d,p,h,m,g;try{let f=r.batchSize==null?32:r.batchSize;PE(f);let b=yield this.standardizeUserData(e,i,r.sampleWeight,r.classWeight,!1,f);a=b[0],l=b[1],g=b[2];let x=!1,_;if(r.validationData!=null&&r.validationData.length>0){if(x=!0,r.validationData.length===2)d=r.validationData[0],p=r.validationData[1];else throw r.validationData.length===3?new et("validationData including sample weights is not supported yet."):new B(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);let K=yield this.standardizeUserData(d,p,null,null,!0,f);h=K[0],m=K[1],_=h.concat(m)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){x=!0;let Y=Math.floor(a[0].shape[0]*(1-r.validationSplit)),K=a[0].shape[0];h=fb(a,Y,K),c=a,a=fb(a,0,Y),m=fb(l,Y,K),u=l,l=fb(l,0,Y),_=h.concat(m)}else r.validationSteps!=null&&(x=!0);let w=a.concat(l).concat(g);this.checkTrainableWeightsConsistency();let C=this.makeTrainFunction(),k=this.getDedupedMetricsNames(),N,P;x?(this.makeTestFunction(),N=this.testFunction,P=k.slice().concat(k.map(Y=>"val_"+Y))):(N=null,_=[],P=k.slice());let F=TE(r.callbacks,r.yieldEvery);return yield this.fitLoop(C,w,k,f,r.epochs,r.verbose,F,N,_,r.shuffle,P,r.initialEpoch,null,null)}finally{this.isTraining=!1,ks(a,e),ks(l,i),ks(c,e),ks(u,i),ks(h,d),ks(m,p),g!=null&&it(g)}})}fitLoop(e,i,r,o,s,a,l,c,u,d,p,h,m,g){return W(this,null,function*(){o==null&&(o=32),s==null&&(s=1),d==null&&(d=!0),h==null&&(h=0);let f=!1;if(c!=null&&u!=null&&(f=!0),g!=null&&(f=!0,m==null))throw new B("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let y=this.checkNumSamples(i,o,m,"steps_per_epoch"),b;y!=null&&(b=Mr(0,y)),a==null&&(a=1);let{callbackList:x,history:_}=SE(l,a,s,h,y,m,o,f,p);x.setModel(this),this.history=_,yield x.onTrainBegin(),this.stopTraining_=!1;for(let w=h;w<s;++w){yield x.onEpochBegin(w);let C={};if(m!=null)throw new et("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new et("batch shuffling is not implemneted yet");d&&v.shuffle(b);let k=Cn(b),N=VE(y,o);for(let P=0;P<N.length;++P){let F={};if(yield x.onBatchBegin(P,F),H(()=>{let z=N[P][0],Y=N[P][1],K=Yc(k,z,Y-z);F.batch=P,F.size=Y-z;let Z=$E(i,K),te=e(Z);for(let U=0;U<r.length;++U){let j=r[U],q=te[U];F[j]=q,wi(q)}if(P===N.length-1&&f){let U=this.testLoop(c,u,o);for(let j=0;j<r.length;++j){let q=r[j],Q=U[j];wi(Q),C["val_"+q]=Q}}}),yield x.onBatchEnd(P,F),vE(F),this.stopTraining_)break}k.dispose()}if(yield x.onEpochEnd(w,C),this.stopTraining_)break}return yield x.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(e,i){return W(this,null,function*(){return WQ(this,e,i)})}trainOnBatch(e,i){return W(this,null,function*(){let r=yield this.standardizeUserData(e,i),o=r[0],s=r[1],l=this.makeTrainFunction()(o.concat(s)),c=[];for(let u of l){let d=yield u.data();c.push(d[0])}return it(l),ks(r[0],e),ks(r[1],i),Ei(c)})}getNamedWeights(e){let i=[],r=e!=null&&e.trainableOnly,o=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let a=0;a<o.length;++a)r&&!o[a].trainable||i.push({name:o[a].originalName,tensor:s[a]});return i}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let i=O0().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=i-O0().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=ws(this.loss);else if(Array.isArray(this.loss)){for(let i of this.loss)if(typeof i!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(i=>ws(i))}else{let i=Object.keys(this.loss);e={};let r=this.loss;for(let o of i)if(typeof r[o]=="string")e[o]=ws(r[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[ws(y_(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>ws(y_(e)));{let e={};for(let i in this.metrics)e[i]=ws(y_(this.metrics[i]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let i=hb(e.optimizer_config),r=eo(i),o;if(typeof e.loss=="string")o=Kc(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(a=>Kc(a));else if(e.loss!=null){o={};for(let a in e.loss)o[a]=Kc(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Kc(a));else if(e.metrics!=null){s={};for(let a in e.metrics)s[a]=Kc(e.metrics[a])}this.compile({loss:o,metrics:s,optimizer:r})}save(e,i){return W(this,null,function*(){if(typeof e=="string"){let u=xs.getSaveHandlers(e);if(u.length===0)throw new B(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new B(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new B("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let r=yield xs.encodeWeights(this.getNamedWeights(i)),l={modelTopology:this.toJSON(null,!1),format:yMe,generatedBy:`TensorFlow.js tfjs-layers v${mb}`,convertedBy:null};if((i==null?!1:i.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();let u="optimizer",{data:d,specs:p}=yield xs.encodeWeights(yield this.optimizer.getWeights(),u);r.specs.push(...p),r.data=xs.concatenateArrayBuffers([r.data,d])}return this.userDefinedMetadata!=null&&(UP(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=r.data,l.weightSpecs=r.specs,e.save(l)})}setUserDefinedMetadata(e){UP(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();ie.registerClass(el);var bMe=(()=>{class t extends el{}return t.className="Functional",t})();ie.registerClass(bMe);function Zd(t,n){return W(this,null,function*(){if(n==null&&(n={}),typeof t=="string"){let e=xs.getLoadHandlers(t,n);if(e.length===0)e.push(xs.browserHTTPRequest(t,n));else if(e.length>1)throw new B(`Found more than one (${e.length}) load handlers for URL '${t}'`);t=e[0]}return xMe(t,void 0,n)})}function xMe(t,n,e){return W(this,null,function*(){if(e==null&&(e={}),t.load==null)throw new B("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let i=yield t.load(),r=i.modelTopology;r.model_config!=null&&(r=r.model_config);let o=e.strict==null?!0:e.strict,s=i.weightData!=null&&i.weightSpecs!=null&&o,a=eo(hb(r),n,s),l=i.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),i.userDefinedMetadata!=null&&a.setUserDefinedMetadata(i.userDefinedMetadata),i.weightData!=null){if(i.weightSpecs==null)throw new B("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:u}=vMe(i.weightData,i.weightSpecs);a.loadWeights(c,o),a.optimizer!=null&&u.length>0&&(yield a.optimizer.setWeights(u)),it(c),it(u.map(d=>d.tensor))}return a})}function vMe(t,n){let e=xs.decodeWeights(t,n),i={},r=[];return n.forEach(o=>{o.group==="optimizer"?r.push({name:o.name,tensor:e[o.name]}):i[o.name]=e[o.name]}),{modelWeights:i,optimizerWeights:r}}var BE=(()=>{class t extends el{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Xd("sequential_"),e.layers!=null)for(let i of e.layers)this.add(i)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new B(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let i=e instanceof t||e instanceof el,r;if(i){if(r=e,r.outputs.length!==1)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new B("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new B("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let o=yE({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(i)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new B(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new B("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=LP(this.outputs[0])}this.inboundNodes=[],new Zc({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:_s(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{let o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,i){return this.model==null&&this.build(),this.model.call(e,i)}build(e){if(mt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new el({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,i,r=console.log){this.built||this.build(),super.summary(e,i,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,i,r={}){if(!this.built)throw new Ar("The model needs to be compiled before being used.");return this.model.evaluate(e,i,r)}evaluateDataset(e,i){return W(this,null,function*(){if(!this.built)throw new Ar("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,i)})}predict(e,i={}){return this.model==null&&this.build(),this.model.predict(e,i)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(o,s){return W(this,arguments,function*(e,i,r={}){if(!this.built)throw new Ar("The model needs to be compiled before being used.");return this.model.fit(e,i,r)})}fitDataset(e,i){return W(this,null,function*(){if(!this.built)throw new Ar("The model needs to be compiled before being used.");return this.model.fitDataset(e,i)})}trainOnBatch(e,i){return W(this,null,function*(){return this.model.trainOnBatch(e,i)})}static fromConfig(e,i,r={},o=!1){let s,a={};if(i instanceof Array){if(i[0].className==null||i[0].className==="Merge")throw new B("Legacy serialization format not supported yet.");s=i}else v.assert(i.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=i.layers,delete i.layers,a=i;let l=new e(a);if(!(l instanceof t))throw new et(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(let c of s){let d=eo(c,void 0,o);o&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(this.model==null)throw new B("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new B("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let i of this.layers){let r={};r.className=i.getClassName(),r.config=i.getConfig(),e.push(r)}return{name:this.name,layers:e}}}return t.className="Sequential",t})();ie.registerClass(BE);function jP(t){return new el(t)}function gb(t){return new BE(t)}function b_(t){return yE(t)}var Gi=class extends ie.Serializable{getConfig(){return{}}},_Me=(()=>{class t extends Gi{apply(e,i=1){return cQ(e,i)}}return t.className="elu",t})();ie.registerClass(_Me);var wMe=(()=>{class t extends Gi{apply(e){return Y0(e)}}return t.className="selu",t})();ie.registerClass(wMe);var CMe=(()=>{class t extends Gi{apply(e){return So(e)}}return t.className="relu",t})();ie.registerClass(CMe);var TMe=(()=>{class t extends Gi{apply(e){return H(()=>Ho(6,So(e)))}}return t.className="relu6",t})();ie.registerClass(TMe);var SMe=(()=>{class t extends Gi{apply(e){return e}}return t.className="linear",t})();ie.registerClass(SMe);var kMe=(()=>{class t extends Gi{apply(e){return gs(e)}}return t.className="sigmoid",t})();ie.registerClass(kMe);var EMe=(()=>{class t extends Gi{apply(e){return dQ(e)}}return t.className="hardSigmoid",t})();ie.registerClass(EMe);var IMe=(()=>{class t extends Gi{apply(e){return Ya(e)}}return t.className="softplus",t})();ie.registerClass(IMe);var DMe=(()=>{class t extends Gi{apply(e){return uQ(e)}}return t.className="softsign",t})();ie.registerClass(DMe);var AMe=(()=>{class t extends Gi{apply(e){return Qh(e)}}return t.className="tanh",t})();ie.registerClass(AMe);var XP=(()=>{class t extends Gi{apply(e,i=-1){return am(e,i)}}return t.className="softmax",t})();ie.registerClass(XP);var NMe=(()=>{class t extends Gi{apply(e,i=-1){return W0(e,i)}}return t.className="logSoftmax",t})();ie.registerClass(NMe);var MMe=(()=>{class t extends Gi{apply(e){return H(()=>H(()=>{let i=Math.sqrt(2),r=R(.5,ne(1,G0(we(e,i))));return R(e,r)}))}}return t.className="gelu",t})();ie.registerClass(MMe);var OMe=(()=>{class t extends Gi{apply(e){return H(()=>R(.5,R(e,ne(1,Qh(R(dn(we(2,Math.PI)),ne(e,R(.044715,Zr(e,3)))))))))}}return t.className="gelu_new",t})();ie.registerClass(OMe);var RMe=(()=>{class t extends Gi{apply(e){return H(()=>R(e,Qh(Ya(e))))}}return t.className="mish",t})();ie.registerClass(RMe);var FMe=(()=>{class t extends Gi{apply(e,i=1){return H(()=>R(gs(R(e,i)),e))}}return t.className="swish",t})();ie.registerClass(FMe);function oa(t){return t.getClassName()}function qP(t,n={}){return Qa(t,ie.SerializationMap.getMap().classNameMap,n,"activation")}function sa(t){if(t==null){let n={};return n.className="linear",n.config={},qP(n)}if(typeof t=="string"){let n={};return n.className=t,n.config={},qP(n)}else return t instanceof Gi?t:qP(t)}function LMe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var zE=class extends ie.Serializable{},ZQ=(()=>{class t extends zE{constructor(e){super(),LMe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return H(()=>{let i=wn([1]);return this.hasL1&&(i=ne(i,Se(R(this.l1,ri(e))))),this.hasL2&&(i=ne(i,Se(R(this.l2,mm(e))))),$(i,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,i){return new e({l1:i.l1,l2:i.l2})}}return t.className="L1L2",t})();ie.registerClass(ZQ);var YQ={l1l2:"L1L2"};function en(t){return rb(t)}function QQ(t,n={}){return Qa(t,ie.SerializationMap.getMap().classNameMap,n,"regularizer")}function hn(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in YQ?YQ[t]:t,config:{}};return QQ(e)}else return t instanceof zE?t:QQ(t)}var KP=(()=>{class t extends Je{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,i){e=je(e);let r=So(e);return this.maxValue!=null&&(r=Qn(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ReLU",t})();ie.registerClass(KP);var YP=(()=>{class t extends Je{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,i){let r=je(e);return em(r,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LeakyReLU",t})();ie.registerClass(YP);var QP=(()=>{class t extends Je{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=on(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=hn(e.alphaRegularizer),this.alphaConstraint=Ln(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new B(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=mt(e);let i=e.slice(1);if(this.sharedAxes!=null)for(let o of this.sharedAxes)i[o-1]=1;this.alpha=this.addWeight("alpha",i,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let r={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)r[o]=e[o];this.inputSpec=[new pn({ndim:e.length,axes:r})],this.built=!0}call(e,i){return e=je(e),rm(e,this.alpha.read())}getConfig(){let e={alphaInitializer:yn(this.alphaInitializer),alphaRegularizer:en(this.alphaRegularizer),alphaConstraint:Fn(this.alphaConstraint),sharedAxes:this.sharedAxes},i=super.getConfig();return Object.assign(e,i),e}}return t.className="PReLU",t})();ie.registerClass(QP);var ZP=(()=>{class t extends Je{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new et(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,i){let r=je(e);return Hc(r)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ELU",t})();ie.registerClass(ZP);var JP=(()=>{class t extends Je{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,i){let r=je(e);return R(r,le(Un(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ThresholdedReLU",t})();ie.registerClass(JP);var e$=(()=>{class t extends Je{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new XP().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,i){return H(()=>{let r=je(e),o=i.mask;if(o!=null){let s=R(Ce(Dr(r.shape),le(o,r.dtype)),Ge(-1e9));r=ne(r,s)}return this.axis instanceof Array?this.axis.length>1?oi(Ce(r,j0(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Softmax",t})();ie.registerClass(e$);function Jd(t,n,e){if(typeof t=="number")return _s(t,n);if(t.length!==n)throw new B(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${t.length} elements.`);for(let i=0;i<n;++i){let r=t[i];if(!oQ(r))throw new B(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(t)} including a non-integer number ${r}`)}return t}function to(t,n,e,i,r=1){if(t==null)return t;let o=n+(n-1)*(r-1),s;return e==="same"?s=t:s=t-o+1,Math.floor((s+i-1)/i)}function aa(t,n,e,i){if(t==null)return null;if(i==="valid")t=t*n+ra([e-n,0]);else if(i==="same")t=t*n;else throw new B(`Unsupport padding mode: ${i}.`);return t}function v_(t,n){return H(()=>(In(n),n==="channelsFirst"?yt(t,[0,2,3,1]):t))}function t$(t,n){return H(()=>(In(n),n==="channelsFirst"?yt(t,[0,2,3,4,1]):t))}function $Me(t,n,e,i=1,r="valid",o,s=1){return H(()=>{if(o==null&&(o=Or()),In(o),t.shape.length!==3)throw new B(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(n.shape.length!==3)throw new B(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(e!=null&&e.shape.length!==1)throw new B(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(o==="channelsFirst"&&(t=yt(t,[0,2,1])),r==="causal")throw new et("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=$0(t,n,i,r==="same"?"same":"valid","NWC",s);return e!=null&&(a=Rr(a,e)),a})}function JQ(t,n,e,i=[1,1],r="valid",o,s,a=null){return H(()=>{if(o==null&&(o=Or()),In(o),t.rank!==3&&t.rank!==4)throw new B(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(n.rank!==3&&n.rank!==4)throw new B(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=v_(t,o);if(r==="causal")throw new et("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=pm.conv2d({x:l,filter:n,strides:i,pad:r==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:e,activation:a}),o==="channelsFirst"&&(l=yt(l,[0,3,1,2])),l})}function VMe(t,n,e,i=[1,1,1],r="valid",o,s){return H(()=>{if(o==null&&(o=Or()),In(o),t.rank!==4&&t.rank!==5)throw new B(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(n.rank!==4&&n.rank!==5)throw new B(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=t$(t,o);if(r==="causal")throw new et("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=NL(a,n,i,r==="same"?"same":"valid","NDHWC",s),e!=null&&(a=Rr(a,e)),o==="channelsFirst"&&(a=yt(a,[0,4,1,2,3])),a})}var x_=class t extends Je{constructor(n,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(e),this.rank=n,Wn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new et(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Jd(e.kernelSize,n,"kernelSize"),this.strides=Jd(e.strides==null?1:e.strides,n,"strides"),this.padding=e.padding==null?"valid":e.padding,Nr(this.padding),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,In(this.dataFormat),this.activation=sa(e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.biasInitializer=on(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ln(e.biasConstraint),this.biasRegularizer=hn(e.biasRegularizer),this.activityRegularizer=hn(e.activityRegularizer),this.dilationRate=Jd(e.dilationRate==null?1:e.dilationRate,n,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new B(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new B(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new B(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(n){if(Xo("kernelSize"in n,"required key 'kernelSize' not in config"),typeof n.kernelSize!="number"&&!oE(n.kernelSize,"number",1,3))throw new B(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){let n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:oa(this.activation),useBias:this.useBias,biasInitializer:yn(this.biasInitializer),biasRegularizer:en(this.biasRegularizer),activityRegularizer:en(this.activityRegularizer),biasConstraint:Fn(this.biasConstraint)},e=super.getConfig();return Object.assign(n,e),n}},yb=class t extends x_{constructor(n,e){super(n,e),this.kernel=null,t.verifyArgs(e),this.filters=e.filters,Wn(this.filters,"filters"),this.kernelInitializer=on(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ln(e.kernelConstraint),this.kernelRegularizer=hn(e.kernelRegularizer)}build(n){n=mt(n);let e=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[e]==null)throw new B(`The channel dimension of the input should be defined. Found ${n[e]}`);let i=n[e],r=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:i}}],this.built=!0}call(n,e){return H(()=>{n=je(n);let i,r=this.bias==null?null:this.bias.read(),o=sE(this.activation.getClassName());if(o!=null&&this.rank===2)i=JQ(n,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)i=$Me(n,this.kernel.read(),r,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)i=JQ(n,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)i=VMe(n,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new et("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(i=this.activation.apply(i))}return i})}computeOutputShape(n){n=mt(n);let e=[],i=this.dataFormat==="channelsLast"?n.slice(1,n.length-1):n.slice(2);for(let o=0;o<i.length;++o){let s=to(i[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);e.push(s)}let r=[n[0]];return this.dataFormat==="channelsLast"?(r=r.concat(e),r.push(this.filters)):(r.push(this.filters),r=r.concat(e)),r}getConfig(){let n={filters:this.filters,kernelInitializer:yn(this.kernelInitializer),kernelRegularizer:en(this.kernelRegularizer),kernelConstraint:Fn(this.kernelConstraint)},e=super.getConfig();return Object.assign(n,e),n}static verifyArgs(n){if(!("filters"in n)||typeof n.filters!="number"||n.filters<1)throw new B(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}},GE=(()=>{class t extends yb{constructor(e){super(2,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!oE(e.kernelSize,"number",1,2))throw new B(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv2D",t})();ie.registerClass(GE);var UE=(()=>{class t extends yb{constructor(e){super(3,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new B(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv3D",t})();ie.registerClass(UE);var n$=(()=>{class t extends GE{constructor(e){if(super(e),this.inputSpec=[new pn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new B(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=mt(e),e.length!==4)throw new B("Input should have rank 4; Received input shape: "+JSON.stringify(e));let i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new B("The channel dimension of the inputs should be defined. Found `None`.");let r=e[i],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pn({ndim:4,axes:{[i]:r}})],this.built=!0}call(e,i){return H(()=>{let r=je(e);if(r.shape.length!==4)throw new B(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);let o=r.shape,s=o[0],a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);let c=o[a],u=o[l],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],m=this.strides[1],g=aa(c,h,d,this.padding),f=aa(u,m,p,this.padding),y=[s,g,f,this.filters];this.dataFormat!=="channelsLast"&&(r=yt(r,[0,2,3,1]));let b=V0(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=yt(b,[0,3,1,2])),this.bias!=null&&(b=Rr(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=mt(e);let i=e.slice(),r,o,s;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3):(r=3,o=1,s=2);let a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return i[r]=this.filters,i[o]=aa(i[o],c,a,this.padding),i[s]=aa(i[s],u,l,this.padding),i}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv2DTranspose",t})();ie.registerClass(n$);var i$=(()=>{class t extends UE{constructor(e){if(super(e),this.inputSpec=[new pn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new B(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=mt(e),e.length!==5)throw new B("Input should have rank 5; Received input shape: "+JSON.stringify(e));let i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new B("The channel dimension of the inputs should be defined. Found `None`.");let r=e[i],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new pn({ndim:5,axes:{[i]:r}})],this.built=!0}call(e,i){return H(()=>{let r=je(e);if(r.shape.length!==5)throw new B(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);let o=r.shape,s=o[0],a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);let u=o[c],d=o[a],p=o[l],h=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],f=this.strides[0],y=this.strides[1],b=this.strides[2],x=aa(u,f,h,this.padding),_=aa(d,y,m,this.padding),w=aa(p,b,g,this.padding),C=[s,x,_,w,this.filters];this.dataFormat!=="channelsLast"&&(r=yt(r,[0,2,3,4,1]));let k=ML(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(k=yt(k,[0,4,1,2,3])),this.bias!==null&&(k=Rr(k,this.bias.read(),this.dataFormat)),this.activation!==null&&(k=this.activation.apply(k)),k})}computeOutputShape(e){e=mt(e);let i=e.slice(),r,o,s,a;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3,a=4):(r=4,o=1,s=2,a=3);let l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return i[r]=this.filters,i[o]=aa(i[o],d,l,this.padding),i[s]=aa(i[s],p,c,this.padding),i[a]=aa(i[a],h,u,this.padding),i}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv3DTranspose",t})();ie.registerClass(i$);var BMe=(()=>{class t extends yb{constructor(e,i){if(super(e,i),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,i.filters==null)throw new B("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(i.kernelInitializer!=null||i.kernelRegularizer!=null||i.kernelConstraint!=null)throw new B("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(i.padding!=null&&i.padding!=="same"&&i.padding!=="valid")throw new B(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(i.padding)}`);this.depthMultiplier=i.depthMultiplier==null?1:i.depthMultiplier,this.depthwiseInitializer=on(i.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=hn(i.depthwiseRegularizer),this.depthwiseConstraint=Ln(i.depthwiseConstraint),this.pointwiseInitializer=on(i.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=hn(i.pointwiseRegularizer),this.pointwiseConstraint=Ln(i.pointwiseConstraint)}build(e){if(e=mt(e),e.length<this.rank+2)throw new B(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null||e[i]<0)throw new B(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[i])}`);let r=e[i],o=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let l=0;l<this.rank;++l)s.push(1);s.push(r*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new pn({ndim:this.rank+2,axes:{[i]:r}})],this.built=!0}call(e,i){return H(()=>{e=je(e);let r;if(this.rank===1)throw new et("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=yt(e,[0,2,3,1])),r=Q0(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Rr(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=yt(r,[0,3,1,2])),r})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=yn(this.depthwiseInitializer),e.pointwiseInitializer=yn(this.pointwiseInitializer),e.depthwiseRegularizer=en(this.depthwiseRegularizer),e.pointwiseRegularizer=en(this.pointwiseRegularizer),e.depthwiseConstraint=Fn(this.depthwiseConstraint),e.pointwiseConstraint=Fn(this.pointwiseConstraint),e}}return t.className="SeparableConv",t})();var r$=(()=>{class t extends BMe{constructor(e){super(2,e)}}return t.className="SeparableConv2D",t})();ie.registerClass(r$);var o$=(()=>{class t extends yb{constructor(e){super(1,e),t.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!oE(e.kernelSize,"number",1,1))throw new B(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv1D",t})();ie.registerClass(o$);var s$=(()=>{class t extends Je{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,i){return H(()=>{if(e=je(e),this.dataFormat==="channelsLast"){let r=u_(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return u_(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let r=u_(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return u_(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Cropping2D",t})();ie.registerClass(s$);var a$=(()=>{class t extends Je{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,In(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,iQ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let i=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],i,r]}else{let i=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],i,r,e[3]]}}call(e,i){return H(()=>{let r=je(e),o=r.shape;if(this.dataFormat==="channelsFirst"){r=yt(r,[0,2,3,1]);let s=this.size[0]*o[2],a=this.size[1]*o[3],l=this.interpolation==="nearest"?Eo.resizeNearestNeighbor(r,[s,a]):Eo.resizeBilinear(r,[s,a]);return yt(l,[0,3,1,2])}else{let s=this.size[0]*o[1],a=this.size[1]*o[2];return this.interpolation==="nearest"?Eo.resizeNearestNeighbor(r,[s,a]):Eo.resizeBilinear(r,[s,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}}return t.className="UpSampling2D",t})();ie.registerClass(a$);function zMe(t,n,e=[1,1],i="valid",r,o){return H(()=>{r==null&&(r=Or()),In(r);let s=v_(t,r);if(t.rank!==4)throw new B(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(n.rank!==4)throw new B(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return s=Uc(s,n,e,i==="same"?"same":"valid","NHWC",o),r==="channelsFirst"&&(s=yt(s,[0,3,1,2])),s})}var l$=(()=>{class t extends x_{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=on(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ln(e.depthwiseConstraint),this.depthwiseRegularizer=hn(e.depthwiseRegularizer)}build(e){if(e=mt(e),e.length<4)throw new B(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let i=this.dataFormat==="channelsFirst"?1:3;if(e[i]==null||e[i]<0)throw new B(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[i]}).`);let r=e[i],o=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,i){return H(()=>{e=je(e);let r=zMe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Rr(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=mt(e);let i=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=to(i,this.kernelSize[0],this.padding,this.strides[0]),a=to(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,s,a]:[e[0],s,a,o]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=yn(this.depthwiseInitializer),e.depthwiseRegularizer=en(this.depthwiseRegularizer),e.depthwiseConstraint=Fn(this.depthwiseRegularizer),e}}return t.className="DepthwiseConv2D",t})();ie.registerClass(l$);function c$(t,n,e,i){if(Array.isArray(t)){if(n!=null||e!=null)throw new B("When inputs is an array, neither initialState or constants should be provided");i!=null&&(e=t.slice(t.length-i,t.length),t=t.slice(0,t.length-i)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function r(o){return o==null||Array.isArray(o)?o:[o]}return n=r(n),e=r(e),{inputs:t,initialState:n,constants:e}}function u$(t,n,e,i=!1,r,o,s=!1,a=!1){return H(()=>{let l=n.shape.length;if(l<3)throw new B(`Input should be at least 3D, but is ${l}D.`);let c=[1,0].concat(Mr(2,l));if(n=yt(n,c),o!=null)throw new et("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r!=null&&(r=le(le(r,"bool"),"float32"),r.rank===l-1&&(r=Zn(r,-1)),r=yt(r,c)),i&&(n=Wo(n,0),r!=null&&(r=Wo(r,0)));let u=[],d,p=e,h=n.shape[0],m=hr(n),g;r!=null&&(g=hr(r));for(let y=0;y<h;++y){let b=m[y],x=H(()=>t(b,p));if(r==null)d=x[0],p=x[1];else{let _=H(()=>{let w=g[y],C=Ce(Si(w),w),k=ne(R(x[0],w),R(p[0],C)),N=p.map((P,F)=>ne(R(x[1][F],w),R(P,C)));return{output:k,newStates:N}});d=_.output,p=_.newStates}a&&u.push(d)}let f;return a&&(f=ui(u,1)),[d,f,p]})}var tl=(()=>{class t extends Je{constructor(e){super(e);let i;if(e.cell==null)throw new B("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?i=new jE({cells:e.cell}):i=e.cell,i.stateSize==null)throw new B("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=i,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new pn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Mr(0,e).map(i=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){gE(e)&&(e=e[0]),e=e;let i=this.cell.stateSize;Array.isArray(i)||(i=[i]);let r=i[0],o;if(this.returnSequences?o=[e[0],e[1],r]:o=[e[0],r],this.returnState){let s=[];for(let a of i)s.push([e[0],a]);return[o].concat(s)}else return o}computeMask(e,i){return H(()=>{Array.isArray(i)&&(i=i[0]);let r=this.returnSequences?i:null;if(this.returnState){let o=this.states.map(s=>null);return[r].concat(o)}else return r})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,i=[];for(let r=0;r<e;++r)i.push(null);return i}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new et("Constants support is not implemented in RNN yet.");gE(e)&&(e=e[0]),e=e;let r=this.stateful?e[0]:null,o=e.slice(2);this.inputSpec[0]=new pn({shape:[r,null,...o]});let s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!v.arraysEqual(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new B(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new pn({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,i=!1){H(()=>{if(!this.stateful)throw new qo("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape[0];if(r==null)throw new B("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>wn([r,o])):this.states_=[wn([r,this.cell.stateSize])];else if(e==null)it(this.states_),this.keptStates!=null&&(it(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>wn([r,o])):this.states_[0]=wn([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new B(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);i===!0?this.keptStates.push(this.states_.slice()):it(this.states_);for(let o=0;o<this.states_.length;++o){let s=e[o],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,l=[r,a];if(!v.arraysEqual(s.shape,l))throw new B(`State ${o} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${s.shape}`);this.states_[o]=s}}this.states_=this.states_.map(o=>wi(o.clone()))})}apply(e,i){let r=i==null?null:i.initialState,o=i==null?null:i.constants;i==null&&(i={});let s=c$(e,r,o,this.numConstants);e=s.inputs,r=s.initialState,o=s.constants;let a=[],l=[];if(r!=null){i.initialState=r,a=a.concat(r),this.stateSpec=[];for(let u of r)this.stateSpec.push(new pn({shape:u.shape}));l=l.concat(this.stateSpec)}if(o!=null&&(i.constants=o,a=a.concat(o),this.numConstants=o.length),a[0]instanceof fr){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,i);return this.inputSpec=p,h}else return super.apply(e,i)}call(e,i){return H(()=>{let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;e=je(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));let a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new B(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let l={training:o},u=u$((g,f)=>{let y=this.cell.call([g].concat(f),l);return[y[0],y.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),d=u[0],p=u[1],h=u[2];this.stateful&&this.resetStates(h,o);let m=this.returnSequences?p:d;return this.returnState?[m].concat(h):m})}getInitialState(e){return H(()=>{let i=wn(e.shape);return i=Se(i,[1,2]),i=Qc(i),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?pE(i,[1,r]):i):this.cell.stateSize>1?[pE(i,[1,this.cell.stateSize])]:[i]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),i={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(i.numConstants=this.numConstants);let r=this.cell.getConfig();return this.getClassName()===t.className&&(i.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),i)}static fromConfig(e,i,r={}){let o=i.cell,s=eo(o,r);return new e(Object.assign(i,{cell:s}))}}return t.className="RNN",t})();ie.registerClass(tl);var eu=class extends Je{},HE=(()=>{class t extends eu{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Wn(this.units,"units"),this.activation=sa(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=on(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=on(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=on(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hn(e.kernelRegularizer),this.recurrentRegularizer=hn(e.recurrentRegularizer),this.biasRegularizer=hn(e.biasRegularizer),this.kernelConstraint=Ln(e.kernelConstraint),this.recurrentConstraint=Ln(e.recurrentConstraint),this.biasConstraint=Ln(e.biasConstraint),this.dropout=hm([1,ra([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=hm([1,ra([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=mt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,i){return H(()=>{if(e=e,e.length!==2)throw new B(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];let o=i.training==null?!1:i.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Si(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Si(r),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let s,a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?s=Ss(R(e,a),this.kernel.read()):s=Ss(e,this.kernel.read()),this.bias!=null&&(s=Rr(s,this.bias.read())),l!=null&&(r=R(r,l));let c=ne(s,Ss(r,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let e=super.getConfig(),i={units:this.units,activation:oa(this.activation),useBias:this.useBias,kernelInitializer:yn(this.kernelInitializer),recurrentInitializer:yn(this.recurrentInitializer),biasInitializer:yn(this.biasInitializer),kernelRegularizer:en(this.kernelRegularizer),recurrentRegularizer:en(this.recurrentRegularizer),biasRegularizer:en(this.biasRegularizer),activityRegularizer:en(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),i)}}return t.className="SimpleRNNCell",t})();ie.registerClass(HE);var d$=(()=>{class t extends tl{constructor(e){e.cell=new HE(e),super(e)}call(e,i){return H(()=>{this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,i){return new e(i)}}return t.className="SimpleRNN",t})();ie.registerClass(d$);var WE=(()=>{class t extends eu{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new B("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Wn(this.units,"units"),this.activation=sa(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sa(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=on(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=on(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=on(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=hn(e.kernelRegularizer),this.recurrentRegularizer=hn(e.recurrentRegularizer),this.biasRegularizer=hn(e.biasRegularizer),this.kernelConstraint=Ln(e.kernelConstraint),this.recurrentConstraint=Ln(e.recurrentConstraint),this.biasConstraint=Ln(e.biasConstraint),this.dropout=hm([1,ra([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=hm([1,ra([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=mt(e);let i=e[e.length-1];this.kernel=this.addWeight("kernel",[i,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,i){return H(()=>{if(e=e,e.length!==2)throw new B(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let r=i.training==null?!1:i.training,o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Si(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Si(o),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));let s=this.dropoutMask,a=this.recurrentDropoutMask,l,c,u;0<this.dropout&&this.dropout<1&&(e=R(e,s[0]));let d=Ss(e,this.kernel.read());this.useBias&&(d=Rr(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=R(o,a[0]));let p=this.recurrentKernel.read(),[h,m]=gi(p,[2*this.units,this.units],p.rank-1),g=Ss(o,h),[f,y,b]=gi(d,3,d.rank-1),[x,_]=gi(g,2,g.rank-1);l=this.recurrentActivation.apply(ne(f,x)),c=this.recurrentActivation.apply(ne(y,_));let w=Ss(R(c,o),m);u=this.activation.apply(ne(b,w));let C=ne(R(l,o),R(ne(1,St(l)),u));return[C,C]})}getConfig(){let e=super.getConfig(),i={units:this.units,activation:oa(this.activation),recurrentActivation:oa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yn(this.kernelInitializer),recurrentInitializer:yn(this.recurrentInitializer),biasInitializer:yn(this.biasInitializer),kernelRegularizer:en(this.kernelRegularizer),recurrentRegularizer:en(this.recurrentRegularizer),biasRegularizer:en(this.biasRegularizer),activityRegularizer:en(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),i)}}return t.className="GRUCell",t})();ie.registerClass(WE);var p$=(()=>{class t extends tl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new WE(e),super(e)}call(e,i){return H(()=>{this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,i){return i.implmentation===0&&(i.implementation=1),new e(i)}}return t.className="GRU",t})();ie.registerClass(p$);var bb=(()=>{class t extends eu{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Wn(this.units,"units"),this.activation=sa(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sa(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=on(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=on(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=on(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=hn(e.kernelRegularizer),this.recurrentRegularizer=hn(e.recurrentRegularizer),this.biasRegularizer=hn(e.biasRegularizer),this.kernelConstraint=Ln(e.kernelConstraint),this.recurrentConstraint=Ln(e.recurrentConstraint),this.biasConstraint=Ln(e.biasConstraint),this.dropout=hm([1,ra([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=hm([1,ra([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var i;e=mt(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){let s=this.biasInitializer,a=this.units;o=new(i=class extends Fr{apply(c,u){let d=s.apply([a]),p=new fE().apply([a]),h=s.apply([a*2]);return DP(DP(d,p),h)}},i.className="CustomInit",i)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,i){return H(()=>{let r=i.training==null?!1:i.training;if(e=e,e.length!==3)throw new B(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1],s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Si(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Si(o),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,c,u,d,p;0<this.dropout&&this.dropout<1&&(e=R(e,a[0]));let h=Ss(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=R(o,l[0])),h=ne(h,Ss(o,this.recurrentKernel.read())),this.useBias&&(h=Rr(h,this.bias.read()));let[m,g,f,y]=gi(h,4,h.rank-1);c=this.recurrentActivation.apply(m),u=this.recurrentActivation.apply(g),d=ne(R(u,s),R(c,this.activation.apply(f))),p=this.recurrentActivation.apply(y);let b=R(p,this.activation.apply(d));return[b,b,d]})}getConfig(){let e=super.getConfig(),i={units:this.units,activation:oa(this.activation),recurrentActivation:oa(this.recurrentActivation),useBias:this.useBias,kernelInitializer:yn(this.kernelInitializer),recurrentInitializer:yn(this.recurrentInitializer),biasInitializer:yn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:en(this.kernelRegularizer),recurrentRegularizer:en(this.recurrentRegularizer),biasRegularizer:en(this.biasRegularizer),activityRegularizer:en(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),i)}}return t.className="LSTMCell",t})();ie.registerClass(bb);var h$=(()=>{class t extends tl{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new bb(e),super(e)}call(e,i){return H(()=>{this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,i){return i.implmentation===0&&(i.implementation=1),new e(i)}}return t.className="LSTM",t})();ie.registerClass(h$);var jE=(()=>{class t extends eu{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let i of this.cells.slice().reverse())Array.isArray(i.stateSize)?e.push(...i.stateSize):e.push(i.stateSize);return e}call(e,i){return H(()=>{e=e;let r=e.slice(1),o=[];for(let l of this.cells.slice().reverse())Array.isArray(l.stateSize)?o.push(r.splice(0,l.stateSize.length)):o.push(r.splice(0,1));o.reverse();let s=[],a;for(let l=0;l<this.cells.length;++l){let c=this.cells[l];r=o[l],l===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=c.call(a,i),s.push(a.slice(1))}r=[];for(let l of s.slice().reverse())r.push(...l);return[a[0]].concat(r)})}build(e){gE(e)&&(e=e[0]),e=e;let i;this.cells.forEach((r,o)=>{ia(`RNNCell_${o}`,()=>{r.build(e),Array.isArray(r.stateSize)?i=r.stateSize[0]:i=r.stateSize,e=[e[0],i]})}),this.built=!0}getConfig(){let e=super.getConfig(),i=s=>({className:s.getClassName(),config:s.getConfig()}),o={cells:this.cells.map(i)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,i,r={}){let o=[];for(let s of i.cells)o.push(eo(s,r));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let i of this.cells)e.push(...i.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let i of this.cells)e.push(...i.nonTrainableWeights);if(!this.trainable){let i=[];for(let r of this.cells)i.push(...r.trainableWeights);return i.concat(e)}return e}getWeights(){let e=[];for(let i of this.cells)e.push(...i.weights);return p_(e)}setWeights(e){let i=[];for(let r of this.cells){let o=r.weights.length,s=e.splice(o);for(let a=0;a<r.weights.length;++a)i.push([r.weights[a],s[a]])}ub(i)}}return t.className="StackedRNNCells",t})();ie.registerClass(jE);function tu(t){let{ones:n,rate:e,training:i=!1,count:r=1,dropoutFunc:o}=t,s=()=>o!=null?o(n(),e):mE(n(),e),a=()=>Kd(s,n,i);return!r||r<=1?wi(a().clone()):Array(r).fill(void 0).map(a).map(c=>wi(c.clone()))}var GMe=function(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e};var UMe=(()=>{class t extends tl{constructor(e){if(e.unroll)throw new et("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new et("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new pn({ndim:5})]}call(e,i){return H(()=>{if(this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),i&&i.constants)throw new B("ConvRNN2D cell does not support constants");let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}computeOutputShape(e){let i=this.computeSingleOutputShape(e);return this.returnSequences||(i=[i[0],...i.slice(2)]),this.returnState&&(i=[i,...Array(2).fill([e[0],...i.slice(-3)])]),i}getInitialState(e){return H(()=>{let{stateSize:i}=this.cell,r=e.shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)],a=wn(s);return Array.isArray(i)?Array(i.length).fill(a):[a]})}resetStates(e,i=!1){H(()=>{if(!this.stateful)throw new qo("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)];if(r[0]==null)throw new B("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>wn(s)):this.states_=[wn(s)];else if(e==null)it(this.states_),this.keptStates!=null&&(it(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>wn(s)):this.states_[0]=wn(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new B(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);i?this.keptStates.push(this.states_.slice()):it(this.states_);for(let l=0;l<this.states_.length;++l){let c=e[l],u=s;if(!v.arraysEqual(c.shape,u))throw new B(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>wi(l.clone()))})}computeSingleOutputShape(e){let{dataFormat:i,filters:r,kernelSize:o,padding:s,strides:a,dilationRate:l}=this.cell,c=i==="channelsFirst",u=e[c?3:2],d=e[c?4:3],p=to(u,o[0],s,a[0],l[0]),h=to(d,o[1],s,a[1],l[1]);return[...e.slice(0,2),...c?[r,p,h]:[p,h,r]]}}return t.className="ConvRNN2D",t})(),qE=(()=>{class t extends bb{constructor(e){let{filters:i,kernelSize:r,strides:o,padding:s,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:i})),this.filters=i,Wn(this.filters,"filters"),this.kernelSize=Jd(r,2,"kernelSize"),this.kernelSize.forEach(c=>Wn(c,"kernelSize")),this.strides=Jd(o||1,2,"strides"),this.strides.forEach(c=>Wn(c,"strides")),this.padding=s||"valid",Nr(this.padding),this.dataFormat=a||"channelsLast",In(this.dataFormat),this.dilationRate=Jd(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>Wn(c,"dilationRate"))}build(e){var i;e=mt(e);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new B(`The channel dimension of the input should be defined. Found ${e[r]}`);let o=e[r],s=4,a=this.kernelSize.concat([o,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let l=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let u=this.biasInitializer,d=this.filters;c=new(i=class extends Fr{apply(h,m){let g=u.apply([d]),f=Dr([d]),y=u.apply([d*2]);return sb([g,f,y])}},i.className="CustomInit",i)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,i){return H(()=>{if(e.length!==3)throw new B(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=i.training||!1,o=e[0],s=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Si(o),rate:this.dropout,training:r,count:l,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,u=(se,ue,fe)=>!ue||!ue[fe]?se:R(ue[fe],se),d=u(o,c,0),p=u(o,c,1),h=u(o,c,2),m=u(o,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Si(s),rate:this.recurrentDropout,training:r,count:l,dropoutFunc:this.dropoutFunc}));let g=this.recurrentDropoutMask,f=u(s,g,0),y=u(s,g,1),b=u(s,g,2),x=u(s,g,3),_=3,[w,C,k,N]=gi(this.kernel.read(),l,_),[P,F,z,Y]=this.useBias?gi(this.bias.read(),l):[null,null,null,null];d=this.inputConv(d,w,P,this.padding),p=this.inputConv(p,C,F,this.padding),h=this.inputConv(h,k,z,this.padding),m=this.inputConv(m,N,Y,this.padding);let[K,Z,te,U]=gi(this.recurrentKernel.read(),l,_);f=this.recurrentConv(f,K),y=this.recurrentConv(y,Z),b=this.recurrentConv(b,te),x=this.recurrentConv(x,U);let j=this.recurrentActivation.apply(ne(d,f)),q=this.recurrentActivation.apply(ne(p,y)),Q=ne(R(q,a),R(j,this.activation.apply(ne(h,b)))),oe=R(this.recurrentActivation.apply(ne(m,x)),this.activation.apply(Q));return[oe,oe,Q]})}getConfig(){let e=super.getConfig(),{units:i}=e,r=GMe(e,["units"]),o={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),o)}inputConv(e,i,r,o){let s=wo(e,i,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Rr(s,r,this.dataFormat):s}recurrentConv(e,i){return wo(e,i,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();ie.registerClass(qE);var m$=(()=>{class t extends UMe{constructor(e){let i=new qE(e);super(Object.assign(Object.assign({},e),{cell:i}))}static fromConfig(e,i){return new e(i)}}return t.className="ConvLSTM2D",t})();ie.registerClass(m$);var XE=(()=>{class t extends Je{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let i=e.shape,r=[];for(let o=0;o<this.noiseShape.length;++o)r.push(this.noiseShape[o]==null?i[o]:this.noiseShape[o]);return r}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e);if(0<this.rate&&this.rate<1){let o=i.training==null?!1:i.training,s=this.getNoiseShape(r);return Kd(()=>mE(r,this.rate,s,this.seed),()=>r,o)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},i=super.getConfig();return Object.assign(e,i),e}dispose(){return super.dispose()}}return t.className="Dropout",t})();ie.registerClass(XE);var f$=(()=>{class t extends XE{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let i=e.shape;return[i[0],1,i[2]]}}return t.className="SpatialDropout1D",t})();ie.registerClass(f$);var g$=(()=>{class t extends Je{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),this.batchInputShape=[i,e.inputDim]}this.units=e.units,Wn(this.units,"units"),this.activation=sa(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=on(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=on(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ln(e.kernelConstraint),this.biasConstraint=Ln(e.biasConstraint),this.kernelRegularizer=hn(e.kernelRegularizer),this.biasRegularizer=hn(e.biasRegularizer),this.activityRegularizer=hn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=mt(e);let i=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[i,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:i}}],this.built=!0}computeOutputShape(e){e=mt(e);let i=e.slice();return i[i.length-1]=this.units,i}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e),o=sE(this.activation.getClassName()),s;return o!=null?s=Ss(r,this.kernel.read(),o,this.bias?this.bias.read():null):(s=Ss(r,this.kernel.read()),this.bias!=null&&(s=Rr(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){let e={units:this.units,activation:oa(this.activation),useBias:this.useBias,kernelInitializer:yn(this.kernelInitializer),biasInitializer:yn(this.biasInitializer),kernelRegularizer:en(this.kernelRegularizer),biasRegularizer:en(this.biasRegularizer),activityRegularizer:en(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),biasConstraint:Fn(this.biasConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dense",t})();ie.registerClass(g$);var y$=(()=>{class t extends Je{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=mt(e);for(let i of e.slice(1))if(i==null)throw new B(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ts(e,1)]}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){let o=[0];for(let s=2;s<r.rank;++s)o.push(s);o.push(1),r=yt(r,o)}return lQ(r)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let i=super.getConfig();return Object.assign(e,i),e}}return t.className="Flatten",t})();ie.registerClass(y$);var b$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.activation=sa(e.activation)}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e);return this.activation.apply(r)})}getConfig(){let e={activation:oa(this.activation)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Activation",t})();ie.registerClass(b$);var x$=(()=>{class t extends Je{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,i){return H(()=>(e=je(e),sQ(e,this.n)))}getConfig(){let e={n:this.n},i=super.getConfig();return Object.assign(e,i),e}}return t.className="RepeatVector",t})();ie.registerClass(x$);var v$=(()=>{class t extends Je{constructor(e){super(e),this.targetShape=e.targetShape;for(let i=0;i<this.targetShape.length;++i)this.isUnknown(this.targetShape[i])&&(this.targetShape[i]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,i){let r="Total size of new array must be unchanged.",o=i.slice(),s=1,a=null;for(let c=0;c<o.length;++c){let u=o[c];if(this.isUnknown(u))if(a===null)a=c;else throw new B("Can only specifiy one unknown dimension.");else s*=u}let l=Ts(e);if(a!==null){if(s===0||l%s!==0)throw new B(r);o[a]=l/s}else if(l!==s)throw new B(r);return o}computeOutputShape(e){let i=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){i=!0;break}return i?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e),o=r.shape,s=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return $(r,s)})}getConfig(){let e={targetShape:this.targetShape},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Reshape",t})();ie.registerClass(v$);var _$=(()=>{class t extends Je{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let i=Mr(1,e.dims.length+1);if(!v.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new pn({ndim:this.dims.length+1})]}computeOutputShape(e){e=mt(e);let i=e.slice();return this.dims.forEach((r,o)=>{i[o+1]=e[r]}),i}call(e,i){return yt(je(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Permute",t})();ie.registerClass(_$);var w$=(()=>{class t extends Je{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={maskValue:this.maskValue};return Object.assign(i,e),i}computeMask(e,i){let r=je(e);return Py(jd(r,this.maskValue),-1)}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e),a=Py(jd(r,this.maskValue),-1,!0);return R(r,le(a,r.dtype))})}}return t.className="Masking",t})();ie.registerClass(w$);var C$=(()=>{class t extends Je{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let i=null;e.batchSize!=null&&(i=e.batchSize),e.inputLength==null?this.batchInputShape=[i,null]:this.batchInputShape=[i].concat(Qt(e.inputLength))}this.inputDim=e.inputDim,Wn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Wn(this.outputDim,"outputDim"),this.embeddingsInitializer=on(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=hn(e.embeddingsRegularizer),this.activityRegularizer=hn(e.activityRegularizer),this.embeddingsConstraint=Ln(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,i){return H(()=>this.maskZero?(e=je(e),jd(e,We(e))):null)}computeOutputShape(e){if(e=mt(e),this.inputLength==null)return[...e,this.outputDim];let i=Qt(this.inputLength);if(i.length!==e.length-1)throw new B(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let o=0;o<i.length;++o){let s=i[o],a=e[o+1];if(s!=null&&a!=null&&s!==a)throw new B(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(i[r]=a),r++}}return[e[0],...i,this.outputDim]}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e);r.dtype!=="int32"&&(r=mr(r,"int32"));let o=hE(this.embeddings.read(),$(r,[r.size]));return $(o,mt(this.computeOutputShape(r.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:yn(this.embeddingsInitializer),embeddingsRegularizer:en(this.embeddingsRegularizer),activityRegularizer:en(this.activityRegularizer),embeddingsConstraint:Fn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Embedding",t})();ie.registerClass(C$);var nu=class extends Je{constructor(n){super(n||{}),this.supportsMasking=!0}mergeFunction(n){throw new et}computeElementwiseOpOutputShape(n,e){if(n==null||e==null)return null;if(n.length<e.length)return this.computeElementwiseOpOutputShape(e,n);if(e.length===0)return n;let i=n.slice(0,n.length-e.length);for(let r=0;r<e.length;++r){let o=n[n.length-e.length+r],s=e[r];if(o==null||s==null||o<0||s<0)i.push(null);else if(o===1)i.push(s);else if(s===1)i.push(o);else{if(o!==s)throw new B("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(e));i.push(o)}}return i}build(n){if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[mt(n)]),n=n,n.length<2)throw new B(`A merge layer should be called on an Array of at least 2 inputs. Got ${n.length} input(s).`);let e=[];for(let o of n)o!=null&&o[0]!==null&&e.push(o[0]);if(e=Cs(e),e.length>1)throw new B(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(n)}.`);let i=n[0]==null?null:n[0].slice(1);for(let o=1;o<n.length;++o){let s=n[o]==null?null:n[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}let r=n.map(o=>o.length);n.indexOf(null)===-1&&Cs(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(n,e){return H(()=>{if(n=n,this.reshapeRequired){let i=[],r=n.map(o=>o.rank);if(r.indexOf(null)===-1){let o=ra(r);for(let s of n){let a=s.rank;for(let l=0;l<o-a;++l)s=Qc(s,1);i.push(s)}return this.mergeFunction(i)}else{let o=!1;for(let l of n){let c=l.rank;if(c==null){let u=l.shape,d=u[0],p=u.slice(1).concat([d]),h=$(l,[d].concat(Ts(u.slice(1))));h=yt(h,[1,0]),h=$(h,p),i.push(h),o=!0}else if(c>1){let u=Mr(1,c).concat([0]);i.push(yt(l,u)),o=!0}else i.push(l)}let s=this.mergeFunction(i),a=s.rank;if(o){if(a==null){let l=s.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));s=$(yt($(s,[-1,u]),[1,0]),d)}else if(a>1){let l=[a-1].concat(Mr(0,a-1));s=yt(s,l)}}return s}}else return this.mergeFunction(n)})}computeOutputShape(n){n=n;let e;n[0]==null?e=null:e=n[0].slice(1);for(let r=1;r<n.length;++r){let o=n[r]==null?null:n[r].slice(1);e=this.computeElementwiseOpOutputShape(e,o)}let i=[];for(let r of n)r!=null&&r[0]!==null&&i.push(r[0]);return i=Cs(i),i.length===1?e=i.concat(e):e=[null].concat(e),e}computeMask(n,e){return H(()=>{if(e==null)return null;if(!Array.isArray(e))throw new B("`mask` should be an Array");if(!Array.isArray(n))throw new B("`inputs` should be an Array");if(e.length!==n.length)throw new B(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${n.length} vs ${e.length})`);if(e.every(r=>r==null))return null;e=e.map(r=>r==null?r:Zn(r,0));let i=e[0];for(let r=1;r<e.length-1;++r)i=ur(i,e[r]);return i})}},T$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return H(()=>{let i=e[0].clone();for(let r=1;r<e.length;++r)i=ne(i,e[r]);return i})}}return t.className="Add",t})();ie.registerClass(T$);var S$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return H(()=>{let i=e[0].clone();for(let r=1;r<e.length;++r)i=R(i,e[r]);return i})}}return t.className="Multiply",t})();ie.registerClass(S$);var k$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return H(()=>{let i=e[0].clone();for(let r=1;r<e.length;++r)i=ne(i,e[r]);return R(1/e.length,i)})}}return t.className="Average",t})();ie.registerClass(k$);var E$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return H(()=>{let i=e[0];for(let r=1;r<e.length;++r)i=dr(i,e[r]);return i})}}return t.className="Maximum",t})();ie.registerClass(E$);var I$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return H(()=>{let i=e[0];for(let r=1;r<e.length;++r)i=Ho(i,e[r]);return i})}}return t.className="Minimum",t})();ie.registerClass(I$);var D$=(()=>{class t extends nu{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new B("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let i=!0;for(let o of e)if(o!=null){i=!1;break}if(i)return;let r=[];for(let o=0;o<e.length;++o){let s=e[o].slice();s.splice(this.axis,1);let a=!1;for(let l of r)if(v.arraysEqual(l,s)){a=!0;break}a||r.push(s)}if(r.length>1)throw new B("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return H(()=>sb(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new B("A `Concatenate` layer should be called on a list of inputs.");let i=e,r=i[0].slice(),o=this.axis<0?r.length+this.axis:this.axis;for(let s of i.slice(1)){if(r[o]==null||s[o]==null){r[o]=null;break}r[o]+=s[o]}return r}computeMask(e,i){if(i==null)return null;if(!Array.isArray(i))throw new B("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new B("`inputs` should be an array for Concatenate");if(i.length!==e.length)throw new B(`Mismatch in the length of mask (${i.length}) and the legnth of inputs (${e.length})`);return H(()=>{let r=!0;if(i.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;let o=[];for(let a=0;a<e.length;++a)i[a]==null?o.push(le(Si(e[a]),"bool")):i[a].rank<e[a].rank?o.push(Zn(i[a],-1)):o.push(i[a]);let s=vn(o,this.axis);return F0(s,-1,!1)})}getConfig(){let e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Concatenate",t})();ie.registerClass(D$);function __(t,n){for(;t<0;)t+=n;return t}function HMe(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new et("batchDot is not implemented for tensors of 4D or higher rank yet");if(v.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),v.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),typeof e=="number"&&(e=[e,e]),t.dtype==="complex64"||n.dtype==="complex64")throw new et("batchDot is not implemented for complex64-type Tensors yet.");let i=t.shape.length,r=n.shape.length;e==null&&(e=[i-1,r-2]);let o=e;return H(()=>{let s;if(i>r){s=i-r;let l=[];for(let c=0;c<s;++c)l.push(1);n=$(n,n.shape.concat(l))}else if(r>i){s=r-i;let l=[];for(let c=0;c<s;++c)l.push(1);t=$(t,t.shape.concat(l))}else s=0;let a;if(t.shape.length===2&&n.shape.length===2)o[0]===o[1]?a=Se(R(t,n),o[0]):a=Se(R(yt(t,[1,0]),n),o[1]);else{let l=o[0]!==t.shape.length-1,c=o[1]===n.shape.length-1;a=Wt(t,n,l,c)}if(s>0){let l;i>r?l=i+r-3:l=i-1;let c=[];for(let u=l;u<l+s;++u)c.push(u);a=ko(a,c)}return a.shape.length===1&&(a=Zn(a,1)),a})}var A$=(()=>{class t extends nu{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){v.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let i=e[0],r=e[1];if(i.length>3||r.length>3)throw new et("Dot layer does not support tensors of 4D or higher rank yet.");let o=this.interpretAxes(i,r);if(i[o[0]]!==r[o[1]])throw new B(`Dimension incompatibility: ${i[o[0]]} !== ${r[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new B(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let i=e[0],r=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((s,a)=>__(s,e[a].shape.length)):o=[__(this.axes,i.shape.length),__(this.axes,r.shape.length)],this.normalize&&(i=h_(i,o[0]),r=h_(r,o[1])),HMe(i,r,o)}interpretAxes(e,i){let r;return Array.isArray(this.axes)?r=this.axes:r=[__(this.axes,e.length),__(this.axes,i.length)],r}computeOutputShape(e){v.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let i=e[0].slice(),r=e[1].slice();if(i.length>3||r.length>3)throw new et("Dot layer does not support tensors of 4D or higher rank yet.");let o=this.interpretAxes(i,r);i.splice(o[0],1),r.splice(o[1],1),r.splice(0,1);let s=i.concat(r);return s.length===1&&s.push(1),s}computeMask(e,i){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dot",t})();ie.registerClass(A$);var N$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={stddev:this.stddev};return Object.assign(i,e),i}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e);return Kd(()=>ne(ab(r.shape,0,this.stddev),r),()=>r,i.training||!1)})}}return t.className="GaussianNoise",t})();ie.registerClass(N$);var M$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return H(()=>{this.invokeCallHook(e,i);let r=je(e);return this.rate>0&&this.rate<1?Kd(()=>{let s=Math.sqrt(this.rate/(1-this.rate));return R(r,ab(r.shape,1,s))},()=>r,i.training||!1):r})}}return t.className="GaussianDropout",t})();ie.registerClass(M$);var O$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||je(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return H(()=>{if(this.rate<1&&this.rate>0){let r=this._getNoiseShape(e);return Kd(()=>{let s=je(e),c=-1.6732632423543772*1.0507009873554805,u=Jr(ea(r),this.rate);u=mr(u,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=ne(R(s,u),R(ne(u,-1),c));return ne(R(h,d),p)},()=>je(e),i.training||!1)}return e})}}return t.className="AlphaDropout",t})();ie.registerClass(O$);function w_(t,n,e,i,r,o=.001){let s;if(t.rank===2)s=CL(t,n,e,i,r,o);else if(t.rank===3)s=TL(t,n,e,i,r,o);else if(t.rank===4)s=SL(t,n,e,i,r,o);else throw new et(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function WMe(t,n,e,i,r=.001){return H(()=>{let o=jy(t,i),s=o.mean,a=o.variance;return[w_(t,s,a,e,n,r),s,a]})}function jMe(t,n,e,i,r=.001){return H(()=>{let o=jy(t,i),s=o.mean,a=o.variance,l=[];for(let m of Mr(0,t.rank))i.indexOf(m)!==-1?l.push(1):l.push(t.shape[m]);let c=$(s,l),u=$(a,l),d=n==null?null:$(n,l),p=e==null?null:$(e,l);return[w_(t,c,u,p,d,r),s,a]})}function qMe(t,n,e,i,r=.001){return v.arraysEqual(i.slice().sort(),Mr(0,t.rank-1))?WMe(t,n,e,i,r):jMe(t,n,e,i,r)}var R$=(()=>{class t extends Je{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=on(e.betaInitializer||"zeros"),this.gammaInitializer=on(e.gammaInitializer||"ones"),this.movingMeanInitializer=on(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=on(e.movingVarianceInitializer||"ones"),this.betaConstraint=Ln(e.betaConstraint),this.gammaConstraint=Ln(e.gammaConstraint),this.betaRegularizer=hn(e.betaRegularizer),this.gammaRegularizer=hn(e.gammaRegularizer)}build(e){e=mt(e);let i=this.axis>=0?this.axis:this.axis+e.length,r=e[i];if(r==null)throw new B(`Axis ${i} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new pn({ndim:e.length,axes:{[i]:r}})];let o=[r];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,i){return H(()=>{let r=i.training==null?!1:i.training,o=je(e),s=o.shape,a=s.length,l=Mr(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);let u=_s(1,a);u[c]=s[c];let d=l.slice();d.sort();let p=!v.arraysEqual(d,Mr(0,a).slice(0,a-1)),h=()=>{if(p){let x=$(this.movingMean.read(),u),_=$(this.movingVariance.read(),u),w=this.center?$(this.beta.read(),u):null,C=this.scale?$(this.gamma.read(),u):null;return w_(o,x,_,w,C,this.epsilon)}else return w_(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();let[m,g,f]=qMe(o,this.gamma.read(),this.beta.read(),l,this.epsilon),y=(x,_,w)=>{H(()=>{let C=1-w,k=x.read(),N=R(Ce(k,_),C);x.write(Ce(k,N))})};return(()=>{y(this.movingMean,g,this.momentum),y(this.movingVariance,f,this.momentum)})(),m})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yn(this.betaInitializer),gammaInitializer:yn(this.gammaInitializer),movingMeanInitializer:yn(this.movingMeanInitializer),movingVarianceInitializer:yn(this.movingVarianceInitializer),betaRegularizer:en(this.betaRegularizer),gammaRegularizer:en(this.gammaRegularizer),betaConstraint:Fn(this.betaConstraint),gammaConstraint:Fn(this.gammaConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BatchNormalization",t})();ie.registerClass(R$);var F$=(()=>{class t extends Je{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let i of this.axis)if(!Number.isInteger(i))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=on(e.betaInitializer||"zeros"),this.gammaInitializer=on(e.gammaInitializer||"ones"),this.betaRegularizer=hn(e.betaRegularizer),this.gammaRegularizer=hn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=mt(e);let i=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=i);for(let s of this.axis)if(s<0||s>=i)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==Cs(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let r=this.axis.map(s=>e[s]),o=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,i){let r=je(e),o=r.shape,s=o.length;return H(()=>{let{mean:l,variance:c}=jy(r,this.axis,!0),u=_s(1,s);for(let f of this.axis)u[f]=o[f];let d=f=>f!=null&&f.shape.length!==s?$(f,u):f,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,m=[],g=[];for(let f=0;f<s;++f)this.axis.indexOf(f)!==-1?(m.push(o[f]),g.push(1)):(m.push(1),g.push(o[f]));return l=Qi(l,m),c=Qi(c,m),p!=null&&(p=Qi(p,g)),h!=null&&(h=Qi(h,g)),w_(r,l,c,h,p,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:yn(this.betaInitializer),gammaInitializer:yn(this.gammaInitializer),betaRegularizer:en(this.betaRegularizer),gammaRegularizer:en(this.gammaRegularizer)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LayerNormalization",t})();ie.registerClass(F$);function XMe(t,n,e){return H(()=>{if(t.rank!==4)throw new B(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(n==null&&(n=[[1,1],[1,1]]),n.length!==2||n[0].length!==2||n[1].length!==2)throw new B("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=Or()),e!=="channelsLast"&&e!=="channelsFirst")throw new B(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let i;return e==="channelsFirst"?i=[[0,0],[0,0],n[0],n[1]]:i=[[0,0],n[0],n[1],[0,0]],im(t,i)})}var L$=(()=>{class t extends Je{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Or():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new B(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let i,r;if(typeof e.padding[0]=="number")i=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new B(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(i=e.padding[0],e.padding[1].length!==2)throw new B(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[i,r]}this.inputSpec=[new pn({ndim:4})]}computeOutputShape(e){e=mt(e);let i,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?i=e[2]+this.padding[0][0]+this.padding[0][1]:i=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],i,r]):(e[1]!=null&&e[1]>=0?i=e[1]+this.padding[0][0]+this.padding[0][1]:i=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],i,r,e[3]])}call(e,i){return H(()=>XMe(je(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ZeroPadding2D",t})();ie.registerClass(L$);function eI(t,n,e,i,r,o){return H(()=>{In(r),SP(o),Nr(i),e==null&&(e=[1,1]),i==null&&(i="valid"),r==null&&(r=Or()),o==null&&(o="max"),t=v_(t,r);let s,a=i==="same"?"same":"valid";return o==="max"?s=nm(t,n,e,a):s=Yh(t,n,e,a),r==="channelsFirst"&&(s=yt(s,[0,3,1,2])),s})}function eZ(t,n,e,i,r,o){return H(()=>{In(r),SP(o),Nr(i),e==null&&(e=[1,1,1]),i==null&&(i="valid"),r==null&&(r=Or()),o==null&&(o="max"),t=t$(t,r);let s,a=i==="same"?"same":"valid";return o==="max"?s=GL(t,n,e,a):s=wL(t,n,e,a),r==="channelsFirst"&&(s=yt(s,[0,4,1,2,3])),s})}var KE=class extends Je{constructor(n){if(n.poolSize==null&&(n.poolSize=2),super(n),typeof n.poolSize=="number")this.poolSize=[n.poolSize];else if(Array.isArray(n.poolSize)&&n.poolSize.length===1&&typeof n.poolSize[0]=="number")this.poolSize=n.poolSize;else throw new B(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.poolSize)}`);if(Wn(this.poolSize,"poolSize"),n.strides==null)this.strides=this.poolSize;else if(typeof n.strides=="number")this.strides=[n.strides];else if(Array.isArray(n.strides)&&n.strides.length===1&&typeof n.strides[0]=="number")this.strides=n.strides;else throw new B(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.strides)}`);Wn(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,Nr(this.padding),this.inputSpec=[new pn({ndim:3})]}computeOutputShape(n){n=mt(n);let e=to(n[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],e,n[2]]}call(n,e){return H(()=>{this.invokeCallHook(n,e),n=Qc(je(n),2);let i=this.poolingFunction(je(n),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return ko(i,[2])})}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(n,e),n}},P$=(()=>{class t extends KE{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return In(s),Nr(o),eI(e,i,r,o,s,"max")}}return t.className="MaxPooling1D",t})();ie.registerClass(P$);var $$=(()=>{class t extends KE{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return In(s),Nr(o),eI(e,i,r,o,s,"avg")}}return t.className="AveragePooling1D",t})();ie.registerClass($$);var YE=class extends Je{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==2)throw new B(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides];Wn(this.poolSize,"poolSize"),Wn(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,In(this.dataFormat),Nr(this.padding),this.inputSpec=[new pn({ndim:4})]}computeOutputShape(n){n=mt(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2];return e=to(e,this.poolSize[0],this.padding,this.strides[0]),i=to(i,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,i]:[n[0],e,i,n[3]]}call(n,e){return H(()=>(this.invokeCallHook(n,e),this.poolingFunction(je(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},V$=(()=>{class t extends YE{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return In(s),Nr(o),eI(e,i,r,o,s,"max")}}return t.className="MaxPooling2D",t})();ie.registerClass(V$);var B$=(()=>{class t extends YE{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return In(s),Nr(o),eI(e,i,r,o,s,"avg")}}return t.className="AveragePooling2D",t})();ie.registerClass(B$);var QE=class extends Je{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==3)throw new B(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides,n.strides];Wn(this.poolSize,"poolSize"),Wn(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,In(this.dataFormat),Nr(this.padding),this.inputSpec=[new pn({ndim:5})]}computeOutputShape(n){n=mt(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2],r=this.dataFormat==="channelsFirst"?n[4]:n[3];return e=to(e,this.poolSize[0],this.padding,this.strides[0]),i=to(i,this.poolSize[1],this.padding,this.strides[1]),r=to(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,i,r]:[n[0],e,i,r,n[4]]}call(n,e){return H(()=>(this.invokeCallHook(n,e),this.poolingFunction(je(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},z$=(()=>{class t extends QE{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return In(s),Nr(o),eZ(e,i,r,o,s,"max")}}return t.className="MaxPooling3D",t})();ie.registerClass(z$);var G$=(()=>{class t extends QE{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return In(s),Nr(o),eZ(e,i,r,o,s,"avg")}}return t.className="AveragePooling3D",t})();ie.registerClass(G$);var ZE=class extends Je{constructor(n){super(n),this.inputSpec=[new pn({ndim:3})]}computeOutputShape(n){return[n[0],n[2]]}call(n,e){throw new et}},U$=(()=>{class t extends ZE{constructor(e){super(e||{})}call(e,i){return H(()=>{let r=je(e);return Kt(r,1)})}}return t.className="GlobalAveragePooling1D",t})();ie.registerClass(U$);var H$=(()=>{class t extends ZE{constructor(e){super(e||{})}call(e,i){return H(()=>{let r=je(e);return zi(r,1)})}}return t.className="GlobalMaxPooling1D",t})();ie.registerClass(H$);var JE=class extends Je{constructor(n){super(n),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,In(this.dataFormat),this.inputSpec=[new pn({ndim:4})]}computeOutputShape(n){return n=n,this.dataFormat==="channelsLast"?[n[0],n[3]]:[n[0],n[1]]}call(n,e){throw new et}getConfig(){let n={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},W$=(()=>{class t extends JE{call(e,i){return H(()=>{let r=je(e);return this.dataFormat==="channelsLast"?Kt(r,[1,2]):Kt(r,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();ie.registerClass(W$);var j$=(()=>{class t extends JE{call(e,i){return H(()=>{let r=je(e);return this.dataFormat==="channelsLast"?zi(r,[1,2]):zi(r,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();ie.registerClass(j$);var tI=class extends Je{constructor(n){super(n),this.layer=n.layer}build(n){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(n){this.layer!=null&&(this.layer.trainable=n)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(n){this.layer.setWeights(n)}getConfig(){let n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(n,e),n}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(n)}static fromConfig(n,e,i={}){let r=e.layer,o=eo(r,i);delete e.layer;let s={layer:o};return Object.assign(s,e),new n(s)}},q$=(()=>{class t extends tI{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=mt(e),e.length<3)throw new B(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let i=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(i),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=mt(e);let i=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(i),o=e[1];return[r[0],o].concat(r.slice(1))}call(e,i){return H(()=>(e=je(e),u$((a,l)=>[je(this.layer.call(a,i)),[]],e,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();ie.registerClass(q$);function KMe(t){Za(tQ,"BidirectionalMergeMode",t)}var YMe="concat",X$=(()=>{class t extends tI{constructor(e){super(e);let i=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=i,this.forwardLayer=eo(r),i.goBackwards=i.goBackwards!==!0;let o={};if(o.className=e.layer.getClassName(),o.config=i,this.backwardLayer=eo(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?YMe:e.mergeMode,KMe(this.mergeMode),e.weights)throw new et("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let i=e.length,r=Math.floor(i/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let i=this.forwardLayer.computeOutputShape(e);Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i;let r,o,s;return this.returnState&&(s=i.slice(1)),r=i[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,o=[r]):this.mergeMode==null?o=[r,r.slice()]:o=[r],this.returnState?this.mergeMode==null?o.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Ei(o)}apply(e,i){let r=i==null?null:i.initialState,o=i==null?null:i.constants;i==null&&(i={});let s=c$(e,r,o,this.numConstants);if(e=s.inputs,r=s.initialState,o=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&o==null)return super.apply(e,i);let a=[],l=[];if(r!=null){let u=r.length;if(u%2>0)throw new B("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");i.initialState=r,a.push(...r);let d=r.map(p=>new pn({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(o!=null)throw new et("Support for constants in Bidirectional layers is not implemented yet.");let c=a[0]instanceof fr;for(let u of a)if(u instanceof fr!==c)throw new B("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,i);return this.inputSpec=p,h}else return super.apply(e,i)}call(e,i){return H(()=>{let r=i.initialState,o,s;if(r==null)o=this.forwardLayer.call(e,i),s=this.backwardLayer.call(e,i);else{let c=r.slice(0,r.length/2),u=r.slice(r.length/2);o=this.forwardLayer.call(e,Object.assign(i,{initialState:c})),s=this.backwardLayer.call(e,Object.assign(i,{initialState:u}))}let a;this.returnState&&(Array.isArray(o)&&(a=o.slice(1).concat(s.slice(1))),o=o[0],s=s[0]),this.returnSequences&&(s=Wo(s,1));let l;return this.mergeMode==="concat"?l=sb([o,s]):this.mergeMode==="sum"?l=ne(o,s):this.mergeMode==="ave"?l=R(.5,ne(o,s)):this.mergeMode==="mul"?l=R(o,s):this.mergeMode==null&&(l=[o,s]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){ia(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),ia(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,i){Array.isArray(i)&&(i=i[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[i,i]:r=i:this.mergeMode==null?r=[null,null]:r=null,this.returnState){let s=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},i=super.getConfig();return Object.assign(e,i),e}static fromConfig(e,i){let r=eo(i.layer);if(delete i.layer,i.numConstants!=null)throw new et("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let o=i;return o.layer=r,new e(o)}}return t.className="Bidirectional",t})();ie.registerClass(X$);var K$=(()=>{class t extends Je{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return H(()=>(e=je(e),e.dtype!=="float32"&&(e=mr(e,"float32")),ne(R(e,this.scale),this.offset)))}}return t.className="Rescaling",t})();ie.registerClass(K$);var{resizeBilinear:QMe,cropAndResize:ZMe}=Eo,Y$=(()=>{class t extends Je{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,i,r,o,s,a,l,c){return H(()=>{let u,d=!1,p=i/a,h=r/l,m=(o+i)/a,g=(s+r)/l,f=[p,h,m,g],y=[];e.rank===3?(d=!0,u=ui([e])):u=e;for(let C=0;C<u.shape[0];C++)y.push(f);let b=ci(y,[y.length,4]),x=qc(0,y.length,1,"int32"),w=ZMe(u,b,x,[o,s],"nearest");return d?mr(je(hr(w)),c):mr(w,c)})}upsize(e,i,r,o){return H(()=>{let s=QMe(e,[i,r]);return mr(s,o)})}call(e,i){return H(()=>{let r=je(e),o=r.dtype,s=r.shape,a=s[s.length-3],l=s[s.length-2],c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(r,c,u,this.height,this.width,a,l,o):this.upsize(e,this.height,this.width,o)})}getConfig(){let e={height:this.height,width:this.width},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){e=mt(e);let i=e.length-3,r=e.length-2;return e[i]=this.height,e[r]=this.width,e}}return t.className="CenterCrop",t})();ie.registerClass(Y$);function tZ(t,n,e,i){let r=je(t);if(r.dtype!=="int32"&&(r=mr(r,"int32")),n==="int")return r;let o=r.shape;if(r.rank===0&&(r=Zn(r,-1)),n==="oneHot"&&r.shape[r.shape.length-1]!==1&&(r=Zn(r,-1)),r.rank>2)throw new B(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${o} which would result in output rank ${r.rank}.`);let s=["multiHot","oneHot"].includes(n),a=r,l;if(typeof i<"u"&&n==="count"?l=Fk(a,i,e,s):l=Fk(a,[],e,s),n!=="tfIdf")return l;if(i)return R(l,i);throw new B("When outputMode is 'tfIdf', weights must be provided.")}var Q$=(()=>{class t extends Je{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){return e=mt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,i){return H(()=>{e=je(e),e.dtype!=="int32"&&(e=mr(e,"int32"));let r;if(typeof i.countWeights<"u"){if(this.outputMode!=="count")throw new B(`countWeights is not used when outputMode !== count.
              Received countWeights=${i.countWeights}`);r=je(i.countWeights)}let o=zi(e),s=Hd(e),a=Un(this.numTokens,o).bufferSync().get(0),l=Jr(s,0).bufferSync().get(0);if(!(a&&l))throw new B(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return tZ(e,this.outputMode,this.numTokens,r)})}}return t.className="CategoryEncoding",t})();ie.registerClass(Q$);var eOe=["bilinear","nearest"],nZ=new Set(eOe),Z$=(()=>{class t extends Je{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(nZ.has(e.interpolation))this.interpolation=e.interpolation;else throw new B(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=mt(e);let i=e[2];return[this.height,this.width,i]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return H(()=>{let r=[this.height,this.width];if(this.interpolation==="bilinear")return Eo.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Eo.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...nZ]} are supported`)})}}return t.className="Resizing",t})();ie.registerClass(Z$);var iZ=(()=>{class t{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var rZ=(()=>{class t extends Je{constructor(e){super(e),this.randomGenerator=new iZ(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BaseRandomLayer",t})();var tOe=["bilinear","nearest"],oZ=new Set(tOe),J$=(()=>{class t extends rZ{constructor(e){super(e);let{factor:i,interpolation:r="bilinear"}=e;if(this.factor=i,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new B(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new B(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new B(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(oZ.has(r))this.interpolation=r;else throw new B(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){e=mt(e);let i=e[2];return[this.imgHeight,-1,i]}call(e,i){return H(()=>{let r=je(e);this.imgHeight=r.shape[r.shape.length-3];let o=r.shape[r.shape.length-2];this.widthFactor=ea([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*o;s=Math.round(s);let a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return Eo.resizeBilinear(e,a);case"nearest":return Eo.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...oZ]} are supported`)}})}}return t.className="RandomWidth",t})();ie.registerClass(J$);function nOe(t){return new Yd(t)}function iOe(t){return new ZP(t)}function rOe(t){return new KP(t)}function oOe(t){return new YP(t)}function sOe(t){return new QP(t)}function aOe(t){return new e$(t)}function lOe(t){return new JP(t)}function cOe(t){return new o$(t)}function uOe(t){return new GE(t)}function dOe(t){return new n$(t)}function pOe(t){return new UE(t)}function hOe(t){return new i$(t)}function mOe(t){return new r$(t)}function fOe(t){return new s$(t)}function gOe(t){return new a$(t)}function yOe(t){return new l$(t)}function bOe(t){return new b$(t)}function xOe(t){return new g$(t)}function vOe(t){return new XE(t)}function _Oe(t){return new f$(t)}function wOe(t){return new y$(t)}function COe(t){return new x$(t)}function TOe(t){return new v$(t)}function SOe(t){return new _$(t)}function kOe(t){return new C$(t)}function EOe(t){return new T$(t)}function IOe(t){return new k$(t)}function DOe(t){return new D$(t)}function AOe(t){return new E$(t)}function NOe(t){return new I$(t)}function MOe(t){return new S$(t)}function OOe(t){return new A$(t)}function ROe(t){return new R$(t)}function FOe(t){return new F$(t)}function LOe(t){return new L$(t)}function eV(t){return new $$(t)}function POe(t){return eV(t)}function $Oe(t){return eV(t)}function tV(t){return new B$(t)}function VOe(t){return tV(t)}function BOe(t){return tV(t)}function nV(t){return new G$(t)}function zOe(t){return nV(t)}function GOe(t){return nV(t)}function UOe(t){return new U$(t)}function HOe(t){return new W$(t)}function sZ(t){return new H$(t)}function aZ(t){return new j$(t)}function lZ(t){return new P$(t)}function cZ(t){return new V$(t)}function WOe(t){return new z$(t)}function jOe(t){return new p$(t)}function qOe(t){return new WE(t)}function XOe(t){return new h$(t)}function KOe(t){return new bb(t)}function YOe(t){return new d$(t)}function QOe(t){return new HE(t)}function ZOe(t){return new m$(t)}function JOe(t){return new qE(t)}function eRe(t){return new tl(t)}function tRe(t){return new jE(t)}function nRe(t){return new X$(t)}function iRe(t){return new q$(t)}var rRe=sZ,oRe=aZ,sRe=lZ,aRe=cZ;function lRe(t){return new N$(t)}function cRe(t){return new M$(t)}function uRe(t){return new O$(t)}function dRe(t){return new w$(t)}function pRe(t){return new K$(t)}function hRe(t){return new Y$(t)}function mRe(t){return new Z$(t)}function fRe(t){return new Q$(t)}function gRe(t){return new J$(t)}var vRe=G();vRe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var uZ;(function(t){let n;(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(uZ||(uZ={}));var bFe=Wb(q0());var gFe=Wb(q0());var Mcn=Symbol("out"),Ocn=Symbol("field"),Rcn=Symbol("quote"),Fcn=Symbol("quoteafterquote"),Lcn=Symbol("quoteinquote");function ce(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&v.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the CPU backend.`)})}var DFe=Ji.whereImpl,pZ=(()=>{class t extends Hl{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Ch(this,fs())}write(e,i,r){this.firstUse&&(this.firstUse=!1,G().get("IS_NODE")&&T.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:r,refCount:1}),o}makeTensorInfo(e,i,r){let o;if(i==="string"&&r!=null&&r.length>0&&v.isString(r[0])){let s=r.map(a=>v.encodeString(a));o=this.write(s,e,i)}else o=this.write(r,e,i);return{dataId:o,shape:e,dtype:i}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let i=this.data.get(e);i.refCount++}decRef(e){if(this.data.has(e)){let i=this.data.get(e);i.refCount--}}move(e,i,r,o,s){this.data.set(e,{values:i,dtype:o,refCount:s})}numDataIds(){return this.data.numDataIds()}read(e){return W(this,null,function*(){return this.readSync(e)})}readSync(e){let{dtype:i,complexTensorInfos:r}=this.data.get(e);if(i==="complex64"){let o=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return T.mergeRealAndImagArrays(o,s)}return v.convertBackendValuesAndArrayBuffer(this.data.get(e).values,i)}bufferSync(e){let i=this.readSync(e.dataId);if(e.dtype==="string")try{let r=i.map(o=>v.decodeString(o));return Ue(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ue(e.shape,e.dtype,i)}makeOutput(e,i,r){return fs().makeTensorFromTensorInfo(this.makeTensorInfo(i,r,e),this)}disposeData(e,i=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!i&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return W(this,null,function*(){let i=v.now();return e(),{kernelMs:v.now()-i}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){ce([e],"where");let i=this.readSync(e.dataId);return DFe(e.shape,i)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var RV={};Qo(RV,{addImpl:()=>sV,bincountImpl:()=>_b,bincountReduceImpl:()=>iI,bitwiseAndImpl:()=>aV,castImpl:()=>oV,ceilImpl:()=>lV,concatImpl:()=>rI,equalImpl:()=>cV,expImpl:()=>dV,expm1Impl:()=>hV,floorDivImpl:()=>fV,floorImpl:()=>mV,gatherNdImpl:()=>oI,gatherV2Impl:()=>sI,greaterEqualImpl:()=>yV,greaterImpl:()=>gV,lessEqualImpl:()=>xV,lessImpl:()=>bV,linSpaceImpl:()=>aI,logImpl:()=>vV,maxImpl:()=>lI,maximumImpl:()=>_V,minimumImpl:()=>wV,multiplyImpl:()=>C_,negImpl:()=>CV,notEqualImpl:()=>TV,prodImpl:()=>SV,raggedGatherImpl:()=>cI,raggedRangeImpl:()=>uI,raggedTensorToTensorImpl:()=>dI,rangeImpl:()=>pI,rsqrtImpl:()=>EV,scatterImpl:()=>la,sigmoidImpl:()=>UZ,simpleAbsImpl:()=>rV,sliceImpl:()=>DV,sparseFillEmptyRowsImpl:()=>hI,sparseReshapeImpl:()=>mI,sparseSegmentReductionImpl:()=>Cb,sqrtImpl:()=>jZ,squaredDifferenceImpl:()=>AV,staticRegexReplaceImpl:()=>NV,stridedSliceImpl:()=>fI,stringNGramsImpl:()=>gI,stringSplitImpl:()=>yI,stringToHashBucketFastImpl:()=>bI,subImpl:()=>OV,tileImpl:()=>xI,topKImpl:()=>vI,transposeImpl:()=>wb,uniqueImpl:()=>_I});function rV(t){let n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}var AFe=t=>{let{x:n}=t.inputs,e=t.backend;ce(n,"abs");let i=new Float32Array(v.sizeFromShape(n.shape)),r=e.data.get(n.dataId).values;return i=rV(r),e.makeOutput(i,n.shape,n.dtype)},hZ={kernelName:Wu,backendName:"cpu",kernelFunc:AFe};function Et(t){return(n,e,i,r,o)=>{let s=T.assertAndGetBroadcastShape(n,e),a=s.length,l=v.computeStrides(s),c=v.sizeFromShape(s),u=v.getTypedArrayFromDType(o,c),d=n.length,p=e.length,h=v.computeStrides(n),m=v.computeStrides(e),g=T.getBroadcastDims(n,s),f=T.getBroadcastDims(e,s);if(g.length+f.length===0)for(let y=0;y<u.length;++y)u[y]=t(i[y%i.length],r[y%r.length]);else for(let y=0;y<u.length;++y){let b=v.indexToLoc(y,a,l),x=b.slice(-d);g.forEach(k=>x[k]=0);let _=v.locToIndex(x,d,h),w=b.slice(-p);f.forEach(k=>w[k]=0);let C=v.locToIndex(w,p,m);u[y]=t(i[_],r[C])}return[u,s]}}function yi(t){let{inputs:n,backend:e}=t,{real:i,imag:r}=n,o=e.data.get(i.dataId).values,s=e.data.get(r.dataId).values,a=e.makeTensorInfo(i.shape,"complex64"),l=e.data.get(a.dataId);return l.complexTensorInfos={real:e.makeTensorInfo(i.shape,"float32",o),imag:e.makeTensorInfo(r.shape,"float32",s)},a}var mZ={kernelName:Xg,backendName:"cpu",kernelFunc:yi};function xb(t,n,e="float32"){if(e==="complex64"){let r=xb(t,n,"float32"),o=xb(t,n,"float32");return yi({inputs:{real:r,imag:o},backend:t})}let i=v.makeZerosTypedArray(v.sizeFromShape(n),e);return t.makeTensorInfo(n,e,i)}function er(t){let{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}var fZ={kernelName:Ua,backendName:"cpu",kernelFunc:er};function Es(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.data.get(i.dataId).complexTensorInfos.real,o=e.data.get(r.dataId).values;return e.makeTensorInfo(r.shape,r.dtype,o)}var gZ={kernelName:by,backendName:"cpu",kernelFunc:Es};function oV(t,n,e,i){if(i==="int32"){let r=Int32Array.from(t);return[n,"int32",r]}if(i==="bool"){let r=v.toTypedArray([0],e),[o,s]=Et((a,l)=>a!==l?1:0)(n,[],t,r,"bool");return[s,"bool",o]}throw new Error(`Error in Cast: failed to cast ${e} to ${i}`)}function Is(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dtype:o}=i;if(o==="complex64"){if(r.dtype==="complex64")return er({inputs:{x:r},backend:e});let u=xb(e,r.shape,r.dtype),d=Is({inputs:{x:r},backend:e,attrs:{dtype:"float32"}}),p=yi({inputs:{real:d,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),p}if(r.dtype==="complex64"){let u=Es({inputs:{input:r},backend:e}),d=Is({inputs:{x:u},backend:e,attrs:{dtype:o}});return e.disposeIntermediateTensorInfo(u),d}if(!v.hasEncodingLoss(r.dtype,o)){let u=er({inputs:{x:r},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:o}}let s=e.data.get(r.dataId).values,[a,l,c]=oV(s,r.shape,r.dtype,o);return e.makeTensorInfo(a,l,c)}var yZ={kernelName:Ga,backendName:"cpu",kernelFunc:Is};function zt(t,n,e,i){return e==null?({inputs:r,backend:o})=>{let{a:s,b:a}=r,l=o;ce([s,a],t);let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=s.dtype==="string"?T.fromUint8ToStringArray(c):c,p=s.dtype==="string"?T.fromUint8ToStringArray(u):u,h=i||s.dtype,[m,g]=n(s.shape,a.shape,d,p,h);return l.makeTensorInfo(g,h,m)}:({inputs:r,backend:o})=>{let{a:s,b:a}=r,l=o;if(s.dtype==="complex64"||a.dtype==="complex64"){let c=Is({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,p=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,m=l.data.get(p.dataId).values,g=Is({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),f=l.data.get(g.dataId),y=f.complexTensorInfos.real,b=f.complexTensorInfos.imag,x=l.data.get(y.dataId).values,_=l.data.get(b.dataId).values,[w,C,k]=e(s.shape,a.shape,h,m,x,_),N=l.makeTensorInfo(k,"float32",w),P=l.makeTensorInfo(k,"float32",C),F=yi({inputs:{real:N,imag:P},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(P),F}else{let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=i||s.dtype,[p,h]=n(s.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,p)}}}function vb(t){return(n,e,i,r,o,s)=>{let a=T.assertAndGetBroadcastShape(n,e),l=v.sizeFromShape(a),c=a.length,u=v.computeStrides(a),d=v.getTypedArrayFromDType("float32",l),p=v.getTypedArrayFromDType("float32",l),h=T.getBroadcastDims(n,a),m=T.getBroadcastDims(e,a),g=T.mergeRealAndImagArrays(i,r),f=T.mergeRealAndImagArrays(o,s),y=n.length,b=v.computeStrides(n),x=e.length,_=v.computeStrides(e);if(h.length+m.length===0)for(let w=0;w<d.length;w++){let C=w%g.length,k=w%f.length,N=t(g[C*2],g[C*2+1],f[k*2],f[k*2+1]);d[w]=N.real,p[w]=N.imag}else for(let w=0;w<d.length;w++){let C=v.indexToLoc(w,c,u),k=C.slice(-y);h.forEach(Y=>k[Y]=0);let N=v.locToIndex(k,y,b),P=C.slice(-x);m.forEach(Y=>P[Y]=0);let F=v.locToIndex(P,x,_),z=t(g[N*2],g[N*2+1],f[F*2],f[F*2+1]);d[w]=z.real,p[w]=z.imag}return[d,p,a]}}var sV=Et((t,n)=>t+n),NFe=vb((t,n,e,i)=>({real:t+e,imag:n+i})),nl=zt(Ks,sV,NFe),bZ={kernelName:Ks,backendName:"cpu",kernelFunc:nl};function _b(t,n,e,i,r){let o=v.sizeFromShape(i),s=v.makeZerosTypedArray(r,e);for(let a=0;a<t.length;a++){let l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=r||(o>0?s[l]+=n[a]:s[l]+=1)}return s}function iI(t,n,e,i=!1){let r=t.shape[0],o=t.shape[1],s=Ue([r,e],n.dtype);for(let a=0;a<r;a++)for(let l=0;l<o;l++){let c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||(i?s.set(1,a,c):n.size>0?s.set(s.get(a,c)+n.get(a,l),a,c):s.set(s.get(a,c)+1,a,c))}return s}var aV=Et((t,n)=>t&n),MFe=zt(S0,aV),xZ={kernelName:S0,backendName:"cpu",kernelFunc:MFe};function Ai(t){return(n,e,i)=>{let r=v.getArrayFromDType(e,n.length);for(let o=0;o<n.length;++o)r[o]=t(n[o],i);return r}}function tt(t,n,e){let i=Ai(n);return no(t,i,e)}function no(t,n,e){return({inputs:i,attrs:r,backend:o})=>{let{x:s}=i;ce(s,t);let a=o,l=a.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=T.fromUint8ToStringArray(l)}else c=l;let u=e||s.dtype,d=n(c,u,r);return a.makeTensorInfo(s.shape,u,d)}}var lV=Ai(t=>Math.ceil(t)),OFe=no(Jl,lV),vZ={kernelName:Jl,backendName:"cpu",kernelFunc:OFe};function rI(t,n,e,i){let r=v.getArrayFromDType(e,v.sizeFromShape(n));if(i&&e!=="string"){let o=0;t.forEach(s=>{let a=v.sizeFromShape(s.shape);r.set(s.vals,o),o+=a})}else{let o=0;t.forEach(s=>{let a=e==="string"?T.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let c=0;c<s.shape[0];++c){let u=c*n[1]+o;for(let d=0;d<s.shape[1];++d)r[u+d]=a[l++]}o+=s.shape[1]})}return r}var cV=Et((t,n)=>t===n?1:0),uV=zt(Eh,cV,null,"bool"),_Z={kernelName:Eh,backendName:"cpu",kernelFunc:uV};var dV=Ai(t=>Math.exp(t)),pV=no(sc,dV,"float32"),wZ={kernelName:sc,backendName:"cpu",kernelFunc:pV};var hV=Ai(t=>Math.expm1(t)),RFe=no(ac,hV),CZ={kernelName:ac,backendName:"cpu",kernelFunc:RFe};var mV=Ai(t=>Math.floor(t)),FFe=no(lc,mV),TZ={kernelName:lc,backendName:"cpu",kernelFunc:FFe};var fV=Et((t,n)=>Math.floor(t/n)),LFe=zt(cc,fV,null,"int32"),SZ={kernelName:cc,backendName:"cpu",kernelFunc:LFe};function oI(t,n,e,i,r,o,s,a,l){let c=Ue([i,o],e);for(let u=0;u<i;u++){let d=[],p=0;for(let h=0;h<r;h++){let m=t[u*r+h];p+=m*s[h],d.push(m)}if(p<0||p>=l/o)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<o;h++)c.values[u*o+h]=n.get(...n.indexToLoc(p*o+h))}return c}function sI(t,n,e){let i=Ue(e,t.dtype);for(let r=0;r<i.size;++r){let s=i.indexToLoc(r).slice(),a=s[0],l=s[2],c=n.locToIndex([a,l]);s[2]=n.values[c];let u=t.locToIndex(s);0<=u&&u<t.values.length&&(i.values[r]=t.values[u])}return i}var gV=Et((t,n)=>t>n?1:0),PFe=zt(Ih,gV,null,"bool"),kZ={kernelName:Ih,backendName:"cpu",kernelFunc:PFe};var yV=Et((t,n)=>t>=n?1:0),$Fe=zt(uc,yV,null,"bool"),EZ={kernelName:uc,backendName:"cpu",kernelFunc:$Fe};var bV=Et((t,n)=>t<n?1:0),VFe=zt(Dh,bV,null,"bool"),IZ={kernelName:Dh,backendName:"cpu",kernelFunc:VFe};var xV=Et((t,n)=>t<=n?1:0),BFe=zt(Ah,xV,null,"bool"),DZ={kernelName:Ah,backendName:"cpu",kernelFunc:BFe};function aI(t,n,e){let i=(n-t)/(e-1),r=v.makeZerosTypedArray(e,"float32");r[0]=t;for(let o=1;o<r.length;o++)r[o]=r[o-1]+i;return r}var vV=Ai(t=>Math.log(t)),zFe=no(mc,vV),AZ={kernelName:mc,backendName:"cpu",kernelFunc:zFe};function lI(t,n,e,i){let r=v.getTypedArrayFromDType(i,v.sizeFromShape(e));for(let o=0;o<r.length;++o){let s=o*n,a=t[s];for(let l=0;l<n;++l){let c=t[s+l];(Number.isNaN(c)||c>a)&&(a=c)}r[o]=a}return r}var _V=Et((t,n)=>Math.max(t,n)),GFe=zt(gc,_V),NZ={kernelName:gc,backendName:"cpu",kernelFunc:GFe};var wV=Et((t,n)=>Math.min(t,n)),UFe=zt(yc,wV),MZ={kernelName:yc,backendName:"cpu",kernelFunc:UFe};var C_=Et((t,n)=>t*n),HFe=vb((t,n,e,i)=>({real:t*e-n*i,imag:t*i+n*e})),xm=zt(xc,C_,HFe),OZ={kernelName:xc,backendName:"cpu",kernelFunc:xm};function CV(t,n,e){let i=v.createScalarValue(-1,e);return C_([],n,i,t,e)}function WFe(t){let{inputs:n,backend:e}=t,{x:i}=n;ce(i,"neg");let r=e.data.get(i.dataId).values,[o,s]=CV(r,i.shape,i.dtype);return e.makeTensorInfo(s,i.dtype,o)}var RZ={kernelName:yd,backendName:"cpu",kernelFunc:WFe};var TV=Et((t,n)=>t!==n?1:0),jFe=zt(Rh,TV,null,"bool"),FZ={kernelName:Rh,backendName:"cpu",kernelFunc:jFe};function wb(t,n,e,i,r){let o=n.length,s=v.sizeFromShape(n),a=v.computeStrides(n),l=v.computeStrides(r),c=v.getTypedArrayFromDType(e,v.sizeFromShape(r));for(let u=0;u<s;++u){let d=v.indexToLoc(u,o,a),p=new Array(d.length);for(let m=0;m<p.length;m++)p[m]=d[i[m]];let h=v.locToIndex(p,o,l);c[h]=t[u]}return c}function Pn(t){let{inputs:n,attrs:e,backend:i}=t,{x:r}=n,{perm:o}=e;ce(r,"transpose");let s=r.shape.length,a=new Array(s);for(let d=0;d<a.length;d++)a[d]=r.shape[o[d]];let l=i.data.get(r.dataId).values,c=wb(l,r.shape,r.dtype,o,a);return{dataId:i.write(c,a,r.dtype),shape:a,dtype:r.dtype}}var LZ={kernelName:Wa,backendName:"cpu",kernelFunc:Pn};function SV(t,n,e,i){let[r,o]=T.computeOutAndReduceShapes(t,i),s=ii(n,"int32"),a=v.makeZerosTypedArray(v.sizeFromShape(r),s),l=v.sizeFromShape(o);for(let c=0;c<a.length;++c){let u=c*l,d=1;for(let p=0;p<l;++p)d*=e[u+p];a[c]=d}return{outVals:a,outShape:r,outDtype:s}}function qFe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;ce(r,"prod");let a=r.shape.length,l=v.parseAxisParam(o,r.shape),c=T.getAxesPermutation(l,a),u=l,d=r,p=[];c!=null&&(d=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),p.push(d),u=T.getInnerMostAxes(u.length,a));let h=e.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:f}=SV(d.shape,d.dtype,h,u),y=g;return s&&(y=T.expandShapeToKeepDim(g,l)),p.forEach(b=>e.disposeIntermediateTensorInfo(b)),e.makeTensorInfo(y,f,m)}var PZ={kernelName:Cd,backendName:"cpu",kernelFunc:qFe};function XFe(t,n,e){t.forEach((i,r)=>{if(i<0||i>=e){let o=v.indexToLoc(r,n.length,v.computeStrides(n)).join(",");throw new Error(`indices[${o}] = ${i} is not in [0, ${e})`)}})}function KFe(t,n){for(let e=0;e<t.length;++e){let i=t[e],r=e===t.length-1?n:t[e+1].length;if(i.length===0)throw new Error("Ragged splits may not be empty");if(i[0]<0)throw new Error("Ragged splits must be non-negative");if(i[i.length-1]>r)throw new Error("Ragged splits must not point past values");for(let o=1;o<i.length;++o)if(i[o-1]>i[o])throw new Error("Ragged splits must be sorted in ascending order")}}function YFe(t,n,e,i){let r=[],o=0,s=n.length-1+e.length,a=new Array(s).fill(null).map(()=>[0]);KFe(e,i);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];let u=n[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let p=0;p<e.length;++p){let h=e[p],m=p+n.length-1;if(m>=0){let g=a[m],f=g[g.length-1]-h[u];for(let y=u;y<d;++y)a[m].push(h[y+1]+f)}u=h[u],d=h[d]}d!==u&&(r.push([u,d]),o+=d-u)}return{outSplits:a,valueSlices:r,numValues:o}}function QFe(t){let n=[];for(let e=0;e<t.length;++e){let i=t[e].length,r=v.getArrayFromDType("int32",i);n.push(r),t[e].forEach((o,s)=>r[s]=o)}return n}function $Z(t,n){let e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let i=n;i<t.length;i++)e[n-1]*=t[i];return e}function ZFe(t,n,e,i,r,o){let s=$Z(n,2)[1],a=$Z(o,2)[1],l=0;for(let c of e)for(let u=c[0];u<c[1];++u){for(let d=0;d<i;++d)r[l*a+d]=t[u*s+d];++l}}function JFe(t,n,e,i,r){let o=n.slice();o[0]=r;let s=v.getArrayFromDType(e,v.sizeFromShape(o)),a=t.length,l=a===0?0:a/n[0];return ZFe(t,n,i,l,s,o),[s,o]}function cI(t,n,e,i,r,o,s,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(n[0].length===0)throw new Error("Split tensors must not be scalars");let l=n[0][0]-1;if(XFe(o,s,l),i.length===0)throw new Error("params.rank must be nonzero");let c=i[0],{outSplits:u,valueSlices:d,numValues:p}=YFe(o,s,t,c),h=QFe(u),m=JFe(e,i,r,d,p);return[h,m[0],m[1]]}var VZ=2147483647;function uI(t,n,e,i,r,o,s){if(n.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let a=n.length===0,l=r.length===0,c=s.length===0,u=[];a||u.push(n[0]),l||u.push(r[0]),c||u.push(s[0]);for(let f=1;f<u.length;++f)if(u[f]!==u[f-1])throw new Error("starts, limits, and deltas must have the same shape");let d=u.length===0?1:u[0],p=v.getArrayFromDType("int32",d+1);p[0]=0;for(let f=0;f<d;++f){let y=a?t[0]:t[f],b=l?i[0]:i[f],x=c?o[0]:o[f];if(x===0)throw new Error("Requires delta != 0");let _;if(x>0&&b<y||x<0&&b>y)_=0;else if(_=Math.ceil(Math.abs((b-y)/x)),_>VZ)throw new Error(`Requires ((limit - start) / delta) <= ${VZ}`);p[f+1]=p[f]+_}let h=p[d],m=v.getArrayFromDType(e,h),g=0;for(let f=0;f<d;++f){let y=p[f+1]-p[f],b=a?t[0]:t[f],x=c?o[0]:o[f];for(let _=0;_<y;++_)m[g++]=b,b+=x}return[p,m]}var Ds=T.RowPartitionType,kV=class t{constructor(n,e,i,r,o,s,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=i,this.valuesShape=r,this.valuesDType=o,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=T.getRowPartitionTypesHelper(u),this.raggedRank=T.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===Ds.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===Ds.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){let e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Ds.VALUE_ROWIDS:return t.getMaxWidthValueRowID(e);case Ds.ROW_SPLITS:return t.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Ds[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){let e=n.length;if(e===0||e===1)return 0;let i=0;for(let r=0;r<e-1;++r){let o=n[r+1]-n[r];o>i&&(i=o)}return i}static getMaxWidthValueRowID(n){let e=n.length;if(e===0)return 0;let i=0,r=n[0],o=0;for(let s=1;s<e;++s){let a=n[s];a!==r&&(r=a,o=Math.max(s-i,o),i=s)}return Math.max(e-i,o)}tensorShapeFromTensor(n,e,i=!0){if(e.length===0){if(n[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return zZ(n,i)}calculateOutputSize(n){let e=this.valuesShape,i=this.defaultValueShape;T.validateDefaultValueShape(i,e);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=T.combineRaggedTensorToTensorShapes(this.raggedRank,r,e);s[0]<0&&(s[0]=n);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(n,e,i){let r=Math.min(n,i),o=[],s=0;for(let a=0;a<r;++a,s+=e)o.push(s);for(let a=r;a<n;++a)o.push(-1);return v.assert(o.length===n,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(n,e,i,r){let o=n.length,s=[];for(let a=0;a<o-1;++a){let l=n[a+1]-n[a],c=Math.min(r,l),u=e[a];u===-1&&(c=0);for(let d=0;d<c;++d)s.push(u),u+=i;for(let d=0;d<l-c;++d)s.push(-1)}if(o>0&&s.length!==n[o-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(n,e,i,r){let o=n.length,s=[];if(o===0)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];s.push(c);for(let u=1;u<o;++u){let d=n[u];if(d===l)c>=0&&(++a,a<r?c+=i:c=-1);else{if(a=0,l=d,d>=e.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${e.length}`);c=e[d]}s.push(c)}if(s.length!==n.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(n,e,i,r){let o=this.getRowPartitionTensor(n),s=this.getRowPartitionTypeByDimension(n);switch(s){case Ds.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,e,i,r);case Ds.ROW_SPLITS:if(o.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(o,e,i,r);default:throw new Error(`Unsupported partition type: ${Ds[s]}`)}}getFirstDimensionSize(){let n=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let e=this.rowPartitionTypes[0];switch(e){case Ds.FIRST_DIM_SIZE:return n[0];case Ds.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Ds.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Ds[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),i=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let l=r.length-2;l>=0;--l)r[l]=r[l+1]*i[l+1];let o=zZ(i,!1),s=v.getArrayFromDType(this.valuesDType,v.sizeFromShape(o));if(r[0]*i[0]>0){let l=this.calculateFirstParentOutputIndex(e,r[0],i[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,r[c],i[c]);this.setOutput(this.raggedRank,l,s,o)}return[o,s]}setOutput(n,e,i,r){if(i.length===0)return;let o=this.values,s=i,a=r.slice();a=a.slice(n+1);let l=v.sizeFromShape(a),c=e.length,u=this.defaultValue;if(u.length!==l&&u.length!==1){let m=this.defaultValueShape;H(()=>{let g=$(u,m);u=zc(g,a).dataSync()})}let d=0,p=0,h=0;for(let m=0;m<=c;++m){let g=m<c?e[m]:-1;if(g===h){++h;continue}if(p<h){let f=o.subarray(d*l),y=s.subarray(p*l),b=(h-p)*l;BZ(y,f,b)}if(m>=c){let f=i.length;g=Math.floor(f/l)}if(g>h)if(this.defaultValue.length===1)s.subarray(h*l,g*l).fill(this.defaultValue[0]),h=g;else for(;g>h;){let f=s.slice(h*l);BZ(f,u,l),++h}g<0?(d=m+1,p=h):(d=m,p=h,h=p+1)}}};function BZ(t,n,e){for(let i=0;i<e;i++)t[i]=n[i]}function zZ(t,n){let e=[];for(let i of t){if(i<0){if(!n)throw new Error(`Dimension ${i} must be >= 0`);if(i<-1)throw new Error(`Dimension ${i} must be >= -1`);i=-1}e.push(i)}return e}function dI(t,n,e,i,r,o,s,a,l,c){return new kV(t,n,e,i,r,o,s,a,l,c).compute()}function pI(t,n,e,i){let r=t===n,o=t<n&&e<0,s=n<t&&e>1;if(r||o||s)return v.makeZerosTypedArray(0,i);let a=Math.abs(Math.ceil((n-t)/e)),l=v.makeZerosTypedArray(a,i);n<t&&e===1&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}var EV=Ai(t=>1/Math.sqrt(t)),e2e=no(Sc,EV),GZ={kernelName:Sc,backendName:"cpu",kernelFunc:e2e};function la(t,n,e,i,r,o,s,a,l,c){let u=[i/r,r],d=t.values,p=n.values;if(i===0)return Ue(e,n.dtype);let h=l instanceof nn?l:Ue(u,n.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let m=0;m<o;m++){let g=[],f=0;for(let y=0;y<s;y++){let b=d[m*s+y];g.push(b),f+=b*a[y]}if(f<0||f>=i/r)throw new Error(`Invalid indices: ${g} does not index into ${e}`);for(let y=0;y<r;y++)c?h.values[f*r+y]+=p[m*r+y]:h.values[f*r+y]=n.rank===0?p[0]:p[m*r+y]}return h}var UZ=Ai(t=>1/(1+Math.exp(-t))),IV=tt(Ac,t=>1/(1+Math.exp(-t))),HZ={kernelName:Ac,backendName:"cpu",kernelFunc:IV};function DV(t,n,e,i,r){let o=ki.isSliceContinous(i,n,e),s=v.sizeFromShape(e),a=v.computeStrides(i);if(o){let d=ki.computeFlatOffset(n,a);return r==="string"?t.slice(d,d+s):t.subarray(d,d+s)}let l=r==="string"?T.fromUint8ToStringArray(t):t,c=Ue(i,r,l),u=Ue(e,r);for(let d=0;d<u.size;++d){let p=u.indexToLoc(d),h=p.map((m,g)=>m+n[g]);u.set(c.get(...h),...p)}return r==="string"?T.fromStringArrayToUint8(u.values):u.values}function As(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,size:s}=i;ce(r,"slice");let[a,l]=ki.parseSliceParams(r,o,s);ki.assertParamsValid(r,a,l);let c=e.data.get(r.dataId).values,u=DV(c,a,l,r.shape,r.dtype);return e.makeTensorInfo(l,r.dtype,u)}var WZ={kernelName:Dd,backendName:"cpu",kernelFunc:As};function hI(t,n,e,i,r,o,s){let a=n[0],l=o[0],c=new Array(l),u=new Array(a),d=n[1];if(l===0){if(a!==0)throw new Error(T.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let f=v.getArrayFromDType(e,0),y=v.getArrayFromDType(r,0);return[f,[0,d],y,c,u]}let p=!0,h=0,m=new Array(l).fill(0);for(let f=0;f<a;++f){let y=t[f*d];if(y<0)throw new Error(T.getSparseFillEmptyRowsNegativeIndexErrorMessage(f,y));if(y>=l)throw new Error(T.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(f,y,l));++m[y],p=p&&y>=h,h=y}let g=!0;for(let f=0;f<l;++f){let y=m[f]===0;c[f]=y,g=g&&!y,m[f]=Math.max(m[f],1),f>0&&(m[f]+=m[f-1])}if(g&&p){let f=t,y=i;for(let b=0;b<a;++b)u[b]=b;return[f,[a,d],y,c,u]}else{let f=m[l-1],y=v.getArrayFromDType(e,f*d),b=v.getArrayFromDType(r,f),x=new Array(l).fill(0);for(let _=0;_<a;++_){let w=t[_*d],C=x[w],k=(w===0?0:m[w-1])+C;x[w]++;for(let N=0;N<d;++N)y[k*d+N]=t[_*d+N];b[k]=i[_],u[_]=k}for(let _=0;_<l;++_)if(x[_]===0){let C=_===0?0:m[_-1];y[C*d+0]=_;for(let k=1;k<d;++k)y[C*d+k]=0;b[C]=s}return[y,[f,d],b,c,u]}}function mI(t,n,e,i,r){let o=v.sizeFromShape(i),s=n[0],a=r.length,l=[],c=1,u=-1;for(let f=0;f<a;++f){let y=r[f];if(y===-1){if(u!==-1)throw new Error(T.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,f));u=f,l.push(1)}else{if(y<0)throw new Error(T.getSparseReshapeNegativeOutputDimErrorMessage(f,y));c*=y,l.push(y)}}if(u!==-1){if(c<=0)throw new Error(T.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let f=Math.trunc(o/c);if(c*f!==o)throw new Error(T.getSparseReshapeInputOutputMultipleErrorMessage(i,l));l[u]=f}if(v.sizeFromShape(l)!==o)throw new Error(T.getSparseReshapeInputOutputMismatchErrorMessage(i,l));let p=i.length,h=[];if(p>0){h[p-1]=1;for(let f=p-2;f>=0;--f)h[f]=h[f+1]*i[f+1]}let m=[];if(a>0){m[a-1]=1;for(let f=a-2;f>=0;--f)m[f]=m[f+1]*l[f+1]}let g=v.getArrayFromDType(e,s*a);for(let f=0;f<s;++f){let y=0;for(let b=0;b<p;++b)y+=t[f*p+b]*h[b];for(let b=0;b<a;++b)g[f*a+b]=Math.trunc(y/m[b]),y%=m[b]}return[g,[s,a],l]}function Cb(t,n,e,i,r,o=!1,s=0){let a=i.length,l=[n[0],t.length/n[0]],c=l[1],d=a>0?r[a-1]+1:0;if(d<0)throw new Error(T.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=n.slice();p[0]=d;let h=p.reduce((x,_)=>x*_,1),m=v.getArrayFromDType(e,h);if(a===0)return d>0&&m.fill(s),[m,p];if(d<=0)throw new Error(T.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,f=1,y=0,b=r[g];for(;;){let x=0;if(f<a){if(x=r[f],b===x){++f;continue}if(b>=x)throw new Error(T.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(b<0||b>=d)throw new Error(T.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b,d));b>y&&m.fill(s,y*c,b*c);for(let _=g;_<f;++_){let w=i[_];if(w<0||w>=l[0])throw new Error(T.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_,i[_],l[0]));for(let C=0;C<c;C++)m[b*c+C]+=t[w*c+C]}if(o)for(let _=0;_<c;_++)m[b*c+_]/=f-g;if(g=f,++f,y=b+1,b=x,f>a)break}return y<d&&m.fill(s,y*c,d*c),[m,p]}var jZ=Ai(t=>Math.sqrt(t)),t2e=tt(Mc,t=>Math.sqrt(t)),qZ={kernelName:Mc,backendName:"cpu",kernelFunc:t2e};var AV=Et((t,n)=>{let e=t-n;return e*e}),n2e=zt(Oc,AV),XZ={kernelName:Oc,backendName:"cpu",kernelFunc:n2e};var NV=Ai((t,n)=>{let{pattern:e,replaceGlobal:i,rewrite:r}=n;return t.replace(new RegExp(e,i?"g":""),r)}),i2e=no(I0,NV),KZ={kernelName:I0,backendName:"cpu",kernelFunc:i2e};function fI(t,n,e,i){let r=Ue(t,n.dtype);for(let o=0;o<r.size;o++){let s=r.indexToLoc(o),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*e[l]+i[l];r.set(n.get(...a),...s)}return r}var MV=class{constructor(n,e,i,r,o,s){this.separator=v.encodeString(n),this.nGramWidths=e,this.leftPad=v.encodeString(i),this.rightPad=v.encodeString(r),this.padWidth=o,this.preserveShort=s}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){let i=this.getPadWidth(e);return Math.max(0,n+2*i-e+1)}createNGrams(n,e,i,r,o,s){for(let a=0;a<o;++a){let l=this.getPadWidth(s),c=Math.max(0,l-a),u=Math.max(0,l-(o-(a+1))),d=s-(c+u),p=e+(c>0?0:a-l),h=0;h+=c*this.leftPad.length;for(let b=0;b<d;++b)h+=n[p+b].length;h+=u*this.rightPad.length;let m=c+u+d-1;h+=m*this.separator.length,i[r+a]=new Uint8Array(h);let g=i[r+a],f=0,y=b=>b.forEach(x=>g[f++]=x);for(let b=0;b<c;++b)y(this.leftPad),y(this.separator);for(let b=0;b<d-1;++b)y(n[p+b]),y(this.separator);if(d>0){y(n[p+d-1]);for(let b=0;b<u;++b)y(this.separator),y(this.rightPad)}else{for(let b=0;b<u-1;++b)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(n,e){let i=n.length,r=e.length;if(r>0){let l=e[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<r;++c){let u=e[c]>=l;if(u=u&&e[c]<=i,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${i}]`);l=e[c]}if(l!==i)throw new Error(`Last split value must be data size. Expected ${i}, got ${l}`)}let o=r-1,s=v.getArrayFromDType("int32",r);if(i===0||r===0){let l=new Array(i);for(let c=0;c<=o;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=o;++l){let c=e[l]-e[l-1],u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),s[l]=s[l-1]+u}let a=new Array(s[o]);for(let l=0;l<o;++l){let c=e[l],u=s[l];if(this.nGramWidths.forEach(d=>{let p=e[l+1]-e[l],h=this.getNumNGrams(p,d);this.createNGrams(n,c,a,u,h,d),u+=h}),this.preserveShort&&u===s[l]){let d=e[l+1]-e[l];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(n,c,a,u,1,p)}}return[a,s]}};function gI(t,n,e,i,r,o,s,a){return new MV(e,i,r,o,s,a).compute(t,n)}function r2e(t,n,e,i){if(!t.length)return;if(n.length===0){for(let o=0;o<t.length;++o)i.push(t.subarray(o,o+1));return}if(n.length===1){let o=n[0],s=t.indexOf(o);for(;s!==-1;){let a=t.subarray(0,s);(!e||a.length!==0)&&i.push(a),t=t.subarray(s+1),s=t.indexOf(o)}(!e||t.length!==0)&&i.push(t);return}let r=0;for(let o=0;o<t.length+1;o++)if(o===t.length||n.indexOf(t[o])!==-1){let s=t.subarray(r,o);(!e||s.length!==0)&&i.push(s),r=o+1}}function yI(t,n,e){let i=t.length,r=[],o=0,s=0,a=new Array(i);for(let p=0;p<i;++p){let h=r.length;r2e(t[p],n,e,r);let m=r.length-h;a[p]=m,o+=m,s=Math.max(s,m)}let l=v.getArrayFromDType("int32",o*2),c=new Array(o),u=[i,s],d=0;for(let p=0;p<i;++p)for(let h=0;h<a[p];++h)l[d*2]=p,l[d*2+1]=h,c[d]=r[d],++d;return[l,c,u]}function bI(t,n){let e=v.getArrayFromDType("int32",t.length);for(let i=0;i<t.length;++i)e[i]=v.fingerPrint64(t[i]).modulo(n).getLowBitsUnsigned();return e}var OV=Et((t,n)=>t-n),o2e=vb((t,n,e,i)=>({real:t-e,imag:n-i})),T_=zt(Rc,OV,o2e),YZ={kernelName:Rc,backendName:"cpu",kernelFunc:T_};function xI(t,n){let e=new Array(t.rank);for(let r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];let i=Ue(e,t.dtype);for(let r=0;r<i.values.length;++r){let o=i.indexToLoc(r),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=o[l]%t.shape[l];let a=t.locToIndex(s);i.values[r]=t.values[a]}return i}var S_=(t,n)=>{let e=n.value-t.value;return e===0?t.index-n.index:e};function QZ(t,n,e=0,i=t.length-1){for(;i>e;){if(i-e>600){let a=i-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),p=Math.max(e,Math.floor(n-l*u/a+d)),h=Math.min(i,Math.floor(n+(a-l)*u/a+d));QZ(t,n,p,h)}let r=t[n],o=e,s=i;for(v.swap(t,e,n),S_(t[i],r)>0&&v.swap(t,e,i);o<s;){for(v.swap(t,o,s),o++,s--;S_(t[o],r)<0;)o=o+1;for(;S_(t[s],r)>0;)s=s-1}S_(t[e],r)===0?v.swap(t,e,s):(s=s+1,v.swap(t,s,i)),s<=n&&(e=s+1),n<=s&&(i=s-1)}}function vI(t,n,e,i,r){let o=n[n.length-1],[s,a]=[t.length/o,o],l=v.getTypedArrayFromDType(e,s*i),c=v.getTypedArrayFromDType("int32",s*i);for(let d=0;d<s;d++){let p=d*a,h=t.subarray(p,p+a),m=new Array(h.length);h.forEach((b,x)=>m[x]={value:b,index:x}),i<m.length&&(QZ(m,i),m=m.slice(0,i)),r&&m.sort(S_);let g=d*i,f=l.subarray(g,g+i),y=c.subarray(g,g+i);for(let b=0;b<i;b++)f[b]=m[b].value,y[b]=m[b].index}let u=n.slice();return u[u.length-1]=i,[Ue(u,e,l),Ue(u,"int32",c)]}function _I(t,n,e,i){let r=v.parseAxisParam(n,e)[0],o=[1,e[0],1];for(let m=0;m<r;m++)o[0]*=e[m];o[1]=e[r];for(let m=r+1;m<e.length;m++)o[2]*=e[m];let s=new Map,a=new Int32Array(e[r]),l=new nn(o,i,t),c=[],u=o[0]===1&&o[2]===1;for(let m=0;m<e[r];m++){let g;if(u)g=t[m].toString();else{let y=[];for(let b=0;b<o[0];b++)for(let x=0;x<o[2];x++)y.push(l.get(b,m,x));g=y.join(",")}let f=s.get(g);if(f!=null)a[m]=f;else{let y=s.size;s.set(g,y),a[m]=y,c.push(m)}}let d=o.slice();d[1]=s.size;let p=new nn(d,i);c.forEach((m,g)=>{for(let f=0;f<o[0];f++)for(let y=0;y<o[2];y++)p.set(l.get(f,m,y),f,g,y)});let h=e.slice();return h[r]=d[1],{outputValues:p.values,outputShape:h,indices:a}}Sk("cpu",()=>new pZ,1);var FV=tt(rc,t=>t>=0?t:Math.exp(t)-1),ZZ={kernelName:rc,backendName:"cpu",kernelFunc:FV};function LV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{alpha:o}=i;ce([r],"leakyRelu");let s=v.sizeFromShape(r.shape),a=e.data.get(r.dataId).values,l=v.getTypedArrayFromDType("float32",s);for(let c=0;c<a.length;c++)l[c]=a[c]<0?o*a[c]:a[c];return e.makeTensorInfo(r.shape,"float32",l)}var JZ={kernelName:cd,backendName:"cpu",kernelFunc:LV};var s2e=Et((t,n)=>t<0?n*t:t);function PV(t){let{inputs:n,backend:e}=t,{x:i,alpha:r}=n;ce([i,r],"prelu");let o=e.data.get(i.dataId).values,s=e.data.get(r.dataId).values,[a,l]=s2e(i.shape,r.shape,o,s,"float32");return e.makeTensorInfo(l,"float32",a)}var eJ={kernelName:wd,backendName:"cpu",kernelFunc:PV};var $V=tt(wc,t=>Math.max(0,t)),tJ={kernelName:wc,backendName:"cpu",kernelFunc:$V};var VV=tt(Cc,t=>Math.min(Math.max(0,t),6)),nJ={kernelName:Cc,backendName:"cpu",kernelFunc:VV};function vm(t,n,e,i,r){if(e==="linear")return er({inputs:{x:n},backend:t});if(e==="relu")return $V({inputs:{x:n},backend:t});if(e==="elu")return FV({inputs:{x:n},backend:t});if(e==="relu6")return VV({inputs:{x:n},backend:t});if(e==="prelu")return PV({inputs:{x:n,alpha:i},backend:t});if(e==="leakyrelu")return LV({inputs:{x:n},backend:t,attrs:{alpha:r}});if(e==="sigmoid")return IV({inputs:{x:n},backend:t});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function It(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{shape:o}=i,s=v.sizeFromShape(r.shape),a=v.inferFromImplicitShape(o,s),l=v.sizeFromShape(a);v.assert(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${r.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),e.incRef(r.dataId);let c=e.data.get(r.dataId);if(c.complexTensorInfos!=null){let u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:r.dataId,shape:a,dtype:r.dtype}}var iJ={kernelName:Td,backendName:"cpu",kernelFunc:It};function BV(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o}=n,{transposeA:s,transposeB:a}=i;ce([r,o],"matMul");let l=r.shape.length,c=o.shape.length,u=s?r.shape[l-2]:r.shape[l-1],d=a?o.shape[c-1]:o.shape[c-2],p=s?r.shape[l-1]:r.shape[l-2],h=a?o.shape[c-2]:o.shape[c-1],m=r.shape.slice(0,-2),g=o.shape.slice(0,-2),f=v.sizeFromShape(m),y=v.sizeFromShape(g),x=Co.assertAndGetBroadcastShape(r.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,h]);v.assert(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${r.shape} and ${o.shape} and transposeA=${s} and transposeB=${a} must match.`);let _=s?[f,u,p]:[f,p,u],w=a?[y,h,d]:[y,d,h],C=It({inputs:{x:r},backend:e,attrs:{shape:_}}),k=It({inputs:{x:o},backend:e,attrs:{shape:w}}),N=s?C.shape[1]:C.shape[2],P=s?C.shape[2]:C.shape[1],F=a?k.shape[1]:k.shape[2],z=Math.max(f,y),Y=e.data.get(C.dataId).values,K=e.data.get(k.dataId).values,Z=v.computeStrides(C.shape),te=v.computeStrides(k.shape),[U,j,q]=s?[Z[0],1,Z[1]]:[Z[0],Z[1],1],[Q,oe,se]=a?[1,te[1],te[0]]:[te[1],1,te[0]],ue=P*F,fe=Ue([z,P,F],C.dtype),ge=fe.values,xe=e.blockSize;for(let De=0;De<z;De++){let ve=De%f,He=De%y;for(let ae=0;ae<P;ae+=xe){let Te=Math.min(ae+xe,P);for(let Ie=0;Ie<F;Ie+=xe){let de=Math.min(Ie+xe,F);for(let ft=0;ft<N;ft+=xe){let lt=Math.min(ft+xe,N);for(let Dt=ae;Dt<Te;Dt++)for(let vt=Ie;vt<de;vt++){let Fe=0;for(let gt=ft;gt<lt;gt++){let Lr=Y[ve*U+Dt*j+gt*q],An=K[gt*Q+vt*oe+He*se];Fe+=Lr*An}ge[De*ue+(Dt*F+vt)]+=Fe}}}}}return e.disposeIntermediateTensorInfo(C),e.disposeIntermediateTensorInfo(k),e.makeTensorInfo(x,fe.dtype,fe.values)}var rJ={kernelName:Yu,backendName:"cpu",kernelFunc:BV};function a2e(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i,p,h,m,g=[];p=BV({inputs:{a:r,b:o},attrs:{transposeA:l,transposeB:c},backend:e}),s&&(h=nl({inputs:{a:p,b:s},backend:e}),g.push(p),p=h),u&&(m=vm(e,p,u,a,d),g.push(p),p=m);for(let y of g)e.disposeIntermediateTensorInfo(y);return p}var oJ={kernelName:Fh,backendName:"cpu",kernelFunc:a2e};var l2e=tt(jl,t=>Math.acos(t)),sJ={kernelName:jl,backendName:"cpu",kernelFunc:l2e};var c2e=tt(ql,t=>Math.acosh(t)),aJ={kernelName:ql,backendName:"cpu",kernelFunc:c2e};function u2e(t){let{inputs:n,backend:e}=t,i=n;ce(n,"addN");let r=i.map(a=>e.data.get(a.dataId).values),o=Ue(i[0].shape,i[0].dtype),s=o.values;for(let a=0;a<i.length;a++){let l=r[a];for(let c=0;c<s.length;c++)s[c]+=l[c]}return e.makeTensorInfo(o.shape,o.dtype,o.values)}var lJ={kernelName:Gg,backendName:"cpu",kernelFunc:u2e};function d2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;ce(r,"all");let a=v.parseAxisParam(o,r.shape),l=a,c=T.getAxesPermutation(l,r.shape.length),u=r;c!=null&&(u=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),l=T.getInnerMostAxes(l.length,r.shape.length)),T.assertAxesAreInnerMostDims("all",l,u.shape.length);let[d,p]=T.computeOutAndReduceShapes(u.shape,l),h=v.sizeFromShape(p),m=v.makeZerosTypedArray(v.sizeFromShape(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,x=g[b];for(let _=0;_<h;++_){let w=g[b+_];x=x&&w}m[y]=x}c!=null&&e.disposeIntermediateTensorInfo(u);let f=e.makeTensorInfo(d,u.dtype,m);if(s){let y=T.expandShapeToKeepDim(d,a),b=It({inputs:{x:f},backend:e,attrs:{shape:y}});return e.disposeIntermediateTensorInfo(f),b}return f}var cJ={kernelName:Ug,backendName:"cpu",kernelFunc:d2e};function p2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;ce(r,"any");let a=v.parseAxisParam(o,r.shape),l=a,c=T.getAxesPermutation(l,r.shape.length),u=r;c!=null&&(u=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),l=T.getInnerMostAxes(l.length,r.shape.length)),T.assertAxesAreInnerMostDims("any",l,u.shape.length);let[d,p]=T.computeOutAndReduceShapes(u.shape,l),h=v.sizeFromShape(p),m=v.makeZerosTypedArray(v.sizeFromShape(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,x=g[b];for(let _=0;_<h;++_){let w=g[b+_];x=x||w}m[y]=x}c!=null&&e.disposeIntermediateTensorInfo(u);let f=e.makeTensorInfo(d,u.dtype,m);if(s){let y=T.expandShapeToKeepDim(d,a),b=It({inputs:{x:f},backend:e,attrs:{shape:y}});return e.disposeIntermediateTensorInfo(f),b}return f}var uJ={kernelName:Hg,backendName:"cpu",kernelFunc:p2e};function h2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i;ce(r,"argMax");let s=v.parseAxisParam(o,r.shape),a=T.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Pn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],T.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,d]=T.computeOutAndReduceShapes(l.shape,s),p=v.sizeFromShape(u),h=v.makeZerosTypedArray(p,"int32"),m=v.sizeFromShape(d),g=e.data.get(l.dataId).values;for(let f=0;f<h.length;++f){let y=f*m,b=g[y],x=0;for(let _=0;_<m;++_){let w=g[y+_];w>b&&(b=w,x=_)}h[f]=x}return c.forEach(f=>e.disposeIntermediateTensorInfo(f)),e.makeTensorInfo(u,"int32",h)}var dJ={kernelName:ju,backendName:"cpu",kernelFunc:h2e};function m2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i;ce(r,"argMin");let s=v.parseAxisParam(o,r.shape),a=T.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Pn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],T.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,d]=T.computeOutAndReduceShapes(l.shape,s),p=v.sizeFromShape(u),h=v.makeZerosTypedArray(p,"int32"),m=v.sizeFromShape(d),g=e.data.get(l.dataId).values;for(let f=0;f<h.length;++f){let y=f*m,b=g[y],x=0;for(let _=0;_<m;++_){let w=g[y+_];w<b&&(b=w,x=_)}h[f]=x}return c.forEach(f=>e.disposeIntermediateTensorInfo(f)),e.makeTensorInfo(u,"int32",h)}var pJ={kernelName:qu,backendName:"cpu",kernelFunc:m2e};var f2e=tt(Xl,t=>Math.asin(t)),hJ={kernelName:Xl,backendName:"cpu",kernelFunc:f2e};var g2e=tt(Kl,t=>Math.asinh(t)),mJ={kernelName:Kl,backendName:"cpu",kernelFunc:g2e};var y2e=tt(Yl,t=>Math.atan(t)),fJ={kernelName:Yl,backendName:"cpu",kernelFunc:y2e};var b2e=Et((t,n)=>Math.atan2(t,n)),x2e=zt(Zl,b2e),gJ={kernelName:Zl,backendName:"cpu",kernelFunc:x2e};var v2e=tt(Ql,t=>Math.atanh(t)),yJ={kernelName:Ql,backendName:"cpu",kernelFunc:v2e};function Tb(t,n,e,i,r,o){let s=r.strideHeight,a=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,u=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Ue(r.outShape,e),f=g.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3],b=r.outShape[2]*r.outShape[3],x=r.outShape[3];for(let _=0;_<r.batchSize;++_){let w=_*y,C=_*i[0];for(let k=0;k<r.inChannels;++k)for(let N=0;N<r.outHeight;++N){let P=N*s-p,F=Math.max(0,P),z=Math.min(r.inHeight,u+P),Y=w+N*b;for(let K=0;K<r.outWidth;++K){let Z=K*a-h,te=Math.max(0,Z),U=Math.min(r.inWidth,d+Z),j=m,q=0,Q=0;for(let se=F;se<z;se+=l){let ue=C+se*i[1];for(let fe=te;fe<U;fe+=c){let ge=ue+fe*i[2],xe=t[ge+k];o==="max"&&xe>j?j=xe:o==="avg"&&(q+=xe,Q++)}if(isNaN(j))break}let oe=Y+K*x+k;f[oe]=o==="avg"?q/Q:j}}}return g}function wI(t,n,e,i,r=!1,o=!1){let s=Ue(i.outShape,"int32"),a=i.strideHeight,l=i.strideWidth,c=i.dilationHeight,u=i.dilationWidth,d=i.effectiveFilterHeight,p=i.effectiveFilterWidth,h=i.padInfo.top,m=i.padInfo.left,g=Ue(n,e,t);for(let f=0;f<i.batchSize;++f)for(let y=0;y<i.inChannels;++y)for(let b=0;b<i.outHeight;++b){let x=b*a-h,_=x;for(;_<0;)_+=c;let w=Math.min(i.inHeight,d+x);for(let C=0;C<i.outWidth;++C){let k=C*l-m,N=k;for(;N<0;)N+=u;let P=Math.min(i.inWidth,p+k),F=Number.NEGATIVE_INFINITY,z=-1;for(let Y=_;Y<w;Y+=c){let K=Y-x;for(let Z=N;Z<P;Z+=u){let te=Z-k,U=g.get(f,Y,Z,y);U>F&&(F=U,r?z=o?((f*i.inHeight+Y)*i.inWidth+Z)*i.inChannels+y:(Y*i.inWidth+Z)*i.inChannels+y:z=K*p+te)}}s.set(z,f,b,C,y)}}return s}function CI(t,n,e,i,r,o){let s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,u=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,h=r.effectiveFilterHeight,m=r.effectiveFilterWidth,g=r.padInfo.front,f=r.padInfo.top,y=r.padInfo.left,b=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=Ue(r.outShape,e),_=x.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[3]*r.outShape[4],N=r.outShape[4];for(let P=0;P<r.batchSize;++P){let F=P*w,z=P*i[0];for(let Y=0;Y<r.inChannels;++Y)for(let K=0;K<r.outDepth;++K){let Z=K*s-g,te=Z;for(;te<0;)te+=c;let U=Math.min(r.inDepth,p+Z),j=F+K*C;for(let q=0;q<r.outHeight;++q){let Q=q*a-f,oe=Q;for(;oe<0;)oe+=u;let se=Math.min(r.inHeight,h+Q),ue=j+q*k;for(let fe=0;fe<r.outWidth;++fe){let ge=fe*l-y,xe=ge;for(;xe<0;)xe+=d;let De=Math.min(r.inWidth,m+ge),ve=ue+fe*N,He=b,ae=0,Te=0;for(let de=te;de<U;de+=c){let ft=z+de*i[1];for(let lt=oe;lt<se;lt+=u){let Dt=ft+lt*i[2];for(let vt=xe;vt<De;vt+=d){let Fe=Dt+vt*i[3],gt=t[Fe+Y];if(o==="max"&&gt>He?He=gt:o==="avg"&&(ae+=gt,Te++),isNaN(He))break}if(isNaN(He))break}if(isNaN(He))break}let Ie=ve+Y;_[Ie]=o==="avg"?ae/Math.max(Te,1):He}}}}return x}function bJ(t,n){let e=Ue(n.outShape,"int32"),i=n.strideDepth,r=n.strideHeight,o=n.strideWidth,s=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,d=n.effectiveFilterWidth,p=n.padInfo.front,h=n.padInfo.top,m=n.padInfo.left;for(let g=0;g<n.batchSize;++g)for(let f=0;f<n.inChannels;++f)for(let y=0;y<n.outDepth;++y){let b=y*i-p,x=b;for(;x<0;)x+=s;let _=Math.min(n.inDepth,c+b);for(let w=0;w<n.outHeight;++w){let C=w*r-h,k=C;for(;k<0;)k+=a;let N=Math.min(n.inHeight,u+C);for(let P=0;P<n.outWidth;++P){let F=P*o-m,z=F;for(;z<0;)z+=l;let Y=Math.min(n.inWidth,d+F),K=Number.NEGATIVE_INFINITY,Z=-1;for(let te=x;te<_;te+=s){let U=te-b;for(let j=k;j<N;j+=a){let q=j-C;for(let Q=z;Q<Y;Q+=l){let oe=Q-F,se=t.get(g,te,j,Q,f);se>=K&&(K=se,Z=U*u*d+q*u+oe)}}}e.set(Z,g,y,w,P,f)}}}return e}function _2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;ce(r,"avgPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;v.assert(T.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=T.computePool2DInfo(r.shape,o,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&v.arraysEqual(u.inShape,u.outShape))d=er({inputs:{x:r},backend:e});else{let p=e.data.get(r.dataId).values,h=v.computeStrides(r.shape),m=Tb(p,r.shape,r.dtype,h,u,"avg");d=e.makeTensorInfo(u.outShape,r.dtype,m.values)}return d}var xJ={kernelName:Xu,backendName:"cpu",kernelFunc:_2e};function w2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=i;ce(r,"avgPool3d");let u=T.computePool3DInfo(r.shape,o,s,1,a,l,c),d=e.data.get(r.dataId).values,p=CI(d,r.shape,r.dtype,v.computeStrides(r.shape),u,"avg");return e.makeTensorInfo(p.shape,"float32",p.values)}var vJ={kernelName:Ku,backendName:"cpu",kernelFunc:w2e};function C2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=i;ce([r,o],"avgPool3DGrad");let u=T.computePool3DInfo(o.shape,s,a,1,l,c),d=u.strideDepth,p=u.strideHeight,h=u.strideWidth,m=u.filterDepth,g=u.filterHeight,f=u.filterWidth,y=u.dilationDepth,b=u.dilationHeight,x=u.dilationWidth,_=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,k=_-1-u.padInfo.front,N=C-1-u.padInfo.left,P=w-1-u.padInfo.top,F=Ue(o.shape,"float32"),z=1/(m*g*f),Y=e.bufferSync(r);for(let K=0;K<u.batchSize;++K)for(let Z=0;Z<u.inChannels;++Z)for(let te=0;te<u.inDepth;++te)for(let U=0;U<u.inHeight;++U)for(let j=0;j<u.inWidth;++j){let q=te-k,Q=U-P,oe=j-N,se=0;for(let ue=0;ue<_;ue+=y){let fe=(q+ue)/d;if(!(fe<0||fe>=u.outDepth||Math.floor(fe)!==fe))for(let ge=0;ge<w;ge+=b){let xe=(Q+ge)/p;if(!(xe<0||xe>=u.outHeight||Math.floor(xe)!==xe))for(let De=0;De<C;De+=x){let ve=(oe+De)/h;if(ve<0||ve>=u.outWidth||Math.floor(ve)!==ve)continue;let He=Y.get(K,fe,xe,ve,Z);se+=He}}}F.set(se*z,K,te,U,j,Z)}return e.makeTensorInfo(F.shape,F.dtype,F.values)}var _J={kernelName:jg,backendName:"cpu",kernelFunc:C2e};function T2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o;ce([r,o],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=i,u=T.computePool2DInfo(s.shape,a,l,1,c),d=u.strideHeight,p=u.strideWidth,h=u.filterHeight,m=u.filterWidth,g=u.dilationHeight,f=u.dilationWidth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,x=b-1-u.padInfo.left,_=y-1-u.padInfo.top,w=Ue(s.shape,"float32"),C=1/(h*m),k=e.data.get(r.dataId).values,N=Ue(r.shape,"float32",k);for(let P=0;P<u.batchSize;++P)for(let F=0;F<u.inChannels;++F)for(let z=0;z<u.inHeight;++z)for(let Y=0;Y<u.inWidth;++Y){let K=z-_,Z=Y-x,te=0;for(let U=0;U<y;U+=g){let j=(K+U)/d;if(!(j<0||j>=u.outHeight||Math.floor(j)!==j))for(let q=0;q<b;q+=f){let Q=(Z+q)/p;if(Q<0||Q>=u.outWidth||Math.floor(Q)!==Q)continue;let oe=N.get(P,j,Q,F);te+=oe}}w.set(te*C,P,z,Y,F)}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var wJ={kernelName:Wg,backendName:"cpu",kernelFunc:T2e};function S2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,scale:o,offset:s,mean:a,variance:l}=n;v.assert(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),v.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),v.assert(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),ce([r,a,l,o,s],"batchNorm");let{varianceEpsilon:c}=i;c==null&&(c=.001);let u=e.data.get(r.dataId).values,d=e.data.get(a.dataId).values,p=e.data.get(l.dataId).values,h=o?e.data.get(o.dataId).values:new Float32Array([1]),m=s?e.data.get(s.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),f=m.length,y=h.length,b=p.length,x=d.length,_=0,w=0,C=0,k=0;for(let N=0;N<u.length;++N)g[N]=m[_++]+(u[N]-d[w++])*h[C++]/Math.sqrt(p[k++]+c),_>=f&&(_=0),w>=x&&(w=0),C>=y&&(C=0),k>=b&&(k=0);return e.makeTensorInfo(r.shape,r.dtype,g)}var CJ={kernelName:ad,backendName:"cpu",kernelFunc:S2e};function k2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,crops:s}=i;ce([r],"batchToSpaceND");let a=o.reduce((y,b)=>y*b),l=T.getReshaped(r.shape,o,a),c=T.getPermuted(l.length,o.length),u=T.getReshapedPermuted(r.shape,o,a),d=T.getSliceBeginCoords(s,o.length),p=T.getSliceSize(u,s,o.length),h=It({inputs:{x:r},backend:e,attrs:{shape:l}}),m=Pn({inputs:{x:h},backend:e,attrs:{perm:c}}),g=It({inputs:{x:m},backend:e,attrs:{shape:u}}),f=As({inputs:{x:g},backend:e,attrs:{begin:d,size:p}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),f}var TJ={kernelName:Qu,backendName:"cpu",kernelFunc:k2e};function E2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s}=i,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=_b(a,l,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,c)}var SJ={kernelName:qg,backendName:"cpu",kernelFunc:E2e};function I2e(t){let{inputs:n,backend:e}=t,{s0:i,s1:r}=n,o=e.data.get(i.dataId).values,s=e.data.get(r.dataId).values,a=T.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var kJ={kernelName:q1,backendName:"cpu",kernelFunc:I2e};var D2e=tt(ec,(t,n)=>{let e=n;return t>e.clipValueMax?e.clipValueMax:t<e.clipValueMin?e.clipValueMin:t}),EJ={kernelName:ec,backendName:"cpu",kernelFunc:D2e};var A2e=t=>{let{x:n}=t.inputs,e=t.backend,i=new Float32Array(v.sizeFromShape(n.shape)),r=e.data.get(n.dataId),o=r.complexTensorInfos.real,s=r.complexTensorInfos.imag,a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values;for(let c=0;c<a.length;c++){let u=a[c],d=l[c];i[c]=Math.hypot(u,d)}return e.makeOutput(i,n.shape,"float32")},IJ={kernelName:Zu,backendName:"cpu",kernelFunc:A2e};function il(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.data.get(i.dataId).complexTensorInfos.imag,o=e.data.get(r.dataId).values;return e.makeTensorInfo(r.shape,r.dtype,o)}var DJ={kernelName:uy,backendName:"cpu",kernelFunc:il};function ep(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i,o=v.parseAxisParam(r,n[0].shape)[0],s=n.map(g=>g.shape);T.assertParamsConsistent(s,o);let a=T.computeOutShape(n.map(g=>g.shape),o);if(v.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(g=>v.sizeFromShape(g.shape)>0);if(l.length===1)return er({inputs:{x:l[0]},backend:e});if(l[0].dtype==="complex64"){let g=l.map(_=>Es({inputs:{input:_},backend:e})),f=l.map(_=>il({inputs:{input:_},backend:e})),y=ep({inputs:g,backend:e,attrs:{axis:o}}),b=ep({inputs:f,backend:e,attrs:{axis:o}}),x=yi({inputs:{real:y,imag:b},backend:e});return g.forEach(_=>e.disposeIntermediateTensorInfo(_)),f.forEach(_=>e.disposeIntermediateTensorInfo(_)),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(b),x}let c=l.map(g=>{let y=[-1,v.sizeFromShape(g.shape.slice(o))];return It({inputs:{x:g},backend:e,attrs:{shape:y}})}),u=c.map(g=>({vals:e.data.get(g.dataId).values,shape:g.shape}));a=T.computeOutShape(c.map(g=>g.shape),1);let d=c[0].shape[0]===1,p=rI(u,a,n[0].dtype,d),h=T.computeOutShape(l.map(g=>g.shape),o),m=e.makeTensorInfo(h,n[0].dtype,p);return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var AJ={kernelName:Ju,backendName:"cpu",kernelFunc:ep};function zV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i;ce([r,o],"conv2d");let d=T.convertConv2DDataFormat(l),p=T.computeConv2DInfo(r.shape,o.shape,s,c,a,u,!1,d),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,f=p.dilationWidth,y=p.padInfo.left,b=p.padInfo.top,x=p.dataFormat==="channelsLast",_=new nn(p.outShape,r.dtype),w=v.computeStrides(r.shape),C=v.computeStrides(o.shape),k=w[0],N=x?w[1]:w[2],P=x?w[2]:1,F=x?1:w[1],z=_.strides[0],Y=x?_.strides[1]:_.strides[2],K=x?_.strides[2]:1,Z=x?1:_.strides[1],te=e.data.get(r.dataId).values,U=e.data.get(o.dataId).values,j=_.values;for(let q=0;q<p.batchSize;++q){let Q=q*k,oe=q*z;for(let se=0;se<p.outHeight;++se){let ue=oe+se*Y,fe=se*p.strideHeight-b;for(let ge=0;ge<h;++ge){let xe=fe+ge*g;if(xe<0||xe>=p.inHeight)continue;let De=ge*C[0],ve=Q+xe*N;for(let He=0;He<p.outWidth;++He){let ae=ue+He*K,Te=He*p.strideWidth-y;for(let Ie=0;Ie<m;++Ie){let de=Te+Ie*f;if(de<0||de>=p.inWidth)continue;let ft=De+Ie*C[1],lt=ve+de*P,Dt=ft;for(let vt=0;vt<p.inChannels;++vt){let Fe=te[lt+vt*F];for(let gt=0;gt<p.outChannels;++gt)j[ae+gt*Z]+=Fe*U[Dt+gt];Dt+=p.outChannels}}}}}}return e.makeTensorInfo(_.shape,_.dtype,j)}var NJ={kernelName:ed,backendName:"cpu",kernelFunc:zV};function N2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i;ce([r,o],"conv2dBackpropFilter");let d=T.convertConv2DDataFormat(l),p=T.computeConv2DInfo(r.shape,u,s,1,a,c,!1,d),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:f}=p,y=p.dataFormat==="channelsLast",b=new nn(p.filterShape,"float32"),x=p.padInfo.left,_=p.padInfo.top,w=e.data.get(r.dataId).values,C=e.data.get(o.dataId).values,k=new nn(r.shape,r.dtype,w),N=new nn(o.shape,o.dtype,C);for(let P=0;P<g;++P){let F=Math.max(0,Math.ceil((_-P)/h)),z=Math.min(p.outHeight,(p.inHeight+_-P)/h);for(let Y=0;Y<f;++Y){let K=Math.max(0,Math.ceil((x-Y)/m)),Z=Math.min(p.outWidth,(p.inWidth+x-Y)/m);for(let te=0;te<p.inChannels;++te)for(let U=0;U<p.outChannels;++U){let j=0;for(let q=0;q<p.batchSize;++q)for(let Q=F;Q<z;++Q){let oe=P+Q*h-_;for(let se=K;se<Z;++se){let ue=Y+se*m-x;y?j+=k.get(q,oe,ue,te)*N.get(q,Q,se,U):j+=k.get(q,te,oe,ue)*N.get(q,U,Q,se)}}b.set(j,P,Y,te,U)}}}return e.makeTensorInfo(b.shape,b.dtype,b.values)}var MJ={kernelName:Kg,backendName:"cpu",kernelFunc:N2e};function M2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i;ce([r,o],"conv2dBackpropInput");let d=v.computeStrides(o.shape),p=v.computeStrides(r.shape),h=T.convertConv2DDataFormat(c),m=T.computeConv2DInfo(s,o.shape,a,1,l,u,!1,h),g=new nn(m.inShape,"float32"),f=g.values,y=e.data.get(r.dataId).values,b=e.data.get(o.dataId).values,[x,_,w]=d,{batchSize:C,filterHeight:k,filterWidth:N,inChannels:P,inHeight:F,inWidth:z,outChannels:Y,outHeight:K,outWidth:Z,strideHeight:te,strideWidth:U}=m;h=m.dataFormat;let j=k-1-m.padInfo.top,q=N-1-m.padInfo.left,Q=h==="channelsLast",oe=g.strides[0],se=Q?g.strides[1]:g.strides[2],ue=Q?g.strides[2]:1,fe=Q?1:g.strides[1],ge=p[0],xe=Q?p[1]:p[2],De=Q?p[2]:1,ve=Q?1:p[1];for(let He=0;He<C;++He)for(let ae=0;ae<P;++ae)for(let Te=0;Te<F;++Te){let Ie=Te-j,de=Math.max(0,Math.ceil(Ie/te)),ft=Math.min(K,(k+Ie)/te);for(let lt=0;lt<z;++lt){let Dt=lt-q,vt=Math.max(0,Math.ceil(Dt/U)),Fe=Math.min(Z,(N+Dt)/U),gt=0;for(let An=de;An<ft;++An){let lu=An*te-Ie;for(let Oo=vt;Oo<Fe;++Oo){let sp=Oo*U-Dt,Ms=ge*He+xe*An+De*Oo,al=x*(k-1-lu)+_*(N-1-sp)+w*ae;for(let cu=0;cu<Y;++cu){let uu=y[Ms+ve*cu],du=b[al+cu];gt+=uu*du}}}let Lr=oe*He+se*Te+ue*lt+fe*ae;f[Lr]=gt}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}var OJ={kernelName:td,backendName:"cpu",kernelFunc:M2e};function O2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l}=i;ce([r,o],"conv3d");let c=T.computeConv3DInfo(r.shape,o.shape,s,l,a),{filterDepth:u,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:m,dilationWidth:g,padInfo:f}=c,y=f.front,b=f.left,x=f.top,_=new nn(c.outShape,r.dtype),w=e.data.get(r.dataId).values,C=e.data.get(o.dataId).values,k=_.values,N=v.computeStrides(r.shape),P=v.computeStrides(o.shape);for(let F=0;F<c.batchSize;++F){let z=F*N[0],Y=F*_.strides[0];for(let K=0;K<c.outDepth;++K){let Z=Y+K*_.strides[1],te=K*c.strideDepth-y;for(let U=0;U<u;++U){let j=te+U*h;if(j<0||j>=c.inDepth)continue;let q=U*P[0],Q=z+j*N[1];for(let oe=0;oe<c.outHeight;++oe){let se=Z+oe*_.strides[2],ue=oe*c.strideHeight-x;for(let fe=0;fe<d;++fe){let ge=ue+fe*m;if(ge<0||ge>=c.inHeight)continue;let xe=q+fe*P[1],De=Q+ge*N[2];for(let ve=0;ve<c.outWidth;++ve){let He=se+ve*c.outChannels,ae=ve*c.strideWidth-b;for(let Te=0;Te<p;++Te){let Ie=ae+Te*g;if(Ie<0||Ie>=c.inWidth)continue;let de=xe+Te*P[2],ft=De+Ie*c.inChannels,lt=de;for(let Dt=0;Dt<c.inChannels;++Dt){let vt=w[ft+Dt];for(let Fe=0;Fe<c.outChannels;++Fe)k[He+Fe]+=vt*C[lt+Fe];lt+=c.outChannels}}}}}}}}return e.makeTensorInfo(_.shape,_.dtype,_.values)}var RJ={kernelName:nd,backendName:"cpu",kernelFunc:O2e};function R2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,filterShape:l}=i;ce([r,o],"conv3dBackpropFilterV2");let c=v.computeStrides(r.shape),u=v.computeStrides(o.shape),d=T.computeConv3DInfo(r.shape,l,s,1,a),p=d.strideDepth,h=d.strideHeight,m=d.strideWidth,g=d.filterDepth,f=d.filterHeight,y=d.filterWidth,b=new nn(d.filterShape,"float32"),x=b.values,[_,w,C,k]=b.strides,N=e.data.get(o.dataId).values,[P,F,z,Y]=u,K=e.data.get(r.dataId).values,[Z,te,U,j]=c,q=d.padInfo.front,Q=d.padInfo.left,oe=d.padInfo.top;for(let se=0;se<g;++se){let ue=Math.max(0,Math.ceil((q-se)/p)),fe=Math.min(d.outDepth,(d.inDepth+q-se)/p),ge=se*_;for(let xe=0;xe<f;++xe){let De=Math.max(0,Math.ceil((oe-xe)/h)),ve=Math.min(d.outHeight,(d.inHeight+oe-xe)/h),He=xe*w+ge;for(let ae=0;ae<y;++ae){let Te=Math.max(0,Math.ceil((Q-ae)/m)),Ie=Math.min(d.outWidth,(d.inWidth+Q-ae)/m),de=ae*C+He;for(let ft=0;ft<d.inChannels;++ft){let lt=ft*k+de;for(let Dt=0;Dt<d.outChannels;++Dt){let vt=0;for(let Fe=0;Fe<d.batchSize;++Fe){let gt=Fe*Z,Lr=Fe*P;for(let An=ue;An<fe;++An){let Oo=(se+An*p-q)*te+gt,sp=An*F+Lr;for(let Ms=De;Ms<ve;++Ms){let cu=(xe+Ms*h-oe)*U+Oo,uu=Ms*z+sp;for(let du=Te;du<Ie;++du){let gA=(ae+du*m-Q)*j+cu,yA=du*Y+uu;vt+=K[gA+ft]*N[yA+Dt]}}}}x[lt+Dt]=vt}}}}}return e.makeTensorInfo(b.shape,b.dtype,b.values)}var FJ={kernelName:Yg,backendName:"cpu",kernelFunc:R2e};function F2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{pad:s,strides:a,inputShape:l}=i;ce([r],"conv3dBackpropInputV2");let c=v.computeStrides(r.shape),u=v.computeStrides(o.shape),d=T.computeConv3DInfo(l,o.shape,a,1,s),p=new nn(d.inShape,"float32"),h=p.values,[m,g,f,y]=p.strides,b=e.data.get(r.dataId).values,[x,_,w,C]=c,k=e.data.get(o.dataId).values,[N,P,F,z]=u,{batchSize:Y,filterDepth:K,filterHeight:Z,filterWidth:te,inChannels:U,inDepth:j,inHeight:q,inWidth:Q,outChannels:oe,outDepth:se,outHeight:ue,outWidth:fe,strideDepth:ge,strideHeight:xe,strideWidth:De}=d,ve=K-1-d.padInfo.front,He=Z-1-d.padInfo.top,ae=te-1-d.padInfo.left;for(let Te=0;Te<Y;++Te)for(let Ie=0;Ie<U;++Ie)for(let de=0;de<j;++de){let ft=de-ve,lt=Math.max(0,Math.ceil(ft/ge)),Dt=Math.min(se,(K+ft)/ge);for(let vt=0;vt<q;++vt){let Fe=vt-He,gt=Math.max(0,Math.ceil(Fe/xe)),Lr=Math.min(ue,(Z+Fe)/xe);for(let An=0;An<Q;++An){let lu=An-ae,Oo=Math.max(0,Math.ceil(lu/De)),sp=Math.min(fe,(te+lu)/De),Ms=0;for(let al=lt;al<Dt;++al){let cu=al*ge-ft;for(let uu=gt;uu<Lr;++uu){let du=uu*xe-Fe;for(let Hb=Oo;Hb<sp;++Hb){let gA=Hb*De-lu,yA=x*Te+_*al+w*uu+C*Hb,fae=N*(K-1-cu)+P*(Z-1-du)+F*(te-1-gA)+z*Ie;for(let H_=0;H_<oe;++H_){let gae=b[yA+H_],yae=k[fae+H_];Ms+=gae*yae}}}}h[m*Te+g*de+f*vt+y*An+Ie]=Ms}}}return e.makeTensorInfo(p.shape,p.dtype,p.values)}var LJ={kernelName:Qg,backendName:"cpu",kernelFunc:F2e};var L2e=tt(tc,t=>Math.cos(t)),PJ={kernelName:tc,backendName:"cpu",kernelFunc:L2e};var P2e=tt(nc,t=>Math.cosh(t)),$J={kernelName:nc,backendName:"cpu",kernelFunc:P2e};function $2e(t){let{inputs:n,backend:e,attrs:i}=t,{image:r,boxes:o,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=i,[u,d,p,h]=r.shape,m=o.shape[0],[g,f]=a,y=Ue([m,g,f,h],"float32"),b=e.data.get(o.dataId).values,x=e.data.get(s.dataId).values,_=e.data.get(r.dataId).values,w=v.computeStrides(r.shape),C=v.computeStrides(y.shape);for(let k=0;k<m;k++){let N=k*4,P=b[N],F=b[N+1],z=b[N+2],Y=b[N+3],K=x[k];if(K>=u)continue;let Z=g>1?(z-P)*(d-1)/(g-1):0,te=f>1?(Y-F)*(p-1)/(f-1):0;for(let U=0;U<g;U++){let j=g>1?P*(d-1)+U*Z:.5*(P+z)*(d-1);if(j<0||j>d-1){for(let q=0;q<f;q++)for(let Q=0;Q<h;Q++){let oe=Q+q*C[2]+U*C[1]+k*C[0];y.values[oe]=c}continue}if(l==="bilinear"){let q=Math.floor(j),Q=Math.ceil(j),oe=j-q;for(let se=0;se<f;se++){let ue=f>1?F*(p-1)+se*te:.5*(F+Y)*(p-1);if(ue<0||ue>p-1){for(let De=0;De<h;De++){let ve=De+se*C[2]+U*C[1]+k*C[0];y.values[ve]=c}continue}let fe=Math.floor(ue),ge=Math.ceil(ue),xe=ue-fe;for(let De=0;De<h;De++){let ve=De+fe*w[2]+q*w[1]+K*w[0],He=_[ve];ve=De+ge*w[2]+q*w[1]+K*w[0];let ae=_[ve];ve=De+fe*w[2]+Q*w[1]+K*w[0];let Te=_[ve];ve=De+ge*w[2]+Q*w[1]+K*w[0];let Ie=_[ve],de=He+(ae-He)*xe,ft=Te+(Ie-Te)*xe;ve=De+se*C[2]+U*C[1]+k*C[0],y.values[ve]=de+(ft-de)*oe}}}else for(let q=0;q<f;++q){let Q=f>1?F*(p-1)+q*te:.5*(F+Y)*(p-1);if(Q<0||Q>p-1){for(let ue=0;ue<h;ue++){let fe=ue+q*C[2]+U*C[1]+k*C[0];y.values[fe]=c}continue}let oe=Math.round(Q),se=Math.round(j);for(let ue=0;ue<h;ue++){let fe=ue+oe*w[2]+se*w[1]+K*w[0],ge=ue+q*C[2]+U*C[1]+k*C[0];y.values[ge]=_[fe]}}}}return e.makeTensorInfo(y.shape,y.dtype,y.values)}var VJ={kernelName:Jg,backendName:"cpu",kernelFunc:$2e};function V2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;ce(r,"cumprod");let l=T.getAxesPermutation([o],r.shape.length),c=r;l!=null&&(c=Pn({inputs:{x:r},backend:e,attrs:{perm:l}}));let u=T.getInnerMostAxes(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=ii(c.dtype,"int32"),p=v.makeOnesTypedArray(v.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(y,b)=>y+m-b-1:(y,b)=>y+b;for(let y=0;y<h.length;y+=m)for(let b=0;b<m;b++){let x=g(y,b);if(b===0)p[x]=s?1:h[x];else{let _=g(y,b-1);p[x]=s?h[_]*p[_]:h[x]*p[_]}}let f=e.makeTensorInfo(c.shape,d,p);if(l!=null){let y=T.getUndoAxesPermutation(l),b=Pn({inputs:{x:f},backend:e,attrs:{perm:y}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(c),b}return f}var BJ={kernelName:Zg,backendName:"cpu",kernelFunc:V2e};function B2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;ce(r,"cumsum");let l=T.getAxesPermutation([o],r.shape.length),c=r;l!=null&&(c=Pn({inputs:{x:r},backend:e,attrs:{perm:l}}));let u=T.getInnerMostAxes(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=ii(c.dtype,"int32"),p=v.makeZerosTypedArray(v.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(y,b)=>y+m-b-1:(y,b)=>y+b;for(let y=0;y<h.length;y+=m)for(let b=0;b<m;b++){let x=g(y,b);if(b===0)p[x]=s?0:h[x];else{let _=g(y,b-1);p[x]=s?h[_]+p[_]:h[x]+p[_]}}let f=e.makeTensorInfo(c.shape,d,p);if(l!=null){let y=T.getUndoAxesPermutation(l),b=Pn({inputs:{x:f},backend:e,attrs:{perm:y}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(c),b}return f}var zJ={kernelName:id,backendName:"cpu",kernelFunc:B2e};function z2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s,binaryOutput:a}=i;if(r.shape.length===1){let l=e.data.get(r.dataId).values,c=e.data.get(o.dataId).values,u=_b(l,c,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,u)}else if(r.shape.length===2){let l=e.bufferSync(r),c=e.bufferSync(o),u=iI(l,c,s,a);return e.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}var GJ={kernelName:ey,backendName:"cpu",kernelFunc:z2e};function G2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockSize:o,dataFormat:s}=i;v.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let a=r.shape[0],l=r.shape[1],c=r.shape[2],u=r.shape[3],d=l*o,p=c*o,h=u/(o*o),m=e.data.get(r.dataId).values,g=new Float32Array(a*d*p*h),f=0;for(let y=0;y<a;++y)for(let b=0;b<d;++b){let x=Math.floor(b/o),_=b%o;for(let w=0;w<p;++w){let C=Math.floor(w/o),k=w%o,N=(_*o+k)*h;for(let P=0;P<h;++P){let z=P+N+u*(C+c*(x+l*y));g[f++]=m[z]}}}return e.makeTensorInfo([a,d,p,h],r.dtype,g)}var UJ={kernelName:ty,backendName:"cpu",kernelFunc:G2e};function GV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=i;ce([r,o],"depthwiseConv2DNative");let u=v.computeStrides(r.shape),d=v.computeStrides(o.shape),p=l;p==null&&(p=[1,1]),v.assert(T.eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);let h=T.computeConv2DInfo(r.shape,o.shape,s,p,a,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:f,dilationWidth:y,padInfo:b}=h,x=b.left,_=b.top,w=h.outChannels/h.inChannels,C=new nn(h.outShape,r.dtype),k=e.data.get(r.dataId).values,N=e.data.get(o.dataId).values,P=C.values;for(let F=0;F<h.batchSize;++F){let z=F*u[0],Y=F*C.strides[0];for(let K=0;K<h.outHeight;++K){let Z=Y+K*C.strides[1],te=K*h.strideHeight-_;for(let U=0;U<m;++U){let j=te+U*f;if(j<0||j>=h.inHeight)continue;let q=U*d[0],Q=z+j*u[1];for(let oe=0;oe<h.outWidth;++oe){let se=Z+oe*C.strides[2],ue=oe*h.strideWidth-x;for(let fe=0;fe<g;++fe){let ge=ue+fe*y;if(ge<0||ge>=h.inWidth)continue;let xe=q+fe*d[1],De=Q+ge*h.inChannels,ve=se,He=xe;for(let ae=0;ae<h.inChannels;++ae){let Te=k[De+ae];for(let Ie=0;Ie<w;++Ie)P[ve+Ie]+=Te*N[He+Ie];ve+=w,He+=w}}}}}}return e.makeTensorInfo(C.shape,C.dtype,C.values)}var HJ={kernelName:rd,backendName:"cpu",kernelFunc:GV};function U2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i;ce([r,o],"depthwiseConv2dNativeBackpropFilter");let d=T.computeConv2DInfo(r.shape,u,s,a,l,c,!0),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=d,f=new nn(d.filterShape,"float32"),y=d.padInfo.left,b=d.padInfo.top,x=d.outChannels/d.inChannels,_=e.data.get(r.dataId).values,w=new nn(r.shape,r.dtype,_),C=e.data.get(o.dataId).values,k=new nn(o.shape,o.dtype,C);for(let N=0;N<m;++N){let P=Math.max(0,Math.ceil((b-N)/p)),F=Math.min(d.outHeight,(d.inHeight+b-N)/p);for(let z=0;z<g;++z){let Y=Math.max(0,Math.ceil((y-z)/h)),K=Math.min(d.outWidth,(d.inWidth+y-z)/h);for(let Z=0;Z<d.outChannels;++Z){let te=Math.trunc(Z/x),U=Z%x,j=0;for(let q=0;q<d.batchSize;++q)for(let Q=P;Q<F;++Q){let oe=N+Q*p-b;for(let se=Y;se<K;++se){let ue=z+se*h-y;j+=w.get(q,oe,ue,te)*k.get(q,Q,se,Z)}}f.set(j,N,z,te,U)}}}return e.makeTensorInfo(f.shape,f.dtype,f.values)}var WJ={kernelName:ny,backendName:"cpu",kernelFunc:U2e};function H2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i;ce([r,o],"depthwiseConv2DNativeBackpropInput");let d=v.computeStrides(r.shape),p=v.computeStrides(o.shape),h=T.computeConv2DInfo(u,o.shape,s,a,l,c,!0),m=new nn(h.inShape,"float32"),g=m.values,[f,y,b]=m.strides,x=e.data.get(r.dataId).values,[_,w,C]=d,k=e.data.get(o.dataId).values,[N,P,F]=p,{batchSize:z,filterHeight:Y,filterWidth:K,inChannels:Z,inHeight:te,inWidth:U,outChannels:j,outHeight:q,outWidth:Q,strideHeight:oe,strideWidth:se}=h,ue=Y-1-h.padInfo.top,fe=K-1-h.padInfo.left,ge=j/Z;for(let xe=0;xe<z;++xe)for(let De=0;De<Z;++De)for(let ve=0;ve<te;++ve){let He=ve-ue,ae=Math.max(0,Math.ceil(He/oe)),Te=Math.min(q,(Y+He)/oe);for(let Ie=0;Ie<U;++Ie){let de=Ie-fe,ft=Math.max(0,Math.ceil(de/se)),lt=Math.min(Q,(K+de)/se),Dt=0;for(let vt=ae;vt<Te;++vt){let Fe=vt*oe-He;for(let gt=ft;gt<lt;++gt){let Lr=gt*se-de,An=_*xe+w*vt+C*gt,lu=N*(Y-1-Fe)+P*(K-1-Lr)+F*De;for(let Oo=0;Oo<ge;++Oo){let sp=De*ge+Oo,Ms=x[An+sp],al=k[lu+Oo];Dt+=Ms*al}}}g[f*xe+y*ve+b*Ie+De]=Dt}}return e.makeTensorInfo(m.shape,m.dtype,m.values)}var jJ={kernelName:iy,backendName:"cpu",kernelFunc:H2e};function W2e(t){let{inputs:n,backend:e}=t,{x:i}=n,r=v.sizeFromShape(i.shape),o=e.data.get(i.dataId).values,s=Ue([r,r],i.dtype),a=s.values;for(let c=0;c<o.length;c++)a[c*r+c]=o[c];let l=[...i.shape,...i.shape];return e.makeTensorInfo(l,s.dtype,s.values)}var qJ={kernelName:X1,backendName:"cpu",kernelFunc:W2e};var XJ={kernelName:od,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:i,filter:r}=t,{strides:o,pad:s,dilations:a}=e,l=n,c=l.data.get(i.dataId).values,u=i.shape.length,d=l.data.get(r.dataId).values,p=r.shape.length,{batchSize:h,inHeight:m,inWidth:g,inChannels:f,outHeight:y,outWidth:b,padInfo:x,strideHeight:_,strideWidth:w,filterHeight:C,filterWidth:k,dilationHeight:N,dilationWidth:P,outShape:F}=T.computeDilation2DInfo(i.shape,r.shape,o,s,"NHWC",a),z=v.sizeFromShape(F),Y=F.length,K=v.getArrayFromDType(i.dtype,z);for(let te=0;te<h;++te)for(let U=0;U<y;++U){let j=U*_-x.top;for(let q=0;q<b;++q){let Q=q*w-x.left;for(let oe=0;oe<f;++oe){let se=Number.MIN_SAFE_INTEGER;for(let fe=0;fe<C;++fe){let ge=j+fe*N;if(ge>=0&&ge<m)for(let xe=0;xe<k;++xe){let De=Q+xe*P;if(De>=0&&De<g){let ve=v.locToIndex([te,ge,De,oe],u,v.computeStrides(i.shape)),He=v.locToIndex([fe,xe,oe],p,v.computeStrides(r.shape)),ae=c[ve]+d[He];ae>se&&(se=ae)}}}let ue=v.locToIndex([te,U,q,oe],Y,v.computeStrides(F));K[ue]=se}}}return{dataId:l.write(v.toTypedArray(K,i.dtype),F,i.dtype),shape:F,dtype:i.dtype}}};var KJ={kernelName:E0,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:i,filter:r,dy:o}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=v.toNestedArray(i.shape,c.data.get(i.dataId).values),d=v.toNestedArray(r.shape,c.data.get(r.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:f,outWidth:y,padInfo:b,strideHeight:x,strideWidth:_,filterHeight:w,filterWidth:C,dilationHeight:k,dilationWidth:N,outShape:P}=T.computeDilation2DInfo(i.shape,r.shape,s,a,"NHWC",l);v.assert(o.rank===P.length,()=>`Error in ${E0}, dy must have the same rank as output ${P.length}, but got ${o.rank}`);let F=v.toNestedArray(P,c.data.get(o.dataId).values),z=v.makeZerosNestedTypedArray(r.shape,r.dtype);for(let K=0;K<p;++K)for(let Z=0;Z<f;++Z){let te=Z*x-b.top;for(let U=0;U<y;++U){let j=U*_-b.left;for(let q=0;q<g;++q){let Q=Number.MIN_SAFE_INTEGER,oe=0,se=0;for(let ue=0;ue<w;++ue){let fe=te+ue*k;if(fe>=0&&fe<h)for(let ge=0;ge<C;++ge){let xe=j+ge*N;if(xe>=0&&xe<m){let De=u[K][fe][xe][q]+d[ue][ge][q];De>Q&&(Q=De,oe=ue,se=ge)}}}z[oe][se][q]+=F[K][Z][U][q]}}}return{dataId:c.write(v.toTypedArray(z,i.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var YJ={kernelName:k0,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:i,filter:r,dy:o}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=v.toNestedArray(i.shape,c.data.get(i.dataId).values),d=v.toNestedArray(r.shape,c.data.get(r.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:f,outWidth:y,padInfo:b,strideHeight:x,strideWidth:_,filterHeight:w,filterWidth:C,dilationHeight:k,dilationWidth:N,outShape:P}=T.computeDilation2DInfo(i.shape,r.shape,s,a,"NHWC",l);v.assert(o.rank===P.length,()=>`Error in ${k0}, dy must have the same rank as output ${P.length}, but got ${o.rank}`);let F=v.toNestedArray(P,c.data.get(o.dataId).values),z=v.makeZerosNestedTypedArray(i.shape,i.dtype);for(let K=0;K<p;++K)for(let Z=0;Z<f;++Z){let te=Z*x-b.top;for(let U=0;U<y;++U){let j=U*_-b.left;for(let q=0;q<g;++q){let Q=Number.MIN_SAFE_INTEGER,oe=te<0?0:te,se=j<0?0:j;for(let ue=0;ue<w;++ue){let fe=te+ue*k;if(fe>=0&&fe<h)for(let ge=0;ge<C;++ge){let xe=j+ge*N;if(xe>=0&&xe<m){let De=u[K][fe][xe][q]+d[ue][ge][q];De>Q&&(Q=De,oe=fe,se=xe)}}}z[K][oe][se][q]+=F[K][Z][U][q]}}}return{dataId:c.write(v.toTypedArray(z,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};function j2e(t){let{inputs:n,backend:e,attrs:i}=t,{image:r}=n,{canvas:o,options:s}=i,{contextOptions:a,imageOptions:l}=s||{},c=l?.alpha||1,u=a?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);let d=o.getContext(u,a?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);let[p,h]=r.shape.slice(0,2),m=r.shape.length===2?1:r.shape[2],g=e.data.get(r.dataId).values,f=r.dtype==="float32"?255:1,y=new Uint8ClampedArray(h*p*4);for(let x=0;x<p*h;++x){let _=[0,0,0,255*c];for(let C=0;C<m;C++){let k=g[x*m+C];if(r.dtype==="float32"){if(k<0||k>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${k}.`)}else if(r.dtype==="int32"&&(k<0||k>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${k}.`);m===1?(_[0]=k*f,_[1]=k*f,_[2]=k*f):_[C]=k*f}let w=x*4;y[w+0]=Math.round(_[0]),y[w+1]=Math.round(_[1]),y[w+2]=Math.round(_[2]),y[w+3]=Math.round(_[3])}o.width=h,o.height=p;let b=new ImageData(y,h,p);return d.putImageData(b,0,0),r}var QJ={kernelName:uX,backendName:"cpu",kernelFunc:j2e};function iu(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;ce(r,"sum");let a;r.dtype==="bool"?a=Is({inputs:{x:r},backend:e,attrs:{dtype:"int32"}}):a=er({inputs:{x:r},backend:e});let l=a.shape.length,c=v.parseAxisParam(o,a.shape),u=T.getAxesPermutation(c,l),d=c,p=a;u!=null&&(p=Pn({inputs:{x:a},backend:e,attrs:{perm:u}}),d=T.getInnerMostAxes(d.length,l)),T.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,m]=T.computeOutAndReduceShapes(p.shape,d),g=T.upcastType(p.dtype,"int32"),f=xb(e,h,g),y=v.sizeFromShape(m),b=e.data.get(f.dataId).values,x=e.data.get(p.dataId).values;for(let _=0;_<b.length;++_){let w=_*y,C=0;for(let k=0;k<y;++k)C+=x[w+k];b[_]=C}if(s){let _=T.expandShapeToKeepDim(f.shape,c),w=f;f=It({inputs:{x:f},backend:e,attrs:{shape:_}}),e.disposeIntermediateTensorInfo(w)}return e.disposeIntermediateTensorInfo(a),u!=null&&e.disposeIntermediateTensorInfo(p),f}var ZJ={kernelName:Ad,backendName:"cpu",kernelFunc:iu};function q2e(t){let{inputs:n,backend:e,attrs:i}=t,{equation:r}=i,o=n,{allDims:s,summedDims:a,idDims:l}=T.decodeEinsumEquation(r,o.length);T.checkEinsumDimSizes(s.length,l,o);let{path:c,steps:u}=T.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,m=[];for(let g=0;g<d;++g){for(let f of u[g]){let{permutationIndices:y,expandDims:b}=T.getEinsumPermutation(h,l[f]),x;T.isIdentityPermutation(y)?x=o[f]:(x=Pn({inputs:{x:o[f]},backend:e,attrs:{perm:y}}),m.push(x));let _=x.shape.slice();for(let w=0;w<b.length;++w)_.splice(b[w],0,1);v.arraysEqual(x.shape,_)||(x=It({inputs:{x},backend:e,attrs:{shape:_}}),m.push(x)),p===null?p=x:(p=xm({inputs:{a:x,b:p},backend:e}),m.push(p))}g<d-1&&(c[g]>=0&&(p=iu({inputs:{x:p},backend:e,attrs:{axis:c[g]-(s.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&e.disposeIntermediateTensorInfo(g);return p}var JJ={kernelName:ry,backendName:"cpu",kernelFunc:q2e};function X2e(t){let{inputs:n,backend:e}=t,{dy:i,y:r}=n;ce([i,r],"eluGrad");let o=new Float32Array(v.sizeFromShape(r.shape)),s=e.data.get(r.dataId).values,a=e.data.get(i.dataId).values;for(let l=0;l<s.length;++l){let c=s[l];c>=0?o[l]=a[l]:o[l]=a[l]*(c+1)}return e.makeTensorInfo(r.shape,"float32",o)}var eee={kernelName:oy,backendName:"cpu",kernelFunc:X2e};var K2e=T.ERF_P,Y2e=T.ERF_A1,Q2e=T.ERF_A2,Z2e=T.ERF_A3,J2e=T.ERF_A4,eLe=T.ERF_A5,tLe=tt(oc,t=>{let n=Math.sign(t),e=Math.abs(t),i=1/(1+K2e*e);return n*(1-((((eLe*i+J2e)*i+Z2e)*i+Q2e)*i+Y2e)*i*Math.exp(-e*e))}),tee={kernelName:oc,backendName:"cpu",kernelFunc:tLe};function Sb(t){let{inputs:n,backend:e,attrs:i}=t,{input:r}=n,{dim:o}=i,s=r.shape.length,a=r.shape.slice(),l=o;return o<0&&(v.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),It({inputs:{x:r},backend:e,attrs:{shape:a}})}var nee={kernelName:sd,backendName:"cpu",kernelFunc:Sb};var nLe=Et((t,n)=>t/n),k_=zt(ic,nLe),E_={kernelName:ic,backendName:"cpu",kernelFunc:k_};function TI(t,n,e){let i=t.shape,r=i[0],o=i[1],s=e.data.get(t.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[r,o],u=v.sizeFromShape(c),d=v.getTypedArrayFromDType("float32",u),p=v.getTypedArrayFromDType("float32",u);for(let f=0;f<r;f++){let y=As({inputs:{x:a},backend:e,attrs:{begin:[f,0],size:[1,o]}}),b=As({inputs:{x:l},backend:e,attrs:{begin:[f,0],size:[1,o]}}),x=yi({inputs:{real:y,imag:b},backend:e}),{real:_,imag:w}=iLe(x,n,e),C=T.mergeRealAndImagArrays(_,w);for(let k=0;k<o;k++){let N=T.getComplexWithIndex(C,k);d[f*o+k]=N.real,p[f*o+k]=N.imag}e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(b),e.disposeIntermediateTensorInfo(x)}let h=e.makeTensorInfo(c,"float32",d),m=e.makeTensorInfo(c,"float32",p),g=yi({inputs:{real:h,imag:m},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),g}function iLe(t,n,e){let i=v.sizeFromShape(t.shape),r=e.data.get(t.dataId),o=e.data.get(r.complexTensorInfos.real.dataId).values,s=e.data.get(r.complexTensorInfos.imag.dataId).values;if(rLe(i)){let a=UV(o,s,i,n,e),l=[t.shape[0],t.shape[1]];if(n){let c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),d=e.makeTensorInfo([],"float32",v.createScalarValue(i,"float32")),p=er({inputs:{x:d},backend:e}),h=E_.kernelFunc({inputs:{a:c,b:d},backend:e}),m=E_.kernelFunc({inputs:{a:u,b:p},backend:e}),g=e.data.get(h.dataId).values,f=e.data.get(m.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),{real:g,imag:f}}return a}else{let a=T.mergeRealAndImagArrays(o,s),l=oLe(a,i,n);return T.splitRealAndImagArrays(l)}}function rLe(t){return(t&t-1)===0}function UV(t,n,e,i,r){if(e===1)return{real:t,imag:n};let o=T.mergeRealAndImagArrays(t,n),s=e/2,a=T.complexWithEvenIndex(o),l=a.real,c=a.imag,u=[l.length],d=r.makeTensorInfo(u,"float32",l),p=r.makeTensorInfo(u,"float32",c),h=yi({inputs:{real:d,imag:p},backend:r}),m=T.complexWithOddIndex(o),g=m.real,f=m.imag,y=[g.length],b=r.makeTensorInfo(y,"float32",g),x=r.makeTensorInfo(y,"float32",f),_=yi({inputs:{real:b,imag:x},backend:r}),w=UV(l,c,s,i,r),C=w.real,k=w.imag,N=[C.length],P=r.makeTensorInfo(N,"float32",C),F=r.makeTensorInfo(N,"float32",k),z=yi({inputs:{real:P,imag:F},backend:r}),Y=UV(g,f,s,i,r),K=Y.real,Z=Y.imag,te=[K.length],U=r.makeTensorInfo(te,"float32",K),j=r.makeTensorInfo(te,"float32",Z),q=yi({inputs:{real:U,imag:j},backend:r}),Q=T.exponents(e,i),oe=[Q.real.length],se=r.makeTensorInfo(oe,"float32",Q.real),ue=r.makeTensorInfo(oe,"float32",Q.imag),fe=yi({inputs:{real:se,imag:ue},backend:r}),ge=xm({inputs:{a:fe,b:q},backend:r}),xe=nl({inputs:{a:z,b:ge},backend:r}),De=T_({inputs:{a:z,b:ge},backend:r}),ve=Es({inputs:{input:xe},backend:r}),He=Es({inputs:{input:De},backend:r}),ae=il({inputs:{input:xe},backend:r}),Te=il({inputs:{input:De},backend:r}),Ie=ep({inputs:[ve,He],backend:r,attrs:{axis:0}}),de=ep({inputs:[ae,Te],backend:r,attrs:{axis:0}}),ft=r.data.get(Ie.dataId).values,lt=r.data.get(de.dataId).values;return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(x),r.disposeIntermediateTensorInfo(_),r.disposeIntermediateTensorInfo(P),r.disposeIntermediateTensorInfo(F),r.disposeIntermediateTensorInfo(z),r.disposeIntermediateTensorInfo(U),r.disposeIntermediateTensorInfo(j),r.disposeIntermediateTensorInfo(q),r.disposeIntermediateTensorInfo(se),r.disposeIntermediateTensorInfo(ue),r.disposeIntermediateTensorInfo(fe),r.disposeIntermediateTensorInfo(ge),r.disposeIntermediateTensorInfo(xe),r.disposeIntermediateTensorInfo(De),r.disposeIntermediateTensorInfo(ve),r.disposeIntermediateTensorInfo(ae),r.disposeIntermediateTensorInfo(He),r.disposeIntermediateTensorInfo(Te),r.disposeIntermediateTensorInfo(Ie),r.disposeIntermediateTensorInfo(de),{real:ft,imag:lt}}function oLe(t,n,e){let i=new Float32Array(n*2);for(let r=0;r<n;r++){let o=0,s=0;for(let a=0;a<n;a++){let l=T.exponent(r*a,n,e),c=T.getComplexWithIndex(t,a);o+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}e&&(o/=n,s/=n),T.assignToTypedArray(i,o,s,r)}return i}function sLe(t){let{inputs:n,backend:e}=t,{input:i}=n,r=v.sizeFromShape(i.shape),o=i.shape[i.shape.length-1],s=r/o,a=It({inputs:{x:i},backend:e,attrs:{shape:[s,o]}}),l=TI(a,!1,e),c=It({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var iee={kernelName:sy,backendName:"cpu",kernelFunc:sLe};function I_(t){let{backend:n,attrs:e}=t,{shape:i,value:r,dtype:o}=e,s=o||v.inferDtype(r),a=v.getArrayFromDType(s,v.sizeFromShape(i));return aLe(a,r,s),n.makeTensorInfo(i,s,a)}var ree={kernelName:ay,backendName:"cpu",kernelFunc:I_};function aLe(t,n,e){t.fill(n)}var oee={kernelName:ly,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:i}=t,r=e,o=v.getTypedArrayFromDType(i.dtype,v.sizeFromShape(i.shape)),[s,a,l,c]=i.shape,u=r.data.get(i.dataId).values;for(let p=0;p<s;p++){let h=p*l*a*c;for(let m=0;m<a;m++){let g=m*(l*c);for(let f=0;f<l;f++){let y=f*c;for(let b=0;b<c;b++){let x=Math.round(l-f-1),_=h+g+y+b,w=u[_];if(x>=0&&x<l){let C=x*c,k=h+g+C+b;w=u[k]}o[_]=w}}}}return{dataId:r.write(o,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};function lLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=i,g=zV({inputs:{x:r,filter:o},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let f=g;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let y=It({inputs:{x:s},backend:e,attrs:{shape:[s.shape[0],1,1]}});g=nl({inputs:{a:g,b:y},backend:e}),e.disposeIntermediateTensorInfo(y)}else g=nl({inputs:{a:g,b:s},backend:e});e.disposeIntermediateTensorInfo(f)}if(h){let f=g;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){let y=It({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});g=vm(e,g,h,y,m),e.disposeIntermediateTensorInfo(y)}else g=vm(e,g,h,a,m);e.disposeIntermediateTensorInfo(f)}return g}var see={kernelName:Lh,backendName:"cpu",kernelFunc:lLe};function cLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=i,g=GV({inputs:{x:r,filter:o},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let f=g;g=nl({inputs:{a:g,b:s},backend:e}),e.disposeIntermediateTensorInfo(f)}if(h){let f=g;g=vm(e,g,h,a,m),e.disposeIntermediateTensorInfo(f)}return g}var aee={kernelName:Ph,backendName:"cpu",kernelFunc:cLe};function uLe(t){let{inputs:n,backend:e}=t,{params:i,indices:r}=n,o=v.sizeFromShape(i.shape),s=r.shape,a=s[s.length-1],[l,c,u,d]=T.prepareAndValidate(i,r);if(c===0)return e.makeTensorInfo(l,i.dtype,[]);let p=e.data.get(r.dataId).values,h=e.bufferSync(i),m=oI(p,h,i.dtype,c,a,u,d,i.shape,o);return e.makeTensorInfo(l,i.dtype,m.values)}var lee={kernelName:K1,backendName:"cpu",kernelFunc:uLe};function dLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,indices:o}=n,{axis:s,batchDims:a}=i;ce([r,o],"gatherV2");let l=v.parseAxisParam(s,r.shape)[0],c=e.data.get(o.dataId).values,u=r.shape[l];for(let _=0;_<c.length;++_){let w=c[_];v.assert(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);let p=v.sizeFromShape(o.shape),h=T.segment_util.collectGatherOpShapeInfo(r,o,l,d),m=It({inputs:{x:r},backend:e,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=It({inputs:{x:o},backend:e,attrs:{shape:[h.batchSize,p/h.batchSize]}}),f=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],y=e.bufferSync(g),b=e.bufferSync(m),x=sI(b,y,f);return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),e.makeTensorInfo(h.outputShape,x.dtype,x.values)}var cee={kernelName:ld,backendName:"cpu",kernelFunc:dLe};function pLe(t){let{inputs:n,backend:e}=t,{input:i}=n,r=v.sizeFromShape(i.shape),o=i.shape[i.shape.length-1],s=r/o,a=It({inputs:{x:i},backend:e,attrs:{shape:[s,o]}}),l=TI(a,!0,e),c=It({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var uee={kernelName:cy,backendName:"cpu",kernelFunc:pLe};var hLe=tt(dc,t=>Number.isFinite(t)?1:0,"bool"),dee={kernelName:dc,backendName:"cpu",kernelFunc:hLe};var mLe=tt(pc,t=>Math.abs(t)===1/0?1:0,"bool"),pee={kernelName:pc,backendName:"cpu",kernelFunc:mLe};var fLe=tt(hc,t=>Number.isNaN(t)?1:0,"bool"),hee={kernelName:hc,backendName:"cpu",kernelFunc:fLe};function gLe(t){let{backend:n,attrs:e}=t,{start:i,stop:r,num:o}=e,s=aI(i,r,o);return n.makeTensorInfo([s.length],"float32",s)}var mee={kernelName:Y1,backendName:"cpu",kernelFunc:gLe};var yLe=tt(fc,t=>Math.log1p(t)),fee={kernelName:fc,backendName:"cpu",kernelFunc:yLe};var bLe=Et((t,n)=>t&&n),xLe=zt(Nh,bLe,null,"bool"),gee={kernelName:Nh,backendName:"cpu",kernelFunc:xLe};var vLe=tt(Mh,t=>t?0:1,"bool"),yee={kernelName:Mh,backendName:"cpu",kernelFunc:vLe};var _Le=Et((t,n)=>t||n),wLe=zt(Oh,_Le,null,"bool"),bee={kernelName:Oh,backendName:"cpu",kernelFunc:wLe};function CLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{depthRadius:o,bias:s,alpha:a,beta:l}=i;ce(r,"LRN");let c=r.shape[3],u=c-1,d=e.data.get(r.dataId).values,p=v.sizeFromShape(r.shape),h=new Float32Array(p);function m(g){let f=g%c,y=g-f+Math.max(0,f-o),b=g-f+Math.min(f+o,u),x=0;for(;y<=b;y++){let _=d[y];x+=_*_}return x}for(let g=0;g<p;g++){let f=m(g),y=d[g]*Math.pow(s+a*f,-l);h[g]=y}return e.makeTensorInfo(r.shape,r.dtype,h)}var xee={kernelName:ud,backendName:"cpu",kernelFunc:CLe};function TLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,y:o,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i;ce(s,"LRNGrad");let d=v.sizeFromShape(s.shape),p=s.shape[3],h=e.data.get(s.dataId).values,m=e.data.get(r.dataId).values,g=e.data.get(o.dataId).values,f=new Float32Array(d),y=d;for(let b=0;b<y;b++){let x=b%p,_=b-x+Math.max(0,x-a),w=b-x+Math.min(p,x+a+1),C=0;for(let k=_;k<w;k++)C+=Math.pow(m[k],2);C=c*C+l;for(let k=_;k<w;k++){let N=-2*c*u*m[k]*g[b]/C;b===k&&(N+=Math.pow(C,-u)),N*=h[b],f[k]+=N}}return e.makeTensorInfo(s.shape,r.dtype,f)}var vee={kernelName:dy,backendName:"cpu",kernelFunc:TLe};function HV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reductionIndices:o,keepDims:s}=i,a=e,l=r.shape,c=l.length,u=v.parseAxisParam(o,l),d=u,p=T.getAxesPermutation(d,c),h=a.data.get(r.dataId).values;if(p!=null){let _=new Array(c);for(let w=0;w<_.length;w++)_[w]=l[p[w]];h=wb(h,l,r.dtype,p,_),d=T.getInnerMostAxes(d.length,c),l=_}ce(r,"max"),T.assertAxesAreInnerMostDims("max",d,c);let[m,g]=T.computeOutAndReduceShapes(l,d),f=v.sizeFromShape(g),y=lI(h,f,m,r.dtype),b=a.write(y,m,r.dtype),x=m;return s&&(x=T.expandShapeToKeepDim(m,u)),{dataId:b,shape:x,dtype:r.dtype}}var _ee={kernelName:dd,backendName:"cpu",kernelFunc:HV};function SLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;ce(r,"maxPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;v.assert(T.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=T.computePool2DInfo(r.shape,o,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&v.arraysEqual(u.inShape,u.outShape))d=er({inputs:{x:r},backend:e});else{let p=e.data.get(r.dataId).values,h=v.computeStrides(r.shape),m=Tb(p,r.shape,r.dtype,h,u,"max");d=e.makeTensorInfo(u.outShape,r.dtype,m.values)}return d}var wee={kernelName:pd,backendName:"cpu",kernelFunc:SLe};function kLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=i;ce(r,"maxPool3d");let u=T.computePool3DInfo(r.shape,o,s,1,a,l,c),d=e.data.get(r.dataId).values,p=CI(d,r.shape,r.dtype,v.computeStrides(r.shape),u,"max");return e.makeTensorInfo(p.shape,"float32",p.values)}var Cee={kernelName:hd,backendName:"cpu",kernelFunc:kLe};function ELe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=i;ce([r,o],"maxPool3DGrad");let u=T.computePool3DInfo(o.shape,s,a,1,l,c),d=e.bufferSync(o),p=bJ(d,u),h=u.strideDepth,m=u.strideHeight,g=u.strideWidth,f=u.dilationDepth,y=u.dilationHeight,b=u.dilationWidth,x=u.effectiveFilterDepth,_=u.effectiveFilterHeight,w=u.effectiveFilterWidth,C=x-1-u.padInfo.front,k=w-1-u.padInfo.left,N=_-1-u.padInfo.top,P=Ue(o.shape,"float32"),F=e.bufferSync(r);for(let z=0;z<u.batchSize;++z)for(let Y=0;Y<u.inChannels;++Y)for(let K=0;K<u.inDepth;++K)for(let Z=0;Z<u.inHeight;++Z)for(let te=0;te<u.inWidth;++te){let U=K-C,j=Z-N,q=te-k,Q=0;for(let oe=0;oe<x;oe+=f){let se=(U+oe)/h;if(!(se<0||se>=u.outDepth||Math.floor(se)!==se))for(let ue=0;ue<_;ue+=y){let fe=(j+ue)/m;if(!(fe<0||fe>=u.outHeight||Math.floor(fe)!==fe))for(let ge=0;ge<w;ge+=b){let xe=(q+ge)/g;if(xe<0||xe>=u.outWidth||Math.floor(xe)!==xe)continue;let De=x*_*w-1-p.get(z,se,fe,xe,Y),ve=oe*_*w+ue*w+ge,He=De===ve?1:0;if(He===0)continue;let ae=F.get(z,se,fe,xe,Y);Q+=ae*He}}}P.set(Q,z,K,Z,te,Y)}return e.makeTensorInfo(P.shape,P.dtype,P.values)}var Tee={kernelName:hy,backendName:"cpu",kernelFunc:ELe};function ILe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o,output:s}=n,a=o;ce([o,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,p=T.computePool2DInfo(a.shape,l,c,1,u,d),h=e.data.get(a.dataId).values,m=Ue(p.outShape,a.dtype,wI(h,a.shape,a.dtype,p).values),g=p.strideHeight,f=p.strideWidth,y=p.dilationHeight,b=p.dilationWidth,x=p.effectiveFilterHeight,_=p.effectiveFilterWidth,w=_-1-p.padInfo.left,C=x-1-p.padInfo.top,k=Ue(a.shape,"float32"),N=e.data.get(r.dataId).values,P=Ue(r.shape,"float32",N);for(let F=0;F<p.batchSize;++F)for(let z=0;z<p.inChannels;++z)for(let Y=0;Y<p.inHeight;++Y)for(let K=0;K<p.inWidth;++K){let Z=Y-C,te=K-w,U=0;for(let j=0;j<x;j+=y){let q=(Z+j)/g;if(!(q<0||q>=p.outHeight||Math.floor(q)!==q))for(let Q=0;Q<_;Q+=b){let oe=(te+Q)/f;if(oe<0||oe>=p.outWidth||Math.floor(oe)!==oe)continue;let se=x*_-1-m.get(F,q,oe,z),ue=j*_+Q,fe=se===ue?1:0;if(fe===0)continue;let ge=P.get(F,q,oe,z);U+=ge*fe}}k.set(U,F,Y,K,z)}return e.makeTensorInfo(k.shape,k.dtype,k.values)}var See={kernelName:py,backendName:"cpu",kernelFunc:ILe};function kee(t,n,e,i,r){let o=v.computeStrides(n),s=Tb(t,n,e,o,r,"max"),a=wI(t,n,e,r,!0,i);return[s.values,a.values]}var Eee={kernelName:Q1,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:i}=t,{filterSize:r,strides:o,pad:s,includeBatchInIndex:a}=n,l=e;ce(i,"MaxPoolWithArgmax");let c=l.data.get(i.dataId).values,u=T.computePool2DInfo(i.shape,r,o,[1,1],s),[d,p]=kee(c,i.shape,i.dtype,a,u),h=l.write(d,u.outShape,i.dtype),m=l.write(p,u.outShape,i.dtype);return[{dataId:h,shape:u.outShape,dtype:i.dtype},{dataId:m,shape:u.outShape,dtype:"int32"}]}};function DLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=v.parseAxisParam(o,r.shape),c=T.computeOutAndReduceShapes(r.shape,a)[1],u=v.sizeFromShape(c),d=[],p=e.makeTensorInfo([],"float32",new Float32Array([u]));d.push(p);let h=Is({inputs:{x:r},backend:e,attrs:{dtype:"float32"}});d.push(h);let m=k_({inputs:{a:h,b:p},backend:e});d.push(m);let g=iu({inputs:{x:m},backend:e,attrs:{axis:o,keepDims:s}});return d.forEach(f=>e.disposeIntermediateTensorInfo(f)),g}var Iee={kernelName:md,backendName:"cpu",kernelFunc:DLe};function ALe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;ce(r,"min");let a=v.parseAxisParam(o,r.shape),l=a,c=T.getAxesPermutation(l,r.shape.length),u=r;c!=null&&(u=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),l=T.getInnerMostAxes(l.length,r.shape.length)),T.assertAxesAreInnerMostDims("min",l,u.shape.length);let[d,p]=T.computeOutAndReduceShapes(u.shape,l),h=v.sizeFromShape(p),m=v.makeZerosTypedArray(v.sizeFromShape(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,x=g[b];for(let _=0;_<h;++_){let w=g[b+_];(Number.isNaN(w)||w<x)&&(x=w)}m[y]=x}c!=null&&e.disposeIntermediateTensorInfo(u);let f=e.makeTensorInfo(d,u.dtype,m);if(s){let y=T.expandShapeToKeepDim(d,a),b=It({inputs:{x:f},backend:e,attrs:{shape:y}});return e.disposeIntermediateTensorInfo(f),b}return f}var Dee={kernelName:fd,backendName:"cpu",kernelFunc:ALe};function NLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{paddings:o,mode:s}=i;ce(r,"mirrorPad");let a=o.map((x,_)=>x[0]+r.shape[_]+x[1]),l=o.map(x=>x[0]),c=o.map((x,_)=>x[0]+r.shape[_]),u=s==="reflect"?0:1,d=e.data.get(r.dataId).values,p=r.shape.length,h=v.computeStrides(r.shape),m=v.sizeFromShape(a),g=a.length,f=v.computeStrides(a),y=v.getTypedArrayFromDType(r.dtype,m);for(let x=0;x<m;x++){let _=v.indexToLoc(x,g,f);for(let C=0;C<g;C++)_[C]<l[C]?_[C]=l[C]*2-_[C]-u:_[C]>=c[C]&&(_[C]=(c[C]-1)*2-_[C]+u);_=_.map((C,k)=>C-l[k]);let w=v.locToIndex(_,p,h);y[x]=d[w]}return{dataId:e.write(y,a,r.dtype),shape:a,dtype:r.dtype}}var Aee={kernelName:gd,backendName:"cpu",kernelFunc:NLe};var MLe=Et((t,n)=>{let e=t%n;return t<0&&n<0||t>=0&&n>=0?e:(e+n)%n}),OLe=zt(bc,MLe),Nee={kernelName:bc,backendName:"cpu",kernelFunc:OLe};var Oee=Wb(q0());function WV(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{dim:o}=i,s=r.shape.length,a=o;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);let l=v.parseAxisParam([a],r.shape),c=HV({inputs:{x:r},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=T.expandShapeToKeepDim(c.shape,l),d=It({inputs:{x:c},backend:e,attrs:{shape:u}}),p=T_({inputs:{a:r,b:d},backend:e}),h=pV({inputs:{x:p},backend:e}),m=iu({inputs:{x:h},backend:e,attrs:{axis:l,keepDims:!1}}),g=It({inputs:{x:m},backend:e,attrs:{shape:u}}),f=k_({inputs:{a:h,b:g},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),f}var Mee={kernelName:Od,backendName:"cpu",kernelFunc:WV};function RLe(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{numSamples:o,seed:s,normalized:a}=i;ce(r,"multinomial");let l=a?r:WV({inputs:{logits:r},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=e.data.get(l.dataId).values,p=[c,o],h=v.makeZerosTypedArray(v.sizeFromShape(p),"int32");for(let m=0;m<c;++m){let g=m*u,f=new Float32Array(u-1);f[0]=d[g];for(let x=1;x<f.length;++x)f[x]=f[x-1]+d[g+x];let y=Oee.alea(s.toString()),b=m*o;for(let x=0;x<o;++x){let _=y();h[b+x]=f.length;for(let w=0;w<f.length;w++)if(_<f[w]){h[b+x]=w;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(p,"int32",h)}var Ree={kernelName:Z1,backendName:"cpu",kernelFunc:RLe};var FLe=Ji.nonMaxSuppressionV3Impl;function LLe(t){let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=i;ce(r,"NonMaxSuppression");let c=e.data.get(r.dataId).values,u=e.data.get(o.dataId).values,{selectedIndices:d}=FLe(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Fee={kernelName:my,backendName:"cpu",kernelFunc:LLe};var PLe=Ji.nonMaxSuppressionV4Impl;function $Le(t){let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i;ce(r,"NonMaxSuppressionPadded");let u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,{selectedIndices:p,validOutputs:h}=PLe(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var Lee={kernelName:fy,backendName:"cpu",kernelFunc:$Le};var VLe=Ji.nonMaxSuppressionV5Impl;function BLe(t){let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i;ce(r,"NonMaxSuppressionWithScore");let u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,p=s,h=a,m=l,g=c,{selectedIndices:f,selectedScores:y}=VLe(u,d,p,h,m,g);return[e.makeTensorInfo([f.length],"int32",new Int32Array(f)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}var Pee={kernelName:gy,backendName:"cpu",kernelFunc:BLe};function zLe(t){let{inputs:n,backend:e,attrs:i}=t,{indices:r}=n,{dtype:o,depth:s,onValue:a,offValue:l}=i;ce(r,"oneHot");let c=v.sizeFromShape(r.shape),u=new Float32Array(c*s);u.fill(l);let d=e.data.get(r.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<s&&(u[p*s+d[p]]=a);return e.makeTensorInfo([...r.shape,s],o,u)}var $ee={kernelName:xd,backendName:"cpu",kernelFunc:zLe};function D_(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(i.dtype==="complex64"){let r=Es({inputs:{input:i},backend:e}),o=D_({inputs:{x:r},backend:e}),s=il({inputs:{input:i},backend:e}),a=D_({inputs:{x:s},backend:e}),l=yi({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return I_({backend:e,attrs:{shape:i.shape,value:0,dtype:i.dtype}})}var Vee={kernelName:Ld,backendName:"cpu",kernelFunc:D_};function Bee(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(i.dtype==="complex64"){let r=Es({inputs:{input:i},backend:e}),o=Bee({inputs:{x:r},backend:e}),s=il({inputs:{input:i},backend:e}),a=D_({inputs:{x:s},backend:e}),l=yi({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return I_({backend:e,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}var zee={kernelName:bd,backendName:"cpu",kernelFunc:Bee};function jV(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i;if(n.length===1)return Sb({inputs:{input:n[0]},backend:e,attrs:{dim:r}});let o=n[0].shape,s=n[0].dtype;n.forEach(u=>{v.assertShapesMatch(o,u.shape,"All tensors passed to stack must have matching shapes"),v.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=Sb({inputs:{input:u},backend:e,attrs:{dim:r}});return a.push(d),d}),c=ep({inputs:l,backend:e,attrs:{axis:r}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var Gee={kernelName:vd,backendName:"cpu",kernelFunc:jV};function GLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{paddings:o,constantValue:s}=i;ce(r,"pad");let a=o.map((b,x)=>b[0]+r.shape[x]+b[1]),l=o.map(b=>b[0]),c=e.data.get(r.dataId).values,u=v.sizeFromShape(r.shape),d=r.shape.length,p=v.computeStrides(r.shape),h=v.sizeFromShape(a),m=a.length,g=v.computeStrides(a),f=v.getTypedArrayFromDType(r.dtype,h);s!==0&&f.fill(s);for(let b=0;b<u;b++){let _=v.indexToLoc(b,d,p).map((C,k)=>C+l[k]),w=v.locToIndex(_,m,g);f[w]=c[b]}return{dataId:e.write(f,a,r.dtype),shape:a,dtype:r.dtype}}var SI={kernelName:_d,backendName:"cpu",kernelFunc:GLe};var ULe=Et((t,n)=>Math.pow(t,n)),HLe=zt(vc,ULe),Uee={kernelName:vc,backendName:"cpu",kernelFunc:HLe};function WLe(t){let{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:r,paramsDenseValues:o,indices:s}=n,{outputRaggedRank:a}=i,l=r.map(y=>e.data.get(y.dataId).values),c=r.map(y=>y.shape),u=e.data.get(o.dataId).values,d=e.data.get(s.dataId).values,[p,h,m]=cI(l,c,u,o.shape,o.dtype,d,s.shape,a),g=p.map(y=>e.makeTensorInfo([y.length],"int32",y)),f=e.makeTensorInfo(m,o.dtype,h);return g.concat([f])}var Hee={kernelName:J1,backendName:"cpu",kernelFunc:WLe};function jLe(t){let{inputs:n,backend:e}=t,{starts:i,limits:r,deltas:o}=n,s=e.data.get(i.dataId).values,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,[c,u]=uI(s,i.shape,i.dtype,a,r.shape,l,o.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],i.dtype,u);return[d,p]}var Wee={kernelName:ek,backendName:"cpu",kernelFunc:jLe};function qLe(t){let{inputs:n,backend:e,attrs:i}=t,{shape:r,values:o,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.data.get(r.dataId).values,u=e.data.get(o.dataId).values,d=e.data.get(s.dataId).values,p=a.map(f=>e.data.get(f.dataId).values),h=a.map(f=>f.shape),[m,g]=dI(c,r.shape,u,o.shape,o.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(m,o.dtype,g)}var jee={kernelName:tk,backendName:"cpu",kernelFunc:qLe};function XLe(t){let{backend:n,attrs:e}=t,{start:i,stop:r,dtype:o,step:s}=e,a=pI(i,r,s,o);return n.makeTensorInfo([a.length],o,a)}var qee={kernelName:yy,backendName:"cpu",kernelFunc:XLe};var KLe=tt(_c,t=>1/t),Xee={kernelName:_c,backendName:"cpu",kernelFunc:KLe};function YLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i;ce(r,"resizeBilinear");let l=v.computeStrides(r.shape),[c,u]=a,[d,p,h,m]=r.shape,g=e.data.get(r.dataId).values,f=new Float32Array(v.sizeFromShape([d,c,u,m])),y=[o&&c>1?p-1:p,o&&u>1?h-1:h],b=[o&&c>1?c-1:c,o&&u>1?u-1:u],x=0,_=y[0]/b[0],w=y[1]/b[1];for(let C=0;C<d;C++)for(let k=0;k<c;k++){let N;s?N=_*(k+.5)-.5:N=_*k;let P=Math.max(0,Math.floor(N)),F=N-P,z=Math.min(p-1,Math.ceil(N)),Y=C*l[0]+P*l[1],K=C*l[0]+z*l[1];for(let Z=0;Z<u;Z++){let te;s?te=w*(Z+.5)-.5:te=w*Z;let U=Math.max(0,Math.floor(te)),j=te-U,q=Math.min(h-1,Math.ceil(te)),Q=Y+U*l[2],oe=K+U*l[2],se=Y+q*l[2],ue=K+q*l[2];for(let fe=0;fe<m;fe++){let ge=g[Q+fe],xe=g[oe+fe],De=g[se+fe],ve=g[ue+fe],He=ge+(De-ge)*j,ae=xe+(ve-xe)*j,Te=He+(ae-He)*F;f[x++]=Te}}}return e.makeTensorInfo([d,c,u,m],"float32",f)}var Kee={kernelName:kd,backendName:"cpu",kernelFunc:YLe};function QLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i;ce([o,r],"resizeBilinearGrad");let a=v.computeStrides(r.shape),[l,c,u,d]=r.shape,[,p,h]=o.shape,m=new Float32Array(l*c*u*d),g=[s&&p>1?c-1:c,s&&h>1?u-1:u],f=[s&&p>1?p-1:p,s&&h>1?h-1:h],y=g[0]/f[0],b=g[1]/f[1],x=e.data.get(o.dataId).values,_=0;for(let w=0;w<l;w++){let C=w*a[0];for(let k=0;k<p;k++){let N=k*y,P=Math.floor(N),F=Math.min(Math.ceil(N),c-1),z=C+P*a[1],Y=C+F*a[1],K=N-P,Z=1-K;for(let te=0;te<h;te++){let U=te*b,j=Math.floor(U),q=Math.min(Math.ceil(U),u-1),Q=U-j,oe=1-Q,se=z+j*a[2],ue=z+q*a[2],fe=Y+j*a[2],ge=Y+q*a[2],xe=Z*oe,De=Z*Q,ve=K*oe,He=K*Q;for(let ae=0;ae<d;ae++){let Te=x[_++];m[se+ae]+=Te*xe,m[ue+ae]+=Te*De,m[fe+ae]+=Te*ve,m[ge+ae]+=Te*He}}}}return e.makeTensorInfo([l,u,c,d],"float32",m)}var Yee={kernelName:vy,backendName:"cpu",kernelFunc:QLe};function ZLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i;ce(r,"resizeNearestNeighbor");let l=v.computeStrides(r.shape),[c,u]=a,[d,p,h,m]=r.shape,g=e.data.get(r.dataId).values,f=new Float32Array(d*c*u*m),y=[o&&c>1?p-1:p,o&&u>1?h-1:h],b=[o&&c>1?c-1:c,o&&u>1?u-1:u],x=y[0]/b[0],_=y[1]/b[1],w=0;for(let C=0;C<d;C++){let k=C*l[0];for(let N=0;N<c;N++){let P=s?x*(N+.5):x*N,F=Math.min(p-1,o?Math.round(P):Math.floor(P));s&&(F=Math.max(0,F));let z=k+F*l[1];for(let Y=0;Y<u;Y++){let K=s?_*(Y+.5):_*Y,Z=Math.min(h-1,o?Math.round(K):Math.floor(K));s&&(Z=Math.max(0,Z));let te=z+Z*l[2];for(let U=0;U<m;U++){let j=g[te+U];f[w++]=j}}}}return e.makeTensorInfo([d,c,u,m],r.dtype,f)}var Qee={kernelName:Sd,backendName:"cpu",kernelFunc:ZLe};function JLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i;ce([o,r],"resizeNearestNeighborGrad");let a=v.computeStrides(r.shape),l=v.computeStrides(o.shape),[c,u,d,p]=r.shape,[,h,m]=o.shape,g=new Float32Array(c*u*d*p),f=e.data.get(o.dataId).values,y=[s&&h>1?u-1:u,s&&m>1?d-1:d],b=[s&&h>1?h-1:h,s&&m>1?m-1:m],x=y[0]/b[0],_=y[1]/b[1],w=1/x,C=1/_,k=Math.ceil(w)*2+2,N=Math.ceil(C)*2+2;for(let P=0;P<c;P++){let F=P*a[0];for(let z=0;z<u;z++){let Y=F+z*a[1],K=Math.floor(z*w),Z=Math.floor(K-k/2);for(let te=0;te<d;te++){let U=Y+te*a[2],j=Math.floor(te*C),q=Math.floor(j-N/2);for(let Q=0;Q<p;Q++){let oe=0;for(let se=0;se<k;se++){let ue=se+Z;if(ue<0||ue>=h)continue;let fe=F+ue*l[1],ge=ue*x,xe=Math.min(u-1,s?Math.round(ge):Math.floor(ge));if(z===xe)for(let De=0;De<N;De++){let ve=De+q;if(ve<0||ve>=m)continue;let He=fe+ve*l[2],ae=ve*_,Te=Math.min(d-1,s?Math.round(ae):Math.floor(ae));te===Te&&(oe+=f[He+Q])}}g[U+Q]=oe}}}}return e.makeTensorInfo(r.shape,r.dtype,g)}var Zee={kernelName:xy,backendName:"cpu",kernelFunc:JLe};function ePe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dims:o}=i;ce(r,"reverse");let s=r.shape.length,a=v.parseAxisParam(o,r.shape);if(s===0)return er({inputs:{x:r},backend:e});let l=new nn(r.shape,r.dtype),c=e.bufferSync(r);for(let u=0;u<l.size;u++){let d=l.indexToLoc(u),p=d.slice();a.forEach(h=>p[h]=r.shape[h]-1-p[h]),l.set(c.get(...p),...d)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}var Jee={kernelName:Ed,backendName:"cpu",kernelFunc:ePe};var ete={kernelName:ky,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:i}=t,{radians:r,fillValue:o,center:s}=n,a=e,l=v.getTypedArrayFromDType(i.dtype,v.sizeFromShape(i.shape)),[c,u,d,p]=i.shape,[h,m]=T.getImageCenter(s,u,d),g=255,f=Math.sin(r),y=Math.cos(r),b=a.data.get(i.dataId).values;for(let _=0;_<c;_++){let w=_*d*u*p;for(let C=0;C<u;C++){let k=C*(d*p);for(let N=0;N<d;N++){let P=N*p;for(let F=0;F<p;F++){let z=[c,C,N,F],Y=z[2],K=z[1],Z=(Y-h)*y-(K-m)*f,te=(Y-h)*f+(K-m)*y;Z=Math.round(Z+h),te=Math.round(te+m);let U=o;if(typeof o!="number"&&(F===3?U=g:U=o[F]),Z>=0&&Z<d&&te>=0&&te<u){let q=te*(d*p),Q=Z*p,oe=w+q+Q+F;U=b[oe]}let j=w+k+P+F;l[j]=U}}}}return{dataId:a.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};var tPe=tt(Tc,t=>{let n=Math.floor(t);return t-n<.5?Math.floor(t):t-n>.5?Math.ceil(t):n%2===0?n:n+1}),tte={kernelName:Tc,backendName:"cpu",kernelFunc:tPe};function nPe(t){let{inputs:n,backend:e,attrs:i}=t,{indices:r,updates:o}=n,{shape:s}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=T.calculateShapes(o,r,s),p=!0,h=e.bufferSync(r),m=e.bufferSync(o),g=la(h,m,s,d,c,l,a,u,0,p);return e.makeTensorInfo(s,g.dtype,g.values)}var nte={kernelName:nk,backendName:"cpu",kernelFunc:nPe};function iPe(t,n){let e=0,i=t.length,r=0;for(;e<i;)r=Math.floor((e+i)/2),t[r]<n?e=r+1:i=r;return i}function rPe(t,n){let e=0,i=t.length,r=0;for(;e<i;)r=Math.floor((e+i)/2),t[r]<=n?e=r+1:i=r;return i}function ite(t,n,e,i,r,o){let s=v.getArrayFromDType("int32",e*r);for(let a=0;a<e;++a){let l=t.slice(a*i,(a+1)*i),c=a*r;for(let u=0;u<r;++u)s[c+u]=o==="left"?iPe(l,n[u+c]):rPe(l,n[u+c])}return s}function oPe(t){let{inputs:n,backend:e,attrs:i}=t,{sortedSequence:r,values:o}=n,{side:s}=i,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=ite(a,l,r.shape[0],r.shape[1],o.shape[1],s);return e.makeTensorInfo(o.shape,"int32",c)}var rte={kernelName:rk,backendName:"cpu",kernelFunc:oPe};function sPe(t){let{inputs:n,backend:e}=t,{condition:i,t:r,e:o}=n;ce([i,r,o],"select");let s=i.shape.length,a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,c=e.data.get(o.dataId).values,u=ii(r.dtype,o.dtype),d=v.makeZerosTypedArray(v.sizeFromShape(r.shape),u),p=0,h=s===0||s>1||r.shape.length===1?1:v.sizeFromShape(r.shape.slice(1));for(let m=0;m<a.length;m++)for(let g=0;g<h;g++)a[m]===1?d[p++]=l[m]:d[p++]=c[m];return e.makeTensorInfo(r.shape,u,d)}var ote={kernelName:Id,backendName:"cpu",kernelFunc:sPe};var aPe=T.SELU_SCALEALPHA,lPe=T.SELU_SCALE,cPe=tt(kc,t=>t>=0?lPe*t:aPe*(Math.exp(t)-1)),ste={kernelName:kc,backendName:"cpu",kernelFunc:cPe};var uPe=tt(Dc,t=>t<0?-1:t>0?1:0),ate={kernelName:Dc,backendName:"cpu",kernelFunc:uPe};var dPe=tt(Ec,t=>Math.sin(t)),lte={kernelName:Ec,backendName:"cpu",kernelFunc:dPe};var pPe=tt(Ic,t=>Math.sinh(t)),cte={kernelName:Ic,backendName:"cpu",kernelFunc:pPe};var hPe=11920928955078125e-23,ute=Math.log(hPe)+2,mPe=tt(Nc,t=>{let n=t>-ute,e=t<ute,i=Math.exp(t),r;return e?r=i:n?r=t:r=Math.log(1+i),r}),dte={kernelName:Nc,backendName:"cpu",kernelFunc:mPe};function fPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,paddings:s}=i;ce([r],"spaceToBatchND");let a=v.sizeFromShape(o),l=[[0,0]];l.push(...s);for(let C=1+o.length;C<r.shape.length;++C)l.push([0,0]);let c=SI.kernelFunc({inputs:{x:r},backend:e,attrs:{paddings:l,constantValue:0}}),u=T.getReshaped(c.shape,o,a,!1),d=T.getPermuted(u.length,o.length,!1),p=T.getReshapedPermuted(c.shape,o,a,!1),g=It({inputs:{x:c},backend:e,attrs:{shape:u}}),b=Pn({inputs:{x:g},backend:e,attrs:{perm:d}}),w=It({inputs:{x:b},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(b),w}var pte={kernelName:Nd,backendName:"cpu",kernelFunc:fPe};function gPe(t){let{inputs:n,backend:e}=t,{indices:i,values:r,denseShape:o,defaultValue:s}=n;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${i.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,c=e.data.get(o.dataId).values,u=e.data.get(s.dataId).values[0],[d,p,h,m,g]=hI(a,i.shape,i.dtype,l,r.dtype,c,u);return[e.makeTensorInfo(p,i.dtype,d),e.makeTensorInfo([p[0]],r.dtype,h),e.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(f=>Number(f)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}var hte={kernelName:ok,backendName:"cpu",kernelFunc:gPe};function yPe(t){let{inputs:n,backend:e}=t,{inputIndices:i,inputShape:r,newShape:o}=n;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${i.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);let s=Array.from(e.data.get(r.dataId).values),a=e.data.get(i.dataId).values,l=Array.from(e.data.get(o.dataId).values),[c,u,d]=mI(a,i.shape,i.dtype,s,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}var mte={kernelName:sk,backendName:"cpu",kernelFunc:yPe};function bPe(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(i.dataId).values,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,[c,u]=Cb(s,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}var fte={kernelName:ak,backendName:"cpu",kernelFunc:bPe};function xPe(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(i.dataId).values,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,[c,u]=Cb(s,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}var gte={kernelName:lk,backendName:"cpu",kernelFunc:xPe};function vPe(t){let{inputs:n,backend:e,attrs:i}=t,{sparseIndices:r,sparseValues:o,defaultValue:s}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=T.calculateShapes(o,r,a),h=!1,m=e.bufferSync(r),g;switch(o.dtype){case"bool":{let f=e.bufferSync(o),y=!!e.data.get(s.dataId).values[0];g=la(m,f,a,p,u,c,l,d,y,h);break}case"float32":{let f=e.bufferSync(o),y=e.data.get(s.dataId).values[0];g=la(m,f,a,p,u,c,l,d,y,h);break}case"int32":{let f=e.bufferSync(o),y=e.data.get(s.dataId).values[0];g=la(m,f,a,p,u,c,l,d,y,h);break}case"string":{let f=e.bufferSync(o),y=v.decodeString(e.data.get(s.dataId).values[0]);g=la(m,f,a,p,u,c,l,d,y,h);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return e.makeTensorInfo(a,g.dtype,g.values)}var yte={kernelName:ck,backendName:"cpu",kernelFunc:vPe};function _Pe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{numOrSizeSplits:o,axis:s}=i,a=v.parseAxisParam(s,r.shape)[0],l=T.prepareSplitSize(r,o,a),c=new Array(r.shape.length).fill(0),u=r.shape.slice();return l.map(d=>{let p=[...u];p[a]=d;let h=As({inputs:{x:r},backend:e,attrs:{begin:c,size:p}});return c[a]+=d,h})}var bte={kernelName:Md,backendName:"cpu",kernelFunc:_Pe};var xte={kernelName:_y,backendName:"cpu",kernelFunc:({inputs:t,backend:n})=>{let{x:e}=t,i=n;ce(e,"square");let r=i.data.get(e.dataId).values,o=new Float32Array(r.length);for(let a=0;a<r.length;++a){let l=r[a];o[a]=l*l}return{dataId:i.write(o,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}};var wPe=tt(Pc,(t,n)=>{let e=n;return isNaN(t)?NaN:t>0?1:e.alpha}),vte={kernelName:Pc,backendName:"cpu",kernelFunc:wPe};function CPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=i;ce(r,"stridedSlice");let{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:f,isSimpleSlice:y,begin:b,end:x,strides:_}=ki.sliceInfo(r.shape,o,s,a,l,c,u,d,p),w;if(g)w=It({inputs:{x:r},backend:e,attrs:{shape:m}});else if(f||y){v.assert(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);let C=ki.computeOutShape(b,x,_),k=As({inputs:{x:r},backend:e,attrs:{begin:b,size:C}});w=It({inputs:{x:k},backend:e,attrs:{shape:m}}),e.disposeIntermediateTensorInfo(k)}else{let C=e.bufferSync(r),k=fI(h,C,_,b);w=e.makeTensorInfo(m,k.dtype,k.values)}return w}var _te={kernelName:wy,backendName:"cpu",kernelFunc:CPe};function TPe(t){let{inputs:n,backend:e,attrs:i}=t,{separator:r,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,p=e.data.get(u.dataId).values,h=e.data.get(d.dataId).values,[m,g]=gI(p,h,r,o,s,a,l,c);return[e.makeTensorInfo([m.length],"string",m),e.makeTensorInfo(d.shape,"int32",g)]}var wte={kernelName:uk,backendName:"cpu",kernelFunc:TPe};function SPe(t){let{inputs:n,backend:e,attrs:i}=t,{skipEmpty:r}=i,{input:o,delimiter:s}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values[0],[c,u,d]=yI(a,l,r),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var Cte={kernelName:dk,backendName:"cpu",kernelFunc:SPe};function kPe(t){let{inputs:n,backend:e,attrs:i}=t,{numBuckets:r}=i,{input:o}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");let s=e.data.get(o.dataId).values,a=bI(s,r);return e.makeTensorInfo(o.shape,"int32",a)}var Tte={kernelName:pk,backendName:"cpu",kernelFunc:kPe};var EPe=tt(Fc,t=>Math.tan(t)),Ste={kernelName:Fc,backendName:"cpu",kernelFunc:EPe};var IPe=tt(Lc,t=>Math.tanh(t)),kte={kernelName:Lc,backendName:"cpu",kernelFunc:IPe};function DPe(t){let{inputs:n,backend:e}=t,{tensor:i,indices:r,updates:o}=n,{sliceRank:s,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=T.calculateShapes(o,r,i.shape),d=!1,p=e.bufferSync(r),h=e.bufferSync(o),m=e.bufferSync(i),g=la(p,h,i.shape,u,l,a,s,c,m,d);return e.makeTensorInfo(i.shape,g.dtype,g.values)}var Ete={kernelName:ik,backendName:"cpu",kernelFunc:DPe};function APe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reps:o}=i;ce(r,"tile");let s=xI(e.bufferSync(r),o);return e.makeTensorInfo(s.shape,s.dtype,s.values)}var Ite={kernelName:Ha,backendName:"cpu",kernelFunc:APe};function NPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{k:o,sorted:s}=i;ce(r,"topk");let a=e.data.get(r.dataId).values,[l,c]=vI(a,r.shape,r.dtype,o,s);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}var Dte={kernelName:Cy,backendName:"cpu",kernelFunc:NPe};function MPe(t){let{inputs:n,attrs:e,backend:i}=t,{image:r,transforms:o}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=e,[u,d,p,h]=r.shape,[m,g]=c??[d,p],f=[u,m,g,h],y=v.computeStrides(r.shape),b=y[0],x=y[1],_=y[2],w=v.computeStrides(f),C=w[0],k=w[1],N=w[2],P=v.getTypedArrayFromDType(r.dtype,v.sizeFromShape(f));P.fill(l);let F=i.data.get(r.dataId).values,z=i.data.get(o.dataId).values;for(let K=0;K<u;++K){let Z=o.shape[0]===1?z:z.subarray(K*8,K*8+8);for(let te=0;te<m;++te)for(let U=0;U<g;++U)for(let j=0;j<h;++j){let q,Q=Z[6]*U+Z[7]*te+1;if(Q===0)continue;let oe=(Z[0]*U+Z[1]*te+Z[2])/Q,se=(Z[3]*U+Z[4]*te+Z[5])/Q,ue=Ate(oe,p,a),fe=Ate(se,d,a);switch(s){case"nearest":q=PPe(F,d,p,b,x,_,K,fe,ue,j,l);break;case"bilinear":q=$Pe(F,d,p,b,x,_,K,fe,ue,j,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}let ge=K*C+te*k+U*N+j;P[ge]=q}return i.makeTensorInfo(f,r.dtype,P)}return{dataId:i.write(P,f,r.dtype),shape:r.shape,dtype:r.dtype}}var Nte={kernelName:Ty,backendName:"cpu",kernelFunc:MPe};function Ate(t,n,e){switch(e){case"reflect":return OPe(t,n);case"wrap":return RPe(t,n);case"nearest":return LPe(t,n);case"constant":default:return FPe(t,n)}}function OPe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let i=2*n;e<i&&(e=i*Math.trunc(-e/i)+e),e=e<-n?e+i:-e-1}else if(e>n-1)if(n<=1)e=0;else{let i=2*n;e-=i*Math.trunc(e/i),e>=n&&(e=i-e-1)}return v.clamp(0,e,n-1)}function RPe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let i=n-1;e+=n*(Math.trunc(-e/i)+1)}else if(e>n-1)if(n<=1)e=0;else{let i=n-1;e-=n*Math.trunc(e/i)}return v.clamp(0,e,n-1)}function FPe(t,n){return t}function LPe(t,n){return v.clamp(0,t,n-1)}function A_(t,n,e,i,r,o,s,a,l,c,u){let d=s*i+a*r+l*o+c;return 0<=a&&a<n&&0<=l&&l<e?t[d]:u}function PPe(t,n,e,i,r,o,s,a,l,c,u){let d=Math.round(a),p=Math.round(l);return A_(t,n,e,i,r,o,s,d,p,c,u)}function $Pe(t,n,e,i,r,o,s,a,l,c,u){let d=Math.floor(a),p=Math.floor(l),h=d+1,m=p+1,g=(m-l)*A_(t,n,e,i,r,o,s,d,p,c,u)+(l-p)*A_(t,n,e,i,r,o,s,d,m,c,u),f=(m-l)*A_(t,n,e,i,r,o,s,h,p,c,u)+(l-p)*A_(t,n,e,i,r,o,s,h,m,c,u);return(h-a)*g+(a-d)*f}function VPe(t){let{inputs:n,attrs:e,backend:i}=t,{axis:r}=e,{x:o}=n;ce(o,"unique");let s=i.data.get(o.dataId).values,{outputValues:a,outputShape:l,indices:c}=_I(s,r,o.shape,o.dtype);return[i.makeTensorInfo(l,o.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}var Mte={kernelName:Sy,backendName:"cpu",kernelFunc:VPe};function BPe(t){let{inputs:n,backend:e,attrs:i}=t,{value:r}=n,{axis:o}=i;o<0&&(o+=r.shape.length);let s=r.shape.length,a=r.shape[o],l=new Array(s-1),c=0;for(let h=0;h<s;h++)h!==o&&(l[c++]=r.shape[h]);let u=new Array(s).fill(0),d=r.shape.slice();d[o]=1;let p=new Array(a);for(let h=0;h<p.length;h++){u[o]=h;let m=As({inputs:{x:r},backend:e,attrs:{begin:u,size:d}});p[h]=It({inputs:{x:m},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(m)}return p}var Ote={kernelName:Rd,backendName:"cpu",kernelFunc:BPe};function zPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,segmentIds:o}=n,{numSegments:s}=i;ce(r,"unsortedSegmentSum");let a=r.shape.length,l=o.shape.length,c=[],u=[],d=a-l,p=o;for(let m=0;m<d;++m){let g=Sb({inputs:{input:p},backend:e,attrs:{dim:m+1}});p=g,u.push(g)}for(let m=0;m<s;++m){let g=v.createScalarValue(m,"int32"),f=e.makeTensorInfo([],"int32",g),y=uV({inputs:{a:f,b:p},backend:e}),b=Is({inputs:{x:y},backend:e,attrs:{dtype:"float32"}}),x=xm({inputs:{a:b,b:r},backend:e}),_=iu({inputs:{x},backend:e,attrs:{axis:0,keepDims:!1}});c.push(_),u.push(f),u.push(y),u.push(b),u.push(x),u.push(_)}let h=jV({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(m=>e.disposeIntermediateTensorInfo(m)),h}var Rte={kernelName:Fd,backendName:"cpu",kernelFunc:zPe};var GPe=[oJ,hZ,sJ,aJ,bZ,lJ,cJ,uJ,dJ,pJ,hJ,mJ,fJ,gJ,yJ,xJ,vJ,_J,wJ,rJ,CJ,TJ,SJ,xZ,kJ,yZ,vZ,EJ,mZ,IJ,AJ,NJ,MJ,OJ,RJ,FJ,LJ,PJ,$J,VJ,BJ,zJ,GJ,UJ,HJ,WJ,jJ,qJ,XJ,KJ,YJ,QJ,JJ,ZZ,eee,_Z,tee,wZ,nee,CZ,iee,ree,oee,TZ,SZ,see,aee,lee,cee,kZ,EZ,fZ,uee,DJ,dee,pee,hee,JZ,IZ,DZ,mee,AZ,fee,gee,yee,bee,xee,vee,_ee,NZ,wee,Cee,Tee,See,Eee,Iee,Dee,MZ,Aee,Nee,Ree,OZ,RZ,Fee,Lee,Pee,FZ,$ee,zee,Gee,SI,Uee,eJ,PZ,Hee,Wee,jee,qee,gZ,E_,Xee,tJ,nJ,iJ,Kee,Yee,Qee,Zee,Jee,ete,tte,GZ,nte,rte,ote,ste,HZ,ate,lte,cte,WZ,Mee,dte,pte,hte,mte,fte,gte,yte,bte,qZ,xte,XZ,KZ,vte,_te,wte,Cte,Tte,YZ,ZJ,Ste,kte,Ete,Ite,Dte,Nte,LZ,Mte,Ote,Rte,Vee];for(let t of GPe)mk(t);var _m={},kI={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Fte(t,n){_m[t]=n}function Do(t,n){if(!(t in _m)||n!=null){let i=HPe(t,n);if(i!==null)_m[t]=i;else return console.log("Could not get context for WebGL version",t),null}let e=_m[t];return e==null||e.isContextLost()?(delete _m[t],Do(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),_m[t])}function UPe(t){if(!G().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function HPe(t,n){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let e=n??UPe(t);return e.addEventListener("webglcontextlost",i=>{i.preventDefault(),delete _m[t]},!1),G().getBool("SOFTWARE_WEBGL_ENABLED")&&(kI.failIfMajorPerformanceCaveat=!1),t===1?e.getContext("webgl",kI)||e.getContext("experimental-webgl",kI):e.getContext("webgl2",kI)}var wm=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(wm||{}),gr=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(gr||{}),tr=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(tr||{});function Cm(t,n){return[n,t]}function Lte(t,n){return t*n}function N_(t){let n=v.sizeFromShape(t),e=Math.ceil(n/4);return v.sizeToSquarishShape(e)}function rl(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function Pte(t,n){let[e,i]=rl(t,n);return e*i*4}function M_(t,n){let e=t,i,r,o,s,a,l,c,u,d,p;return G().getNumber("WEBGL_VERSION")===2?(i=e.R32F,r=e.R16F,o=e.RGBA16F,s=e.RGBA32F,a=e.RED,c=4,u=1,d=e.HALF_FLOAT,p=e.FLOAT,l=e.RGBA8):(i=t.RGBA,r=t.RGBA,o=t.RGBA,s=e.RGBA,a=t.RGBA,c=4,u=4,d=n!=null?n.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:i,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:p}}function Re(t,n){let e=n();return G().getBool("DEBUG")&&WPe(t),e}function WPe(t){let n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+XPe(t,n))}var jPe=596e-10,qPe=65504;function $te(t){return!!(G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||jPe<Math.abs(t)&&Math.abs(t)<qPe)}function XPe(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}function O_(t,n){return ru(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}function Vte(t,n){let e=ru(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Re(t,()=>t.shaderSource(e,n)),Re(t,()=>t.compileShader(e)),t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function Bte(t,n){let e=ru(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Re(t,()=>t.shaderSource(e,n)),Re(t,()=>t.compileShader(e)),G().get("ENGINE_COMPILE_ONLY"))return e;if(t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw QV(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}var KPe=/ERROR: [0-9]+:([0-9]+):/g;function QV(t,n){let e=KPe.exec(n);if(e==null){console.log(`Couldn't parse line number in error: ${n}`),console.log(t);return}let i=+e[1],r=t.split(`
`),o=r.length.toString().length+2,s=r.map((d,p)=>v.rightPad((p+1).toString(),o)+d),a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);let l=s.slice(0,i-1),c=s.slice(i-1,i),u=s.slice(i);console.log(l.join(`
`)),console.log(n.split(`
`)[0]),console.log(`%c ${v.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function zte(t){return ru(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Gte(t,n){if(Re(t,()=>t.linkProgram(n)),!G().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function II(t,n){if(Re(t,()=>t.validateProgram(n)),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Ute(t,n){let e=ru(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Re(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Re(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function Hte(t,n){let e=ru(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Re(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Re(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function Wte(t){return ru(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function jte(t,n){let e=G().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){let i=`[${t}x${n}]`;throw new Error("Requested texture size "+i+" is invalid.")}if(t>e||n>e){let i=`[${t}x${n}]`,r=`[${e}x${e}]`;throw new Error("Requested texture size "+i+" greater than WebGL maximum on this browser / GPU "+r+".")}}function qte(t){return ru(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function ZV(t,n,e,i,r,o,s){let a=t.getAttribLocation(n,e);return a===-1?!1:(Re(t,()=>t.bindBuffer(t.ARRAY_BUFFER,i)),Re(t,()=>t.vertexAttribPointer(a,r,t.FLOAT,!1,o,s)),Re(t,()=>t.enableVertexAttribArray(a)),!0)}function YPe(t,n,e){ZPe(t,e),Re(t,()=>t.activeTexture(t.TEXTURE0+e)),Re(t,()=>t.bindTexture(t.TEXTURE_2D,n))}function Xte(t,n,e){return ru(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}function Kte(t,n,e){return t.getUniformLocation(n,e)}function Yte(t,n,e,i){Re(t,()=>YPe(t,n,i)),Re(t,()=>t.uniform1i(e,i))}function DI(t,n,e){Re(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Re(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function JV(t,n){Re(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Re(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function R_(t){let n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+QPe(t,n))}function QPe(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}function ru(t,n,e){let i=Re(t,()=>n());if(i==null)throw new Error(e);return i}function ZPe(t,n){let e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,i=n+t.TEXTURE0;if(i<t.TEXTURE0||i>e){let r=`[gl.TEXTURE0, gl.TEXTURE${e}]`;throw new Error(`textureUnit must be in ${r}.`)}}function tp(t,n=2){return v.sizeFromShape(t.slice(0,t.length-n))}function np(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function F_(t){let n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[tp(t),...np(t)]),n}function Qte(t,n=!1){let e=G().getNumber("WEBGL_MAX_TEXTURE_SIZE"),i=G().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");i===1/0&&G().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(i=e/2),n&&(e=e*2,i=i*2,t=t.map((a,l)=>l>=t.length-2?v.nearestLargerEven(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=v.squeezeShape(t).newShape);let r=v.sizeFromShape(t),o=null;t.length<=1&&r<=e?o=[1,r]:t.length===2&&t[0]<=e&&t[1]<=e?o=t:t.length===3&&t[0]*t[1]<=e&&t[2]<=e?o=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=e&&t[1]*t[2]<=e?o=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=e&&t[3]<=e?o=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(o=[t[0],t[1]*t[2]*t[3]]);let s=o!=null&&Math.max(...o)>i&&Math.min(...o)<=(n?2:1)&&Math.min(...o)>0;if(o==null||s)if(n){let a=tp(t),l=2,c=2;t.length&&([l,c]=np(t)),r=a*(l/2)*(c/2),o=v.sizeToSquarishShape(r).map(u=>u*2)}else o=v.sizeToSquarishShape(r);return o}function EI(t){return t%2===0}function Tm(t,n){if(t=t.slice(-2),n=n.slice(-2),v.arraysEqual(t,n)||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){let e=t[t.length-1],i=n[n.length-1];if(e===i||EI(e)&&EI(i)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&EI(t[0])&&EI(n[0])}var XV,KV;function Zte(t){if(XV==null){let n=Do(t);XV=n.getParameter(n.MAX_TEXTURE_SIZE)}return XV}function Jte(t){if(KV==null){let n=Do(t);KV=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,KV)}function ene(t){if(t===0)return 0;let n,e=Do(t);return Ko(e,"EXT_disjoint_timer_query_webgl2")&&t===2?n=2:Ko(e,"EXT_disjoint_timer_query")?n=1:n=0,n}function Ko(t,n){return t.getExtension(n)!=null}function eB(t){try{if(Do(t)!=null)return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function tne(t){if(t===0)return!1;let n=Do(t);if(t===1){if(!Ko(n,"OES_texture_float"))return!1}else if(!Ko(n,"EXT_color_buffer_float"))return!1;return YV(n)}function nne(t){if(t===0)return!1;let n=Do(t);if(t===1){if(!Ko(n,"OES_texture_float")||!Ko(n,"WEBGL_color_buffer_float"))return!1}else{if(Ko(n,"EXT_color_buffer_float"))return YV(n);let i="EXT_color_buffer_half_float";if(Ko(n,i)){let r=n.getExtension(i);return JPe(n,r)}return!1}return YV(n)}function YV(t){let n=M_(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);let o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(o),s}function JPe(t,n){let e=M_(t,n),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(i),t.deleteFramebuffer(s),a}function ine(t){return t!==2?!1:Do(t).fenceSync!=null}function ol(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&v.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}var Ye=G();Ye.registerFlag("HAS_WEBGL",()=>Ye.getNumber("WEBGL_VERSION")>0);Ye.registerFlag("WEBGL_VERSION",()=>eB(2)?2:eB(1)?1:0);Ye.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ye.get("WEBGL_VERSION")===2);Ye.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ye.registerFlag("WEBGL_PACK",()=>Ye.getBool("HAS_WEBGL"));Ye.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_CLIP",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_REDUCE",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_CONV_IM2COL",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Zte(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Jte(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=Ye.getNumber("WEBGL_VERSION");return t===0?0:ene(t)});Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Vd.isMobile());Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>tne(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ye.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>nne(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_FENCE_API_ENABLED",()=>ine(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ye.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ye.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Vd.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ye.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ye.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ye.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ye.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ye.registerFlag("WEBGL_EXP_CONV",()=>!1);Ye.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ye.getBool("IS_TEST"));Ye.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ye.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ye.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ye.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function $n(){let t,n,e,i,r,o,s,a,l,c;return G().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",i="in",r="texture",o="outputColor",s="out vec4 outputColor;",a=G().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",i="varying",r="texture2D",o="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:i,texture2D:r,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function ca(t,n,e="index"){let i=v.computeStrides(n);return i.map((r,o)=>{let s=`int ${t[o]} = ${e} / ${r}`,a=o===i.length-1?`int ${t[o+1]} = ${e} - ${t[o]} * ${r}`:`index -= ${t[o]} * ${r}`;return`${s}; ${a};`}).join("")}function Sm(t,n,e="index"){let i=v.computeStrides(n);return i.map((r,o)=>{let s=`int ${t[o]} = ${e} / outShapeStrides[${o}]`,a=o===i.length-1?`int ${t[o+1]} = ${e} - ${t[o]} * outShapeStrides[${o}]`:`index -= ${t[o]} * outShapeStrides[${o}]`;return`${s}; ${a};`}).join("")}function e$e(t,n){let e=t.length,i=t.map(o=>`${n}[${o}]`),r=new Array(e-1);r[e-2]=i[e-1];for(let o=e-3;o>=0;--o)r[o]=`(${r[o+1]} * ${i[o+1]})`;return r}function rne(t,n,e="index"){let i=t.map((o,s)=>s),r=e$e(i,n);return r.map((o,s)=>{let a=`int ${t[s]} = ${e} / ${r[s]}`,l=s===r.length-1?`int ${t[s+1]} = ${e} - ${t[s]} * ${r[s]}`:`index -= ${t[s]} * ${r[s]}`;return`${a}; ${l};`}).join("")}function kb(t){let n=v.computeStrides(t).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;
  }
`}function Eb(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var NI=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:one}=T;function sne(t,n,e){let i=[];if(t.forEach(h=>{let m=v.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?i.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(i.push(`uniform sampler2D ${h.name};`),i.push(`uniform int offset${h.name};`)),e.enableShapeUniforms){let{uniformShape:g}=MI(e.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:i.push(`uniform int ${h.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}i.push(`uniform ivec2 ${h.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;");break;default:break}i.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(h=>{i.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let r=i.join(`
`),o=t.map(h=>t$e(h,n,e.packedInputs,e.enableShapeUniforms)).join(`
`),s=n.texShape,a=$n(),l=r$e(a),c,u,d=a$e(a);return n.isPacked?(c=n$e(n.logicalShape,s,e.enableShapeUniforms),u=s$e(a)):(c=i$e(n.logicalShape,s,e.enableShapeUniforms),u=o$e(a)),e.packedInputs&&(d+=d$e),[d,l,u,r,c,o,e.userCode].join(`
`)}function Db(t,n=!1){let e=t.shapeInfo.logicalShape;switch(e.length){case 0:return C$e(t,n);case 1:return S$e(t,n);case 2:return E$e(t,n);case 3:return D$e(t,n);case 4:return N$e(t,n);case 5:return M$e(t);case 6:return O$e(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function ane(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return w$e(t);case 1:return T$e(t,n);case 2:return k$e(t,n);case 3:return I$e(t,n);default:return A$e(t,n)}}function t$e(t,n,e=!1,i){let r="";e?r+=ane(t,i):r+=Db(t,i);let o=t.shapeInfo.logicalShape,s=n.logicalShape;return o.length<=s.length&&(e?r+=R$e(t,n):r+=F$e(t,n)),r}function n$e(t,n,e){switch(t.length){case 0:return lne();case 1:return p$e(t,n,e);case 2:return v$e(t,n,e);case 3:return m$e(t,n,e);default:return g$e(t,n,e)}}function i$e(t,n,e){switch(t.length){case 0:return lne();case 1:return h$e(t,n,e);case 2:return _$e(t,n,e);case 3:return f$e(t,n,e);case 4:return y$e(t,n,e);case 5:return b$e(t,n);case 6:return x$e(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function r$e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function o$e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function s$e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function a$e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${l$e}
    ${c$e}
    ${u$e}
  `}var l$e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,c$e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,u$e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,d$e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function lne(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function p$e(t,n,e){let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return i[0]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${i[1]}.0);
      }
    `:i[1]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${i[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      return 2 * (resTexRC.x * ${i[1]} + resTexRC.y);
    }
  `}function h$e(t,n,e){return n[0]===1?e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${n[1]}.0);
      }
    `:n[1]===1?e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${n[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      return resTexRC.x * ${n[1]} + resTexRC.y;
    }
  `}function m$e(t,n,e){if(e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec3(b, r, c);
    }
  `}function f$e(t,n,e){if(e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Sm(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let i=ca(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${i}
      return ivec3(r, c, d);
    }
  `}function g$e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),s=o,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      ${a}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec${t.length}(${l});
    }
  `}function y$e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Sm(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let i=ca(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${i}
      return ivec4(r, c, d, d2);
    }
  `}function b$e(t,n){let e=ca(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},
                             ${n[1]}));

      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function x$e(t,n){let e=ca(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function v$e(t,n,e){let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(v.arraysEqual(t,n))return e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));
      }
    `;let r=Math.ceil(t[1]/2);return e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));

      int index = resTexRC.x * ${i[1]} + resTexRC.y;
      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec2(r, c);
    }
  `}function _$e(t,n,e){return v.arraysEqual(t,n)?e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));
      }
    `:t[1]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function km(t){return`offset${t}`}function w$e(t){let n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),i=$n();return`
    vec4 ${e}() {
      return ${i.texture2D}(${n}, halfCR);
    }
  `}function C$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${i}() {return ${e};}`;let[r,o]=t.shapeInfo.texShape;if(r===1&&o===1)return`
      float ${i}() {
        return sampleTexture(${e}, halfCR);
      }
    `;let s=km(e);if(n)return`
    float ${i}() {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${s});
      return sampleTexture(${e}, uv);
    }
  `;let[a,l]=t.shapeInfo.texShape;return`
    float ${i}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${s});
      return sampleTexture(${e}, uv);
    }
  `}function T$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,o=$n();if(n)return`
    vec4 ${i}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${e}, uv);
    }
  `;let s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`
    vec4 ${i}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${o.texture2D}(${e}, uv);
    }
  `}function S$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float ${i}(int index) {
        ${Ab(t)}
      }
    `;let r=t.shapeInfo.texShape,o=r[0],s=r[1];if(s===1&&o===1)return`
      float ${i}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;let a=km(e);return s===1?n?`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${o}.0);
        return sampleTexture(${e}, uv);
      }
    `:o===1?n?`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:n?`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});
      return sampleTexture(${e}, uv);
    }
  `:`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${o}, ${s}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function k$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape,s=o[0],a=o[1],l=$n();if(o!=null&&v.arraysEqual(e,o))return n?`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);

        return ${l.texture2D}(${i}, uv);
      }
    `:`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${l.texture2D}(${i}, uv);
      }
    `;if(n)return`
    vec4 ${r}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${i}, uv);
    }
  `;let c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${r}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${i}, uv);
    }
  `}function E$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape;if(o!=null&&v.arraysEqual(e,o)){if(n)return`
      float ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `;let p=o[0],h=o[1];return`
    float ${r}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${i}, uv);
    }
  `}let{newShape:s,keptDims:a}=v.squeezeShape(e),l=s;if(l.length<e.length){let p=Nb(t,l),h=["row","col"];return`
      ${Db(p,n)}
      float ${r}(int row, int col) {
        return ${r}(${Mb(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${Ab(t)}
      }
    `;let c=o[0],u=o[1],d=km(i);return u===1?n?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${i}TexShape[0]));
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${i}, uv);
    }
  `:c===1?n?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${i}TexShape[1]), 0.5);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${i}, uv);
    }
  `:n?`
      float ${r}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
        return sampleTexture(${i}, uv);
      }
    `:`
  float ${r}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${i}, uv);
  }
`}function I$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(e[0]===1){let p=e.slice(1),h=[1,2],m=Nb(t,p),g=["b","row","col"];return`
        ${ane(m,n)}
        vec4 ${r}(int b, int row, int col) {
          return ${r}(${Mb(g,h)});
        }
      `}let a=$n();if(n)return`
    vec4 ${r}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${i}, uv);
    }
  `;let l=s[0],c=s[1],u=Math.ceil(e[2]/2),d=u*Math.ceil(e[1]/2);return`
    vec4 ${r}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${i}, uv);
    }
  `}function D$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=e[1]*e[2],s=e[2],{newShape:a,keptDims:l}=v.squeezeShape(e),c=a;if(c.length<e.length){let g=Nb(t,c),f=["row","col","depth"];return`
        ${Db(g,n)}
        float ${r}(int row, int col, int depth) {
          return ${r}(${Mb(f,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${s}, 1)));
        ${Ab(t)}
      }
    `;let u=t.shapeInfo.texShape,d=u[0],p=u[1],h=t.shapeInfo.flatOffset;if(p===o&&h==null)return n?`
      float ${r}(int row, int col, int depth) {
        int stride1 = ${i}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
        float ${r}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${i}, uv);
        }
      `;if(p===s&&h==null)return n?`
      float ${r}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${i}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${r}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${i}, uv);
    }
  `;let m=km(i);return n?`
    float ${r}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${i}Shape[1] * ${i}Shape[2];
      int stride1 = ${i}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
      return sampleTexture(${i}, uv);
    }
    `:`
      float ${r}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${s} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${i}, uv);
      }
  `}function A$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),r=$n();if(n)return`
    vec4 ${i}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${r.texture2D}(${e}, uv);
    }
  `;let o=t.shapeInfo.logicalShape,s=o.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(o[s-1]/2),p=d*Math.ceil(o[s-2]/2),h="int b, int row, int col",m=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<s-1;g++)h=`int b${g}, `+h,p*=o[s-g-1],m=`b${g} * ${p} + `+m;return`
    vec4 ${i}(${h}) {
      int index = ${m};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${r.texture2D}(${e}, uv);
    }
  `}function N$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=e[3],s=e[2]*o,a=e[1]*s,{newShape:l,keptDims:c}=v.squeezeShape(e);if(l.length<e.length){let b=Nb(t,l),x=["row","col","depth","depth2"];return`
      ${Db(b,n)}
      float ${r}(int row, int col, int depth, int depth2) {
        return ${r}(${Mb(x,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${o}, 1)));
        ${Ab(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],m=`int stride2 = ${i}Shape[3];`,g=`int stride1 = ${i}Shape[2] * stride2;`,f=`int stride0 = ${i}Shape[1] * stride1;`;if(h===a&&u==null)return n?`
      float ${r}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${i}, uv);
      }
    `;if(h===o&&u==null)return n?`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${i}Shape[1] * ${i}Shape[2], ${i}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${i}, uv);
      }
    `;let y=km(i);return n?`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${f}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index + ${y});
      return sampleTexture(${i}, uv);
    }
  `:`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${y});
      return sampleTexture(${i}, uv);
    }
  `}function M$e(t){let n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),r=n[4],o=n[3]*r,s=n[2]*o,a=n[1]*s,{newShape:l,keptDims:c}=v.squeezeShape(n);if(l.length<n.length){let g=Nb(t,l),f=["row","col","depth","depth2","depth3"];return`
      ${Db(g)}
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        return ${i}(${Mb(f,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${o}, ${r})) +
          depth3;
        ${Ab(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===a&&u==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${o}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(h===r&&u==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]},
               ${n[2]*n[3]}, ${n[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;let m=km(e);return`
    float ${i}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${o} +
          depth2 * ${r} + depth3 + ${m};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${e}, uv);
    }
  `}function O$e(t){let n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:r,keptDims:o}=v.squeezeShape(n);if(r.length<n.length){let f=Nb(t,r),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${Db(f)}
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${i}(${Mb(y,o)});
      }
    `}let s=n[5],a=n[4]*s,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${Ab(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],m=p[1];if(m===u&&d==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(m===s&&d==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]*n[4]},
               ${n[2]*n[3]*n[4]},
               ${n[3]*n[4]},
               ${n[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;let g=km(e);return`
    float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${e}, uv);
    }
  `}function Ab(t){let n=t.name,e=v.sizeFromShape(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${n}[i];
      }
    }
  `}function R$e(t,n){let e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),r="get"+i+"AtOutCoords",o=t.shapeInfo.logicalShape.length,s=n.logicalShape.length,a=one(t.shapeInfo.logicalShape,n.logicalShape),l=pt(s),c=s-o,u,d=["x","y","z","w","u","v"];o===0?u="":s<2&&a.length>=1?u="coords = 0;":u=a.map(b=>`coords.${d[b+c]} = 0;`).join(`
`);let p="";s<2&&o>0?p="coords":p=t.shapeInfo.logicalShape.map((b,x)=>`coords.${d[x+c]}`).join(", ");let h="return outputValue;",g=v.sizeFromShape(t.shapeInfo.logicalShape)===1,y=v.sizeFromShape(n.logicalShape)===1;if(o===1&&!g&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){let b=o-2,x=o-1;a.indexOf(b)>-1&&a.indexOf(x)>-1?h="return vec4(outputValue.x);":a.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(x)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${r}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${i}(${p});
      ${h}
    }
  `}function F$e(t,n){let e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),r="get"+i+"AtOutCoords",o=n.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&v.arraysEqual(s,o))return`
      float ${r}() {
        return sampleTexture(${e}, resultUV);
      }
    `;let c=pt(l),u=one(t.shapeInfo.logicalShape,n.logicalShape),d=l-a,p,h=["x","y","z","w","u","v"];a===0?p="":l<2&&u.length>=1?p="coords = 0;":p=u.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let m="";return l<2&&a>0?m="coords":m=t.shapeInfo.logicalShape.map((g,f)=>`coords.${h[f+d]}`).join(", "),`
    float ${r}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${i}(${m});
    }
  `}function pt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function MI(t,n,e){let{newShape:i,keptDims:r}=v.squeezeShape(n),o=n.length,s=t&&o===3&&n[0]===1,a=s?n.slice(1):i,l=!t&&o>1&&!v.arraysEqual(n,e)&&i.length<o||s;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:r}}function Nb(t,n){let e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function Mb(t,n){return n.map(e=>t[e]).join(", ")}function une(t,n,e,i){let r=e.map((u,d)=>{let p={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(p.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[d],shapeInfo:p}}),o=r.map(u=>u.shapeInfo),s={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},a=sne(r,s,n),l=Bte(t.gl,a),c=t.createProgram(l);return G().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s},tB(t,n,c)))}function tB(t,n,e){let i=[],r=[],o,s,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),G().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(e,"INFINITY",!1));let u=!1;for(let d of n.variableNames){let p={name:d,uniform:t.getUniformLocation(e,d,u),offset:t.getUniformLocation(e,`offset${d}`,u)};n.enableShapeUniforms&&(p.shape=t.getUniformLocation(e,`${d}Shape`,u),p.texShape=t.getUniformLocation(e,`${d}TexShape`,u)),i.push(p)}if(n.enableShapeUniforms&&(o=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),s=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(let d of n.customUniforms)r.push(t.getUniformLocation(e,d.name,u));return{variablesLocations:i,customUniformLocations:r,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}}function cne(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,i)=>{let r=e.logicalShape,o=n[i],s=o.shape;if(!v.arraysEqual(r,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${s} must match`);if(e.isUniform&&o.isUniform)return;let a=e.texShape,l=o.isUniform?null:o.texData.texShape;if(!v.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function dne(t,n,e,i,r){n.program.enableShapeUniforms||(cne(n.inShapeInfos,e),cne([n.outShapeInfo],[i]));let o=i.texData.texture,s=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,s[0],s[1]):t.setOutputMatrixTexture(o.texture,s[0],s[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),G().getNumber("WEBGL_VERSION")===1&&n.infLoc!==null&&t.gl.uniform1f(n.infLoc,1/0),n.nanLoc!==null&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){let c=e[l],{uniform:u,offset:d,shape:p,texShape:h}=n.variablesLocations[l];if(p){let{uniformShape:m}=MI(n.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(p,new Int32Array(m));break;case 2:t.gl.uniform2iv(p,new Int32Array(m));break;case 3:t.gl.uniform3iv(p,new Int32Array(m));break;case 4:t.gl.uniform4iv(p,new Int32Array(m));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(v.sizeFromShape(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(u,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let a=n.outShapeLocation;if(a)switch(i.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(i.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(i.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(i.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(i.shape));break;default:break}if(n.outShapeStridesLocation){let l=v.computeStrides(i.shape);switch(i.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l));break;default:break}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),n.program.customUniforms&&r)for(let l=0;l<n.program.customUniforms.length;++l){let c=n.program.customUniforms[l],u=n.customUniformLocations[l],d=r[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function pne(t,n,e){let i="";n.concat(e).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=MI(t.packedInputs,s.shape,l),p="",h="",m="";if(u.length===1&&t.packedInputs){let w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){let w=v.computeStrides(u);m=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}let g=s.shape.length,f=u.length===2&&v.arraysEqual(s.shape,l),y=v.sizeFromShape(s.shape)===1,b=T.getBroadcastDims(s.shape,e.shape),x=!t.packedInputs&&g===e.shape.length&&v.arraysEqual(l,e.texData.texShape),_=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;i+=`${g}_${x}_${c?d:""}_${u.length}_${y}_${b}_${f}_${p}_${h}_${m}_${_}_${a}`}else{let l=s.isUniform?"uniform":s.texData.texShape;i+=`${s.shape}_${l}_${a}`}});let r=t.userCode,o=t.constructor.name;return o+="_"+i+"_"+r+`${G().getNumber("WEBGL_VERSION")}`,o}function rn(t){return G().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var OI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=wm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=$n();this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Sm(["r","c","d"],n):ca(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${e.output} = result;
      }
    `}};var RI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=wm.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=$n();this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Sm(["r","c","d"],n):ca(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${e.output} = result;
      }
    `}};var FI=class{constructor(n){this.variableNames=["A"],this.outTexUsage=gr.DOWNLOAD;let e=$n();this.outputShape=n,this.userCode=`
      ${NI}

      void main() {
        float x = getAAtOutCoords();
        ${e.output} = encode_float(x);
      }
    `}};var LI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=gr.DOWNLOAD;let e=$n();this.outputShape=n,this.userCode=`
      ${NI}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${e.output} = encode_float(x);
      }
    `}};var $$e={R:0,G:1,B:2,A:3},L_=class{constructor(n,e=!1,i="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=$n();this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length);let o="result";e&&(o="floor(result * 255. + 0.5)");let s="";for(let a=0;a<i.length;a++){let l=i[a];s+=`
          if(offset == ${a}) {
            result = values[${$$e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Eb():kb(n)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${i.length});

        flatIndex = idiv(flatIndex, ${i.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${r.texture2D}(A, uv);
          ${s}
        }
        ${r.output} = vec4(${o}, 0., 0., 0.);
      }
    `}};var PI=class{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=$n();this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length);let r="",o="result";e&&(o="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){let l=s*2+a;r+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${i.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Eb():kb(n)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${r}

          ${i.output} = ${o};
        }
    `}};function hne(t){let n=$n(),e=`${n.version}
    precision highp float;
    ${n.attribute} vec3 clipSpacePos;
    ${n.attribute} vec2 uv;
    ${n.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Vte(t,e)}function mne(t){let n=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Ute(t,n)}function fne(t){let n=new Uint16Array([0,1,2,2,1,3]);return Hte(t,n)}function P_(t,n,e,i,r,o){jte(n,e);let s=Wte(t),a=t.TEXTURE_2D;return Re(t,()=>t.bindTexture(a,s)),Re(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Re(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Re(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Re(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),G().getNumber("WEBGL_VERSION")===1?Re(t,()=>t.texImage2D(a,0,i,n,e,0,r,o,null)):Re(t,()=>t.texStorage2D(a,1,i,n,e)),Re(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[e,n]}}function nB(t){return t.internalFormatFloat}function gne(t,n,e,i){let[r,o]=Cm(n,e);return P_(t,r,o,nB(i),i.textureFormatFloat,t.FLOAT)}function iB(t){return t.internalFormatHalfFloat}function yne(t,n,e,i){let[r,o]=Cm(n,e);return P_(t,r,o,iB(i),i.textureFormatFloat,i.textureTypeHalfFloat)}function rB(t){return t.downloadTextureFormat}function bne(t,n,e,i){let[r,o]=Cm(n,e);return P_(t,r,o,rB(i),t.RGBA,t.UNSIGNED_BYTE)}function oB(t){return t.internalFormatPackedFloat}function xne(t,n,e,i){let[r,o]=rl(n,e);return P_(t,r,o,oB(i),t.RGBA,t.FLOAT)}function sB(t){return t.internalFormatPackedHalfFloat}function vne(t,n,e,i){let[r,o]=rl(n,e);return P_(t,r,o,sB(i),t.RGBA,i.textureTypeHalfFloat)}function _ne(t,n,e){return Re(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),ZV(t,n,"clipSpacePos",e,3,20,0)&&ZV(t,n,"uv",e,2,20,12)}function wne(t,n,e,i,r,o){Re(t,()=>t.bindTexture(t.TEXTURE_2D,n));let s,a,l;r instanceof Uint8Array?(s=new Uint8Array(e*i*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(e*i*4),a=t.FLOAT,l=o.internalFormatPackedFloat),s.set(r),G().getNumber("WEBGL_VERSION")===2?Re(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,i,t.RGBA,a,s)):Re(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,i,0,t.RGBA,a,s)),Re(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Cne(t,n,e){Re(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?G().getNumber("WEBGL_VERSION")===2?Re(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Re(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):G().getNumber("WEBGL_VERSION")===2?Re(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Re(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Re(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function Tne(t,n,e,i){let r=t.createBuffer();Re(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,r));let a=4*4*n*e;return Re(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Re(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Re(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),r}function Sne(t,n,e){let i=t,r=new Float32Array(e);return i.bindBuffer(i.PIXEL_PACK_BUFFER,n),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,r),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),r}function kne(t,n,e,i){let[r,o]=Cm(n,e),s=4,a=new Uint8Array(Lte(n*e,s));return Re(t,()=>t.readPixels(0,0,r,o,i.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function Ene(t,n,e,i,r,o,s,a){let l=t,c=new Float32Array(Pte(o,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Ine(t,n,e){let i=new Float32Array(n*e*4);return Re(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,i)),i}var Ob=class{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let e=G().getNumber("WEBGL_VERSION");if(n!=null?(this.gl=n,Fte(e,n)):this.gl=Do(e),n=this.gl,G().getNumber("WEBGL_VERSION")===2){let o=n;this.createVertexArray=()=>Re(o,()=>o.createVertexArray()),this.bindVertexArray=s=>Re(o,()=>o.bindVertexArray(s)),this.deleteVertexArray=s=>Re(o,()=>o.deleteVertexArray(s)),this.getVertexArray=()=>Re(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(n!=null){let o=n.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Re(n,()=>o.createVertexArrayOES()),this.bindVertexArray=s=>Re(n,()=>o.bindVertexArrayOES(s)),this.deleteVertexArray=s=>Re(n,()=>o.deleteVertexArrayOES(s)),this.getVertexArray=()=>Re(n,()=>n.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let i="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),G().getNumber("WEBGL_VERSION")===1){let o="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=O_(this.gl,o),Ko(this.gl,s))this.textureHalfFloatExtension=O_(this.gl,s);else if(G().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),Ko(this.gl,r))this.colorBufferHalfFloatExtension=O_(this.gl,r);else if(G().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",Ko(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else if(Ko(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=mne(this.gl),this.indexBuffer=fne(this.gl),this.framebuffer=qte(this.gl),this.textureConfig=M_(this.gl,this.textureHalfFloatExtension)}get debug(){return G().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let n=this.gl;Re(n,()=>n.finish()),Re(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Re(n,()=>n.deleteFramebuffer(this.framebuffer)),Re(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Re(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Re(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),gne(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),yne(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),bne(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),Cne(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,i,r){this.throwIfDisposed(),wne(this.gl,n,e,i,r,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),vne(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),xne(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(JV(this.gl,this.framebuffer),this.outputTexture=null),Re(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,i){return this.downloadMatrixDriver(n,()=>kne(this.gl,e,i,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,i,r,o,s){return Ene(this.gl,n,e,i,r,o,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(n,e){return Sne(this.gl,n,e)}createBufferFromTexture(n,e,i){this.bindTextureToFrameBuffer(n);let r=Tne(this.gl,e,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,i;if(G().getBool("WEBGL_FENCE_API_ENABLED")){let r=n,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),i=()=>{let s=r.clientWaitSync(o,0,0);return s===r.ALREADY_SIGNALED||s===r.CONDITION_SATISFIED},e=o}else G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),i=()=>this.isQueryAvailable(e,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):i=()=>!0;return{query:e,isFencePassed:i}}downloadMatrixFromPackedTexture(n,e,i){return this.downloadMatrixDriver(n,()=>Ine(this.gl,e,i))}createProgram(n){this.throwIfDisposed();let e=this.gl;this.vertexShader==null&&(this.vertexShader=hne(e));let i=zte(e);Re(e,()=>e.attachShader(i,this.vertexShader)),Re(e,()=>e.attachShader(i,n)),Gte(e,i);let r=Object.assign(i,{vao:this.createVertexArray()});return this.debug&&II(e,r),r}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);let e=this.gl;Re(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),_ne(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&(Re(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&II(this.gl,this.program),Re(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,i=!0){return this.throwIfDisposed(),i?Xte(this.gl,n,e):Kte(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Re(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,i){this.throwIfDisposed(),this.throwIfNoProgram(),Yte(this.gl,n,e,i)}setOutputMatrixTexture(n,e,i){this.setOutputMatrixTextureDriver(n,i,e)}setOutputPackedMatrixTexture(n,e,i){this.throwIfDisposed();let[r,o]=rl(e,i);this.setOutputMatrixTextureDriver(n,r,o)}setOutputMatrixWriteRegion(n,e,i,r){this.setOutputMatrixWriteRegionDriver(i,n,r,e)}setOutputPackedMatrixWriteRegion(n,e,i,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&II(this.gl,this.program),R_(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let n=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Re(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Re(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=O_(this.gl,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let i=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=i.createQuery();return i.beginQuery(r.TIME_ELAPSED_EXT,o),o}let n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let e=this.gl,i=this.getQueryTimerExtensionWebGL2();e.endQuery(i.TIME_ELAPSED_EXT);return}let n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){return W(this,null,function*(){return yield v.repeatedTry(()=>this.disposed||this.isQueryAvailable(n,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(n,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(n,e){if(e===0)return null;if(e===2){let i=this.gl;return i.getQueryParameter(n,i.QUERY_RESULT)/1e6}else{let i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(e===0)return!0;if(e===2){let i=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=i.getQueryParameter(n,i.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{let i=this.getQueryTimerExtensionWebGL1(),r=i.getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){let n=B$e(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){let{resolveFn:i}=this.itemsToPoll[e];i()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let i;"setTimeoutCustom"in G().platform&&(i=G().platform.setTimeoutCustom.bind(G().platform)),v.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,i)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),DI(this.gl,n,this.framebuffer),this.debug&&R_(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(DI(this.gl,this.outputTexture,this.framebuffer),this.debug&&R_(this.gl)):JV(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);let i=e();return this.unbindTextureToFrameBuffer(),i}setOutputMatrixTextureDriver(n,e,i){this.throwIfDisposed();let r=this.gl;DI(r,n,this.framebuffer),this.debug&&R_(r),this.outputTexture=n,Re(r,()=>r.viewport(0,0,e,i)),Re(r,()=>r.scissor(0,0,e,i))}setOutputMatrixWriteRegionDriver(n,e,i,r){this.throwIfDisposed(),Re(this.gl,()=>this.gl.scissor(n,e,i,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function B$e(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}var{addImpl:Dne,bincountImpl:$I,bincountReduceImpl:Ane,bitwiseAndImpl:Nne,castImpl:Mne,ceilImpl:One,concatImpl:Rne,equalImpl:Fne,expImpl:Lne,expm1Impl:Pne,floorImpl:$ne,gatherNdImpl:Vne,gatherV2Impl:Bne,greaterImpl:zne,greaterEqualImpl:Gne,lessImpl:Une,lessEqualImpl:Hne,linSpaceImpl:Wne,logImpl:jne,maxImpl:qne,maximumImpl:Xne,minimumImpl:Kne,multiplyImpl:Yne,negImpl:Qne,notEqualImpl:Zne,prodImpl:Jne,raggedGatherImpl:eie,raggedRangeImpl:tie,raggedTensorToTensorImpl:nie,rangeImpl:iie,rsqrtImpl:rie,scatterImpl:oie,sigmoidImpl:sie,simpleAbsImpl:VI,sliceImpl:aie,sparseFillEmptyRowsImpl:lie,sparseReshapeImpl:cie,sparseSegmentReductionImpl:BI,sqrtImpl:uie,staticRegexReplaceImpl:die,stridedSliceImpl:pie,stringNGramsImpl:hie,stringSplitImpl:mie,stringToHashBucketFastImpl:fie,subImpl:gie,tileImpl:yie,topKImpl:bie,transposeImpl:Em,uniqueImpl:xie}=RV;function aB(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function jn(t,n){return n===1?[t]:aB(t,n)}function vie(t,n){if(t===1)return"rc";let e="";for(let i=0;i<t;i++)e+=n[i],i<t-1&&(e+=",");return e}var zI=class{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=rn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=jn("rc",this.rank),i=pt(this.rank),r=this.getOutOfBoundsCondition(e),o=this.getSetup(e),s=this.getOutput(e);this.userCode=`
        void main() {
          ${i} rc = getOutputCoords();

          if(${r}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(n){let e=[];for(let i=0;i<=1;i++)for(let r=0;r<=1;r++){let o=`${i===0?"r":"rp1"}, ${r===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)o=`${n[n.length-1-s]},`+o;e.push(o)}return e}getOutOfBoundsCondition(n){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let i=this.rank-2;i<this.rank;i++)e+=`${n[i]} >= ${this.enableShapeUniforms?`outShape[${i}]`:this.outputShape[i]}`,i<this.rank-1&&(e+="||");return e}getSetup(n){if(this.rank===1)return"";let e=n.slice(-2),i=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${e[0]};
      int c = ${e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${i};
      bool rEdge = rp1 >= ${r};
    `}getOutput(n){let e=this.getSourceCoordsArr(n);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),
            cEdge ? 0. : getA(${e[1]}),
            rEdge ? 0. : getA(${e[2]}),
            rEdge || cEdge ? 0. : getA(${e[3]})`}};var Rb=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length);let i="";for(let r=0;r<4;r++){let o="thisRC = rc;";r%2===1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),i+=`
        ${o}
        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${r>0?"}":""}
      `}this.userCode=`
      ${z$e(e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Eb():kb(n)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};

        ${i}

        setOutput(result);
      }
    `}};function z$e(t,n){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${n?rne(["r","c","d"],"inputShape"):ca(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}var GI=class{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,i){let r=wie(e,i),o=Cie(n,r,i);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);let s=_ie(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,i);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let l=this.freeTextures[o].pop();return this.usedTextures[o].push(l),l}let a;return r===tr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):r===tr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):r===tr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):r===tr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):r===tr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(n,e,i,r){if(this.freeTextures==null)return;let o=wie(i,r),s=Cie(e,o,r);s in this.freeTextures||(this.freeTextures[s]=[]);let a=_ie(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),l=G().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[s],u=c&&c.indexOf(n);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${n})`);let e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function G$e(t,n){let e=t;if(n===e.R32F)return 4;if(n===e.R16F)return 2;if(n===e.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===e.RGBA16F)return 8;if(n===e.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}function _ie(t,n,e,i,r){let o=U$e(n,i),s;if(r){let[l,c]=rl(t[0],t[1]);s=l*c}else{let[l,c]=Cm(t[0],t[1]);s=l*c}let a=G$e(e,o);return s*a}function U$e(t,n){switch(t){case tr.PACKED_2X2_FLOAT32:return oB(n);case tr.PACKED_2X2_FLOAT16:return sB(n);case tr.UNPACKED_FLOAT32:return nB(n);case tr.UNPACKED_FLOAT16:return iB(n);case tr.PACKED_4X1_UNSIGNED_BYTE:return rB(n);default:throw new Error(`Unknown physical texture type ${t}`)}}function H$e(t){return G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?tr.PACKED_2X2_FLOAT32:tr.UNPACKED_FLOAT32:t?tr.PACKED_2X2_FLOAT16:tr.UNPACKED_FLOAT16}function wie(t,n){if(t===gr.UPLOAD)return tr.PACKED_2X2_FLOAT32;if(t===gr.RENDER||t==null)return H$e(n);if(t===gr.DOWNLOAD||t===gr.PIXELS)return tr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function Cie(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}var Ui=class{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},di="if (isnan(x)) return x;",Tie="return x;",lB="return abs(x);";var Sie="return (x >= 0.0) ? x : (exp(x) - 1.0);",kie=di+`
  return (x < 0.0) ? 0.0 : x;
`,Eie=di+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,sl="return x;",Iie="return 1.0 / (1.0 + exp(-1.0 * x));";var Aie="return x;",Nie=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Mie=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Oie=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Rie="return 1.0 / (1.0 + exp(-1.0 * x));",io=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var UI=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length);let e=n.length,i=jn("rc",e),r=pt(e),o=vie(e,i),s=i.slice(-2),a=e<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var j$e=Ji.whereImpl,q$e=1e-7,X$e=1e-4,HI={};function K$e(t){return t in HI||(HI[t]={}),HI[t]}var Y$e=G().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Q$e=600;function Z$e(){return G().global.screen==null?1024:G().global.screen.height*G().global.screen.width*window.devicePixelRatio*Q$e/1024/1024}var Fie=(()=>{class t extends Hl{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!G().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let i;if(e!=null){if(e instanceof Ob)i=e;else{let r=Do(G().getNumber("WEBGL_VERSION"),e);i=new Ob(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let r=Do(G().getNumber("WEBGL_VERSION"));i=new Ob(r),this.binaryCache=K$e(G().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=i,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new GI(this.gpgpu),this.numMBBeforeWarning=Z$e(),this.texData=new Ch(this,fs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,i,r,o,s,a){let l=this.makeTensorInfo(i,r),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[o,s]},c.texShape=[o,s];let u=F_(i),d=new L_(u,!1,a),p=this.runWebGLProgram(d,[l],r,[[o,s]]);return p.shape=i,c.texture=null,this.disposeIntermediateTensorInfo(l),p.dataId}write(e,i,r){if((G().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||G().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let o={id:this.nextDataId()};return this.texData.set(o,{shape:i,dtype:r,values:e,usage:gr.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let i=this.texData.get(e);i.refCount++}decRef(e){if(this.texData.has(e)){let i=this.texData.get(e);i.refCount--}}move(e,i,r,o,s){if(G().getBool("DEBUG")&&this.checkNumericalProblems(i),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:o,values:i,usage:gr.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let i=this.texData.get(e),{values:r,dtype:o,complexTensorInfos:s,slice:a,shape:l,isPacked:c}=i;if(a!=null){let h;c?h=new io(l,sl):h=new Ui(l,sl);let m=this.runWebGLProgram(h,[{dataId:e,shape:l,dtype:o}],o),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;let u=this.activeTimers!=null,d;u&&(d=v.now());let p;if(o==="complex64"){let h=this.readSync(s.real.dataId),m=this.readSync(s.imag.dataId);p=T.mergeRealAndImagArrays(h,m)}else p=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=v.now()-d),this.convertAndCacheOnCPU(e,p)}read(e){return W(this,null,function*(){if(this.pendingRead.has(e)){let g=this.pendingRead.get(e);return new Promise(f=>g.push(f))}let i=this.texData.get(e),{values:r,shape:o,slice:s,dtype:a,complexTensorInfos:l,isPacked:c}=i;if(s!=null){let g;c?g=new io(o,sl):g=new Ui(o,sl);let f=this.runWebGLProgram(g,[{dataId:e,shape:o,dtype:a}],a),y=this.read(f.dataId);return this.disposeIntermediateTensorInfo(f),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(G().getBool("DEBUG")&&!G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&G().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,d;if(a!=="complex64"&&G().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);let g=this.texData.get(d.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...N_(o))}this.pendingRead.set(e,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(a==="complex64"){let g=yield Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),f=g[0],y=g[1];p=T.mergeRealAndImagArrays(f,y)}else if(u==null)p=this.getValuesFromTexture(e);else{let g=v.sizeFromShape(o);p=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(d!=null&&this.disposeIntermediateTensorInfo(d),u!=null){let g=this.gpgpu.gl;Re(g,()=>g.deleteBuffer(u))}let h=this.convertAndCacheOnCPU(e,p),m=this.pendingRead.get(e);return this.pendingRead.delete(e),m.forEach(g=>g(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&fs().removeDataId(e,this),this.pendingDeletes--),h})}readToGPU(e,i={}){let r=this.texData.get(e),{values:o,shape:s,slice:a,dtype:l,isPacked:c,texture:u}=r;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let m;c?m=new io(s,sl):m=new Ui(s,sl);let g=this.runWebGLProgram(m,[{dataId:e,shape:s,dtype:l}],l),f=this.readToGPU(g,i);return this.disposeIntermediateTensorInfo(g),f}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(e,i.customTexShape),p=fs().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(e){let i=this.readSync(e.dataId);if(e.dtype==="string")try{let r=i.map(o=>v.decodeString(o));return Ue(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ue(e.shape,e.dtype,i)}checkNumericalProblems(e){if(e!=null)for(let i=0;i<e.length;i++){let r=e[i];if(!$te(r))throw G().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:i,dtype:r,isPacked:o}=this.texData.get(e),s=v.sizeFromShape(i);if(G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(e),m=this.texData.get(h.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...N_(i)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),g}let a=G().getBool("WEBGL_PACK")&&o===!0,l=a?F_(i):i,c=a?new LI(l):new FI(l),u=this.runWebGLProgram(c,[{shape:l,dtype:r,dataId:e}],"float32"),d=this.texData.get(u.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),p}timerAvailable(){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let i=this.activeTimers,r=[],o=!1;this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();let s=v.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=v.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=i,o&&(this.programTimersStack=null);let l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return W(this,null,function*(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);l.kernelMs=v.sum(c),l.getExtraProfileInfo=()=>c.map((u,d)=>({name:a[d],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:v.now(),endMs:null}}endTimer(e){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=v.now(),e)}getQueryTime(e){return W(this,null,function*(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let i=e;return i.endMs-i.startMs})}disposeData(e,i=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(i?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!i&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,i),this.disposeData(r.imag.dataId,i)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:i,dtype:r,texShape:o,usage:s,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(i,o,s,a)));let d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,i=Y$e){return G().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&v.sizeFromShape(r.shape)<i)}getGPGPUContext(){return this.gpgpu}where(e){T.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let i=e.dataSync();return j$e(e.shape,i)}packedUnaryOp(e,i,r){let o=new io(e.shape,i),s=this.compileAndRun(o,[e],r);return fs().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let o=VI(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,lB,e.dtype);let i=new Ui(e.shape,lB),r=this.compileAndRun(i,[e]);return fs().makeTensorFromTensorInfo(r)}makeTensorInfo(e,i,r){let o;if(i==="string"&&r!=null&&r.length>0&&v.isString(r[0])){let s=r.map(a=>v.encodeString(a));o=this.write(s,e,i)}else o=this.write(r,e,i);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:i}}makeOutput(e,i,r){return fs().makeTensorFromTensorInfo(this.makeTensorInfo(e,i,r),this)}unpackTensor(e){let i=new UI(e.shape);return this.runWebGLProgram(i,[e],e.dtype)}packTensor(e){let i=new zI(e.shape);return this.runWebGLProgram(i,[e],e.dtype,null,!0)}packedReshape(e,i){let r=[tp(e.shape),...np(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},s=[tp(i),...np(i)],a=new Rb(s,r),l=!0,c=[r],u=this.runWebGLProgram(a,[o],e.dtype,c,l);return{dataId:u.dataId,shape:i,dtype:u.dtype}}decode(e,i){let r=this.texData.get(e),{isPacked:o,shape:s,dtype:a}=r;if(i!=null){let h=v.sizeFromShape(s),m=i[0]*i[1]*4;v.assert(h<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let l=F_(s),c;o?c=new RI(l):c=new OI(l);let u=!0,d=[i??N_(l)],p=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,u,i);return{dtype:a,shape:s,dataId:p.dataId}}runWebGLProgram(e,i,r,o,s=!1,a){let l=this.makeTensorInfo(e.outputShape,r),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===wm.DENSE){let b=a??N_(e.outputShape);c.texShape=b.map(x=>x*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),v.sizeFromShape(l.shape)===0)return c.values=v.getTypedArrayFromDType(l.dtype,0),l;let u=[],d=i.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let x=this.texData.get(b.dataId);if(x.texture==null){if(!e.packedInputs&&v.sizeFromShape(b.shape)<=G().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:x.values};e.packedInputs&&(x.isPacked=!0,x.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!x.isPacked!=!!e.packedInputs)b=x.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),x=this.texData.get(b.dataId);else if(x.isPacked&&!Tm(x.shape,b.shape)){let _=b,w=b.shape;b.shape=x.shape,b=this.packedReshape(b,w),u.push(b),x=this.texData.get(b.dataId),_.shape=w}return{shape:b.shape,texData:x,isUniform:!1}});this.uploadToGPU(l.dataId);let p={shape:l.shape,texData:c,isUniform:!1},h=pne(e,d,p),m=this.getAndSaveBinary(h,()=>une(this.gpgpu,e,d,p)),g=this.activeTimers!=null,f;g&&(f=this.startTimer()),G().get("ENGINE_COMPILE_ONLY")||dne(this.gpgpu,m,d,p,o),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),g&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));let y=G().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){let b=v.now();b-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!G().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){let b=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),b}return l}compileAndRun(e,i,r,o,s=!1){return r=r||i[0].dtype,this.runWebGLProgram(e,i,r,o,s)}getAndSaveBinary(e,i){return e in this.binaryCache||(this.binaryCache[e]=i()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(G().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(i=>{this.gpgpu.deleteProgram(this.binaryCache[i].webGLProgram),delete this.binaryCache[i]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=H(()=>{if(!G().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=G().getBool("DEBUG");G().set("DEBUG",!1);let i=this.abs(Ge(1e-8)).dataSync()[0];if(G().set("DEBUG",e),i>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?q$e:X$e}uploadToGPU(e){let i=this.texData.get(e),{shape:r,dtype:o,values:s,texture:a,usage:l,isPacked:c}=i;if(a!=null)return;let u=this.activeTimers!=null,d;u&&(d=v.now());let p=i.texShape;if(p==null&&(p=Qte(r,c),i.texShape=p),s!=null){let h=F_(r),m,g=p[1],f=p[0],y=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!y)&&([g,f]=rl(p[0],p[1])),c?m=new PI(h,y):m=new L_(h,y);let b=y?[f,g]:p,x=this.makeTensorInfo(b,o),_=this.texData.get(x.dataId);y?_.usage=gr.PIXELS:_.usage=gr.UPLOAD,_.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(x.dataId),g,f,s);let w=[[f,g]],k=this.runWebGLProgram(m,[x],o,w,!0),N=this.texData.get(k.dataId);i.texShape=N.texShape,i.isPacked=N.isPacked,i.usage=N.usage,G().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(i.texture=N.texture,i.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(x),u&&(this.uploadWaitMs+=v.now()-d)}else{let h=this.acquireTexture(p,l,o,c);i.texture=h}}convertAndCacheOnCPU(e,i){let r=this.texData.get(e),{dtype:o}=r;return i!=null&&(r.values=J$e(i,o)),r.values}acquireTexture(e,i,r,o){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,i,o)}computeBytes(e,i){return e[0]*e[1]*v.bytesPerElement(i)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){return W(this,null,function*(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,i]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(i));return Promise.all(e)}else{for(let[,i]of Object.entries(this.binaryCache)){let r=new Promise(o=>{try{this.checkCompletion_(i),o(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}})}checkCompletionAsync_(e){return W(this,null,function*(){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(yield s_(),this.checkCompletionAsync_(e))})}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(QV(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:i,customUniformLocations:r,infLoc:o,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=tB(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=i,e.customUniformLocations=r,e.infLoc=o,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,i,r){e.channels=e.channels||"RGBA";let{texture:o,height:s,width:a,channels:l}=e,c=fs().backend;if(!c.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let u=c.writeTexture(o,i,r,s,a,l);return fs().makeTensorFromDataId(u,i,r,c)}}return t.nextDataId=0,t})();function J$e(t,n){if(n==="float32"||n==="complex64")return t;if(n==="int32"||n==="bool"){let e=n==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let i=0;i<e.length;++i)e[i]=Math.round(t[i]);return e}else throw new Error(`Unknown dtype ${n}`)}Vd.isBrowser()&&Sk("webgl",()=>new Fie,2);var Fb=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var ro=class{constructor(n,e,i){this.variableNames=["A","B"],this.outputShape=T.assertAndGetBroadcastShape(e,i),this.enableShapeUniforms=rn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${n}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};var No=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Ao=class{constructor(n,e,i,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=T.assertAndGetBroadcastShape(e,i);let o=this.outputShape.length;this.enableShapeUniforms=rn(o);let s="";if(r)if(o===0||v.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${pt(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let l=jn("coords",o);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${n}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};function qn(t){let{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}var Lie={kernelName:Ua,backendName:"webgl",kernelFunc:qn};function oo(t){let{inputs:n,backend:e}=t,{real:i,imag:r}=n,o=e.makeTensorInfo(i.shape,"complex64"),s=e.texData.get(o.dataId),a=qn({inputs:{x:i},backend:e}),l=qn({inputs:{x:r},backend:e});return s.complexTensorInfos={real:a,imag:l},o}var Pie={kernelName:Xg,backendName:"webgl",kernelFunc:oo};var cB="return (a < 0.) ? b * a : a;",uB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function eVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{alpha:o}=i,s=e.makeTensorInfo([],"float32",v.createScalarValue(o,"float32")),a=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(uB,r.shape,s.shape):new ro(cB,r.shape,s.shape),l=e.runWebGLProgram(a,[r,s],"float32");return e.disposeIntermediateTensorInfo(s),l}var $ie={kernelName:cd,backendName:"webgl",kernelFunc:eVe};var dB="return (a < 0.) ? b * a : a;",pB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function tVe(t){let{inputs:n,backend:e}=t,{x:i,alpha:r}=n,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(pB,i.shape,r.shape):new ro(dB,i.shape,r.shape);return e.runWebGLProgram(o,[i,r],"float32")}var Vie={kernelName:wd,backendName:"webgl",kernelFunc:tVe};var Ns="if (isnan(x)) return x;";function ze({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:i}){return({inputs:r,backend:o})=>{let{x:s}=r,a=o,l=i||s.dtype;if(a.shouldExecuteOnCPU([s])&&e!=null){let d=a.texData.get(s.dataId),p=e(d.values,l);return a.makeTensorInfo(s.shape,l,p)}let c=G().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&n!=null,u;return c?u=new io(s.shape,n):u=new Ui(s.shape,t),a.runWebGLProgram(u,[s],l)}}function Zt({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:i=!1,cpuKernelImpl:r,dtype:o}){return({inputs:s,backend:a})=>{let{a:l,b:c}=s,u=a;if(i&&l.dtype==="complex64"){let m=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[f,y]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(x=>{let[_,w]=x,C={dataId:_.dataId,dtype:_.dtype,shape:l.shape},k={dataId:w.dataId,dtype:w.dtype,shape:c.shape},N=new ro(t,l.shape,c.shape);return u.runWebGLProgram(N,[C,k],ii(_.dtype,w.dtype))}),b=oo({inputs:{real:f,imag:y},backend:u});return u.disposeIntermediateTensorInfo(f),u.disposeIntermediateTensorInfo(y),b}let d=o||ii(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&r!=null){let m=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,f=l.dtype==="string"?T.fromUint8ToStringArray(m):m,y=l.dtype==="string"?T.fromUint8ToStringArray(g):g,[b,x]=r(l.shape,c.shape,f,y,d),_=u.makeTensorInfo(x,d),w=u.texData.get(_.dataId);return w.values=b,_}let p=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&n!=null,h;return p?h=new Ao(n,l.shape,c.shape,e):h=new ro(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function ou(t,n=!1){if(t==="linear")return n?Aie:Tie;if(t==="relu")return n?Mie:kie;if(t==="elu")return n?Nie:Sie;if(t==="relu6")return n?Oie:Eie;if(t==="prelu")return n?pB:dB;if(t==="leakyrelu")return n?uB:cB;if(t==="sigmoid")return n?Rie:Iie;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var Lb=class{constructor(n,e,i,r=!1,o=!1,s=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i,this.enableShapeUniforms=rn(this.outputShape.length);let u=r?n[1]:n[2],d=Math.ceil(u/2),p=r?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",m=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",y="";a&&(l?f=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?f=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:f=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");let b=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let x="rc.x",_="rc.x";n[0]<e[0]?x=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(_=`imod(rc.x, ${e[0]})`),this.userCode=`
      ${f}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${x};
        int batchB = ${_};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${y}

        setOutput(result);
      }
    `}};var hB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},$_=class{constructor(n,e,i){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=T.assertAndGetBroadcastShape(e,i),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${n}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var Bie="return a * b;";function V_(t){let{inputs:n,backend:e}=t,{a:i,b:r}=n,o=T.upcastType(i.dtype,r.dtype);if(i.dtype==="complex64"){let a=e.texData.get(i.dataId),l=e.texData.get(r.dataId),c=new $_(hB.REAL,i.shape,r.shape),u=new $_(hB.IMAG,i.shape,r.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:i.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:r.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:r.shape}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),m=oo({inputs:{real:p,imag:h},backend:e});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),m}if(e.shouldExecuteOnCPU([i,r])){let a=e.texData.get(i.dataId),l=e.texData.get(r.dataId),[c,u]=Yne(i.shape,r.shape,a.values,l.values,o),d=e.makeTensorInfo(u,o),p=e.texData.get(d.dataId);return p.values=c,d}let s;return G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Ao(Bie,i.shape,r.shape):s=new ro(Bie,i.shape,r.shape),e.runWebGLProgram(s,[i,r],o)}var zie={kernelName:xc,backendName:"webgl",kernelFunc:V_};function Gie(t,n,e){let i=[tp(t.shape),...np(t.shape)],r={dtype:t.dtype,shape:i,dataId:t.dataId},o=[tp(n),...np(n)],s=new Rb(o,i),a=!0,l=[i],c=e.runWebGLProgram(s,[r],t.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}function me(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{shape:o}=i,s=e,a=v.sizeFromShape(r.shape),l=v.inferFromImplicitShape(o,a),c=v.sizeFromShape(l);v.assert(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${r.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let u=s.texData.get(r.dataId);return u.isPacked&&!Tm(r.shape,l)&&!(u.texture!==null&&Tm(u.shape,l))?Gie(r,l,s):(s.incRef(r.dataId),{dataId:r.dataId,shape:l,dtype:r.dtype})}var Uie={kernelName:Td,backendName:"webgl",kernelFunc:me};var B_=class{constructor(n,e){this.variableNames=["x"];let{windowSize:i,batchSize:r,inSize:o,outSize:s}=n;this.outputShape=[r,s];let a=Math.floor(i/4)*4,l=i%4,c="sumValue += dot(values, ones);";if(e!=null){let d=1/e;c=`sumValue += dot(values * ${v.isInt(d)?d.toPrecision(2):d}, ones);`}let u="";o%i>0&&(u=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var WI=class{constructor(n,e){this.variableNames=["x"];let{windowSize:i,batchSize:r,inSize:o,outSize:s}=n;this.outputShape=[r,s];let a="0.0",l="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",l="min"):e==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");let u=Math.floor(i/4)*4,d=i%4,p=`
      if (${e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${e==="min"} || ${e==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";e==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";o%i>0&&(m=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function iVe(t){let n=[];for(;n.length===0||n[n.length-1].outSize!==1;){let e=n.length?n[n.length-1].outSize:t[1],i=T.computeOptimalWindowSize(e);n.push({inSize:e,windowSize:i,outSize:Math.ceil(e/i)})}return n}function Mo(t,n,e,i){let r=iVe(t.shape),o=t;for(let s=0;s<r.length;s++){let{inSize:a,windowSize:l,outSize:c}=r[s],u,d;e==="mean"?u=s===0?new B_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new B_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new WI({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),d=o,o=i.runWebGLProgram(u,[o],n),d.dataId!==t.dataId&&i.disposeIntermediateTensorInfo(d)}return o}var jI=class{constructor(n,e){this.variableNames=["A"];let i=new Array(n.length);for(let s=0;s<i.length;s++)i[s]=n[e[s]];this.outputShape=i,this.rank=i.length;let r=pt(this.rank),o=rVe(e);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}};function rVe(t){let n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],i=new Array(n);for(let r=0;r<t.length;r++)i[t[r]]=e[r];return i.join()}var qI=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let i=new Array(n.length);for(let u=0;u<i.length;u++)i[u]=n[e[u]];if(this.outputShape=i,this.rank=i.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=pt(this.rank),o=aB("rc",this.rank),s=new Array(this.rank);for(let u=0;u<e.length;u++)s[e[u]]=o[u];let a=`vec2(${s.slice(-2).join()})`,l=`++${o[this.rank-1]} < ${i[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${i[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function ip(t,n,e){let i=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qI(t.shape,n):new jI(t.shape,n);return e.runWebGLProgram(i,[t],t.dtype)}function Hie(t,n,e,i){let r=n,o=t.shape.length,s=v.parseAxisParam(r,t.shape),a=s,l=T.getAxesPermutation(a,o),c=l!=null,u=t;c&&(u=ip(t,l,i),a=T.getInnerMostAxes(a.length,o)),T.assertAxesAreInnerMostDims("sum",a,o);let[d,p]=T.computeOutAndReduceShapes(u.shape,a),h=d;e&&(h=T.expandShapeToKeepDim(d,s));let m=v.sizeFromShape(p),f=v.sizeFromShape(t.shape)/m,y=me({inputs:{x:u},attrs:{shape:[f,m]},backend:i}),b=Uh(t.dtype),x=Mo(y,b,"sum",i),_=me({inputs:{x},attrs:{shape:h},backend:i});return i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(x),c&&i.disposeIntermediateTensorInfo(u),_}function Im(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;return Hie(r,o,s,e)}var Wie={kernelName:Ad,backendName:"webgl",kernelFunc:Im};function Dn(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{perm:o}=i,s=e,a=r.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=r.shape[o[u]];let c;if(s.shouldExecuteOnCPU([r])){let d=s.texData.get(r.dataId).values,p=Em(d,r.shape,r.dtype,o,l);c=s.makeTensorInfo(l,r.dtype);let h=s.texData.get(c.dataId);h.values=p}else c=ip(r,o,s);return c}var jie={kernelName:Wa,backendName:"webgl",kernelFunc:Dn};var mB=1e3;function Dm({a:t,b:n,transposeA:e,transposeB:i,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let c=t.shape.length,u=n.shape.length,d=e?t.shape[c-2]:t.shape[c-1],p=i?n.shape[u-1]:n.shape[u-2],h=e?t.shape[c-1]:t.shape[c-2],m=i?n.shape[u-2]:n.shape[u-1],g=t.shape.slice(0,-2),f=n.shape.slice(0,-2),y=v.sizeFromShape(g),b=v.sizeFromShape(f),_=Co.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([h,m]);v.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${i} must match.`);let w=e?[y,d,h]:[y,h,d],C=i?[b,m,p]:[b,p,m],k=me({inputs:{x:t},backend:r,attrs:{shape:w}}),N=me({inputs:{x:n},backend:r,attrs:{shape:C}}),P=[k,N],F=Math.max(y,b),z=e?k.shape[1]:k.shape[2],Y=o!=null,K=s!=null,Z=l==="leakyrelu",te=l!=null?ou(l,!0):null,U=Y||K||Z||te!=null,j;if((h===1||m===1)&&z>mB&&U===!1){let Q=k,oe=N;e&&(Q=Dn({inputs:{x:k},backend:r,attrs:{perm:[0,2,1]}}),P.push(Q)),i&&(oe=Dn({inputs:{x:N},backend:r,attrs:{perm:[0,2,1]}}),P.push(oe));let se=m!==1,ue=m===1,fe=Q;se&&(fe=me({inputs:{x:Q},backend:r,attrs:{shape:[F,z,1]}}),P.push(fe));let ge=m===1?2:1,xe=oe;ue&&(xe=me({inputs:{x:oe},backend:r,attrs:{shape:[F,1,z]}}),P.push(xe));let De=V_({inputs:{a:fe,b:xe},backend:r});j=Im({inputs:{x:De},backend:r,attrs:{axis:ge,keepDims:!0}}),P.push(De)}else{let Q=ii(t.dtype,n.dtype),oe=new Lb(w,C,[F,h,m],e,i,Y,te,K,Z),se=[k,N];if(o!=null&&se.push(o),K&&se.push(s),Z){let ue=r.makeTensorInfo([],"float32",v.createScalarValue(a,"float32"));se.push(ue),P.push(ue)}j=r.runWebGLProgram(oe,se,Q)}let q=me({inputs:{x:j},backend:r,attrs:{shape:_}});P.push(j);for(let Q of P)r.disposeIntermediateTensorInfo(Q);return q}function oVe(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i;return Dm({a:r,b:o,transposeA:l,transposeB:c,backend:e,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}var qie={kernelName:Fh,backendName:"webgl",kernelFunc:oVe};var Xie="return abs(x);";function sVe(t){let{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])&&i.dtype!=="complex64"){let o=e.texData.get(i.dataId),s=VI(o.values);return e.makeTensorInfo(i.shape,i.dtype,s)}let r;return G().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new io(i.shape,Xie):r=new Ui(i.shape,Xie),e.runWebGLProgram(r,[i],i.dtype)}var Kie={kernelName:Wu,backendName:"webgl",kernelFunc:sVe};var aVe=di+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,lVe=ze({opSnippet:aVe}),Yie={kernelName:jl,backendName:"webgl",kernelFunc:lVe};var cVe=di+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,uVe=ze({opSnippet:cVe}),Qie={kernelName:ql,backendName:"webgl",kernelFunc:uVe};var Zie="return a + b;",dVe=Zt({opSnippet:Zie,packedOpSnippet:Zie,supportsComplex:!0,cpuKernelImpl:Dne}),Jie={kernelName:Ks,backendName:"webgl",kernelFunc:dVe};var XI=class{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((o,s)=>`T${s}`);let i=[];this.variableNames.forEach(o=>{i.push(`float v${o} = get${o}AtOutCoords();`)});let r=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        float result = ${r};
        setOutput(result);
      }
    `}};var KI=class{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((o,s)=>`T${s}`);let i=[];this.variableNames.forEach(o=>{i.push(`vec4 v${o} = get${o}AtOutCoords();`)});let r=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        vec4 result = ${r};
        setOutput(result);
      }
    `}};function YI(t){let{inputs:n,backend:e}=t,i=n;if(i.length===1)return qn({inputs:{x:i[0]},backend:e});if(i.length>G().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let l=Math.floor(i.length/2),c=YI({inputs:i.slice(0,l),backend:e}),u=YI({inputs:i.slice(l),backend:e});return YI({inputs:[c,u],backend:e})}let r=i.map(l=>l.dtype).reduce((l,c)=>ii(l,c)),o=i.map(l=>l.shape),a=G().getBool("WEBGL_PACK")?new KI(i[0].shape,o):new XI(i[0].shape,o);return e.runWebGLProgram(a,i,r)}var ere={kernelName:Gg,backendName:"webgl",kernelFunc:YI};function pVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=v.parseAxisParam(o,r.shape),c=l,u=T.getAxesPermutation(c,a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),c=T.getInnerMostAxes(c.length,a)),T.assertAxesAreInnerMostDims("all",c,a);let[p,h]=T.computeOutAndReduceShapes(d.shape,c),m=v.sizeFromShape(h),g=me({inputs:{x:d},backend:e,attrs:{shape:[-1,m]}}),f=Mo(g,g.dtype,"all",e),y;if(s){let b=T.expandShapeToKeepDim(p,l);y=me({inputs:{x:f},backend:e,attrs:{shape:b}})}else y=me({inputs:{x:f},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),u!=null&&e.disposeIntermediateTensorInfo(d),y}var tre={kernelName:Ug,backendName:"webgl",kernelFunc:pVe};function hVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=v.parseAxisParam(o,r.shape),c=l,u=T.getAxesPermutation(c,a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),c=T.getInnerMostAxes(c.length,a)),T.assertAxesAreInnerMostDims("any",c,a);let[p,h]=T.computeOutAndReduceShapes(d.shape,c),m=v.sizeFromShape(h),g=me({inputs:{x:d},backend:e,attrs:{shape:[-1,m]}}),f=Mo(g,g.dtype,"any",e),y;if(s){let b=T.expandShapeToKeepDim(p,l);y=me({inputs:{x:f},backend:e,attrs:{shape:b}})}else y=me({inputs:{x:f},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),u!=null&&e.disposeIntermediateTensorInfo(d),y}var nre={kernelName:Hg,backendName:"webgl",kernelFunc:hVe};var QI=class{constructor(n,e,i){this.variableNames=["A"];let{windowSize:r,batchSize:o,outSize:s}=n;i||this.variableNames.push("bestIndicesA"),this.outputShape=[o,s];let a=e==="max"?">":"<",l=i?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};var ZI=class{constructor(n,e,i,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,v.assert(n.length>2,()=>`Packed arg${i.charAt(0).toUpperCase()+i.slice(1)} supports only inputs with rank above 2.`);let o=n[n.length-1],s=Math.ceil(o/e);this.outputShape=n.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");let a=this.outputShape,l=a.length,c=pt(l),u=jn("coords",l),d,p;if(s===1){p=l+1;let N=pt(p);d=`
        ${N} sourceLocR = ${N}(${u.join()}, 0);
        ++${u[l-1]};
        ${N} sourceLocG = ${N}(${u.join()}, 0);
        ++${u[l-2]};
        ${N} sourceLocA = ${N}(${u.join()}, 0);
        --${u[l-1]};
        ${N} sourceLocB = ${N}(${u.join()}, 0);
        --${u[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),m="."+h[p-1],g=h.map(N=>"int "+N),f=jn("sourceLocR",p-1).concat("inIdx.r"),y=jn("sourceLocG",p-1).concat("inIdx.g"),b=jn("sourceLocB",p-1).concat("inIdx.b"),x=jn("sourceLocA",p-1).concat("inIdx.a"),_=i==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${f.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${x.join()})));`,C=`vec4(
            getAChannel(${f.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${x.join()}) : 0.)`,k=r?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${k}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${C};

        for (int i = 0; i < ${e}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${C};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function ire(t,n,e,i=null){let r=n.shape[0],o=n.shape[1];i!=null&&(r=i.shape[0],o=i.shape[1]);let s=T.computeOptimalWindowSize(o),a={windowSize:s,inSize:o,batchSize:r,outSize:Math.ceil(o/s)},l=new QI(a,e,i==null),c=[n];i!=null&&c.push(i);let u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;let d=ire(t,n,e,u);return t.disposeIntermediateTensorInfo(u),d}function rre(t,n,e,i=null){let r=i!=null?i.shape:n.shape,o=r[r.length-1],s=T.computeOptimalWindowSize(o),a=new ZI(r,s,e,i==null),l=i==null?[n]:[n,i],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===n.shape.length){let u=rre(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function JI(t,n,e,i){let r=[e];if(T.assertAxesAreInnerMostDims("arg"+i.charAt(0).toUpperCase()+i.slice(1),r,n.shape.length),!G().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){let o=[],s=t.texData.get(n.dataId),a=s!==null&&s.isPacked,l=n;a&&(l=t.unpackTensor(n),o.push(l));let[c,u]=T.computeOutAndReduceShapes(l.shape,r),d=v.sizeFromShape(u),p=me({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});o.push(p);let h=ire(t,p,i);o.push(h);let m=me({inputs:{x:h},backend:t,attrs:{shape:c}});return o.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return rre(t,n,i)}function mVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i,s=v.parseAxisParam(o,r.shape),a=T.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Dn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),T.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=JI(e,l,s[0],"max");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var ore={kernelName:ju,backendName:"webgl",kernelFunc:mVe};function fVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i,s=v.parseAxisParam(o,r.shape),a=T.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Dn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=T.getInnerMostAxes(s.length,l.shape.length)),T.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=JI(e,l,s[0],"min");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var sre={kernelName:qu,backendName:"webgl",kernelFunc:fVe};var gVe=di+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,yVe=ze({opSnippet:gVe}),are={kernelName:Xl,backendName:"webgl",kernelFunc:yVe};var bVe=di+"return log(x + sqrt(x * x + 1.0));",xVe=ze({opSnippet:bVe}),lre={kernelName:Kl,backendName:"webgl",kernelFunc:xVe};var vVe=di+`
  return atan(x);
`,_Ve=ze({opSnippet:vVe}),cre={kernelName:Yl,backendName:"webgl",kernelFunc:_Ve};var wVe=Fb+`
  return atan(a, b);
`,CVe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+No+`
  return result;
`,TVe=Zt({opSnippet:wVe,packedOpSnippet:CVe}),ure={kernelName:Zl,backendName:"webgl",kernelFunc:TVe};var SVe=di+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,kVe=ze({opSnippet:SVe}),dre={kernelName:Ql,backendName:"webgl",kernelFunc:kVe};var ua=class{constructor(n,e,i,r=!1,o=!1){if(this.variableNames=["x"],e==="avg"&&i)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left;this.outputShape=n.outShape;let g=e==="avg",f=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,y=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`,b="0.0";if(g||(b="-1.0 / 1e-20"),i){let N=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?o?f:y:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let x="max",_=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(_="avgValue / max(count, 1.0)");let w=Math.floor(s/4)*4,C=s%4,k=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${x}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${k}
          }

          int xC = xCCorner + ${w};
          if (${C===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${C===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${k}
          } else if (${C===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${k}
          }
        }
        setOutput(${_});
      }
    `}},rp=class{constructor(n,e,i,r=!1,o=!1){if(this.variableNames=["x"],e==="avg"&&i)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,d=n.dilationHeight,p=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,g=n.effectiveFilterWidth,f=n.padInfo.front,y=n.padInfo.top,b=n.padInfo.left;this.outputShape=n.outShape;let x=e==="avg",_="0.0";if(x||(_="-1.0 / 1e-20"),i){let F=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${f}, ${y}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${n.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${F} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?o?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let w="max",C=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(C="avgValue / max(count, 1.0)");let k=Math.floor(s/4)*4,N=s%4,P=`
      if (${x}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${f}, ${y}, ${b});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${k}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${P}
            }

            int xC = xCCorner + ${k};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${P}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${P}
            }
          }
        }
        setOutput(${C});
      }
    `}};function EVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;ol(r,"avgPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;v.assert(T.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=T.computePool2DInfo(r.shape,o,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&v.arraysEqual(u.inShape,u.outShape))return qn({inputs:{x:r},backend:e});let d=new ua(u,"avg",!1);return e.runWebGLProgram(d,[r],"float32")}var pre={kernelName:Xu,backendName:"webgl",kernelFunc:EVe};function IVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=i,u=[1,1,1],d=T.computePool3DInfo(r.shape,o,s,u,a,l,c),p=new rp(d,"avg",!1);return e.runWebGLProgram(p,[r],"float32")}var hre={kernelName:Ku,backendName:"webgl",kernelFunc:IVe};var eD=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterHeight,i=n.filterWidth,r=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,u=l-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*i);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},tD=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterDepth,i=n.filterHeight,r=n.filterWidth,o=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,m=d-1-n.padInfo.front,g=p-1-n.padInfo.top,f=h-1-n.padInfo.left,y=1/(e*i*r);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${f});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function DVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,d=[1,1,1],p=T.computePool3DInfo(s.shape,a,l,d,c,u),h=new tD(p);return e.runWebGLProgram(h,[r],s.dtype)}var mre={kernelName:jg,backendName:"webgl",kernelFunc:DVe};function AVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o;ol([r,o],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=i,u=T.computePool2DInfo(s.shape,a,l,1,c),d=new eD(u);return e.runWebGLProgram(d,[r],s.dtype)}var fre={kernelName:Wg,backendName:"webgl",kernelFunc:AVe};function NVe(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o}=n,{transposeA:s,transposeB:a}=i;return Dm({a:r,b:o,transposeA:s,transposeB:a,backend:e})}var gre={kernelName:Yu,backendName:"webgl",kernelFunc:NVe};var nD=class{constructor(n,e,i,r,o,s){this.outputShape=[],this.variableNames=["x","mean","variance"],T.assertAndGetBroadcastShape(n,e),T.assertAndGetBroadcastShape(n,i);let a="0.0";r!=null&&(T.assertAndGetBroadcastShape(n,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";o!=null&&(T.assertAndGetBroadcastShape(n,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};var iD=class{constructor(n,e,i,r,o,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],T.assertAndGetBroadcastShape(n,e),T.assertAndGetBroadcastShape(n,i);let a="vec4(0.0)";r!=null&&(T.assertAndGetBroadcastShape(n,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";o!=null&&(T.assertAndGetBroadcastShape(n,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var MVe=({inputs:t,backend:n,attrs:e})=>{let{x:i,mean:r,variance:o,offset:s,scale:a}=t;v.assert(r.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),v.assert(s==null||r.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),v.assert(a==null||r.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;l==null&&(l=.001);let c=[i,r,o],u=null;s!=null&&(u=s.shape,c.push(s));let d=null;a!=null&&(d=a.shape,c.push(a));let p=G().getBool("WEBGL_PACK_NORMALIZATION")?new iD(i.shape,r.shape,o.shape,u,d,l):new nD(i.shape,r.shape,o.shape,u,d,l);return n.runWebGLProgram(p,c,c[0].dtype)},yre={kernelName:ad,backendName:"webgl",kernelFunc:MVe};var rD=class{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;let e=pt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let i=OVe(this.rank),r,o=n.map((s,a)=>`sourceLoc.${fB[a]} = start[${a}] + coords.${fB[a]};`);r=`
        ${e} sourceLoc;
        ${e} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${r}
        setOutput(getSource(${i}));
      }
    `}},fB=["x","y","z","w","u","v"];function OVe(t){if(t===1)return"sourceLoc";if(t<=6)return fB.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var oD=class{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let e=pt(this.rank),i=jn("coords",this.rank),r=jn("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${o})`,a=`
      result.x = ${s};
      if (++${i[this.rank-1]} < ${n[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${s};
        --${r[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${i[this.rank-1]};
      if (++${i[this.rank-2]} < ${n[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${s};
        if (++${i[this.rank-1]} < ${n[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${e}(${n.map((u,d)=>`start[${d}]`).join()});`:n.map((u,d)=>`${r[d]} = ${i[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        ${e} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}};function RVe(t,n,e,i){let r=i.texData.get(t.dataId),o=i.makeTensorInfo(e,t.dtype),s=i.texData.get(o.dataId);Object.assign(s,r),s.refCount=1,s.shape=e,s.dtype=t.dtype;let a=ki.computeFlatOffset(n,v.computeStrides(t.shape));r.slice&&(a+=r.slice.flatOffset),s.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||t.dataId};let l=i.dataRefCount.get(s.slice.origDataId)||1;return i.dataRefCount.set(s.slice.origDataId,l+1),o}function da(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,size:s}=i,[a,l]=ki.parseSliceParams(r,o,s);if(ki.assertParamsValid(r,a,l),v.sizeFromShape(l)===0)return e.makeTensorInfo(l,r.dtype,[]);if(e.shouldExecuteOnCPU([r])||r.dtype==="string"){let d=e.texData.get(r.dataId),p=aie(d.values,a,l,r.shape,r.dtype);return e.makeTensorInfo(l,r.dtype,p)}let{isPacked:c}=e.texData.get(r.dataId),u=ki.isSliceContinous(r.shape,a,l);if(c||!u){let d=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oD(l):new rD(l),p=[a];return e.runWebGLProgram(d,[r],r.dtype,p)}return e.uploadToGPU(r.dataId),RVe(r,a,l,e)}var bre={kernelName:Dd,backendName:"webgl",kernelFunc:da};var FVe=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,crops:s}=i;v.assert(r.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=o.reduce((b,x)=>b*x),l=T.getReshaped(r.shape,o,a),c=T.getPermuted(l.length,o.length),u=T.getReshapedPermuted(r.shape,o,a),d=T.getSliceBeginCoords(s,o.length),p=T.getSliceSize(u,s,o.length),h=[],m=me({inputs:{x:r},backend:e,attrs:{shape:l}}),g=Dn({inputs:{x:m},backend:e,attrs:{perm:c}}),f=me({inputs:{x:g},backend:e,attrs:{shape:u}}),y=da({inputs:{x:f},backend:e,attrs:{begin:d,size:p}});return h.push(m),h.push(g),h.push(f),h.forEach(b=>e.disposeIntermediateTensorInfo(b)),y},xre={kernelName:Qu,backendName:"webgl",kernelFunc:FVe};function LVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s}=i,a=e.readSync(r.dataId),l=e.readSync(o.dataId),c=$I(a,l,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,c)}var vre={kernelName:qg,backendName:"webgl",kernelFunc:LVe};var PVe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,$Ve=`
  return float(int(a.r) & int(b.r));
`;function VVe(t){let{inputs:n,backend:e}=t,{a:i,b:r}=n,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=G().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([i,r])||s===1){let l=e.texData.get(i.dataId).values,c=e.texData.get(r.dataId).values,[u,d]=Nne(i.shape,r.shape,l,c,i.dtype),p=e.makeTensorInfo(d,i.dtype),h=e.texData.get(p.dataId);return h.values=u,p}let a;return o?a=new Ao(PVe,i.shape,r.shape,!1):a=new ro($Ve,i.shape,r.shape),e.runWebGLProgram(a,[i,r],i.dtype)}var _re={kernelName:S0,backendName:"webgl",kernelFunc:VVe};function BVe(t){let{inputs:n,backend:e}=t,{s0:i,s1:r}=n,o=e.readSync(i.dataId),s=e.readSync(r.dataId),a=T.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var wre={kernelName:q1,backendName:"webgl",kernelFunc:BVe};var zVe="return float(a != b);",gB=Zt({opSnippet:zVe,cpuKernelImpl:Zne,dtype:"bool"}),Cre={kernelName:Rh,backendName:"webgl",kernelFunc:gB};function su(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.texData.get(i.dataId);return qn({inputs:{x:r.complexTensorInfos.real},backend:e})}var Tre={kernelName:by,backendName:"webgl",kernelFunc:su};var GVe="return float(int(x));";function Sre(t,n){let e=new Ui(t.shape,GVe),i=n.runWebGLProgram(e,[t],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}function yB(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dtype:o}=i;if(o==="complex64"){if(r.dtype==="complex64")return qn({inputs:{x:r},backend:e});let s=wn(r.shape),a=yB({inputs:{x:r},backend:e,attrs:{dtype:"float32"}}),l=oo({inputs:{real:a,imag:s},backend:e});return s.dispose(),e.disposeIntermediateTensorInfo(a),l}if(r.dtype==="complex64"){let s=su({inputs:{input:r},backend:e}),a=yB({inputs:{x:s},backend:e,attrs:{dtype:o}});return e.disposeIntermediateTensorInfo(s),a}if(!v.hasEncodingLoss(r.dtype,o)){let s=qn({inputs:{x:r},backend:e});return{dataId:s.dataId,shape:s.shape,dtype:o}}if(e.shouldExecuteOnCPU([r])){let s=e.texData.get(r.dataId).values,[a,l,c]=Mne(s,r.shape,r.dtype,o);return e.makeTensorInfo(a,l,c)}if(o==="int32")return Sre(r,e);if(o==="bool"){let s=e.makeTensorInfo([],"bool",v.getTypedArrayFromDType("bool",1)),l=gB({inputs:{a:r,b:s},backend:e});return e.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${r.dtype} to ${o}`)}var kre={kernelName:Ga,backendName:"webgl",kernelFunc:yB};var Ere="return ceil(x);",UVe=ze({opSnippet:Ere,packedOpSnippet:Ere,cpuKernelImpl:One}),Ire={kernelName:Jl,backendName:"webgl",kernelFunc:UVe};var sD=class{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var aD=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function HVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{clipValueMin:o,clipValueMax:s}=i,a;G().getBool("WEBGL_PACK_CLIP")?a=new aD(r.shape):a=new sD(r.shape);let l=[[o],[s]];return e.runWebGLProgram(a,[r],r.dtype,l)}var Dre={kernelName:ec,backendName:"webgl",kernelFunc:HVe};var lD=class{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function Are(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}function WVe(t){let{inputs:n,backend:e}=t,{x:i}=n,r=e.texData.get(i.dataId),o=new lD(i.shape),s=[Are(i,r.complexTensorInfos.real),Are(i,r.complexTensorInfos.imag)];return e.runWebGLProgram(o,s,s[0].dtype)}var Nre={kernelName:Zu,backendName:"webgl",kernelFunc:WVe};var cD=class{constructor(n){this.outputShape=[],this.outputShape=T.computeOutShape(n,1),this.variableNames=n.map((s,a)=>`T${a}`);let e=new Array(n.length-1);e[0]=n[0][1];for(let s=1;s<e.length;s++)e[s]=e[s-1]+n[s][1];let i=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<e.length;s++){let a=e[s-1];i.push(`else if (yC < ${e[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let r=e.length,o=e[e.length-1];i.push(`else setOutput(getT${r}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${i.join(`
        `)}
      }
    `}};var dD=class{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=T.computeOutShape(n,e);let i=this.outputShape,r=i.length,o=pt(r),s=jn("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map((g,f)=>`T${f}`);let l=new Array(n.length-1);l[0]=n[0][e];for(let g=1;g<l.length;g++)l[g]=l[g-1]+n[g][e];let c=a[e],u=a.slice(-2),d=a.join(),p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let g=1;g<l.length;g++){let f=l[g-1];p+=`
        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${uD(a,c,f)}),
            vec2(${uD(u,c,f)}));
        }`}let h=l.length,m=l[l.length-1];p+=`
        return getChannel(
          getT${h}(${uD(a,c,m)}),
          vec2(${uD(u,c,m)}));`,this.userCode=`
      float getValue(${a.map(g=>"int "+g)}) {
        ${p}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[r-1]} = ${s[r-1]} + 1;
        if (${s[r-1]} < ${i[r-1]}) {
          result.g = getValue(${s});
        }

        ${s[r-2]} = ${s[r-2]} + 1;
        if (${s[r-2]} < ${i[r-2]}) {
          result.a = getValue(${s});
        }

        ${s[r-1]} = ${s[r-1]} - 1;
        if (${s[r-2]} < ${i[r-2]} &&
            ${s[r-1]} < ${i[r-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function uD(t,n,e){let i=t.indexOf(n);return t.map((o,s)=>s===i?`${o} - ${e}`:o).join()}function Am(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.texData.get(i.dataId);return qn({inputs:{x:r.complexTensorInfos.imag},backend:e})}var Mre={kernelName:uy,backendName:"webgl",kernelFunc:Am};function Pb(t,n,e){let i=t[0].dtype;if(i==="complex64"){let h=t.map(b=>su({inputs:{input:b},backend:e})),m=t.map(b=>Am({inputs:{input:b},backend:e})),g=Pb(h,n,e),f=Pb(m,n,e),y=oo({inputs:{real:g,imag:f},backend:e});return h.forEach(b=>e.disposeIntermediateTensorInfo(b)),m.forEach(b=>e.disposeIntermediateTensorInfo(b)),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),y}let r=e.shouldExecuteOnCPU(t);if(i==="string"&&(r=!0),r){let h=t.map(_=>{let C=[-1,v.sizeFromShape(_.shape.slice(n))];return me({inputs:{x:_},backend:e,attrs:{shape:C}})}),m=h.map(_=>({vals:e.readSync(_.dataId),shape:_.shape})),g=T.computeOutShape(h.map(_=>_.shape),1),f=h[0].shape[0]===1,y=Rne(m,g,i,f),b=T.computeOutShape(t.map(_=>_.shape),n),x=e.makeTensorInfo(b,i,y);return h.forEach(_=>e.disposeIntermediateTensorInfo(_)),x}let o=t.filter(h=>v.sizeFromShape(h.shape)>0),s=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){let h=s?new Ui(t[0].shape,sl):new io(t[0].shape,sl);return e.runWebGLProgram(h,t,i)}let a=G().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){let h=[];for(let g=0;g<o.length;g+=a){let f=o.slice(g,g+a);h.push(Pb(f,n,e))}let m=Pb(h,n,e);for(let g of h)e.disposeIntermediateTensorInfo(g);return m}if(s){let h=new dD(o.map(m=>m.shape),n);return e.runWebGLProgram(h,o,i)}let{tensors2D:l,outShape:c}=jVe(o,n,e),u=new cD(l.map(h=>h.shape)),d=e.runWebGLProgram(u,l,i);l.forEach(h=>e.disposeIntermediateTensorInfo(h));let p=me({inputs:{x:d},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(d),p}function jVe(t,n,e){let i=T.computeOutShape(t.map(o=>o.shape),n);return{tensors2D:t.map(o=>me({inputs:{x:o},attrs:{shape:[-1,v.sizeFromShape(o.shape.slice(n))]},backend:e})),outShape:i}}function bB(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i,o=v.parseAxisParam(r,n[0].shape)[0],s=n.map(c=>c.shape);T.assertParamsConsistent(s,o);let a=T.computeOutShape(n.map(c=>c.shape),o);if(v.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(c=>v.sizeFromShape(c.shape)>0);return l.length===1?qn({inputs:{x:l[0]},backend:e}):Pb(l,o,e)}var Ore={kernelName:Ju,backendName:"webgl",kernelFunc:bB};var $b=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;let s=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,d=n.dilationWidth,p=n.filterHeight,h=n.filterWidth,m=Math.floor(n.inChannels/4)*4,g=n.inChannels%4,f=n.dataFormat==="channelsLast",y=f?1:2,b=f?2:3,x=f?3:1,_="",w="";i&&(r?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:o?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:_=`
          float activation(float x) {
            ${i}
          }
        `,w="result = activation(result);");let C=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${x}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${n.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${f}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${f}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${f}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${f}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${C}
        ${w}
        setOutput(result);
      }
    `}},pD=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let e=n.padInfo.front,i=n.padInfo.top,r=n.padInfo.left,o=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,h=n.filterWidth,m=Math.floor(n.inChannels/4)*4,g=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${s}, ${a});
      const ivec3 pads = ivec3(${e}, ${i}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};var Vb=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=rn(this.outputShape.length);let s=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,d=u,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let f=0;f<u;f++)p+=`
           vec4 xTexelC${f*2};
           int xTexelC${f*2}Ready;
           vec4 xTexelC${f*2+1};
           int xTexelC${f*2+1}Ready;
           vec4 xC${f};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {
       `;for(let f=0;f<u;f++)p+=`
           xTexelC${f*2} = vec4(0.0);
           xTexelC${f*2}Ready = 0;
           xTexelC${f*2+1} = vec4(0.0);
           xTexelC${f*2+1}Ready = 0;
           xC${f} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let f=0;f<(d+1)/2;f++){let y=f*2;if(p+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?p+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<u)){let b=s%2===0?v.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:p+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):b===1?p+=`
                     xC${y+1} = xTexelC${y};
                     `:p+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<u&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<u&&(p+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<u&&(p+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${n.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<u&&(p+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${n.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",m="";i&&(r?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${i}
         }`:o?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${i}
         }`:h=`vec4 activation(vec4 x) {
           ${i}
         }`,m="result = activation(result);");let g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}};var hD=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=rn(this.outputShape.length);let{dataFormat:i}=e,r=$n(),o=i==="channelsLast",s=o?1:2,a=o?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`,c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${r.output} = result;
      }
    `}};function mD(t,n){let e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&e===1&&t[0]>1?[t[0],1]:null}function fD({x:t,filter:n,convInfo:e,backend:i,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:a=null}){let l=t.shape,c=i.texData.get(t.dataId),u=e.inChannels,d=l[0]*l[1]*l[2],p=e.outChannels,h=e.dataFormat==="channelsLast",m=!1,g=!1,f,y=[];if(o!=null){let _=mD(o.shape,h);_!=null&&(o=me({inputs:{x:o},backend:i,attrs:{shape:_}}),y.push(o))}if(r!=null){let _=mD(r.shape,h);_!=null&&(r=me({inputs:{x:r},backend:i,attrs:{shape:_}}),y.push(r))}if(!((d===1||p===1)&&u>mB)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&v.arraysEqual(c.shape.slice(-3),l.slice(-3))){let _=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,_,e.inChannels],dtype:t.dtype},C=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,v.assert(Tm(c.shape,w.shape),()=>`packed reshape ${c.shape} to ${w.shape} isn't free`);let k=me({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}});y.push(k);let N=Dm({a:w,b:k,backend:i,transposeA:m,transposeB:g,bias:r,activation:a,preluActivationWeights:o,leakyreluAlpha:s}),P=i.texData.get(N.dataId);v.assert(P.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=C,P.shape=e.outShape,f=qn({inputs:{x:N},backend:i}),f.shape=e.outShape,y.push(N)}else{let _=e.outHeight*e.outWidth,w=me({inputs:{x:t},backend:i,attrs:{shape:h?[e.batchSize,_,e.inChannels]:[e.batchSize,e.inChannels,_]}}),C=me({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}}),k=Dm({a:h?w:C,b:h?C:w,transposeA:!h,transposeB:g,backend:i,bias:r,activation:a,preluActivationWeights:o,leakyreluAlpha:s});f=me({inputs:{x:k},backend:i,attrs:{shape:e.outShape}}),y.push(w),y.push(C),y.push(k)}for(let _ of y)i.disposeIntermediateTensorInfo(_);return f}function gD({x:t,filter:n,convInfo:e,backend:i,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:p,dataFormat:h}=e,m=h==="channelsLast",g=l*c*u,f=p*d,y=[e.batchSize,g,f],b=!0,x=!1,_=[];if(o!=null){let q=mD(o.shape,m);q!=null&&(o=me({inputs:{x:o},backend:i,attrs:{shape:q}}),_.push(o))}if(r!=null){let q=mD(r.shape,m);q!=null&&(r=me({inputs:{x:r},backend:i,attrs:{shape:q}}),_.push(r))}let w=me({inputs:{x:n},backend:i,attrs:{shape:[1,g,v.sizeFromShape(n.shape)/g]}});_.push(w);let C=new hD(y,e),k=[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]],N=i.runWebGLProgram(C,[t],"float32",k),P=me({inputs:{x:N},backend:i,attrs:{shape:y}});_.push(N),_.push(P);let F=r!=null,z=o!=null,Y=a==="leakyrelu",K=a?ou(a,!0):null,Z=new Lb(m?P.shape:w.shape,m?w.shape:P.shape,m?[e.batchSize,f,e.outChannels]:[e.batchSize,e.outChannels,f],b,x,F,K,z,Y),te=m?[P,w]:[w,P];if(r&&te.push(r),z&&te.push(o),Y){let q=i.makeTensorInfo([],"float32",v.createScalarValue(s,"float32"));te.push(q),_.push(q)}let U=i.runWebGLProgram(Z,te,"float32"),j=me({inputs:{x:U},backend:i,attrs:{shape:e.outShape}});_.push(U);for(let q of _)i.disposeIntermediateTensorInfo(q);return j}function qVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i,d=T.convertConv2DDataFormat(l),p=T.computeConv2DInfo(r.shape,o.shape,s,c,a,u,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=fD({x:r,filter:o,convInfo:p,backend:e});else if(p.strideWidth<=2&&d==="channelsLast"&&G().getBool("WEBGL_EXP_CONV")){let g=new Vb(p),f=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=e.runWebGLProgram(g,[r,o],"float32",f)}else if(G().getBool("WEBGL_CONV_IM2COL"))h=gD({x:r,filter:o,convInfo:p,backend:e});else{let g=new $b(p);h=e.runWebGLProgram(g,[r,o],"float32")}let m=me({inputs:{x:h},backend:e,attrs:{shape:p.outShape}});return e.disposeIntermediateTensorInfo(h),m}var Rre={kernelName:ed,backendName:"webgl",kernelFunc:qVe};var yD=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,i=n.strideWidth,r=n.padInfo.top,o=n.padInfo.left,s=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${r};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${o};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},bD=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,i=n.filterWidth,r=n.strideHeight,o=n.strideWidth,s=n.dataFormat==="channelsLast",a=e-1-n.padInfo.top,l=i-1-n.padInfo.left,c=s?1:2,u=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},xD=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideDepth,i=n.strideHeight,r=n.strideWidth,o=n.padInfo.front,s=n.padInfo.top,a=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yF = 0; yF < ${n.outDepth}; yF++) {
            int xF = wF + yF * ${e} - ${o};

            if (xF < 0 || xF >= ${n.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${n.outHeight}; yR++) {
              int xR = wR + yR * ${i} - ${s};

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${n.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${a};

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},vD=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterDepth,i=n.filterHeight,r=n.filterWidth,o=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=e-1-n.padInfo.front,c=i-1-n.padInfo.top,u=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${e} - 1 - wF;

          for (int wR = 0; wR < ${i}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${i} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function XVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i,d=T.convertConv2DDataFormat(l),p=T.computeConv2DInfo(r.shape,u,s,1,a,c,!1,d),h=new yD(p);return e.runWebGLProgram(h,[r,o],"float32")}var Fre={kernelName:Kg,backendName:"webgl",kernelFunc:XVe};var _D=class{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=rn(this.outputShape.length);let e=n.filterHeight,i=n.filterWidth,r=e-1-n.padInfo.top,o=i-1-n.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            int wCPerm = ${i} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function KVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i,d=T.convertConv2DDataFormat(c),p=T.computeConv2DInfo(s,o.shape,a,1,l,u,!1,d);if(G().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],m=new _D(p);return e.runWebGLProgram(m,[r,o],"float32",h)}else{let h=new bD(p);return e.runWebGLProgram(h,[r,o],"float32")}}var Lre={kernelName:td,backendName:"webgl",kernelFunc:KVe};function YVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l}=i,c=T.computeConv3DInfo(r.shape,o.shape,s,l,a),u=new pD(c);return e.runWebGLProgram(u,[r,o],"float32")}var Pre={kernelName:nd,backendName:"webgl",kernelFunc:YVe};function QVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,filterShape:l}=i,c=T.computeConv3DInfo(r.shape,l,s,1,a),u=new xD(c);return e.runWebGLProgram(u,[r,o],"float32")}var $re={kernelName:Yg,backendName:"webgl",kernelFunc:QVe};function ZVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{pad:s,strides:a,inputShape:l}=i,c=T.computeConv3DInfo(l,o.shape,a,1,s),u=new vD(c);return e.runWebGLProgram(u,[r,o],"float32")}var Vre={kernelName:Qg,backendName:"webgl",kernelFunc:ZVe};var JVe=Ns+`
  return cos(x);
`,eBe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${No}
  return result;
`,tBe=ze({opSnippet:JVe,packedOpSnippet:eBe}),Bre={kernelName:tc,backendName:"webgl",kernelFunc:tBe};var nBe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,iBe=ze({opSnippet:nBe}),zre={kernelName:nc,backendName:"webgl",kernelFunc:iBe};var wD=class{constructor(n,e,i,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,l,c]=n,[u]=e,[d,p]=i;this.outputShape=[u,d,p,c];let h=r==="bilinear"?1:0,[m,g]=[`${a-1}.0`,`${l-1}.0`],[f,y,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[x,_,w]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${f});
      const float width_ratio = float(${x});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${_};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var rBe=t=>{let{inputs:n,backend:e,attrs:i}=t,{image:r,boxes:o,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=i,u=new wD(r.shape,o.shape,a,l,c);return e.runWebGLProgram(u,[r,o,s],"float32")},Gre={kernelName:Jg,backendName:"webgl",kernelFunc:rBe};var Bb=function(t){return t.Prod="*",t.Sum="+",t}(Bb||{}),z_=class{constructor(n,e,i,r){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let o=this.outputShape.length,s=this.op===Bb.Prod?"1.0":"0.0",a=i?s:`getX(${Ure(o,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1],c="",u="";i?(c=r?`end != ${l-1}`:"end != 0",u=r?"end + 1":"end - 1"):(c=r?`end + pow2 < ${l}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${pt(o)} coords = getOutputCoords();
        int end = ${Hre(o,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${Hre(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${Ure(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function Ure(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.x, ${n}.y`;if(t===3)return`${n}.x, ${n}.y, ${n}.z`;if(t===4)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function Hre(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.y`;if(t===3)return`${n}.z`;if(t===4)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function CD(t,n,e,i,r,o){let s=n.shape.length,a=T.getAxesPermutation([i],s),l=n;a!=null&&(l=Dn({inputs:{x:n},backend:e,attrs:{perm:a}}));let c=T.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${i}`);let u=l.shape[c],d=qn({inputs:{x:l},backend:e});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){let h=new z_(t,l.shape,!1,o),m=[[p]],g=d;d=e.runWebGLProgram(h,[d],d.dtype,m),e.disposeIntermediateTensorInfo(g)}if(r){let p=new z_(t,l.shape,r,o),h=d;d=e.runWebGLProgram(p,[d],d.dtype),e.disposeIntermediateTensorInfo(h)}if(a!=null){let p=T.getUndoAxesPermutation(a),h=Dn({inputs:{x:d},backend:e,attrs:{perm:p}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(l),h}return d}function oBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;return CD(Bb.Prod,r,e,o,s,a)}var Wre={kernelName:Zg,backendName:"webgl",kernelFunc:oBe};function sBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;return CD(Bb.Sum,r,e,o,s,a)}var jre={kernelName:id,backendName:"webgl",kernelFunc:sBe};function aBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s,binaryOutput:a}=i;if(r.shape.length===1){let l=e.readSync(r.dataId),c=e.readSync(o.dataId),u=$I(l,c,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,u)}else if(r.shape.length===2){let l=e.bufferSync(r),c=e.bufferSync(o),u=Ane(l,c,s,a);return e.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}var qre={kernelName:ey,backendName:"webgl",kernelFunc:aBe};var TD=class{constructor(n,e,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=i,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${e};
      int offset_h = imod(h, ${e});
      int in_w = w / ${e};
      int offset_w = imod(w, ${e});
      int offset_d = (offset_h * ${e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function lBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockSize:o,dataFormat:s}=i,a=r.shape[0],l=s==="NHWC"?r.shape[1]:r.shape[2],c=s==="NHWC"?r.shape[2]:r.shape[3],u=s==="NHWC"?r.shape[3]:r.shape[1],d=l*o,p=c*o,h=u/(o*o),m=s==="NHWC"?[a,d,p,h]:[a,h,d,p],g=new TD(m,o,s);return e.runWebGLProgram(g,[r],r.dtype)}var Xre={kernelName:ty,backendName:"webgl",kernelFunc:lBe};var zb=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=rn(this.outputShape.length);let s=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels,c="",u="";i&&(r?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:o?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:c=`
          float activation(float x) {
            ${i}
          }
        `,u="result = activation(result);");let d=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}};var Gb=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=rn(this.outputShape.length);let s=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,d=n.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let y=0;y<d;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(p+1)/2;y++){let b=y*2;if(h+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){let x=a%2===0?v.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${x};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:h+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):x===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${x};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",g="";i&&(r?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:o?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:m=`vec4 activation(vec4 x) {
          ${i}
        }`,g="result = activation(result);");let f=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${f}
        ${g}
        setOutput(result);
      }
    `}};function cBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=i,u=l;u==null&&(u=[1,1]),v.assert(T.eitherStridesOrDilationsAreOne(s,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let d=T.computeConv2DInfo(r.shape,o.shape,s,u,a,c,!0),p;G().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new Gb(d):p=new zb(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return e.runWebGLProgram(p,[r,o],"float32",h)}var Kre={kernelName:rd,backendName:"webgl",kernelFunc:cBe};var SD=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,i=n.strideWidth,r=n.padInfo.top,o=n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${r};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${o};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},kD=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,i=n.filterWidth,r=n.strideHeight,o=n.strideWidth,s=e-1-n.padInfo.top,a=i-1-n.padInfo.left,l=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function uBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i,d=T.computeConv2DInfo(r.shape,u,s,a,l,c,!0),p=new SD(d);return e.runWebGLProgram(p,[r,o],"float32")}var Yre={kernelName:ny,backendName:"webgl",kernelFunc:uBe};function dBe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i,d=T.computeConv2DInfo(u,o.shape,s,a,l,c,!0),p=new kD(d);return e.runWebGLProgram(p,[r,o],"float32")}var Qre={kernelName:iy,backendName:"webgl",kernelFunc:dBe};var ED=class{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function pBe(t){let{inputs:n,backend:e}=t,{x:i}=n,r=[...i.shape,...i.shape],o=v.sizeFromShape(i.shape),s=me({inputs:{x:i},backend:e,attrs:{shape:[o]}}),a=new ED(o),l=e.runWebGLProgram(a,[s],s.dtype),c=me({inputs:{x:l},backend:e,attrs:{shape:r}});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(l),c}var Zre={kernelName:X1,backendName:"webgl",kernelFunc:pBe};var ID=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let{inHeight:e,inWidth:i,padInfo:r,strideHeight:o,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:d,left:p}=r;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${s});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${e}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${i}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function hBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l}=i,c=T.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l),u,d=new ID(c);u=e.runWebGLProgram(d,[r,o],"float32");let p=me({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),p}var Jre={kernelName:od,backendName:"webgl",kernelFunc:hBe};function mBe(t){let{inputs:n,backend:e,attrs:i}=t,{equation:r}=i,o=n,{allDims:s,summedDims:a,idDims:l}=T.decodeEinsumEquation(r,o.length);T.checkEinsumDimSizes(s.length,l,o);let{path:c,steps:u}=T.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,m=[];for(let g=0;g<d;++g){for(let f of u[g]){let{permutationIndices:y,expandDims:b}=T.getEinsumPermutation(h,l[f]),x;T.isIdentityPermutation(y)?x=o[f]:(x=Dn({inputs:{x:o[f]},backend:e,attrs:{perm:y}}),m.push(x));let _=x.shape.slice();for(let w=0;w<b.length;++w)_.splice(b[w],0,1);v.arraysEqual(x.shape,_)||(x=me({inputs:{x},backend:e,attrs:{shape:_}}),m.push(x)),p===null?p=x:(p=V_({inputs:{a:x,b:p},backend:e}),m.push(p))}g<d-1&&(c[g]>=0&&(p=Im({inputs:{x:p},backend:e,attrs:{axis:c[g]-(s.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&e.disposeIntermediateTensorInfo(g);return p}var eoe={kernelName:ry,backendName:"webgl",kernelFunc:mBe};var fBe="return (x >= 0.0) ? x : (exp(x) - 1.0);",gBe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,yBe=ze({opSnippet:fBe,packedOpSnippet:gBe}),toe={kernelName:rc,backendName:"webgl",kernelFunc:yBe};var bBe="return (b >= 0.0) ? a : a * (b + 1.0);",xBe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,vBe=t=>{let{inputs:n,backend:e}=t,{dy:i,y:r}=n,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Ao(xBe,i.shape,r.shape):new ro(bBe,i.shape,r.shape);return e.runWebGLProgram(o,[i,r],i.dtype)},noe={kernelName:oy,backendName:"webgl",kernelFunc:vBe};var _Be=`
  return vec4(equal(a, b));
`,wBe="return float(a == b);",CBe=Zt({opSnippet:wBe,packedOpSnippet:_Be,dtype:"bool",cpuKernelImpl:Fne}),ioe={kernelName:Eh,backendName:"webgl",kernelFunc:CBe};var TBe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${T.ERF_P};
  float a1 = ${T.ERF_A1};
  float a2 = ${T.ERF_A2};
  float a3 = ${T.ERF_A3};
  float a4 = ${T.ERF_A4};
  float a5 = ${T.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,SBe=ze({opSnippet:TBe}),roe={kernelName:oc,backendName:"webgl",kernelFunc:SBe};var kBe=Ns+`
  return exp(x);
`,EBe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,xB=ze({opSnippet:kBe,packedOpSnippet:EBe,cpuKernelImpl:Lne,dtype:"float32"}),ooe={kernelName:sc,backendName:"webgl",kernelFunc:xB};function DD(t){let{inputs:n,attrs:e,backend:i}=t,{dim:r}=e,{input:o}=n,s=o.shape.length,a=o.shape.slice(),l=r;return r<0&&(v.assert(-(s+1)<=r,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+r+1),a.splice(l,0,1),me({inputs:{x:o},backend:i,attrs:{shape:a}})}var soe={kernelName:sd,backendName:"webgl",kernelFunc:DD};var aoe="return exp(x) - 1.0;",IBe=ze({opSnippet:aoe,packedOpSnippet:aoe,cpuKernelImpl:Pne}),loe={kernelName:ac,backendName:"webgl",kernelFunc:IBe};var G_=class{constructor(n,e,i){this.variableNames=["real","imag"];let r=e[1];this.outputShape=e;let o=i?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=i?`${r}.0`:"1.0",a;if(n==="real")a="return real * expR - imag * expI;";else if(n==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${r});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${r}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function AD(t,n,e){let i=e.texData.get(t.dataId),r=v.sizeFromShape(t.shape),o=t.shape[t.shape.length-1],s=r/o,a=me({inputs:{x:t},backend:e,attrs:{shape:[s,o]}}),l=a.shape,c=new G_("real",l,n),u=new G_("imag",l,n),d=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:l},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:l}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),m=oo({inputs:{real:p,imag:h},backend:e});e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h);let g=me({inputs:{x:m},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(m),g}function DBe(t){let{inputs:n,backend:e}=t,{input:i}=n;return AD(i,!1,e)}var coe={kernelName:sy,backendName:"webgl",kernelFunc:DBe};var ND=class{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function au(t){let{backend:n,attrs:e}=t,{shape:i,value:r}=e,{dtype:o}=e;if(o=o||v.inferDtype(r),o==="string"){let s=v.getArrayFromDType(o,v.sizeFromShape(i));return s.fill(r),n.makeTensorInfo(i,o,s)}else{let s=new ND(i,r),a=[[r]];return n.runWebGLProgram(s,[],o,a)}}var uoe={kernelName:ay,backendName:"webgl",kernelFunc:au};var MD=class{constructor(n){this.variableNames=["Image"],this.outputShape=[];let e=n[2];this.outputShape=n,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var doe={kernelName:ly,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{let{image:e}=t,i=n,r=new MD(e.shape);return i.runWebGLProgram(r,[e],e.dtype)}};var poe="return floor(x);",ABe=ze({opSnippet:poe,packedOpSnippet:poe,cpuKernelImpl:$ne}),hoe={kernelName:lc,backendName:"webgl",kernelFunc:ABe};var NBe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,MBe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,OBe=Zt({opSnippet:NBe,packedOpSnippet:MBe,dtype:"int32"}),moe={kernelName:cc,backendName:"webgl",kernelFunc:OBe};var OD=class{constructor(n){this.variableNames=["A"];let e=$n(),[i,r]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${i}.0);

        vec4 values = ${e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var RD=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let e=$n(),[i,r]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${i}.0);
            vec4 values = ${e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${e.output} = result;
      }
    `}};var foe={kernelName:pX,backendName:"webgl",kernelFunc:RBe},Ub,vB=G().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function RBe(t){let{inputs:n,backend:e,attrs:i}=t,{pixels:r}=n,{numChannels:o}=i,s=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,[l,c]=s?[r.videoWidth,r.videoHeight]:[r.width,r.height],u=[c,l],d=[c,l,o];if(a||s){let g=G().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ub==null||g!==vB)&&(vB=g,Ub=document.createElement("canvas").getContext("2d",{willReadFrequently:vB})),Ub.canvas.width=l,Ub.canvas.height=c,Ub.drawImage(r,0,0,l,c),r=Ub.canvas}let p=e.makeTensorInfo(u,"int32");e.texData.get(p.dataId).usage=gr.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(p.dataId),r);let h=G().getBool("WEBGL_PACK")?new RD(d):new OD(d),m=e.runWebGLProgram(h,[p],"int32");return e.disposeData(p.dataId),m}function FBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=i,g=T.convertConv2DDataFormat(u),f=T.computeConv2DInfo(r.shape,o.shape,l,d,c,p,!1,g),y,b=[],x=s!=null,_=a!=null,w=h==="leakyrelu",C=()=>{let N=[r,o],P=(F,z)=>{if(z==="NCHW"&&F.shape.length===1&&F.shape[0]!==1){let Y=me({inputs:{x:F},backend:e,attrs:{shape:[F.shape[0],1,1]}});return b.push(Y),Y}return F};if(x&&N.push(P(s,u)),_&&N.push(P(a,u)),w){let F=e.makeTensorInfo([],"float32",v.createScalarValue(m,"float32"));N.push(F),b.push(F)}return N};if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))y=fD({x:r,filter:o,convInfo:f,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:m});else if(f.strideWidth<=2&&g==="channelsLast"&&G().getBool("WEBGL_EXP_CONV")){let N=h?ou(h,!0):null,P=new Vb(f,x,N,_,w),F=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]],z=C();y=e.runWebGLProgram(P,z,"float32",F)}else if(G().getBool("WEBGL_CONV_IM2COL"))y=gD({x:r,filter:o,convInfo:f,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:m});else{let N=h?ou(h,!1):null,P=new $b(f,x,N,_,w),F=C();y=e.runWebGLProgram(P,F,"float32")}let k=me({inputs:{x:y},backend:e,attrs:{shape:f.outShape}});return b.push(y),b.forEach(N=>e.disposeIntermediateTensorInfo(N)),k}var goe={kernelName:Lh,backendName:"webgl",kernelFunc:FBe};function LBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=i,m=[],g=u;g==null&&(g=[1,1]),v.assert(T.eitherStridesOrDilationsAreOne(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);let f=T.computeConv2DInfo(r.shape,o.shape,l,g,c,d,!0),y=G().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1,b=p?ou(p,y):null,x=[r,o],_=s!=null,w=a!=null,C=p==="leakyrelu";if(_&&x.push(s),w&&x.push(a),C){let F=e.makeTensorInfo([],"float32",v.createScalarValue(h,"float32"));x.push(F),m.push(F)}let k;y?k=new Gb(f,_,b,w,C):k=new zb(f,_,b,w,C);let N=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]],P=e.runWebGLProgram(k,x,"float32",N);return m.forEach(F=>e.disposeIntermediateTensorInfo(F)),P}var yoe={kernelName:Ph,backendName:"webgl",kernelFunc:LBe};var FD=class{constructor(n,e,i,r){this.sliceDim=n,this.strides=e,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=i;let o=pt(i.length),s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function PBe(t){let{inputs:n,backend:e}=t,{params:i,indices:r}=n,o=r.shape,s=o[o.length-1],a=v.sizeFromShape(i.shape),[l,c,u,d]=T.prepareAndValidate(i,r),p=me({inputs:{x:r},backend:e,attrs:{shape:[c,s]}}),h=me({inputs:{x:i},backend:e,attrs:{shape:[v.sizeFromShape(i.shape)/u,u]}});if(e.shouldExecuteOnCPU([i,r])||i.dtype==="string"){let y=e.readSync(r.dataId),b=e.bufferSync(i),x=Vne(y,b,i.dtype,c,s,u,d,i.shape,a);return e.makeTensorInfo(l,i.dtype,x.values)}let m=new FD(s,d,[c,u],i.shape),g=e.runWebGLProgram(m,[h,p],h.dtype),f=me({inputs:{x:g},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(g),f}var boe={kernelName:K1,backendName:"webgl",kernelFunc:PBe};var LD=class{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;let i=pt(this.rank),r=$Be(n,2);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}};function $Be(t,n){let e=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let r=0;r<t.length;r++)r===2?i.push("index"):i.push(`${e[r]}`);return i.join()}function _B(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,indices:o}=n,{axis:s,batchDims:a}=i,l=v.parseAxisParam(s,r.shape)[0];if(G().get("DEBUG")){let b=e.readSync(o.dataId),x=r.shape[l];for(let _=0;_<b.length;++_){let w=b[_];v.assert(w<=x-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${x-1}]`)}}let c=T.segment_util.collectGatherOpShapeInfo(r,o,l,a),u=v.sizeFromShape(o.shape),d=[],p=me({inputs:{x:r},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=me({inputs:{x:o},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(p),d.push(h);let m=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let b=e.bufferSync(h),x=e.bufferSync(p),_=Bne(x,b,m);return d.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.makeTensorInfo(c.outputShape,_.dtype,_.values)}let g=new LD(p.shape,m),f=e.runWebGLProgram(g,[p,h],p.dtype);d.push(f);let y=me({inputs:{x:f},backend:e,attrs:{shape:c.outputShape}});return d.forEach(b=>e.disposeIntermediateTensorInfo(b)),y}var xoe={kernelName:ld,backendName:"webgl",kernelFunc:_B};var VBe="return float(a > b);",BBe=`
  return vec4(greaterThan(a, b));
`,zBe=Zt({opSnippet:VBe,packedOpSnippet:BBe,cpuKernelImpl:zne,dtype:"bool"}),voe={kernelName:Ih,backendName:"webgl",kernelFunc:zBe};var GBe="return float(a >= b);",UBe=`
  return vec4(greaterThanEqual(a, b));
`,HBe=Zt({opSnippet:GBe,packedOpSnippet:UBe,dtype:"bool",cpuKernelImpl:Gne}),_oe={kernelName:uc,backendName:"webgl",kernelFunc:HBe};function WBe(t){let{inputs:n,backend:e}=t,{input:i}=n;return AD(i,!0,e)}var woe={kernelName:cy,backendName:"webgl",kernelFunc:WBe};var jBe="return float(!isnan(x) && !isinf(x));",qBe=ze({opSnippet:jBe,dtype:"bool"}),Coe={kernelName:dc,backendName:"webgl",kernelFunc:qBe};var XBe="return float(isinf(x));",KBe=ze({opSnippet:XBe,dtype:"bool"}),Toe={kernelName:pc,backendName:"webgl",kernelFunc:KBe};var YBe="return float(isnan(x));",QBe=ze({opSnippet:YBe,dtype:"bool"}),Soe={kernelName:hc,backendName:"webgl",kernelFunc:QBe};var ZBe="return float(a < b);",JBe=`
  return vec4(lessThan(a, b));
`,e3e=Zt({opSnippet:ZBe,packedOpSnippet:JBe,cpuKernelImpl:Une,dtype:"bool"}),koe={kernelName:Dh,backendName:"webgl",kernelFunc:e3e};var t3e="return float(a <= b);",n3e=`
  return vec4(lessThanEqual(a, b));
`,i3e=Zt({opSnippet:t3e,packedOpSnippet:n3e,cpuKernelImpl:Hne,dtype:"bool"}),Eoe={kernelName:Ah,backendName:"webgl",kernelFunc:i3e};function r3e(t){let{backend:n,attrs:e}=t,{start:i,stop:r,num:o}=e,s=Wne(i,r,o);return n.makeTensorInfo([s.length],"float32",s)}var Ioe={kernelName:Y1,backendName:"webgl",kernelFunc:r3e};var o3e=Ns+`
  return x < 0.0 ? 0./0. : log(x);
`,s3e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,a3e=ze({opSnippet:o3e,packedOpSnippet:s3e,cpuKernelImpl:jne}),Doe={kernelName:mc,backendName:"webgl",kernelFunc:a3e};var l3e=Ns+`
  return log(1.0 + x);
`,c3e=ze({opSnippet:l3e}),Aoe={kernelName:fc,backendName:"webgl",kernelFunc:c3e};var u3e="return float(a >= 1.0 && b >= 1.0);",d3e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,p3e=Zt({opSnippet:u3e,packedOpSnippet:d3e,dtype:"bool"}),Noe={kernelName:Nh,backendName:"webgl",kernelFunc:p3e};var h3e="return float(!(x >= 1.0));",m3e=ze({opSnippet:h3e}),Moe={kernelName:Mh,backendName:"webgl",kernelFunc:m3e};var f3e="return float(a >= 1.0 || b >= 1.0);",g3e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,y3e=Zt({opSnippet:f3e,packedOpSnippet:g3e,dtype:"bool"}),Ooe={kernelName:Oh,backendName:"webgl",kernelFunc:y3e};var PD=class{constructor(n,e,i,r,o){this.variableNames=["x"],this.outputShape=[];let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${i}) + float(${r}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};var $D=class{constructor(n,e,i,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${i}) + float(${r}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}};var b3e=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{depthRadius:o,bias:s,alpha:a,beta:l}=i,c=G().getBool("WEBGL_PACK_NORMALIZATION")?new $D(r.shape,o,s,a,l):new PD(r.shape,o,s,a,l);return e.runWebGLProgram(c,[r],r.dtype)},Roe={kernelName:ud,backendName:"webgl",kernelFunc:b3e};var VD=class{constructor(n,e,i,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=i,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${i});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var x3e=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r,y:o,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i,d=new VD(r.shape,a,l,c,u);return e.runWebGLProgram(d,[r,o,s],r.dtype)},Foe={kernelName:dy,backendName:"webgl",kernelFunc:x3e};function Loe(t,n,e,i){let r=v.sizeFromShape(n),s=v.sizeFromShape(t.shape)/r,a=me({inputs:{x:t},attrs:{shape:[s,r]},backend:i}),l=Mo(a,t.dtype,"max",i),c=me({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}function wB(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reductionIndices:o,keepDims:s}=i,a=r.shape.length,l=v.parseAxisParam(o,r.shape),c=l,u=T.getAxesPermutation(c,a),d=u!=null,p=e.shouldExecuteOnCPU([r]),h=r;if(d){if(p){let x=e.texData.get(h.dataId).values,_=new Array(a);for(let k=0;k<_.length;k++)_[k]=r.shape[u[k]];let w=Em(x,r.shape,r.dtype,u,_);h=e.makeTensorInfo(_,r.dtype);let C=e.texData.get(h.dataId);C.values=w}else h=ip(r,u,e);c=T.getInnerMostAxes(c.length,a)}T.assertAxesAreInnerMostDims("max",c,a);let[m,g]=T.computeOutAndReduceShapes(h.shape,c),f=m;s&&(f=T.expandShapeToKeepDim(m,l));let y;if(p){let x=e.texData.get(h.dataId).values,_=qne(x,v.sizeFromShape(g),f,r.dtype);y=e.makeTensorInfo(f,r.dtype);let w=e.texData.get(y.dataId);w.values=_}else y=Loe(h,g,f,e);return d&&e.disposeIntermediateTensorInfo(h),y}var Poe={kernelName:dd,backendName:"webgl",kernelFunc:wB};var v3e=Fb+`
  return max(a, b);
`,_3e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+No+`
  return result;
`,w3e=Zt({opSnippet:v3e,packedOpSnippet:_3e,cpuKernelImpl:Xne}),$oe={kernelName:gc,backendName:"webgl",kernelFunc:w3e};function C3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;ol(r,"maxPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;v.assert(T.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=T.computePool2DInfo(r.shape,o,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&v.arraysEqual(u.inShape,u.outShape))return qn({inputs:{x:r},backend:e});let d=new ua(u,"max",!1);return e.runWebGLProgram(d,[r],r.dtype)}var Voe={kernelName:pd,backendName:"webgl",kernelFunc:C3e};function T3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dataFormat:l,dimRoundingMode:c}=i,u=[1,1,1],d=T.computePool3DInfo(r.shape,o,s,u,a,c,l),p=new rp(d,"max",!1);return e.runWebGLProgram(p,[r],r.dtype)}var Boe={kernelName:hd,backendName:"webgl",kernelFunc:T3e};var BD=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideHeight,i=n.strideWidth,r=n.dilationHeight,o=n.effectiveFilterHeight,s=n.effectiveFilterWidth,a=o-1-n.padInfo.top,l=s-1-n.padInfo.left,c=o*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${e}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},zD=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideDepth,i=n.strideHeight,r=n.strideWidth,o=n.dilationDepth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,d=l-1-n.padInfo.front,p=c-1-n.padInfo.top,h=u-1-n.padInfo.left,m=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${e}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function S3e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,d=[1,1,1],p=T.computePool3DInfo(s.shape,a,l,d,c,u),h=new rp(p,"max",!0),m=e.runWebGLProgram(h,[s],s.dtype),g=new zD(p),f=e.runWebGLProgram(g,[r,m],s.dtype);return e.disposeIntermediateTensorInfo(m),f}var zoe={kernelName:hy,backendName:"webgl",kernelFunc:S3e};function k3e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o,output:s}=n,a=o;ol([o,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,p=T.computePool2DInfo(a.shape,l,c,1,u,d),h=!0,m=new ua(p,"max",h),g=e.runWebGLProgram(m,[a],a.dtype),f=new BD(p),y=e.runWebGLProgram(f,[r,g],a.dtype);return e.disposeIntermediateTensorInfo(g),y}var Goe={kernelName:py,backendName:"webgl",kernelFunc:k3e};function Uoe(t,n,e,i){let r=new ua(e,"max",!1),o=i.runWebGLProgram(r,[t],"float32");r=new ua(e,"max",!0,!0,n);let s=i.runWebGLProgram(r,[t],"float32");return[o,s]}var Hoe={kernelName:Q1,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:i}=t,{filterSize:r,strides:o,pad:s,includeBatchInIndex:a}=n,l=e;v.assert(i.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);let c=[1,1];v.assert(T.eitherStridesOrDilationsAreOne(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);let u=T.computePool2DInfo(i.shape,r,o,c,s),[d,p]=Uoe(i,a,u,l);return[d,p]}};function Woe(t,n,e,i){let r=v.sizeFromShape(n),s=v.sizeFromShape(t.shape)/r,a=me({inputs:{x:t},attrs:{shape:[s,r]},backend:i}),l=Mo(a,"float32","mean",i),c=me({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}var joe={kernelName:md,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:i}=t,{keepDims:r,axis:o}=n,s=e,a=i.shape.length,l=v.parseAxisParam(o,i.shape),c=l,u=T.getAxesPermutation(c,a),d=u!=null,p=s.shouldExecuteOnCPU([i]),h=[],m=i;if(d){if(p){let _=s.texData.get(m.dataId).values,w=new Array(a);for(let N=0;N<w.length;N++)w[N]=i.shape[u[N]];let C=Em(_,i.shape,i.dtype,u,w);m=s.makeTensorInfo(w,i.dtype);let k=s.texData.get(m.dataId);k.values=C}else m=ip(i,u,s);h.push(m),c=T.getInnerMostAxes(c.length,a)}T.assertAxesAreInnerMostDims("sum",c,a);let[g,f]=T.computeOutAndReduceShapes(m.shape,c),y=g;r&&(y=T.expandShapeToKeepDim(g,l));let b=Woe(m,f,y,s);for(let x of h)s.disposeIntermediateTensorInfo(x);return b}};function E3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=v.parseAxisParam(o,r.shape),c=l,u=T.getAxesPermutation(c,a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),c=T.getInnerMostAxes(c.length,r.shape.length)),T.assertAxesAreInnerMostDims("min",c,a);let[p,h]=T.computeOutAndReduceShapes(d.shape,c),m=v.sizeFromShape(h),g=me({inputs:{x:d},backend:e,attrs:{shape:[-1,m]}}),f=Mo(g,g.dtype,"min",e),y;if(s){let b=T.expandShapeToKeepDim(p,l);y=me({inputs:{x:f},backend:e,attrs:{shape:b}})}else y=me({inputs:{x:f},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),u!=null&&e.disposeIntermediateTensorInfo(d),y}var qoe={kernelName:fd,backendName:"webgl",kernelFunc:E3e};var I3e=Fb+`
  return min(a, b);
`,D3e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+No+`
  return result;
`,A3e=Zt({opSnippet:I3e,packedOpSnippet:D3e,cpuKernelImpl:Kne}),Xoe={kernelName:yc,backendName:"webgl",kernelFunc:A3e};var GD=class{constructor(n,e,i){this.variableNames=["x"],this.outputShape=e.map((u,d)=>u[0]+n[d]+u[1]);let r=n.length,o=pt(r),s=e.map(u=>u[0]).join(","),a=e.map((u,d)=>u[0]+n[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c=i==="reflect"?0:1;if(r===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${s});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};var UD=class{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((m,g)=>m[0]+n[g]+m[1]);let r=n.length,o=pt(r),s=e.map(m=>m[0]).join(","),a=e.map((m,g)=>m[0]+n[g]).join(","),l=jn("rc",r),c=jn("source",r),u=`${l[r-1]} < ${this.outputShape[r-1]}`,d=r===1?"source":`vec2(${c.slice(-2).join()})`,p=i==="reflect"?0:1,h="";if(r===1){let m=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${o} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[r-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let m=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${o} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[r-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[r-2]} += 1;
        if(${l[r-2]} < ${this.outputShape[r-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[r-1]} += 1;
          if(${u}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${s});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var N3e=({inputs:t,backend:n,attrs:e})=>{let{x:i}=t,{paddings:r,mode:o}=e,s=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new UD(i.shape,r,o):new GD(i.shape,r,o);return n.runWebGLProgram(s,[i],i.dtype)},Koe={kernelName:gd,backendName:"webgl",kernelFunc:N3e};var M3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,O3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+No+`
  return result;
`,R3e=Zt({opSnippet:M3e,packedOpSnippet:O3e}),Yoe={kernelName:bc,backendName:"webgl",kernelFunc:R3e};var HD=class{constructor(n,e,i){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,i],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${e-1}));
      }
    `}};var F3e=`
if (a == b) {
  return 1.0;
};
return a / b;`,L3e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,CB=Zt({opSnippet:F3e,packedOpSnippet:L3e,checkOutOfBounds:!0}),Qoe={kernelName:ic,backendName:"webgl",kernelFunc:CB};var Zoe="return a - b;",TB=Zt({opSnippet:Zoe,packedOpSnippet:Zoe,supportsComplex:!0,cpuKernelImpl:gie}),Joe={kernelName:Rc,backendName:"webgl",kernelFunc:TB};function SB(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{dim:o}=i,s=v.parseAxisParam([o],r.shape),a=wB({inputs:{x:r},backend:e,attrs:{reductionIndices:s,keepDims:!1}}),l=T.expandShapeToKeepDim(a.shape,s),c=me({inputs:{x:a},backend:e,attrs:{shape:l}}),u=TB({inputs:{a:r,b:c},backend:e}),d=xB({inputs:{x:u},backend:e}),p=Im({inputs:{x:d},backend:e,attrs:{axis:s,keepDims:!1}}),h=me({inputs:{x:p},backend:e,attrs:{shape:l}}),m=CB({inputs:{a:d,b:h},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),m}var ese={kernelName:Od,backendName:"webgl",kernelFunc:SB};function P3e(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{numSamples:o,seed:s,normalized:a}=i,l=a?r:SB({inputs:{logits:r},backend:e,attrs:{dim:r.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new HD(c,u,o),p=[[s]],h=e.runWebGLProgram(d,[l],"int32",p);return a||e.disposeIntermediateTensorInfo(l),h}var tse={kernelName:Z1,backendName:"webgl",kernelFunc:P3e};var $3e=di+`
  return -x;
`,V3e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function B3e(t){let{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])){let o=e.texData.get(i.dataId),[s,a]=Qne(o.values,i.shape,i.dtype);return e.makeTensorInfo(a,i.dtype,s)}let r;return G().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new io(i.shape,V3e):r=new Ui(i.shape,$3e),e.runWebGLProgram(r,[i],i.dtype)}var nse={kernelName:yd,backendName:"webgl",kernelFunc:B3e};var z3e=Ji.nonMaxSuppressionV3Impl;function G3e(t){T.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=i,c=e.readSync(r.dataId),u=e.readSync(o.dataId),{selectedIndices:d}=z3e(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var ise={kernelName:my,backendName:"webgl",kernelFunc:G3e};var U3e=Ji.nonMaxSuppressionV4Impl;function H3e(t){T.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i,u=e.readSync(r.dataId),d=e.readSync(o.dataId),{selectedIndices:p,validOutputs:h}=U3e(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var rse={kernelName:fy,backendName:"webgl",kernelFunc:H3e};var W3e=Ji.nonMaxSuppressionV5Impl;function j3e(t){T.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i,u=e.readSync(r.dataId),d=e.readSync(o.dataId),p=s,h=a,m=l,g=c,{selectedIndices:f,selectedScores:y}=W3e(u,d,p,h,m,g);return[e.makeTensorInfo([f.length],"int32",new Int32Array(f)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}var ose={kernelName:gy,backendName:"webgl",kernelFunc:j3e};var WD=class{constructor(n,e,i,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${i}),
                      float(index == coords.y)));
      }
    `}};var q3e=t=>{let{inputs:n,backend:e,attrs:i}=t,{indices:r}=n,{dtype:o,depth:s,onValue:a,offValue:l}=i,c=v.sizeFromShape(r.shape),u=new WD(c,s,a,l),d=me({inputs:{x:r},backend:e,attrs:{shape:[c]}}),p=e.runWebGLProgram(u,[d],o);e.disposeIntermediateTensorInfo(d);let h=[...r.shape,s],m=me({inputs:{x:p},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(p),m},sse={kernelName:xd,backendName:"webgl",kernelFunc:q3e};function U_(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="complex64"){let r=su({inputs:{input:i},backend:e}),o=U_({inputs:{x:r},backend:e}),s=Am({inputs:{input:i},backend:e}),a=U_({inputs:{x:s},backend:e}),l=oo({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return au({attrs:{shape:i.shape,dtype:i.dtype,value:i.dtype==="string"?"":0},backend:e})}var ase={kernelName:Ld,backendName:"webgl",kernelFunc:U_};function lse(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(i.dtype==="complex64"){let r=su({inputs:{input:i},backend:e}),o=lse({inputs:{x:r},backend:e}),s=Am({inputs:{input:i},backend:e}),a=U_({inputs:{x:s},backend:e}),l=oo({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return au({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:e})}var cse={kernelName:bd,backendName:"webgl",kernelFunc:lse};function X3e(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i;if(n.length===1)return DD({inputs:{input:n[0]},backend:e,attrs:{dim:r}});let o=n[0].shape,s=n[0].dtype;n.forEach(u=>{v.assertShapesMatch(o,u.shape,"All tensors passed to stack must have matching shapes"),v.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=DD({inputs:{input:u},backend:e,attrs:{dim:r}});return a.push(d),d}),c=bB({inputs:l,backend:e,attrs:{axis:r}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var use={kernelName:vd,backendName:"webgl",kernelFunc:X3e};var jD=class{constructor(n,e,i){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);let r=n.length,o=pt(r),s=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${s});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};var qD=class{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((g,f)=>g[0]+n[f]+g[1]);let r=n.length,o=pt(r),s=e.map(g=>g[0]).join(","),a=e.map((g,f)=>g[0]+n[f]).join(","),l=jn("rc",r),c=jn("source",r),u=`${l[r-1]} < ${this.outputShape[r-1]}`,d=r===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${o} rc = outputLoc;`,`${l[r-1]} += 1;
       if(${u}) {
      `,r===1?"":`}
       rc = outputLoc;
       ${l[r-2]} += 1;
       if(${l[r-2]} < ${this.outputShape[r-2]}) {`,r===1?"":`  ${l[r-1]} += 1;
         if(${u}) {`],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="";for(let g=0,f=r===1?2:4;g<f;g++)m+=`
        ${p[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=r===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${s});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var kB=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{paddings:o,constantValue:s}=i;if(v.sizeFromShape(r.shape)===0){let c=o.map((u,d)=>u[0]+r.shape[d]+u[1]);return au({backend:e,attrs:{shape:c,value:s,dtype:r.dtype}})}let a=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qD(r.shape,o,s):new jD(r.shape,o,s),l=[[s]];return e.runWebGLProgram(a,[r],r.dtype,l)},dse={kernelName:_d,backendName:"webgl",kernelFunc:kB};var K3e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Y3e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+No+`
  return result;
`,Q3e=Zt({opSnippet:K3e,packedOpSnippet:Y3e}),pse={kernelName:vc,backendName:"webgl",kernelFunc:Q3e};function Z3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=[],c=v.parseAxisParam(o,r.shape),u=c,d=T.getAxesPermutation(u,a),p=r;d!=null&&(p=Dn({inputs:{x:r},backend:e,attrs:{perm:d}}),u=T.getInnerMostAxes(u.length,a),l.push(p)),T.assertAxesAreInnerMostDims("prod",u,a);let h;if(e.shouldExecuteOnCPU([p])){let m=e.texData.get(p.dataId).values,{outVals:g,outShape:f,outDtype:y}=Jne(p.shape,p.dtype,m,u);h=e.makeTensorInfo(f,y,g)}else{let[m,g]=T.computeOutAndReduceShapes(p.shape,u),f=v.sizeFromShape(g),y=me({inputs:{x:p},backend:e,attrs:{shape:[-1,f]}}),b=Uh(r.dtype),x=Mo(y,b,"prod",e);h=me({inputs:{x},backend:e,attrs:{shape:m}}),l.push(y),l.push(x)}if(s){l.push(h);let m=T.expandShapeToKeepDim(h.shape,c);h=me({inputs:{x:h},backend:e,attrs:{shape:m}})}return l.forEach(m=>e.disposeIntermediateTensorInfo(m)),h}var hse={kernelName:Cd,backendName:"webgl",kernelFunc:Z3e};function J3e(t){let{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:r,paramsDenseValues:o,indices:s}=n,{outputRaggedRank:a}=i,l=r.map(y=>e.readSync(y.dataId)),c=r.map(y=>y.shape),u=e.readSync(o.dataId),d=e.readSync(s.dataId),[p,h,m]=eie(l,c,u,o.shape,o.dtype,d,s.shape,a),g=p.map(y=>e.makeTensorInfo([y.length],"int32",y)),f=e.makeTensorInfo(m,o.dtype,h);return g.concat([f])}var mse={kernelName:J1,backendName:"webgl",kernelFunc:J3e};function eze(t){let{inputs:n,backend:e}=t,{starts:i,limits:r,deltas:o}=n,s=e.readSync(i.dataId),a=e.readSync(r.dataId),l=e.readSync(o.dataId),[c,u]=tie(s,i.shape,i.dtype,a,r.shape,l,o.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],i.dtype,u);return[d,p]}var fse={kernelName:ek,backendName:"webgl",kernelFunc:eze};function tze(t){let{inputs:n,backend:e,attrs:i}=t,{shape:r,values:o,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.readSync(r.dataId),u=e.readSync(o.dataId),d=e.readSync(s.dataId),p=a.map(f=>e.readSync(f.dataId)),h=a.map(f=>f.shape),[m,g]=nie(c,r.shape,u,o.shape,o.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(m,o.dtype,g)}var gse={kernelName:tk,backendName:"webgl",kernelFunc:tze};var EB=t=>{let{backend:n,attrs:e}=t,{start:i,stop:r,step:o,dtype:s}=e,a=iie(i,r,o,s);return n.makeTensorInfo([a.length],s,a)},yse={kernelName:yy,backendName:"webgl",kernelFunc:EB};var nze="return 1.0 / x;",ize=ze({opSnippet:nze}),bse={kernelName:_c,backendName:"webgl",kernelFunc:ize};var rze=di+`
  return (x < 0.0) ? 0.0 : x;
`,oze=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sze=ze({opSnippet:rze,packedOpSnippet:oze}),xse={kernelName:wc,backendName:"webgl",kernelFunc:sze};var aze=di+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,lze=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cze=ze({opSnippet:aze,packedOpSnippet:lze}),vse={kernelName:Cc,backendName:"webgl",kernelFunc:cze};var XD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p;o?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var KD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p;o?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${i-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function uze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i,[l,c]=a,u=G().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new KD(r.shape,l,c,o,s):new XD(r.shape,l,c,o,s);return e.runWebGLProgram(u,[r],"float32")}var _se={kernelName:kd,backendName:"webgl",kernelFunc:uze};var YD=class{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,r,o]=e,[,s,a]=n,l=[i&&s>1?r-1:r,i&&a>1?o-1:o],c=[i&&s>1?s-1:s,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function dze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i,a=new YD(o.shape,r.shape,s);return e.runWebGLProgram(a,[o],o.dtype)}var wse={kernelName:vy,backendName:"webgl",kernelFunc:dze};var QD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p=r?"0.5":"0.0",h;o?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var ZD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p=r?"0.5":"0.0",h;o?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${i-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function pze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i,[l,c]=a,u=G().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZD(r.shape,l,c,o,s):new QD(r.shape,l,c,o,s);return e.runWebGLProgram(u,[r],r.dtype)}var Cse={kernelName:Sd,backendName:"webgl",kernelFunc:pze};var JD=class{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,r,o]=e,[,s,a]=n,l=[i&&s>1?r-1:r,i&&a>1?o-1:o],c=[i&&s>1?s-1:s,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${i} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${i} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function hze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i,a=new JD(o.shape,r.shape,s);return e.runWebGLProgram(a,[o],o.dtype)}var Tse={kernelName:xy,backendName:"webgl",kernelFunc:hze};var eA=class{constructor(n,e){this.variableNames=["x"];let i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);if(this.outputShape=n,i===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${n[0]} - coord - 1));
        }
      `;return}let r=a=>e.indexOf(a)!==-1&&n[a]!==1?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`,o=n.map((a,l)=>r(l)).join(","),s=pt(i);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}};var tA=class{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);this.outputShape=n;let r=jn("rc",i),o=`${r[i-1]} + 1 < ${this.outputShape[i-1]}`,s=`${r[i-2]} + 1 < ${this.outputShape[i-2]}`,a=pt(i);i===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${n[0]} - rc - 1),
            ${n[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),
                ${n[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(r.slice())};
          if(${o}){
            result.g = ${c(r.slice())};
          }
          if(${s}) {
            result.b = ${u(r.slice())};
            if(${o}) {
              result.a = ${d(r.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return p(m)}function c(m){return m[i-1]="("+m[i-1]+" + 1)",p(m)}function u(m){return m[i-2]="("+m[i-2]+" + 1)",p(m)}function d(m){return m[i-1]="("+m[i-1]+" + 1)",m[i-2]="("+m[i-2]+" + 1)",p(m)}function p(m){let g=n.map((b,x)=>h(x,m)),f=g.join(","),y=g.slice(-2).join(",");return`getChannel(getX(${f}), vec2(${y}))`}function h(m,g){return e.indexOf(m)!==-1&&n[m]!==1?`${n[m]} - ${g[m]} - 1`:`${g[m]}`}}};function mze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dims:o}=i,s=r.shape.length,a=v.parseAxisParam(o,r.shape);if(s===0)return qn({inputs:{x:r},backend:e});let l=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new tA(r.shape,a):new eA(r.shape,a);return e.runWebGLProgram(l,[r],r.dtype)}var Sse={kernelName:Ed,backendName:"webgl",kernelFunc:mze};var nA=class{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let i=n[1],r=n[2];this.outputShape=n;let o="";typeof e=="number"?o=`float outputValue = ${e.toFixed(2)};`:o=`
        vec3 fill = vec3(${e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${i}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var kse={kernelName:ky,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:i}=t,{radians:r,fillValue:o,center:s}=n,a=e,l=new nA(i.shape,o),[c,u]=T.getImageCenter(s,i.shape[1],i.shape[2]),d=[[c,u,Math.sin(r),Math.cos(r)]];return a.runWebGLProgram(l,[i],i.dtype,d)}};var fze=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,gze=ze({opSnippet:fze}),Ese={kernelName:Tc,backendName:"webgl",kernelFunc:gze};var yze="return inversesqrt(x);",bze=ze({opSnippet:yze,cpuKernelImpl:rie}),Ise={kernelName:Sc,backendName:"webgl",kernelFunc:bze};var op=class{constructor(n,e,i,r,o,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let c=pt(o.length),u=pt(s.length),d="";i===1?d="i":i===2&&(d="i, j");let p=`getIndices(${d})`,h="";r===1?h="i":r===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";l&&(g="coords[0], coords[1]");let f=`getDefaultValue(${g})`,y=e>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${n}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${e}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${f}, sum, float(found)));
        }
      `}};var iA=class{constructor(n,e,i,r,o,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;let c=pt(o.length),u=pt(s.length),d="";i===1?d="i":i===2&&(d="i, j");let p=`getIndices(${d})`,h="";r===1?h="i":r===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";l&&(g="coords[0], coords[1]");let f=`getDefaultValue(${g})`,y=e>1?"strides[j]":"strides",b=e>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${n}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${e}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${e}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${f}, sum, found));
        }
      `}};function xze(t){let{inputs:n,backend:e,attrs:i}=t,{indices:r,updates:o}=n,{shape:s}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=T.calculateShapes(o,r,s),p=[d/c,c];if(d===0)return e.makeTensorInfo(s,r.dtype);let h=me({inputs:{x:r},backend:e,attrs:{shape:[l,a]}}),m=me({inputs:{x:o},backend:e,attrs:{shape:[l,c]}}),g=e.makeTensorInfo([],"float32",new Float32Array([0])),f;G().getBool("WEBGL_PACK")?f=new iA(l,a,h.shape.length,m.shape.length,u,p):f=new op(l,a,h.shape.length,m.shape.length,u,p);let y=e.runWebGLProgram(f,[m,h,g],m.dtype),b=me({inputs:{x:y},backend:e,attrs:{shape:s}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(g),b}var Dse={kernelName:nk,backendName:"webgl",kernelFunc:xze};var rA=class{constructor(n,e,i,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,i];let o="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=G().getNumber("WEBGL_VERSION")===2?o:s,l=r==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function vze(t){let{inputs:n,backend:e,attrs:i}=t,{sortedSequence:r,values:o}=n,{side:s}=i,a=new rA(r.shape[0],r.shape[1],o.shape[1],s),l=[[r.shape[1]]];return e.runWebGLProgram(a,[r,o],"int32",l)}var Ase={kernelName:rk,backendName:"webgl",kernelFunc:vze};var oA=class{constructor(n,e,i){this.variableNames=["c","a","b"],this.outputShape=e;let r,o;if(i>4)throw Error(`Where for rank ${i} is not yet supported`);if(i===1)o="resRC",r="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);r=l.join(),o=c.join()}let s=pt(i);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}};function _ze(t){let{inputs:n,backend:e}=t,{condition:i,t:r,e:o}=n,s=new oA(i.shape.length,r.shape,r.shape.length);return e.runWebGLProgram(s,[i,r,o],ii(r.dtype,o.dtype))}var Nse={kernelName:Id,backendName:"webgl",kernelFunc:_ze};var wze=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${T.SELU_SCALEALPHA};
  float scale = ${T.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Cze=ze({opSnippet:wze}),Mse={kernelName:kc,backendName:"webgl",kernelFunc:Cze};var Tze=Ns+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,Sze=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kze=ze({opSnippet:Tze,packedOpSnippet:Sze,cpuKernelImpl:sie}),Ose={kernelName:Ac,backendName:"webgl",kernelFunc:kze};var Eze=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Ize=ze({opSnippet:Eze}),Rse={kernelName:Dc,backendName:"webgl",kernelFunc:Ize};var Dze=Ns+`
  return sin(x);
`,Aze=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${No}
  return result;
`,Nze=ze({opSnippet:Dze,packedOpSnippet:Aze}),Fse={kernelName:Ec,backendName:"webgl",kernelFunc:Nze};var Mze=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,Oze=ze({opSnippet:Mze}),Lse={kernelName:Ic,backendName:"webgl",kernelFunc:Oze};var Rze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Fze=ze({opSnippet:Rze}),Pse={kernelName:Nc,backendName:"webgl",kernelFunc:Fze};var Lze=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,paddings:s}=i;v.assert(r.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=o.reduce((y,b)=>y*b),l=[[0,0]];l.push(...s);for(let y=1+o.length;y<r.shape.length;++y)l.push([0,0]);let c=[],u=kB({inputs:{x:r},backend:e,attrs:{paddings:l,constantValue:0}}),d=T.getReshaped(u.shape,o,a,!1),p=T.getPermuted(d.length,o.length,!1),h=T.getReshapedPermuted(u.shape,o,a,!1),m=me({inputs:{x:u},backend:e,attrs:{shape:d}}),g=Dn({inputs:{x:m},backend:e,attrs:{perm:p}}),f=me({inputs:{x:g},backend:e,attrs:{shape:h}});return c.push(u),c.push(m),c.push(g),c.forEach(y=>e.disposeIntermediateTensorInfo(y)),f},$se={kernelName:Nd,backendName:"webgl",kernelFunc:Lze};function Pze(t){let{inputs:n,backend:e}=t,{indices:i,values:r,denseShape:o,defaultValue:s}=n;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${i.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.readSync(i.dataId),l=e.readSync(r.dataId),c=e.readSync(o.dataId),u=e.readSync(s.dataId)[0],[d,p,h,m,g]=lie(a,i.shape,i.dtype,l,r.dtype,c,u);return[e.makeTensorInfo(p,i.dtype,d),e.makeTensorInfo([p[0]],r.dtype,h),e.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(f=>Number(f)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}var Vse={kernelName:ok,backendName:"webgl",kernelFunc:Pze};function $ze(t){let{inputs:n,backend:e}=t,{inputIndices:i,inputShape:r,newShape:o}=n;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${i.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);let s=Array.from(e.readSync(r.dataId)),a=e.readSync(i.dataId),l=Array.from(e.readSync(o.dataId)),[c,u,d]=cie(a,i.shape,i.dtype,s,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}var Bse={kernelName:sk,backendName:"webgl",kernelFunc:$ze};function Vze(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);let s=e.readSync(i.dataId),a=e.readSync(r.dataId),l=e.readSync(o.dataId),[c,u]=BI(s,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}var zse={kernelName:ak,backendName:"webgl",kernelFunc:Vze};function Bze(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);let s=e.readSync(i.dataId),a=e.readSync(r.dataId),l=e.readSync(o.dataId),[c,u]=BI(s,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}var Gse={kernelName:lk,backendName:"webgl",kernelFunc:Bze};function zze(t){let{inputs:n,backend:e,attrs:i}=t,{sparseIndices:r,sparseValues:o,defaultValue:s}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=T.calculateShapes(o,r,a),h=!1;if(o.dtype==="string"){let y=e.bufferSync(r),b=e.bufferSync(o),x=v.decodeString(e.readSync(s.dataId)[0]),_=oie(y,b,a,p,u,c,l,d,x,h);return e.makeTensorInfo(a,_.dtype,_.values)}let m=new op(c,l,r.shape.length,o.shape.length,d,[p,1],h),g=e.runWebGLProgram(m,[o,r,s],o.dtype),f=me({inputs:{x:g},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(g),f}var Use={kernelName:ck,backendName:"webgl",kernelFunc:zze};function Gze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{numOrSizeSplits:o,axis:s}=i,a=v.parseAxisParam(s,r.shape)[0],l=T.prepareSplitSize(r,o,a),c=r.shape.length,u=new Array(c).fill(0),d=r.shape.slice();return l.map(p=>{let h=[...d];h[a]=p;let m=da({inputs:{x:r},backend:e,attrs:{begin:u,size:h}});return u[a]+=p,m})}var Hse={kernelName:Md,backendName:"webgl",kernelFunc:Gze};var Wse="return sqrt(x);",Uze=ze({opSnippet:Wse,packedOpSnippet:Wse,cpuKernelImpl:uie}),jse={kernelName:Mc,backendName:"webgl",kernelFunc:Uze};var Hze="return x * x;",Wze=ze({opSnippet:Hze}),qse={kernelName:_y,backendName:"webgl",kernelFunc:Wze};var Xse="return (a - b) * (a - b);",jze=Zt({opSnippet:Xse,packedOpSnippet:Xse}),Kse={kernelName:Oc,backendName:"webgl",kernelFunc:jze};function qze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;if(r.dtype!=="string")throw new Error("Input must be of datatype string");let o=e.readSync(r.dataId),s=T.fromUint8ToStringArray(o),a=die(s,"string",i);return e.makeTensorInfo(r.shape,"string",a)}var Yse={kernelName:I0,backendName:"webgl",kernelFunc:qze};function Xze({inputs:t,attrs:n,backend:e}){let{x:i}=t,r=di+`
    return x > 0.0 ? 1.0 : float(${n.alpha});
  `,o=new Ui(i.shape,r);return e.runWebGLProgram(o,[i],i.dtype)}var Qse={kernelName:Pc,backendName:"webgl",kernelFunc:Xze};var sA=class{constructor(n,e,i){this.variableNames=["x"],this.outputShape=i;let r=i.length,o=pt(i.length),s=pt(i.length),a="";if(r===1)a="coords * strides + begin";else{let l=0;a=i.map((c,u)=>(l++,i.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${n});
      ${o} strides = ${o}(${e});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function Kze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=i,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:f,isSimpleSlice:y,begin:b,end:x,strides:_}=ki.sliceInfo(r.shape,o,s,a,l,c,u,d,p),w;if(g)w=me({inputs:{x:r},backend:e,attrs:{shape:m}});else if(f||y){v.assert(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);let k=ki.computeOutShape(b,x,_),N=da({inputs:{x:r},backend:e,attrs:{begin:b,size:k}});w=me({inputs:{x:N},backend:e,attrs:{shape:m}}),e.disposeIntermediateTensorInfo(N)}else if(e.shouldExecuteOnCPU([r])){let N=e.readSync(r.dataId),P=Ue(r.shape,r.dtype,N),F=pie(h,P,_,b);w=e.makeTensorInfo(m,r.dtype,F.values)}else{let N=new sA(b,_,h);w=e.runWebGLProgram(N,[r],r.dtype)}let C=me({inputs:{x:w},backend:e,attrs:{shape:m}});return e.disposeIntermediateTensorInfo(w),C}var Zse={kernelName:wy,backendName:"webgl",kernelFunc:Kze};function Yze(t){let{inputs:n,backend:e,attrs:i}=t,{separator:r,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,p=e.readSync(u.dataId),h=e.readSync(d.dataId),[m,g]=hie(p,h,r,o,s,a,l,c);return[e.makeTensorInfo([m.length],"string",m),e.makeTensorInfo(d.shape,"int32",g)]}var Jse={kernelName:uk,backendName:"webgl",kernelFunc:Yze};function Qze(t){let{inputs:n,backend:e,attrs:i}=t,{skipEmpty:r}=i,{input:o,delimiter:s}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.readSync(o.dataId),l=e.readSync(s.dataId)[0],[c,u,d]=mie(a,l,r),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var eae={kernelName:dk,backendName:"webgl",kernelFunc:Qze};function Zze(t){let{inputs:n,backend:e,attrs:i}=t,{numBuckets:r}=i,{input:o}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");let s=e.readSync(o.dataId),a=fie(s,r);return e.makeTensorInfo(o.shape,"int32",a)}var tae={kernelName:pk,backendName:"webgl",kernelFunc:Zze};var Jze="return tan(x);",e4e=ze({opSnippet:Jze}),nae={kernelName:Fc,backendName:"webgl",kernelFunc:e4e};var t4e=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,n4e=ze({opSnippet:t4e}),iae={kernelName:Lc,backendName:"webgl",kernelFunc:n4e};function i4e(t){let{inputs:n,backend:e,attrs:i}=t,{tensor:r,indices:o,updates:s}=n,{}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=T.calculateShapes(s,o,r.shape),p=[d/c,c];if(d===0)return e.makeTensorInfo(r.shape,o.dtype);let h=me({inputs:{x:o},backend:e,attrs:{shape:[l,a]}}),m=me({inputs:{x:s},backend:e,attrs:{shape:[l,c]}}),g=me({inputs:{x:r},backend:e,attrs:{shape:p}}),f=new op(l,a,h.shape.length,m.shape.length,u,p,!1,!0),y=e.runWebGLProgram(f,[m,h,g],g.dtype),b=me({inputs:{x:y},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(y),b}var rae={kernelName:ik,backendName:"webgl",kernelFunc:i4e};var aA=class{constructor(n,e){this.variableNames=["A"];let i=new Array(n.length);for(let s=0;s<i.length;s++)i[s]=n[s]*e[s];this.outputShape=i,this.rank=i.length;let r=pt(this.rank),o=r4e(n);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}};function r4e(t){let n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(n===1)return`imod(resRC, ${t[0]})`;let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],i=[];for(let r=0;r<t.length;r++)i.push(`imod(${e[r]}, ${t[r]})`);return i.join()}function IB(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reps:o}=i;if(r.dtype==="string"||r.shape.length>5){let l=e.readSync(r.dataId),c=r.dtype==="string"?l.map(p=>v.decodeString(p)):l,u=Ue(r.shape,r.dtype,c),d=yie(u,o);return e.makeTensorInfo(d.shape,d.dtype,d.values)}let s=new aA(r.shape,o);return e.runWebGLProgram(s,[r],r.dtype)}var oae={kernelName:Ha,backendName:"webgl",kernelFunc:IB};var lA=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},cA=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function Nm(t,n){n!==null&&t.disposeIntermediateTensorInfo(n)}function sae(t){let n=1;for(;n<t;)n*=2;return n}function o4e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{k:o,sorted:s}=i,a=G().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=G().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=r.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([r])||u<a||o>l){let F=e.readSync(r.dataId),[z,Y]=bie(F,c,r.dtype,o,s);return[e.makeTensorInfo(z.shape,z.dtype,z.values),e.makeTensorInfo(Y.shape,Y.dtype,Y.values)]}if(o===0)return c[c.length-1]=0,[e.makeTensorInfo(c,r.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(u===1)return[r,au({attrs:{shape:c,dtype:"int32",value:0},backend:e})];let d=e.texData.get(r.dataId),p=d!==null&&d.isPacked,h=p?e.unpackTensor(r):r,g=v.sizeFromShape(c)/u,f=me({inputs:{x:h},attrs:{shape:[g,u]},backend:e});p&&Nm(e,h);let y=sae(o),b=sae(u),x=null,_=()=>x===null?[f,f]:[f,x],w=(F,z,Y)=>{let K=_(),Z=new lA(Y),U=[[u],[x===null?1:0],[Number.NEGATIVE_INFINITY],[F],[z]],j=x;x=e.runWebGLProgram(Z,K,"int32",U),Nm(e,j)};for(let F=1;F<y;F*=2){let z=F*2;for(let Y=F;Y>=1;Y/=2)w(z,Y,[g,b])}for(let F=b;F>y;F/=2){let z=_(),Y=new cA([g,F/2]),Z=[[u],[x===null?1:0],[y]],te=x;x=e.runWebGLProgram(Y,z,"int32",Z),Nm(e,te);let U=y/2,j=U*2;for(let q=U;q>=1;q/=2)w(j,q,x.shape)}let C=x;x=da({inputs:{x},backend:e,attrs:{begin:0,size:[g,o]}}),Nm(e,C);let k=_B({inputs:{x:f,indices:x},backend:e,attrs:{axis:1,batchDims:1}});Nm(e,f);let N=c.slice(0,-1);N.push(o),C=x,x=me({inputs:{x},attrs:{shape:N},backend:e}),Nm(e,C);let P=k;return k=me({inputs:{x:k},attrs:{shape:N},backend:e}),Nm(e,P),[k,x]}var aae={kernelName:Cy,backendName:"webgl",kernelFunc:o4e};var uA=class{constructor(n,e,i,r,o,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let a=i==="nearest"?1:2,l;switch(r){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${e}));
                float mapY = mapCoord(inY, float(${n}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function s4e(t){let{inputs:n,backend:e,attrs:i}=t,{image:r,transforms:o}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=i,[u,d,p,h]=r.shape,[m,g]=c??[d,p],f=[u,m,g,h],y=new uA(d,p,s,a,l,f);return e.runWebGLProgram(y,[r,o],"float32")}var lae={kernelName:Ty,backendName:"webgl",kernelFunc:s4e};function a4e(t){let{inputs:n,attrs:e,backend:i}=t,{axis:r}=e,{x:o}=n;ol(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=i.readSync(o.dataId),{outputValues:a,outputShape:l,indices:c}=xie(s,r,o.shape,o.dtype);return[i.makeTensorInfo(l,o.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}var cae={kernelName:Sy,backendName:"webgl",kernelFunc:a4e};function l4e(t){let{inputs:n,backend:e,attrs:i}=t,{value:r}=n,{axis:o}=i;o<0&&(o+=r.shape.length);let s=r,a=s.shape.length,l=r.shape[o],c=new Array(a-1),u=0;for(let g=0;g<a;g++)g!==o&&(c[u++]=s.shape[g]);let d=[],p=new Array(a).fill(0),h=s.shape.slice();h[o]=1;let m=new Array(l);for(let g=0;g<m.length;g++){p[o]=g;let f=da({inputs:{x:s},backend:e,attrs:{begin:p,size:h}}),y=me({inputs:{x:f},backend:e,attrs:{shape:c}});m[g]=y,d.push(f)}return d.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var uae={kernelName:Rd,backendName:"webgl",kernelFunc:l4e};var dA=class{constructor(n,e){this.variableNames=["x","segmentIds"];let i=n.windowSize,r=n.batchSize,o=n.inSize,s=n.numSegments,a=s*Math.ceil(o/i);this.outputShape=[r,a];let l="0.0",c="sumValue",u=Math.floor(i/4)*4,d=i%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";o%i>0&&(h=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let m="";o%i>0&&(m=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${i}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function c4e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,segmentIds:o}=n,{numSegments:s}=i,a=r.shape.length,l=[],c=0,u=T.getAxesPermutation([c],a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),l.push(d),c=T.getInnerMostAxes(1,a)[0]);let p=T.segment_util.computeOutShape(d.shape,c,s),h=v.sizeFromShape([d.shape[c]]),m=me({inputs:{x:d},backend:e,attrs:{shape:[-1,h]}});l.push(m);let g=Uh(r.dtype),f=(_,w,C,k,N)=>{let P=_.shape[0],F=_.shape[1],z=T.segment_util.segOpComputeOptimalWindowSize(F,N),Y={windowSize:z,inSize:F,batchSize:P,numSegments:N},K=new dA(Y,w),Z=e.compileAndRun(K,[_,C],k);if(l.push(Z),Z.shape[1]===N)return Z;let te=EB({backend:e,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),U=IB({inputs:{x:te},backend:e,attrs:{reps:[F/z]}});return l.push(te),l.push(U),f(Z,w,U,k,N)},y=f(m,"unsortedSegmentSum",o,g,s),b=me({inputs:{x:y},backend:e,attrs:{shape:p}}),x=b;if(u!=null){l.push(b);let _=T.getUndoAxesPermutation(u);x=Dn({inputs:{x},backend:e,attrs:{perm:_}})}return l.forEach(_=>e.disposeIntermediateTensorInfo(_)),x}var dae={kernelName:Fd,backendName:"webgl",kernelFunc:c4e};var u4e=[qie,Kie,Yie,Qie,Jie,ere,tre,nre,ore,sre,are,lre,cre,ure,dre,pre,hre,mre,fre,gre,yre,xre,vre,_re,wre,kre,Ire,Dre,Pie,Nre,Ore,Rre,Fre,Lre,Pre,$re,Vre,Bre,zre,Gre,Wre,jre,qre,Xre,Kre,Yre,Qre,Zre,Jre,eoe,toe,noe,ioe,roe,ooe,soe,loe,coe,uoe,doe,hoe,moe,foe,goe,yoe,boe,xoe,voe,_oe,Lie,woe,Mre,Coe,Toe,Soe,$ie,koe,Eoe,Ioe,Doe,Aoe,Noe,Moe,Ooe,Roe,Foe,Poe,$oe,Voe,Boe,zoe,Goe,Hoe,joe,qoe,Xoe,Koe,Yoe,tse,zie,nse,ise,rse,ose,Cre,sse,cse,use,dse,pse,Vie,hse,mse,fse,gse,yse,Tre,Qoe,bse,xse,vse,Uie,_se,wse,Cse,Tse,Sse,kse,Ese,Ise,Dse,Ase,Nse,Mse,Ose,Rse,Fse,Lse,bre,ese,Pse,$se,Vse,Bse,zse,Gse,Use,Hse,jse,qse,Kse,Yse,Qse,Zse,Jse,eae,tae,Joe,Wie,nae,iae,rae,oae,aae,lae,jie,cae,uae,dae,ase];for(let t of u4e)mk(t);var pA=class t{actor=null;critic=null;optimizer=null;config;trainingBuffer=[];totalSteps=0;isTraining=!1;constructor(){this.config={learningRate:3e-4,gamma:.99,lambdaGAE:.95,clipEpsilon:.2,entropyCoef:.01,valueCoef:.5,batchSize:64,epochs:4}}initialize(n){return W(this,null,function*(){n&&(this.config=re(re({},this.config),n)),this.optimizer=jo.adam(this.config.learningRate),this.actor=gb({layers:[sn.dense({inputShape:[81],units:256,activation:"relu"}),sn.dropout({rate:.2}),sn.dense({units:128,activation:"relu"}),sn.dropout({rate:.2}),sn.dense({units:64,activation:"relu"}),sn.dense({units:729,activation:"softmax"})]}),this.critic=gb({layers:[sn.dense({inputShape:[81],units:256,activation:"relu"}),sn.dropout({rate:.2}),sn.dense({units:128,activation:"relu"}),sn.dropout({rate:.2}),sn.dense({units:64,activation:"relu"}),sn.dense({units:1,activation:"linear"})]}),console.log("PPO Agent initialized successfully")})}boardToState(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)e.push(n[i][r]/9);return e}getValidActions(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0){for(let o=1;o<=9;o++)if(this.isValidMove(n,i,r,o)){let s=i*81+r*9+(o-1);e.push(s)}}return e}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=o;a<o+3;a++)for(let l=s;l<s+3;l++)if(n[a][l]===r)return!1;return!0}selectAction(n){return W(this,null,function*(){if(!this.actor||!this.critic)throw new Error("PPO Agent not initialized");let e=this.boardToState(n),i=this.getValidActions(n);if(i.length===0)throw new Error("No valid actions available");let r=pr([e]),o=this.actor.predict(r),s=this.critic.predict(r),a=yield o.data(),l=yield s.data(),c=new Float32Array(729),u=0;for(let f of i)c[f]=a[f],u+=a[f];if(u>0)for(let f of i)c[f]/=u;else{let f=1/i.length;for(let y of i)c[y]=f}let d=this.calculateExplorationBonuses(n,i);for(let f=0;f<i.length;f++){let y=i[f];c[y]=c[y]*.7+d[f]*.3}u=0;for(let f of i)u+=c[f];if(u>0)for(let f of i)c[f]/=u;let p=Math.random(),h=i[0],m=Math.log(c[h]+1e-8),g=0;for(let f of i)if(g+=c[f],p<=g){h=f,m=Math.log(c[f]+1e-8);break}return r.dispose(),o.dispose(),s.dispose(),{action:h,logProb:m,value:l[0]}})}calculateExplorationBonuses(n,e){let i=[];for(let r of e){let o=Math.floor(r/81),s=Math.floor(r%81/9),a=r%9+1,l=0;for(let p=0;p<9;p++)p!==s&&n[o][p]===0&&l++;for(let p=0;p<9;p++)p!==o&&n[p][s]===0&&l++;let c=Math.floor(o/3)*3,u=Math.floor(s/3)*3;for(let p=c;p<c+3;p++)for(let h=u;h<u+3;h++)(p!==o||h!==s)&&n[p][h]===0&&l++;let d=Math.min(1,(l+1)/20);i.push(d)}return i}applyAction(n,e){let i=Math.floor(e/81),r=Math.floor(e%81/9),o=e%9+1,s=n.map(h=>[...h]);s[i][r]=o;let a=0;a+=2;let l=this.getValidActions(n).length,c=this.getValidActions(s).length;c>l?a+=1:c===l&&(a+=.5);let u=this.countEliminatedPossibilities(n,s,i,r,o);a+=u*.2;let d=this.countInitialCandidates(n,i,r);d<=2?a+=3:d<=4?a+=1.5:a+=.5,a+=this.calculateCompletionBonuses(s,i,r);let p=this.isPuzzleSolved(s);return p&&(a+=50),a-=.005,{newBoard:s,reward:a,done:p}}countInitialCandidates(n,e,i){let r=0;for(let o=1;o<=9;o++)this.isValidMove(n,e,i,o)&&r++;return r}calculateCompletionBonuses(n,e,i){let r=0,o=!0;for(let u=0;u<9;u++)if(n[e][u]===0){o=!1;break}o&&(r+=5);let s=!0;for(let u=0;u<9;u++)if(n[u][i]===0){s=!1;break}s&&(r+=5);let a=Math.floor(e/3)*3,l=Math.floor(i/3)*3,c=!0;for(let u=a;u<a+3;u++){for(let d=l;d<l+3;d++)if(n[u][d]===0){c=!1;break}if(!c)break}return c&&(r+=5),r}countEliminatedPossibilities(n,e,i,r,o){let s=0;for(let c=0;c<9;c++)c!==r&&n[i][c]===0&&s++;for(let c=0;c<9;c++)c!==i&&n[c][r]===0&&s++;let a=Math.floor(i/3)*3,l=Math.floor(r/3)*3;for(let c=a;c<a+3;c++)for(let u=l;u<l+3;u++)(c!==i||u!==r)&&n[c][u]===0&&s++;return s}isPuzzleSolved(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0)return!1;return!0}storeStep(n){this.trainingBuffer.push(n),this.totalSteps++}calculateAdvantages(n){let e=[],i=[],r=0,o=0;for(let s=n.length-1;s>=0;s--){let a=n[s];o=a.reward+this.config.gamma*r*(1-(a.done?1:0))-a.value+this.config.gamma*this.config.lambdaGAE*o*(1-(a.done?1:0)),e.unshift(o);let c=o+a.value;i.unshift(c),r=a.value}return{advantages:e,returns:i}}train(){return W(this,null,function*(){if(!this.actor||!this.critic||!this.optimizer)throw new Error("PPO Agent not initialized");if(this.trainingBuffer.length<this.config.batchSize)return{actorLoss:0,criticLoss:0,avgAdvantage:0};this.isTraining=!0;let n=[...this.trainingBuffer];this.trainingBuffer=[];let{advantages:e,returns:i}=this.calculateAdvantages(n),r=e.reduce((m,g)=>m+g,0)/e.length,o=Math.sqrt(e.reduce((m,g)=>m+Math.pow(g-r,2),0)/e.length),s=e.map(m=>(m-r)/(o+1e-8)),a=n.map(m=>m.state),l=n.map(m=>m.action),c=n.map(m=>m.logProb),u=n.map(m=>m.value),d=0,p=0,h=0;for(let m=0;m<this.config.epochs;m++){let g=Array.from({length:n.length},(f,y)=>y);for(let f=g.length-1;f>0;f--){let y=Math.floor(Math.random()*(f+1));[g[f],g[y]]=[g[y],g[f]]}for(let f=0;f<a.length;f+=this.config.batchSize){let y=Math.min(f+this.config.batchSize,a.length),b=g.slice(f,y),x=b.map(F=>a[F]),_=b.map(F=>l[F]),w=b.map(F=>s[F]),C=b.map(F=>i[F]),k=b.map(F=>c[F]),N=b.map(F=>u[F]),P=yield this.trainCombined(x,_,w,C,k,N);d+=P.policyLoss,p+=P.valueLoss,h++}}return this.isTraining=!1,{actorLoss:d/h,criticLoss:p/h,avgAdvantage:r}})}trainCombined(n,e,i,r,o,s){return W(this,null,function*(){if(!this.actor||!this.critic||!this.optimizer)throw new Error("Models not initialized");return H(()=>{let a=pr(n,void 0,"float32"),l=Cn(e,"int32"),c=Cn(i,"float32"),u=Cn(r,"float32"),d=Cn(o,"float32"),p=Cn(s,"float32"),h=()=>{let x=this.actor.predict(a),_=this.critic.predict(a),w=ko(_),C=jc(l,729),k=Se(R(x,C),1),N=le(k,"float32"),P=Ti(ne(N,Ge(1e-8))),F=oi(Ce(P,d)),z=Qn(F,1-this.config.clipEpsilon,1+this.config.clipEpsilon),Y=R(F,c),K=R(z,c),Z=St(Kt(Ho(Y,K))),te=ne(p,Qn(Ce(w,p),-this.config.clipEpsilon,this.config.clipEpsilon)),U=dt(Ce(w,u)),j=dt(Ce(te,u)),q=Kt(dr(U,j)),Q=Ge(1e-8),oe=le(x,"float32"),se=Ti(ne(oe,Q)),ue=St(Se(R(oe,se),1)),fe=Kt(ue),ge=R(Ge(this.config.valueCoef),q),xe=R(Ge(this.config.entropyCoef),fe);return ne(Ce(Z,xe),ge)},{value:m,grads:g}=Hy(h);this.optimizer.applyGradients(g);let{policyLoss:f,valueLoss:y}=this.calculateLossComponents(a,l,c,u,d,p),b=m.dataSync()[0];return a.dispose(),l.dispose(),c.dispose(),u.dispose(),d.dispose(),p.dispose(),m.dispose(),Object.values(g).forEach(x=>x.dispose()),{policyLoss:f,valueLoss:y}})})}calculateLossComponents(n,e,i,r,o,s){return H(()=>{let a=this.actor.predict(n),l=this.critic.predict(n),c=ko(l),u=jc(e,729),d=Se(R(a,u),1),p=le(d,"float32"),h=Ti(ne(p,Ge(1e-8))),m=oi(Ce(h,o)),g=Qn(m,1-this.config.clipEpsilon,1+this.config.clipEpsilon),f=R(m,i),y=R(g,i),b=St(Kt(Ho(f,y))),x=ne(s,Qn(Ce(c,s),-this.config.clipEpsilon,this.config.clipEpsilon)),_=dt(Ce(c,r)),w=dt(Ce(x,r)),C=Kt(dr(_,w));return{policyLoss:b.dataSync()[0],valueLoss:C.dataSync()[0]}})}getTrainingStats(){return{totalSteps:this.totalSteps,bufferSize:this.trainingBuffer.length,isTraining:this.isTraining}}saveModel(n){return W(this,null,function*(){if(!this.actor||!this.critic)throw new Error("Models not initialized");yield this.actor.save(`${n}/actor`),yield this.critic.save(`${n}/critic`)})}loadModel(n){return W(this,null,function*(){this.actor=yield Zd(`${n}/actor`),this.critic=yield Zd(`${n}/critic`)})}exportWeights(){return W(this,null,function*(){if(!this.actor||!this.critic)throw new Error("Models not initialized");let n=this.actor.getWeights().map(i=>i.arraySync()),e=this.critic.getWeights().map(i=>i.arraySync());return{actor:n,critic:e}})}importWeights(n){return W(this,null,function*(){if(!this.actor||!this.critic)throw new Error("Models not initialized");let e=n.actor.map(r=>ci(r)),i=n.critic.map(r=>ci(r));this.actor.setWeights(e),this.critic.setWeights(i),e.forEach(r=>r.dispose()),i.forEach(r=>r.dispose())})}updateConfig(n){let e=this.config.learningRate;this.config=re(re({},this.config),n),n.learningRate&&n.learningRate!==e&&(this.optimizer&&this.optimizer.dispose(),this.optimizer=jo.adam(this.config.learningRate))}getConfig(){return re({},this.config)}dispose(){this.actor&&(this.actor.dispose(),this.actor=null),this.critic&&(this.critic.dispose(),this.critic=null),this.optimizer&&(this.optimizer.dispose(),this.optimizer=null)}validateNumber(n,e){let i=Number(n);return isNaN(i)?e:i}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var hA=class t{replayBuffer=[];mainNetwork;targetNetwork;updateCounter=0;totalSteps=0;isTraining=!1;config={learningRate:5e-4,gamma:.99,epsilon:1,epsilonMin:.01,epsilonDecay:.995,batchSize:32,memorySize:1e4,targetUpdateFreq:100,doubleDQN:!0,duelingDQN:!0};constructor(){}initialize(n){return W(this,null,function*(){n&&(this.config=re(re({},this.config),n)),this.mainNetwork=this.buildNetwork(),this.targetNetwork=this.buildNetwork(),yield this.updateTargetNetwork(),console.log("DQN Agent initialized with dueling architecture")})}buildNetwork(){return this.config.duelingDQN?this.buildDuelingNetwork():this.buildStandardNetwork()}buildDuelingNetwork(){let n=b_({shape:[81]}),e=sn.dense({units:512,activation:"relu"}).apply(n),i=sn.dropout({rate:.3}).apply(e),r=sn.dense({units:256,activation:"relu"}).apply(i),o=sn.dropout({rate:.3}).apply(r),s=sn.dense({units:128,activation:"relu"}).apply(o),a=sn.dense({units:64,activation:"relu"}).apply(s),l=sn.dense({units:1,activation:"linear",name:"state_value"}).apply(a),c=sn.dense({units:64,activation:"relu"}).apply(s),u=sn.dense({units:729,activation:"linear",name:"action_advantages"}).apply(c);class d extends sn.Layer{constructor(){super({name:"dueling_q_values"})}computeOutputShape(f){return f[1]}call(f){return H(()=>{let[y,b]=f,x=Kt(b,1,!0),_=Ce(b,x);return ne(y,_)})}}let h=new d().apply([l,u]),m=jP({inputs:n,outputs:h});return m.compile({optimizer:jo.adam(this.config.learningRate),loss:"meanSquaredError",metrics:["mae"]}),m}buildStandardNetwork(){let n=gb({layers:[sn.dense({inputShape:[81],units:512,activation:"relu"}),sn.dropout({rate:.3}),sn.dense({units:256,activation:"relu"}),sn.dropout({rate:.3}),sn.dense({units:128,activation:"relu"}),sn.dense({units:64,activation:"relu"}),sn.dense({units:729,activation:"linear"})]});return n.compile({optimizer:jo.adam(this.config.learningRate),loss:"meanSquaredError",metrics:["mae"]}),n}boardToState(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)e.push(n[i][r]/9);return e}getValidActions(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0){for(let o=1;o<=9;o++)if(this.isValidMove(n,i,r,o)){let s=i*81+r*9+(o-1);e.push(s)}}return e}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=o;a<o+3;a++)for(let l=s;l<s+3;l++)if(n[a][l]===r)return!1;return!0}selectAction(n){return W(this,null,function*(){if(!this.mainNetwork)throw new Error("DQN Agent not initialized");let e=this.boardToState(n),i=this.getValidActions(n);if(i.length===0)throw new Error("No valid actions available");let r,o,s=!1;if(Math.random()<this.config.epsilon){r=i[Math.floor(Math.random()*i.length)],s=!0;let a=pr([e]),l=this.mainNetwork.predict(a);o=(yield l.data())[r],a.dispose(),l.dispose()}else{let a=pr([e]),l=this.mainNetwork.predict(a),c=yield l.data(),u=-1/0;r=i[0];for(let d of i)c[d]>u&&(u=c[d],r=d);o=u,a.dispose(),l.dispose()}return{action:r,qValue:o,isExploration:s}})}applyAction(n,e){let i=Math.floor(e/81),r=Math.floor(e%81/9),o=e%9+1,s=n.map(u=>[...u]);s[i][r]=o;let a=0;a+=1;let l=this.countEliminatedPossibilities(n,s,i,r,o);a+=l*.1;let c=this.isPuzzleSolved(s);return c&&(a+=50),{newBoard:s,reward:a,done:c}}countEliminatedPossibilities(n,e,i,r,o){let s=0;for(let c=0;c<9;c++)c!==r&&n[i][c]===0&&s++;for(let c=0;c<9;c++)c!==i&&n[c][r]===0&&s++;let a=Math.floor(i/3)*3,l=Math.floor(r/3)*3;for(let c=a;c<a+3;c++)for(let u=l;u<l+3;u++)(c!==i||u!==r)&&n[c][u]===0&&s++;return s}isPuzzleSolved(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0)return!1;return!0}storeExperience(n){this.replayBuffer.push(n),this.replayBuffer.length>this.config.memorySize&&this.replayBuffer.shift()}train(){return W(this,null,function*(){if(this.replayBuffer.length<this.config.batchSize)return{qValue:0,epsilon:this.config.epsilon};try{this.isTraining=!0;let n=this.sampleBatch(this.config.batchSize),e=n.map(d=>d.state),i=n.map(d=>d.nextState),r=pr(e),o=pr(i),s=this.mainNetwork.predict(r),a=yield H(()=>{if(this.config.doubleDQN){let d=this.mainNetwork.predict(o),p=this.targetNetwork.predict(o),h=Js(d,1),m=s.arraySync(),g=p.arraySync(),f=h.arraySync(),y=m.map((b,x)=>{let _=[...b],w=n[x];if(w.done)_[w.action]=w.reward;else{let C=f[x],k=g[x][C];_[w.action]=w.reward+this.config.gamma*k}return _});return d.dispose(),p.dispose(),h.dispose(),pr(y)}else{let d=this.targetNetwork.predict(o),p=s.arraySync(),h=d.arraySync(),m=p.map((g,f)=>{let y=[...g],b=n[f];if(b.done)y[b.action]=b.reward;else{let x=this.getValidActionsFromState(b.nextState),_=-1/0;for(let w of x)h[f][w]>_&&(_=h[f][w]);y[b.action]=b.reward+this.config.gamma*(_===-1/0?0:_)}return y});return d.dispose(),pr(m)}}),l=yield H(()=>{let p=a.arraySync().map((h,m)=>{let g=n[m],f=this.getValidActionsFromState(g.state),y=new Array(729).fill(0);return f.forEach(b=>y[b]=1),h.map((b,x)=>x===g.action?b:b*y[x])});return pr(p)}),c=yield this.mainNetwork.fit(r,l,{epochs:1,verbose:0}),u=Kt(s).dataSync()[0];return r.dispose(),o.dispose(),s.dispose(),a.dispose(),l.dispose(),this.updateCounter++,this.totalSteps++,this.updateCounter%this.config.targetUpdateFreq===0&&(yield this.updateTargetNetwork()),this.config.epsilon=Math.max(this.config.epsilonMin,this.config.epsilon*this.config.epsilonDecay),this.isTraining=!1,{qValue:u,epsilon:this.config.epsilon}}catch(n){return console.error("Error during DQN training:",n),this.isTraining=!1,{qValue:0,epsilon:this.config.epsilon}}})}getValidActionsFromState(n){let e=[];for(let i=0;i<9;i++){e[i]=[];for(let r=0;r<9;r++)e[i][r]=Math.round(n[i*9+r]*9)}return this.getValidActions(e)}sampleBatch(n){let e=[],i=Math.min(n,this.replayBuffer.length);for(let r=0;r<i;r++){let o=Math.floor(Math.random()*this.replayBuffer.length);e.push(this.replayBuffer[o])}return e}updateTargetNetwork(){return W(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)return;let n=this.mainNetwork.getWeights();this.targetNetwork.setWeights(n)})}getTrainingStats(){return{totalSteps:this.totalSteps,bufferSize:this.replayBuffer.length,isTraining:this.isTraining,epsilon:this.config.epsilon}}exportWeights(){return W(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)throw new Error("Models not initialized");let n=this.mainNetwork.getWeights().map(i=>i.arraySync()),e=this.targetNetwork.getWeights().map(i=>i.arraySync());return{main:n,target:e}})}importWeights(n){return W(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)throw new Error("Models not initialized");let e=n.main.map(r=>ci(r)),i=n.target.map(r=>ci(r));this.mainNetwork.setWeights(e),this.targetNetwork.setWeights(i),e.forEach(r=>r.dispose()),i.forEach(r=>r.dispose())})}updateConfig(n){this.config=re(re({},this.config),n)}getConfig(){return re({},this.config)}saveModel(n){return W(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)throw new Error("Models not initialized");yield this.mainNetwork.save(`${n}/main`),yield this.targetNetwork.save(`${n}/target`)})}loadModel(n){return W(this,null,function*(){this.mainNetwork=yield Zd(`${n}/main`),this.targetNetwork=yield Zd(`${n}/target`)})}dispose(){this.isTraining=!1,this.mainNetwork&&this.mainNetwork.dispose(),this.targetNetwork&&this.targetNetwork.dispose()}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var h4e=["fileInput"],pae=()=>[340,200],m4e=(t,n)=>({small:t,medium:n});function f4e(t,n){t&1&&(M(0,"div",8),Ee(1,"div",9),M(2,"p"),X(3,"Preparing AI playground..."),O()())}function g4e(t,n){if(t&1){let e=qt();M(0,"div",14)(1,"span"),X(2,"Local Difficulty"),O(),M(3,"mat-select",45),or("ngModelChange",function(r){Le(e);let o=ee(2);return _r(o.aiDifficulty,r)||(o.aiDifficulty=r),Pe(r)}),_e("selectionChange",function(){Le(e);let r=ee(2);return Pe(r.onAiDifficultyChange())}),M(4,"mat-option",46),X(5,"Easy"),O(),M(6,"mat-option",47),X(7,"Medium"),O(),M(8,"mat-option",48),X(9,"Hard"),O(),M(10,"mat-option",49),X(11,"Expert"),O()()()}if(t&2){let e=ee(2);V(3),rr("ngModel",e.aiDifficulty)}}function y4e(t,n){if(t&1){let e=qt();M(0,"div",51)(1,"span"),X(2,"Entropy Coefficient:"),O(),M(3,"div",52)(4,"mat-slider",56)(5,"input",27),or("ngModelChange",function(r){Le(e);let o=ee(3);return _r(o.entropyCoef,r)||(o.entropyCoef=r),Pe(r)}),_e("ngModelChange",function(){Le(e);let r=ee(3);return Pe(r.updatePPOConfig())}),O()(),M(6,"span"),X(7),O()()()}if(t&2){let e=ee(3);V(4),J("disabled",e.isTraining),V(),rr("ngModel",e.entropyCoef),V(2),xt(e.entropyCoef.toFixed(3))}}function b4e(t,n){if(t&1){let e=qt();M(0,"div",51)(1,"span"),X(2,"Discount Factor:"),O(),M(3,"div",52)(4,"mat-slider",57)(5,"input",27),or("ngModelChange",function(r){Le(e);let o=ee(3);return _r(o.gamma,r)||(o.gamma=r),Pe(r)}),O()(),M(6,"span"),X(7),O()()()}if(t&2){let e=ee(3);V(4),J("disabled",e.isTraining),V(),rr("ngModel",e.gamma),V(2),xt(e.gamma.toFixed(2))}}function x4e(t,n){if(t&1){let e=qt();M(0,"div",50)(1,"div",51)(2,"span"),X(3,"Learning Rate:"),O(),M(4,"div",52)(5,"mat-slider",53)(6,"input",27),or("ngModelChange",function(r){Le(e);let o=ee(2);return _r(o.learningRate,r)||(o.learningRate=r),Pe(r)}),_e("ngModelChange",function(){Le(e);let r=ee(2);return Pe(r.updatePPOConfig())}),O()(),M(7,"span"),X(8),O()()(),M(9,"div",51)(10,"span"),X(11,"Batch Size:"),O(),M(12,"div",52)(13,"mat-slider",54)(14,"input",27),or("ngModelChange",function(r){Le(e);let o=ee(2);return _r(o.batchSize,r)||(o.batchSize=r),Pe(r)}),_e("ngModelChange",function(){Le(e);let r=ee(2);return Pe(r.updatePPOConfig())}),O()(),M(15,"span"),X(16),O()()(),be(17,y4e,8,3,"div",55)(18,b4e,8,3,"div",55),O()}if(t&2){let e=ee(2);V(5),J("disabled",e.isTraining),V(),rr("ngModel",e.learningRate),V(2),xt(e.learningRate.toFixed(4)),V(5),J("disabled",e.isTraining),V(),rr("ngModel",e.batchSize),V(2),xt(e.batchSize),V(),J("ngIf",e.selectedAlgorithm==="ppo"),V(),J("ngIf",e.selectedAlgorithm==="dqn")}}function v4e(t,n){t&1&&(Ps(0),M(1,"h4"),X(2,"Policy Gradient Method"),O(),M(3,"p"),X(4,"PPO handles large discrete action spaces via categorical policies, with built-in stability through a clipped objective function."),O(),$s())}function _4e(t,n){t&1&&(Ps(0),M(1,"h4"),X(2,"Value-Based Method"),O(),M(3,"p"),X(4,"Dueling Double DQN separates state-value from action-advantage, reducing overestimation bias with prioritized replay."),O(),$s())}function w4e(t,n){if(t&1&&(M(0,"div",62)(1,"span",63),X(2,"Actor Loss"),O(),M(3,"span",64),X(4),O()()),t&2){let e=ee(3);V(4),xt(e.actorLoss.toFixed(4))}}function C4e(t,n){if(t&1&&(M(0,"div",62)(1,"span",63),X(2,"Critic Loss"),O(),M(3,"span",64),X(4),O()()),t&2){let e=ee(3);V(4),xt(e.criticLoss.toFixed(4))}}function T4e(t,n){if(t&1&&(M(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),X(3,"Training Progress"),O()(),M(4,"mat-card-content")(5,"div",58)(6,"div",59)(7,"span"),X(8),O(),M(9,"span"),X(10),O()(),Ee(11,"mat-progress-bar",60),O(),M(12,"div",61)(13,"div",62)(14,"span",63),X(15,"Accuracy"),O(),M(16,"span",64),X(17),O()(),M(18,"div",62)(19,"span",63),X(20,"Avg Reward"),O(),M(21,"span",64),X(22),O()(),be(23,w4e,5,1,"div",65)(24,C4e,5,1,"div",65),M(25,"div",62)(26,"span",63),X(27,"Total Steps"),O(),M(28,"span",64),X(29),O()()()()()),t&2){let e=ee(2);V(8),xn("Episode ",e.episodes,""),V(2),xn("",e.progress.toFixed(1),"%"),V(),J("value",e.progress),V(6),xn("",e.accuracy.toFixed(1),"%"),V(5),xt(e.averageReward.toFixed(2)),V(),J("ngIf",e.selectedAlgorithm==="ppo"),V(),J("ngIf",e.selectedAlgorithm==="ppo"),V(5),xt(e.totalSteps)}}function S4e(t,n){if(t&1){let e=qt();M(0,"app-cell",68),_e("cellClick",function(){let r=Le(e).$implicit,o=ee(3);return Pe(o.onCellClick(r.row,r.col))}),O()}if(t&2){let e=n.$implicit,i=ee(3);rt("ai-decision-correct",i.getCellValidationClass(e.row,e.col)==="ai-decision-correct")("ai-decision-incorrect",i.getCellValidationClass(e.row,e.col)==="ai-decision-incorrect"),J("value",e.value)("notes",e.notes)("isOriginal",e.isOriginal)("isSelected",e.isSelected)("isSameNumber",e.isSameNumber)("isHighlighted",e.isHighlighted)("isCoachHighlighted",e.isHighlighted)}}function k4e(t,n){if(t&1&&(M(0,"div",66),be(1,S4e,1,11,"app-cell",67),O()),t&2){let e=n.$implicit;V(),J("ngForOf",e)}}function E4e(t,n){if(t&1&&(M(0,"p"),X(1),O()),t&2){let e=ee(),i=e.$implicit,r=e.index,o=ee(3);V(),Sl(" Policy predicts ",i.value," (probability: ",o.getThinkingProbability(r).toFixed(2),") ")}}function I4e(t,n){if(t&1&&(M(0,"p"),X(1),O()),t&2){let e=ee(),i=e.$implicit,r=e.index,o=ee(3);V(),dO(" Q-value for (",i.row+1,",",i.col+1,",",i.value,"): ",o.getThinkingQValue(r).toFixed(2)," ")}}function D4e(t,n){if(t&1&&(M(0,"div",71)(1,"div",72)(2,"div",73),X(3),O(),M(4,"div",74),X(5),O()(),M(6,"div",75),be(7,E4e,2,2,"p",25)(8,I4e,2,4,"p",25),O()()),t&2){let e=n.$implicit,i=ee(3);V(3),Sl("R",e.row+1,"C",e.col+1,""),V(2),xt(e.value),V(2),J("ngIf",i.selectedAlgorithm==="ppo"),V(),J("ngIf",i.selectedAlgorithm==="dqn")}}function A4e(t,n){if(t&1&&(M(0,"div",69)(1,"h4"),X(2,"AI Decision"),O(),be(3,D4e,9,5,"div",70),O()),t&2){let e=ee(2);V(3),J("ngForOf",e.cellHighlights)}}function N4e(t,n){if(t&1){let e=qt();M(0,"div",76)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),X(4,"Model Performance"),O()(),M(5,"mat-card-content")(6,"div",77)(7,"div",78)(8,"span",79),X(9,"Test Accuracy"),O(),M(10,"span",80),X(11),O()(),M(12,"div",78)(13,"span",79),X(14,"Correct Cells"),O(),M(15,"span",80),X(16),O()(),M(17,"div",78)(18,"span",79),X(19,"Test Time"),O(),M(20,"span",80),X(21),O()()(),M(22,"button",34),_e("click",function(){Le(e);let r=ee(2);return Pe(r.testOnCurrentBoard())}),M(23,"mat-icon"),X(24,"quiz"),O(),X(25," Test on Current Board "),O()()()()}if(t&2){let e=ee(2);V(11),xn("",e.testAccuracy.toFixed(1),"%"),V(5),Sl("",e.correctCells,"/",e.totalTestCells,""),V(5),xn("",e.testTime.toFixed(0),"ms"),V(),J("disabled",e.isTraining)}}function M4e(t,n){if(t&1&&Ee(0,"div",94),t&2){let e=ee().$implicit;J("ngClass",Cx(1,m4e,e.units>10,e.units<=10))}}function O4e(t,n){if(t&1&&(M(0,"div",95),X(1),O()),t&2){let e=ee().$implicit;V(),xt(e.units)}}function R4e(t,n){if(t&1&&(M(0,"div",89)(1,"div",90),X(2),O(),M(3,"div",91),be(4,M4e,1,4,"div",92)(5,O4e,2,1,"div",93),O()()),t&2){let e=n.$implicit,i=ee(4);V(2),xt(e.name),V(2),J("ngForOf",i.getVisibleNodes(e.units)),V(),J("ngIf",e.units>5)}}function F4e(t,n){if(t&1&&(M(0,"div",86)(1,"h4"),X(2,"Network Architecture"),O(),M(3,"div",87),be(4,R4e,6,3,"div",88),O()()),t&2){let e=ee(3);V(4),J("ngForOf",e.networkArchitecture)}}function L4e(t,n){if(t&1&&(M(0,"div",81)(1,"mat-card",82)(2,"mat-card-header")(3,"mat-card-title"),X(4,"Training Analytics"),O(),M(5,"mat-card-subtitle"),X(6,"Real-time learning progress visualization"),O()(),M(7,"mat-card-content")(8,"div",83)(9,"h4"),X(10,"Learning Accuracy"),O(),Ee(11,"ngx-charts-line-chart",84),O(),M(12,"div",83)(13,"h4"),X(14,"Average Reward"),O(),Ee(15,"ngx-charts-line-chart",84),O(),be(16,F4e,5,1,"div",85),O()()()),t&2){let e=ee(2);V(11),J("results",e.accuracyChartData)("view",_u(21,pae))("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.showLegend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabelAccuracy)("autoScale",e.autoScale),V(4),J("results",e.rewardChartData)("view",_u(22,pae))("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.showLegend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabelReward)("autoScale",e.autoScale),V(),J("ngIf",e.hasNeuralNetwork&&e.showNetworkVisualization)}}function P4e(t,n){if(t&1){let e=qt();M(0,"div",10)(1,"div",11)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),X(5,"AI Training Controls"),O(),M(6,"mat-card-subtitle"),X(7,"Configure and train reinforcement learning agents"),O()(),M(8,"mat-card-content")(9,"div",12)(10,"label"),X(11,"Puzzle Source for AI Training:"),O(),M(12,"div",13)(13,"div",14)(14,"span"),X(15,"Use Online API"),O(),M(16,"mat-slide-toggle",15),or("ngModelChange",function(r){Le(e);let o=ee();return _r(o.useApiForAI,r)||(o.useApiForAI=r),Pe(r)}),_e("change",function(){Le(e);let r=ee();return Pe(r.onApiToggleForAI())}),O()(),be(17,g4e,12,1,"div",16),M(18,"div",17)(19,"div",18)(20,"mat-icon"),X(21),O(),M(22,"span"),X(23),Tx(24,"titlecase"),O()()()()(),M(25,"div",12)(26,"label"),X(27,"Select Algorithm:"),O(),M(28,"mat-select",19),or("ngModelChange",function(r){Le(e);let o=ee();return _r(o.selectedAlgorithm,r)||(o.selectedAlgorithm=r),Pe(r)}),_e("selectionChange",function(){Le(e);let r=ee();return Pe(r.onAlgorithmChange())}),M(29,"mat-option",20),X(30,"Proximal Policy Optimization (PPO)"),O(),M(31,"mat-option",21),X(32,"Dueling Double DQN"),O()()(),M(33,"div",12)(34,"label"),X(35," Advanced Settings "),M(36,"button",22),_e("click",function(){Le(e);let r=ee();return Pe(r.toggleAdvancedSettings())}),M(37,"mat-icon"),X(38),O()()(),be(39,x4e,19,8,"div",23),O(),M(40,"div",24),be(41,v4e,5,0,"ng-container",25)(42,_4e,5,0,"ng-container",25),O(),M(43,"div",12)(44,"label"),X(45,"Training Speed:"),O(),M(46,"mat-slider",26)(47,"input",27),or("ngModelChange",function(r){Le(e);let o=ee();return _r(o.trainingSpeed,r)||(o.trainingSpeed=r),Pe(r)}),O()(),M(48,"span"),X(49),O()(),M(50,"div",28)(51,"button",29),_e("click",function(){Le(e);let r=ee();return Pe(r.startTraining())}),M(52,"mat-icon"),X(53),O(),X(54),O(),M(55,"button",30),_e("click",function(){Le(e);let r=ee();return Pe(r.testModel())}),M(56,"mat-icon"),X(57,"psychology"),O(),X(58," Test Model "),O(),M(59,"button",31),_e("click",function(){Le(e);let r=ee();return Pe(r.generateNewSudoku())}),M(60,"mat-icon"),X(61,"refresh"),O(),X(62," New Puzzle "),O()(),M(63,"div",32)(64,"h4"),X(65,"Model Management"),O(),M(66,"div",33)(67,"button",34),_e("click",function(){Le(e);let r=ee();return Pe(r.saveModel())}),M(68,"mat-icon"),X(69,"save"),O(),X(70," Save Model "),O(),M(71,"button",35),_e("click",function(){Le(e);let r=ee();return Pe(r.loadModel())}),M(72,"mat-icon"),X(73,"folder_open"),O(),X(74," Load Model "),O(),M(75,"button",34),_e("click",function(){Le(e);let r=ee();return Pe(r.exportModel())}),M(76,"mat-icon"),X(77,"download"),O(),X(78," Export "),O(),M(79,"button",35),_e("click",function(){Le(e);let r=ee();return Pe(r.triggerFileInput())}),M(80,"mat-icon"),X(81,"upload"),O(),X(82," Import "),O()(),M(83,"input",36,0),_e("change",function(r){Le(e);let o=ee();return Pe(o.onFileSelected(r))}),O()()()(),be(85,T4e,30,8,"mat-card",25),O(),M(86,"div",37)(87,"mat-card",38)(88,"mat-card-header")(89,"mat-card-title"),X(90,"AI Learning Board"),O(),M(91,"mat-card-subtitle"),X(92,"Watch the AI make decisions in real-time"),O()(),M(93,"mat-card-content")(94,"div",39)(95,"div",40),be(96,k4e,2,1,"div",41),O()(),be(97,A4e,4,1,"div",42),O()(),be(98,N4e,26,5,"div",43),O(),be(99,L4e,17,23,"div",44),O()}if(t&2){let e=ee();V(16),rr("ngModel",e.useApiForAI),J("color","primary")("checked",e.useApiForAI),V(),J("ngIf",!e.useApiForAI),V(2),rt("api-active",e.useApiForAI)("local-active",!e.useApiForAI),V(2),xt(e.useApiForAI?"cloud":"offline_pin"),V(2),xt(e.useApiForAI?"Online API Puzzles":"Local "+Sx(24,31,e.aiDifficulty)+" Puzzles"),V(5),rr("ngModel",e.selectedAlgorithm),J("disabled",e.isTraining),V(10),xt(e.showAdvancedSettings?"expand_less":"expand_more"),V(),J("ngIf",e.showAdvancedSettings),V(2),J("ngIf",e.selectedAlgorithm==="ppo"),V(),J("ngIf",e.selectedAlgorithm==="dqn"),V(4),J("disabled",e.isTraining),V(),rr("ngModel",e.trainingSpeed),V(2),xn("",e.trainingSpeed,"%"),V(2),J("color",e.isTraining?"warn":"primary"),V(2),xt(e.isTraining?"stop":"play_arrow"),V(),xn(" ",e.isTraining?"Stop Training":"Start Training"," "),V(),J("disabled",e.isTraining||e.progress===0),V(4),J("disabled",e.isTraining),V(8),J("disabled",e.progress===0),V(8),J("disabled",e.progress===0),V(10),J("ngIf",e.isTraining||e.progress>0),V(11),J("ngForOf",e.getSections()),V(),J("ngIf",e.cellHighlights.length>0),V(),J("ngIf",e.showModelPerformance),V(),J("ngIf",e.progress>0)}}var mA=class t{constructor(n,e,i,r,o,s){this.router=n;this.sudokuService=e;this.snackBar=i;this.ppoAgent=r;this.dqnAgent=o;this.cdr=s;this.generateRandomThinkingValues(),this.initializeChartData()}Math=Math;loading=!0;board=[];solution=[];selectedAlgorithm="ppo";useApiForAI=!0;aiDifficulty="medium";isTraining=!1;progress=0;trainingSpeed=50;episodes=0;showAdvancedSettings=!1;learningRate=3e-4;batchSize=64;entropyCoef=.01;gamma=.99;epsilon=1;epsilonDecay=.995;targetUpdateFreq=100;currentReward=0;averageReward=0;accuracy=0;actorLoss=0;criticLoss=0;avgAdvantage=0;qValue=0;explorationRate=0;currentEpisodeSteps=[];totalSteps=0;showModelPerformance=!1;testAccuracy=0;testTime=0;correctCells=0;totalTestCells=0;accuracyChartData=[];rewardChartData=[];lossChartData=[];comparisonChartData=[];episodeData=[];dqnWins=0;ppoWins=0;colorScheme="cool";showXAxis=!0;showYAxis=!0;gradient=!1;showLegend=!0;showXAxisLabel=!0;xAxisLabel="Episode";showYAxisLabel=!0;yAxisLabelAccuracy="Accuracy (%)";yAxisLabelReward="Reward";autoScale=!0;thinkingProbabilities=[];thinkingQValues=[];cellHighlights=[];networkVisualization=[];cellValidationStates={};VALIDATION_DISPLAY_TIME=3e3;cellData=[];fileInput;trainingInterval=null;currentTrainingBoard=[];hasNeuralNetwork=!1;showNetworkVisualization=!1;networkArchitecture=[];initializeChartData(){this.accuracyChartData=[{name:"Accuracy",series:[]}],this.rewardChartData=[{name:"Reward",series:[]}],this.lossChartData=[{name:"Loss",series:[]}],this.comparisonChartData=[{name:"Comparison",value:0}]}generateRandomThinkingValues(){for(let n=0;n<20;n++)this.thinkingProbabilities.push(.5+Math.random()*.5),this.thinkingQValues.push(-5+Math.random()*10)}getThinkingProbability(n){return this.thinkingProbabilities[n%this.thinkingProbabilities.length]}getThinkingQValue(n){return this.thinkingQValues[n%this.thinkingQValues.length]}ngOnInit(){return W(this,null,function*(){try{this.loadAiSettings(),yield this.initializeBoard(),this.updateNetworkArchitecture(),this.selectedAlgorithm==="ppo"?yield this.initializePPOAgent():this.selectedAlgorithm==="dqn"&&(yield this.initializeDQNAgent())}catch(n){console.error("Error during initialization:",n),this.loading=!1}})}ngOnDestroy(){this.isTraining&&this.stopTraining(),this.ppoAgent.dispose(),this.dqnAgent.dispose()}initializePPOAgent(){return W(this,null,function*(){try{let n={learningRate:this.learningRate,batchSize:this.batchSize,entropyCoef:this.entropyCoef};yield this.ppoAgent.initialize(n),console.log("PPO Agent initialized")}catch(n){console.error("Error initializing PPO agent:",n)}})}initializeDQNAgent(){return W(this,null,function*(){try{let n={learningRate:this.learningRate,batchSize:this.batchSize,gamma:this.gamma,epsilon:this.epsilon,epsilonDecay:this.epsilonDecay,targetUpdateFreq:this.targetUpdateFreq};yield this.dqnAgent.initialize(n),console.log("DQN Agent initialized")}catch(n){console.error("Error initializing DQN agent:",n)}})}initializeBoard(){return W(this,null,function*(){return new Promise((n,e)=>{this.loading=!0,this.sudokuService.getNewBoard().subscribe({next:i=>{try{this.board=JSON.parse(JSON.stringify(i.grid)),this.solution=JSON.parse(JSON.stringify(i.solution)),this.currentTrainingBoard=JSON.parse(JSON.stringify(i.grid)),this.initializeCellData(),this.loading=!1,n()}catch(r){console.error("Error processing board data:",r),e(r instanceof Error?r:new Error("Failed to process board data"))}},error:i=>{console.error("Error loading board:",i),this.loading=!1,e(i instanceof Error?i:new Error("Failed to load board"))}})})})}initializeCellData(){this.cellData=[];for(let n=0;n<9;n++){this.cellData[n]=[];for(let e=0;e<9;e++)this.cellData[n][e]={row:n,col:e,value:this.board[n][e],notes:[],isOriginal:this.board[n][e]!==0,isSelected:!1,isSameNumber:!1,isHighlighted:!1}}}refreshBoardOnly(){return W(this,null,function*(){return new Promise((n,e)=>{this.sudokuService.getNewBoard().subscribe({next:i=>{try{this.board=JSON.parse(JSON.stringify(i.grid)),this.solution=JSON.parse(JSON.stringify(i.solution)),this.currentTrainingBoard=JSON.parse(JSON.stringify(i.grid)),this.updateCellDataFromBoard(),n()}catch(r){console.error("Error processing board data:",r),e(r instanceof Error?r:new Error("Failed to process board data"))}},error:i=>{console.error("Error loading board:",i),e(i instanceof Error?i:new Error("Failed to load board"))}})})})}updateCellDataFromBoard(){for(let n=0;n<9;n++)for(let e=0;e<9;e++)this.cellData[n][e].value=this.board[n][e],this.cellData[n][e].isOriginal=this.board[n][e]!==0}getSections(){let n=[];for(let e=0;e<3;e++)for(let i=0;i<3;i++){let r=[];for(let o=0;o<3;o++)for(let s=0;s<3;s++){let a=e*3+o,l=i*3+s;r.push(this.cellData[a][l])}n.push(r)}return n}toggleAdvancedSettings(){this.showAdvancedSettings=!this.showAdvancedSettings}startTraining(){return W(this,null,function*(){if(this.isTraining){this.stopTraining();return}try{this.selectedAlgorithm==="ppo"?yield this.initializePPOAgent():this.selectedAlgorithm==="dqn"&&(yield this.initializeDQNAgent()),this.isTraining=!0,this.progress=0,this.episodes=0,this.accuracy=0,this.averageReward=0,this.actorLoss=0,this.criticLoss=0,this.avgAdvantage=0,this.totalSteps=0,this.initializeChartData(),yield this.trainWithRealAlgorithm()}catch(n){console.error("Error starting training:",n),this.isTraining=!1,this.snackBar.open("Error starting training. Check console for details.","Close",{duration:5e3})}})}stopTraining(){this.isTraining=!1,this.trainingInterval&&(clearInterval(this.trainingInterval),this.trainingInterval=null),this.cellHighlights=[],this.resetHighlights()}resetHighlights(){for(let n=0;n<9;n++)for(let e=0;e<9;e++)this.cellData[n][e].isHighlighted=!1}trainWithRealAlgorithm(){return W(this,null,function*(){try{this.selectedAlgorithm==="ppo"?yield this.trainPPO():yield this.trainDQN()}catch(n){console.error("Error during training:",n),this.isTraining=!1,this.snackBar.open("Training error occurred. Check console for details.","Close",{duration:5e3})}})}trainPPO(){return W(this,null,function*(){let e=[];for(;this.isTraining&&this.episodes<1e3;)try{this.currentTrainingBoard=JSON.parse(JSON.stringify(this.board)),this.currentEpisodeSteps=[];let i=0,r=0,o=100;for(;this.isTraining&&r<o;){try{if(this.getValidActions(this.currentTrainingBoard).length===0){console.log(`Episode ${this.episodes+1}: No valid actions available, ending episode`);break}let{action:a,logProb:l,value:c}=yield this.ppoAgent.selectAction(this.currentTrainingBoard),u=this.ppoAgent.applyAction(this.currentTrainingBoard,a),d=this.validateNumber(u.reward,0),p=this.validateNumber(c,0),h=this.validateNumber(l,0),m={state:this.boardToState(this.currentTrainingBoard),action:a,reward:d,value:p,logProb:h,done:u.done};if(this.currentEpisodeSteps.push(m),this.ppoAgent.storeStep(m),this.updateVisualization(a,d),this.currentTrainingBoard=u.newBoard,i+=d,r++,this.totalSteps++,u.done){console.log(`Episode ${this.episodes+1}: Puzzle solved! Episode reward: ${i}`),this.accuracy=100;break}}catch(s){console.error("Error during PPO training step:",s);break}yield new Promise(s=>setTimeout(s,Math.max(10,1e3-this.trainingSpeed*10)))}if(e.push(this.validateNumber(i,0)),this.episodes++,console.log(`Completed episode ${this.episodes}/1000, reward: ${i}, steps: ${r}`),this.currentReward=this.validateNumber(i,0),this.averageReward=this.validateNumber(e.reduce((s,a)=>s+a,0)/Math.max(e.length,1),0),this.accuracy=this.validateNumber(this.calculateAccuracy(),0),this.ppoAgent.getTrainingStats().bufferSize>=this.batchSize)try{let s=yield this.ppoAgent.train();this.actorLoss=this.validateNumber(s.actorLoss,0),this.criticLoss=this.validateNumber(s.criticLoss,0),this.avgAdvantage=this.validateNumber(s.avgAdvantage,0)}catch(s){console.error("Error during PPO training update:",s)}if(this.progress=Math.min(100,this.episodes/1e3*100),this.updateCharts(),this.cdr.detectChanges(),this.isTraining&&this.episodes<1e3)try{yield this.refreshBoardOnly(),yield new Promise(s=>setTimeout(s,100))}catch(s){console.error("Error initializing new board for next episode:",s)}}catch(i){if(console.error("Error in PPO episode:",i),this.episodes++,this.episodes>=1e3)break;try{yield this.initializeBoard()}catch(r){console.error("Failed to reset board, stopping training:",r);break}}console.log(`PPO Training finished. Episodes completed: ${this.episodes}/1000`),this.progress=100,this.isTraining=!1,this.snackBar.open(`PPO Training complete! Completed ${this.episodes} episodes.`,"Close",{duration:3e3})})}trainDQN(){return W(this,null,function*(){let e=[];for(;this.isTraining&&this.episodes<1e3;)try{this.currentTrainingBoard=JSON.parse(JSON.stringify(this.board));let i=0,r=0,o=100;for(;this.isTraining&&r<o;){try{let{action:s,qValue:a}=yield this.dqnAgent.selectAction(this.currentTrainingBoard),l=this.dqnAgent.applyAction(this.currentTrainingBoard,s),c=this.validateNumber(l.reward,0),u=this.validateNumber(a,0),d={state:this.boardToState(this.currentTrainingBoard),action:s,reward:c,nextState:this.boardToState(l.newBoard),done:l.done};if(this.dqnAgent.storeExperience(d),this.updateVisualization(s,c),this.qValue=u,this.currentTrainingBoard=l.newBoard,i+=c,r++,this.totalSteps++,l.done){this.accuracy=100;break}if(this.getValidActions(this.currentTrainingBoard).length===0)break}catch(s){console.error("Error during DQN training step:",s);break}yield new Promise(s=>setTimeout(s,Math.max(10,1e3-this.trainingSpeed*10)))}if(e.push(this.validateNumber(i,0)),this.episodes++,this.currentReward=this.validateNumber(i,0),this.averageReward=this.validateNumber(e.reduce((s,a)=>s+a,0)/Math.max(e.length,1),0),this.accuracy=this.validateNumber(this.calculateAccuracy(),0),this.dqnAgent.getTrainingStats().bufferSize>=this.batchSize){let s=yield this.dqnAgent.train();this.qValue=this.validateNumber(s.qValue,0),this.explorationRate=this.validateNumber(s.epsilon,0)}this.progress=Math.min(100,this.episodes/1e3*100),this.updateCharts(),this.cdr.detectChanges(),this.isTraining&&(yield this.refreshBoardOnly(),yield new Promise(s=>setTimeout(s,100)))}catch(i){console.error("Error in DQN episode:",i);break}this.isTraining&&(this.progress=100,this.isTraining=!1,this.snackBar.open("DQN Training complete!","Close",{duration:3e3}))})}loadAiSettings(){let n=this.sudokuService.getCurrentAiSettings();this.useApiForAI=n.useApi??!0,this.aiDifficulty=n.aiDifficulty??"medium"}saveAiSettings(){let n={useApi:this.useApiForAI,aiDifficulty:this.aiDifficulty};this.sudokuService.saveAiSettings(n)}onApiToggleForAI(){this.saveAiSettings(),this.snackBar.open(`Switched to ${this.useApiForAI?"Online API":"Local ("+this.aiDifficulty+")"} puzzles for AI training`,"Close",{duration:3e3})}onAiDifficultyChange(){this.saveAiSettings(),this.snackBar.open(`AI training difficulty set to ${this.aiDifficulty}`,"Close",{duration:2e3})}validateNumber(n,e=0){return typeof n!="number"||isNaN(n)||!isFinite(n)?e:n}createSafeTensor(n,e,i="float32"){try{let r=n.map(o=>Array.isArray(o)?o.map(s=>this.validateNumber(s,0)):this.validateNumber(o,0));return ci(r,e,i)}catch(r){console.error("Error creating tensor:",r);let o=Array.isArray(n[0])?Array(n.length).fill(Array(n[0].length).fill(0)):Array(n.length).fill(0);return ci(o,e,i)}}boardToState(n){let e=[];try{for(let i=0;i<9;i++)for(let r=0;r<9;r++){let o=n[i][r]/9;e.push(this.validateNumber(o,0))}}catch(i){return console.error("Error converting board to state:",i),new Array(81).fill(0)}return e}getValidActions(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0){for(let o=1;o<=9;o++)if(this.isValidMove(n,i,r,o)){let s=i*81+r*9+(o-1);e.push(s)}}return e}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=o;a<o+3;a++)for(let l=s;l<s+3;l++)if(n[a][l]===r)return!1;return!0}updateVisualization(n,e){let i=Math.floor(n/81),r=Math.floor(n%81/9),o=n%9+1;this.resetHighlights();let s=this.solution[i][r]===o,a=`${i}-${r}`;this.cellValidationStates[a]=s?"ai-decision-correct":"ai-decision-incorrect",setTimeout(()=>{delete this.cellValidationStates[a],this.cdr.detectChanges()},this.VALIDATION_DISPLAY_TIME),this.cellData[i][r].isHighlighted=!0,this.cellData[i][r].value=o,this.cellHighlights=[{row:i,col:r,value:o}]}getCellValidationClass(n,e){let i=`${n}-${e}`;return this.cellValidationStates[i]||""}calculateAccuracy(){try{let n=0,e=0;for(let i=0;i<9;i++)for(let r=0;r<9;r++)this.currentTrainingBoard[i][r]!==0&&(e++,this.currentTrainingBoard[i][r]===this.solution[i][r]&&n++);return e>0?n/e*100:0}catch(n){return console.error("Error calculating accuracy:",n),0}}trainWithAlgorithm(){let n=()=>{if(this.isTraining)if(this.episodes++,this.progress=Math.min(100,this.episodes*2),this.accuracy=Math.min(95,this.episodes*.8+Math.random()*5),this.currentReward=-50+this.episodes*.5+(Math.random()-.5)*10,this.averageReward=this.currentReward*.9,this.generateNetworkVisualization(),this.episodes%5===0&&this.updateCharts(),this.progress<100){let e=1e3-this.trainingSpeed*9;setTimeout(n,e)}else this.progress=100,this.isTraining=!1,this.snackBar.open("Training complete!","Close",{duration:3e3})};n()}updateCharts(){try{(!this.accuracyChartData||!Array.isArray(this.accuracyChartData)||this.accuracyChartData.length===0)&&(this.accuracyChartData=[{name:this.selectedAlgorithm.toUpperCase()+" Accuracy",series:[]}]),(!this.rewardChartData||!Array.isArray(this.rewardChartData)||this.rewardChartData.length===0)&&(this.rewardChartData=[{name:this.selectedAlgorithm.toUpperCase()+" Reward",series:[]}]),(!this.lossChartData||!Array.isArray(this.lossChartData)||this.lossChartData.length===0)&&(this.lossChartData=[{name:this.selectedAlgorithm==="ppo"?"Actor Loss":"Q-Value",series:[]}]),this.accuracyChartData[0].series||(this.accuracyChartData[0].series=[]),this.rewardChartData[0].series||(this.rewardChartData[0].series=[]),this.lossChartData[0].series||(this.lossChartData[0].series=[]);let n={name:this.episodes.toString(),value:this.validateNumber(this.accuracy,0)},e={name:this.episodes.toString(),value:this.validateNumber(this.currentReward,0)};this.accuracyChartData[0].series.push(n),this.rewardChartData[0].series.push(e),this.accuracyChartData[0].series.length>50&&(this.accuracyChartData[0].series=this.accuracyChartData[0].series.slice(-50)),this.rewardChartData[0].series.length>50&&(this.rewardChartData[0].series=this.rewardChartData[0].series.slice(-50)),this.selectedAlgorithm==="ppo"&&(this.lossChartData.length<2&&(this.lossChartData=[{name:"Actor Loss",series:[]},{name:"Critic Loss",series:[]}]),this.lossChartData[0].series||(this.lossChartData[0].series=[]),this.lossChartData[1].series||(this.lossChartData[1].series=[]),this.lossChartData[0].series.push({name:this.episodes.toString(),value:this.validateNumber(this.actorLoss,0)}),this.lossChartData[1].series.push({name:this.episodes.toString(),value:this.validateNumber(this.criticLoss,0)}),this.lossChartData[0].series.length>50&&(this.lossChartData[0].series=this.lossChartData[0].series.slice(-50),this.lossChartData[1].series=this.lossChartData[1].series.slice(-50))),this.selectedAlgorithm==="dqn"&&(this.lossChartData.length<2&&(this.lossChartData=[{name:"Q-Value",series:[]},{name:"Exploration Rate",series:[]}]),this.lossChartData[0].series||(this.lossChartData[0].series=[]),this.lossChartData[1].series||(this.lossChartData[1].series=[]),this.lossChartData[0].series.push({name:this.episodes.toString(),value:this.validateNumber(this.qValue,0)}),this.lossChartData[1].series.push({name:this.episodes.toString(),value:this.validateNumber(this.explorationRate,0)}),this.lossChartData[0].series.length>50&&(this.lossChartData[0].series=this.lossChartData[0].series.slice(-50),this.lossChartData[1].series=this.lossChartData[1].series.slice(-50))),this.accuracyChartData=[...this.accuracyChartData],this.rewardChartData=[...this.rewardChartData],this.lossChartData=[...this.lossChartData],console.log(`Charts updated - Episode ${this.episodes}: Accuracy: ${this.accuracy.toFixed(1)}%, Reward: ${this.currentReward.toFixed(2)}`)}catch(n){console.error("Error updating charts:",n),this.initializeChartData()}}generateNetworkVisualization(){let n=this.selectedAlgorithm==="ppo"?[81,256,128,64,729]:[81,128,64,729];this.networkVisualization=[];for(let e=0;e<n.length;e++){let i=[];for(let r=0;r<n[e];r++)(r<10||r>n[e]-5||r%Math.ceil(n[e]/10)===0)&&i.push({id:`${e}_${r}`,value:Math.random(),size:e===0||e===n.length-1?"small":"medium"});this.networkVisualization.push(i)}}testModel(){return W(this,null,function*(){this.selectedAlgorithm==="ppo"?yield this.testPPOModel():this.selectedAlgorithm==="dqn"?yield this.testDQNModel():this.testSimulatedModel()})}testPPOModel(){return W(this,null,function*(){this.resetHighlights();let n=JSON.parse(JSON.stringify(this.board)),e=0,i=50;try{for(;e<i&&this.getValidActions(n).length!==0;){let{action:o}=yield this.ppoAgent.selectAction(n),s=this.ppoAgent.applyAction(n,o);if(this.updateVisualization(o,s.reward),n.splice(0,n.length,...s.newBoard),e++,s.done){this.snackBar.open("PPO Agent solved the puzzle!","Close",{duration:3e3});break}yield new Promise(a=>setTimeout(a,200))}}catch(r){console.error("Error testing PPO model:",r),this.snackBar.open("Error testing model","Close",{duration:3e3})}})}testDQNModel(){return W(this,null,function*(){this.resetHighlights();let n=JSON.parse(JSON.stringify(this.board)),e=0,i=50;try{for(;e<i&&this.getValidActions(n).length!==0;){let{action:o,qValue:s}=yield this.dqnAgent.selectAction(n),a=this.dqnAgent.applyAction(n,o);if(this.updateVisualization(o,a.reward),this.qValue=s,n.splice(0,n.length,...a.newBoard),e++,a.done){this.snackBar.open("DQN Agent solved the puzzle!","Close",{duration:3e3});break}yield new Promise(l=>setTimeout(l,200))}}catch(r){console.error("Error testing DQN model:",r),this.snackBar.open("Error testing model","Close",{duration:3e3})}})}testSimulatedModel(){this.resetHighlights();let n=0,e=10,i=()=>{if(n>=e){this.snackBar.open("Simulated model test complete!","Close",{duration:3e3});return}let r=[];for(let o=0;o<9;o++)for(let s=0;s<9;s++)this.cellData[o][s].value===0&&r.push({row:o,col:s});if(r.length>0){let o=r[Math.floor(Math.random()*r.length)],s=Math.floor(Math.random()*9)+1;this.resetHighlights(),this.cellData[o.row][o.col].isHighlighted=!0,this.cellData[o.row][o.col].value=s,this.cellHighlights=[{row:o.row,col:o.col,value:s}]}n++,setTimeout(i,500)};i()}saveModel(){return W(this,null,function*(){this.selectedAlgorithm==="ppo"?yield this.savePPOModel():this.selectedAlgorithm==="dqn"?yield this.saveDQNModel():this.saveSimulatedModel()})}savePPOModel(){return W(this,null,function*(){try{let n=yield this.ppoAgent.exportWeights(),e=this.ppoAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,entropyCoef:e.entropyCoef},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()};localStorage.setItem("sudoku_ai_model",JSON.stringify(i)),this.snackBar.open("PPO Model saved successfully!","Close",{duration:3e3})}catch(n){console.error("Error saving PPO model:",n),this.snackBar.open("Error saving model","Close",{duration:3e3})}})}saveDQNModel(){return W(this,null,function*(){try{let n=yield this.dqnAgent.exportWeights(),e=this.dqnAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,gamma:e.gamma,epsilon:e.epsilon,epsilonDecay:e.epsilonDecay,targetUpdateFreq:e.targetUpdateFreq},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()};localStorage.setItem("sudoku_ai_model",JSON.stringify(i)),this.snackBar.open("DQN Model saved successfully!","Close",{duration:3e3})}catch(n){console.error("Error saving DQN model:",n),this.snackBar.open("Error saving model","Close",{duration:3e3})}})}saveSimulatedModel(){let n={algorithm:this.selectedAlgorithm,weights:{},configuration:re({learningRate:this.learningRate,batchSize:this.batchSize},this.selectedAlgorithm==="ppo"?{entropyCoef:this.entropyCoef}:{gamma:this.gamma}),stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()};localStorage.setItem("sudoku_ai_model",JSON.stringify(n)),this.snackBar.open("Model saved successfully!","Close",{duration:3e3})}loadModel(){return W(this,null,function*(){this.selectedAlgorithm==="ppo"?yield this.loadPPOModel():this.selectedAlgorithm==="dqn"?yield this.loadDQNModel():this.loadSimulatedModel()})}loadPPOModel(){return W(this,null,function*(){try{let n=localStorage.getItem("sudoku_ai_model");if(n){let e=JSON.parse(n);if(e.algorithm==="ppo"&&e.weights)yield this.initializePPOAgent(),yield this.ppoAgent.importWeights(e.weights),this.learningRate=e.configuration.learningRate,this.batchSize=e.configuration.batchSize,e.configuration.entropyCoef&&(this.entropyCoef=e.configuration.entropyCoef),this.accuracy=e.stats.accuracy,this.averageReward=e.stats.averageReward,this.episodes=e.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("PPO Model loaded successfully!","Close",{duration:3e3});else throw new Error("Invalid PPO model data")}else this.snackBar.open("No saved PPO model found!","Close",{duration:3e3})}catch(n){console.error("Error loading PPO model:",n),this.snackBar.open("Failed to load model","Close",{duration:3e3})}})}loadDQNModel(){return W(this,null,function*(){try{let n=localStorage.getItem("sudoku_ai_model");if(n){let e=JSON.parse(n);if(e.algorithm==="dqn"&&e.weights)yield this.initializeDQNAgent(),yield this.dqnAgent.importWeights(e.weights),this.learningRate=e.configuration.learningRate,this.batchSize=e.configuration.batchSize,e.configuration.gamma&&(this.gamma=e.configuration.gamma),e.configuration.epsilon&&(this.epsilon=e.configuration.epsilon),e.configuration.epsilonDecay&&(this.epsilonDecay=e.configuration.epsilonDecay),e.configuration.targetUpdateFreq&&(this.targetUpdateFreq=e.configuration.targetUpdateFreq),this.accuracy=e.stats.accuracy,this.averageReward=e.stats.averageReward,this.episodes=e.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("DQN Model loaded successfully!","Close",{duration:3e3});else throw new Error("Invalid DQN model data")}else this.snackBar.open("No saved DQN model found!","Close",{duration:3e3})}catch(n){console.error("Error loading DQN model:",n),this.snackBar.open("Failed to load model","Close",{duration:3e3})}})}loadSimulatedModel(){try{let n=localStorage.getItem("sudoku_ai_model");if(n){let e=JSON.parse(n);this.learningRate=e.configuration.learningRate,this.batchSize=e.configuration.batchSize,e.configuration.entropyCoef&&(this.entropyCoef=e.configuration.entropyCoef),e.configuration.gamma&&(this.gamma=e.configuration.gamma),this.accuracy=e.stats.accuracy,this.averageReward=e.stats.averageReward,this.episodes=e.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("Model loaded successfully!","Close",{duration:3e3})}else this.snackBar.open("No saved model found!","Close",{duration:3e3})}catch(n){console.error("Error loading model:",n),this.snackBar.open("Failed to load model","Close",{duration:3e3})}}generateNewSudoku(){this.initializeBoard(),this.resetHighlights(),this.snackBar.open("New puzzle generated!","Close",{duration:2e3})}testOnCurrentBoard(){this.testModel()}getVisibleNodes(n){return n<=5?Array.from({length:n},(i,r)=>r):Array.from({length:5},(i,r)=>r)}onCellClick(n,e){this.isTraining||console.log(`Cell clicked: (${n}, ${e})`)}onAlgorithmChange(){return W(this,null,function*(){this.isTraining&&this.stopTraining(),this.selectedAlgorithm==="ppo"?yield this.initializePPOAgent():this.selectedAlgorithm==="dqn"&&(yield this.initializeDQNAgent()),this.updateNetworkArchitecture(),this.resetTrainingStats(),this.snackBar.open(`Switched to ${this.selectedAlgorithm.toUpperCase()} algorithm`,"Close",{duration:2e3})})}resetTrainingStats(){this.progress=0,this.episodes=0,this.accuracy=0,this.averageReward=0,this.currentReward=0,this.actorLoss=0,this.criticLoss=0,this.avgAdvantage=0,this.qValue=0,this.explorationRate=0,this.totalSteps=0,this.accuracyChartData=[{name:"Accuracy",series:[]}],this.rewardChartData=[{name:"Reward",series:[]}],this.lossChartData=[{name:"Loss",series:[]}],this.comparisonChartData=[{name:"Comparison",value:0}]}updateNetworkArchitecture(){this.selectedAlgorithm==="ppo"?(this.networkArchitecture=[{name:"Input",units:81},{name:"Hidden 1",units:256},{name:"Hidden 2",units:128},{name:"Hidden 3",units:64},{name:"Policy/Value",units:729}],this.hasNeuralNetwork=!0):this.selectedAlgorithm==="dqn"?(this.networkArchitecture=[{name:"Input",units:81},{name:"Shared",units:128},{name:"Value Stream",units:64},{name:"Advantage Stream",units:64},{name:"Q-Values",units:729}],this.hasNeuralNetwork=!0):(this.networkArchitecture=[],this.hasNeuralNetwork=!1),this.showNetworkVisualization=this.hasNeuralNetwork}updatePPOConfig(){return W(this,null,function*(){if(this.selectedAlgorithm==="ppo"){let n={learningRate:this.learningRate,batchSize:this.batchSize,entropyCoef:this.entropyCoef};this.ppoAgent.updateConfig(n)}})}updateDQNConfig(){return W(this,null,function*(){if(this.selectedAlgorithm==="dqn"){let n={learningRate:this.learningRate,batchSize:this.batchSize,gamma:this.gamma,epsilon:this.epsilon,epsilonDecay:this.epsilonDecay,targetUpdateFreq:this.targetUpdateFreq};this.dqnAgent.updateConfig(n)}})}updateChartsFromLoadedModel(){let n=Math.min(10,this.episodes);for(let e=1;e<=n;e++){let i=Math.floor(this.episodes/n*e),r=e/n;this.accuracyChartData[0].series.push({name:i.toString(),value:this.accuracy*r}),this.rewardChartData[0].series.push({name:i.toString(),value:this.averageReward*r})}this.accuracyChartData=[...this.accuracyChartData],this.rewardChartData=[...this.rewardChartData]}triggerFileInput(){this.fileInput.nativeElement.click()}onFileSelected(n){let e=n.target.files[0];if(e&&e.type==="application/json"){let i=new FileReader;i.onload=r=>{try{let o=JSON.parse(r.target?.result);this.importModelFromFile(o)}catch(o){console.error("Error parsing model file:",o),this.snackBar.open("Invalid model file format","Close",{duration:3e3})}},i.readAsText(e)}else this.snackBar.open("Please select a valid JSON file","Close",{duration:3e3});n.target.value=""}importModelFromFile(n){return W(this,null,function*(){try{n.algorithm==="ppo"?(yield this.initializePPOAgent(),yield this.ppoAgent.importWeights(n.weights),this.selectedAlgorithm=n.algorithm,this.learningRate=n.configuration.learningRate,this.batchSize=n.configuration.batchSize,n.configuration.entropyCoef&&(this.entropyCoef=n.configuration.entropyCoef),this.accuracy=n.stats.accuracy,this.averageReward=n.stats.averageReward,this.episodes=n.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("PPO Model imported successfully!","Close",{duration:3e3})):n.algorithm==="dqn"?(yield this.initializeDQNAgent(),yield this.dqnAgent.importWeights(n.weights),this.selectedAlgorithm=n.algorithm,this.learningRate=n.configuration.learningRate,this.batchSize=n.configuration.batchSize,n.configuration.gamma&&(this.gamma=n.configuration.gamma),n.configuration.epsilon&&(this.epsilon=n.configuration.epsilon),n.configuration.epsilonDecay&&(this.epsilonDecay=n.configuration.epsilonDecay),n.configuration.targetUpdateFreq&&(this.targetUpdateFreq=n.configuration.targetUpdateFreq),this.accuracy=n.stats.accuracy,this.averageReward=n.stats.averageReward,this.episodes=n.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("DQN Model imported successfully!","Close",{duration:3e3})):this.snackBar.open("Unsupported model format","Close",{duration:3e3}),this.updateNetworkArchitecture()}catch(e){console.error("Error importing model:",e),this.snackBar.open("Failed to import model","Close",{duration:3e3})}})}exportModel(){return W(this,null,function*(){try{if(this.selectedAlgorithm==="ppo"){let n=yield this.ppoAgent.exportWeights(),e=this.ppoAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,entropyCoef:e.entropyCoef},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()},r=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`sudoku-ppo-model-${Date.now()}.json`,s.click(),window.URL.revokeObjectURL(o),this.snackBar.open("PPO Model exported successfully!","Close",{duration:3e3})}else if(this.selectedAlgorithm==="dqn"){let n=yield this.dqnAgent.exportWeights(),e=this.dqnAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,gamma:e.gamma,epsilon:e.epsilon,epsilonDecay:e.epsilonDecay,targetUpdateFreq:e.targetUpdateFreq},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()},r=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`sudoku-dqn-model-${Date.now()}.json`,s.click(),window.URL.revokeObjectURL(o),this.snackBar.open("DQN Model exported successfully!","Close",{duration:3e3})}else this.snackBar.open("No trained model to export","Close",{duration:3e3})}catch(n){console.error("Error exporting model:",n),this.snackBar.open("Failed to export model","Close",{duration:3e3})}})}newBoard(){this.generateNewSudoku()}backToMenu(){this.isTraining&&this.stopTraining(),this.ppoAgent.dispose(),this.dqnAgent.dispose(),this.router.navigate(["/menu"])}static \u0275fac=function(e){return new(e||t)(Ae(as),Ae(cg),Ae(Ev),Ae(pA),Ae(hA),Ae(mn))};static \u0275cmp=Ne({type:t,selectors:[["app-ai-learning"]],viewQuery:function(e,i){if(e&1&&an(h4e,5),e&2){let r;Gt(r=Ut())&&(i.fileInput=r.first)}},decls:12,vars:2,consts:[["fileInput",""],[1,"ai-learning-container"],[1,"ai-header"],["mat-icon-button","",1,"back-button",3,"click"],[1,"ai-title"],["mat-icon-button","",1,"new-board-button",3,"click"],["class","loading-container",4,"ngIf"],["class","ai-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"ai-content"],[1,"ai-controls"],[1,"control-group"],[1,"puzzle-source-controls"],[1,"setting-item"],[3,"ngModelChange","change","ngModel","color","checked"],["class","setting-item",4,"ngIf"],[1,"puzzle-source-status"],[1,"status-indicator"],[3,"ngModelChange","selectionChange","ngModel","disabled"],["value","ppo"],["value","dqn"],["mat-icon-button","",1,"toggle-button",3,"click"],["class","advanced-settings",4,"ngIf"],[1,"algorithm-description"],[4,"ngIf"],["min","1","max","100","step","1",3,"disabled"],["matSliderThumb","",3,"ngModelChange","ngModel"],[1,"action-buttons"],["mat-raised-button","",1,"primary-action",3,"click","color"],["mat-stroked-button","","color","accent",3,"click","disabled"],["mat-stroked-button","",3,"click","disabled"],[1,"model-management"],[1,"model-actions"],["mat-button","",3,"click","disabled"],["mat-button","",3,"click"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"ai-board-area"],[1,"board-card"],[1,"sudoku-board"],[1,"board-grid"],["class","board-section",4,"ngFor","ngForOf"],["class","current-move",4,"ngIf"],["class","model-performance",4,"ngIf"],["class","ai-analytics",4,"ngIf"],[3,"ngModelChange","selectionChange","ngModel"],["value","easy"],["value","medium"],["value","hard"],["value","expert"],[1,"advanced-settings"],[1,"setting-row"],[1,"slider-with-value"],["min","0.0001","max","0.01","step","0.0001",3,"disabled"],["min","16","max","128","step","16",3,"disabled"],["class","setting-row",4,"ngIf"],["min","0.001","max","0.1","step","0.001",3,"disabled"],["min","0.9","max","0.99","step","0.01",3,"disabled"],[1,"progress-section"],[1,"progress-header"],["mode","determinate",3,"value"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],["class","stat-item",4,"ngIf"],[1,"board-section"],[3,"value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted","ai-decision-correct","ai-decision-incorrect","cellClick",4,"ngFor","ngForOf"],[3,"cellClick","value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted"],[1,"current-move"],["class","highlight-info",4,"ngFor","ngForOf"],[1,"highlight-info"],[1,"move-details"],[1,"row-col"],[1,"value"],[1,"action-reasoning"],[1,"model-performance"],[1,"performance-stats"],[1,"performance-stat"],[1,"perf-label"],[1,"perf-value"],[1,"ai-analytics"],[1,"analytics-card"],[1,"chart-section"],[3,"results","view","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","autoScale"],["class","network-visualization",4,"ngIf"],[1,"network-visualization"],[1,"network-viz"],["class","network-layer",4,"ngFor","ngForOf"],[1,"network-layer"],[1,"layer-label"],[1,"layer-nodes"],["class","node",3,"ngClass",4,"ngFor","ngForOf"],["class","node-count",4,"ngIf"],[1,"node",3,"ngClass"],[1,"node-count"]],template:function(e,i){e&1&&(M(0,"div",1)(1,"div",2)(2,"button",3),_e("click",function(){return i.backToMenu()}),M(3,"mat-icon"),X(4,"arrow_back"),O()(),M(5,"h2",4),X(6,"Watch AI Learn Sudoku"),O(),M(7,"button",5),_e("click",function(){return i.newBoard()}),M(8,"mat-icon"),X(9,"refresh"),O()()(),be(10,f4e,4,0,"div",6)(11,P4e,100,33,"div",7),O()),e&2&&(V(10),J("ngIf",i.loading),V(),J("ngIf",!i.loading))},dependencies:[mi,Np,Wr,Yn,Ex,fo,ds,Kp,Jf,Xf,Yf,Zf,Qf,Kf,Na,Aa,zv,Bv,rh,P5,L5,z5,B5,RF,zS,hg,VS,FS,LS,$v,nX,eX,ag],styles:[".ai-learning-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin:0 auto;padding:1rem;height:100vh;box-sizing:border-box;max-width:100%;overflow-x:hidden}.ai-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;padding:0 .5rem;width:100%}.ai-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:600;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.back-button[_ngcontent-%COMP%], .new-board-button[_ngcontent-%COMP%]{color:#6b7280}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:calc(100vh - 5rem)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left:4px solid #3f51b5;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ai-content[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 7rem);gap:1rem;overflow:hidden}.ai-controls[_ngcontent-%COMP%]{width:300px;min-width:250px;max-width:300px;display:flex;flex-direction:column;gap:1rem;overflow-y:auto;padding-right:.25rem;height:100%}.ai-board-area[_ngcontent-%COMP%]{width:550px;min-width:450px;max-width:550px;display:flex;flex-direction:column;align-items:center;gap:1rem;overflow-y:auto;height:100%;padding:0 .25rem}.ai-analytics[_ngcontent-%COMP%]{flex:1;min-width:350px;display:flex;flex-direction:column;height:100%;overflow-y:auto}.board-card[_ngcontent-%COMP%]{width:100%;max-width:500px}.sudoku-board[_ngcontent-%COMP%]{width:100%;max-width:450px;aspect-ratio:1;margin:0 auto;padding:4px;box-sizing:border-box}.board-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:4px;width:100%;height:100%;border:3px solid #333;background-color:#333;box-sizing:border-box;border-radius:8px;overflow:hidden}.board-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:1px;background-color:#ddd;border-radius:4px;overflow:hidden;box-sizing:border-box;width:100%;height:100%}.board-section[_ngcontent-%COMP%]   app-cell[_ngcontent-%COMP%]{width:100%;height:100%;min-width:0;min-height:0;box-sizing:border-box}.algorithm-description[_ngcontent-%COMP%]{background-color:#f3f4f6;border-radius:8px;padding:1.25rem;margin:.5rem 0 1.5rem;border-left:4px solid #4c1d95}.algorithm-description[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem;color:#4c1d95}.algorithm-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;line-height:1.4;color:#4b5563}.model-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1rem;justify-content:space-between}.model-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:110px;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem}.save-btn[_ngcontent-%COMP%]{background:#10b981;color:#fff}.save-btn[_ngcontent-%COMP%]:hover{background:#059669;box-shadow:0 4px 12px #10b9814d}.download-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.download-btn[_ngcontent-%COMP%]:hover{background:#2563eb;box-shadow:0 4px 12px #3b82f64d}.load-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#4b5563;border:2px solid #e5e7eb}.load-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;box-shadow:0 4px 12px #0000001a}.dark-theme[_nghost-%COMP%]   .save-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .save-btn[_ngcontent-%COMP%]{box-shadow:0 4px 12px #10b98133}.dark-theme[_nghost-%COMP%]   .download-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .download-btn[_ngcontent-%COMP%]{box-shadow:0 4px 12px #3b82f633}.dark-theme[_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%]{background:#4b5563;color:#f3f4f6;border-color:#6b7280}.dark-theme[_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%]:hover{background:#6b7280;box-shadow:0 4px 12px #0003}.chart-container[_ngcontent-%COMP%]{height:180px;margin:1rem 0;background-color:#f9fafb;border-radius:10px;padding:.5rem;box-shadow:0 1px 3px #0000000d;overflow:hidden}[_nghost-%COMP%]     .ngx-charts{float:none;overflow:visible}[_nghost-%COMP%]     .ngx-charts .line-series .line{stroke-width:2.5;stroke-linejoin:round;stroke-linecap:round}[_nghost-%COMP%]     .ngx-charts .line-highlight{display:none}[_nghost-%COMP%]     .ngx-charts .line-series-area{opacity:.25}[_nghost-%COMP%]     .ngx-charts text{font-size:10px!important;font-weight:400}[_nghost-%COMP%]     .chart-legend{display:none!important}[_nghost-%COMP%]     .ngx-charts .grid-panel.odd rect{fill:#00000005}[_nghost-%COMP%]     .ngx-charts .tick text{font-size:9px!important}[_nghost-%COMP%]     .ngx-charts .x-axis, [_nghost-%COMP%]     .ngx-charts .y-axis{font-weight:400}[_nghost-%COMP%]     .ngx-charts .axis-label{font-size:11px!important;font-weight:500!important}[_nghost-%COMP%]     .ngx-charts .circle-series circle{stroke-width:1;r:2.5}.dark-theme[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]{background-color:#1f2937}.dark-theme[_nghost-%COMP%]     .ngx-charts .grid-panel.odd rect, .dark-theme   [_nghost-%COMP%]     .ngx-charts .grid-panel.odd rect{fill:#ffffff05}.dark-theme[_nghost-%COMP%]     .ngx-charts text, .dark-theme   [_nghost-%COMP%]     .ngx-charts text{fill:#d1d5db!important}.dark-theme[_nghost-%COMP%]     .ngx-charts .line-series-area, .dark-theme   [_nghost-%COMP%]     .ngx-charts .line-series-area{opacity:.15}.board-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;width:100%;max-width:500px}.board-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem}.stats[_ngcontent-%COMP%]{margin-top:1.5rem}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px dashed #e5e7eb}.stat-item[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.stat-label[_ngcontent-%COMP%]{font-weight:500;color:#4b5563}.stat-value[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:#4c1d95;font-weight:600}.network-visualization[_ngcontent-%COMP%]{margin-top:1rem}.network-visualization[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1rem;text-align:center}.network-viz[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;padding:1rem;background-color:#f8fafc;border-radius:8px;overflow-x:auto}.network-layer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem}.layer-label[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b}.layer-nodes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:center}.node[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%}.node.small[_ngcontent-%COMP%]{width:8px;height:8px}.node.medium[_ngcontent-%COMP%]{width:12px;height:12px}.node-count[_ngcontent-%COMP%]{font-size:.7rem;color:#94a3b8;margin-top:.25rem}.current-move[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background-color:#f8fafc;border-radius:8px;border-left:4px solid #4c1d95}.current-move[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1.1rem}.highlight-info[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;margin-bottom:.75rem}.highlight-info[_ngcontent-%COMP%]:last-child{margin-bottom:0}.move-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fff;border-radius:6px;padding:.5rem;min-width:60px}.row-col[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500}.value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#4c1d95;margin-top:.25rem}.action-reasoning[_ngcontent-%COMP%]{flex:1}.action-reasoning[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;line-height:1.4;color:#4b5563}.model-management[_ngcontent-%COMP%]{margin-top:1.5rem}.model-management[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1.1rem}.model-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}.model-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem .5rem;font-size:.85rem}.progress-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-weight:500;color:#4b5563}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-top:1rem}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin:1.5rem 0}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem}.primary-action[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4c1d95,#7c3aed);color:#fff}.primary-action[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3c1367,#6d28d9)}.ai-analytics[_ngcontent-%COMP%]{width:100%;margin-top:1rem;clear:both}.analytics-card[_ngcontent-%COMP%]{width:100%;max-width:none}.charts-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:1rem;width:100%;overflow-x:auto}.chart-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:400px}.chart-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1rem;text-align:center}.puzzle-source-controls[_ngcontent-%COMP%]{margin:1rem 0;padding:1rem;background:#3f51b50d;border-radius:8px;border-left:4px solid #3f51b5}.puzzle-source-controls[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding:.75rem;background:#fff;border-radius:6px;box-shadow:0 1px 3px #0000001a}.puzzle-source-controls[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.puzzle-source-controls[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500;color:#374151}.puzzle-source-controls[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{min-width:120px;background:#f3f4f6;border-radius:6px;padding:.5rem;border:1px solid #e5e7eb;font-size:.9rem}.puzzle-source-status[_ngcontent-%COMP%]{margin-top:.75rem;padding:.75rem;background:#f8fafc;border-radius:6px;border:1px solid #e2e8f0}.status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem;font-weight:500;transition:all .3s ease}.status-indicator.api-active[_ngcontent-%COMP%]{color:#059669}.status-indicator.api-active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#10b981}.status-indicator.local-active[_ngcontent-%COMP%]{color:#ea580c}.status-indicator.local-active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f97316}.status-indicator[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.1rem;width:1.1rem;height:1.1rem}.dark-theme[_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%]{background:#3f51b526;border-left-color:#7986cb}.dark-theme[_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{background:#374151;color:#f3f4f6;box-shadow:0 1px 3px #0003}.dark-theme[_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f3f4f6}.dark-theme[_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .puzzle-source-controls[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{background:#4b5563;color:#f3f4f6;border-color:#6b7280}.dark-theme[_nghost-%COMP%]   .puzzle-source-status[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .puzzle-source-status[_ngcontent-%COMP%]{background:#374151;border-color:#4b5563}.dark-theme[_nghost-%COMP%]   .status-indicator.api-active[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .status-indicator.api-active[_ngcontent-%COMP%]{color:#34d399}.dark-theme[_nghost-%COMP%]   .status-indicator.local-active[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .status-indicator.local-active[_ngcontent-%COMP%]{color:#fb923c}.dark-theme[_nghost-%COMP%]   .current-move[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .current-move[_ngcontent-%COMP%]{background-color:#1f2937;border-left-color:#7c3aed}.dark-theme[_nghost-%COMP%]   .current-move[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .current-move[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#c4b5fd}.dark-theme[_nghost-%COMP%]   .move-details[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .move-details[_ngcontent-%COMP%]{background-color:#374151}.dark-theme[_nghost-%COMP%]   .value[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .value[_ngcontent-%COMP%]{color:#c4b5fd}.dark-theme[_nghost-%COMP%]   .performance-stat[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .performance-stat[_ngcontent-%COMP%]{background-color:#374151}.dark-theme[_nghost-%COMP%]   .perf-value[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .perf-value[_ngcontent-%COMP%]{color:#c4b5fd}.dark-theme[_nghost-%COMP%]   .chart-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .chart-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#c4b5fd}.setting-item[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{margin-left:1rem;min-width:50px}[_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-switch{width:52px;height:32px}[_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-switch__track{border-radius:16px;background-color:#00000026;opacity:1}[_nghost-%COMP%]     .mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked .mdc-switch__track{background-color:#3f51b580}[_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-switch__handle-track{transition:all .3s ease}[_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-switch__handle{width:24px;height:24px;border-radius:50%}[_nghost-%COMP%]     .mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked .mdc-switch__handle{background:#3f51b5}.control-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.75rem;color:#374151}.dark-theme[_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-switch__track, .dark-theme   [_nghost-%COMP%]     .mat-mdc-slide-toggle .mdc-switch__track{background-color:#ffffff26}.dark-theme[_nghost-%COMP%]     .mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked .mdc-switch__track, .dark-theme   [_nghost-%COMP%]     .mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked .mdc-switch__track{background-color:#7c3aed80}.dark-theme[_nghost-%COMP%]     .mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked .mdc-switch__handle, .dark-theme   [_nghost-%COMP%]     .mat-mdc-slide-toggle.mat-mdc-slide-toggle-checked .mdc-switch__handle{background-color:#7c3aed}.dark-theme[_nghost-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .control-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#f3f4f6}@media (max-width: 1400px){.ai-content[_ngcontent-%COMP%]{flex-wrap:wrap}.ai-controls[_ngcontent-%COMP%]{width:30%;min-width:300px}.ai-board-area[_ngcontent-%COMP%]{width:calc(70% - 300px);min-width:450px}.ai-analytics[_ngcontent-%COMP%]{width:100%;margin-top:1rem;height:auto;max-height:600px}}@media (max-width: 1100px){.ai-content[_ngcontent-%COMP%]{flex-direction:column;height:auto}.ai-controls[_ngcontent-%COMP%], .ai-board-area[_ngcontent-%COMP%], .ai-analytics[_ngcontent-%COMP%]{width:100%;min-width:100%;max-width:100%;height:auto}.ai-board-area[_ngcontent-%COMP%]{order:1}.ai-controls[_ngcontent-%COMP%]{order:2}.ai-analytics[_ngcontent-%COMP%]{order:3}.sudoku-board[_ngcontent-%COMP%]{max-width:400px}}"]})};var hae=[{path:"",redirectTo:"menu",pathMatch:"full"},{path:"menu",component:uS},{path:"game",component:wS},{path:"settings",component:jS},{path:"ai-learning",component:mA},{path:"**",redirectTo:"menu"}];var mae={providers:[QG({eventCoalescing:!0}),tR(hae),AO(),CW()]};var fA=class t{constructor(n){this.themeService=n}title="Sudoku Game";isDarkMode=!1;ngOnInit(){this.themeService.isDarkMode$.subscribe(n=>{this.isDarkMode=n})}toggleTheme(){this.themeService.toggleTheme()}static \u0275fac=function(e){return new(e||t)(Ae(mg))};static \u0275cmp=Ne({type:t,selectors:[["app-root"]],decls:16,vars:2,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],["mat-icon-button","",1,"theme-toggle",3,"click"],[1,"app-content"],[1,"app-footer"],[1,"footer-content"],["href","https://sudoku-api.vercel.app/","target","_blank"]],template:function(e,i){e&1&&(M(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1"),X(4,"\u6570\u72EC Sudoku"),O(),M(5,"button",3),_e("click",function(){return i.toggleTheme()}),M(6,"mat-icon"),X(7),O()()()(),M(8,"main",4),Ee(9,"router-outlet"),O(),M(10,"footer",5)(11,"div",6)(12,"p"),X(13,"Powered by "),M(14,"a",7),X(15,"Dosuku API"),O()()()()()),e&2&&(V(5),$e("aria-label",i.isDarkMode?"Switch to light mode":"Switch to dark mode"),V(2),xt(i.isDarkMode?"light_mode":"dark_mode"))},dependencies:[mi,ev,Na,Aa,fo,Kp],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);min-height:100vh}[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;width:100%;margin:0;padding:0}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:0;box-shadow:0 2px 10px #0000001a;width:100%;position:sticky;top:0;z-index:100}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;padding:1rem 2rem;width:100%}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:400;letter-spacing:1px;text-shadow:0 1px 2px rgba(0,0,0,.1)}.theme-toggle[_ngcontent-%COMP%]{color:#fff!important;background:#ffffff1a;border-radius:50%;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.theme-toggle[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.theme-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:1.5rem;height:1.5rem}.app-content[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;padding:2rem 1rem;width:100%}.app-footer[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top:1px solid rgba(0,0,0,.1);width:100%;margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem 2rem;text-align:center}.app-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#6b7280}.app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none;font-weight:500;transition:color .2s ease}.app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#2563eb}body.dark-theme[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4c1d95,#5b21b6)!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]{background:#2d2d2de6!important;border-top:1px solid rgba(255,255,255,.1)!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#60a5fa!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#93c5fd!important}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{padding:.75rem 1rem}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.app-content[_ngcontent-%COMP%]{padding:1rem .5rem}.footer-content[_ngcontent-%COMP%]{padding:1rem}}"]})};EO(fA,mae).catch(t=>console.error(t));
