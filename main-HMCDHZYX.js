var gae=Object.create;var B_=Object.defineProperty,yae=Object.defineProperties,bae=Object.getOwnPropertyDescriptor,xae=Object.getOwnPropertyDescriptors,vae=Object.getOwnPropertyNames,V_=Object.getOwnPropertySymbols,_ae=Object.getPrototypeOf,hA=Object.prototype.hasOwnProperty,DB=Object.prototype.propertyIsEnumerable;var EB=(t,n,e)=>n in t?B_(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e,ie=(t,n)=>{for(var e in n||={})hA.call(n,e)&&EB(t,e,n[e]);if(V_)for(var e of V_(n))DB.call(n,e)&&EB(t,e,n[e]);return t},At=(t,n)=>yae(t,xae(n));var mA=(t,n)=>{var e={};for(var i in t)hA.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&V_)for(var i of V_(t))n.indexOf(i)<0&&DB.call(t,i)&&(e[i]=t[i]);return e};var Xo=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),Ko=(t,n)=>{for(var e in n)B_(t,e,{get:n[e],enumerable:!0})},wae=(t,n,e,i)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of vae(n))!hA.call(t,r)&&r!==e&&B_(t,r,{get:()=>n[r],enumerable:!(i=bae(n,r))||i.enumerable});return t};var Gb=(t,n,e)=>(e=t!=null?gae(_ae(t)):{},wae(n||!t||!t.__esModule?B_(e,"default",{value:t,enumerable:!0}):e,t));var H=(t,n,e)=>new Promise((i,r)=>{var o=l=>{try{a(e.next(l))}catch(c){r(c)}},s=l=>{try{a(e.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((e=e.apply(t,n)).next())});var CX=Xo((Gmt,wX)=>{"use strict";wX.exports=zn;var us=null;try{us=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function zn(t,n,e){this.low=t|0,this.high=n|0,this.unsigned=!!e}zn.prototype.__isLong__;Object.defineProperty(zn.prototype,"__isLong__",{value:!0});function xo(t){return(t&&t.__isLong__)===!0}zn.isLong=xo;var hX={},mX={};function Vh(t,n){var e,i,r;return n?(t>>>=0,(r=0<=t&&t<256)&&(i=mX[t],i)?i:(e=Gn(t,(t|0)<0?-1:0,!0),r&&(mX[t]=e),e)):(t|=0,(r=-128<=t&&t<128)&&(i=hX[t],i)?i:(e=Gn(t,t<0?-1:0,!1),r&&(hX[t]=e),e))}zn.fromInt=Vh;function ds(t,n){if(isNaN(t))return n?$h:ps;if(n){if(t<0)return $h;if(t>=bX)return _X}else{if(t<=-gX)return bo;if(t+1>=gX)return vX}return t<0?ds(-t,n).neg():Gn(t%Sy|0,t/Sy|0,n)}zn.fromNumber=ds;function Gn(t,n,e){return new zn(t,n,e)}zn.fromBits=Gn;var dk=Math.pow;function j2(t,n,e){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return ps;if(typeof n=="number"?(e=n,n=!1):n=!!n,e=e||10,e<2||36<e)throw RangeError("radix");var i;if((i=t.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return j2(t.substring(1),n,e).neg();for(var r=ds(dk(e,8)),o=ps,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),e);if(a<8){var c=ds(dk(e,a));o=o.mul(c).add(ds(l))}else o=o.mul(r),o=o.add(ds(l))}return o.unsigned=n,o}zn.fromString=j2;function Ks(t,n){return typeof t=="number"?ds(t,n):typeof t=="string"?j2(t,n):Gn(t.low,t.high,typeof n=="boolean"?n:t.unsigned)}zn.fromValue=Ks;var fX=65536,p1e=1<<24,Sy=fX*fX,bX=Sy*Sy,gX=bX/2,yX=Vh(p1e),ps=Vh(0);zn.ZERO=ps;var $h=Vh(0,!0);zn.UZERO=$h;var Ty=Vh(1);zn.ONE=Ty;var xX=Vh(1,!0);zn.UONE=xX;var W2=Vh(-1);zn.NEG_ONE=W2;var vX=Gn(-1,2147483647,!1);zn.MAX_VALUE=vX;var _X=Gn(-1,-1,!0);zn.MAX_UNSIGNED_VALUE=_X;var bo=Gn(0,-2147483648,!1);zn.MIN_VALUE=bo;var Ae=zn.prototype;Ae.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ae.toNumber=function(){return this.unsigned?(this.high>>>0)*Sy+(this.low>>>0):this.high*Sy+(this.low>>>0)};Ae.toString=function(n){if(n=n||10,n<2||36<n)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(bo)){var e=ds(n),i=this.div(e),r=i.mul(e).sub(this);return i.toString(n)+r.toInt().toString(n)}else return"-"+this.neg().toString(n);for(var o=ds(dk(n,6),this.unsigned),s=this,a="";;){var l=s.div(o),c=s.sub(l.mul(o)).toInt()>>>0,u=c.toString(n);if(s=l,s.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};Ae.getHighBits=function(){return this.high};Ae.getHighBitsUnsigned=function(){return this.high>>>0};Ae.getLowBits=function(){return this.low};Ae.getLowBitsUnsigned=function(){return this.low>>>0};Ae.getNumBitsAbs=function(){if(this.isNegative())return this.eq(bo)?64:this.neg().getNumBitsAbs();for(var n=this.high!=0?this.high:this.low,e=31;e>0&&(n&1<<e)==0;e--);return this.high!=0?e+33:e+1};Ae.isZero=function(){return this.high===0&&this.low===0};Ae.eqz=Ae.isZero;Ae.isNegative=function(){return!this.unsigned&&this.high<0};Ae.isPositive=function(){return this.unsigned||this.high>=0};Ae.isOdd=function(){return(this.low&1)===1};Ae.isEven=function(){return(this.low&1)===0};Ae.equals=function(n){return xo(n)||(n=Ks(n)),this.unsigned!==n.unsigned&&this.high>>>31===1&&n.high>>>31===1?!1:this.high===n.high&&this.low===n.low};Ae.eq=Ae.equals;Ae.notEquals=function(n){return!this.eq(n)};Ae.neq=Ae.notEquals;Ae.ne=Ae.notEquals;Ae.lessThan=function(n){return this.comp(n)<0};Ae.lt=Ae.lessThan;Ae.lessThanOrEqual=function(n){return this.comp(n)<=0};Ae.lte=Ae.lessThanOrEqual;Ae.le=Ae.lessThanOrEqual;Ae.greaterThan=function(n){return this.comp(n)>0};Ae.gt=Ae.greaterThan;Ae.greaterThanOrEqual=function(n){return this.comp(n)>=0};Ae.gte=Ae.greaterThanOrEqual;Ae.ge=Ae.greaterThanOrEqual;Ae.compare=function(n){if(xo(n)||(n=Ks(n)),this.eq(n))return 0;var e=this.isNegative(),i=n.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?n.high>>>0>this.high>>>0||n.high===this.high&&n.low>>>0>this.low>>>0?-1:1:this.sub(n).isNegative()?-1:1};Ae.comp=Ae.compare;Ae.negate=function(){return!this.unsigned&&this.eq(bo)?bo:this.not().add(Ty)};Ae.neg=Ae.negate;Ae.add=function(n){xo(n)||(n=Ks(n));var e=this.high>>>16,i=this.high&65535,r=this.low>>>16,o=this.low&65535,s=n.high>>>16,a=n.high&65535,l=n.low>>>16,c=n.low&65535,u=0,d=0,p=0,h=0;return h+=o+c,p+=h>>>16,h&=65535,p+=r+l,d+=p>>>16,p&=65535,d+=i+a,u+=d>>>16,d&=65535,u+=e+s,u&=65535,Gn(p<<16|h,u<<16|d,this.unsigned)};Ae.subtract=function(n){return xo(n)||(n=Ks(n)),this.add(n.neg())};Ae.sub=Ae.subtract;Ae.multiply=function(n){if(this.isZero())return ps;if(xo(n)||(n=Ks(n)),us){var e=us.mul(this.low,this.high,n.low,n.high);return Gn(e,us.get_high(),this.unsigned)}if(n.isZero())return ps;if(this.eq(bo))return n.isOdd()?bo:ps;if(n.eq(bo))return this.isOdd()?bo:ps;if(this.isNegative())return n.isNegative()?this.neg().mul(n.neg()):this.neg().mul(n).neg();if(n.isNegative())return this.mul(n.neg()).neg();if(this.lt(yX)&&n.lt(yX))return ds(this.toNumber()*n.toNumber(),this.unsigned);var i=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,a=n.high>>>16,l=n.high&65535,c=n.low>>>16,u=n.low&65535,d=0,p=0,h=0,m=0;return m+=s*u,h+=m>>>16,m&=65535,h+=o*u,p+=h>>>16,h&=65535,h+=s*c,p+=h>>>16,h&=65535,p+=r*u,d+=p>>>16,p&=65535,p+=o*c,d+=p>>>16,p&=65535,p+=s*l,d+=p>>>16,p&=65535,d+=i*u+r*c+o*l+s*a,d&=65535,Gn(h<<16|m,d<<16|p,this.unsigned)};Ae.mul=Ae.multiply;Ae.divide=function(n){if(xo(n)||(n=Ks(n)),n.isZero())throw Error("division by zero");if(us){if(!this.unsigned&&this.high===-2147483648&&n.low===-1&&n.high===-1)return this;var e=(this.unsigned?us.div_u:us.div_s)(this.low,this.high,n.low,n.high);return Gn(e,us.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?$h:ps;var i,r,o;if(this.unsigned){if(n.unsigned||(n=n.toUnsigned()),n.gt(this))return $h;if(n.gt(this.shru(1)))return xX;o=$h}else{if(this.eq(bo)){if(n.eq(Ty)||n.eq(W2))return bo;if(n.eq(bo))return Ty;var s=this.shr(1);return i=s.div(n).shl(1),i.eq(ps)?n.isNegative()?Ty:W2:(r=this.sub(n.mul(i)),o=i.add(r.div(n)),o)}else if(n.eq(bo))return this.unsigned?$h:ps;if(this.isNegative())return n.isNegative()?this.neg().div(n.neg()):this.neg().div(n).neg();if(n.isNegative())return this.div(n.neg()).neg();o=ps}for(r=this;r.gte(n);){i=Math.max(1,Math.floor(r.toNumber()/n.toNumber()));for(var a=Math.ceil(Math.log(i)/Math.LN2),l=a<=48?1:dk(2,a-48),c=ds(i),u=c.mul(n);u.isNegative()||u.gt(r);)i-=l,c=ds(i,this.unsigned),u=c.mul(n);c.isZero()&&(c=Ty),o=o.add(c),r=r.sub(u)}return o};Ae.div=Ae.divide;Ae.modulo=function(n){if(xo(n)||(n=Ks(n)),us){var e=(this.unsigned?us.rem_u:us.rem_s)(this.low,this.high,n.low,n.high);return Gn(e,us.get_high(),this.unsigned)}return this.sub(this.div(n).mul(n))};Ae.mod=Ae.modulo;Ae.rem=Ae.modulo;Ae.not=function(){return Gn(~this.low,~this.high,this.unsigned)};Ae.and=function(n){return xo(n)||(n=Ks(n)),Gn(this.low&n.low,this.high&n.high,this.unsigned)};Ae.or=function(n){return xo(n)||(n=Ks(n)),Gn(this.low|n.low,this.high|n.high,this.unsigned)};Ae.xor=function(n){return xo(n)||(n=Ks(n)),Gn(this.low^n.low,this.high^n.high,this.unsigned)};Ae.shiftLeft=function(n){return xo(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?Gn(this.low<<n,this.high<<n|this.low>>>32-n,this.unsigned):Gn(0,this.low<<n-32,this.unsigned)};Ae.shl=Ae.shiftLeft;Ae.shiftRight=function(n){return xo(n)&&(n=n.toInt()),(n&=63)===0?this:n<32?Gn(this.low>>>n|this.high<<32-n,this.high>>n,this.unsigned):Gn(this.high>>n-32,this.high>=0?0:-1,this.unsigned)};Ae.shr=Ae.shiftRight;Ae.shiftRightUnsigned=function(n){if(xo(n)&&(n=n.toInt()),n&=63,n===0)return this;var e=this.high;if(n<32){var i=this.low;return Gn(i>>>n|e<<32-n,e>>>n,this.unsigned)}else return n===32?Gn(e,0,this.unsigned):Gn(e>>>n-32,0,this.unsigned)};Ae.shru=Ae.shiftRightUnsigned;Ae.shr_u=Ae.shiftRightUnsigned;Ae.toSigned=function(){return this.unsigned?Gn(this.low,this.high,!1):this};Ae.toUnsigned=function(){return this.unsigned?this:Gn(this.low,this.high,!0)};Ae.toBytes=function(n){return n?this.toBytesLE():this.toBytesBE()};Ae.toBytesLE=function(){var n=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,n&255,n>>>8&255,n>>>16&255,n>>>24]};Ae.toBytesBE=function(){var n=this.high,e=this.low;return[n>>>24,n>>>16&255,n>>>8&255,n&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};zn.fromBytes=function(n,e,i){return i?zn.fromBytesLE(n,e):zn.fromBytesBE(n,e)};zn.fromBytesLE=function(n,e){return new zn(n[0]|n[1]<<8|n[2]<<16|n[3]<<24,n[4]|n[5]<<8|n[6]<<16|n[7]<<24,e)};zn.fromBytesBE=function(n,e){return new zn(n[4]<<24|n[5]<<16|n[6]<<8|n[7],n[0]<<24|n[1]<<16|n[2]<<8|n[3],e)}});var pK=Xo((Ry,dK)=>{"use strict";var J1e=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Xh=J1e();dK.exports=Ry=Xh.fetch;Xh.fetch&&(Ry.default=Xh.fetch.bind(Xh));Ry.Headers=Xh.Headers;Ry.Request=Xh.Request;Ry.Response=Xh.Response});var hK=Xo(()=>{"use strict"});var LK=Xo((FK,GL)=>{"use strict";(function(t,n,e){function i(a){var l=this,c=s();l.next=function(){var u=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=u-(l.c=u|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function r(a,l){return l.c=a.c,l.s0=a.s0,l.s1=a.s1,l.s2=a.s2,l}function o(a,l){var c=new i(a),u=l&&l.state,d=c.next;return d.int32=function(){return c.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,u&&(typeof u=="object"&&r(u,c),d.state=function(){return r(c,{})}),d}function s(){var a=4022871197,l=function(c){c=String(c);for(var u=0;u<c.length;u++){a+=c.charCodeAt(u);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=d*4294967296}return(a>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.alea=o})(FK,typeof GL=="object"&&GL,typeof define=="function"&&define)});var $K=Xo((PK,UL)=>{"use strict";(function(t,n,e){function i(s){var a=this,l="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var u=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^u^u>>>8},s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,a.next()}function r(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function o(s,a){var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xor128=o})(PK,typeof UL=="object"&&UL,typeof define=="function"&&define)});var BK=Xo((VK,HL)=>{"use strict";(function(t,n,e){function i(s){var a=this,l="";a.next=function(){var u=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(u^u<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:l+=s;for(var c=0;c<l.length+64;c++)a.x^=l.charCodeAt(c)|0,c==l.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function r(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function o(s,a){var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xorwow=o})(VK,typeof HL=="object"&&HL,typeof define=="function"&&define)});var GK=Xo((zK,WL)=>{"use strict";(function(t,n,e){function i(s){var a=this;a.next=function(){var c=a.x,u=a.i,d,p,h;return d=c[u],d^=d>>>7,p=d^d<<24,d=c[u+1&7],p^=d^d>>>10,d=c[u+3&7],p^=d^d>>>3,d=c[u+4&7],p^=d^d<<7,d=c[u+7&7],d=d^d<<13,p^=d^d<<9,c[u]=p,a.i=u+1&7,p};function l(c,u){var d,p,h=[];if(u===(u|0))p=h[0]=u;else for(u=""+u,d=0;d<u.length;++d)h[d&7]=h[d&7]<<15^u.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?p=h[7]=-1:p=h[d],c.x=h,c.i=0,d=256;d>0;--d)c.next()}l(a,s)}function r(s,a){return a.x=s.x.slice(),a.i=s.i,a}function o(s,a){s==null&&(s=+new Date);var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.x&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xorshift7=o})(zK,typeof WL=="object"&&WL,typeof define=="function"&&define)});var HK=Xo((UK,jL)=>{"use strict";(function(t,n,e){function i(s){var a=this;a.next=function(){var c=a.w,u=a.X,d=a.i,p,h;return a.w=c=c+1640531527|0,h=u[d+34&127],p=u[d=d+1&127],h^=h<<13,p^=p<<17,h^=h>>>15,p^=p>>>12,h=u[d]=h^p,a.i=d,h+(c^c>>>16)|0};function l(c,u){var d,p,h,m,g,f=[],y=128;for(u===(u|0)?(p=u,u=null):(u=u+"\0",p=0,y=Math.max(y,u.length)),h=0,m=-32;m<y;++m)u&&(p^=u.charCodeAt((m+32)%u.length)),m===0&&(g=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,m>=0&&(g=g+1640531527|0,d=f[m&127]^=p+g,h=d==0?h+1:0);for(h>=128&&(f[(u&&u.length||0)&127]=-1),h=127,m=4*128;m>0;--m)p=f[h+34&127],d=f[h=h+1&127],p^=p<<13,d^=d<<17,p^=p>>>15,d^=d>>>12,f[h]=p^d;c.w=g,c.X=f,c.i=h}l(a,s)}function r(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function o(s,a){s==null&&(s=+new Date);var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(c.X&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.xor4096=o})(UK,typeof jL=="object"&&jL,typeof define=="function"&&define)});var jK=Xo((WK,qL)=>{"use strict";(function(t,n,e){function i(s){var a=this,l="";a.next=function(){var u=a.b,d=a.c,p=a.d,h=a.a;return u=u<<25^u>>>7^d,d=d-p|0,p=p<<24^p>>>8^h,h=h-u|0,a.b=u=u<<20^u>>>12^d,a.c=d=d-p|0,a.d=p<<16^d>>>16^h,a.a=h-u|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):l+=s;for(var c=0;c<l.length+20;c++)a.b^=l.charCodeAt(c)|0,a.next()}function r(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function o(s,a){var l=new i(s),c=a&&a.state,u=function(){return(l.next()>>>0)/4294967296};return u.double=function(){do var d=l.next()>>>11,p=(l.next()>>>0)/4294967296,h=(d+p)/(1<<21);while(h===0);return h},u.int32=l.next,u.quick=u,c&&(typeof c=="object"&&r(c,l),u.state=function(){return r(l,{})}),u}n&&n.exports?n.exports=o:e&&e.amd?e(function(){return o}):this.tychei=o})(WK,typeof qL=="object"&&qL,typeof define=="function"&&define)});var qK=Xo(()=>{"use strict"});var KK=Xo((XK,Mk)=>{"use strict";(function(t,n,e){var i=256,r=6,o=52,s="random",a=e.pow(i,r),l=e.pow(2,o),c=l*2,u=i-1,d;function p(v,_,w){var T=[];_=_==!0?{entropy:!0}:_||{};var D=f(g(_.entropy?[v,b(n)]:v??y(),3),T),N=new h(T),O=function(){for(var P=N.g(r),B=a,K=0;P<l;)P=(P+K)*i,B*=i,K=N.g(1);for(;P>=c;)P/=2,B/=2,K>>>=1;return(P+K)/B};return O.int32=function(){return N.g(4)|0},O.quick=function(){return N.g(4)/4294967296},O.double=O,f(b(N.S),n),(_.pass||w||function(P,B,K,X){return X&&(X.S&&m(X,N),P.state=function(){return m(N,{})}),K?(e[s]=P,B):P})(O,D,"global"in _?_.global:this==e,_.state)}function h(v){var _,w=v.length,T=this,D=0,N=T.i=T.j=0,O=T.S=[];for(w||(v=[w++]);D<i;)O[D]=D++;for(D=0;D<i;D++)O[D]=O[N=u&N+v[D%w]+(_=O[D])],O[N]=_;(T.g=function(P){for(var B,K=0,X=T.i,Z=T.j,te=T.S;P--;)B=te[X=u&X+1],K=K*i+te[u&(te[X]=te[Z=u&Z+B])+(te[Z]=B)];return T.i=X,T.j=Z,K})(i)}function m(v,_){return _.i=v.i,_.j=v.j,_.S=v.S.slice(),_}function g(v,_){var w=[],T=typeof v,D;if(_&&T=="object")for(D in v)try{w.push(g(v[D],_-1))}catch{}return w.length?w:T=="string"?v:v+"\0"}function f(v,_){for(var w=v+"",T,D=0;D<w.length;)_[u&D]=u&(T^=_[u&D]*19)+w.charCodeAt(D++);return b(_)}function y(){try{var v;return d&&(v=d.randomBytes)?v=v(i):(v=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(v)),b(v)}catch{var _=t.navigator,w=_&&_.plugins;return[+new Date,t,w,t.screen,b(n)]}}function b(v){return String.fromCharCode.apply(0,v)}if(f(e.random(),n),typeof Mk=="object"&&Mk.exports){Mk.exports=p;try{d=qK()}catch{}}else typeof define=="function"&&define.amd?define(function(){return p}):e["seed"+s]=p})(typeof self<"u"?self:XK,[],Math)});var z0=Xo((kIt,YK)=>{"use strict";var xEe=LK(),vEe=$K(),_Ee=BK(),wEe=GK(),CEe=HK(),TEe=jK(),rm=KK();rm.alea=xEe;rm.xor128=vEe;rm.xorwow=_Ee;rm.xorshift7=wEe;rm.xor4096=CEe;rm.tychei=TEe;YK.exports=rm});function bA(t,n){return Object.is(t,n)}var Di=null,z_=!1,xA=1,Yo=Symbol("SIGNAL");function Bt(t){let n=Di;return Di=t,n}function vA(){return Di}var Nm={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Hb(t){if(z_)throw new Error("");if(Di===null)return;Di.consumerOnSignalRead(t);let n=Di.nextProducerIndex++;if(j_(Di),n<Di.producerNode.length&&Di.producerNode[n]!==t&&Ub(Di)){let e=Di.producerNode[n];W_(e,Di.producerIndexOfThis[n])}Di.producerNode[n]!==t&&(Di.producerNode[n]=t,Di.producerIndexOfThis[n]=Ub(Di)?NB(t,Di,n):0),Di.producerLastReadVersion[n]=t.version}function AB(){xA++}function _A(t){if(!(Ub(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===xA)){if(!t.producerMustRecompute(t)&&!H_(t)){yA(t);return}t.producerRecomputeValue(t),yA(t)}}function wA(t){if(t.liveConsumerNode===void 0)return;let n=z_;z_=!0;try{for(let e of t.liveConsumerNode)e.dirty||Cae(e)}finally{z_=n}}function CA(){return Di?.consumerAllowSignalWrites!==!1}function Cae(t){t.dirty=!0,wA(t),t.consumerMarkedDirty?.(t)}function yA(t){t.dirty=!1,t.lastCleanEpoch=xA}function Wb(t){return t&&(t.nextProducerIndex=0),Bt(t)}function U_(t,n){if(Bt(n),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ub(t))for(let e=t.nextProducerIndex;e<t.producerNode.length;e++)W_(t.producerNode[e],t.producerIndexOfThis[e]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function H_(t){j_(t);for(let n=0;n<t.producerNode.length;n++){let e=t.producerNode[n],i=t.producerLastReadVersion[n];if(i!==e.version||(_A(e),i!==e.version))return!0}return!1}function jb(t){if(j_(t),Ub(t))for(let n=0;n<t.producerNode.length;n++)W_(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function NB(t,n,e){if(MB(t),t.liveConsumerNode.length===0&&RB(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=NB(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(e),t.liveConsumerNode.push(n)-1}function W_(t,n){if(MB(t),t.liveConsumerNode.length===1&&RB(t))for(let i=0;i<t.producerNode.length;i++)W_(t.producerNode[i],t.producerIndexOfThis[i]);let e=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[e],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[e],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[n],r=t.liveConsumerNode[n];j_(r),r.producerIndexOfThis[i]=n}}function Ub(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function j_(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function MB(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function RB(t){return t.producerNode!==void 0}function TA(t,n){let e=Object.create(Tae);e.computation=t,n!==void 0&&(e.equal=n);let i=()=>{if(_A(e),Hb(e),e.value===G_)throw e.error;return e.value};return i[Yo]=e,i}var fA=Symbol("UNSET"),gA=Symbol("COMPUTING"),G_=Symbol("ERRORED"),Tae=At(ie({},Nm),{value:fA,dirty:!0,error:null,equal:bA,kind:"computed",producerMustRecompute(t){return t.value===fA||t.value===gA},producerRecomputeValue(t){if(t.value===gA)throw new Error("Detected cycle in computations.");let n=t.value;t.value=gA;let e=Wb(t),i,r=!1;try{i=t.computation(),Bt(null),r=n!==fA&&n!==G_&&i!==G_&&t.equal(n,i)}catch(o){i=G_,t.error=o}finally{U_(t,e)}if(r){t.value=n;return}t.value=i,t.version++}});function Sae(){throw new Error}var OB=Sae;function FB(t){OB(t)}function SA(t){OB=t}var kae=null;function kA(t,n){let e=Object.create(q_);e.value=t,n!==void 0&&(e.equal=n);let i=()=>(Hb(e),e.value);return i[Yo]=e,i}function qb(t,n){CA()||FB(t),t.equal(t.value,n)||(t.value=n,Iae(t))}function IA(t,n){CA()||FB(t),qb(t,n(t.value))}var q_=At(ie({},Nm),{equal:bA,value:void 0,kind:"signal"});function Iae(t){t.version++,AB(),wA(t),kae?.()}function EA(t){let n=Bt(null);try{return t()}finally{Bt(n)}}var DA;function Xb(){return DA}function al(t){let n=DA;return DA=t,n}var X_=Symbol("NotFound");function pt(t){return typeof t=="function"}function Mm(t){let e=t(i=>{Error.call(i),i.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var K_=Mm(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ap(t,n){if(t){let e=t.indexOf(n);0<=e&&t.splice(e,1)}}var en=class t{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:i}=this;if(pt(i))try{i()}catch(o){n=o instanceof K_?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{LB(o)}catch(s){n=n??[],s instanceof K_?n=[...n,...s.errors]:n.push(s)}}if(n)throw new K_(n)}}add(n){var e;if(n&&n!==this)if(this.closed)LB(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(n)}}_hasParent(n){let{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){let{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&ap(e,n)}remove(n){let{_finalizers:e}=this;e&&ap(e,n),n instanceof t&&n._removeParent(this)}};en.EMPTY=(()=>{let t=new en;return t.closed=!0,t})();var AA=en.EMPTY;function Y_(t){return t instanceof en||t&&"closed"in t&&pt(t.remove)&&pt(t.add)&&pt(t.unsubscribe)}function LB(t){pt(t)?t():t.unsubscribe()}var Ms={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Rm={setTimeout(t,n,...e){let{delegate:i}=Rm;return i?.setTimeout?i.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){let{delegate:n}=Rm;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Q_(t){Rm.setTimeout(()=>{let{onUnhandledError:n}=Ms;if(n)n(t);else throw t})}function Kb(){}var PB=NA("C",void 0,void 0);function $B(t){return NA("E",void 0,t)}function VB(t){return NA("N",t,void 0)}function NA(t,n,e){return{kind:t,value:n,error:e}}var lp=null;function Om(t){if(Ms.useDeprecatedSynchronousErrorHandling){let n=!lp;if(n&&(lp={errorThrown:!1,error:null}),t(),n){let{errorThrown:e,error:i}=lp;if(lp=null,e)throw i}}else t()}function BB(t){Ms.useDeprecatedSynchronousErrorHandling&&lp&&(lp.errorThrown=!0,lp.error=t)}var cp=class extends en{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,Y_(n)&&n.add(this)):this.destination=Rae}static create(n,e,i){return new ll(n,e,i)}next(n){this.isStopped?RA(VB(n),this):this._next(n)}error(n){this.isStopped?RA($B(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?RA(PB,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Nae=Function.prototype.bind;function MA(t,n){return Nae.call(t,n)}var OA=class{constructor(n){this.partialObserver=n}next(n){let{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(i){Z_(i)}}error(n){let{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(i){Z_(i)}else Z_(n)}complete(){let{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){Z_(e)}}},ll=class extends cp{constructor(n,e,i){super();let r;if(pt(n)||!n)r={next:n??void 0,error:e??void 0,complete:i??void 0};else{let o;this&&Ms.useDeprecatedNextContext?(o=Object.create(n),o.unsubscribe=()=>this.unsubscribe(),r={next:n.next&&MA(n.next,o),error:n.error&&MA(n.error,o),complete:n.complete&&MA(n.complete,o)}):r=n}this.destination=new OA(r)}};function Z_(t){Ms.useDeprecatedSynchronousErrorHandling?BB(t):Q_(t)}function Mae(t){throw t}function RA(t,n){let{onStoppedNotification:e}=Ms;e&&Rm.setTimeout(()=>e(t,n))}var Rae={closed:!0,next:Kb,error:Mae,complete:Kb};var Fm=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rr(t){return t}function FA(...t){return LA(t)}function LA(t){return t.length===0?Rr:t.length===1?t[0]:function(e){return t.reduce((i,r)=>r(i),e)}}var Lt=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){let i=new t;return i.source=this,i.operator=e,i}subscribe(e,i,r){let o=Fae(e)?e:new ll(e,i,r);return Om(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(i){e.error(i)}}forEach(e,i){return i=zB(i),new i((r,o)=>{let s=new ll({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(e)}[Fm](){return this}pipe(...e){return LA(e)(this)}toPromise(e){return e=zB(e),new e((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=n=>new t(n),t})();function zB(t){var n;return(n=t??Ms.Promise)!==null&&n!==void 0?n:Promise}function Oae(t){return t&&pt(t.next)&&pt(t.error)&&pt(t.complete)}function Fae(t){return t&&t instanceof cp||Oae(t)&&Y_(t)}function PA(t){return pt(t?.lift)}function St(t){return n=>{if(PA(n))return n.lift(function(e){try{return t(e,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function vt(t,n,e,i,r){return new $A(t,n,e,i,r)}var $A=class extends cp{constructor(n,e,i,r,o,s){super(n),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){n.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){n.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){n.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((n=this.onFinalize)===null||n===void 0||n.call(this))}}};function Lm(){return St((t,n)=>{let e=null;t._refCount++;let i=vt(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){e=null;return}let r=t._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),n.unsubscribe()});t.subscribe(i),i.closed||(e=t.connect())})}var Pm=class extends Lt{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,PA(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){let n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new en;let e=this.getSubject();n.add(this.source.subscribe(vt(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),n.closed&&(this._connection=null,n=en.EMPTY)}return n}refCount(){return Lm()(this)}};var GB=Mm(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Re=(()=>{class t extends Lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let i=new J_(this,this);return i.operator=e,i}_throwIfClosed(){if(this.closed)throw new GB}next(e){Om(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(e)}})}error(e){Om(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:i}=this;for(;i.length;)i.shift().error(e)}})}complete(){Om(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:i,isStopped:r,observers:o}=this;return i||r?AA:(this.currentObservers=null,o.push(e),new en(()=>{this.currentObservers=null,ap(o,e)}))}_checkFinalizedStatuses(e){let{hasError:i,thrownError:r,isStopped:o}=this;i?e.error(r):o&&e.complete()}asObservable(){let e=new Lt;return e.source=this,e}}return t.create=(n,e)=>new J_(n,e),t})(),J_=class extends Re{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.next)===null||i===void 0||i.call(e,n)}error(n){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.error)===null||i===void 0||i.call(e,n)}complete(){var n,e;(e=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||e===void 0||e.call(n)}_subscribe(n){var e,i;return(i=(e=this.source)===null||e===void 0?void 0:e.subscribe(n))!==null&&i!==void 0?i:AA}};var Zn=class extends Re{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){let e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){let{hasError:n,thrownError:e,_value:i}=this;if(n)throw e;return this._throwIfClosed(),i}next(n){super.next(this._value=n)}};var VA={now(){return(VA.delegate||Date).now()},delegate:void 0};var ew=class extends en{constructor(n,e){super()}schedule(n,e=0){return this}};var Yb={setInterval(t,n,...e){let{delegate:i}=Yb;return i?.setInterval?i.setInterval(t,n,...e):setInterval(t,n,...e)},clearInterval(t){let{delegate:n}=Yb;return(n?.clearInterval||clearInterval)(t)},delegate:void 0};var tw=class extends ew{constructor(n,e){super(n,e),this.scheduler=n,this.work=e,this.pending=!1}schedule(n,e=0){var i;if(this.closed)return this;this.state=n;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,e),this}requestAsyncId(n,e,i=0){return Yb.setInterval(n.flush.bind(n,this),i)}recycleAsyncId(n,e,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return e;e!=null&&Yb.clearInterval(e)}execute(n,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(n,e);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(n,e){let i=!1,r;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:n,scheduler:e}=this,{actions:i}=e;this.work=this.state=this.scheduler=null,this.pending=!1,ap(i,this),n!=null&&(this.id=this.recycleAsyncId(e,n,null)),this.delay=null,super.unsubscribe()}}};var $m=class t{constructor(n,e=t.now){this.schedulerActionCtor=n,this.now=e}schedule(n,e=0,i){return new this.schedulerActionCtor(this,n).schedule(i,e)}};$m.now=VA.now;var nw=class extends $m{constructor(n,e=$m.now){super(n,e),this.actions=[],this._active=!1}flush(n){let{actions:e}=this;if(this._active){e.push(n);return}let i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=e.shift());if(this._active=!1,i){for(;n=e.shift();)n.unsubscribe();throw i}}};var Qb=new nw(tw),UB=Qb;var mr=new Lt(t=>t.complete());function iw(t){return t&&pt(t.schedule)}function BA(t){return t[t.length-1]}function rw(t){return pt(BA(t))?t.pop():void 0}function da(t){return iw(BA(t))?t.pop():void 0}function HB(t,n){return typeof BA(t)=="number"?t.pop():n}function jB(t,n,e,i){var r=arguments.length,o=r<3?n:i===null?i=Object.getOwnPropertyDescriptor(n,e):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,n,e,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(n,e,o):s(n,e))||o);return r>3&&o&&Object.defineProperty(n,e,o),o}function qB(t,n,e,i){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((i=i.apply(t,n||[])).next())})}function WB(t){var n=typeof Symbol=="function"&&Symbol.iterator,e=n&&t[n],i=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function up(t){return this instanceof up?(this.v=t,this):new up(t)}function XB(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(t,n||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(h){return function(m){return Promise.resolve(m).then(h,d)}}function a(h,m){i[h]&&(r[h]=function(g){return new Promise(function(f,y){o.push([h,g,f,y])>1||l(h,g)})},m&&(r[h]=m(r[h])))}function l(h,m){try{c(i[h](m))}catch(g){p(o[0][3],g)}}function c(h){h.value instanceof up?Promise.resolve(h.value.v).then(u,d):p(o[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function p(h,m){h(m),o.shift(),o.length&&l(o[0][0],o[0][1])}}function KB(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t[Symbol.asyncIterator],e;return n?n.call(t):(t=typeof WB=="function"?WB(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Vm=t=>t&&typeof t.length=="number"&&typeof t!="function";function ow(t){return pt(t?.then)}function sw(t){return pt(t[Fm])}function aw(t){return Symbol.asyncIterator&&pt(t?.[Symbol.asyncIterator])}function lw(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Lae(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var cw=Lae();function uw(t){return pt(t?.[cw])}function dw(t){return XB(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:i,done:r}=yield up(e.read());if(r)return yield up(void 0);yield yield up(i)}}finally{e.releaseLock()}})}function pw(t){return pt(t?.getReader)}function wn(t){if(t instanceof Lt)return t;if(t!=null){if(sw(t))return Pae(t);if(Vm(t))return $ae(t);if(ow(t))return Vae(t);if(aw(t))return YB(t);if(uw(t))return Bae(t);if(pw(t))return zae(t)}throw lw(t)}function Pae(t){return new Lt(n=>{let e=t[Fm]();if(pt(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $ae(t){return new Lt(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}function Vae(t){return new Lt(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,Q_)})}function Bae(t){return new Lt(n=>{for(let e of t)if(n.next(e),n.closed)return;n.complete()})}function YB(t){return new Lt(n=>{Gae(t,n).catch(e=>n.error(e))})}function zae(t){return YB(dw(t))}function Gae(t,n){var e,i,r,o;return qB(this,void 0,void 0,function*(){try{for(e=KB(t);i=yield e.next(),!i.done;){let s=i.value;if(n.next(s),n.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}n.complete()})}function ro(t,n,e,i=0,r=!1){let o=n.schedule(function(){e(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function hw(t,n=0){return St((e,i)=>{e.subscribe(vt(i,r=>ro(i,t,()=>i.next(r),n),()=>ro(i,t,()=>i.complete(),n),r=>ro(i,t,()=>i.error(r),n)))})}function mw(t,n=0){return St((e,i)=>{i.add(t.schedule(()=>e.subscribe(i),n))})}function QB(t,n){return wn(t).pipe(mw(n),hw(n))}function ZB(t,n){return wn(t).pipe(mw(n),hw(n))}function JB(t,n){return new Lt(e=>{let i=0;return n.schedule(function(){i===t.length?e.complete():(e.next(t[i++]),e.closed||this.schedule())})})}function e3(t,n){return new Lt(e=>{let i;return ro(e,n,()=>{i=t[cw](),ro(e,n,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>pt(i?.return)&&i.return()})}function fw(t,n){if(!t)throw new Error("Iterable cannot be null");return new Lt(e=>{ro(e,n,()=>{let i=t[Symbol.asyncIterator]();ro(e,n,()=>{i.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function t3(t,n){return fw(dw(t),n)}function n3(t,n){if(t!=null){if(sw(t))return QB(t,n);if(Vm(t))return JB(t,n);if(ow(t))return ZB(t,n);if(aw(t))return fw(t,n);if(uw(t))return e3(t,n);if(pw(t))return t3(t,n)}throw lw(t)}function Vn(t,n){return n?n3(t,n):wn(t)}function Qe(...t){let n=da(t);return Vn(t,n)}function pu(t,n){let e=pt(t)?t:()=>t,i=r=>r.error(e());return new Lt(n?r=>n.schedule(i,0,r):i)}function gw(t){return!!t&&(t instanceof Lt||pt(t.lift)&&pt(t.subscribe))}var cl=Mm(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function i3(t){return t instanceof Date&&!isNaN(t)}function rt(t,n){return St((e,i)=>{let r=0;e.subscribe(vt(i,o=>{i.next(t.call(n,o,r++))}))})}var{isArray:Uae}=Array;function Hae(t,n){return Uae(n)?t(...n):t(n)}function Bm(t){return rt(n=>Hae(t,n))}var{isArray:Wae}=Array,{getPrototypeOf:jae,prototype:qae,keys:Xae}=Object;function yw(t){if(t.length===1){let n=t[0];if(Wae(n))return{args:n,keys:null};if(Kae(n)){let e=Xae(n);return{args:e.map(i=>n[i]),keys:e}}}return{args:t,keys:null}}function Kae(t){return t&&typeof t=="object"&&jae(t)===qae}function bw(t,n){return t.reduce((e,i,r)=>(e[i]=n[r],e),{})}function zm(...t){let n=da(t),e=rw(t),{args:i,keys:r}=yw(t);if(i.length===0)return Vn([],n);let o=new Lt(Yae(i,n,r?s=>bw(r,s):Rr));return e?o.pipe(Bm(e)):o}function Yae(t,n,e=Rr){return i=>{r3(n,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)r3(n,()=>{let c=Vn(t[l],n),u=!1;c.subscribe(vt(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(e(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function r3(t,n,e){t?ro(e,t,n):n()}function o3(t,n,e,i,r,o,s,a){let l=[],c=0,u=0,d=!1,p=()=>{d&&!l.length&&!c&&n.complete()},h=g=>c<i?m(g):l.push(g),m=g=>{o&&n.next(g),c++;let f=!1;wn(e(g,u++)).subscribe(vt(n,y=>{r?.(y),o?h(y):n.next(y)},()=>{f=!0},void 0,()=>{if(f)try{for(c--;l.length&&c<i;){let y=l.shift();s?ro(n,s,()=>m(y)):m(y)}p()}catch(y){n.error(y)}}))};return t.subscribe(vt(n,h,()=>{d=!0,p()})),()=>{a?.()}}function ui(t,n,e=1/0){return pt(n)?ui((i,r)=>rt((o,s)=>n(i,o,r,s))(wn(t(i,r))),e):(typeof n=="number"&&(e=n),St((i,r)=>o3(i,r,t,e)))}function xw(t=1/0){return ui(Rr,t)}function s3(){return xw(1)}function hu(...t){return s3()(Vn(t,da(t)))}function pa(t){return new Lt(n=>{wn(t()).subscribe(n)})}function Zb(...t){let n=rw(t),{args:e,keys:i}=yw(t),r=new Lt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;wn(e[u]).subscribe(vt(o,p=>{d||(d=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?bw(i,a):a),o.complete())}))}});return n?r.pipe(Bm(n)):r}var Qae=["addListener","removeListener"],Zae=["addEventListener","removeEventListener"],Jae=["on","off"];function Jb(t,n,e,i){if(pt(e)&&(i=e,e=void 0),i)return Jb(t,n,e).pipe(Bm(i));let[r,o]=nle(t)?Zae.map(s=>a=>t[s](n,a,e)):ele(t)?Qae.map(a3(t,n)):tle(t)?Jae.map(a3(t,n)):[];if(!r&&Vm(t))return ui(s=>Jb(s,n,e))(wn(t));if(!r)throw new TypeError("Invalid event target");return new Lt(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function a3(t,n){return e=>i=>t[e](n,i)}function ele(t){return pt(t.addListener)&&pt(t.removeListener)}function tle(t){return pt(t.on)&&pt(t.off)}function nle(t){return pt(t.addEventListener)&&pt(t.removeEventListener)}function l3(t=0,n,e=UB){let i=-1;return n!=null&&(iw(n)?e=n:i=n),new Lt(r=>{let o=i3(t)?+t-e.now():t;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ul(...t){let n=da(t),e=HB(t,1/0),i=t;return i.length?i.length===1?wn(i[0]):xw(e)(Vn(i,n)):mr}function Cn(t,n){return St((e,i)=>{let r=0;e.subscribe(vt(i,o=>t.call(n,o,r++)&&i.next(o)))})}function c3(t){return St((n,e)=>{let i=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let c=r;r=null,e.next(c)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};n.subscribe(vt(e,c=>{i=!0,r=c,o||wn(t(c)).subscribe(o=vt(e,a,l))},()=>{s=!0,(!i||!o||o.closed)&&e.complete()}))})}function vw(t,n=Qb){return c3(()=>l3(t,n))}function Qo(t){return St((n,e)=>{let i=null,r=!1,o;i=n.subscribe(vt(e,void 0,void 0,s=>{o=wn(t(s,Qo(t)(n))),i?(i.unsubscribe(),i=null,o.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(e))})}function u3(t,n,e,i,r){return(o,s)=>{let a=e,l=n,c=0;o.subscribe(vt(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function mu(t,n){return pt(n)?ui(t,n,1):ui(t,1)}function dp(t,n=Qb){return St((e,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+t,u=n.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}e.subscribe(vt(i,c=>{o=c,s=n.now(),r||(r=n.schedule(l,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function fu(t){return St((n,e)=>{let i=!1;n.subscribe(vt(e,r=>{i=!0,e.next(r)},()=>{i||e.next(t),e.complete()}))})}function Xn(t){return t<=0?()=>mr:St((n,e)=>{let i=0;n.subscribe(vt(e,r=>{++i<=t&&(e.next(r),t<=i&&e.complete())}))})}function _w(t,n=Rr){return t=t??ile,St((e,i)=>{let r,o=!0;e.subscribe(vt(i,s=>{let a=n(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function ile(t,n){return t===n}function ww(t=rle){return St((n,e)=>{let i=!1;n.subscribe(vt(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(t())))})}function rle(){return new cl}function dl(t){return St((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}function pl(t,n){let e=arguments.length>=2;return i=>i.pipe(t?Cn((r,o)=>t(r,o,i)):Rr,Xn(1),e?fu(n):ww(()=>new cl))}function Gm(t){return t<=0?()=>mr:St((n,e)=>{let i=[];n.subscribe(vt(e,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function zA(t,n){let e=arguments.length>=2;return i=>i.pipe(t?Cn((r,o)=>t(r,o,i)):Rr,Gm(1),e?fu(n):ww(()=>new cl))}function GA(t,n){return St(u3(t,n,arguments.length>=2,!0))}function HA(t={}){let{connector:n=()=>new Re,resetOnError:e=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,a,l,c=0,u=!1,d=!1,p=()=>{a?.unsubscribe(),a=void 0},h=()=>{p(),s=l=void 0,u=d=!1},m=()=>{let g=s;h(),g?.unsubscribe()};return St((g,f)=>{c++,!d&&!u&&p();let y=l=l??n();f.add(()=>{c--,c===0&&!d&&!u&&(a=UA(m,r))}),y.subscribe(f),!s&&c>0&&(s=new ll({next:b=>y.next(b),error:b=>{d=!0,p(),a=UA(h,e,b),y.error(b)},complete:()=>{u=!0,p(),a=UA(h,i),y.complete()}}),wn(g).subscribe(s))})(o)}}function UA(t,n,...e){if(n===!0){t();return}if(n===!1)return;let i=new ll({next:()=>{i.unsubscribe(),t()}});return wn(n(...e)).subscribe(i)}function ex(t){return Cn((n,e)=>t<=e)}function Mo(...t){let n=da(t);return St((e,i)=>{(n?hu(t,e,n):hu(t,e)).subscribe(i)})}function nr(t,n){return St((e,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();e.subscribe(vt(i,l=>{r?.unsubscribe();let c=0,u=o++;wn(t(l,u)).subscribe(r=vt(i,d=>i.next(n?n(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Bn(t){return St((n,e)=>{wn(t).subscribe(vt(e,()=>e.complete(),Kb)),!e.closed&&n.subscribe(e)})}function WA(t,n=!1){return St((e,i)=>{let r=0;e.subscribe(vt(i,o=>{let s=t(o,r++);(s||n)&&i.next(o),!s&&i.complete()}))})}function Jn(t,n,e){let i=pt(t)||n||e?{next:t,error:n,complete:e}:t;return i?St((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(vt(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Rr}var ez="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",ye=class extends Error{code;constructor(n,e){super(tz(n,e)),this.code=n}};function ole(t){return`NG0${Math.abs(t)}`}function tz(t,n){return`${ole(t)}${n?": "+n:""}`}var nz=Symbol("InputSignalNode#UNSET"),sle=At(ie({},q_),{transformFn:void 0,applyValueToInputSignal(t,n){qb(t,n)}});function iz(t,n){let e=Object.create(sle);e.value=t,e.transformFn=n?.transform;function i(){if(Hb(e),e.value===nz){let r=null;throw new ye(-950,r)}return e.value}return i[Yo]=e,i}function hx(t){return{toString:t}.toString()}var Cw="__parameters__";function ale(t){return function(...e){if(t){let i=t(...e);for(let r in i)this[r]=i[r]}}}function rz(t,n,e){return hx(()=>{let i=ale(n);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(Cw)?l[Cw]:Object.defineProperty(l,Cw,{value:[]})[Cw];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Km=globalThis;function Nn(t){for(let n in t)if(t[n]===Nn)return n;throw Error("Could not find renamed property on target object.")}function lle(t,n){for(let e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function ao(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(ao).join(", ")}]`;if(t==null)return""+t;let n=t.overriddenName||t.name;if(n)return`${n}`;let e=t.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i>=0?e.slice(0,i):e}function sN(t,n){return t?n?`${t} ${n}`:t:n||""}var cle=Nn({__forward_ref__:Nn});function es(t){return t.__forward_ref__=es,t.toString=function(){return ao(this())},t}function ir(t){return oz(t)?t():t}function oz(t){return typeof t=="function"&&t.hasOwnProperty(cle)&&t.__forward_ref__===es}function pe(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pe(t){return{providers:t.providers||[],imports:t.imports||[]}}function aC(t){return d3(t,az)||d3(t,lz)}function sz(t){return aC(t)!==null}function d3(t,n){return t.hasOwnProperty(n)?t[n]:null}function ule(t){let n=t&&(t[az]||t[lz]);return n||null}function p3(t){return t&&(t.hasOwnProperty(h3)||t.hasOwnProperty(dle))?t[h3]:null}var az=Nn({\u0275prov:Nn}),h3=Nn({\u0275inj:Nn}),lz=Nn({ngInjectableDef:Nn}),dle=Nn({ngInjectorDef:Nn}),he=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,e){this._desc=n,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=pe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cz(t){return t&&!!t.\u0275providers}var ple=Nn({\u0275cmp:Nn}),hle=Nn({\u0275dir:Nn}),mle=Nn({\u0275pipe:Nn}),fle=Nn({\u0275mod:Nn}),Ow=Nn({\u0275fac:Nn}),rx=Nn({__NG_ELEMENT_ID__:Nn}),m3=Nn({__NG_ENV_ID__:Nn});function ha(t){return typeof t=="string"?t:t==null?"":String(t)}function gle(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ha(t)}function uz(t,n){throw new ye(-200,t)}function fM(t,n){throw new ye(-201,!1)}var Pt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Pt||{}),aN;function dz(){return aN}function oo(t){let n=aN;return aN=t,n}function pz(t,n,e){let i=aC(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(e&Pt.Optional)return null;if(n!==void 0)return n;fM(t,"Injector")}var yle={},pp=yle,lN="__NG_DI_FLAG__",Fw=class{injector;constructor(n){this.injector=n}retrieve(n,e){let i=e;return this.injector.get(n,i.optional?X_:pp,i)}},Lw="ngTempTokenPath",ble="ngTokenPath",xle=/\n/gm,vle="\u0275",f3="__source";function _le(t,n=Pt.Default){if(Xb()===void 0)throw new ye(-203,!1);if(Xb()===null)return pz(t,void 0,n);{let e=Xb(),i;return e instanceof Fw?i=e.injector:i=e,i.get(t,n&Pt.Optional?null:void 0,n)}}function Xe(t,n=Pt.Default){return(dz()||_le)(ir(t),n)}function k(t,n=Pt.Default){return Xe(t,lC(n))}function lC(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function cN(t){let n=[];for(let e=0;e<t.length;e++){let i=ir(t[e]);if(Array.isArray(i)){if(i.length===0)throw new ye(900,!1);let r,o=Pt.Default;for(let s=0;s<i.length;s++){let a=i[s],l=wle(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}n.push(Xe(r,o))}else n.push(Xe(i))}return n}function hz(t,n){return t[lN]=n,t.prototype[lN]=n,t}function wle(t){return t[lN]}function Cle(t,n,e,i){let r=t[Lw];throw n[f3]&&r.unshift(n[f3]),t.message=Tle(`
`+t.message,r,e,i),t[ble]=r,t[Lw]=null,t}function Tle(t,n,e,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==vle?t.slice(2):t;let r=ao(n);if(Array.isArray(n))r=n.map(ao).join(" -> ");else if(typeof n=="object"){let o=[];for(let s in n)if(n.hasOwnProperty(s)){let a=n[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):ao(a)))}r=`{${o.join(", ")}}`}return`${e}${i?"("+i+")":""}[${r}]: ${t.replace(xle,`
  `)}`}var cC=hz(rz("Optional"),8);var mz=hz(rz("SkipSelf"),4);function mp(t,n){let e=t.hasOwnProperty(Ow);return e?t[Ow]:null}function Sle(t,n,e){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=n[i];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function kle(t){return t.flat(Number.POSITIVE_INFINITY)}function gM(t,n){t.forEach(e=>Array.isArray(e)?gM(e,n):n(e))}function fz(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Pw(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Ile(t,n){let e=[];for(let i=0;i<t;i++)e.push(n);return e}function Ele(t,n,e,i){let r=t.length;if(r==n)t.push(e,i);else if(r===1)t.push(i,t[0]),t[0]=e;else{for(r--,t.push(t[r-1],t[r]);r>n;){let o=r-2;t[r]=t[o],r--}t[n]=e,t[n+1]=i}}function uC(t,n,e){let i=mx(t,n);return i>=0?t[i|1]=e:(i=~i,Ele(t,i,n,e)),i}function jA(t,n){let e=mx(t,n);if(e>=0)return t[e|1]}function mx(t,n){return Dle(t,n,1)}function Dle(t,n,e){let i=0,r=t.length>>e;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<e];if(n===s)return o<<e;s>n?r=o:i=o+1}return~(r<<e)}var fa={},so=[],Ym=new he(""),gz=new he("",-1),yz=new he(""),$w=class{get(n,e=pp){if(e===pp){let i=new Error(`NullInjectorError: No provider for ${ao(n)}!`);throw i.name="NullInjectorError",i}return e}};function bz(t,n){let e=t[fle]||null;if(!e&&n===!0)throw new Error(`Type ${ao(t)} does not have '\u0275mod' property.`);return e}function fp(t){return t[ple]||null}function xz(t){return t[hle]||null}function Ale(t){return t[mle]||null}function lf(t){return{\u0275providers:t}}function Nle(...t){return{\u0275providers:vz(!0,t),\u0275fromNgModule:!0}}function vz(t,...n){let e=[],i=new Set,r,o=s=>{e.push(s)};return gM(n,s=>{let a=s;uN(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&_z(r,o),e}function _z(t,n){for(let e=0;e<t.length;e++){let{ngModule:i,providers:r}=t[e];yM(r,o=>{n(o,i)})}}function uN(t,n,e,i){if(t=ir(t),!t)return!1;let r=null,o=p3(t),s=!o&&fp(t);if(!o&&!s){let l=t.ngModule;if(o=p3(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)uN(c,n,e,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{gM(o.imports,u=>{uN(u,n,e,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&_z(c,n)}if(!a){let c=mp(r)||(()=>new r);n({provide:r,useFactory:c,deps:so},r),n({provide:yz,useValue:r,multi:!0},r),n({provide:Ym,useValue:()=>Xe(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=t;yM(l,u=>{n(u,c)})}}else return!1;return r!==t&&t.providers!==void 0}function yM(t,n){for(let e of t)cz(e)&&(e=e.\u0275providers),Array.isArray(e)?yM(e,n):n(e)}var Mle=Nn({provide:String,useValue:Nn});function wz(t){return t!==null&&typeof t=="object"&&Mle in t}function Rle(t){return!!(t&&t.useExisting)}function Ole(t){return!!(t&&t.useFactory)}function Qm(t){return typeof t=="function"}function Fle(t){return!!t.useClass}var dC=new he(""),Ew={},g3={},qA;function pC(){return qA===void 0&&(qA=new $w),qA}var yi=class{},ox=class extends yi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,e,i,r){super(),this.parent=e,this.source=i,this.scopes=r,pN(n,s=>this.processProvider(s)),this.records.set(gz,Um(void 0,this)),r.has("environment")&&this.records.set(yi,Um(void 0,this));let o=this.records.get(dC);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(yz,so,Pt.Self))}retrieve(n,e){let i=e;return this.get(n,i.optional?X_:pp,i)}destroy(){nx(this),this._destroyed=!0;let n=Bt(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of e)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Bt(n)}}onDestroy(n){return nx(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){nx(this);let e=al(this),i=oo(void 0),r;try{return n()}finally{al(e),oo(i)}}get(n,e=pp,i=Pt.Default){if(nx(this),n.hasOwnProperty(m3))return n[m3](this);i=lC(i);let r,o=al(this),s=oo(void 0);try{if(!(i&Pt.SkipSelf)){let l=this.records.get(n);if(l===void 0){let c=Ble(n)&&aC(n);c&&this.injectableDefInScope(c)?l=Um(dN(n),Ew):l=null,this.records.set(n,l)}if(l!=null)return this.hydrate(n,l,i)}let a=i&Pt.Self?pC():this.parent;return e=i&Pt.Optional&&e===pp?null:e,a.get(n,e)}catch(a){if(a.name==="NullInjectorError"){if((a[Lw]=a[Lw]||[]).unshift(ao(n)),o)throw a;return Cle(a,n,"R3InjectorError",this.source)}else throw a}finally{oo(s),al(o)}}resolveInjectorInitializers(){let n=Bt(null),e=al(this),i=oo(void 0),r;try{let o=this.get(Ym,so,Pt.Self);for(let s of o)s()}finally{al(e),oo(i),Bt(n)}}toString(){let n=[],e=this.records;for(let i of e.keys())n.push(ao(i));return`R3Injector[${n.join(", ")}]`}processProvider(n){n=ir(n);let e=Qm(n)?n:ir(n&&n.provide),i=Ple(n);if(!Qm(n)&&n.multi===!0){let r=this.records.get(e);r||(r=Um(void 0,Ew,!0),r.factory=()=>cN(r.multi),this.records.set(e,r)),e=n,r.multi.push(n)}this.records.set(e,i)}hydrate(n,e,i){let r=Bt(null);try{return e.value===g3?uz(ao(n)):e.value===Ew&&(e.value=g3,e.value=e.factory(void 0,i)),typeof e.value=="object"&&e.value&&Vle(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Bt(r)}}injectableDefInScope(n){if(!n.providedIn)return!1;let e=ir(n.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(n){let e=this._onDestroyHooks.indexOf(n);e!==-1&&this._onDestroyHooks.splice(e,1)}};function dN(t){let n=aC(t),e=n!==null?n.factory:mp(t);if(e!==null)return e;if(t instanceof he)throw new ye(204,!1);if(t instanceof Function)return Lle(t);throw new ye(204,!1)}function Lle(t){if(t.length>0)throw new ye(204,!1);let e=ule(t);return e!==null?()=>e.factory(t):()=>new t}function Ple(t){if(wz(t))return Um(void 0,t.useValue);{let n=Cz(t);return Um(n,Ew)}}function Cz(t,n,e){let i;if(Qm(t)){let r=ir(t);return mp(r)||dN(r)}else if(wz(t))i=()=>ir(t.useValue);else if(Ole(t))i=()=>t.useFactory(...cN(t.deps||[]));else if(Rle(t))i=(r,o)=>Xe(ir(t.useExisting),o!==void 0&&o&Pt.Optional?Pt.Optional:void 0);else{let r=ir(t&&(t.useClass||t.provide));if($le(t))i=()=>new r(...cN(t.deps));else return mp(r)||dN(r)}return i}function nx(t){if(t.destroyed)throw new ye(205,!1)}function Um(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function $le(t){return!!t.deps}function Vle(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Ble(t){return typeof t=="function"||typeof t=="object"&&t instanceof he}function pN(t,n){for(let e of t)Array.isArray(e)?pN(e,n):e&&cz(e)?pN(e.\u0275providers,n):n(e)}function Oo(t,n){let e;t instanceof ox?(nx(t),e=t):e=new Fw(t);let i,r=al(e),o=oo(void 0);try{return n()}finally{al(r),oo(o)}}function Tz(){return dz()!==void 0||Xb()!=null}function bM(t){if(!Tz())throw new ye(-203,!1)}function zle(t){return typeof t=="function"}var bl=0,Nt=1,_t=2,gr=3,Fs=4,lo=5,Zm=6,Vw=7,Ai=8,Jm=9,hl=10,ei=11,sx=12,y3=13,cf=14,Ro=15,gp=16,Hm=17,ml=18,hC=19,Sz=20,gu=21,XA=22,yp=23,Zo=24,qm=25,Hi=26,kz=1;var bp=7,Bw=8,ef=9,fr=10;function yu(t){return Array.isArray(t)&&typeof t[kz]=="object"}function xl(t){return Array.isArray(t)&&t[kz]===!0}function xM(t){return(t.flags&4)!==0}function uf(t){return t.componentOffset>-1}function mC(t){return(t.flags&1)===1}function ga(t){return!!t.template}function zw(t){return(t[_t]&512)!==0}function df(t){return(t[_t]&256)===256}var hN=class{previousValue;currentValue;firstChange;constructor(n,e,i){this.previousValue=n,this.currentValue=e,this.firstChange=i}isFirstChange(){return this.firstChange}};function Iz(t,n,e,i){n!==null?n.applyValueToInputSignal(n,i):t[e]=i}var Zt=(()=>{let t=()=>Ez;return t.ngInherit=!0,t})();function Ez(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ule),Gle}function Gle(){let t=Az(this),n=t?.current;if(n){let e=t.previous;if(e===fa)t.previous=n;else for(let i in n)e[i]=n[i];t.current=null,this.ngOnChanges(n)}}function Ule(t,n,e,i,r){let o=this.declaredInputs[i],s=Az(t)||Hle(t,{previous:fa,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new hN(c&&c.currentValue,e,l===fa),Iz(t,n,r,e)}var Dz="__ngSimpleChanges__";function Az(t){return t[Dz]||null}function Hle(t,n){return t[Dz]=n}var b3=null;var Sn=function(t,n=null,e){b3?.(t,n,e)},Nz="svg",Wle="math";function ya(t){for(;Array.isArray(t);)t=t[bl];return t}function Mz(t,n){return ya(n[t])}function va(t,n){return ya(n[t.index])}function vM(t,n){return t.data[n]}function Rz(t,n){return t[n]}function jle(t,n,e,i){e>=t.data.length&&(t.data[e]=null,t.blueprint[e]=null),n[e]=i}function ba(t,n){let e=n[t];return yu(e)?e:e[bl]}function qle(t){return(t[_t]&4)===4}function _M(t){return(t[_t]&128)===128}function Xle(t){return xl(t[gr])}function bu(t,n){return n==null?null:t[n]}function Oz(t){t[Hm]=0}function Fz(t){t[_t]&1024||(t[_t]|=1024,_M(t)&&pf(t))}function Kle(t,n){for(;t>0;)n=n[cf],t--;return n}function fC(t){return!!(t[_t]&9216||t[Zo]?.dirty)}function mN(t){t[hl].changeDetectionScheduler?.notify(8),t[_t]&64&&(t[_t]|=1024),fC(t)&&pf(t)}function pf(t){t[hl].changeDetectionScheduler?.notify(0);let n=xp(t);for(;n!==null&&!(n[_t]&8192||(n[_t]|=8192,!_M(n)));)n=xp(n)}function Lz(t,n){if(df(t))throw new ye(911,!1);t[gu]===null&&(t[gu]=[]),t[gu].push(n)}function Yle(t,n){if(t[gu]===null)return;let e=t[gu].indexOf(n);e!==-1&&t[gu].splice(e,1)}function xp(t){let n=t[gr];return xl(n)?n[gr]:n}function wM(t){return t[Vw]??=[]}function CM(t){return t.cleanup??=[]}function Qle(t,n,e,i){let r=wM(n);r.push(e),t.firstCreatePass&&CM(t).push(i,r.length-1)}var $t={lFrame:Hz(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fN=!1;function Zle(){return $t.lFrame.elementDepthCount}function Jle(){$t.lFrame.elementDepthCount++}function ece(){$t.lFrame.elementDepthCount--}function TM(){return $t.bindingsEnabled}function Pz(){return $t.skipHydrationRootTNode!==null}function tce(t){return $t.skipHydrationRootTNode===t}function nce(){$t.skipHydrationRootTNode=null}function bt(){return $t.lFrame.lView}function ti(){return $t.lFrame.tView}function Ve(t){return $t.lFrame.contextLView=t,t[Ai]}function Be(t){return $t.lFrame.contextLView=null,t}function yr(){let t=$z();for(;t!==null&&t.type===64;)t=t.parent;return t}function $z(){return $t.lFrame.currentTNode}function ice(){let t=$t.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}function Tp(t,n){let e=$t.lFrame;e.currentTNode=t,e.isParent=n}function SM(){return $t.lFrame.isParent}function kM(){$t.lFrame.isParent=!1}function rce(){return $t.lFrame.contextLView}function Vz(){return fN}function Gw(t){let n=fN;return fN=t,n}function gC(){let t=$t.lFrame,n=t.bindingRootIndex;return n===-1&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Bz(){return $t.lFrame.bindingIndex}function oce(t){return $t.lFrame.bindingIndex=t}function Sp(){return $t.lFrame.bindingIndex++}function yC(t){let n=$t.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function sce(){return $t.lFrame.inI18n}function ace(t,n){let e=$t.lFrame;e.bindingIndex=e.bindingRootIndex=t,gN(n)}function lce(){return $t.lFrame.currentDirectiveIndex}function gN(t){$t.lFrame.currentDirectiveIndex=t}function cce(t){let n=$t.lFrame.currentDirectiveIndex;return n===-1?null:t[n]}function zz(){return $t.lFrame.currentQueryIndex}function IM(t){$t.lFrame.currentQueryIndex=t}function uce(t){let n=t[Nt];return n.type===2?n.declTNode:n.type===1?t[lo]:null}function Gz(t,n,e){if(e&Pt.SkipSelf){let r=n,o=t;for(;r=r.parent,r===null&&!(e&Pt.Host);)if(r=uce(o),r===null||(o=o[cf],r.type&10))break;if(r===null)return!1;n=r,t=o}let i=$t.lFrame=Uz();return i.currentTNode=n,i.lView=t,!0}function EM(t){let n=Uz(),e=t[Nt];$t.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Uz(){let t=$t.lFrame,n=t===null?null:t.child;return n===null?Hz(t):n}function Hz(t){let n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=n),n}function Wz(){let t=$t.lFrame;return $t.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var jz=Wz;function DM(){let t=Wz();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dce(t){return($t.lFrame.contextLView=Kle(t,$t.lFrame.contextLView))[Ai]}function _a(){return $t.lFrame.selectedIndex}function vp(t){$t.lFrame.selectedIndex=t}function bC(){let t=$t.lFrame;return vM(t.tView,t.selectedIndex)}function Ze(){$t.lFrame.currentNamespace=Nz}function pce(){return $t.lFrame.currentNamespace}var qz=!0;function xC(){return qz}function vC(t){qz=t}function hce(t,n,e){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=n.type.prototype;if(i){let s=Ez(n);(e.preOrderHooks??=[]).push(t,s),(e.preOrderCheckHooks??=[]).push(t,s)}r&&(e.preOrderHooks??=[]).push(0-t,r),o&&((e.preOrderHooks??=[]).push(t,o),(e.preOrderCheckHooks??=[]).push(t,o))}function AM(t,n){for(let e=n.directiveStart,i=n.directiveEnd;e<i;e++){let o=t.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-e,s),a&&((t.contentHooks??=[]).push(e,a),(t.contentCheckHooks??=[]).push(e,a)),l&&(t.viewHooks??=[]).push(-e,l),c&&((t.viewHooks??=[]).push(e,c),(t.viewCheckHooks??=[]).push(e,c)),u!=null&&(t.destroyHooks??=[]).push(e,u)}}function Dw(t,n,e){Xz(t,n,3,e)}function Aw(t,n,e,i){(t[_t]&3)===e&&Xz(t,n,e,i)}function KA(t,n){let e=t[_t];(e&3)===n&&(e&=16383,e+=1,t[_t]=e)}function Xz(t,n,e,i){let r=i!==void 0?t[Hm]&65535:0,o=i??-1,s=n.length-1,a=0;for(let l=r;l<s;l++)if(typeof n[l+1]=="number"){if(a=n[l],i!=null&&a>=i)break}else n[l]<0&&(t[Hm]+=65536),(a<o||o==-1)&&(mce(t,e,n,l),t[Hm]=(t[Hm]&4294901760)+l+2),l++}function x3(t,n){Sn(4,t,n);let e=Bt(null);try{n.call(t)}finally{Bt(e),Sn(5,t,n)}}function mce(t,n,e,i){let r=e[i]<0,o=e[i+1],s=r?-e[i]:e[i],a=t[s];r?t[_t]>>14<t[Hm]>>16&&(t[_t]&3)===n&&(t[_t]+=16384,x3(a,o)):x3(a,o)}var Xm=-1,_p=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,e,i){this.factory=n,this.canSeeViewProviders=e,this.injectImpl=i}};function fce(t){return(t.flags&8)!==0}function gce(t){return(t.flags&16)!==0}function yce(t,n,e){let i=0;for(;i<e.length;){let r=e[i];if(typeof r=="number"){if(r!==0)break;i++;let o=e[i++],s=e[i++],a=e[i++];t.setAttribute(n,s,a,o)}else{let o=r,s=e[++i];bce(o)?t.setProperty(n,o,s):t.setAttribute(n,o,s),i++}}return i}function Kz(t){return t===3||t===4||t===6}function bce(t){return t.charCodeAt(0)===64}function tf(t,n){if(!(n===null||n.length===0))if(t===null||t.length===0)t=n.slice();else{let e=-1;for(let i=0;i<n.length;i++){let r=n[i];typeof r=="number"?e=r:e===0||(e===-1||e===2?v3(t,e,r,null,n[++i]):v3(t,e,r,null,null))}}return t}function v3(t,n,e,i,r){let o=0,s=t.length;if(n===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===n){s=-1;break}else if(a>n){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===e){r!==null&&(t[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(t.splice(s,0,n),o=s+1),t.splice(o++,0,e),r!==null&&t.splice(o++,0,r)}function Yz(t){return t!==Xm}function Uw(t){return t&32767}function xce(t){return t>>16}function Hw(t,n){let e=xce(t),i=n;for(;e>0;)i=i[cf],e--;return i}var yN=!0;function Ww(t){let n=yN;return yN=t,n}var vce=256,Qz=vce-1,Zz=5,_ce=0,ma={};function wce(t,n,e){let i;typeof e=="string"?i=e.charCodeAt(0)||0:e.hasOwnProperty(rx)&&(i=e[rx]),i==null&&(i=e[rx]=_ce++);let r=i&Qz,o=1<<r;n.data[t+(r>>Zz)]|=o}function jw(t,n){let e=Jz(t,n);if(e!==-1)return e;let i=n[Nt];i.firstCreatePass&&(t.injectorIndex=n.length,YA(i.data,t),YA(n,null),YA(i.blueprint,null));let r=NM(t,n),o=t.injectorIndex;if(Yz(r)){let s=Uw(r),a=Hw(r,n),l=a[Nt].data;for(let c=0;c<8;c++)n[o+c]=a[s+c]|l[s+c]}return n[o+8]=r,o}function YA(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Jz(t,n){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||n[t.injectorIndex+8]===null?-1:t.injectorIndex}function NM(t,n){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let e=0,i=null,r=n;for(;r!==null;){if(i=rG(r),i===null)return Xm;if(e++,r=r[cf],i.injectorIndex!==-1)return i.injectorIndex|e<<16}return Xm}function bN(t,n,e){wce(t,n,e)}function Cce(t,n){if(n==="class")return t.classes;if(n==="style")return t.styles;let e=t.attrs;if(e){let i=e.length,r=0;for(;r<i;){let o=e[r];if(Kz(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<i&&typeof e[r]=="string";)r++;else{if(o===n)return e[r+1];r=r+2}}}return null}function eG(t,n,e){if(e&Pt.Optional||t!==void 0)return t;fM(n,"NodeInjector")}function tG(t,n,e,i){if(e&Pt.Optional&&i===void 0&&(i=null),(e&(Pt.Self|Pt.Host))===0){let r=t[Jm],o=oo(void 0);try{return r?r.get(n,i,e&Pt.Optional):pz(n,i,e&Pt.Optional)}finally{oo(o)}}return eG(i,n,e)}function nG(t,n,e,i=Pt.Default,r){if(t!==null){if(n[_t]&2048&&!(i&Pt.Self)){let s=Ice(t,n,e,i,ma);if(s!==ma)return s}let o=iG(t,n,e,i,ma);if(o!==ma)return o}return tG(n,e,i,r)}function iG(t,n,e,i,r){let o=Sce(e);if(typeof o=="function"){if(!Gz(n,t,i))return i&Pt.Host?eG(r,e,i):tG(n,e,i,r);try{let s;if(s=o(i),s==null&&!(i&Pt.Optional))fM(e);else return s}finally{jz()}}else if(typeof o=="number"){let s=null,a=Jz(t,n),l=Xm,c=i&Pt.Host?n[Ro][lo]:null;for((a===-1||i&Pt.SkipSelf)&&(l=a===-1?NM(t,n):n[a+8],l===Xm||!w3(i,!1)?a=-1:(s=n[Nt],a=Uw(l),n=Hw(l,n)));a!==-1;){let u=n[Nt];if(_3(o,a,u.data)){let d=Tce(a,n,e,s,i,c);if(d!==ma)return d}l=n[a+8],l!==Xm&&w3(i,n[Nt].data[a+8]===c)&&_3(o,a,n)?(s=u,a=Uw(l),n=Hw(l,n)):a=-1}}return r}function Tce(t,n,e,i,r,o){let s=n[Nt],a=s.data[t+8],l=i==null?uf(a)&&yN:i!=s&&(a.type&3)!==0,c=r&Pt.Host&&o===a,u=Nw(a,s,e,l,c);return u!==null?ax(n,s,u,a,r):ma}function Nw(t,n,e,i,r){let o=t.providerIndexes,s=n.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=i?a:a+u,p=r?a+u:c;for(let h=d;h<p;h++){let m=s[h];if(h<l&&e===m||h>=l&&m.type===e)return h}if(r){let h=s[l];if(h&&ga(h)&&h.type===e)return l}return null}function ax(t,n,e,i,r){let o=t[e],s=n.data;if(o instanceof _p){let a=o;a.resolving&&uz(gle(s[e]));let l=Ww(a.canSeeViewProviders);a.resolving=!0;let c,u=a.injectImpl?oo(a.injectImpl):null,d=Gz(t,i,Pt.Default);try{o=t[e]=a.factory(void 0,r,s,t,i),n.firstCreatePass&&e>=i.directiveStart&&hce(e,s[e],n)}finally{u!==null&&oo(u),Ww(l),a.resolving=!1,jz()}}return o}function Sce(t){if(typeof t=="string")return t.charCodeAt(0)||0;let n=t.hasOwnProperty(rx)?t[rx]:void 0;return typeof n=="number"?n>=0?n&Qz:kce:n}function _3(t,n,e){let i=1<<t;return!!(e[n+(t>>Zz)]&i)}function w3(t,n){return!(t&Pt.Self)&&!(t&Pt.Host&&n)}var hp=class{_tNode;_lView;constructor(n,e){this._tNode=n,this._lView=e}get(n,e,i){return nG(this._tNode,this._lView,n,lC(i),e)}};function kce(){return new hp(yr(),bt())}function Mi(t){return hx(()=>{let n=t.prototype.constructor,e=n[Ow]||xN(n),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Ow]||xN(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function xN(t){return oz(t)?()=>{let n=xN(ir(t));return n&&n()}:mp(t)}function Ice(t,n,e,i,r){let o=t,s=n;for(;o!==null&&s!==null&&s[_t]&2048&&!zw(s);){let a=iG(o,s,e,i|Pt.Self,ma);if(a!==ma)return a;let l=o.parent;if(!l){let c=s[Sz];if(c){let u=c.get(e,ma,i);if(u!==ma)return u}l=rG(s),s=s[cf]}o=l}return r}function rG(t){let n=t[Nt],e=n.type;return e===2?n.declTNode:e===1?t[lo]:null}function oG(t){return Cce(yr(),t)}function C3(t,n=null,e=null,i){let r=sG(t,n,e,i);return r.resolveInjectorInitializers(),r}function sG(t,n=null,e=null,i,r=new Set){let o=[e||so,Nle(t)];return i=i||(typeof t=="object"?void 0:ao(t)),new ox(o,n||pC(),i||null,r)}var Vt=class t{static THROW_IF_NOT_FOUND=pp;static NULL=new $w;static create(n,e){if(Array.isArray(n))return C3({name:""},e,n,"");{let i=n.name??"";return C3({name:i},n.parent,n.providers,i)}}static \u0275prov=pe({token:t,providedIn:"any",factory:()=>Xe(gz)});static __NG_ELEMENT_ID__=-1};var xu=class{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>oG(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},Ece=new he("");Ece.__NG_ELEMENT_ID__=t=>{let n=yr();if(n===null)throw new ye(204,!1);if(n.type&2)return n.value;if(t&Pt.Optional)return null;throw new ye(204,!1)};var aG=!1,hf=(()=>{class t{static __NG_ELEMENT_ID__=Dce;static __NG_ENV_ID__=e=>e}return t})(),qw=class extends hf{_lView;constructor(n){super(),this._lView=n}onDestroy(n){let e=this._lView;return df(e)?(n(),()=>{}):(Lz(e,n),()=>Yle(e,n))}};function Dce(){return new qw(bt())}var wp=class{},_C=new he("",{providedIn:"root",factory:()=>!1});var lG=new he(""),cG=new he(""),vu=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Zn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new t})}return t})();var vN=class extends Re{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,Tz()&&(this.destroyRef=k(hf,{optional:!0})??void 0,this.pendingTasks=k(vu,{optional:!0})??void 0)}emit(n){let e=Bt(null);try{super.next(n)}finally{Bt(e)}}subscribe(n,e,i){let r=n,o=e||(()=>null),s=i;if(n&&typeof n=="object"){let l=n;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return n instanceof en&&n.add(a),a}wrapInTimeout(n){return e=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{n(e)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},Se=vN;function lx(...t){}function uG(t){let n,e;function i(){t=lx;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),n!==void 0&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{t(),i()})),()=>i()}function T3(t){return queueMicrotask(()=>t()),()=>{t=lx}}var MM="isAngularZone",Xw=MM+"_ID",Ace=0,qe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Se(!1);onMicrotaskEmpty=new Se(!1);onStable=new Se(!1);onError=new Se(!1);constructor(n){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=aG}=n;if(typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Rce(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(MM)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ye(909,!1)}run(n,e,i){return this._inner.run(n,e,i)}runTask(n,e,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,n,Nce,lx,lx);try{return o.runTask(s,e,i)}finally{o.cancelTask(s)}}runGuarded(n,e,i){return this._inner.runGuarded(n,e,i)}runOutsideAngular(n){return this._outer.run(n)}},Nce={};function RM(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Mce(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function n(){uG(()=>{t.callbackScheduled=!1,_N(t),t.isCheckStableRunning=!0,RM(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{n()}):t._outer.run(()=>{n()}),_N(t)}function Rce(t){let n=()=>{Mce(t)},e=Ace++;t._inner=t._inner.fork({name:"angular",properties:{[MM]:!0,[Xw]:e,[Xw+e]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(Oce(l))return i.invokeTask(o,s,a,l);try{return S3(t),i.invokeTask(o,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&n(),k3(t)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return S3(t),i.invoke(o,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!Fce(l)&&n(),k3(t)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,_N(t),RM(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function _N(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function S3(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function k3(t){t._nesting--,RM(t)}var wN=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Se;onMicrotaskEmpty=new Se;onStable=new Se;onError=new Se;run(n,e,i){return n.apply(e,i)}runGuarded(n,e,i){return n.apply(e,i)}runOutsideAngular(n){return n()}runTask(n,e,i,r){return n.apply(e,i)}};function Oce(t){return dG(t,"__ignore_ng_zone__")}function Fce(t){return dG(t,"__scheduler_tick__")}function dG(t,n){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[n]===!0}var Or=class{_console=console;handleError(n){this._console.error("ERROR",n)}},Lce=new he("",{providedIn:"root",factory:()=>{let t=k(qe),n=k(Or);return e=>t.runOutsideAngular(()=>n.handleError(e))}});function I3(t,n){return iz(t,n)}function Pce(t){return iz(nz,t)}var pG=(I3.required=Pce,I3);function $ce(){return mf(yr(),bt())}function mf(t,n){return new nt(va(t,n))}var nt=(()=>{class t{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=$ce}return t})();function Vce(t){return t instanceof nt?t.nativeElement:t}function ff(t){return typeof t=="function"&&t[Yo]!==void 0}function wa(t,n){let e=kA(t,n?.equal),i=e[Yo];return e.set=r=>qb(i,r),e.update=r=>IA(i,r),e.asReadonly=Bce.bind(e),e}function Bce(){let t=this[Yo];if(t.readonlyFn===void 0){let n=()=>this();n[Yo]=t,t.readonlyFn=n}return t.readonlyFn}function hG(t){return ff(t)&&typeof t.set=="function"}function zce(){return this._results[Symbol.iterator]()}var nf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Re}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){this.dirty=!1;let i=kle(n);(this._changesDetected=!Sle(this._results,i,e))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=zce};function mG(t){return(t.flags&128)===128}var fG=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(fG||{}),gG=new Map,Gce=0;function Uce(){return Gce++}function Hce(t){gG.set(t[hC],t)}function CN(t){gG.delete(t[hC])}var E3="__ngContext__";function gf(t,n){yu(n)?(t[E3]=n[hC],Hce(n)):t[E3]=n}function yG(t){return xG(t[sx])}function bG(t){return xG(t[Fs])}function xG(t){for(;t!==null&&!xl(t);)t=t[Fs];return t}var TN;function vG(t){TN=t}function _G(){if(TN!==void 0)return TN;if(typeof document<"u")return document;throw new ye(210,!1)}var kp=new he("",{providedIn:"root",factory:()=>Wce}),Wce="ng",OM=new he(""),Pr=new he("",{providedIn:"platform",factory:()=>"unknown"});var kn=new he(""),fx=new he("",{providedIn:"root",factory:()=>_G().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var jce="h",qce="b";var wG=!1,Xce=new he("",{providedIn:"root",factory:()=>wG});var FM=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(FM||{}),yf=new he(""),D3=new Set;function vl(t){D3.has(t)||(D3.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var LM=(()=>{class t{view;node;constructor(e,i){this.view=e,this.node=i}static __NG_ELEMENT_ID__=Kce}return t})();function Kce(){return new LM(bt(),yr())}var Wm=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Wm||{}),CG=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new t})}return t})(),Yce=[Wm.EarlyRead,Wm.Write,Wm.MixedReadWrite,Wm.Read],Qce=(()=>{class t{ngZone=k(qe);scheduler=k(wp);errorHandler=k(Or,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(yf,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Sn(16),this.executing=!0;for(let i of Yce)for(let r of this.sequences)if(!(r.erroredOrDestroyed||!r.hooks[i]))try{r.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=r.hooks[i];return o(r.pipelinedValue)},r.snapshot))}catch(o){r.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let i of this.sequences)i.afterRun(),i.once&&(this.sequences.delete(i),i.destroy());for(let i of this.deferredRegistrations)this.sequences.add(i);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Sn(17)}register(e){let{view:i}=e;i!==void 0?((i[qm]??=[]).push(e),pf(i),i[_t]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,i){return i?i.run(FM.AFTER_NEXT_RENDER,e):e()}static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new t})}return t})(),SN=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,e,i,r,o,s=null){this.impl=n,this.hooks=e,this.view=i,this.once=r,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let n=this.view?.[qm];n&&(this.view[qm]=n.filter(e=>e!==this))}};function bf(t,n){!n?.injector&&bM(bf);let e=n?.injector??k(Vt);return vl("NgAfterRender"),TG(t,e,n,!1)}function ts(t,n){!n?.injector&&bM(ts);let e=n?.injector??k(Vt);return vl("NgAfterNextRender"),TG(t,e,n,!0)}function Zce(t,n){if(t instanceof Function){let e=[void 0,void 0,void 0,void 0];return e[n]=t,e}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function TG(t,n,e,i){let r=n.get(CG);r.impl??=n.get(Qce);let o=n.get(yf,null,{optional:!0}),s=e?.phase??Wm.MixedReadWrite,a=e?.manualCleanup!==!0?n.get(hf):null,l=n.get(LM,null,{optional:!0}),c=new SN(r.impl,Zce(t,s),l?.view,i,a,o?.snapshot(null));return r.impl.register(c),c}var Jce=(t,n,e,i)=>{};function eue(t,n,e,i){Jce(t,n,e,i)}var tue=()=>null;function SG(t,n,e=!1){return tue(t,n,e)}function kG(t,n){let e=t.contentQueries;if(e!==null){let i=Bt(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=t.data[s];IM(o),a.contentQueries(2,n[s],s)}}}finally{Bt(i)}}}function kN(t,n,e){IM(0);let i=Bt(null);try{n(t,e)}finally{Bt(i)}}function PM(t,n,e){if(xM(n)){let i=Bt(null);try{let r=n.directiveStart,o=n.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=e[s];a.contentQueries(1,l,s)}}}finally{Bt(i)}}}var xa=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(xa||{}),Tw;function nue(){if(Tw===void 0&&(Tw=null,Km.trustedTypes))try{Tw=Km.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Tw}function wC(t){return nue()?.createHTML(t)||t}var Sw;function iue(){if(Sw===void 0&&(Sw=null,Km.trustedTypes))try{Sw=Km.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sw}function A3(t){return iue()?.createHTML(t)||t}var fl=class{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ez})`}},IN=class extends fl{getTypeName(){return"HTML"}},EN=class extends fl{getTypeName(){return"Style"}},DN=class extends fl{getTypeName(){return"Script"}},AN=class extends fl{getTypeName(){return"URL"}},NN=class extends fl{getTypeName(){return"ResourceURL"}};function _l(t){return t instanceof fl?t.changingThisBreaksApplicationSecurity:t}function Ip(t,n){let e=rue(t);if(e!=null&&e!==n){if(e==="ResourceURL"&&n==="URL")return!0;throw new Error(`Required a safe ${n}, got a ${e} (see ${ez})`)}return e===n}function rue(t){return t instanceof fl&&t.getTypeName()||null}function IG(t){return new IN(t)}function EG(t){return new EN(t)}function DG(t){return new DN(t)}function AG(t){return new AN(t)}function NG(t){return new NN(t)}function oue(t){let n=new RN(t);return sue()?new MN(n):n}var MN=class{inertDocumentHelper;constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{let e=new window.DOMParser().parseFromString(wC(n),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(n):(e.firstChild?.remove(),e)}catch{return null}}},RN=class{defaultDoc;inertDocument;constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){let e=this.inertDocument.createElement("template");return e.innerHTML=wC(n),e}};function sue(){try{return!!new window.DOMParser().parseFromString(wC(""),"text/html")}catch{return!1}}var aue=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $M(t){return t=String(t),t.match(aue)?t:"unsafe:"+t}function wl(t){let n={};for(let e of t.split(","))n[e]=!0;return n}function gx(...t){let n={};for(let e of t)for(let i in e)e.hasOwnProperty(i)&&(n[i]=!0);return n}var MG=wl("area,br,col,hr,img,wbr"),RG=wl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),OG=wl("rp,rt"),lue=gx(OG,RG),cue=gx(RG,wl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),uue=gx(OG,wl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),N3=gx(MG,cue,uue,lue),FG=wl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),due=wl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),pue=wl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),hue=gx(FG,due,pue),mue=wl("script,style,template"),ON=class{sanitizedSomething=!1;buf=[];sanitizeChildren(n){let e=n.firstChild,i=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?i=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,i&&e.firstChild){r.push(e),e=yue(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=gue(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(n){let e=M3(n).toLowerCase();if(!N3.hasOwnProperty(e))return this.sanitizedSomething=!0,!mue.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let i=n.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!hue.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;FG[a]&&(l=$M(l)),this.buf.push(" ",s,'="',R3(l),'"')}return this.buf.push(">"),!0}endElement(n){let e=M3(n).toLowerCase();N3.hasOwnProperty(e)&&!MG.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(n){this.buf.push(R3(n))}};function fue(t,n){return(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function gue(t){let n=t.nextSibling;if(n&&t!==n.previousSibling)throw LG(n);return n}function yue(t){let n=t.firstChild;if(n&&fue(t,n))throw LG(n);return n}function M3(t){let n=t.nodeName;return typeof n=="string"?n:"FORM"}function LG(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var bue=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xue=/([^\#-~ |!])/g;function R3(t){return t.replace(/&/g,"&amp;").replace(bue,function(n){let e=n.charCodeAt(0),i=n.charCodeAt(1);return"&#"+((e-55296)*1024+(i-56320)+65536)+";"}).replace(xue,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var kw;function VM(t,n){let e=null;try{kw=kw||oue(t);let i=n?String(n):"";e=kw.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=e.innerHTML,e=kw.getInertBodyElement(i)}while(i!==o);let a=new ON().sanitizeChildren(O3(e)||e);return wC(a)}finally{if(e){let i=O3(e)||e;for(;i.firstChild;)i.firstChild.remove()}}}function O3(t){return"content"in t&&vue(t)?t.content:null}function vue(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var $r=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}($r||{});function CC(t){let n=_ue();return n?A3(n.sanitize($r.HTML,t)||""):Ip(t,"HTML")?A3(_l(t)):VM(_G(),ha(t))}function _ue(){let t=bt();return t&&t[hl].sanitizer}var wue=/^>|^->|<!--|-->|--!>|<!-$/g,Cue=/(<|>)/g,Tue="\u200B$1\u200B";function Sue(t){return t.replace(wue,n=>n.replace(Cue,Tue))}function PG(t){return t.ownerDocument.defaultView}function $G(t){return t instanceof Function?t():t}function kue(t,n,e){let i=t.length;for(;;){let r=t.indexOf(n,e);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=n.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}e=r+1}}var VG="ng-template";function Iue(t,n,e,i){let r=0;if(i){for(;r<n.length&&typeof n[r]=="string";r+=2)if(n[r]==="class"&&kue(n[r+1].toLowerCase(),e,0)!==-1)return!0}else if(BM(t))return!1;if(r=n.indexOf(1,r),r>-1){let o;for(;++r<n.length&&typeof(o=n[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function BM(t){return t.type===4&&t.value!==VG}function Eue(t,n,e){let i=t.type===4&&!e?VG:t.value;return n===i}function Due(t,n,e){let i=4,r=t.attrs,o=r!==null?Mue(r):0,s=!1;for(let a=0;a<n.length;a++){let l=n[a];if(typeof l=="number"){if(!s&&!Rs(i)&&!Rs(l))return!1;if(s&&Rs(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!Eue(t,l,e)||l===""&&n.length===1){if(Rs(i))return!1;s=!0}}else if(i&8){if(r===null||!Iue(t,r,l,e)){if(Rs(i))return!1;s=!0}}else{let c=n[++a],u=Aue(l,r,BM(t),e);if(u===-1){if(Rs(i))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(Rs(i))return!1;s=!0}}}}return Rs(i)||s}function Rs(t){return(t&1)===0}function Aue(t,n,e,i){if(n===null)return-1;let r=0;if(i||!e){let o=!1;for(;r<n.length;){let s=n[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=n[++r];for(;typeof a=="string";)a=n[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Rue(n,t)}function BG(t,n,e=!1){for(let i=0;i<n.length;i++)if(Due(t,n[i],e))return!0;return!1}function Nue(t){let n=t.attrs;if(n!=null){let e=n.indexOf(5);if((e&1)===0)return n[e+1]}return null}function Mue(t){for(let n=0;n<t.length;n++){let e=t[n];if(Kz(e))return n}return t.length}function Rue(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){let i=t[e];if(typeof i=="number")return-1;if(i===n)return e;e++}return-1}function Oue(t,n){e:for(let e=0;e<n.length;e++){let i=n[e];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function F3(t,n){return t?":not("+n.trim()+")":n}function Fue(t){let n=t[0],e=1,i=2,r="",o=!1;for(;e<t.length;){let s=t[e];if(typeof s=="string")if(i&2){let a=t[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Rs(s)&&(n+=F3(o,r),r=""),i=s,o=o||!Rs(i);e++}return r!==""&&(n+=F3(o,r)),n}function Lue(t){return t.map(Fue).join(",")}function Pue(t){let n=[],e=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&n.push(o,t[++i]):r===8&&e.push(o);else{if(!Rs(r))break;r=o}i++}return e.length&&n.push(1,...e),n}var Vr={};function $ue(t,n){return t.createText(n)}function Vue(t,n,e){t.setValue(n,e)}function Bue(t,n){return t.createComment(Sue(n))}function zG(t,n,e){return t.createElement(n,e)}function Kw(t,n,e,i,r){t.insertBefore(n,e,i,r)}function GG(t,n,e){t.appendChild(n,e)}function L3(t,n,e,i,r){i!==null?Kw(t,n,e,i,r):GG(t,n,e)}function zue(t,n,e){t.removeChild(null,n,e)}function Gue(t,n,e){t.setAttribute(n,"style",e)}function Uue(t,n,e){e===""?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function UG(t,n,e){let{mergedAttrs:i,classes:r,styles:o}=e;i!==null&&yce(t,n,i),r!==null&&Uue(t,n,r),o!==null&&Gue(t,n,o)}function zM(t,n,e,i,r,o,s,a,l,c,u){let d=Hi+i,p=d+r,h=Hue(d,p),m=typeof c=="function"?c():c;return h[Nt]={type:t,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:n,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:u}}function Hue(t,n){let e=[];for(let i=0;i<n;i++)e.push(i<t?null:Vr);return e}function Wue(t){let n=t.tView;return n===null||n.incompleteFirstPass?t.tView=zM(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function GM(t,n,e,i,r,o,s,a,l,c,u){let d=n.blueprint.slice();return d[bl]=r,d[_t]=i|4|128|8|64|1024,(c!==null||t&&t[_t]&2048)&&(d[_t]|=2048),Oz(d),d[gr]=d[cf]=t,d[Ai]=e,d[hl]=s||t&&t[hl],d[ei]=a||t&&t[ei],d[Jm]=l||t&&t[Jm]||null,d[lo]=o,d[hC]=Uce(),d[Zm]=u,d[Sz]=c,d[Ro]=n.type==2?t[Ro]:d,d}function jue(t,n,e){let i=va(n,t),r=Wue(e),o=t[hl].rendererFactory,s=UM(t,GM(t,r,null,HG(e),i,n,null,o.createRenderer(i,e),null,null,null));return t[n.index]=s}function HG(t){let n=16;return t.signals?n=4096:t.onPush&&(n=64),n}function WG(t,n,e,i){if(e===0)return-1;let r=n.length;for(let o=0;o<e;o++)n.push(i),t.blueprint.push(i),t.data.push(null);return r}function UM(t,n){return t[sx]?t[y3][Fs]=n:t[sx]=n,t[y3]=n,n}function V(t=1){jG(ti(),bt(),_a()+t,!1)}function jG(t,n,e,i){if(!i)if((n[_t]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Dw(n,o,e)}else{let o=t.preOrderHooks;o!==null&&Aw(n,o,0,e)}vp(e)}var TC=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(TC||{});function FN(t,n,e,i){let r=Bt(null);try{let[o,s,a]=t.inputs[e],l=null;(s&TC.SignalBased)!==0&&(l=n[o][Yo]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(n,i)),t.setInput!==null?t.setInput(n,l,i,e,o):Iz(n,l,o,i)}finally{Bt(r)}}function qG(t,n,e,i,r){let o=_a(),s=i&2;try{vp(-1),s&&n.length>Hi&&jG(t,n,Hi,!1),Sn(s?2:0,r),e(i,r)}finally{vp(o),Sn(s?3:1,r)}}function SC(t,n,e){Zue(t,n,e),(e.flags&64)===64&&Jue(t,n,e)}function HM(t,n,e=va){let i=n.localNames;if(i!==null){let r=n.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?e(n,t):t[s];t[r++]=a}}}function que(t,n,e,i){let o=i.get(Xce,wG)||e===xa.ShadowDom,s=t.selectRootElement(n,o);return Xue(s),s}function Xue(t){Kue(t)}var Kue=()=>null;function Yue(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function WM(t,n,e,i,r,o,s,a){if(!a&&qM(n,t,e,i,r)){uf(n)&&Que(e,n.index);return}if(n.type&3){let l=va(n,e);i=Yue(i),r=s!=null?s(r,n.value||"",i):r,o.setProperty(l,i,r)}else n.type&12}function Que(t,n){let e=ba(n,t);e[_t]&16||(e[_t]|=64)}function Zue(t,n,e){let i=e.directiveStart,r=e.directiveEnd;uf(e)&&jue(n,e,t.data[i+e.componentOffset]),t.firstCreatePass||jw(e,n);let o=e.initialInputs;for(let s=i;s<r;s++){let a=t.data[s],l=ax(n,t,s,e);if(gf(l,n),o!==null&&ide(n,s-i,l,a,e,o),ga(a)){let c=ba(e.index,n);c[Ai]=ax(n,t,s,e)}}}function Jue(t,n,e){let i=e.directiveStart,r=e.directiveEnd,o=e.index,s=lce();try{vp(o);for(let a=i;a<r;a++){let l=t.data[a],c=n[a];gN(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&ede(l,c)}}finally{vp(-1),gN(s)}}function ede(t,n){t.hostBindings!==null&&t.hostBindings(1,n)}function jM(t,n){let e=t.directiveRegistry,i=null;if(e)for(let r=0;r<e.length;r++){let o=e[r];BG(n,o.selectors,!1)&&(i??=[],ga(o)?i.unshift(o):i.push(o))}return i}function tde(t,n,e,i,r,o){let s=va(t,n);nde(n[ei],s,o,t.value,e,i,r)}function nde(t,n,e,i,r,o,s){if(o==null)t.removeAttribute(n,r,e);else{let a=s==null?ha(o):s(o,i||"",r);t.setAttribute(n,r,a,e)}}function ide(t,n,e,i,r,o){let s=o[n];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];FN(i,e,l,c)}}function rde(t,n){let e=t[Jm],i=e?e.get(Or,null):null;i&&i.handleError(n)}function qM(t,n,e,i,r){let o=t.inputs?.[i],s=t.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],u=s[l+1],d=n.data[c];FN(d,e[c],u,r),a=!0}if(o)for(let l of o){let c=e[l],u=n.data[l];FN(u,c,i,r),a=!0}return a}function ode(t,n){let e=ba(n,t),i=e[Nt];sde(i,e);let r=e[bl];r!==null&&e[Zm]===null&&(e[Zm]=SG(r,e[Jm])),Sn(18),XM(i,e,e[Ai]),Sn(19,e[Ai])}function sde(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])}function XM(t,n,e){EM(n);try{let i=t.viewQuery;i!==null&&kN(1,i,e);let r=t.template;r!==null&&qG(t,n,r,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),n[ml]?.finishViewCreation(t),t.staticContentQueries&&kG(t,n),t.staticViewQueries&&kN(2,t.viewQuery,e);let o=t.components;o!==null&&ade(n,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{n[_t]&=-5,DM()}}function ade(t,n){for(let e=0;e<n.length;e++)ode(t,n[e])}function yx(t,n,e,i){let r=Bt(null);try{let o=n.tView,a=t[_t]&4096?4096:16,l=GM(t,o,e,a,null,n,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=t[n.index];l[gp]=c;let u=t[ml];return u!==null&&(l[ml]=u.createEmbeddedView(o)),XM(o,l,e),l}finally{Bt(r)}}function rf(t,n){return!n||n.firstChild===null||mG(t)}var lde;function KM(t,n){return lde(t,n)}var gl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(gl||{});function YM(t){return(t.flags&32)===32}function jm(t,n,e,i,r){if(i!=null){let o,s=!1;xl(i)?o=i:yu(i)&&(s=!0,i=i[bl]);let a=ya(i);t===0&&e!==null?r==null?GG(n,e,a):Kw(n,e,a,r||null,!0):t===1&&e!==null?Kw(n,e,a,r||null,!0):t===2?zue(n,a,s):t===3&&n.destroyNode(a),o!=null&&bde(n,t,o,e,r)}}function cde(t,n){XG(t,n),n[bl]=null,n[lo]=null}function ude(t,n,e,i,r,o){i[bl]=r,i[lo]=n,EC(t,i,e,1,r,o)}function XG(t,n){n[hl].changeDetectionScheduler?.notify(9),EC(t,n,n[ei],2,null,null)}function dde(t){let n=t[sx];if(!n)return QA(t[Nt],t);for(;n;){let e=null;if(yu(n))e=n[sx];else{let i=n[fr];i&&(e=i)}if(!e){for(;n&&!n[Fs]&&n!==t;)yu(n)&&QA(n[Nt],n),n=n[gr];n===null&&(n=t),yu(n)&&QA(n[Nt],n),e=n&&n[Fs]}n=e}}function QM(t,n){let e=t[ef],i=e.indexOf(n);e.splice(i,1)}function kC(t,n){if(df(n))return;let e=n[ei];e.destroyNode&&EC(t,n,e,3,null,null),dde(n)}function QA(t,n){if(df(n))return;let e=Bt(null);try{n[_t]&=-129,n[_t]|=256,n[Zo]&&jb(n[Zo]),hde(t,n),pde(t,n),n[Nt].type===1&&n[ei].destroy();let i=n[gp];if(i!==null&&xl(n[gr])){i!==n[gr]&&QM(i,n);let r=n[ml];r!==null&&r.detachView(t)}CN(n)}finally{Bt(e)}}function pde(t,n){let e=t.cleanup,i=n[Vw];if(e!==null)for(let s=0;s<e.length-1;s+=2)if(typeof e[s]=="string"){let a=e[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[e[s+1]];e[s].call(a)}i!==null&&(n[Vw]=null);let r=n[gu];if(r!==null){n[gu]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=n[yp];if(o!==null){n[yp]=null;for(let s of o)s.destroy()}}function hde(t,n){let e;if(t!=null&&(e=t.destroyHooks)!=null)for(let i=0;i<e.length;i+=2){let r=n[e[i]];if(!(r instanceof _p)){let o=e[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Sn(4,a,l);try{l.call(a)}finally{Sn(5,a,l)}}else{Sn(4,r,o);try{o.call(r)}finally{Sn(5,r,o)}}}}}function KG(t,n,e){return mde(t,n.parent,e)}function mde(t,n,e){let i=n;for(;i!==null&&i.type&168;)n=i,i=n.parent;if(i===null)return e[bl];if(uf(i)){let{encapsulation:r}=t.data[i.directiveStart+i.componentOffset];if(r===xa.None||r===xa.Emulated)return null}return va(i,e)}function YG(t,n,e){return gde(t,n,e)}function fde(t,n,e){return t.type&40?va(t,e):null}var gde=fde,P3;function IC(t,n,e,i){let r=KG(t,i,n),o=n[ei],s=i.parent||n[lo],a=YG(s,i,n);if(r!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)L3(o,r,e[l],a,!1);else L3(o,r,e,a,!1);P3!==void 0&&P3(o,i,n,e,r)}function ix(t,n){if(n!==null){let e=n.type;if(e&3)return va(n,t);if(e&4)return LN(-1,t[n.index]);if(e&8){let i=n.child;if(i!==null)return ix(t,i);{let r=t[n.index];return xl(r)?LN(-1,r):ya(r)}}else{if(e&128)return ix(t,n.next);if(e&32)return KM(n,t)()||ya(t[n.index]);{let i=QG(t,n);if(i!==null){if(Array.isArray(i))return i[0];let r=xp(t[Ro]);return ix(r,i)}else return ix(t,n.next)}}}return null}function QG(t,n){if(n!==null){let i=t[Ro][lo],r=n.projection;return i.projection[r]}return null}function LN(t,n){let e=fr+t+1;if(e<n.length){let i=n[e],r=i[Nt].firstChild;if(r!==null)return ix(i,r)}return n[bp]}function ZM(t,n,e,i,r,o,s){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=i[e.index],l=e.type;if(s&&n===0&&(a&&gf(ya(a),i),e.flags|=2),!YM(e))if(l&8)ZM(t,n,e.child,i,r,o,!1),jm(n,t,r,a,o);else if(l&32){let c=KM(e,i),u;for(;u=c();)jm(n,t,r,u,o);jm(n,t,r,a,o)}else l&16?ZG(t,n,i,e,r,o):jm(n,t,r,a,o);e=s?e.projectionNext:e.next}}function EC(t,n,e,i,r,o){ZM(e,i,t.firstChild,n,r,o,!1)}function yde(t,n,e){let i=n[ei],r=KG(t,e,n),o=e.parent||n[lo],s=YG(o,e,n);ZG(i,0,n,e,r,s)}function ZG(t,n,e,i,r,o){let s=e[Ro],l=s[lo].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];jm(n,t,r,u,o)}else{let c=l,u=s[gr];mG(i)&&(c.flags|=128),ZM(t,n,c,u,r,o,!0)}}function bde(t,n,e,i,r){let o=e[bp],s=ya(e);o!==s&&jm(n,t,i,o,r);for(let a=fr;a<e.length;a++){let l=e[a];EC(l[Nt],l,t,n,i,o)}}function xde(t,n,e,i,r){if(n)r?t.addClass(e,i):t.removeClass(e,i);else{let o=i.indexOf("-")===-1?void 0:gl.DashCase;r==null?t.removeStyle(e,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=gl.Important),t.setStyle(e,i,r,o))}}function Yw(t,n,e,i,r=!1){for(;e!==null;){if(e.type===128){e=r?e.projectionNext:e.next;continue}let o=n[e.index];o!==null&&i.push(ya(o)),xl(o)&&vde(o,i);let s=e.type;if(s&8)Yw(t,n,e.child,i);else if(s&32){let a=KM(e,n),l;for(;l=a();)i.push(l)}else if(s&16){let a=QG(n,e);if(Array.isArray(a))i.push(...a);else{let l=xp(n[Ro]);Yw(l[Nt],l,a,i,!0)}}e=r?e.projectionNext:e.next}return i}function vde(t,n){for(let e=fr;e<t.length;e++){let i=t[e],r=i[Nt].firstChild;r!==null&&Yw(i[Nt],i,r,n)}t[bp]!==t[bl]&&n.push(t[bp])}function JG(t){if(t[qm]!==null){for(let n of t[qm])n.impl.addSequence(n);t[qm].length=0}}var eU=[];function _de(t){return t[Zo]??wde(t)}function wde(t){let n=eU.pop()??Object.create(Tde);return n.lView=t,n}function Cde(t){t.lView[Zo]!==t&&(t.lView=null,eU.push(t))}var Tde=At(ie({},Nm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{pf(t.lView)},consumerOnSignalRead(){this.lView[Zo]=this}});function Sde(t){let n=t[Zo]??Object.create(kde);return n.lView=t,n}var kde=At(ie({},Nm),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let n=xp(t.lView);for(;n&&!tU(n[Nt]);)n=xp(n);n&&Fz(n)},consumerOnSignalRead(){this.lView[Zo]=this}});function tU(t){return t.type!==2}function nU(t){if(t[yp]===null)return;let n=!0;for(;n;){let e=!1;for(let i of t[yp])i.dirty&&(e=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));n=e&&!!(t[_t]&8192)}}var Ide=100;function iU(t,n=!0,e=0){let r=t[hl].rendererFactory,o=!1;o||r.begin?.();try{Ede(t,e)}catch(s){throw n&&rde(t,s),s}finally{o||r.end?.()}}function Ede(t,n){let e=Vz();try{Gw(!0),PN(t,n);let i=0;for(;fC(t);){if(i===Ide)throw new ye(103,!1);i++,PN(t,1)}}finally{Gw(e)}}function Dde(t,n,e,i){if(df(n))return;let r=n[_t],o=!1,s=!1;EM(n);let a=!0,l=null,c=null;o||(tU(t)?(c=_de(n),l=Wb(c)):vA()===null?(a=!1,c=Sde(n),l=Wb(c)):n[Zo]&&(jb(n[Zo]),n[Zo]=null));try{Oz(n),oce(t.bindingStartIndex),e!==null&&qG(t,n,e,2,i);let u=(r&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Dw(n,h,null)}else{let h=t.preOrderHooks;h!==null&&Aw(n,h,0,null),KA(n,0)}if(s||Ade(n),nU(n),rU(n,0),t.contentQueries!==null&&kG(t,n),!o)if(u){let h=t.contentCheckHooks;h!==null&&Dw(n,h)}else{let h=t.contentHooks;h!==null&&Aw(n,h,1),KA(n,1)}Mde(t,n);let d=t.components;d!==null&&sU(n,d,0);let p=t.viewQuery;if(p!==null&&kN(2,p,i),!o)if(u){let h=t.viewCheckHooks;h!==null&&Dw(n,h)}else{let h=t.viewHooks;h!==null&&Aw(n,h,2),KA(n,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),n[XA]){for(let h of n[XA])h();n[XA]=null}o||(JG(n),n[_t]&=-73)}catch(u){throw o||pf(n),u}finally{c!==null&&(U_(c,l),a&&Cde(c)),DM()}}function rU(t,n){for(let e=yG(t);e!==null;e=bG(e))for(let i=fr;i<e.length;i++){let r=e[i];oU(r,n)}}function Ade(t){for(let n=yG(t);n!==null;n=bG(n)){if(!(n[_t]&2))continue;let e=n[ef];for(let i=0;i<e.length;i++){let r=e[i];Fz(r)}}}function Nde(t,n,e){Sn(18);let i=ba(n,t);oU(i,e),Sn(19,i[Ai])}function oU(t,n){_M(t)&&PN(t,n)}function PN(t,n){let i=t[Nt],r=t[_t],o=t[Zo],s=!!(n===0&&r&16);if(s||=!!(r&64&&n===0),s||=!!(r&1024),s||=!!(o?.dirty&&H_(o)),s||=!1,o&&(o.dirty=!1),t[_t]&=-9217,s)Dde(i,t,i.template,t[Ai]);else if(r&8192){nU(t),rU(t,1);let a=i.components;a!==null&&sU(t,a,1),JG(t)}}function sU(t,n,e){for(let i=0;i<n.length;i++)Nde(t,n[i],e)}function Mde(t,n){let e=t.hostBindingOpCodes;if(e!==null)try{for(let i=0;i<e.length;i++){let r=e[i];if(r<0)vp(~r);else{let o=r,s=e[++i],a=e[++i];ace(s,o);let l=n[o];Sn(24,l),a(2,l),Sn(25,l)}}}finally{vp(-1)}}function JM(t,n){let e=Vz()?64:1088;for(t[hl].changeDetectionScheduler?.notify(n);t;){t[_t]|=e;let i=xp(t);if(zw(t)&&!i)return t;t=i}return null}function aU(t,n,e,i){return[t,!0,0,n,null,i,null,e,null,null]}function lU(t,n){let e=fr+n;if(e<t.length)return t[e]}function bx(t,n,e,i=!0){let r=n[Nt];if(Rde(r,n,t,e),i){let s=LN(e,t),a=n[ei],l=a.parentNode(t[bp]);l!==null&&ude(r,t[lo],a,n,l,s)}let o=n[Zm];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function cU(t,n){let e=cx(t,n);return e!==void 0&&kC(e[Nt],e),e}function cx(t,n){if(t.length<=fr)return;let e=fr+n,i=t[e];if(i){let r=i[gp];r!==null&&r!==t&&QM(r,i),n>0&&(t[e-1][Fs]=i[Fs]);let o=Pw(t,fr+n);cde(i[Nt],i);let s=o[ml];s!==null&&s.detachView(o[Nt]),i[gr]=null,i[Fs]=null,i[_t]&=-129}return i}function Rde(t,n,e,i){let r=fr+i,o=e.length;i>0&&(e[r-1][Fs]=n),i<o-fr?(n[Fs]=e[r],fz(e,fr+i,n)):(e.push(n),n[Fs]=null),n[gr]=e;let s=n[gp];s!==null&&e!==s&&uU(s,n);let a=n[ml];a!==null&&a.insertView(t),mN(n),n[_t]|=128}function uU(t,n){let e=t[ef],i=n[gr];if(yu(i))t[_t]|=2;else{let r=i[gr][Ro];n[Ro]!==r&&(t[_t]|=2)}e===null?t[ef]=[n]:e.push(n)}var ux=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let n=this._lView,e=n[Nt];return Yw(e,n,e.firstChild,[])}constructor(n,e,i=!0){this._lView=n,this._cdRefInjectingView=e,this.notifyErrorHandler=i}get context(){return this._lView[Ai]}set context(n){this._lView[Ai]=n}get destroyed(){return df(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let n=this._lView[gr];if(xl(n)){let e=n[Bw],i=e?e.indexOf(this):-1;i>-1&&(cx(n,i),Pw(e,i))}this._attachedToViewContainer=!1}kC(this._lView[Nt],this._lView)}onDestroy(n){Lz(this._lView,n)}markForCheck(){JM(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_t]&=-129}reattach(){mN(this._lView),this._lView[_t]|=128}detectChanges(){this._lView[_t]|=1024,iU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let n=zw(this._lView),e=this._lView[gp];e!==null&&!n&&QM(e,this._lView),XG(this._lView[Nt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=n;let e=zw(this._lView),i=this._lView[gp];i!==null&&!e&&uU(i,this._lView),mN(this._lView)}};var Fr=(()=>{class t{static __NG_ELEMENT_ID__=Lde}return t})(),Ode=Fr,Fde=class extends Ode{_declarationLView;_declarationTContainer;elementRef;constructor(n,e,i){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,e){return this.createEmbeddedViewImpl(n,e)}createEmbeddedViewImpl(n,e,i){let r=yx(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:e,dehydratedView:i});return new ux(r)}};function Lde(){return DC(yr(),bt())}function DC(t,n){return t.type&4?new Fde(n,t,mf(t,n)):null}function xx(t,n,e,i,r){let o=t.data[n];if(o===null)o=Pde(t,n,e,i,r),sce()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=i,o.attrs=r;let s=ice();o.injectorIndex=s===null?-1:s.injectorIndex}return Tp(o,!0),o}function Pde(t,n,e,i,r){let o=$z(),s=SM(),a=s?o:o&&o.parent,l=t.data[n]=Vde(t,a,e,n,i,r);return $de(t,l,o,s),l}function $de(t,n,e,i){t.firstChild===null&&(t.firstChild=n),e!==null&&(i?e.child==null&&n.parent!==null&&(e.child=n):e.next===null&&(e.next=n,n.prev=e))}function Vde(t,n,e,i,r,o){let s=n?n.injectorIndex:-1,a=0;return Pz()&&(a|=128),{type:e,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Yqe=new RegExp(`^(\\d+)*(${qce}|${jce})*(.*)`);var Bde=()=>null;function of(t,n){return Bde(t,n)}var zde=class{},dU=class{},$N=class{resolveComponentFactory(n){throw Error(`No component factory found for ${ao(n)}.`)}},xf=class{static NULL=new $N},Ni=class{},di=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Gde()}return t})();function Gde(){let t=bt(),n=yr(),e=ba(n.index,t);return(yu(e)?e:t)[ei]}var Ude=(()=>{class t{static \u0275prov=pe({token:t,providedIn:"root",factory:()=>null})}return t})();var ZA={},VN=class{injector;parentInjector;constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,i){i=lC(i);let r=this.injector.get(n,ZA,i);return r!==ZA||e===ZA?r:this.parentInjector.get(n,e,i)}};function BN(t,n,e){let i=e?t.styles:null,r=e?t.classes:null,o=0;if(n!==null)for(let s=0;s<n.length;s++){let a=n[s];if(typeof a=="number")o=a;else if(o==1)r=sN(r,a);else if(o==2){let l=a,c=n[++s];i=sN(i,l+": "+c+";")}}e?t.styles=i:t.stylesWithoutHost=i,e?t.classes=r:t.classesWithoutHost=r}function Me(t,n=Pt.Default){let e=bt();if(e===null)return Xe(t,n);let i=yr();return nG(i,e,ir(t),n)}function eR(t,n,e,i,r){let o=i===null?null:{"":-1},s=r(t,e);if(s!==null){let a,l=null,c=null,u=Wde(s);u===null?a=s:[a,l,c]=u,Xde(t,n,e,a,o,l,c)}o!==null&&i!==null&&Hde(e,i,o)}function Hde(t,n,e){let i=t.localNames=[];for(let r=0;r<n.length;r+=2){let o=e[n[r+1]];if(o==null)throw new ye(-301,!1);i.push(n[r],o)}}function Wde(t){let n=null,e=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&ga(a)&&(n=a),a.findHostDirectiveDefs!==null){e=!0;break}}if(!e)return null;let i=null,r=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(i??=[],r??=new Map,o??=new Map,jde(s,i,o,r)),s===n&&(i??=[],i.push(s));return i!==null?(i.push(...n===null?t:t.slice(1)),[i,r,o]):null}function jde(t,n,e,i){let r=n.length;t.findHostDirectiveDefs(t,n,i),e.set(t,[r,n.length-1])}function qde(t,n,e){n.componentOffset=e,(t.components??=[]).push(n.index)}function Xde(t,n,e,i,r,o,s){let a=i.length,l=!1;for(let p=0;p<a;p++){let h=i[p];!l&&ga(h)&&(l=!0,qde(t,e,p)),bN(jw(e,n),t,h.type)}epe(e,t.data.length,a);for(let p=0;p<a;p++){let h=i[p];h.providersResolver&&h.providersResolver(h)}let c=!1,u=!1,d=WG(t,n,a,null);a>0&&(e.directiveToIndex=new Map);for(let p=0;p<a;p++){let h=i[p];if(e.mergedAttrs=tf(e.mergedAttrs,h.hostAttrs),Yde(t,e,n,d,h),Jde(d,h,r),s!==null&&s.has(h)){let[g,f]=s.get(h);e.directiveToIndex.set(h.type,[d,g+e.directiveStart,f+e.directiveStart])}else(o===null||!o.has(h))&&e.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(e.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(e.flags|=64);let m=h.type.prototype;!c&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(e.index),c=!0),!u&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}Kde(t,e,o)}function Kde(t,n,e){for(let i=n.directiveStart;i<n.directiveEnd;i++){let r=t.data[i];if(e===null||!e.has(r))$3(0,n,r,i),$3(1,n,r,i),B3(n,i,!1);else{let o=e.get(r);V3(0,n,o,i),V3(1,n,o,i),B3(n,i,!0)}}}function $3(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;t===0?s=n.inputs??={}:s=n.outputs??={},s[o]??=[],s[o].push(i),pU(n,o)}}function V3(t,n,e,i){let r=t===0?e.inputs:e.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;t===0?a=n.hostDirectiveInputs??={}:a=n.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),pU(n,s)}}function pU(t,n){n==="class"?t.flags|=8:n==="style"&&(t.flags|=16)}function B3(t,n,e){let{attrs:i,inputs:r,hostDirectiveInputs:o}=t;if(i===null||!e&&r===null||e&&o===null||BM(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&r.hasOwnProperty(l)){let c=r[l];for(let u of c)if(u===n){s??=[],s.push(l,i[a+1]);break}}else if(e&&o.hasOwnProperty(l)){let c=o[l];for(let u=0;u<c.length;u+=2)if(c[u]===n){s??=[],s.push(c[u+1],i[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Yde(t,n,e,i,r){t.data[i]=r;let o=r.factory||(r.factory=mp(r.type,!0)),s=new _p(o,ga(r),Me);t.blueprint[i]=s,e[i]=s,Qde(t,n,i,WG(t,e,r.hostVars,Vr),r)}function Qde(t,n,e,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~n.index;Zde(s)!=a&&s.push(a),s.push(e,i,o)}}function Zde(t){let n=t.length;for(;n>0;){let e=t[--n];if(typeof e=="number"&&e<0)return e}return 0}function Jde(t,n,e){if(e){if(n.exportAs)for(let i=0;i<n.exportAs.length;i++)e[n.exportAs[i]]=t;ga(n)&&(e[""]=t)}}function epe(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}function hU(t,n,e,i,r,o,s,a){let l=n.consts,c=bu(l,s),u=xx(n,t,2,i,c);return o&&eR(n,e,u,bu(l,a),r),u.mergedAttrs=tf(u.mergedAttrs,u.attrs),u.attrs!==null&&BN(u,u.attrs,!1),u.mergedAttrs!==null&&BN(u,u.mergedAttrs,!0),n.queries!==null&&n.queries.elementStart(n,u),u}function mU(t,n){AM(t,n),xM(n)&&t.queries.elementEnd(n)}var Qw=class extends xf{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){let e=fp(n);return new sf(e,this.ngModule)}};function tpe(t){return Object.keys(t).map(n=>{let[e,i,r]=t[n],o={propName:e,templateName:n,isSignal:(i&TC.SignalBased)!==0};return r&&(o.transform=r),o})}function npe(t){return Object.keys(t).map(n=>({propName:t[n],templateName:n}))}function ipe(t,n,e){let i=n instanceof yi?n:n?.injector;return i&&t.getStandaloneInjector!==null&&(i=t.getStandaloneInjector(i)||i),i?new VN(e,i):e}function rpe(t){let n=t.get(Ni,null);if(n===null)throw new ye(407,!1);let e=t.get(Ude,null),i=t.get(wp,null);return{rendererFactory:n,sanitizer:e,changeDetectionScheduler:i}}function ope(t,n){let e=(t.selectors[0][0]||"div").toLowerCase();return zG(n,e,e==="svg"?Nz:e==="math"?Wle:null)}var sf=class extends dU{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=tpe(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=npe(this.componentDef.outputs),this.cachedOutputs}constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=Lue(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!e}create(n,e,i,r){Sn(22);let o=Bt(null);try{let s=this.componentDef,a=i?["ng-version","19.2.12"]:Pue(this.componentDef.selectors[0]),l=zM(0,null,null,1,0,null,null,null,null,[a],null),c=ipe(s,r||this.ngModule,n),u=rpe(c),d=u.rendererFactory.createRenderer(null,s),p=i?que(d,i,s.encapsulation,c):ope(s,d),h=GM(null,l,null,512|HG(s),null,null,u,d,c,null,SG(p,c,!0));h[Hi]=p,EM(h);let m=null;try{let g=hU(Hi,l,h,"#host",()=>[this.componentDef],!0,0);p&&(UG(d,p,g),gf(p,h)),SC(l,h,g),PM(l,g,h),mU(l,g),e!==void 0&&spe(g,this.ngContentSelectors,e),m=ba(g.index,h),h[Ai]=m[Ai],XM(l,h,null)}catch(g){throw m!==null&&CN(m),CN(h),g}finally{Sn(23),DM()}return new zN(this.componentType,h)}finally{Bt(o)}}},zN=class extends zde{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,e){super(),this._rootLView=e,this._tNode=vM(e[Nt],Hi),this.location=mf(this._tNode,e),this.instance=ba(this._tNode.index,e)[Ai],this.hostView=this.changeDetectorRef=new ux(e,void 0,!1),this.componentType=n}setInput(n,e){let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),e))return;let r=this._rootLView,o=qM(i,r[Nt],r,n,e);this.previousInputValues.set(n,e);let s=ba(i.index,r);JM(s,1)}get injector(){return new hp(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}};function spe(t,n,e){let i=t.projection=[];for(let r=0;r<n.length;r++){let o=e[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Wi=(()=>{class t{static __NG_ELEMENT_ID__=ape}return t})();function ape(){let t=yr();return gU(t,bt())}var lpe=Wi,fU=class extends lpe{_lContainer;_hostTNode;_hostLView;constructor(n,e,i){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=i}get element(){return mf(this._hostTNode,this._hostLView)}get injector(){return new hp(this._hostTNode,this._hostLView)}get parentInjector(){let n=NM(this._hostTNode,this._hostLView);if(Yz(n)){let e=Hw(n,this._hostLView),i=Uw(n),r=e[Nt].data[i+8];return new hp(r,e)}else return new hp(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){let e=z3(this._lContainer);return e!==null&&e[n]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(n,e,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=of(this._lContainer,n.ssrId),a=n.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,rf(this._hostTNode,s)),a}createComponent(n,e,i,r,o){let s=n&&!zle(n),a;if(s)a=e;else{let m=e||{};a=m.index,i=m.injector,r=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let l=s?n:new sf(fp(n)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let g=(s?c:this.parentInjector).get(yi,null);g&&(o=g)}let u=fp(l.componentType??{}),d=of(this._lContainer,u?.id??null),p=d?.firstChild??null,h=l.create(c,r,p,o);return this.insertImpl(h.hostView,a,rf(this._hostTNode,d)),h}insert(n,e){return this.insertImpl(n,e,!0)}insertImpl(n,e,i){let r=n._lView;if(Xle(r)){let a=this.indexOf(n);if(a!==-1)this.detach(a);else{let l=r[gr],c=new fU(l,l[lo],l[gr]);c.detach(c.indexOf(n))}}let o=this._adjustIndex(e),s=this._lContainer;return bx(s,r,o,i),n.attachToViewContainerRef(),fz(JA(s),o,n),n}move(n,e){return this.insert(n,e)}indexOf(n){let e=z3(this._lContainer);return e!==null?e.indexOf(n):-1}remove(n){let e=this._adjustIndex(n,-1),i=cx(this._lContainer,e);i&&(Pw(JA(this._lContainer),e),kC(i[Nt],i))}detach(n){let e=this._adjustIndex(n,-1),i=cx(this._lContainer,e);return i&&Pw(JA(this._lContainer),e)!=null?new ux(i):null}_adjustIndex(n,e=0){return n??this.length+e}};function z3(t){return t[Bw]}function JA(t){return t[Bw]||(t[Bw]=[])}function gU(t,n){let e,i=n[t.index];return xl(i)?e=i:(e=aU(i,n,null,t),n[t.index]=e,UM(n,e)),upe(e,n,t,i),new fU(e,t,n)}function cpe(t,n){let e=t[ei],i=e.createComment(""),r=va(n,t),o=e.parentNode(r);return Kw(e,o,i,e.nextSibling(r),!1),i}var upe=hpe,dpe=()=>!1;function ppe(t,n,e){return dpe(t,n,e)}function hpe(t,n,e,i){if(t[bp])return;let r;e.type&8?r=ya(i):r=cpe(n,e),t[bp]=r}var GN=class t{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},UN=class t{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){let e=n.queries;if(e!==null){let i=n.contentQueries!==null?n.contentQueries[0]:e.length,r=[];for(let o=0;o<i;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)tR(n,e).matches!==null&&this.queries[e].setDirty()}},Zw=class{flags;read;predicate;constructor(n,e,i=null){this.flags=e,this.read=i,typeof n=="string"?this.predicate=_pe(n):this.predicate=n}},HN=class t{queries;constructor(n=[]){this.queries=n}elementStart(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let i=0;i<this.length;i++){let r=e!==null?e.length:0,o=this.getByIndex(i).embeddedTView(n,r);o&&(o.indexInDeclarationView=i,e!==null?e.push(o):e=[o])}return e!==null?new t(e):null}template(n,e){for(let i=0;i<this.queries.length;i++)this.queries[i].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}},WN=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,e=-1){this.metadata=n,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new t(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,i=n.parent;for(;i!==null&&i.type&8&&i.index!==e;)i=i.parent;return e===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(n,e){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(n,e,mpe(e,o)),this.matchTNodeWithReadOption(n,e,Nw(e,n,o,!1,!1))}else i===Fr?e.type&4&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Nw(e,n,i,!1,!1))}matchTNodeWithReadOption(n,e,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===nt||r===Wi||r===Fr&&e.type&4)this.addMatch(e.index,-2);else{let o=Nw(e,n,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,i)}}addMatch(n,e){this.matches===null?this.matches=[n,e]:this.matches.push(n,e)}};function mpe(t,n){let e=t.localNames;if(e!==null){for(let i=0;i<e.length;i+=2)if(e[i]===n)return e[i+1]}return null}function fpe(t,n){return t.type&11?mf(t,n):t.type&4?DC(t,n):null}function gpe(t,n,e,i){return e===-1?fpe(n,t):e===-2?ype(t,n,i):ax(t,t[Nt],e,n)}function ype(t,n,e){if(e===nt)return mf(n,t);if(e===Fr)return DC(n,t);if(e===Wi)return gU(n,t)}function yU(t,n,e,i){let r=n[ml].queries[i];if(r.matches===null){let o=t.data,s=e.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(gpe(n,u,s[l+1],e.metadata.read))}}r.matches=a}return r.matches}function jN(t,n,e,i){let r=t.queries.getByIndex(e),o=r.matches;if(o!==null){let s=yU(t,n,r,e);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],u=n[-l];for(let d=fr;d<u.length;d++){let p=u[d];p[gp]===p[gr]&&jN(p[Nt],p,c,i)}if(u[ef]!==null){let d=u[ef];for(let p=0;p<d.length;p++){let h=d[p];jN(h[Nt],h,c,i)}}}}}return i}function bpe(t,n){return t[ml].queries[n].queryList}function bU(t,n,e){let i=new nf((e&4)===4);return Qle(t,n,i,i.destroy),(n[ml]??=new UN).queries.push(new GN(i))-1}function xpe(t,n,e){let i=ti();return i.firstCreatePass&&(xU(i,new Zw(t,n,e),-1),(n&2)===2&&(i.staticViewQueries=!0)),bU(i,bt(),n)}function vpe(t,n,e,i){let r=ti();if(r.firstCreatePass){let o=yr();xU(r,new Zw(n,e,i),o.index),wpe(r,t),(e&2)===2&&(r.staticContentQueries=!0)}return bU(r,bt(),e)}function _pe(t){return t.split(",").map(n=>n.trim())}function xU(t,n,e){t.queries===null&&(t.queries=new HN),t.queries.track(new WN(n,e))}function wpe(t,n){let e=t.contentQueries||(t.contentQueries=[]),i=e.length?e[e.length-1]:-1;n!==i&&e.push(t.queries.length-1,n)}function tR(t,n){return t.queries.getByIndex(n)}function Cpe(t,n){let e=t[Nt],i=tR(e,n);return i.crossesNgTemplate?jN(e,t,n,[]):yU(e,t,i,n)}var yl=class{},nR=class{};var qN=class extends yl{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Qw(this);constructor(n,e,i,r=!0){super(),this.ngModuleType=n,this._parent=e;let o=bz(n);this._bootstrapComponents=$G(o.bootstrap),this._r3Injector=sG(n,e,[{provide:yl,useValue:this},{provide:xf,useValue:this.componentFactoryResolver},...i],ao(n),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}},XN=class extends nR{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new qN(this.moduleType,n,[])}};var Jw=class extends yl{injector;componentFactoryResolver=new Qw(this);instance=null;constructor(n){super();let e=new ox([...n.providers,{provide:yl,useValue:this},{provide:xf,useValue:this.componentFactoryResolver}],n.parent||pC(),n.debugName,new Set(["environment"]));this.injector=e,n.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}};function AC(t,n,e=null){return new Jw({providers:t,parent:n,debugName:e,runEnvironmentInitializers:!0}).injector}var Tpe=(()=>{class t{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let i=vz(!1,e.type),r=i.length>0?AC([i],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=pe({token:t,providedIn:"environment",factory:()=>new t(Xe(yi))})}return t})();function De(t){return hx(()=>{let n=_U(t),e=At(ie({},n),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===fG.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:n.standalone?r=>r.get(Tpe).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xa.Emulated,styles:t.styles||so,_:null,schemas:t.schemas||null,tView:null,id:""});n.standalone&&vl("NgStandalone"),wU(e);let i=t.dependencies;return e.directiveDefs=G3(i,!1),e.pipeDefs=G3(i,!0),e.id=Dpe(e),e})}function Spe(t){return fp(t)||xz(t)}function kpe(t){return t!==null}function $e(t){return hx(()=>({type:t.type,bootstrap:t.bootstrap||so,declarations:t.declarations||so,imports:t.imports||so,exports:t.exports||so,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ipe(t,n){if(t==null)return fa;let e={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=TC.None,l=null),e[o]=[i,a,l],n[o]=s}return e}function Epe(t){if(t==null)return fa;let n={};for(let e in t)t.hasOwnProperty(e)&&(n[t[e]]=e);return n}function ot(t){return hx(()=>{let n=_U(t);return wU(n),n})}function vU(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function _U(t){let n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputConfig:t.inputs||fa,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||so,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ipe(t.inputs,n),outputs:Epe(t.outputs),debugInfo:null}}function wU(t){t.features?.forEach(n=>n(t))}function G3(t,n){if(!t)return null;let e=n?Ale:Spe;return()=>(typeof t=="function"?t():t).map(i=>e(i)).filter(kpe)}function Dpe(t){let n=0,e=typeof t.consts=="function"?"":t.consts,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,e,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of i.join("|"))n=Math.imul(31,n)+o.charCodeAt(0)<<0;return n+=2147483648,"c"+n}function Ape(t){return Object.getPrototypeOf(t.prototype).constructor}function Mn(t){let n=Ape(t.type),e=!0,i=[t];for(;n;){let r;if(ga(t))r=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new ye(903,!1);r=n.\u0275dir}if(r){if(e){i.push(r);let s=t;s.inputs=eN(t.inputs),s.declaredInputs=eN(t.declaredInputs),s.outputs=eN(t.outputs);let a=r.hostBindings;a&&Fpe(t,a);let l=r.viewQuery,c=r.contentQueries;if(l&&Rpe(t,l),c&&Ope(t,c),Npe(t,r),lle(t.outputs,r.outputs),ga(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Mn&&(e=!1)}}n=Object.getPrototypeOf(n)}Mpe(i)}function Npe(t,n){for(let e in n.inputs){if(!n.inputs.hasOwnProperty(e)||t.inputs.hasOwnProperty(e))continue;let i=n.inputs[e];i!==void 0&&(t.inputs[e]=i,t.declaredInputs[e]=n.declaredInputs[e])}}function Mpe(t){let n=0,e=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=n+=r.hostVars,r.hostAttrs=tf(r.hostAttrs,e=tf(e,r.hostAttrs))}}function eN(t){return t===fa?{}:t===so?[]:t}function Rpe(t,n){let e=t.viewQuery;e?t.viewQuery=(i,r)=>{n(i,r),e(i,r)}:t.viewQuery=n}function Ope(t,n){let e=t.contentQueries;e?t.contentQueries=(i,r,o)=>{n(i,r,o),e(i,r,o)}:t.contentQueries=n}function Fpe(t,n){let e=t.hostBindings;e?t.hostBindings=(i,r)=>{n(i,r),e(i,r)}:t.hostBindings=n}function CU(t){let n=e=>{let i=Array.isArray(t);e.hostDirectives===null?(e.findHostDirectiveDefs=TU,e.hostDirectives=i?t.map(KN):[t]):i?e.hostDirectives.unshift(...t.map(KN)):e.hostDirectives.unshift(t)};return n.ngInherit=!0,n}function TU(t,n,e){if(t.hostDirectives!==null)for(let i of t.hostDirectives)if(typeof i=="function"){let r=i();for(let o of r)U3(KN(o),n,e)}else U3(i,n,e)}function U3(t,n,e){let i=xz(t.directive);Lpe(i.declaredInputs,t.inputs),TU(i,n,e),e.set(i,t),n.push(i)}function KN(t){return typeof t=="function"?{directive:ir(t),inputs:fa,outputs:fa}:{directive:ir(t.directive),inputs:H3(t.inputs),outputs:H3(t.outputs)}}function H3(t){if(t===void 0||t.length===0)return fa;let n={};for(let e=0;e<t.length;e+=2)n[t[e]]=t[e+1];return n}function Lpe(t,n){for(let e in n)if(n.hasOwnProperty(e)){let i=n[e],r=t[e];t[i]=r}}function SU(t){return $pe(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Ppe(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{let e=t[Symbol.iterator](),i;for(;!(i=e.next()).done;)n(i.value)}}function $pe(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function iR(t,n,e){return t[n]=e}function Vpe(t,n){return t[n]}function Jo(t,n,e){let i=t[n];return Object.is(i,e)?!1:(t[n]=e,!0)}function eC(t,n,e,i){let r=Jo(t,n,e);return Jo(t,n+1,i)||r}function Bpe(t,n,e,i,r,o){let s=eC(t,n,e,i);return eC(t,n+2,r,o)||s}function zpe(t,n,e,i,r,o,s,a,l){let c=n.consts,u=xx(n,t,4,s||null,a||null);TM()&&eR(n,e,u,bu(c,l),jM),u.mergedAttrs=tf(u.mergedAttrs,u.attrs),AM(n,u);let d=u.tView=zM(2,u,i,r,o,n.directiveRegistry,n.pipeRegistry,null,n.schemas,c,null);return n.queries!==null&&(n.queries.template(n,u),d.queries=n.queries.embeddedTView(u)),u}function tC(t,n,e,i,r,o,s,a,l,c){let u=e+Hi,d=n.firstCreatePass?zpe(u,n,t,i,r,o,s,a,l):n.data[u];Tp(d,!1);let p=Gpe(n,t,d,e);xC()&&IC(n,t,p,d),gf(p,t);let h=aU(p,t,p,d);return t[u]=h,UM(t,h),ppe(h,d,t),mC(d)&&SC(n,t,d),l!=null&&HM(t,d,c),d}function be(t,n,e,i,r,o,s,a){let l=bt(),c=ti(),u=bu(c.consts,o);return tC(l,c,t,n,e,i,r,u,s,a),be}var Gpe=Upe;function Upe(t,n,e,i){return vC(!0),n[ei].createComment("")}var rR=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var kU=new he("");var IU=(()=>{class t{static \u0275prov=pe({token:t,providedIn:"root",factory:()=>new YN})}return t})(),YN=class{queuedEffectCount=0;queues=new Map;schedule(n){this.enqueue(n)}remove(n){let e=n.zone,i=this.queues.get(e);i.has(n)&&(i.delete(n),this.queuedEffectCount--)}enqueue(n){let e=n.zone;this.queues.has(e)||this.queues.set(e,new Set);let i=this.queues.get(e);i.has(n)||(this.queuedEffectCount++,i.add(n))}flush(){for(;this.queuedEffectCount>0;)for(let[n,e]of this.queues)n===null?this.flushQueue(e):n.run(()=>this.flushQueue(e))}flushQueue(n){for(let e of n)n.delete(e),this.queuedEffectCount--,e.run()}};function Ep(t){return!!t&&typeof t.then=="function"}function EU(t){return!!t&&typeof t.subscribe=="function"}var Hpe=new he("");var DU=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,i)=>{this.resolve=e,this.reject=i});appInits=k(Hpe,{optional:!0})??[];injector=k(Vt);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=Oo(this.injector,r);if(Ep(o))e.push(o);else if(EU(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{i()}).catch(r=>{this.reject(r)}),e.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oR=new he("");function Wpe(){SA(()=>{throw new ye(600,!1)})}function jpe(t){return t.isBoundToModule}var qpe=10;var Lr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(Lce);afterRenderManager=k(CG);zonelessEnabled=k(_C);rootEffectScheduler=k(IU);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Re;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=k(vu).hasPendingTasks.pipe(rt(e=>!e));constructor(){k(yf,{optional:!0})}whenStable(){let e;return new Promise(i=>{e=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{e.unsubscribe()})}_injector=k(yi);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,i){return this.bootstrapImpl(e,i)}bootstrapImpl(e,i,r=Vt.NULL){Sn(10);let o=e instanceof dU;if(!this._injector.get(DU).done){let h="";throw new ye(405,h)}let a;o?a=e:a=this._injector.get(xf).resolveComponentFactory(e),this.componentTypes.push(a.componentType);let l=jpe(a)?void 0:this._injector.get(yl),c=i||a.selector,u=a.create(r,[],c,l),d=u.location.nativeElement,p=u.injector.get(kU,null);return p?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Mw(this.components,u),p?.unregisterApplication(d)}),this._loadComponent(u),Sn(11,u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Sn(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(FM.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new ye(101,!1);let e=Bt(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Bt(e),this.afterTick.next(),Sn(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ni,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<qpe;)Sn(14),this.synchronizeOnce(),Sn(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let e=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i,notifyErrorHandler:r}of this.allViews)Xpe(i,r,e,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>fC(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let i=e;this._views.push(i),i.attachToAppRef(this)}detachView(e){let i=e;Mw(this._views,i),i.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(oR,[]).forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Mw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new ye(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mw(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function Xpe(t,n,e,i){if(!e&&!fC(t))return;iU(t,n,e&&!i?0:1)}function Le(t,n,e,i){let r=bt(),o=Sp();if(Jo(r,o,n)){let s=ti(),a=bC();tde(a,r,t,n,e,i)}return Le}function AU(t,n,e,i){return Jo(t,Sp(),e)?n+ha(e)+i:Vr}function Kpe(t,n,e,i,r,o){let s=Bz(),a=eC(t,s,e,r);return yC(2),a?n+ha(e)+i+ha(r)+o:Vr}function Ype(t,n,e,i,r,o,s,a,l,c){let u=Bz(),d=Bpe(t,u,e,r,s,l);return yC(4),d?n+ha(e)+i+ha(r)+o+ha(s)+a+ha(l)+c:Vr}function Iw(t,n){return t<<17|n<<2}function Cp(t){return t>>17&32767}function Qpe(t){return(t&2)==2}function Zpe(t,n){return t&131071|n<<17}function QN(t){return t|2}function af(t){return(t&131068)>>2}function tN(t,n){return t&-131069|n<<2}function Jpe(t){return(t&1)===1}function ZN(t){return t|1}function ehe(t,n,e,i,r,o){let s=o?n.classBindings:n.styleBindings,a=Cp(s),l=af(s);t[i]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||mx(d,u)>0)&&(c=!0)}else u=e;if(r)if(l!==0){let p=Cp(t[a+1]);t[i+1]=Iw(p,a),p!==0&&(t[p+1]=tN(t[p+1],i)),t[a+1]=Zpe(t[a+1],i)}else t[i+1]=Iw(a,0),a!==0&&(t[a+1]=tN(t[a+1],i)),a=i;else t[i+1]=Iw(l,0),a===0?a=i:t[l+1]=tN(t[l+1],i),l=i;c&&(t[i+1]=QN(t[i+1])),W3(t,u,i,!0),W3(t,u,i,!1),the(n,u,t,i,o),s=Iw(a,l),o?n.classBindings=s:n.styleBindings=s}function the(t,n,e,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof n=="string"&&mx(o,n)>=0&&(e[i+1]=ZN(e[i+1]))}function W3(t,n,e,i){let r=t[e+1],o=n===null,s=i?Cp(r):af(r),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];nhe(l,n)&&(a=!0,t[s+1]=i?ZN(c):QN(c)),s=i?Cp(c):af(c)}a&&(t[e+1]=i?QN(r):ZN(r))}function nhe(t,n){return t===null||n==null||(Array.isArray(t)?t[1]:t)===n?!0:Array.isArray(t)&&typeof n=="string"?mx(t,n)>=0:!1}var Os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ihe(t){return t.substring(Os.key,Os.keyEnd)}function rhe(t){return ohe(t),NU(t,MU(t,0,Os.textEnd))}function NU(t,n){let e=Os.textEnd;return e===n?-1:(n=Os.keyEnd=she(t,Os.key=n,e),MU(t,n,e))}function ohe(t){Os.key=0,Os.keyEnd=0,Os.value=0,Os.valueEnd=0,Os.textEnd=t.length}function MU(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function she(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}function J(t,n,e){let i=bt(),r=Sp();if(Jo(i,r,n)){let o=ti(),s=bC();WM(o,s,i,t,n,i[ei],e,!1)}return J}function JN(t,n,e,i,r){qM(n,t,e,r?"class":"style",i)}function Ri(t,n,e){return OU(t,n,e,!1),Ri}function st(t,n){return OU(t,n,null,!0),st}function Br(t){FU(phe,RU,t,!0)}function RU(t,n){for(let e=rhe(n);e>=0;e=NU(n,e))uC(t,ihe(n),!0)}function OU(t,n,e,i){let r=bt(),o=ti(),s=yC(2);if(o.firstUpdatePass&&PU(o,t,s,i),n!==Vr&&Jo(r,s,n)){let a=o.data[_a()];$U(o,a,r,r[ei],t,r[s+1]=mhe(n,e),i,s)}}function FU(t,n,e,i){let r=ti(),o=yC(2);r.firstUpdatePass&&PU(r,null,o,i);let s=bt();if(e!==Vr&&Jo(s,o,e)){let a=r.data[_a()];if(VU(a,i)&&!LU(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(e=sN(l,e||"")),JN(r,a,s,e,i)}else hhe(r,a,s,s[ei],s[o+1],s[o+1]=dhe(t,n,e),i,o)}}function LU(t,n){return n>=t.expandoStartIndex}function PU(t,n,e,i){let r=t.data;if(r[e+1]===null){let o=r[_a()],s=LU(t,e);VU(o,i)&&n===null&&!s&&(n=!1),n=ahe(r,o,n,i),ehe(r,o,n,e,s,i)}}function ahe(t,n,e,i){let r=cce(t),o=i?n.residualClasses:n.residualStyles;if(r===null)(i?n.classBindings:n.styleBindings)===0&&(e=nN(null,t,n,e,i),e=dx(e,n.attrs,i),o=null);else{let s=n.directiveStylingLast;if(s===-1||t[s]!==r)if(e=nN(r,t,n,e,i),o===null){let l=lhe(t,n,i);l!==void 0&&Array.isArray(l)&&(l=nN(null,t,n,l[1],i),l=dx(l,n.attrs,i),che(t,n,i,l))}else o=uhe(t,n,i)}return o!==void 0&&(i?n.residualClasses=o:n.residualStyles=o),e}function lhe(t,n,e){let i=e?n.classBindings:n.styleBindings;if(af(i)!==0)return t[Cp(i)]}function che(t,n,e,i){let r=e?n.classBindings:n.styleBindings;t[Cp(r)]=i}function uhe(t,n,e){let i,r=n.directiveEnd;for(let o=1+n.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=dx(i,s,e)}return dx(i,n.attrs,e)}function nN(t,n,e,i,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=n[a],i=dx(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(e.directiveStylingLast=a),i}function dx(t,n,e){let i=e?1:2,r=-1;if(n!==null)for(let o=0;o<n.length;o++){let s=n[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),uC(t,s,e?!0:n[++o]))}return t===void 0?null:t}function dhe(t,n,e){if(e==null||e==="")return so;let i=[],r=_l(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&n(i,r);return i}function phe(t,n,e){let i=String(n);i!==""&&!i.includes(" ")&&uC(t,i,e)}function hhe(t,n,e,i,r,o,s,a){r===Vr&&(r=so);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let p=l<r.length?r[l+1]:void 0,h=c<o.length?o[c+1]:void 0,m=null,g;u===d?(l+=2,c+=2,p!==h&&(m=d,g=h)):d===null||u!==null&&u<d?(l+=2,m=u):(c+=2,m=d,g=h),m!==null&&$U(t,n,e,i,m,g,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}function $U(t,n,e,i,r,o,s,a){if(!(n.type&3))return;let l=t.data,c=l[a+1],u=Jpe(c)?j3(l,n,e,r,af(c),s):void 0;if(!nC(u)){nC(o)||Qpe(c)&&(o=j3(l,null,e,r,a,s));let d=Mz(_a(),e);xde(i,s,d,r,o)}}function j3(t,n,e,i,r,o){let s=n===null,a;for(;r>0;){let l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,p=e[r+1];p===Vr&&(p=d?so:void 0);let h=d?jA(p,i):u===i?p:void 0;if(c&&!nC(h)&&(h=jA(l,i)),nC(h)&&(a=h,s))return a;let m=t[r+1];r=s?Cp(m):af(m)}if(n!==null){let l=o?n.residualClasses:n.residualStyles;l!=null&&(a=jA(l,i))}return a}function nC(t){return t!==void 0}function mhe(t,n){return t==null||t===""||(typeof n=="string"?t=t+n:typeof t=="object"&&(t=ao(_l(t)))),t}function VU(t,n){return(t.flags&(n?8:16))!==0}function NC(t,n,e){let i=bt(),r=AU(i,t,n,e);FU(uC,RU,r,!0)}var eM=class{destroy(n){}updateValue(n,e){}swap(n,e){let i=Math.min(n,e),r=Math.max(n,e),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(n,e){this.attach(e,this.detach(n))}};function iN(t,n,e,i,r){return t===e&&Object.is(n,i)?1:Object.is(r(t,n),r(e,i))?-1:0}function fhe(t,n,e){let i,r,o=0,s=t.length-1,a=void 0;if(Array.isArray(n)){let l=n.length-1;for(;o<=s&&o<=l;){let c=t.at(o),u=n[o],d=iN(o,c,o,u,e);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let p=t.at(s),h=n[l],m=iN(s,p,l,h,e);if(m!==0){m<0&&t.updateValue(s,h),s--,l--;continue}let g=e(o,c),f=e(s,p),y=e(o,u);if(Object.is(y,f)){let b=e(l,h);Object.is(b,g)?(t.swap(o,s),t.updateValue(s,h),l--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(i??=new iC,r??=X3(t,o,s,e),tM(t,i,o,y))t.updateValue(o,u),o++,s++;else if(r.has(y))i.set(g,t.detach(o)),s--;else{let b=t.create(o,n[o]);t.attach(o,b),o++,s++}}for(;o<=l;)q3(t,i,e,o,n[o]),o++}else if(n!=null){let l=n[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=t.at(o),d=c.value,p=iN(o,u,o,d,e);if(p!==0)p<0&&t.updateValue(o,d),o++,c=l.next();else{i??=new iC,r??=X3(t,o,s,e);let h=e(o,d);if(tM(t,i,o,h))t.updateValue(o,d),o++,s++,c=l.next();else if(!r.has(h))t.attach(o,t.create(o,d)),o++,s++,c=l.next();else{let m=e(o,u);i.set(m,t.detach(o)),s--}}}for(;!c.done;)q3(t,i,e,t.length,c.value),c=l.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(l=>{t.destroy(l)})}function tM(t,n,e,i){return n!==void 0&&n.has(i)?(t.attach(e,n.get(i)),n.delete(i),!0):!1}function q3(t,n,e,i,r){if(tM(t,n,i,e(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function X3(t,n,e,i){let r=new Set;for(let o=n;o<=e;o++)r.add(i(o,t.at(o)));return r}var iC=class{kvMap=new Map;_vMap=void 0;has(n){return this.kvMap.has(n)}delete(n){if(!this.has(n))return!1;let e=this.kvMap.get(n);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(n,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(n),!0}get(n){return this.kvMap.get(n)}set(n,e){if(this.kvMap.has(n)){let i=this.kvMap.get(n);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,e)}else this.kvMap.set(n,e)}forEach(n){for(let[e,i]of this.kvMap)if(n(i,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),n(i,e)}}};function Oi(t,n){vl("NgControlFlow");let e=bt(),i=Sp(),r=e[i]!==Vr?e[i]:-1,o=r!==-1?rC(e,Hi+r):void 0,s=0;if(Jo(e,i,t)){let a=Bt(null);try{if(o!==void 0&&cU(o,s),t!==-1){let l=Hi+t,c=rC(e,l),u=oM(e[Nt],l),d=of(c,u.tView.ssrId),p=yx(e,u,n,{dehydratedView:d});bx(c,p,s,rf(u,d))}}finally{Bt(a)}}else if(o!==void 0){let a=lU(o,s);a!==void 0&&(a[Ai]=n)}}var nM=class{lContainer;$implicit;$index;constructor(n,e,i){this.lContainer=n,this.$implicit=e,this.$index=i}get $count(){return this.lContainer.length-fr}};function BU(t){return t}var iM=class{hasEmptyBlock;trackByFn;liveCollection;constructor(n,e,i){this.hasEmptyBlock=n,this.trackByFn=e,this.liveCollection=i}};function zU(t,n,e,i,r,o,s,a,l,c,u,d,p){vl("NgControlFlow");let h=bt(),m=ti(),g=l!==void 0,f=bt(),y=a?s.bind(f[Ro][Ai]):s,b=new iM(g,y);f[Hi+t]=b,tC(h,m,t+1,n,e,i,r,bu(m.consts,o)),g&&tC(h,m,t+2,l,c,u,d,bu(m.consts,p))}var rM=class extends eM{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(n,e,i){super(),this.lContainer=n,this.hostLView=e,this.templateTNode=i}get length(){return this.lContainer.length-fr}at(n){return this.getLView(n)[Ai].$implicit}attach(n,e){let i=e[Zm];this.needsIndexUpdate||=n!==this.length,bx(this.lContainer,e,n,rf(this.templateTNode,i))}detach(n){return this.needsIndexUpdate||=n!==this.length-1,ghe(this.lContainer,n)}create(n,e){let i=of(this.lContainer,this.templateTNode.tView.ssrId),r=yx(this.hostLView,this.templateTNode,new nM(this.lContainer,e,n),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(n){kC(n[Nt],n),this.operationsCounter?.recordDestroy()}updateValue(n,e){this.getLView(n)[Ai].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let n=0;n<this.length;n++)this.getLView(n)[Ai].$index=n}getLView(n){return yhe(this.lContainer,n)}};function GU(t){let n=Bt(null),e=_a();try{let i=bt(),r=i[Nt],o=i[e],s=e+1,a=rC(i,s);if(o.liveCollection===void 0){let c=oM(r,s);o.liveCollection=new rM(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(fhe(l,t,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=Sp(),u=l.length===0;if(Jo(i,c,u)){let d=e+2,p=rC(i,d);if(u){let h=oM(r,d),m=of(p,h.tView.ssrId),g=yx(i,h,void 0,{dehydratedView:m});bx(p,g,0,rf(h,m))}else cU(p,0)}}}finally{Bt(n)}}function rC(t,n){return t[n]}function ghe(t,n){return cx(t,n)}function yhe(t,n){return lU(t,n)}function oM(t,n){return vM(t,n)}function R(t,n,e,i){let r=bt(),o=ti(),s=Hi+t,a=r[ei],l=o.firstCreatePass?hU(s,o,r,n,jM,TM(),e,i):o.data[s],c=bhe(o,r,l,a,n,t);r[s]=c;let u=mC(l);return Tp(l,!0),UG(a,c,l),!YM(l)&&xC()&&IC(o,r,c,l),(Zle()===0||u)&&gf(c,r),Jle(),u&&(SC(o,r,l),PM(o,l,r)),i!==null&&HM(r,l),R}function M(){let t=yr();SM()?kM():(t=t.parent,Tp(t,!1));let n=t;tce(n)&&nce(),ece();let e=ti();return e.firstCreatePass&&mU(e,n),n.classesWithoutHost!=null&&fce(n)&&JN(e,n,bt(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&gce(n)&&JN(e,n,bt(),n.stylesWithoutHost,!1),M}function ke(t,n,e,i){return R(t,n,e,i),M(),ke}var bhe=(t,n,e,i,r,o)=>(vC(!0),zG(i,r,pce()));function xhe(t,n,e,i,r){let o=n.consts,s=bu(o,i),a=xx(n,t,8,"ng-container",s);s!==null&&BN(a,s,!0);let l=bu(o,r);return TM()&&eR(n,e,a,l,jM),a.mergedAttrs=tf(a.mergedAttrs,a.attrs),n.queries!==null&&n.queries.elementStart(n,a),a}function Ls(t,n,e){let i=bt(),r=ti(),o=t+Hi,s=r.firstCreatePass?xhe(o,r,i,n,e):r.data[o];Tp(s,!0);let a=vhe(r,i,s,t);return i[o]=a,xC()&&IC(r,i,a,s),gf(a,i),mC(s)&&(SC(r,i,s),PM(r,s,i)),e!=null&&HM(i,s),Ls}function Ps(){let t=yr(),n=ti();return SM()?kM():(t=t.parent,Tp(t,!1)),n.firstCreatePass&&(AM(n,t),xM(t)&&n.queries.elementEnd(t)),Ps}function MC(t,n,e){return Ls(t,n,e),Ps(),MC}var vhe=(t,n,e,i)=>(vC(!0),Bue(n[ei],""));function Xt(){return bt()}function Cl(t,n,e){let i=bt(),r=Sp();if(Jo(i,r,n)){let o=ti(),s=bC();WM(o,s,i,t,n,i[ei],e,!0)}return Cl}var oC="en-US";var _he=oC;function whe(t){typeof t=="string"&&(_he=t.toLowerCase().replace(/_/g,"-"))}function K3(t,n,e){return function i(r){if(r===Function)return e;let o=uf(t)?ba(t.index,n):n;JM(o,5);let s=n[Ai],a=Y3(n,s,e,r),l=i.__ngNextListenerFn__;for(;l;)a=Y3(n,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function Y3(t,n,e,i){let r=Bt(null);try{return Sn(6,n,e),e(i)!==!1}catch(o){return Che(t,o),!1}finally{Sn(7,n,e),Bt(r)}}function Che(t,n){let e=t[Jm],i=e?e.get(Or,null):null;i&&i.handleError(n)}function Q3(t,n,e,i,r,o){let s=n[e],a=n[Nt],c=a.data[e].outputs[i],u=s[c],d=a.firstCreatePass?CM(a):null,p=wM(n),h=u.subscribe(o),m=p.length;p.push(o,h),d&&d.push(r,t.index,m,-(m+1))}function Ce(t,n,e,i){let r=bt(),o=ti(),s=yr();return UU(o,r,r[ei],s,t,n,i),Ce}function The(t,n,e,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===i){let a=n[Vw],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function UU(t,n,e,i,r,o,s){let a=mC(i),c=t.firstCreatePass?CM(t):null,u=wM(n),d=!0;if(i.type&3||s){let p=va(i,n),h=s?s(p):p,m=u.length,g=s?y=>s(ya(y[i.index])):i.index,f=null;if(!s&&a&&(f=The(t,n,r,i.index)),f!==null){let y=f.__ngLastListenerFn__||f;y.__ngNextListenerFn__=o,f.__ngLastListenerFn__=o,d=!1}else{o=K3(i,n,o),eue(n,h,r,o);let y=e.listen(h,r,o);u.push(o,y),c&&c.push(r,g,m,m+1)}}else o=K3(i,n,o);if(d){let p=i.outputs?.[r],h=i.hostDirectiveOutputs?.[r];if(h&&h.length)for(let m=0;m<h.length;m+=2){let g=h[m],f=h[m+1];Q3(i,n,g,f,r,o)}if(p&&p.length)for(let m of p)Q3(i,n,m,r,r,o)}}function ee(t=1){return dce(t)}function She(t,n){let e=null,i=Nue(t);for(let r=0;r<n.length;r++){let o=n[r];if(o==="*"){e=r;continue}if(i===null?BG(t,o,!0):Oue(i,o))return r}return e}function Kn(t){let n=bt()[Ro][lo];if(!n.projection){let e=t?t.length:1,i=n.projection=Ile(e,null),r=i.slice(),o=n.child;for(;o!==null;){if(o.type!==128){let s=t?She(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o)}o=o.next}}}function yn(t,n=0,e,i,r,o){let s=bt(),a=ti(),l=i?t+1:null;l!==null&&tC(s,a,l,i,r,o,null,e);let c=xx(a,Hi+t,16,null,e||null);c.projection===null&&(c.projection=n),kM();let d=!s[Zm]||Pz();s[Ro][lo].projection[c.projection]===null&&l!==null?khe(s,a,l):d&&!YM(c)&&yde(a,s,c)}function khe(t,n,e){let i=Hi+e,r=n.data[i],o=t[i],s=of(o,r.tView.ssrId),a=yx(t,r,void 0,{dehydratedView:s});bx(o,a,0,rf(r,s))}function $s(t,n,e,i){vpe(t,n,e,i)}function sn(t,n,e){xpe(t,n,e)}function Gt(t){let n=bt(),e=ti(),i=zz();IM(i+1);let r=tR(e,i);if(t.dirty&&qle(n)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=Cpe(n,i);t.reset(o,Vce),t.notifyOnChanges()}return!0}return!1}function Ut(){return bpe(bt(),zz())}function ns(t){let n=rce();return Rz(n,Hi+t)}function Y(t,n=""){let e=bt(),i=ti(),r=t+Hi,o=i.firstCreatePass?xx(i,r,1,n,null):i.data[r],s=Ihe(i,e,o,n,t);e[r]=s,xC()&&IC(i,e,s,o),Tp(o,!1)}var Ihe=(t,n,e,i,r)=>(vC(!0),$ue(n[ei],i));function kt(t){return bn("",t,""),kt}function bn(t,n,e){let i=bt(),r=AU(i,t,n,e);return r!==Vr&&aR(i,_a(),r),bn}function Tl(t,n,e,i,r){let o=bt(),s=Kpe(o,t,n,e,i,r);return s!==Vr&&aR(o,_a(),s),Tl}function sR(t,n,e,i,r,o,s,a,l){let c=bt(),u=Ype(c,t,n,e,i,r,o,s,a,l);return u!==Vr&&aR(c,_a(),u),sR}function aR(t,n,e){let i=Mz(n,t);Vue(t[ei],i,e)}function zr(t,n,e){hG(n)&&(n=n());let i=bt(),r=Sp();if(Jo(i,r,n)){let o=ti(),s=bC();WM(o,s,i,t,n,i[ei],e,!1)}return zr}function co(t,n){let e=hG(t);return e&&t.set(n),e}function Gr(t,n){let e=bt(),i=ti(),r=yr();return UU(i,e,e[ei],r,t,n),Gr}function Ehe(t,n,e){let i=ti();if(i.firstCreatePass){let r=ga(t);sM(e,i.data,i.blueprint,r,!0),sM(n,i.data,i.blueprint,r,!1)}}function sM(t,n,e,i,r){if(t=ir(t),Array.isArray(t))for(let o=0;o<t.length;o++)sM(t[o],n,e,i,r);else{let o=ti(),s=bt(),a=yr(),l=Qm(t)?t:ir(t.provide),c=Cz(t),u=a.providerIndexes&1048575,d=a.directiveStart,p=a.providerIndexes>>20;if(Qm(t)||!t.multi){let h=new _p(c,r,Me),m=oN(l,n,r?u:u+p,d);m===-1?(bN(jw(a,s),o,l),rN(o,t,n.length),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(h),s.push(h)):(e[m]=h,s[m]=h)}else{let h=oN(l,n,u+p,d),m=oN(l,n,u,u+p),g=h>=0&&e[h],f=m>=0&&e[m];if(r&&!f||!r&&!g){bN(jw(a,s),o,l);let y=Nhe(r?Ahe:Dhe,e.length,r,i,c);!r&&f&&(e[m].providerFactory=y),rN(o,t,n.length,0),n.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(y),s.push(y)}else{let y=HU(e[r?m:h],c,!r&&i);rN(o,t,h>-1?h:m,y)}!r&&i&&f&&e[m].componentProviders++}}}function rN(t,n,e,i){let r=Qm(n),o=Fle(n);if(r||o){let l=(o?ir(n.useClass):n).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&n.multi){let u=c.indexOf(e);u===-1?c.push(e,[i,l]):c[u+1].push(i,l)}else c.push(e,l)}}}function HU(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function oN(t,n,e,i){for(let r=e;r<i;r++)if(n[r]===t)return r;return-1}function Dhe(t,n,e,i,r){return aM(this.multi,[])}function Ahe(t,n,e,i,r){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=ax(i,i[Nt],this.providerFactory.index,r);s=l.slice(0,a),aM(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],aM(o,s);return s}function aM(t,n){for(let e=0;e<t.length;e++){let i=t[e];n.push(i())}return n}function Nhe(t,n,e,i,r){let o=new _p(t,e,Me);return o.multi=[],o.index=n,o.componentProviders=0,HU(o,r,i&&!e),o}function bi(t,n=[]){return e=>{e.providersResolver=(i,r)=>Ehe(i,r?r(t):t,n)}}function _u(t,n,e){let i=gC()+t,r=bt();return r[i]===Vr?iR(r,i,e?n.call(e):n()):Vpe(r,i)}function lR(t,n,e,i){return jU(bt(),gC(),t,n,e,i)}function vx(t,n,e,i,r){return Mhe(bt(),gC(),t,n,e,i,r)}function WU(t,n){let e=t[n];return e===Vr?void 0:e}function jU(t,n,e,i,r,o){let s=n+e;return Jo(t,s,r)?iR(t,s+1,o?i.call(o,r):i(r)):WU(t,s+1)}function Mhe(t,n,e,i,r,o,s){let a=n+e;return eC(t,a,r,o)?iR(t,a+2,s?i.call(s,r,o):i(r,o)):WU(t,a+2)}function cR(t,n){let e=ti(),i,r=t+Hi;e.firstCreatePass?(i=Rhe(n,e.pipeRegistry),e.data[r]=i,i.onDestroy&&(e.destroyHooks??=[]).push(r,i.onDestroy)):i=e.data[r];let o=i.factory||(i.factory=mp(i.type,!0)),s,a=oo(Me);try{let l=Ww(!1),c=o();return Ww(l),jle(e,bt(),r,c),c}finally{oo(a)}}function Rhe(t,n){if(n)for(let e=n.length-1;e>=0;e--){let i=n[e];if(t===i.name)return i}}function uR(t,n,e){let i=t+Hi,r=bt(),o=Rz(r,i);return Ohe(r,i)?jU(r,gC(),n,o.transform,e,o):o.transform(e)}function Ohe(t,n){return t[Nt].data[n].pure}function Dp(t,n){return DC(t,n)}var px=class{full;major;minor;patch;constructor(n){this.full=n;let e=n.split(".");this.major=e[0],this.minor=e[1],this.patch=e.slice(2).join(".")}},dR=new px("19.2.12"),lM=class{ngModuleFactory;componentFactories;constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}},qU=(()=>{class t{compileModuleSync(e){return new XN(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let i=this.compileModuleSync(e),r=bz(e),o=$G(r.declarations).reduce((s,a)=>{let l=fp(a);return l&&s.push(new sf(l)),s},[]);return new lM(i,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Fhe=(()=>{class t{zone=k(qe);changeDetectionScheduler=k(wp);applicationRef=k(Lr);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Lhe=new he("",{factory:()=>!1});function XU({ngZoneFactory:t,ignoreChangesOutsideZone:n,scheduleInRootZone:e}){return t??=()=>new qe(At(ie({},YU()),{scheduleInRootZone:e})),[{provide:qe,useFactory:t},{provide:Ym,multi:!0,useFactory:()=>{let i=k(Fhe,{optional:!0});return()=>i.initialize()}},{provide:Ym,multi:!0,useFactory:()=>{let i=k(Phe);return()=>{i.initialize()}}},n===!0?{provide:lG,useValue:!0}:[],{provide:cG,useValue:e??aG}]}function KU(t){let n=t?.ignoreChangesOutsideZone,e=t?.scheduleInRootZone,i=XU({ngZoneFactory:()=>{let r=YU(t);return r.scheduleInRootZone=e,r.shouldCoalesceEventChangeDetection&&vl("NgZone_CoalesceEvent"),new qe(r)},ignoreChangesOutsideZone:n,scheduleInRootZone:e});return lf([{provide:Lhe,useValue:!0},{provide:_C,useValue:!1},i])}function YU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Phe=(()=>{class t{subscription=new en;initialized=!1;zone=k(qe);pendingTasks=k(vu);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{qe.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{qe.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $he=(()=>{class t{appRef=k(Lr);taskService=k(vu);ngZone=k(qe);zonelessEnabled=k(_C);tracing=k(yf,{optional:!0});disableScheduling=k(lG,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new en;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Xw):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(cG,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wN||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let i=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?T3:uG;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Xw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(e),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,T3(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vhe(){return typeof $localize<"u"&&$localize.locale||oC}var pR=new he("",{providedIn:"root",factory:()=>k(pR,Pt.Optional|Pt.SkipSelf)||Vhe()});var cM=new he(""),Bhe=new he("");function tx(t){return!t.moduleRef}function zhe(t){let n=tx(t)?t.r3Injector:t.moduleRef.injector,e=n.get(qe);return e.run(()=>{tx(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=n.get(Or,null),r;if(e.runOutsideAngular(()=>{r=e.onError.subscribe({next:o=>{i.handleError(o)}})}),tx(t)){let o=()=>n.destroy(),s=t.platformInjector.get(cM);s.add(o),n.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(cM);s.add(o),t.moduleRef.onDestroy(()=>{Mw(t.allPlatformModules,t.moduleRef),r.unsubscribe(),s.delete(o)})}return Uhe(i,e,()=>{let o=n.get(DU);return o.runInitializers(),o.donePromise.then(()=>{let s=n.get(pR,oC);if(whe(s||oC),!n.get(Bhe,!0))return tx(t)?n.get(Lr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(tx(t)){let l=n.get(Lr);return t.rootComponent!==void 0&&l.bootstrap(t.rootComponent),l}else return Ghe(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function Ghe(t,n){let e=t.injector.get(Lr);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>e.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(e);else throw new ye(-403,!1);n.push(t)}function Uhe(t,n,e){try{let i=e();return Ep(i)?i.catch(r=>{throw n.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw n.runOutsideAngular(()=>t.handleError(i)),i}}var Rw=null;function Hhe(t=[],n){return Vt.create({name:n,providers:[{provide:dC,useValue:"platform"},{provide:cM,useValue:new Set([()=>Rw=null])},...t]})}function Whe(t=[]){if(Rw)return Rw;let n=Hhe(t);return Rw=n,Wpe(),jhe(n),n}function jhe(t){let n=t.get(OM,null);Oo(t,()=>{n?.forEach(e=>e())})}var Tn=(()=>{class t{static __NG_ELEMENT_ID__=qhe}return t})();function qhe(t){return Xhe(yr(),bt(),(t&16)===16)}function Xhe(t,n,e){if(uf(t)&&!e){let i=ba(t.index,n);return new ux(i,i)}else if(t.type&175){let i=n[Ro];return new ux(i,n)}return null}var uM=class{constructor(){}supports(n){return SU(n)}create(n){return new dM(n)}},Khe=(t,n)=>n,dM=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||Khe}forEachItem(n){let e;for(e=this._itHead;e!==null;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,i=this._removalsHead,r=0,o=null;for(;e||i;){let s=!i||e&&e.currentIndex<Z3(i,r,o)?e:i,a=Z3(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){let h=p<o.length?o[p]:o[p]=0,m=h+p;u<=m&&m<c&&(o[p]=h+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&n(s,a,l)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)n(e)}diff(n){if(n==null&&(n=[]),!SU(n))throw new ye(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._itHead,i=!1,r,o,s;if(Array.isArray(n)){this.length=n.length;for(let a=0;a<this.length;a++)o=n[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),i=!0):(i&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,Ppe(n,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),i=!0):(i&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,i,r){let o;return n===null?o=this._itTail:(o=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,o,r)):(n=this._linkedRecords===null?null:this._linkedRecords.get(i,r),n!==null?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,o,r)):n=this._addAfter(new pM(e,i),o,r)),n}_verifyReinsertion(n,e,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?n=this._reinsertAfter(o,n._prev,r):n.currentIndex!=r&&(n.currentIndex=r,this._addToMoves(n,r)),n}_truncate(n){for(;n!==null;){let e=n._next;this._addToRemovals(this._unlink(n)),n=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);let r=n._prevRemoved,o=n._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(n,e,i),this._addToMoves(n,i),n}_moveAfter(n,e,i){return this._unlink(n),this._insertAfter(n,e,i),this._addToMoves(n,i),n}_addAfter(n,e,i){return this._insertAfter(n,e,i),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,e,i){let r=e===null?this._itHead:e._next;return n._next=r,n._prev=e,r===null?this._itTail=n:r._prev=n,e===null?this._itHead=n:e._next=n,this._linkedRecords===null&&(this._linkedRecords=new sC),this._linkedRecords.put(n),n.currentIndex=i,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);let e=n._prev,i=n._next;return e===null?this._itHead=i:e._next=i,i===null?this._itTail=e:i._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new sC),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}},pM=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,e){this.item=n,this.trackById=e}},hM=class{_head=null;_tail=null;add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let i;for(i=this._head;i!==null;i=i._nextDup)if((e===null||e<=i.currentIndex)&&Object.is(i.trackById,n))return i;return null}remove(n){let e=n._prevDup,i=n._nextDup;return e===null?this._head=i:e._nextDup=i,i===null?this._tail=e:i._prevDup=e,this._head===null}},sC=class{map=new Map;put(n){let e=n.trackById,i=this.map.get(e);i||(i=new hM,this.map.set(e,i)),i.add(n)}get(n,e){let i=n,r=this.map.get(i);return r?r.get(n,e):null}remove(n){let e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Z3(t,n,e){let i=t.previousIndex;if(i===null)return i;let r=0;return e&&i<e.length&&(r=e[i]),i+n+r}function J3(){return new RC([new uM])}var RC=(()=>{class t{factories;static \u0275prov=pe({token:t,providedIn:"root",factory:J3});constructor(e){this.factories=e}static create(e,i){if(i!=null){let r=i.factories.slice();e=e.concat(r)}return new t(e)}static extend(e){return{provide:t,useFactory:i=>t.create(e,i||J3()),deps:[[t,new mz,new cC]]}}find(e){let i=this.factories.find(r=>r.supports(e));if(i!=null)return i;throw new ye(901,!1)}}return t})();function QU(t){Sn(8);try{let{rootComponent:n,appProviders:e,platformProviders:i}=t,r=Whe(i),o=[XU({}),{provide:wp,useExisting:$he},...e||[]],s=new Jw({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return zhe({r3Injector:s.injector,platformInjector:r,rootComponent:n})}catch(n){return Promise.reject(n)}finally{Sn(9)}}function Ot(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function ji(t,n=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):n}function is(t){return EA(t)}function Ap(t,n){return TA(t,n?.equal)}var mM=class{[Yo];constructor(n){this[Yo]=n}destroy(){this[Yo].destroy()}};function hR(t,n){!n?.injector&&bM(hR);let e=n?.injector??k(Vt),i=n?.manualCleanup!==!0?e.get(hf):null,r,o=e.get(LM,null,{optional:!0}),s=e.get(wp);return o!==null&&!n?.forceRoot?(r=Zhe(o.view,s,t),i instanceof qw&&i._lView===o.view&&(i=null)):r=Jhe(t,e.get(IU),s),r.injector=e,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new mM(r)}var ZU=At(ie({},Nm),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:lx,run(){if(this.dirty=!1,this.hasRun&&!H_(this))return;this.hasRun=!0;let t=i=>(this.cleanupFns??=[]).push(i),n=Wb(this),e=Gw(!1);try{this.maybeCleanup(),this.fn(t)}finally{Gw(e),U_(this,n)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),Yhe=At(ie({},ZU),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){jb(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),Qhe=At(ie({},ZU),{consumerMarkedDirty(){this.view[_t]|=8192,pf(this.view),this.notifier.notify(13)},destroy(){jb(this),this.onDestroyFn(),this.maybeCleanup(),this.view[yp]?.delete(this)}});function Zhe(t,n,e){let i=Object.create(Qhe);return i.view=t,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=n,i.fn=e,t[yp]??=new Set,t[yp].add(i),i.consumerMarkedDirty(i),i}function Jhe(t,n,e){let i=Object.create(Yhe);return i.fn=t,i.scheduler=n,i.notifier=e,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(12),i}function OC(t,n){let e=fp(t),i=n.elementInjector||pC();return new sf(e).create(i,n.projectableNodes,n.hostElement,n.environmentInjector)}var at=new he("");var t4=null;function rs(){return t4}function mR(t){t4??=t}var _x=class{},fR=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>k(n4),providedIn:"platform"})}return t})();var n4=(()=>{class t extends fR{_location;_history;_doc=k(at);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return rs().getBaseHref(this._doc)}onPopState(e){let i=rs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){let i=rs().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,i,r){this._history.pushState(e,i,r)}replaceState(e,i,r){this._history.replaceState(e,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function i4(t,n){return t?n?t.endsWith("/")?n.startsWith("/")?t+n.slice(1):t+n:n.startsWith("/")?t+n:`${t}/${n}`:t:n}function JU(t){let n=t.search(/#|\?|$/);return t[n-1]==="/"?t.slice(0,n-1)+t.slice(n):t}function wu(t){return t&&t[0]!=="?"?`?${t}`:t}var FC=(()=>{class t{historyGo(e){throw new Error("")}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>k(o4),providedIn:"root"})}return t})(),r4=new he(""),o4=(()=>{class t extends FC{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,i){super(),this._platformLocation=e,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??k(at).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return i4(this._baseHref,e)}path(e=!1){let i=this._platformLocation.pathname+wu(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,o){let s=this.prepareExternalUrl(r+wu(o));this._platformLocation.pushState(e,i,s)}replaceState(e,i,r,o){let s=this.prepareExternalUrl(r+wu(o));this._platformLocation.replaceState(e,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(i){return new(i||t)(Xe(fR),Xe(r4,8))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cu=(()=>{class t{_subject=new Re;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let i=this._locationStrategy.getBaseHref();this._basePath=nme(JU(e4(i))),this._locationStrategy.onPopState(r=>{this._subject.next({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+wu(i))}normalize(e){return t.stripTrailingSlash(tme(this._basePath,e4(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._locationStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+wu(i)),r)}replaceState(e,i="",r=null){this._locationStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+wu(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i??void 0,complete:r??void 0})}static normalizeQueryParams=wu;static joinWithSlash=i4;static stripTrailingSlash=JU;static \u0275fac=function(i){return new(i||t)(Xe(FC))};static \u0275prov=pe({token:t,factory:()=>eme(),providedIn:"root"})}return t})();function eme(){return new Cu(Xe(FC))}function tme(t,n){if(!t||!n.startsWith(t))return n;let e=n.substring(t.length);return e===""||["/",";","?","#"].includes(e[0])?e:n}function e4(t){return t.replace(/\/index.html$/,"")}function nme(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}var gR=/\s+/,s4=[],Np=(()=>{class t{_ngEl;_renderer;initialClasses=s4;rawClass;stateMap=new Map;constructor(e,i){this._ngEl=e,this._renderer=i}set klass(e){this.initialClasses=e!=null?e.trim().split(gR):s4}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(gR):e}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let i of e)this._updateState(i,!0);else if(e!=null)for(let i of Object.keys(e))this._updateState(i,!!e[i]);this._applyStateDiff()}_updateState(e,i){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(e,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let i=e[0],r=e[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(e,i){e=e.trim(),e.length>0&&e.split(gR).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static \u0275fac=function(i){return new(i||t)(Me(nt),Me(di))};static \u0275dir=ot({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var LC=class{$implicit;ngForOf;index;count;constructor(n,e,i,r){this.$implicit=n,this.ngForOf=e,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ur=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let i=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new LC(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),a4(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);a4(o,r)})}static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(Me(Wi),Me(Fr),Me(RC))};static \u0275dir=ot({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function a4(t,n){t.context.$implicit=n.item}var Yn=(()=>{class t{_viewContainer;_context=new PC;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,i){this._viewContainer=e,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){l4(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){l4(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,i){return!0}static \u0275fac=function(i){return new(i||t)(Me(Wi),Me(Fr))};static \u0275dir=ot({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),PC=class{$implicit=null;ngIf=null};function l4(t,n){if(t&&!t.createEmbeddedView)throw new ye(2020,!1)}var yR=(()=>{class t{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(e,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static \u0275fac=function(i){return new(i||t)(Me(Wi))};static \u0275dir=ot({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[Zt]})}return t})();function ime(t,n){return new ye(2100,!1)}var rme=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,bR=(()=>{class t{transform(e){if(e==null)return null;if(typeof e!="string")throw ime(t,e);return e.replace(rme,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=vU({name:"titlecase",type:t,pure:!0})}return t})();var pi=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({})}return t})();function wx(t,n){n=encodeURIComponent(n);for(let e of t.split(";")){let i=e.indexOf("="),[r,o]=i==-1?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===n)return decodeURIComponent(o)}return null}var $C="browser",c4="server";function Vs(t){return t===$C}function Sl(t){return t===c4}var Mp=class{};var zC=new he(""),wR=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,r,o){return this._findPluginFor(i).addEventListener(e,i,r,o)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(o=>o.supports(e)),!i)throw new ye(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||t)(Xe(zC),Xe(qe))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),Cx=class{_doc;constructor(n){this._doc=n}manager},VC="ng-app-id";function u4(t){for(let n of t)n.remove()}function d4(t,n){let e=n.createElement("style");return e.textContent=t,e}function ome(t,n,e,i){let r=t.head?.querySelectorAll(`style[${VC}="${n}"],link[${VC}="${n}"]`);if(r)for(let o of r)o.removeAttribute(VC),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&e.set(o.textContent,{usage:0,elements:[o]})}function vR(t,n){let e=n.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),e}var CR=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,r,o={}){this.doc=e,this.appId=i,this.nonce=r,this.isServer=Sl(o),ome(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let r of e)this.addUsage(r,this.inline,d4);i?.forEach(r=>this.addUsage(r,this.external,vR))}removeStyles(e,i){for(let r of e)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(e,i,r){let o=i.get(e);o?o.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(e,this.doc)))})}removeUsage(e,i){let r=i.get(e);r&&(r.usage--,r.usage<=0&&(u4(r.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])u4(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(e,d4(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(e,vR(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(VC,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||t)(Xe(at),Xe(kp),Xe(fx,8),Xe(Pr))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),xR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},TR=/%COMP%/g;var h4="%COMP%",sme=`_nghost-${h4}`,ame=`_ngcontent-${h4}`,lme=!0,cme=new he("",{providedIn:"root",factory:()=>lme});function ume(t){return ame.replace(TR,t)}function dme(t){return sme.replace(TR,t)}function m4(t,n){return n.map(e=>e.replace(TR,t))}var kx=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,r,o,s,a,l,c=null,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.tracingService=u,this.platformIsServer=Sl(a),this.defaultRenderer=new Tx(e,s,l,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===xa.ShadowDom&&(i=At(ie({},i),{encapsulation:xa.Emulated}));let r=this.getOrCreateRenderer(e,i);return r instanceof BC?r.applyToHost(e):r instanceof Sx&&r.applyStyles(),r}getOrCreateRenderer(e,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,p=this.tracingService;switch(i.encapsulation){case xa.Emulated:o=new BC(l,c,i,this.appId,u,s,a,d,p);break;case xa.ShadowDom:return new _R(l,c,e,i,s,a,this.nonce,d,p);default:o=new Sx(l,c,i,u,s,a,d,p);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||t)(Xe(wR),Xe(CR),Xe(kp),Xe(cme),Xe(at),Xe(Pr),Xe(qe),Xe(fx),Xe(yf,8))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),Tx=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,e,i,r,o){this.eventManager=n,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(n,e){return e?this.doc.createElementNS(xR[e]||e,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,e){(p4(n)?n.content:n).appendChild(e)}insertBefore(n,e,i){n&&(p4(n)?n.content:n).insertBefore(e,i)}removeChild(n,e){e.remove()}selectRootElement(n,e){let i=typeof n=="string"?this.doc.querySelector(n):n;if(!i)throw new ye(-5104,!1);return e||(i.textContent=""),i}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,i,r){if(r){e=r+":"+e;let o=xR[r];o?n.setAttributeNS(o,e,i):n.setAttribute(e,i)}else n.setAttribute(e,i)}removeAttribute(n,e,i){if(i){let r=xR[i];r?n.removeAttributeNS(r,e):n.removeAttribute(`${i}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,i,r){r&(gl.DashCase|gl.Important)?n.style.setProperty(e,i,r&gl.Important?"important":""):n.style[e]=i}removeStyle(n,e,i){i&gl.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,i){n!=null&&(n[e]=i)}setValue(n,e){n.nodeValue=e}listen(n,e,i,r){if(typeof n=="string"&&(n=rs().getGlobalEventTarget(this.doc,n),!n))throw new ye(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(n,e,o)),this.eventManager.addEventListener(n,e,o,r)}decoratePreventDefault(n){return e=>{if(e==="__ngUnwrap__")return n;(this.platformIsServer?this.ngZone.runGuarded(()=>n(e)):n(e))===!1&&e.preventDefault()}}};function p4(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var _R=class extends Tx{sharedStylesHost;hostEl;shadowRoot;constructor(n,e,i,r,o,s,a,l,c){super(n,o,s,l,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=m4(r.id,u);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}let d=r.getExternalStyles?.();if(d)for(let p of d){let h=vR(p,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,i){return super.insertBefore(this.nodeOrShadowRoot(n),e,i)}removeChild(n,e){return super.removeChild(null,e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sx=class extends Tx{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(n,e,i,r,o,s,a,l,c){super(n,o,s,a,l),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r;let u=i.styles;this.styles=c?m4(c,u):u,this.styleUrls=i.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},BC=class extends Sx{contentAttr;hostAttr;constructor(n,e,i,r,o,s,a,l,c){let u=r+"-"+i.id;super(n,e,i,o,s,a,l,c,u),this.contentAttr=ume(u),this.hostAttr=dme(u)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,e){let i=super.createElement(n,e);return super.setAttribute(i,this.contentAttr,""),i}};var GC=class t extends _x{supportsDOMEvents=!0;static makeCurrent(){mR(new t)}onAndCancel(n,e,i,r){return n.addEventListener(e,i,r),()=>{n.removeEventListener(e,i,r)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.remove()}createElement(n,e){return e=e||this.getDefaultDocument(),e.createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return e==="window"?window:e==="document"?n:e==="body"?n.body:null}getBaseHref(n){let e=pme();return e==null?null:hme(e)}resetBaseElement(){Ix=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return wx(document.cookie,n)}},Ix=null;function pme(){return Ix=Ix||document.head.querySelector("base"),Ix?Ix.getAttribute("href"):null}function hme(t){return new URL(t,document.baseURI).pathname}var mme=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),g4=(()=>{class t extends Cx{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r,o){return e.addEventListener(i,r,o),()=>this.removeEventListener(e,i,r,o)}removeEventListener(e,i,r,o){return e.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||t)(Xe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),f4=["alt","control","meta","shift"],fme={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gme={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},y4=(()=>{class t extends Cx{constructor(e){super(e)}supports(e){return t.parseEventName(e)!=null}addEventListener(e,i,r,o){let s=t.parseEventName(i),a=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>rs().onAndCancel(e,s.domEventName,a,o))}static parseEventName(e){let i=e.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),f4.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,i){let r=fme[e.key]||e.key,o="";return i.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),f4.forEach(s=>{if(s!==r){let a=gme[s];a(e)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(e,i,r){return o=>{t.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>i(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||t)(Xe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();function SR(t,n){return QU(ie({rootComponent:t},yme(n)))}function yme(t){return{appProviders:[...wme,...t?.providers??[]],platformProviders:_me}}function bme(){GC.makeCurrent()}function xme(){return new Or}function vme(){return vG(document),document}var _me=[{provide:Pr,useValue:$C},{provide:OM,useValue:bme,multi:!0},{provide:at,useFactory:vme}];var wme=[{provide:dC,useValue:"root"},{provide:Or,useFactory:xme},{provide:zC,useClass:g4,multi:!0,deps:[at]},{provide:zC,useClass:y4,multi:!0,deps:[at]},kx,CR,wR,{provide:Ni,useExisting:kx},{provide:Mp,useClass:mme},[]];var wf=class{},Ex=class{},Tu=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(n){n?typeof n=="string"?this.lazyInit=()=>{this.headers=new Map,n.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=e.slice(i+1).trim();this.addHeaderEntry(r,o)}})}:typeof Headers<"u"&&n instanceof Headers?(this.headers=new Map,n.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(n).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();let e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){let e=new t;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){let e=n.name.toLowerCase();switch(n.op){case"a":case"s":let i=n.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(n.name,e);let r=(n.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=n.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}addHeaderEntry(n,e){let i=n.toLowerCase();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(n,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=n.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(n,r)}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}};var HC=class{encodeKey(n){return b4(n)}encodeValue(n){return b4(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}};function Cme(t,n){let e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[n.decodeKey(r),""]:[n.decodeKey(r.slice(0,o)),n.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}var Tme=/%(\d[a-f0-9])/gi,Sme={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function b4(t){return encodeURIComponent(t).replace(Tme,(n,e)=>Sme[e]??n)}function UC(t){return`${t}`}var kl=class t{map;encoder;updates=null;cloneFrom=null;constructor(n={}){if(this.encoder=n.encoder||new HC,n.fromString){if(n.fromObject)throw new ye(2805,!1);this.map=Cme(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{let i=n.fromObject[e],r=Array.isArray(i)?i.map(UC):[UC(i)];this.map.set(e,r)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();let e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){let e=[];return Object.keys(n).forEach(i=>{let r=n[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{let e=this.encoder.encodeKey(n);return this.map.get(n).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(n=>n!=="").join("&")}clone(n){let e=new t({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":let e=(n.op==="a"?this.map.get(n.param):void 0)||[];e.push(UC(n.value)),this.map.set(n.param,e);break;case"d":if(n.value!==void 0){let i=this.map.get(n.param)||[],r=i.indexOf(UC(n.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(n.param,i):this.map.delete(n.param)}else{this.map.delete(n.param);break}}}),this.cloneFrom=this.updates=null)}};var WC=class{map=new Map;set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}};function kme(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function x4(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function v4(t){return typeof Blob<"u"&&t instanceof Blob}function _4(t){return typeof FormData<"u"&&t instanceof FormData}function Ime(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var w4="Content-Type",C4="Accept",T4="X-Request-URL",S4="text/plain",k4="application/json",Eme=`${k4}, ${S4}, */*`,_f=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(n,e,i,r){this.url=e,this.method=n.toUpperCase();let o;if(kme(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Tu,this.context??=new WC,!this.params)this.params=new kl,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||x4(this.body)||v4(this.body)||_4(this.body)||Ime(this.body)?this.body:this.body instanceof kl?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||_4(this.body)?null:v4(this.body)?this.body.type||null:x4(this.body)?null:typeof this.body=="string"?S4:this.body instanceof kl?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?k4:null}clone(n={}){let e=n.method||this.method,i=n.url||this.url,r=n.responseType||this.responseType,o=n.transferCache??this.transferCache,s=n.body!==void 0?n.body:this.body,a=n.withCredentials??this.withCredentials,l=n.reportProgress??this.reportProgress,c=n.headers||this.headers,u=n.params||this.params,d=n.context??this.context;return n.setHeaders!==void 0&&(c=Object.keys(n.setHeaders).reduce((p,h)=>p.set(h,n.setHeaders[h]),c)),n.setParams&&(u=Object.keys(n.setParams).reduce((p,h)=>p.set(h,n.setParams[h]),u)),new t(e,i,s,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Rp=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Rp||{}),Cf=class{headers;status;statusText;url;ok;type;constructor(n,e=200,i="OK"){this.headers=n.headers||new Tu,this.status=n.status!==void 0?n.status:e,this.statusText=n.statusText||i,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}},jC=class t extends Cf{constructor(n={}){super(n)}type=Rp.ResponseHeader;clone(n={}){return new t({headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Dx=class t extends Cf{body;constructor(n={}){super(n),this.body=n.body!==void 0?n.body:null}type=Rp.Response;clone(n={}){return new t({body:n.body!==void 0?n.body:this.body,headers:n.headers||this.headers,status:n.status!==void 0?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}},Ax=class extends Cf{name="HttpErrorResponse";message;error;ok=!1;constructor(n){super(n,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${n.url||"(unknown url)"}`:this.message=`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}},Dme=200,Ame=204;function kR(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Tf=(()=>{class t{handler;constructor(e){this.handler=e}request(e,i,r={}){let o;if(e instanceof _f)o=e;else{let l;r.headers instanceof Tu?l=r.headers:l=new Tu(r.headers);let c;r.params&&(r.params instanceof kl?c=r.params:c=new kl({fromObject:r.params})),o=new _f(e,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=Qe(o).pipe(mu(l=>this.handler.handle(l)));if(e instanceof _f||r.observe==="events")return s;let a=s.pipe(Cn(l=>l instanceof Dx));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(rt(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new ye(2806,!1);return l.body}));case"blob":return a.pipe(rt(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new ye(2807,!1);return l.body}));case"text":return a.pipe(rt(l=>{if(l.body!==null&&typeof l.body!="string")throw new ye(2808,!1);return l.body}));case"json":default:return a.pipe(rt(l=>l.body))}case"response":return a;default:throw new ye(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new kl().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,kR(r,i))}post(e,i,r={}){return this.request("POST",e,kR(r,i))}put(e,i,r={}){return this.request("PUT",e,kR(r,i))}static \u0275fac=function(i){return new(i||t)(Xe(wf))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();var Nme=new he("");function Mme(t,n){return n(t)}function Rme(t,n,e){return(i,r)=>Oo(e,()=>n(i,o=>t(o,r)))}var I4=new he(""),E4=new he(""),D4=new he("",{providedIn:"root",factory:()=>!0});var qC=(()=>{class t extends wf{backend;injector;chain=null;pendingTasks=k(vu);contributeToStability=k(D4);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(I4),...this.injector.get(E4,[])]));this.chain=i.reduceRight((r,o)=>Rme(r,o,this.injector),Mme)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(dl(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||t)(Xe(Ex),Xe(yi))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();var Ome=/^\)\]\}',?\n/,Fme=RegExp(`^${T4}:`,"m");function Lme(t){return"responseURL"in t&&t.responseURL?t.responseURL:Fme.test(t.getAllResponseHeaders())?t.getResponseHeader(T4):null}var IR=(()=>{class t{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new ye(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Vn(i.\u0275loadImpl()):Qe(null)).pipe(nr(()=>new Lt(o=>{let s=i.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((g,f)=>s.setRequestHeader(g,f.join(","))),e.headers.has(C4)||s.setRequestHeader(C4,Eme),!e.headers.has(w4)){let g=e.detectContentTypeHeader();g!==null&&s.setRequestHeader(w4,g)}if(e.responseType){let g=e.responseType.toLowerCase();s.responseType=g!=="json"?g:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let g=s.statusText||"OK",f=new Tu(s.getAllResponseHeaders()),y=Lme(s)||e.url;return l=new jC({headers:f,status:s.status,statusText:g,url:y}),l},u=()=>{let{headers:g,status:f,statusText:y,url:b}=c(),v=null;f!==Ame&&(v=typeof s.response>"u"?s.responseText:s.response),f===0&&(f=v?Dme:0);let _=f>=200&&f<300;if(e.responseType==="json"&&typeof v=="string"){let w=v;v=v.replace(Ome,"");try{v=v!==""?JSON.parse(v):null}catch(T){v=w,_&&(_=!1,v={error:T,text:v})}}_?(o.next(new Dx({body:v,headers:g,status:f,statusText:y,url:b||void 0})),o.complete()):o.error(new Ax({error:v,headers:g,status:f,statusText:y,url:b||void 0}))},d=g=>{let{url:f}=c(),y=new Ax({error:g,status:s.status||0,statusText:s.statusText||"Unknown Error",url:f||void 0});o.error(y)},p=!1,h=g=>{p||(o.next(c()),p=!0);let f={type:Rp.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(f.total=g.total),e.responseType==="text"&&s.responseText&&(f.partialText=s.responseText),o.next(f)},m=g=>{let f={type:Rp.UploadProgress,loaded:g.loaded};g.lengthComputable&&(f.total=g.total),o.next(f)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",d),s.addEventListener("abort",d),e.reportProgress&&(s.addEventListener("progress",h),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Rp.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",d),e.reportProgress&&(s.removeEventListener("progress",h),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(i){return new(i||t)(Xe(Mp))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),A4=new he(""),Pme="XSRF-TOKEN",$me=new he("",{providedIn:"root",factory:()=>Pme}),Vme="X-XSRF-TOKEN",Bme=new he("",{providedIn:"root",factory:()=>Vme}),Nx=class{},zme=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i){this.doc=e,this.cookieName=i}getToken(){let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=wx(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||t)(Xe(at),Xe($me))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();function Gme(t,n){let e=t.url.toLowerCase();if(!k(A4)||t.method==="GET"||t.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return n(t);let i=k(Nx).getToken(),r=k(Bme);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),n(t)}function ER(...t){let n=[Tf,IR,qC,{provide:wf,useExisting:qC},{provide:Ex,useFactory:()=>k(Nme,{optional:!0})??k(IR)},{provide:I4,useValue:Gme,multi:!0},{provide:A4,useValue:!0},{provide:Nx,useClass:zme}];for(let e of t)n.push(...e.\u0275providers);return lf(n)}var M4=(()=>{class t{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(i){return new(i||t)(Xe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var DR=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:function(i){let r=null;return i?r=new(i||t):r=Xe(Ume),r},providedIn:"root"})}return t})(),Ume=(()=>{class t extends DR{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case $r.NONE:return i;case $r.HTML:return Ip(i,"HTML")?_l(i):VM(this._doc,String(i)).toString();case $r.STYLE:return Ip(i,"Style")?_l(i):i;case $r.SCRIPT:if(Ip(i,"Script"))return _l(i);throw new ye(5200,!1);case $r.URL:return Ip(i,"URL")?_l(i):$M(String(i));case $r.RESOURCE_URL:if(Ip(i,"ResourceURL"))return _l(i);throw new ye(5201,!1);default:throw new ye(5202,!1)}}bypassSecurityTrustHtml(e){return IG(e)}bypassSecurityTrustStyle(e){return EG(e)}bypassSecurityTrustScript(e){return DG(e)}bypassSecurityTrustUrl(e){return AG(e)}bypassSecurityTrustResourceUrl(e){return NG(e)}static \u0275fac=function(i){return new(i||t)(Xe(at))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ft="primary",Wx=Symbol("RouteTitle"),OR=class{params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){let e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Lp(t){return new OR(t)}function z4(t,n,e){let i=e.path.split("/");if(i.length>t.length||e.pathMatch==="full"&&(n.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Hme(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!Ca(t[e],n[e]))return!1;return!0}function Ca(t,n){let e=t?FR(t):void 0,i=n?FR(n):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!G4(t[r],n[r]))return!1;return!0}function FR(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function G4(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;let e=[...t].sort(),i=[...n].sort();return e.every((r,o)=>i[o]===r)}else return t===n}function U4(t){return t.length>0?t[t.length-1]:null}function Iu(t){return gw(t)?t:Ep(t)?Vn(Promise.resolve(t)):Qe(t)}var Wme={exact:W4,subset:j4},H4={exact:jme,subset:qme,ignored:()=>!0};function O4(t,n,e){return Wme[e.paths](t.root,n.root,e.matrixParams)&&H4[e.queryParams](t.queryParams,n.queryParams)&&!(e.fragment==="exact"&&t.fragment!==n.fragment)}function jme(t,n){return Ca(t,n)}function W4(t,n,e){if(!Op(t.segments,n.segments)||!YC(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(let i in n.children)if(!t.children[i]||!W4(t.children[i],n.children[i],e))return!1;return!0}function qme(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>G4(t[e],n[e]))}function j4(t,n,e){return q4(t,n,n.segments,e)}function q4(t,n,e,i){if(t.segments.length>e.length){let r=t.segments.slice(0,e.length);return!(!Op(r,e)||n.hasChildren()||!YC(r,e,i))}else if(t.segments.length===e.length){if(!Op(t.segments,e)||!YC(t.segments,e,i))return!1;for(let r in n.children)if(!t.children[r]||!j4(t.children[r],n.children[r],i))return!1;return!0}else{let r=e.slice(0,t.segments.length),o=e.slice(t.segments.length);return!Op(t.segments,r)||!YC(t.segments,r,i)||!t.children[Ft]?!1:q4(t.children[Ft],n,o,i)}}function YC(t,n,e){return n.every((i,r)=>H4[e](t[r].parameters,i.parameters))}var Sa=class{root;queryParams;fragment;_queryParamMap;constructor(n=new hn([],{}),e={},i=null){this.root=n,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Lp(this.queryParams),this._queryParamMap}toString(){return Yme.serialize(this)}},hn=class{segments;children;parent=null;constructor(n,e){this.segments=n,this.children=e,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return QC(this)}},Su=class{path;parameters;_parameterMap;constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap??=Lp(this.parameters),this._parameterMap}toString(){return K4(this)}};function Xme(t,n){return Op(t,n)&&t.every((e,i)=>Ca(e.parameters,n[i].parameters))}function Op(t,n){return t.length!==n.length?!1:t.every((e,i)=>e.path===n[i].path)}function Kme(t,n){let e=[];return Object.entries(t.children).forEach(([i,r])=>{i===Ft&&(e=e.concat(n(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Ft&&(e=e.concat(n(r,i)))}),e}var jx=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>new Pp,providedIn:"root"})}return t})(),Pp=class{parse(n){let e=new PR(n);return new Sa(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){let e=`/${Mx(n.root,!0)}`,i=Jme(n.queryParams),r=typeof n.fragment=="string"?`#${Qme(n.fragment)}`:"";return`${e}${i}${r}`}},Yme=new Pp;function QC(t){return t.segments.map(n=>K4(n)).join("/")}function Mx(t,n){if(!t.hasChildren())return QC(t);if(n){let e=t.children[Ft]?Mx(t.children[Ft],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Ft&&i.push(`${r}:${Mx(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=Kme(t,(i,r)=>r===Ft?[Mx(t.children[Ft],!1)]:[`${r}:${Mx(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ft]!=null?`${QC(t)}/${e[0]}`:`${QC(t)}/(${e.join("//")})`}}function X4(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function XC(t){return X4(t).replace(/%3B/gi,";")}function Qme(t){return encodeURI(t)}function LR(t){return X4(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ZC(t){return decodeURIComponent(t)}function F4(t){return ZC(t.replace(/\+/g,"%20"))}function K4(t){return`${LR(t.path)}${Zme(t.parameters)}`}function Zme(t){return Object.entries(t).map(([n,e])=>`;${LR(n)}=${LR(e)}`).join("")}function Jme(t){let n=Object.entries(t).map(([e,i])=>Array.isArray(i)?i.map(r=>`${XC(e)}=${XC(r)}`).join("&"):`${XC(e)}=${XC(i)}`).filter(e=>e);return n.length?`?${n.join("&")}`:""}var efe=/^[^\/()?;#]+/;function AR(t){let n=t.match(efe);return n?n[0]:""}var tfe=/^[^\/()?;=#]+/;function nfe(t){let n=t.match(tfe);return n?n[0]:""}var ife=/^[^=?&#]+/;function rfe(t){let n=t.match(ife);return n?n[0]:""}var ofe=/^[^&#]+/;function sfe(t){let n=t.match(ofe);return n?n[0]:""}var PR=class{url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new hn([],{}):new hn([],this.parseChildren())}parseQueryParams(){let n={};if(this.consumeOptional("?"))do this.parseQueryParam(n);while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(i[Ft]=new hn(n,e)),i}parseSegment(){let n=AR(this.remaining);if(n===""&&this.peekStartsWith(";"))throw new ye(4009,!1);return this.capture(n),new Su(ZC(n),this.parseMatrixParams())}parseMatrixParams(){let n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){let e=nfe(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=AR(this.remaining);r&&(i=r,this.capture(i))}n[ZC(e)]=ZC(i)}parseQueryParam(n){let e=rfe(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=sfe(this.remaining);s&&(i=s,this.capture(i))}let r=F4(e),o=F4(i);if(n.hasOwnProperty(r)){let s=n[r];Array.isArray(s)||(s=[s],n[r]=s),s.push(o)}else n[r]=o}parseParens(n){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=AR(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ye(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):n&&(o=Ft);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[Ft]:new hn([],s),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return this.peekStartsWith(n)?(this.remaining=this.remaining.substring(n.length),!0):!1}capture(n){if(!this.consumeOptional(n))throw new ye(4011,!1)}};function Y4(t){return t.segments.length>0?new hn([],{[Ft]:t}):t}function Q4(t){let n={};for(let[i,r]of Object.entries(t.children)){let o=Q4(r);if(i===Ft&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))n[s]=a;else(o.segments.length>0||o.hasChildren())&&(n[i]=o)}let e=new hn(t.segments,n);return afe(e)}function afe(t){if(t.numberOfChildren===1&&t.children[Ft]){let n=t.children[Ft];return new hn(t.segments.concat(n.segments),n.children)}return t}function Df(t){return t instanceof Sa}function Z4(t,n,e=null,i=null){let r=J4(t);return eH(r,n,e,i)}function J4(t){let n;function e(o){let s={};for(let l of o.children){let c=e(l);s[l.outlet]=c}let a=new hn(o.url,s);return o===t&&(n=a),a}let i=e(t.root),r=Y4(i);return n??r}function eH(t,n,e,i){let r=t;for(;r.parent;)r=r.parent;if(n.length===0)return NR(r,r,r,e,i);let o=lfe(n);if(o.toRoot())return NR(r,r,new hn([],{}),e,i);let s=cfe(o,r,t),a=s.processChildren?Ox(s.segmentGroup,s.index,o.commands):nH(s.segmentGroup,s.index,o.commands);return NR(r,s.segmentGroup,a,e,i)}function eT(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Lx(t){return typeof t=="object"&&t!=null&&t.outlets}function NR(t,n,e,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===n?s=e:s=tH(t,n,e);let a=Y4(Q4(s));return new Sa(a,o,r)}function tH(t,n,e){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===n?i[r]=e:i[r]=tH(o,n,e)}),new hn(t.segments,i)}var tT=class{isAbsolute;numberOfDoubleDots;commands;constructor(n,e,i){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=i,n&&i.length>0&&eT(i[0]))throw new ye(4003,!1);let r=i.find(Lx);if(r&&r!==U4(i))throw new ye(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function lfe(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new tT(!0,0,t);let n=0,e=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?n++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new tT(e,n,i)}var If=class{segmentGroup;processChildren;index;constructor(n,e,i){this.segmentGroup=n,this.processChildren=e,this.index=i}};function cfe(t,n,e){if(t.isAbsolute)return new If(n,!0,0);if(!e)return new If(n,!1,NaN);if(e.parent===null)return new If(e,!0,0);let i=eT(t.commands[0])?0:1,r=e.segments.length-1+i;return ufe(e,r,t.numberOfDoubleDots)}function ufe(t,n,e){let i=t,r=n,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ye(4005,!1);r=i.segments.length}return new If(i,!1,r-o)}function dfe(t){return Lx(t[0])?t[0].outlets:{[Ft]:t}}function nH(t,n,e){if(t??=new hn([],{}),t.segments.length===0&&t.hasChildren())return Ox(t,n,e);let i=pfe(t,n,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new hn(t.segments.slice(0,i.pathIndex),{});return o.children[Ft]=new hn(t.segments.slice(i.pathIndex),t.children),Ox(o,0,r)}else return i.match&&r.length===0?new hn(t.segments,{}):i.match&&!t.hasChildren()?$R(t,n,e):i.match?Ox(t,0,r):$R(t,n,e)}function Ox(t,n,e){if(e.length===0)return new hn(t.segments,{});{let i=dfe(e),r={};if(Object.keys(i).some(o=>o!==Ft)&&t.children[Ft]&&t.numberOfChildren===1&&t.children[Ft].segments.length===0){let o=Ox(t.children[Ft],n,e);return new hn(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=nH(t.children[o],n,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new hn(t.segments,r)}}function pfe(t,n,e){let i=0,r=n,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=e.length)return o;let s=t.segments[r],a=e[i];if(Lx(a))break;let l=`${a}`,c=i<e.length-1?e[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!P4(l,c,s))return o;i+=2}else{if(!P4(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function $R(t,n,e){let i=t.segments.slice(0,n),r=0;for(;r<e.length;){let o=e[r];if(Lx(o)){let l=hfe(o.outlets);return new hn(i,l)}if(r===0&&eT(e[0])){let l=t.segments[n];i.push(new Su(l.path,L4(e[0]))),r++;continue}let s=Lx(o)?o.outlets[Ft]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&eT(a)?(i.push(new Su(s,L4(a))),r+=2):(i.push(new Su(s,{})),r++)}return new hn(i,{})}function hfe(t){let n={};return Object.entries(t).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(n[e]=$R(new hn([],{}),0,i))}),n}function L4(t){let n={};return Object.entries(t).forEach(([e,i])=>n[e]=`${i}`),n}function P4(t,n,e){return t==e.path&&Ca(n,e.parameters)}var JC="imperative",qi=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(qi||{}),Lo=class{id;url;constructor(n,e){this.id=n,this.url=e}},$p=class extends Lo{type=qi.NavigationStart;navigationTrigger;restoredState;constructor(n,e,i="imperative",r=null){super(n,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Il=class extends Lo{urlAfterRedirects;type=qi.NavigationEnd;constructor(n,e,i){super(n,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},uo=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(uo||{}),Px=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Px||{}),Ta=class extends Lo{reason;code;type=qi.NavigationCancel;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},El=class extends Lo{reason;code;type=qi.NavigationSkipped;constructor(n,e,i,r){super(n,e),this.reason=i,this.code=r}},Af=class extends Lo{error;target;type=qi.NavigationError;constructor(n,e,i,r){super(n,e),this.error=i,this.target=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$x=class extends Lo{urlAfterRedirects;state;type=qi.RoutesRecognized;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nT=class extends Lo{urlAfterRedirects;state;type=qi.GuardsCheckStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iT=class extends Lo{urlAfterRedirects;state;shouldActivate;type=qi.GuardsCheckEnd;constructor(n,e,i,r,o){super(n,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},rT=class extends Lo{urlAfterRedirects;state;type=qi.ResolveStart;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oT=class extends Lo{urlAfterRedirects;state;type=qi.ResolveEnd;constructor(n,e,i,r){super(n,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sT=class{route;type=qi.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},aT=class{route;type=qi.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lT=class{snapshot;type=qi.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cT=class{snapshot;type=qi.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uT=class{snapshot;type=qi.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dT=class{snapshot;type=qi.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Vx=class{},Nf=class{url;navigationBehaviorOptions;constructor(n,e){this.url=n,this.navigationBehaviorOptions=e}};function mfe(t,n){return t.providers&&!t._injector&&(t._injector=AC(t.providers,n,`Route: ${t.path}`)),t._injector??n}function Bs(t){return t.outlet||Ft}function ffe(t,n){let e=t.filter(i=>Bs(i)===n);return e.push(...t.filter(i=>Bs(i)!==n)),e}function qx(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){let e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var pT=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return qx(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new Of(this.rootInjector)}},Of=(()=>{class t{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,i){let r=this.getOrCreateContext(e);r.outlet=i,this.contexts.set(e,r)}onChildOutletDestroyed(e){let i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new pT(this.rootInjector),this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(i){return new(i||t)(Xe(yi))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),hT=class{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){let e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){let e=VR(n,this._root);return e?e.children.map(i=>i.value):[]}firstChild(n){let e=VR(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){let e=BR(n,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==n)}pathFromRoot(n){return BR(n,this._root).map(e=>e.value)}};function VR(t,n){if(t===n.value)return n;for(let e of n.children){let i=VR(t,e);if(i)return i}return null}function BR(t,n){if(t===n.value)return[n];for(let e of n.children){let i=BR(t,e);if(i.length)return i.unshift(n),i}return[]}var Fo=class{value;children;constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}};function kf(t){let n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}var Bx=class extends hT{snapshot;constructor(n,e){super(n),this.snapshot=e,XR(this,n)}toString(){return this.snapshot.toString()}};function iH(t){let n=gfe(t),e=new Zn([new Su("",{})]),i=new Zn({}),r=new Zn({}),o=new Zn({}),s=new Zn(""),a=new ku(e,i,o,s,r,Ft,t,n.root);return a.snapshot=n.root,new Bx(new Fo(a,[]),n)}function gfe(t){let n={},e={},i={},r="",o=new Fp([],n,i,r,e,Ft,t,null,{});return new zx("",new Fo(o,[]))}var ku=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,e,i,r,o,s,a,l){this.urlSubject=n,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(rt(c=>c[Wx]))??Qe(void 0),this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(rt(n=>Lp(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(rt(n=>Lp(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mT(t,n,e="emptyOnly"){let i,{routeConfig:r}=t;return n!==null&&(e==="always"||r?.path===""||!n.component&&!n.routeConfig?.loadComponent)?i={params:ie(ie({},n.params),t.params),data:ie(ie({},n.data),t.data),resolve:ie(ie(ie(ie({},t.data),n.data),r?.data),t._resolvedData)}:i={params:ie({},t.params),data:ie({},t.data),resolve:ie(ie({},t.data),t._resolvedData??{})},r&&oH(r)&&(i.resolve[Wx]=r.title),i}var Fp=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Wx]}constructor(n,e,i,r,o,s,a,l,c){this.url=n,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Lp(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Lp(this.queryParams),this._queryParamMap}toString(){let n=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${n}', path:'${e}')`}},zx=class extends hT{url;constructor(n,e){super(e),this.url=n,XR(this,e)}toString(){return rH(this._root)}};function XR(t,n){n.value._routerState=t,n.children.forEach(e=>XR(t,e))}function rH(t){let n=t.children.length>0?` { ${t.children.map(rH).join(", ")} } `:"";return`${t.value}${n}`}function MR(t){if(t.snapshot){let n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,Ca(n.queryParams,e.queryParams)||t.queryParamsSubject.next(e.queryParams),n.fragment!==e.fragment&&t.fragmentSubject.next(e.fragment),Ca(n.params,e.params)||t.paramsSubject.next(e.params),Hme(n.url,e.url)||t.urlSubject.next(e.url),Ca(n.data,e.data)||t.dataSubject.next(e.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function zR(t,n){let e=Ca(t.params,n.params)&&Xme(t.url,n.url),i=!t.parent!=!n.parent;return e&&!i&&(!t.parent||zR(t.parent,n.parent))}function oH(t){return typeof t.title=="string"||t.title===null}var sH=new he(""),Xx=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Ft;activateEvents=new Se;deactivateEvents=new Se;attachEvents=new Se;detachEvents=new Se;routerOutletData=pG(void 0);parentContexts=k(Of);location=k(Wi);changeDetector=k(Tn);inputBinder=k(bT,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:i,previousValue:r}=e.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ye(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ye(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ye(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new ye(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new GR(e,a,r.injector,this.routerOutletData);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Zt]})}return t})(),GR=class{route;childContexts;parent;outletData;constructor(n,e,i,r){this.route=n,this.childContexts=e,this.parent=i,this.outletData=r}get(n,e){return n===ku?this.route:n===Of?this.childContexts:n===sH?this.outletData:this.parent.get(n,e)}},bT=new he("");var KR=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,r){i&1&&ke(0,"router-outlet")},dependencies:[Xx],encapsulation:2})}return t})();function YR(t){let n=t.children&&t.children.map(YR),e=n?At(ie({},t),{children:n}):ie({},t);return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==Ft&&(e.component=KR),e}function yfe(t,n,e){let i=Gx(t,n._root,e?e._root:void 0);return new Bx(i,n)}function Gx(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=n.value;let r=bfe(t,n,e);return new Fo(i,r)}else{if(t.shouldAttach(n.value)){let o=t.retrieve(n.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=n.value,s.children=n.children.map(a=>Gx(t,a)),s}}let i=xfe(n.value),r=n.children.map(o=>Gx(t,o));return new Fo(i,r)}}function bfe(t,n,e){return n.children.map(i=>{for(let r of e.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Gx(t,i,r);return Gx(t,i)})}function xfe(t){return new ku(new Zn(t.url),new Zn(t.params),new Zn(t.queryParams),new Zn(t.fragment),new Zn(t.data),t.outlet,t.component,t)}var Mf=class{redirectTo;navigationBehaviorOptions;constructor(n,e){this.redirectTo=n,this.navigationBehaviorOptions=e}},aH="ngNavigationCancelingError";function fT(t,n){let{redirectTo:e,navigationBehaviorOptions:i}=Df(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,r=lH(!1,uo.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function lH(t,n){let e=new Error(`NavigationCancelingError: ${t||""}`);return e[aH]=!0,e.cancellationCode=n,e}function vfe(t){return cH(t)&&Df(t.url)}function cH(t){return!!t&&t[aH]}var _fe=(t,n,e,i)=>rt(r=>(new UR(n,r.targetRouterState,r.currentRouterState,e,i).activate(t),r)),UR=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,e,i,r,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(n){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,n),MR(this.futureState.root),this.activateChildRoutes(e,i,n)}deactivateChildRoutes(n,e,i){let r=kf(e);n.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(n,e,s.children)}else this.deactivateChildRoutes(n,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=kf(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:s,route:n,contexts:a})}}deactivateRouteAndOutlet(n,e){let i=e.getContext(n.value.outlet),r=i&&n.value.component?i.children:e,o=kf(n);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(n,e,i){let r=kf(e);n.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new dT(o.value.snapshot))}),n.children.length&&this.forwardEvent(new cT(n.value.snapshot))}activateRoutes(n,e,i){let r=n.value,o=e?e.value:null;if(MR(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(n,e,s.children)}else this.activateChildRoutes(n,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),MR(a.route.value),this.activateChildRoutes(n,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(n,null,s.children)}else this.activateChildRoutes(n,null,i)}},gT=class{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}},Ef=class{component;route;constructor(n,e){this.component=n,this.route=e}};function wfe(t,n,e){let i=t._root,r=n?n._root:null;return Rx(i,r,e,[i.value])}function Cfe(t){let n=t.routeConfig?t.routeConfig.canActivateChild:null;return!n||n.length===0?null:{node:t,guards:n}}function Ff(t,n){let e=Symbol(),i=n.get(t,e);return i===e?typeof t=="function"&&!sz(t)?t:n.get(t):i}function Rx(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=kf(n);return t.children.forEach(s=>{Tfe(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Fx(a,e.getContext(s),r)),r}function Tfe(t,n,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=n?n.value:null,a=e?e.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Sfe(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new gT(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Rx(t,n,a?a.children:null,i,r):Rx(t,n,e,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ef(a.outlet.component,s))}else s&&Fx(n,a,r),r.canActivateChecks.push(new gT(i)),o.component?Rx(t,null,a?a.children:null,i,r):Rx(t,null,e,i,r);return r}function Sfe(t,n,e){if(typeof e=="function")return e(t,n);switch(e){case"pathParamsChange":return!Op(t.url,n.url);case"pathParamsOrQueryParamsChange":return!Op(t.url,n.url)||!Ca(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zR(t,n)||!Ca(t.queryParams,n.queryParams);case"paramsChange":default:return!zR(t,n)}}function Fx(t,n,e){let i=kf(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?n?Fx(s,n.children.getContext(o),e):Fx(s,null,e):Fx(s,n,e)}),r.component?n&&n.outlet&&n.outlet.isActivated?e.canDeactivateChecks.push(new Ef(n.outlet.component,r)):e.canDeactivateChecks.push(new Ef(null,r)):e.canDeactivateChecks.push(new Ef(null,r))}function Kx(t){return typeof t=="function"}function kfe(t){return typeof t=="boolean"}function Ife(t){return t&&Kx(t.canLoad)}function Efe(t){return t&&Kx(t.canActivate)}function Dfe(t){return t&&Kx(t.canActivateChild)}function Afe(t){return t&&Kx(t.canDeactivate)}function Nfe(t){return t&&Kx(t.canMatch)}function uH(t){return t instanceof cl||t?.name==="EmptyError"}var KC=Symbol("INITIAL_VALUE");function Rf(){return nr(t=>zm(t.map(n=>n.pipe(Xn(1),Mo(KC)))).pipe(rt(n=>{for(let e of n)if(e!==!0){if(e===KC)return KC;if(e===!1||Mfe(e))return e}return!0}),Cn(n=>n!==KC),Xn(1)))}function Mfe(t){return Df(t)||t instanceof Mf}function Rfe(t,n){return ui(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?Qe(At(ie({},e),{guardsResult:!0})):Ofe(s,i,r,t).pipe(ui(a=>a&&kfe(a)?Ffe(i,o,t,n):Qe(a)),rt(a=>At(ie({},e),{guardsResult:a})))})}function Ofe(t,n,e,i){return Vn(t).pipe(ui(r=>Bfe(r.component,r.route,e,n,i)),pl(r=>r!==!0,!0))}function Ffe(t,n,e,i){return Vn(n).pipe(mu(r=>hu(Pfe(r.route.parent,i),Lfe(r.route,i),Vfe(t,r.path,e),$fe(t,r.route,e))),pl(r=>r!==!0,!0))}function Lfe(t,n){return t!==null&&n&&n(new uT(t)),Qe(!0)}function Pfe(t,n){return t!==null&&n&&n(new lT(t)),Qe(!0)}function $fe(t,n,e){let i=n.routeConfig?n.routeConfig.canActivate:null;if(!i||i.length===0)return Qe(!0);let r=i.map(o=>pa(()=>{let s=qx(n)??e,a=Ff(o,s),l=Efe(a)?a.canActivate(n,t):Oo(s,()=>a(n,t));return Iu(l).pipe(pl())}));return Qe(r).pipe(Rf())}function Vfe(t,n,e){let i=n[n.length-1],o=n.slice(0,n.length-1).reverse().map(s=>Cfe(s)).filter(s=>s!==null).map(s=>pa(()=>{let a=s.guards.map(l=>{let c=qx(s.node)??e,u=Ff(l,c),d=Dfe(u)?u.canActivateChild(i,t):Oo(c,()=>u(i,t));return Iu(d).pipe(pl())});return Qe(a).pipe(Rf())}));return Qe(o).pipe(Rf())}function Bfe(t,n,e,i,r){let o=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!o||o.length===0)return Qe(!0);let s=o.map(a=>{let l=qx(n)??r,c=Ff(a,l),u=Afe(c)?c.canDeactivate(t,n,e,i):Oo(l,()=>c(t,n,e,i));return Iu(u).pipe(pl())});return Qe(s).pipe(Rf())}function zfe(t,n,e,i){let r=n.canLoad;if(r===void 0||r.length===0)return Qe(!0);let o=r.map(s=>{let a=Ff(s,t),l=Ife(a)?a.canLoad(n,e):Oo(t,()=>a(n,e));return Iu(l)});return Qe(o).pipe(Rf(),dH(i))}function dH(t){return FA(Jn(n=>{if(typeof n!="boolean")throw fT(t,n)}),rt(n=>n===!0))}function Gfe(t,n,e,i){let r=n.canMatch;if(!r||r.length===0)return Qe(!0);let o=r.map(s=>{let a=Ff(s,t),l=Nfe(a)?a.canMatch(n,e):Oo(t,()=>a(n,e));return Iu(l)});return Qe(o).pipe(Rf(),dH(i))}var Ux=class{segmentGroup;constructor(n){this.segmentGroup=n||null}},Hx=class extends Error{urlTree;constructor(n){super(),this.urlTree=n}};function Sf(t){return pu(new Ux(t))}function Ufe(t){return pu(new ye(4e3,!1))}function Hfe(t){return pu(lH(!1,uo.GuardRejected))}var HR=class{urlSerializer;urlTree;constructor(n,e){this.urlSerializer=n,this.urlTree=e}lineralizeSegments(n,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Qe(i);if(r.numberOfChildren>1||!r.children[Ft])return Ufe(`${n.redirectTo}`);r=r.children[Ft]}}applyRedirectCommands(n,e,i,r,o){if(typeof e!="string"){let a=e,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,params:h,data:m,title:g}=r,f=Oo(o,()=>a({params:h,data:m,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:p,title:g}));if(f instanceof Sa)throw new Hx(f);e=f}let s=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,i);if(e[0]==="/")throw new Hx(s);return s}applyRedirectCreateUrlTree(n,e,i,r){let o=this.createSegmentGroup(n,e.root,i,r);return new Sa(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){let i={};return Object.entries(n).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(n,e,i,r){let o=this.createSegments(n,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(n,l,i,r)}),new hn(o,s)}createSegments(n,e,i,r){return e.map(o=>o.path[0]===":"?this.findPosParam(n,o,r):this.findOrReturn(o,i))}findPosParam(n,e,i){let r=i[e.path.substring(1)];if(!r)throw new ye(4001,!1);return r}findOrReturn(n,e){let i=0;for(let r of e){if(r.path===n.path)return e.splice(i),r;i++}return n}},WR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Wfe(t,n,e,i,r){let o=pH(t,n,e);return o.matched?(i=mfe(n,i),Gfe(i,n,e,r).pipe(rt(s=>s===!0?o:ie({},WR)))):Qe(o)}function pH(t,n,e){if(n.path==="**")return jfe(e);if(n.path==="")return n.pathMatch==="full"&&(t.hasChildren()||e.length>0)?ie({},WR):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(n.matcher||z4)(e,t,n);if(!r)return ie({},WR);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?ie(ie({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function jfe(t){return{matched:!0,parameters:t.length>0?U4(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function $4(t,n,e,i){return e.length>0&&Kfe(t,e,i)?{segmentGroup:new hn(n,Xfe(i,new hn(e,t.children))),slicedSegments:[]}:e.length===0&&Yfe(t,e,i)?{segmentGroup:new hn(t.segments,qfe(t,e,i,t.children)),slicedSegments:e}:{segmentGroup:new hn(t.segments,t.children),slicedSegments:e}}function qfe(t,n,e,i){let r={};for(let o of e)if(xT(t,n,o)&&!i[Bs(o)]){let s=new hn([],{});r[Bs(o)]=s}return ie(ie({},i),r)}function Xfe(t,n){let e={};e[Ft]=n;for(let i of t)if(i.path===""&&Bs(i)!==Ft){let r=new hn([],{});e[Bs(i)]=r}return e}function Kfe(t,n,e){return e.some(i=>xT(t,n,i)&&Bs(i)!==Ft)}function Yfe(t,n,e){return e.some(i=>xT(t,n,i))}function xT(t,n,e){return(t.hasChildren()||n.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Qfe(t,n,e){return n.length===0&&!t.children[e]}var jR=class{};function Zfe(t,n,e,i,r,o,s="emptyOnly"){return new qR(t,n,e,i,r,s,o).recognize()}var Jfe=31,qR=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,e,i,r,o,s,a){this.injector=n,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new HR(this.urlSerializer,this.urlTree)}noMatchError(n){return new ye(4002,`'${n.segmentGroup}'`)}recognize(){let n=$4(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(rt(({children:e,rootSnapshot:i})=>{let r=new Fo(i,e),o=new zx("",r),s=Z4(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(n){let e=new Fp([],Object.freeze({}),Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ft,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,Ft,e).pipe(rt(i=>({children:i,rootSnapshot:e})),Qo(i=>{if(i instanceof Hx)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ux?this.noMatchError(i):i}))}processSegmentGroup(n,e,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(n,e,i,o):this.processSegment(n,e,i,i.segments,r,!0,o).pipe(rt(s=>s instanceof Fo?[s]:[]))}processChildren(n,e,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Vn(o).pipe(mu(s=>{let a=i.children[s],l=ffe(e,s);return this.processSegmentGroup(n,l,a,s,r)}),GA((s,a)=>(s.push(...a),s)),fu(null),zA(),ui(s=>{if(s===null)return Sf(i);let a=hH(s);return ege(a),Qe(a)}))}processSegment(n,e,i,r,o,s,a){return Vn(e).pipe(mu(l=>this.processSegmentAgainstRoute(l._injector??n,e,l,i,r,o,s,a).pipe(Qo(c=>{if(c instanceof Ux)return Qe(null);throw c}))),pl(l=>!!l),Qo(l=>{if(uH(l))return Qfe(i,r,o)?Qe(new jR):Sf(i);throw l}))}processSegmentAgainstRoute(n,e,i,r,o,s,a,l){return Bs(i)!==s&&(s===Ft||!xT(r,o,i))?Sf(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(n,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(n,r,e,i,o,s,l):Sf(r)}expandSegmentAgainstRouteUsingRedirect(n,e,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:p}=pH(e,r,o);if(!l)return Sf(e);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Jfe&&(this.allowRedirects=!1));let h=new Fp(o,c,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,V4(r),Bs(r),r.component??r._loadedComponent??null,r,B4(r)),m=mT(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(m.params),h.data=Object.freeze(m.data);let g=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,h,n);return this.applyRedirects.lineralizeSegments(r,g).pipe(ui(f=>this.processSegment(n,i,e,f.concat(p),s,!1,a)))}matchSegmentAgainstRoute(n,e,i,r,o,s){let a=Wfe(e,i,r,n,this.urlSerializer);return i.path==="**"&&(e.children={}),a.pipe(nr(l=>l.matched?(n=i._injector??n,this.getChildConfig(n,i,r).pipe(nr(({routes:c})=>{let u=i._loadedInjector??n,{parameters:d,consumedSegments:p,remainingSegments:h}=l,m=new Fp(p,d,Object.freeze(ie({},this.urlTree.queryParams)),this.urlTree.fragment,V4(i),Bs(i),i.component??i._loadedComponent??null,i,B4(i)),g=mT(m,s,this.paramsInheritanceStrategy);m.params=Object.freeze(g.params),m.data=Object.freeze(g.data);let{segmentGroup:f,slicedSegments:y}=$4(e,p,h,c);if(y.length===0&&f.hasChildren())return this.processChildren(u,c,f,m).pipe(rt(v=>new Fo(m,v)));if(c.length===0&&y.length===0)return Qe(new Fo(m,[]));let b=Bs(i)===o;return this.processSegment(u,c,f,y,b?Ft:o,!0,m).pipe(rt(v=>new Fo(m,v instanceof Fo?[v]:[])))}))):Sf(e)))}getChildConfig(n,e,i){return e.children?Qe({routes:e.children,injector:n}):e.loadChildren?e._loadedRoutes!==void 0?Qe({routes:e._loadedRoutes,injector:e._loadedInjector}):zfe(n,e,i,this.urlSerializer).pipe(ui(r=>r?this.configLoader.loadChildren(n,e).pipe(Jn(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):Hfe(e))):Qe({routes:[],injector:n})}};function ege(t){t.sort((n,e)=>n.value.outlet===Ft?-1:e.value.outlet===Ft?1:n.value.outlet.localeCompare(e.value.outlet))}function tge(t){let n=t.value.routeConfig;return n&&n.path===""}function hH(t){let n=[],e=new Set;for(let i of t){if(!tge(i)){n.push(i);continue}let r=n.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):n.push(i)}for(let i of e){let r=hH(i.children);n.push(new Fo(i.value,r))}return n.filter(i=>!e.has(i))}function V4(t){return t.data||{}}function B4(t){return t.resolve||{}}function nge(t,n,e,i,r,o){return ui(s=>Zfe(t,n,e,i,s.extractedUrl,r,o).pipe(rt(({state:a,tree:l})=>At(ie({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function ige(t,n){return ui(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return Qe(e);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of mH(l))s.add(c);let a=0;return Vn(s).pipe(mu(l=>o.has(l)?rge(l,i,t,n):(l.data=mT(l,l.parent,t).resolve,Qe(void 0))),Jn(()=>a++),Gm(1),ui(l=>a===s.size?Qe(e):mr))})}function mH(t){let n=t.children.map(e=>mH(e)).flat();return[t,...n]}function rge(t,n,e,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!oH(r)&&(o[Wx]=r.title),oge(o,t,n,i).pipe(rt(s=>(t._resolvedData=s,t.data=mT(t,t.parent,e).resolve,null)))}function oge(t,n,e,i){let r=FR(t);if(r.length===0)return Qe({});let o={};return Vn(r).pipe(ui(s=>sge(t[s],n,e,i).pipe(pl(),Jn(a=>{if(a instanceof Mf)throw fT(new Pp,a);o[s]=a}))),Gm(1),rt(()=>o),Qo(s=>uH(s)?mr:pu(s)))}function sge(t,n,e,i){let r=qx(n)??i,o=Ff(t,r),s=o.resolve?o.resolve(n,e):Oo(r,()=>o(n,e));return Iu(s)}function RR(t){return nr(n=>{let e=t(n);return e?Vn(e).pipe(rt(()=>n)):Qe(n)})}var QR=(()=>{class t{buildTitle(e){let i,r=e.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===Ft);return i}getResolvedTitleForRoute(e){return e.data[Wx]}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>k(fH),providedIn:"root"})}return t})(),fH=(()=>{class t extends QR{title;constructor(e){super(),this.title=e}updateTitle(e){let i=this.buildTitle(e);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||t)(Xe(M4))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Yx=new he("",{providedIn:"root",factory:()=>({})}),Qx=new he(""),gH=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(qU);loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Qe(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let i=Iu(e.loadComponent()).pipe(rt(bH),Jn(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),dl(()=>{this.componentLoaders.delete(e)})),r=new Pm(i,()=>new Re).pipe(Lm());return this.componentLoaders.set(e,r),r}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Qe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=yH(i,this.compiler,e,this.onLoadEndListener).pipe(dl(()=>{this.childrenLoaders.delete(i)})),s=new Pm(o,()=>new Re).pipe(Lm());return this.childrenLoaders.set(i,s),s}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yH(t,n,e,i){return Iu(t.loadChildren()).pipe(rt(bH),ui(r=>r instanceof nR||Array.isArray(r)?Qe(r):Vn(n.compileModuleAsync(r))),rt(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Qx,[],{optional:!0,self:!0}).flat()),{routes:s.map(YR),injector:o}}))}function age(t){return t&&typeof t=="object"&&"default"in t}function bH(t){return age(t)?t.default:t}var vT=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>k(lge),providedIn:"root"})}return t})(),lge=(()=>{class t{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,i){return e}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xH=new he("");var vH=new he(""),_H=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Re;transitionAbortSubject=new Re;configLoader=k(gH);environmentInjector=k(yi);destroyRef=k(hf);urlSerializer=k(jx);rootContexts=k(Of);location=k(Cu);inputBindingEnabled=k(bT,{optional:!0})!==null;titleStrategy=k(QR);options=k(Yx,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(vT);createViewTransition=k(xH,{optional:!0});navigationErrorHandler=k(vH,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Qe(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=r=>this.events.next(new sT(r)),i=r=>this.events.next(new aT(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let i=++this.navigationId;this.transitions?.next(At(ie({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:i}))}setupNavigations(e){return this.transitions=new Zn(null),this.transitions.pipe(Cn(i=>i!==null),nr(i=>{let r=!1,o=!1;return Qe(i).pipe(nr(s=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",uo.SupersededByNewNavigation),mr;this.currentTransition=i,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?At(ie({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!a&&l!=="reload"){let c="";return this.events.next(new El(s.id,this.urlSerializer.serialize(s.rawUrl),c,Px.IgnoredSameUrlNavigation)),s.resolve(!1),mr}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return Qe(s).pipe(nr(c=>(this.events.next(new $p(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?mr:Promise.resolve(c))),nge(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Jn(c=>{i.targetSnapshot=c.targetSnapshot,i.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation=At(ie({},this.currentNavigation),{finalUrl:c.urlAfterRedirects});let u=new $x(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:c,extractedUrl:u,source:d,restoredState:p,extras:h}=s,m=new $p(c,this.urlSerializer.serialize(u),d,p);this.events.next(m);let g=iH(this.rootComponentType).snapshot;return this.currentTransition=i=At(ie({},s),{targetSnapshot:g,urlAfterRedirects:u,extras:At(ie({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=u,Qe(i)}else{let c="";return this.events.next(new El(s.id,this.urlSerializer.serialize(s.extractedUrl),c,Px.IgnoredByUrlHandlingStrategy)),s.resolve(!1),mr}}),Jn(s=>{let a=new nT(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),rt(s=>(this.currentTransition=i=At(ie({},s),{guards:wfe(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),i)),Rfe(this.environmentInjector,s=>this.events.next(s)),Jn(s=>{if(i.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw fT(this.urlSerializer,s.guardsResult);let a=new iT(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Cn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",uo.GuardRejected),!1)),RR(s=>{if(s.guards.canActivateChecks.length!==0)return Qe(s).pipe(Jn(a=>{let l=new rT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),nr(a=>{let l=!1;return Qe(a).pipe(ige(this.paramsInheritanceStrategy,this.environmentInjector),Jn({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",uo.NoDataFromResolver)}}))}),Jn(a=>{let l=new oT(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),RR(s=>{let a=l=>{let c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Jn(u=>{l.component=u}),rt(()=>{})));for(let u of l.children)c.push(...a(u));return c};return zm(a(s.targetSnapshot.root)).pipe(fu(null),Xn(1))}),RR(()=>this.afterPreactivation()),nr(()=>{let{currentSnapshot:s,targetSnapshot:a}=i,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?Vn(l).pipe(rt(()=>i)):Qe(i)}),rt(s=>{let a=yfe(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=i=At(ie({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,i}),Jn(()=>{this.events.next(new Vx)}),_fe(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Xn(1),Jn({next:s=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Il(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{r=!0}}),Bn(this.transitionAbortSubject.pipe(Jn(s=>{throw s}))),dl(()=>{!r&&!o&&this.cancelNavigationTransition(i,"",uo.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qo(s=>{if(this.destroyed)return i.resolve(!1),mr;if(o=!0,cH(s))this.events.next(new Ta(i.id,this.urlSerializer.serialize(i.extractedUrl),s.message,s.cancellationCode)),vfe(s)?this.events.next(new Nf(s.url,s.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Af(i.id,this.urlSerializer.serialize(i.extractedUrl),s,i.targetSnapshot??void 0);try{let l=Oo(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Mf){let{message:c,cancellationCode:u}=fT(this.urlSerializer,l);this.events.next(new Ta(i.id,this.urlSerializer.serialize(i.extractedUrl),c,u)),this.events.next(new Nf(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(l)}}return mr}))}))}cancelNavigationTransition(e,i,r){let o=new Ta(e.id,this.urlSerializer.serialize(e.extractedUrl),i,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return e.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cge(t){return t!==JC}var wH=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>k(uge),providedIn:"root"})}return t})(),yT=class{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}},uge=(()=>{class t extends yT{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),CH=(()=>{class t{urlSerializer=k(jx);options=k(Yx,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Cu);urlHandlingStrategy=k(vT);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Sa;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:i,targetBrowserUrl:r}){let o=e!==void 0?this.urlHandlingStrategy.merge(e,i):i,s=r??o;return s instanceof Sa?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:e,finalUrl:i,initialUrl:r}){i&&e?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,r),this.routerState=e):this.rawUrlTree=r}routerState=iH(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:()=>k(dge),providedIn:"root"})}return t})(),dge=(()=>{class t extends CH{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{e(i.url,i.state,"popstate")})})}handleRouterEvent(e,i){e instanceof $p?this.updateStateMemento():e instanceof El?this.commitTransition(i):e instanceof $x?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Vx?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):e instanceof Ta&&(e.code===uo.GuardRejected||e.code===uo.NoDataFromResolver)?this.restoreHistory(i):e instanceof Af?this.restoreHistory(i,!0):e instanceof Il&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:i,id:r}){let{replaceUrl:o,state:s}=i;if(this.location.isCurrentPathEqualTo(e)||o){let a=this.browserPageId,l=ie(ie({},s),this.generateNgRouterState(r,a));this.location.replaceState(e,"",l)}else{let a=ie(ie({},s),this.generateNgRouterState(r,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===e.finalUrl&&o===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,i){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZR(t,n){t.events.pipe(Cn(e=>e instanceof Il||e instanceof Ta||e instanceof Af||e instanceof El),rt(e=>e instanceof Il||e instanceof El?0:(e instanceof Ta?e.code===uo.Redirect||e.code===uo.SupersededByNewNavigation:!1)?2:1),Cn(e=>e!==2),Xn(1)).subscribe(()=>{n()})}var pge={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hge={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},os=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(rR);stateManager=k(CH);options=k(Yx,{optional:!0})||{};pendingTasks=k(vu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(_H);urlSerializer=k(jx);location=k(Cu);urlHandlingStrategy=k(vT);_events=new Re;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(wH);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Qx,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(bT,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new en;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ta&&i.code!==uo.Redirect&&i.code!==uo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Il)this.navigated=!0;else if(i instanceof Nf){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=ie({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||cge(r.source)},s);this.scheduleNavigation(a,JC,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}fge(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),JC,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,i,r)=>{this.navigateToSyncWithBrowser(e,r,i)})}navigateToSyncWithBrowser(e,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=ie({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(YR),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=ie(ie({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let p=r?r.snapshot:this.routerState.snapshot.root;d=J4(p)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return eH(d,e,u,c??null)}navigateByUrl(e,i={skipLocationChange:!1}){let r=Df(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,JC,null,i)}navigate(e,i={skipLocationChange:!1}){return mge(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,i){let r;if(i===!0?r=ie({},pge):i===!1?r=ie({},hge):r=i,Df(e))return O4(this.currentUrlTree,e,r);let o=this.parseUrl(e);return O4(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(e,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,p)=>{a=d,l=p});let u=this.pendingTasks.add();return ZR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mge(t){for(let n=0;n<t.length;n++)if(t[n]==null)throw new ye(4008,!1)}function fge(t){return!(t instanceof Vx)&&!(t instanceof Nf)}var yge=new he("");function JR(t,...n){return lf([{provide:Qx,multi:!0,useValue:t},[],{provide:ku,useFactory:bge,deps:[os]},{provide:oR,multi:!0,useFactory:xge},n.map(e=>e.\u0275providers)])}function bge(t){return t.routerState.root}function xge(){let t=k(Vt);return n=>{let e=t.get(Lr);if(n!==e.components[0])return;let i=t.get(os),r=t.get(vge);t.get(_ge)===1&&i.initialNavigation(),t.get(wge,null,Pt.Optional)?.setUpPreloading(),t.get(yge,null,Pt.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var vge=new he("",{factory:()=>new Re}),_ge=new he("",{providedIn:"root",factory:()=>1});var wge=new he("");var Mt=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Mt||{}),ss="*";function Lf(t,n){return{type:Mt.Trigger,name:t,definitions:n,options:{}}}function Bp(t,n=null){return{type:Mt.Animate,styles:n,timings:t}}function TH(t,n=null){return{type:Mt.Sequence,steps:t,options:n}}function Hr(t){return{type:Mt.Style,styles:t,offset:null}}function zp(t,n,e=null){return{type:Mt.Transition,expr:t,animation:n,options:e}}var ka=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,e=0){this.totalTime=n+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Vp=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let e=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){let e=n*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){let n=this.players.reduce((e,i)=>e===null||i.totalTime>e.totalTime?i:e,null);return n!=null?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){let e=n=="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},Pf="!";function SH(t){return new ye(3e3,!1)}function Tge(){return new ye(3100,!1)}function Sge(){return new ye(3101,!1)}function kge(t){return new ye(3001,!1)}function Ige(t){return new ye(3003,!1)}function Ege(t){return new ye(3004,!1)}function IH(t,n){return new ye(3005,!1)}function EH(){return new ye(3006,!1)}function DH(){return new ye(3007,!1)}function AH(t,n){return new ye(3008,!1)}function NH(t){return new ye(3002,!1)}function MH(t,n,e,i,r){return new ye(3010,!1)}function RH(){return new ye(3011,!1)}function OH(){return new ye(3012,!1)}function FH(){return new ye(3200,!1)}function LH(){return new ye(3202,!1)}function PH(){return new ye(3013,!1)}function $H(t){return new ye(3014,!1)}function VH(t){return new ye(3015,!1)}function BH(t){return new ye(3016,!1)}function zH(t,n){return new ye(3404,!1)}function Dge(t){return new ye(3502,!1)}function GH(t){return new ye(3503,!1)}function UH(){return new ye(3300,!1)}function HH(t){return new ye(3504,!1)}function WH(t){return new ye(3301,!1)}function jH(t,n){return new ye(3302,!1)}function qH(t){return new ye(3303,!1)}function XH(t,n){return new ye(3400,!1)}function KH(t){return new ye(3401,!1)}function YH(t){return new ye(3402,!1)}function QH(t,n){return new ye(3505,!1)}function Dl(t){switch(t.length){case 0:return new ka;case 1:return t[0];default:return new Vp(t)}}function iO(t,n,e=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(n.forEach(l=>{let c=l.get("offset"),u=c==s,d=u&&a||new Map;l.forEach((p,h)=>{let m=h,g=p;if(h!=="offset")switch(m=t.normalizePropertyName(m,r),g){case Pf:g=e.get(h);break;case ss:g=i.get(h);break;default:g=t.normalizeStyleValue(h,m,g,r);break}d.set(m,g)}),u||o.push(d),a=d,s=c}),r.length)throw Dge(r);return o}function wT(t,n,e,i){switch(n){case"start":t.onStart(()=>i(e&&eO(e,"start",t)));break;case"done":t.onDone(()=>i(e&&eO(e,"done",t)));break;case"destroy":t.onDestroy(()=>i(e&&eO(e,"destroy",t)));break}}function eO(t,n,e){let i=e.totalTime,r=!!e.disabled,o=CT(t.element,t.triggerName,t.fromState,t.toState,n||t.phaseName,i??t.totalTime,r),s=t._data;return s!=null&&(o._data=s),o}function CT(t,n,e,i,r="",o=0,s){return{element:t,triggerName:n,fromState:e,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function po(t,n,e){let i=t.get(n);return i||t.set(n,i=e),i}function rO(t){let n=t.indexOf(":"),e=t.substring(1,n),i=t.slice(n+1);return[e,i]}var Age=typeof document>"u"?null:document.documentElement;function TT(t){let n=t.parentNode||t.host||null;return n===Age?null:n}function Nge(t){return t.substring(1,6)=="ebkit"}var Gp=null,kH=!1;function ZH(t){Gp||(Gp=Mge()||{},kH=Gp.style?"WebkitAppearance"in Gp.style:!1);let n=!0;return Gp.style&&!Nge(t)&&(n=t in Gp.style,!n&&kH&&(n="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Gp.style)),n}function Mge(){return typeof document<"u"?document.body:null}function oO(t,n){for(;n;){if(n===t)return!0;n=TT(n)}return!1}function sO(t,n,e){if(e)return Array.from(t.querySelectorAll(n));let i=t.querySelector(n);return i?[i]:[]}var Rge=1e3,aO="{{",Oge="}}",lO="ng-enter",ST="ng-leave",Zx="ng-trigger",Jx=".ng-trigger",cO="ng-animating",kT=".ng-animating";function Ia(t){if(typeof t=="number")return t;let n=t.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:tO(parseFloat(n[1]),n[2])}function tO(t,n){switch(n){case"s":return t*Rge;default:return t}}function ev(t,n,e){return t.hasOwnProperty("duration")?t:Fge(t,n,e)}function Fge(t,n,e){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof t=="string"){let a=t.match(i);if(a===null)return n.push(SH(t)),{duration:0,delay:0,easing:""};r=tO(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=tO(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=t;if(!e){let a=!1,l=n.length;r<0&&(n.push(Tge()),a=!0),o<0&&(n.push(Sge()),a=!0),a&&n.splice(l,0,SH(t))}return{duration:r,delay:o,easing:s}}function JH(t){return t.length?t[0]instanceof Map?t:t.map(n=>new Map(Object.entries(n))):[]}function zs(t,n,e){n.forEach((i,r)=>{let o=IT(r);e&&!e.has(r)&&e.set(r,t.style[o]),t.style[o]=i})}function Eu(t,n){n.forEach((e,i)=>{let r=IT(i);t.style[r]=""})}function $f(t){return Array.isArray(t)?t.length==1?t[0]:TH(t):t}function eW(t,n,e){let i=n.params||{},r=uO(t);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||e.push(kge(o))})}var nO=new RegExp(`${aO}\\s*(.+?)\\s*${Oge}`,"g");function uO(t){let n=[];if(typeof t=="string"){let e;for(;e=nO.exec(t);)n.push(e[1]);nO.lastIndex=0}return n}function Vf(t,n,e){let i=`${t}`,r=i.replace(nO,(o,s)=>{let a=n[s];return a==null&&(e.push(Ige(s)),a=""),a.toString()});return r==i?t:r}var Lge=/-+([a-z0-9])/g;function IT(t){return t.replace(Lge,(...n)=>n[1].toUpperCase())}function tW(t,n){return t===0||n===0}function nW(t,n,e){if(e.size&&n.length){let i=n[0],r=[];if(e.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<n.length;o++){let s=n[o];r.forEach(a=>s.set(a,ET(t,a)))}}return n}function ho(t,n,e){switch(n.type){case Mt.Trigger:return t.visitTrigger(n,e);case Mt.State:return t.visitState(n,e);case Mt.Transition:return t.visitTransition(n,e);case Mt.Sequence:return t.visitSequence(n,e);case Mt.Group:return t.visitGroup(n,e);case Mt.Animate:return t.visitAnimate(n,e);case Mt.Keyframes:return t.visitKeyframes(n,e);case Mt.Style:return t.visitStyle(n,e);case Mt.Reference:return t.visitReference(n,e);case Mt.AnimateChild:return t.visitAnimateChild(n,e);case Mt.AnimateRef:return t.visitAnimateRef(n,e);case Mt.Query:return t.visitQuery(n,e);case Mt.Stagger:return t.visitStagger(n,e);default:throw Ege(n.type)}}function ET(t,n){return window.getComputedStyle(t)[n]}var IO=(()=>{class t{validateStyleProperty(e){return ZH(e)}containsElement(e,i){return oO(e,i)}getParentElement(e){return TT(e)}query(e,i,r){return sO(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,o,s,a=[],l){return new ka(r,o)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})(),Hp=class{static NOOP=new IO},Wp=class{};var Pge=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),RT=class extends Wp{normalizePropertyName(n,e){return IT(n)}normalizeStyleValue(n,e,i,r){let o="",s=i.toString().trim();if(Pge.has(e)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(IH(n,i))}return s+o}};var OT="*";function $ge(t,n){let e=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>Vge(i,e,n)):e.push(t),e}function Vge(t,n,e){if(t[0]==":"){let l=Bge(t,e);if(typeof l=="function"){n.push(l);return}t=l}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return e.push(VH(t)),n;let r=i[1],o=i[2],s=i[3];n.push(iW(r,s));let a=r==OT&&s==OT;o[0]=="<"&&!a&&n.push(iW(s,r))}function Bge(t,n){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return n.push(BH(t)),"* => *"}}var DT=new Set(["true","1"]),AT=new Set(["false","0"]);function iW(t,n){let e=DT.has(t)||AT.has(t),i=DT.has(n)||AT.has(n);return(r,o)=>{let s=t==OT||t==r,a=n==OT||n==o;return!s&&e&&typeof r=="boolean"&&(s=r?DT.has(t):AT.has(t)),!a&&i&&typeof o=="boolean"&&(a=o?DT.has(n):AT.has(n)),s&&a}}var hW=":self",zge=new RegExp(`s*${hW}s*,?`,"g");function mW(t,n,e,i){return new gO(t).build(n,e,i)}var rW="",gO=class{_driver;constructor(n){this._driver=n}build(n,e,i){let r=new yO(e);return this._resetContextStyleTimingState(r),ho(this,$f(n),r)}_resetContextStyleTimingState(n){n.currentQuerySelector=rW,n.collectedStyles=new Map,n.collectedStyles.set(rW,new Map),n.currentTime=0}visitTrigger(n,e){let i=e.queryCount=0,r=e.depCount=0,o=[],s=[];return n.name.charAt(0)=="@"&&e.errors.push(EH()),n.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==Mt.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,e))}),l.name=c}else if(a.type==Mt.Transition){let l=this.visitTransition(a,e);i+=l.queryCount,r+=l.depCount,s.push(l)}else e.errors.push(DH())}),{type:Mt.Trigger,name:n.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(n,e){let i=this.visitStyle(n.styles,e),r=n.options&&n.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{uO(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&e.errors.push(AH(n.name,[...o.values()]))}return{type:Mt.State,name:n.name,style:i,options:r?{params:r}:null}}visitTransition(n,e){e.queryCount=0,e.depCount=0;let i=ho(this,$f(n.animation),e),r=$ge(n.expr,e.errors);return{type:Mt.Transition,matchers:r,animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Up(n.options)}}visitSequence(n,e){return{type:Mt.Sequence,steps:n.steps.map(i=>ho(this,i,e)),options:Up(n.options)}}visitGroup(n,e){let i=e.currentTime,r=0,o=n.steps.map(s=>{e.currentTime=i;let a=ho(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:Mt.Group,steps:o,options:Up(n.options)}}visitAnimate(n,e){let i=Wge(n.timings,e.errors);e.currentAnimateTimings=i;let r,o=n.styles?n.styles:Hr({});if(o.type==Mt.Keyframes)r=this.visitKeyframes(o,e);else{let s=n.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=Hr(c)}e.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:Mt.Animate,timings:i,style:r,options:null}}visitStyle(n,e){let i=this._makeStyleAst(n,e);return this._validateStyleAst(i,e),i}_makeStyleAst(n,e){let i=[],r=Array.isArray(n.styles)?n.styles:[n.styles];for(let a of r)typeof a=="string"?a===ss?i.push(a):e.errors.push(NH(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(aO)>=0){o=!0;break}}}),{type:Mt.Style,styles:i,easing:s,offset:n.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(n,e){let i=e.currentAnimateTimings,r=e.currentTime,o=e.currentTime;i&&o>0&&(o-=i.duration+i.delay),n.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l),d=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(e.errors.push(MH(l,u.startTime,u.endTime,o,r)),d=!1),o=u.startTime),d&&c.set(l,{startTime:o,endTime:r}),e.options&&eW(a,e.options,e.errors)})})}visitKeyframes(n,e){let i={type:Mt.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(RH()),i;let r=1,o=0,s=[],a=!1,l=!1,c=0,u=n.steps.map(y=>{let b=this._makeStyleAst(y,e),v=b.offset!=null?b.offset:Hge(b.styles),_=0;return v!=null&&(o++,_=b.offset=v),l=l||_<0||_>1,a=a||_<c,c=_,s.push(_),b});l&&e.errors.push(OH()),a&&e.errors.push(FH());let d=n.steps.length,p=0;o>0&&o<d?e.errors.push(LH()):o==0&&(p=r/(d-1));let h=d-1,m=e.currentTime,g=e.currentAnimateTimings,f=g.duration;return u.forEach((y,b)=>{let v=p>0?b==h?1:p*b:s[b],_=v*f;e.currentTime=m+g.delay+_,g.duration=_,this._validateStyleAst(y,e),y.offset=v,i.styles.push(y)}),i}visitReference(n,e){return{type:Mt.Reference,animation:ho(this,$f(n.animation),e),options:Up(n.options)}}visitAnimateChild(n,e){return e.depCount++,{type:Mt.AnimateChild,options:Up(n.options)}}visitAnimateRef(n,e){return{type:Mt.AnimateRef,animation:this.visitReference(n.animation,e),options:Up(n.options)}}visitQuery(n,e){let i=e.currentQuerySelector,r=n.options||{};e.queryCount++,e.currentQuery=n;let[o,s]=Gge(n.selector);e.currentQuerySelector=i.length?i+" "+o:o,po(e.collectedStyles,e.currentQuerySelector,new Map);let a=ho(this,$f(n.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:Mt.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:n.selector,options:Up(n.options)}}visitStagger(n,e){e.currentQuery||e.errors.push(PH());let i=n.timings==="full"?{duration:0,delay:0,easing:"full"}:ev(n.timings,e.errors,!0);return{type:Mt.Stagger,animation:ho(this,$f(n.animation),e),timings:i,options:null}}};function Gge(t){let n=!!t.split(/\s*,\s*/).find(e=>e==hW);return n&&(t=t.replace(zge,"")),t=t.replace(/@\*/g,Jx).replace(/@\w+/g,e=>Jx+"-"+e.slice(1)).replace(/:animating/g,kT),[t,n]}function Uge(t){return t?ie({},t):null}var yO=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}};function Hge(t){if(typeof t=="string")return null;let n=null;if(Array.isArray(t))t.forEach(e=>{if(e instanceof Map&&e.has("offset")){let i=e;n=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let e=t;n=parseFloat(e.get("offset")),e.delete("offset")}return n}function Wge(t,n){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let o=ev(t,n).duration;return dO(o,0,"")}let e=t;if(e.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=dO(0,0,"");return o.dynamic=!0,o.strValue=e,o}let r=ev(e,n);return dO(r.duration,r.delay,r.easing)}function Up(t){return t?(t=ie({},t),t.params&&(t.params=Uge(t.params))):t={},t}function dO(t,n,e){return{duration:t,delay:n,easing:e}}function EO(t,n,e,i,r,o,s=null,a=!1){return{type:1,element:t,keyframes:n,preStyleProps:e,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var nv=class{_map=new Map;get(n){return this._map.get(n)||[]}append(n,e){let i=this._map.get(n);i||this._map.set(n,i=[]),i.push(...e)}has(n){return this._map.has(n)}clear(){this._map.clear()}},jge=1,qge=":enter",Xge=new RegExp(qge,"g"),Kge=":leave",Yge=new RegExp(Kge,"g");function fW(t,n,e,i,r,o=new Map,s=new Map,a,l,c=[]){return new bO().buildKeyframes(t,n,e,i,r,o,s,a,l,c)}var bO=class{buildKeyframes(n,e,i,r,o,s,a,l,c,u=[]){c=c||new nv;let d=new xO(n,e,c,r,o,u,[]);d.options=l;let p=l.delay?Ia(l.delay):0;d.currentTimeline.delayNextStep(p),d.currentTimeline.setStyles([s],null,d.errors,l),ho(this,i,d);let h=d.timelines.filter(m=>m.containsAnimation());if(h.length&&a.size){let m;for(let g=h.length-1;g>=0;g--){let f=h[g];if(f.element===e){m=f;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,d.errors,l)}return h.length?h.map(m=>m.buildKeyframes()):[EO(e,[],[],[],0,p,"",!1)]}visitTrigger(n,e){}visitState(n,e){}visitTransition(n,e){}visitAnimateChild(n,e){let i=e.subInstructions.get(e.element);if(i){let r=e.createSubContext(n.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=n}visitAnimateRef(n,e){let i=e.createSubContext(n.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],e,i),this.visitReference(n.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=n}_applyAnimationRefDelays(n,e,i){for(let r of n){let o=r?.delay;if(o){let s=typeof o=="number"?o:Ia(Vf(o,r?.params??{},e.errors));i.delayNextStep(s)}}}_visitSubInstructions(n,e,i){let o=e.currentTimeline.currentTime,s=i.duration!=null?Ia(i.duration):null,a=i.delay!=null?Ia(i.delay):null;return s!==0&&n.forEach(l=>{let c=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(n,e){e.updateOptions(n.options,!0),ho(this,n.animation,e),e.previousNode=n}visitSequence(n,e){let i=e.subContextCount,r=e,o=n.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==Mt.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=FT);let s=Ia(o.delay);r.delayNextStep(s)}n.steps.length&&(n.steps.forEach(s=>ho(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=n}visitGroup(n,e){let i=[],r=e.currentTimeline.currentTime,o=n.options&&n.options.delay?Ia(n.options.delay):0;n.steps.forEach(s=>{let a=e.createSubContext(n.options);o&&a.delayNextStep(o),ho(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=n}_visitTiming(n,e){if(n.dynamic){let i=n.strValue,r=e.params?Vf(i,e.params,e.errors):i;return ev(r,e.errors)}else return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,e){let i=e.currentAnimateTimings=this._visitTiming(n.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());let o=n.style;o.type==Mt.Keyframes?this.visitKeyframes(o,e):(e.incrementTime(i.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=n}visitStyle(n,e){let i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||n.easing;n.isEmptyStep?i.applyEmptyStep(o):i.setStyles(n.styles,o,e.errors,e.options),e.previousNode=n}visitKeyframes(n,e){let i=e.currentAnimateTimings,r=e.currentTimeline.duration,o=i.duration,a=e.createSubContext().currentTimeline;a.easing=i.easing,n.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=n}visitQuery(n,e){let i=e.currentTimeline.currentTime,r=n.options||{},o=r.delay?Ia(r.delay):0;o&&(e.previousNode.type===Mt.Style||i==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=FT);let s=i,a=e.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;let d=e.createSubContext(n.options,c);o&&d.delayNextStep(o),c===e.element&&(l=d.currentTimeline),ho(this,n.animation,d),d.currentTimeline.applyStylesToKeyframe();let p=d.currentTimeline.currentTime;s=Math.max(s,p)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=n}visitStagger(n,e){let i=e.parentContext,r=e.currentTimeline,o=n.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1),l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let u=e.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;ho(this,n.animation,e),e.previousNode=n,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},FT={},xO=class t{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=FT;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,e,i,r,o,s,a,l){this._driver=n,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=l||new LT(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,e){if(!n)return;let i=n,r=this.options;i.duration!=null&&(r.duration=Ia(i.duration)),i.delay!=null&&(r.delay=Ia(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Vf(o[a],s,this.errors))})}}_copyOptions(){let n={};if(this.options){let e=this.options.params;if(e){let i=n.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return n}createSubContext(n=null,e,i){let r=e||this.element,o=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(n),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(n){return this.previousNode=FT,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,e,i){let r={duration:e??n.duration,delay:this.currentTimeline.currentTime+(i??0)+n.delay,easing:""},o=new vO(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,r,n.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,e,i,r,o,s){let a=[];if(r&&a.push(this.element),n.length>0){n=n.replace(Xge,"."+this._enterClassName),n=n.replace(Yge,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,n,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&s.push($H(e)),a}},LT=class t{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,e,i,r){this._driver=n,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){let e=this._keyframes.size===1&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+n),e&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,e){return this.applyStylesToKeyframe(),new t(this._driver,n,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=jge,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,e){this._localTimelineStyles.set(n,e),this._globalTimelineStyles.set(n,e),this._styleSummary.set(n,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[e,i]of this._globalTimelineStyles)this._backFill.set(e,i||ss),this._currentKeyframe.set(e,ss);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,e,i,r){e&&this._previousKeyframe.set("easing",e);let o=r&&r.params||{},s=Qge(n,this._globalTimelineStyles);for(let[a,l]of s){let c=Vf(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ss),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((n,e)=>{this._currentKeyframe.set(e,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,n)}))}snapshotCurrentStyles(){for(let[n,e]of this._localTimelineStyles)this._pendingStyles.set(n,e),this._updateStyle(n,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let n=[];for(let e in this._currentKeyframe)n.push(e);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((e,i)=>{let r=this._styleSummary.get(i);(!r||e.time>r.time)&&this._updateStyle(i,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();let n=new Set,e=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,d)=>{u===Pf?n.add(d):u===ss&&e.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});let o=[...n.values()],s=[...e.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return EO(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},vO=class extends LT{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,e,i,r,o,s,a=!1){super(n,e,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){let o=[],s=i+e,a=e/s,l=new Map(n[0]);l.set("offset",0),o.push(l);let c=new Map(n[0]);c.set("offset",oW(a)),o.push(c);let u=n.length-1;for(let d=1;d<=u;d++){let p=new Map(n[d]),h=p.get("offset"),m=e+h*i;p.set("offset",oW(m/s)),o.push(p)}i=s,e=0,r="",n=o}return EO(this.element,n,this.preStyleProps,this.postStyleProps,i,e,r,!0)}};function oW(t,n=3){let e=Math.pow(10,n-1);return Math.round(t*e)/e}function Qge(t,n){let e=new Map,i;return t.forEach(r=>{if(r==="*"){i??=n.keys();for(let o of i)e.set(o,ss)}else for(let[o,s]of r)e.set(o,s)}),e}function sW(t,n,e,i,r,o,s,a,l,c,u,d,p){return{type:0,element:t,triggerName:n,isRemovalTransition:r,fromState:e,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:p}}var pO={},PT=class{_triggerName;ast;_stateStyles;constructor(n,e,i){this._triggerName=n,this.ast=e,this._stateStyles=i}match(n,e,i,r){return Zge(this.ast.matchers,n,e,i,r)}buildStyles(n,e,i){let r=this._stateStyles.get("*");return n!==void 0&&(r=this._stateStyles.get(n?.toString())||r),r?r.buildStyles(e,i):new Map}build(n,e,i,r,o,s,a,l,c,u){let d=[],p=this.ast.options&&this.ast.options.params||pO,h=a&&a.params||pO,m=this.buildStyles(i,h,d),g=l&&l.params||pO,f=this.buildStyles(r,g,d),y=new Set,b=new Map,v=new Map,_=r==="void",w={params:gW(g,p),delay:this.ast.options?.delay},T=u?[]:fW(n,e,this.ast.animation,o,s,m,f,w,c,d),D=0;return T.forEach(N=>{D=Math.max(N.duration+N.delay,D)}),d.length?sW(e,this._triggerName,i,r,_,m,f,[],[],b,v,D,d):(T.forEach(N=>{let O=N.element,P=po(b,O,new Set);N.preStyleProps.forEach(K=>P.add(K));let B=po(v,O,new Set);N.postStyleProps.forEach(K=>B.add(K)),O!==e&&y.add(O)}),sW(e,this._triggerName,i,r,_,m,f,T,[...y.values()],b,v,D))}};function Zge(t,n,e,i,r){return t.some(o=>o(n,e,i,r))}function gW(t,n){let e=ie({},n);return Object.entries(t).forEach(([i,r])=>{r!=null&&(e[i]=r)}),e}var _O=class{styles;defaultParams;normalizer;constructor(n,e,i){this.styles=n,this.defaultParams=e,this.normalizer=i}buildStyles(n,e){let i=new Map,r=gW(n,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Vf(s,r,e));let l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),i.set(a,s)})}),i}};function Jge(t,n,e){return new wO(t,n,e)}var wO=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,e,i){this.name=n,this.ast=e,this._normalizer=i,e.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new _O(r.style,o,i))}),aW(this.states,"true","1"),aW(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new PT(n,r,this.states))}),this.fallbackTransition=eye(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,e,i,r){return this.transitionFactories.find(s=>s.match(n,e,i,r))||null}matchStyles(n,e,i){return this.fallbackTransition.buildStyles(n,e,i)}};function eye(t,n,e){let i=[(s,a)=>!0],r={type:Mt.Sequence,steps:[],options:null},o={type:Mt.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new PT(t,o,n)}function aW(t,n,e){t.has(n)?t.has(e)||t.set(e,t.get(n)):t.has(e)&&t.set(n,t.get(e))}var tye=new nv,CO=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,e,i){this.bodyNode=n,this._driver=e,this._normalizer=i}register(n,e){let i=[],r=[],o=mW(this._driver,e,i,r);if(i.length)throw GH(i);this._animations.set(n,o)}_buildPlayer(n,e,i){let r=n.element,o=iO(this._normalizer,n.keyframes,e,i);return this._driver.animate(r,o,n.duration,n.delay,n.easing,[],!0)}create(n,e,i={}){let r=[],o=this._animations.get(n),s,a=new Map;if(o?(s=fW(this._driver,e,o,lO,ST,new Map,new Map,i,tye,r),s.forEach(u=>{let d=po(a,u.element,new Map);u.postStyleProps.forEach(p=>d.set(p,null))})):(r.push(UH()),s=[]),r.length)throw HH(r);a.forEach((u,d)=>{u.forEach((p,h)=>{u.set(h,this._driver.computeStyle(d,h,ss))})});let l=s.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=Dl(l);return this._playersById.set(n,c),c.onDestroy(()=>this.destroy(n)),this.players.push(c),c}destroy(n){let e=this._getPlayer(n);e.destroy(),this._playersById.delete(n);let i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(n){let e=this._playersById.get(n);if(!e)throw WH(n);return e}listen(n,e,i,r){let o=CT(e,"","","");return wT(this._getPlayer(n),i,o,r),()=>{}}command(n,e,i,r){if(i=="register"){this.register(n,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(n,e,s);return}let o=this._getPlayer(n);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(n);break}}},lW="ng-animate-queued",nye=".ng-animate-queued",hO="ng-animate-disabled",iye=".ng-animate-disabled",rye="ng-star-inserted",oye=".ng-star-inserted",sye=[],yW={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},aye={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Gs="__ng_removed",iv=class{namespaceId;value;options;get params(){return this.options.params}constructor(n,e=""){this.namespaceId=e;let i=n&&n.hasOwnProperty("value"),r=i?n.value:n;if(this.value=cye(r),i){let o=n,{value:s}=o,a=mA(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){let e=n.params;if(e){let i=this.options.params;Object.keys(e).forEach(r=>{i[r]==null&&(i[r]=e[r])})}}},tv="void",mO=new iv(tv),TO=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,e,i){this.id=n,this.hostElement=e,this._engine=i,this._hostClassName="ng-tns-"+n,as(e,this._hostClassName)}listen(n,e,i,r){if(!this._triggers.has(e))throw jH(i,e);if(i==null||i.length==0)throw qH(e);if(!uye(i))throw XH(i,e);let o=po(this._elementListeners,n,[]),s={name:e,phase:i,callback:r};o.push(s);let a=po(this._engine.statesByElement,n,new Map);return a.has(e)||(as(n,Zx),as(n,Zx+"-"+e),a.set(e,mO)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(n,e){return this._triggers.has(n)?!1:(this._triggers.set(n,e),!0)}_getTrigger(n){let e=this._triggers.get(n);if(!e)throw KH(n);return e}trigger(n,e,i,r=!0){let o=this._getTrigger(e),s=new rv(this.id,e,n),a=this._engine.statesByElement.get(n);a||(as(n,Zx),as(n,Zx+"-"+e),this._engine.statesByElement.set(n,a=new Map));let l=a.get(e),c=new iv(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=mO),!(c.value===tv)&&l.value===c.value){if(!hye(l.params,c.params)){let g=[],f=o.matchStyles(l.value,l.params,g),y=o.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{Eu(n,f),zs(n,y)})}return}let p=po(this._engine.playersByElement,n,[]);p.forEach(g=>{g.namespaceId==this.id&&g.triggerName==e&&g.queued&&g.destroy()});let h=o.matchTransition(l.value,c.value,n,c.params),m=!1;if(!h){if(!r)return;h=o.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:e,transition:h,fromState:l,toState:c,player:s,isFallbackTransition:m}),m||(as(n,lW),s.onStart(()=>{Bf(n,lW)})),s.onDone(()=>{let g=this.players.indexOf(s);g>=0&&this.players.splice(g,1);let f=this._engine.playersByElement.get(n);if(f){let y=f.indexOf(s);y>=0&&f.splice(y,1)}}),this.players.push(s),p.push(s),s}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(e=>e.delete(n)),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);let e=this._engine.playersByElement.get(n);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,e){let i=this._engine.driver.query(n,Jx,!0);i.forEach(r=>{if(r[Gs])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(n,e,i,r){let o=this._engine.statesByElement.get(n),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(n,c,tv,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,n,!0,e,s),i&&Dl(a).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){let e=this._elementListeners.get(n),i=this._engine.statesByElement.get(n);if(e&&i){let r=new Set;e.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||mO,u=new iv(tv),d=new rv(this.id,s,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(n,e){let i=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,e),this.triggerLeaveAnimation(n,e,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(n):[];if(o&&o.length)r=!0;else{let s=n;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(n),r)i.markElementAsRemoved(this.id,n,!1,e);else{let o=n[Gs];(!o||o===yW)&&(i.afterFlush(()=>this.clearElementCache(n)),i.destroyInnerAnimations(n),i._onRemovalComplete(n,e))}}insertNode(n,e){as(n,this._hostClassName)}drainQueuedTransitions(n){let e=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=CT(o,i.triggerName,i.fromState.value,i.toState.value);l._data=n,wT(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(n){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}},SO=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,e)=>{};_onRemovalComplete(n,e){this.onRemovalComplete(n,e)}constructor(n,e,i){this.bodyNode=n,this.driver=e,this._normalizer=i}get queuedPlayers(){let n=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&n.push(i)})}),n}createNamespace(n,e){let i=new TO(n,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[n]=i}_balanceNamespaceList(n,e){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,n),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(n)}else i.push(n);return r.set(e,n),n}register(n,e){let i=this._namespaceLookup[n];return i||(i=this.createNamespace(n,e)),i}registerTrigger(n,e,i){let r=this._namespaceLookup[n];r&&r.register(e,i)&&this.totalAnimations++}destroy(n,e){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(n);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(e),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){let e=new Set,i=this.statesByElement.get(n);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}}return e}trigger(n,e,i,r){if(NT(e)){let o=this._fetchNamespace(n);if(o)return o.trigger(e,i,r),!0}return!1}insertNode(n,e,i,r){if(!NT(e))return;let o=e[Gs];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(n){let s=this._fetchNamespace(n);s&&s.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,e){e?this.disabledNodes.has(n)||(this.disabledNodes.add(n),as(n,hO)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Bf(n,hO))}removeNode(n,e,i){if(NT(e)){let r=n?this._fetchNamespace(n):null;r?r.removeNode(e,i):this.markElementAsRemoved(n,e,!1,i);let o=this.namespacesByHostElement.get(e);o&&o.id!==n&&o.removeNode(e,i)}else this._onRemovalComplete(e,i)}markElementAsRemoved(n,e,i,r,o){this.collectedLeaveElements.push(e),e[Gs]={namespaceId:n,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(n,e,i,r,o){return NT(e)?this._fetchNamespace(n).listen(e,i,r,o):()=>{}}_buildInstruction(n,e,i,r,o){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,i,r,n.fromState.options,n.toState.options,e,o)}destroyInnerAnimations(n){let e=this.driver.query(n,Jx,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(n,kT,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(n){let e=this.playersByElement.get(n);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(n){let e=this.playersByQueriedElement.get(n);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Dl(this.players).onDone(()=>n());n()})}processLeaveNode(n){let e=n[Gs];if(e&&e.setForRemoval){if(n[Gs]=yW,e.namespaceId){this.destroyInnerAnimations(n);let i=this._fetchNamespace(e.namespaceId);i&&i.clearElementCache(n)}this._onRemovalComplete(n,e.setForRemoval)}n.classList?.contains(hO)&&this.markElementAsDisabled(n,!1),this.driver.query(n,iye,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(n=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];as(r,rye)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{e=this._flushAnimations(i,n)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],e.length?Dl(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(n){throw YH(n)}_flushAnimations(n,e){let i=new nv,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(U=>{u.add(U);let j=this.driver.query(U,nye,!0);for(let q=0;q<j.length;q++)u.add(j[q])});let d=this.bodyNode,p=Array.from(this.statesByElement.keys()),h=dW(p,this.collectedEnterElements),m=new Map,g=0;h.forEach((U,j)=>{let q=lO+g++;m.set(j,q),U.forEach(Q=>as(Q,q))});let f=[],y=new Set,b=new Set;for(let U=0;U<this.collectedLeaveElements.length;U++){let j=this.collectedLeaveElements[U],q=j[Gs];q&&q.setForRemoval&&(f.push(j),y.add(j),q.hasAnimation?this.driver.query(j,oye,!0).forEach(Q=>y.add(Q)):b.add(j))}let v=new Map,_=dW(p,Array.from(y));_.forEach((U,j)=>{let q=ST+g++;v.set(j,q),U.forEach(Q=>as(Q,q))}),n.push(()=>{h.forEach((U,j)=>{let q=m.get(j);U.forEach(Q=>Bf(Q,q))}),_.forEach((U,j)=>{let q=v.get(j);U.forEach(Q=>Bf(Q,q))}),f.forEach(U=>{this.processLeaveNode(U)})});let w=[],T=[];for(let U=this._namespaceList.length-1;U>=0;U--)this._namespaceList[U].drainQueuedTransitions(e).forEach(q=>{let Q=q.player,oe=q.element;if(w.push(Q),this.collectedEnterElements.length){let ve=oe[Gs];if(ve&&ve.setForMove){if(ve.previousTriggersValues&&ve.previousTriggersValues.has(q.triggerName)){let Ue=ve.previousTriggersValues.get(q.triggerName),se=this.statesByElement.get(q.element);if(se&&se.has(q.triggerName)){let we=se.get(q.triggerName);we.value=Ue,se.set(q.triggerName,we)}}Q.destroy();return}}let ae=!d||!this.driver.containsElement(d,oe),de=v.get(oe),fe=m.get(oe),ge=this._buildInstruction(q,i,fe,de,ae);if(ge.errors&&ge.errors.length){T.push(ge);return}if(ae){Q.onStart(()=>Eu(oe,ge.fromStyles)),Q.onDestroy(()=>zs(oe,ge.toStyles)),r.push(Q);return}if(q.isFallbackTransition){Q.onStart(()=>Eu(oe,ge.fromStyles)),Q.onDestroy(()=>zs(oe,ge.toStyles)),r.push(Q);return}let xe=[];ge.timelines.forEach(ve=>{ve.stretchStartingKeyframe=!0,this.disabledNodes.has(ve.element)||xe.push(ve)}),ge.timelines=xe,i.append(oe,ge.timelines);let Ne={instruction:ge,player:Q,element:oe};s.push(Ne),ge.queriedElements.forEach(ve=>po(a,ve,[]).push(Q)),ge.preStyleProps.forEach((ve,Ue)=>{if(ve.size){let se=l.get(Ue);se||l.set(Ue,se=new Set),ve.forEach((we,Ie)=>se.add(Ie))}}),ge.postStyleProps.forEach((ve,Ue)=>{let se=c.get(Ue);se||c.set(Ue,se=new Set),ve.forEach((we,Ie)=>se.add(Ie))})});if(T.length){let U=[];T.forEach(j=>{U.push(QH(j.triggerName,j.errors))}),w.forEach(j=>j.destroy()),this.reportError(U)}let D=new Map,N=new Map;s.forEach(U=>{let j=U.element;i.has(j)&&(N.set(j,j),this._beforeAnimationBuild(U.player.namespaceId,U.instruction,D))}),r.forEach(U=>{let j=U.element;this._getPreviousPlayers(j,!1,U.namespaceId,U.triggerName,null).forEach(Q=>{po(D,j,[]).push(Q),Q.destroy()})});let O=f.filter(U=>pW(U,l,c)),P=new Map;uW(P,this.driver,b,c,ss).forEach(U=>{pW(U,l,c)&&O.push(U)});let K=new Map;h.forEach((U,j)=>{uW(K,this.driver,new Set(U),l,Pf)}),O.forEach(U=>{let j=P.get(U),q=K.get(U);P.set(U,new Map([...j?.entries()??[],...q?.entries()??[]]))});let X=[],Z=[],te={};s.forEach(U=>{let{element:j,player:q,instruction:Q}=U;if(i.has(j)){if(u.has(j)){q.onDestroy(()=>zs(j,Q.toStyles)),q.disabled=!0,q.overrideTotalTime(Q.totalTime),r.push(q);return}let oe=te;if(N.size>1){let de=j,fe=[];for(;de=de.parentNode;){let ge=N.get(de);if(ge){oe=ge;break}fe.push(de)}fe.forEach(ge=>N.set(ge,oe))}let ae=this._buildAnimation(q.namespaceId,Q,D,o,K,P);if(q.setRealPlayer(ae),oe===te)X.push(q);else{let de=this.playersByElement.get(oe);de&&de.length&&(q.parentPlayer=Dl(de)),r.push(q)}}else Eu(j,Q.fromStyles),q.onDestroy(()=>zs(j,Q.toStyles)),Z.push(q),u.has(j)&&r.push(q)}),Z.forEach(U=>{let j=o.get(U.element);if(j&&j.length){let q=Dl(j);U.setRealPlayer(q)}}),r.forEach(U=>{U.parentPlayer?U.syncPlayerEvents(U.parentPlayer):U.destroy()});for(let U=0;U<f.length;U++){let j=f[U],q=j[Gs];if(Bf(j,ST),q&&q.hasAnimation)continue;let Q=[];if(a.size){let ae=a.get(j);ae&&ae.length&&Q.push(...ae);let de=this.driver.query(j,kT,!0);for(let fe=0;fe<de.length;fe++){let ge=a.get(de[fe]);ge&&ge.length&&Q.push(...ge)}}let oe=Q.filter(ae=>!ae.destroyed);oe.length?dye(this,j,oe):this.processLeaveNode(j)}return f.length=0,X.forEach(U=>{this.players.push(U),U.onDone(()=>{U.destroy();let j=this.players.indexOf(U);this.players.splice(j,1)}),U.play()}),X}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,e,i,r,o){let s=[];if(e){let a=this.playersByQueriedElement.get(n);a&&(s=a)}else{let a=this.playersByElement.get(n);if(a){let l=!o||o==tv;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(n,e,i){let r=e.triggerName,o=e.element,s=e.isRemovalTransition?void 0:n,a=e.isRemovalTransition?void 0:r;for(let l of e.timelines){let c=l.element,u=c!==o,d=po(i,c,[]);this._getPreviousPlayers(c,u,s,a,e.toState).forEach(h=>{let m=h.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),h.destroy(),d.push(h)})}Eu(o,e.fromStyles)}_buildAnimation(n,e,i,r,o,s){let a=e.triggerName,l=e.element,c=[],u=new Set,d=new Set,p=e.timelines.map(m=>{let g=m.element;u.add(g);let f=g[Gs];if(f&&f.removedBeforeQueried)return new ka(m.duration,m.delay);let y=g!==l,b=pye((i.get(g)||sye).map(D=>D.getRealPlayer())).filter(D=>{let N=D;return N.element?N.element===g:!1}),v=o.get(g),_=s.get(g),w=iO(this._normalizer,m.keyframes,v,_),T=this._buildPlayer(m,w,b);if(m.subTimeline&&r&&d.add(g),y){let D=new rv(n,a,g);D.setRealPlayer(T),c.push(D)}return T});c.forEach(m=>{po(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>lye(this.playersByQueriedElement,m.element,m))}),u.forEach(m=>as(m,cO));let h=Dl(p);return h.onDestroy(()=>{u.forEach(m=>Bf(m,cO)),zs(l,e.toStyles)}),d.forEach(m=>{po(r,m,[]).push(h)}),h}_buildPlayer(n,e,i){return e.length>0?this.driver.animate(n.element,e,n.duration,n.delay,n.easing,i):new ka(n.duration,n.delay)}},rv=class{namespaceId;triggerName;element;_player=new ka;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,e,i){this.namespaceId=n,this.triggerName=e,this.element=i}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((e,i)=>{e.forEach(r=>wT(n,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){let e=this._player;e.triggerCallback&&n.onStart(()=>e.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,e){po(this._queuedCallbacks,n,[]).push(e)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){let e=this._player;e.triggerCallback&&e.triggerCallback(n)}};function lye(t,n,e){let i=t.get(n);if(i){if(i.length){let r=i.indexOf(e);i.splice(r,1)}i.length==0&&t.delete(n)}return i}function cye(t){return t??null}function NT(t){return t&&t.nodeType===1}function uye(t){return t=="start"||t=="done"}function cW(t,n){let e=t.style.display;return t.style.display=n??"none",e}function uW(t,n,e,i,r){let o=[];e.forEach(l=>o.push(cW(l)));let s=[];i.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let p=n.computeStyle(c,d,r);u.set(d,p),(!p||p.length==0)&&(c[Gs]=aye,s.push(c))}),t.set(c,u)});let a=0;return e.forEach(l=>cW(l,o[a++])),s}function dW(t,n){let e=new Map;if(t.forEach(a=>e.set(a,[])),n.length==0)return e;let i=1,r=new Set(n),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return e.has(c)?l=c:r.has(c)?l=i:l=s(c),o.set(a,l),l}return n.forEach(a=>{let l=s(a);l!==i&&e.get(l).push(a)}),e}function as(t,n){t.classList?.add(n)}function Bf(t,n){t.classList?.remove(n)}function dye(t,n,e){Dl(e).onDone(()=>t.processLeaveNode(n))}function pye(t){let n=[];return bW(t,n),n}function bW(t,n){for(let e=0;e<t.length;e++){let i=t[e];i instanceof Vp?bW(i.players,n):n.push(i)}}function hye(t,n){let e=Object.keys(t),i=Object.keys(n);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){let o=e[r];if(!n.hasOwnProperty(o)||t[o]!==n[o])return!1}return!0}function pW(t,n,e){let i=e.get(t);if(!i)return!1;let r=n.get(t);return r?i.forEach(o=>r.add(o)):n.set(t,i),e.delete(t),!0}var zf=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,e)=>{};constructor(n,e,i){this._driver=e,this._normalizer=i,this._transitionEngine=new SO(n.body,e,i),this._timelineEngine=new CO(n.body,e,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(n,e,i,r,o){let s=n+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],u=mW(this._driver,o,l,c);if(l.length)throw zH(r,l);a=Jge(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(n,e){this._transitionEngine.register(n,e)}destroy(n,e){this._transitionEngine.destroy(n,e)}onInsert(n,e,i,r){this._transitionEngine.insertNode(n,e,i,r)}onRemove(n,e,i){this._transitionEngine.removeNode(n,e,i)}disableAnimations(n,e){this._transitionEngine.markElementAsDisabled(n,e)}process(n,e,i,r){if(i.charAt(0)=="@"){let[o,s]=rO(i),a=r;this._timelineEngine.command(o,e,s,a)}else this._transitionEngine.trigger(n,e,i,r)}listen(n,e,i,r,o){if(i.charAt(0)=="@"){let[s,a]=rO(i);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(n,e,i,r,o)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}};function mye(t,n){let e=null,i=null;return Array.isArray(n)&&n.length?(e=fO(n[0]),n.length>1&&(i=fO(n[n.length-1]))):n instanceof Map&&(e=fO(n)),e||i?new fye(t,e,i):null}var fye=(()=>{class t{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r;let o=t.initialStylesByElement.get(e);o||t.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&zs(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(zs(this._element,this._initialStyles),this._endStyles&&(zs(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Eu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Eu(this._element,this._endStyles),this._endStyles=null),zs(this._element,this._initialStyles),this._state=3)}}return t})();function fO(t){let n=null;return t.forEach((e,i)=>{gye(i)&&(n=n||new Map,n.set(i,e))}),n}function gye(t){return t==="display"||t==="position"}var $T=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,e,i,r){this.element=n,this.keyframes=e,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){let e=[];return n.forEach(i=>{e.push(Object.fromEntries(i))}),e}_triggerWebAnimation(n,e,i){return n.animate(this._convertKeyframesToObject(e),i)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&n.set(r,this._finished?i:ET(this.element,r))}),this.currentSnapshot=n}triggerCallback(n){let e=n==="start"?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}},VT=class{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,e){return oO(n,e)}getParentElement(n){return TT(n)}query(n,e,i){return sO(n,e,i)}computeStyle(n,e,i){return ET(n,e)}animate(n,e,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let c=new Map,u=s.filter(h=>h instanceof $T);tW(i,r)&&u.forEach(h=>{h.currentSnapshot.forEach((m,g)=>c.set(g,m))});let d=JH(e).map(h=>new Map(h));d=nW(n,d,c);let p=mye(n,d);return new $T(n,d,l,p)}};var MT="@",xW="@.disabled",BT=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,e,i,r){this.namespaceId=n,this.delegate=e,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,e){return this.delegate.createElement(n,e)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,e){this.delegate.appendChild(n,e),this.engine.onInsert(this.namespaceId,e,n,!1)}insertBefore(n,e,i,r=!0){this.delegate.insertBefore(n,e,i),this.engine.onInsert(this.namespaceId,e,n,r)}removeChild(n,e,i){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(n,e){return this.delegate.selectRootElement(n,e)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,e,i,r){this.delegate.setAttribute(n,e,i,r)}removeAttribute(n,e,i){this.delegate.removeAttribute(n,e,i)}addClass(n,e){this.delegate.addClass(n,e)}removeClass(n,e){this.delegate.removeClass(n,e)}setStyle(n,e,i,r){this.delegate.setStyle(n,e,i,r)}removeStyle(n,e,i){this.delegate.removeStyle(n,e,i)}setProperty(n,e,i){e.charAt(0)==MT&&e==xW?this.disableAnimations(n,!!i):this.delegate.setProperty(n,e,i)}setValue(n,e){this.delegate.setValue(n,e)}listen(n,e,i,r){return this.delegate.listen(n,e,i,r)}disableAnimations(n,e){this.engine.disableAnimations(n,e)}},kO=class extends BT{factory;constructor(n,e,i,r,o){super(e,i,r,o),this.factory=n,this.namespaceId=e}setProperty(n,e,i){e.charAt(0)==MT?e.charAt(1)=="."&&e==xW?(i=i===void 0?!0:!!i,this.disableAnimations(n,i)):this.engine.process(this.namespaceId,n,e.slice(1),i):this.delegate.setProperty(n,e,i)}listen(n,e,i,r){if(e.charAt(0)==MT){let o=yye(n),s=e.slice(1),a="";return s.charAt(0)!=MT&&([s,a]=bye(s)),this.engine.listen(this.namespaceId,o,s,a,l=>{let c=l._data||-1;this.factory.scheduleListenerCallback(c,i,l)})}return this.delegate.listen(n,e,i,r)}};function yye(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function bye(t){let n=t.indexOf("."),e=t.substring(0,n),i=t.slice(n+1);return[e,i]}var zT=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,e,i){this.delegate=n,this.engine=e,this._zone=i,e.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(n,e){let i="",r=this.delegate.createRenderer(n,e);if(!n||!e?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let d=()=>c.delete(r);u=new BT(i,r,this.engine,d),c.set(r,u)}return u}let o=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,n);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,n,c.name,c)};return e.data.animation.forEach(a),new kO(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,e,i){if(n>=0&&n<this._microtaskId){this._zone.run(()=>e(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([e,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}};var vye=(()=>{class t extends zf{constructor(e,i,r){super(e,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||t)(Xe(at),Xe(Hp),Xe(Wp))};static \u0275prov=pe({token:t,factory:t.\u0275fac})}return t})();function _ye(){return new RT}function wye(t,n,e){return new zT(t,n,e)}var vW=[{provide:Wp,useFactory:_ye},{provide:zf,useClass:vye},{provide:Ni,useFactory:wye,deps:[kx,zf,qe]}],DYe=[{provide:Hp,useClass:IO},{provide:kn,useValue:"NoopAnimations"},...vW],Cye=[{provide:Hp,useFactory:()=>new VT},{provide:kn,useFactory:()=>"BrowserAnimations"},...vW];function _W(){return vl("NgEagerAnimations"),[...Cye]}function ov(t){return t.buttons===0||t.detail===0}function sv(t){let n=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!n&&n.identifier===-1&&(n.radiusX==null||n.radiusX===1)&&(n.radiusY==null||n.radiusY===1)}var DO;function wW(){if(DO==null){let t=typeof document<"u"?document.head:null;DO=!!(t&&(t.createShadowRoot||t.attachShadow))}return DO}function AO(t){if(wW()){let n=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&n instanceof ShadowRoot)return n}return null}function av(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let n=t.shadowRoot.activeElement;if(n===t)break;t=n}return t}function Wr(t){return t.composedPath?t.composedPath()[0]:t.target}function ls(t,n,e,i,r){let o=parseInt(dR.major),s=parseInt(dR.minor);return o>19||o===19&&s>0||o===0&&s===0?t.listen(n,e,i,r):(n.addEventListener(e,i,r),()=>{n.removeEventListener(e,i,r)})}var NO;try{NO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{NO=!1}var an=(()=>{class t{_platformId=k(Pr);isBrowser=this._platformId?Vs(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||NO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var lv;function CW(){if(lv==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lv=!0}))}finally{lv=lv||!1}return lv}function Du(t){return CW()?t:!!t.capture}function Au(t,n=0){return TW(t)?Number(t):arguments.length===2?n:0}function TW(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Ea(t){return t instanceof nt?t.nativeElement:t}var SW=new he("cdk-input-modality-detector-options"),kW={ignoreKeys:[18,17,224,91,16]},IW=650,MO={passive:!0,capture:!0},EW=(()=>{class t{_platform=k(an);_listenerCleanups;modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Zn(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Wr(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<IW||(this._modality.next(ov(e)?"keyboard":"mouse"),this._mostRecentTarget=Wr(e))};_onTouchstart=e=>{if(sv(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Wr(e)};constructor(){let e=k(qe),i=k(at),r=k(SW,{optional:!0});if(this._options=ie(ie({},kW),r),this.modalityDetected=this._modality.pipe(ex(1)),this.modalityChanged=this.modalityDetected.pipe(_w()),this._platform.isBrowser){let o=k(Ni).createRenderer(null,null);this._listenerCleanups=e.runOutsideAngular(()=>[ls(o,i,"keydown",this._onKeydown,MO),ls(o,i,"mousedown",this._onMousedown,MO),ls(o,i,"touchstart",this._onTouchstart,MO)])}}ngOnDestroy(){this._modality.complete(),this._listenerCleanups?.forEach(e=>e())}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),cv=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(cv||{}),DW=new he("cdk-focus-monitor-default-options"),GT=Du({passive:!0,capture:!0}),Al=(()=>{class t{_ngZone=k(qe);_platform=k(an);_inputModalityDetector=k(EW);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=k(at,{optional:!0});_stopInputModalityDetector=new Re;constructor(){let e=k(DW,{optional:!0});this._detectionMode=e?.detectionMode||cv.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=Wr(e);for(let r=i;r;r=r.parentElement)e.type==="focus"?this._onFocus(e,r):this._onBlur(e,r)};monitor(e,i=!1){let r=Ea(e);if(!this._platform.isBrowser||r.nodeType!==1)return Qe();let o=AO(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return i&&(s.checkChildren=!0),s.subject;let a={checkChildren:i,subject:new Re,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let i=Ea(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){let o=Ea(e),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===cv.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===cv.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?IW:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,i){let r=this._elementInfo.get(i),o=Wr(e);!r||!r.checkChildren&&i!==o||this._originChanged(i,this._getFocusOrigin(o),r)}_onBlur(e,i){let r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,GT),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,GT)}),this._rootNodeFocusListenerCount.set(i,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Bn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,GT),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,GT),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&i.push([o,r])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var UT=new WeakMap,Xi=(()=>{class t{_appRef;_injector=k(Vt);_environmentInjector=k(yi);load(e){let i=this._appRef=this._appRef||this._injector.get(Lr),r=UT.get(i);r||(r={loaders:new Set,refs:[]},UT.set(i,r),i.onDestroy(()=>{UT.get(i)?.refs.forEach(o=>o.destroy()),UT.delete(i)})),r.loaders.has(e)||(r.loaders.add(e),r.refs.push(OC(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Gf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}
`],encapsulation:2,changeDetection:0})}return t})();function Uf(t){return Array.isArray(t)?t:[t]}var AW=new Set,jp,MW=(()=>{class t{_platform=k(an);_nonce=k(fx,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Sye}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&Tye(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tye(t,n){if(!AW.has(t))try{jp||(jp=document.createElement("style"),n&&jp.setAttribute("nonce",n),jp.setAttribute("type","text/css"),document.head.appendChild(jp)),jp.sheet&&(jp.sheet.insertRule(`@media ${t} {body{ }}`,0),AW.add(t))}catch(e){console.error(e)}}function Sye(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var uv=(()=>{class t{_mediaMatcher=k(MW);_zone=k(qe);_queries=new Map;_destroySubject=new Re;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return NW(Uf(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=NW(Uf(e)).map(s=>this._registerQuery(s).observable),o=zm(r);return o=hu(o.pipe(Xn(1)),o.pipe(ex(1),dp(0))),o.pipe(rt(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),o={observable:new Lt(s=>{let a=l=>this._zone.run(()=>s.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Mo(i),rt(({matches:s})=>({query:e,matches:s})),Bn(this._destroySubject)),mql:i};return this._queries.set(e,o),o}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function NW(t){return t.map(n=>n.split(",")).reduce((n,e)=>n.concat(e)).map(n=>n.trim())}var kye=(()=>{class t{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var HT=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({providers:[kye]})}return t})();var FO=(()=>{class t{_platform=k(an);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return Eye(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=Iye(Lye(e));if(i&&(RW(i)===-1||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),o=RW(e);return e.hasAttribute("contenteditable")?o!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!Oye(e)?!1:r==="audio"?e.hasAttribute("controls")?o!==-1:!1:r==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return Fye(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Iye(t){try{return t.frameElement}catch{return null}}function Eye(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function Dye(t){let n=t.nodeName.toLowerCase();return n==="input"||n==="select"||n==="button"||n==="textarea"}function Aye(t){return Mye(t)&&t.type=="hidden"}function Nye(t){return Rye(t)&&t.hasAttribute("href")}function Mye(t){return t.nodeName.toLowerCase()=="input"}function Rye(t){return t.nodeName.toLowerCase()=="a"}function LW(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let n=t.getAttribute("tabindex");return!!(n&&!isNaN(parseInt(n,10)))}function RW(t){if(!LW(t))return null;let n=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(n)?-1:n}function Oye(t){let n=t.nodeName.toLowerCase(),e=n==="input"&&t.type;return e==="text"||e==="password"||n==="select"||n==="textarea"}function Fye(t){return Aye(t)?!1:Dye(t)||Nye(t)||t.hasAttribute("contenteditable")||LW(t)}function Lye(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var OO=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(n){this._enabled=n,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_enabled=!0;constructor(n,e,i,r,o=!1,s){this._element=n,this._checker=e,this._ngZone=i,this._document=r,this._injector=s,o||this.attachAnchors()}destroy(){let n=this._startAnchor,e=this._endAnchor;n&&(n.removeEventListener("focus",this.startAnchorListener),n.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(n)))})}focusFirstTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(n)))})}focusLastTabbableElementWhenReady(n){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(n)))})}_getRegionBoundary(n){let e=this._element.querySelectorAll(`[cdk-focus-region-${n}], [cdkFocusRegion${n}], [cdk-focus-${n}]`);return n=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(n){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(n),!!i}return e.focus(n),!0}return this.focusFirstTabbableElement(n)}focusFirstTabbableElement(n){let e=this._getRegionBoundary("start");return e&&e.focus(n),!!e}focusLastTabbableElement(n){let e=this._getRegionBoundary("end");return e&&e.focus(n),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(n){if(this._checker.isFocusable(n)&&this._checker.isTabbable(n))return n;let e=n.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let n=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,n),n.classList.add("cdk-visually-hidden"),n.classList.add("cdk-focus-trap-anchor"),n.setAttribute("aria-hidden","true"),n}_toggleAnchorTabIndex(n,e){n?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(n){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(n,this._startAnchor),this._toggleAnchorTabIndex(n,this._endAnchor))}_executeOnStable(n){this._injector?ts(n,{injector:this._injector}):setTimeout(n)}},LO=(()=>{class t{_checker=k(FO);_ngZone=k(qe);_document=k(at);_injector=k(Vt);constructor(){k(Xi).load(Gf)}create(e,i=!1){return new OO(e,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var PW=new he("liveAnnouncerElement",{providedIn:"root",factory:$W});function $W(){return null}var VW=new he("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Pye=0,dv=(()=>{class t{_ngZone=k(qe);_defaultOptions=k(VW,{optional:!0});_liveElement;_document=k(at);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=k(PW,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...i){let r=this._defaultOptions,o,s;return i.length===1&&typeof i[0]=="number"?s=i[0]:[o,s]=i,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let o=0;o<i.length;o++)i[o].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${Pye++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Nu=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Nu||{}),OW="cdk-high-contrast-black-on-white",FW="cdk-high-contrast-white-on-black",RO="cdk-high-contrast-active",WT=(()=>{class t{_platform=k(an);_hasCheckedHighContrastMode;_document=k(at);_breakpointSubscription;constructor(){this._breakpointSubscription=k(uv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Nu.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Nu.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Nu.BLACK_ON_WHITE}return Nu.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(RO,OW,FW),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Nu.BLACK_ON_WHITE?e.add(RO,OW):i===Nu.WHITE_ON_BLACK&&e.add(RO,FW)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),pv=(()=>{class t{constructor(){k(WT)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[HT]})}return t})();var PO={},br=(()=>{class t{_appId=k(kp);getId(e){return this._appId!=="ng"&&(e+=this._appId),PO.hasOwnProperty(e)||(PO[e]=0),`${e}${PO[e]++}`}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $ye=200,jT=class{_letterKeyStream=new Re;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new Re;selectedItem=this._selectedItem;constructor(n,e){let i=typeof e?.debounceInterval=="number"?e.debounceInterval:$ye;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(n),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(n){this._selectedItemIndex=n}setItems(n){this._items=n}handleKey(n){let e=n.keyCode;n.key&&n.key.length===1?this._letterKeyStream.next(n.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(n){this._letterKeyStream.pipe(Jn(e=>this._pressedLetters.push(e)),dp(n),Cn(()=>this._pressedLetters.length>0),rt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){let r=(this._selectedItemIndex+i)%this._items.length,o=this._items[r];if(!this._skipPredicateFn?.(o)&&o.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(o);break}}this._pressedLetters=[]})}};function xr(t,...n){return n.length?n.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}var qT=class{_items;_activeItemIndex=-1;_activeItem=wa(null);_wrap=!1;_typeaheadSubscription=en.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=n=>n.disabled;constructor(n,e){this._items=n,n instanceof nf?this._itemChangesSubscription=n.changes.subscribe(i=>this._itemsChanged(i.toArray())):ff(n)&&(this._effectRef=hR(()=>this._itemsChanged(n()),{injector:e}))}tabOut=new Re;change=new Re;skipPredicate(n){return this._skipPredicateFn=n,this}withWrap(n=!0){return this._wrap=n,this}withVerticalOrientation(n=!0){return this._vertical=n,this}withHorizontalOrientation(n){return this._horizontal=n,this}withAllowedModifierKeys(n){return this._allowedModifierKeys=n,this}withTypeAhead(n=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new jT(e,{debounceInterval:typeof n=="number"?n:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(n=!0){return this._homeAndEnd=n,this}withPageUpDown(n=!0,e=10){return this._pageUpAndDown={enabled:n,delta:e},this}setActiveItem(n){let e=this._activeItem();this.updateActiveItem(n),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(n){let e=n.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!n[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||xr(n,"shiftKey"))&&this._typeahead?.handleKey(n);return}this._typeahead?.reset(),n.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(n){let e=this._getItemsArray(),i=typeof n=="number"?n:e.indexOf(n),r=e[i];this._activeItem.set(r??null),this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(n){this._wrap?this._setActiveInWrapMode(n):this._setActiveInDefaultMode(n)}_setActiveInWrapMode(n){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let r=(this._activeItemIndex+n*i+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(n){this._setActiveItemByIndex(this._activeItemIndex+n,n)}_setActiveItemByIndex(n,e){let i=this._getItemsArray();if(i[n]){for(;this._skipPredicateFn(i[n]);)if(n+=e,!i[n])return;this.setActiveItem(n)}}_getItemsArray(){return ff(this._items)?this._items():this._items instanceof nf?this._items.toArray():this._items}_itemsChanged(n){this._typeahead?.setItems(n);let e=this._activeItem();if(e){let i=n.indexOf(e);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i))}}};var hv=class extends qT{setActiveItem(n){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(n),this.activeItem&&this.activeItem.setActiveStyles()}};var HW=" ";function GO(t,n,e){let i=KT(t,n);e=e.trim(),!i.some(r=>r.trim()===e)&&(i.push(e),t.setAttribute(n,i.join(HW)))}function YT(t,n,e){let i=KT(t,n);e=e.trim();let r=i.filter(o=>o!==e);r.length?t.setAttribute(n,r.join(HW)):t.removeAttribute(n)}function KT(t,n){return t.getAttribute(n)?.match(/\S+/g)??[]}var WW="cdk-describedby-message",XT="cdk-describedby-host",zO=0,jW=(()=>{class t{_platform=k(an);_document=k(at);_messageRegistry=new Map;_messagesContainer=null;_id=`${zO++}`;constructor(){k(Xi).load(Gf),this._id=k(kp)+"-"+zO++}describe(e,i,r){if(!this._canBeDescribed(e,i))return;let o=BO(i,r);typeof i!="string"?(UW(i,this._id),this._messageRegistry.set(o,{messageElement:i,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(i,r),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,i,r){if(!i||!this._isElementNode(e))return;let o=BO(i,r);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),typeof i=="string"){let s=this._messageRegistry.get(o);s&&s.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${XT}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(XT);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){let r=this._document.createElement("div");UW(r,this._id),r.textContent=e,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(BO(e,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<i.length;o++)i[o].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){let i=KT(e,"aria-describedby").filter(r=>r.indexOf(WW)!=0);e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){let r=this._messageRegistry.get(i);GO(e,"aria-describedby",r.messageElement.id),e.setAttribute(XT,this._id),r.referenceCount++}_removeMessageReference(e,i){let r=this._messageRegistry.get(i);r.referenceCount--,YT(e,"aria-describedby",r.messageElement.id),e.removeAttribute(XT)}_isElementDescribedByMessage(e,i){let r=KT(e,"aria-describedby"),o=this._messageRegistry.get(i),s=o&&o.messageElement.id;return!!s&&r.indexOf(s)!=-1}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&typeof i=="object")return!0;let r=i==null?"":`${i}`.trim(),o=e.getAttribute("aria-label");return r?!o||o.trim()!==r:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function BO(t,n){return typeof t=="string"?`${n||""}/${t}`:t}function UW(t,n){t.id||(t.id=`${WW}-${n}-${zO++}`)}var Us=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(Us||{}),QT,qp;function ZT(){if(qp==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return qp=!1,qp;if("scrollBehavior"in document.documentElement.style)qp=!0;else{let t=Element.prototype.scrollTo;t?qp=!/\{\s*\[native code\]\s*\}/.test(t.toString()):qp=!1}}return qp}function Hf(){if(typeof document!="object"||!document)return Us.NORMAL;if(QT==null){let t=document.createElement("div"),n=t.style;t.dir="rtl",n.width="1px",n.overflow="auto",n.visibility="hidden",n.pointerEvents="none",n.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",t.appendChild(e),document.body.appendChild(t),QT=Us.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,QT=t.scrollLeft===0?Us.NEGATED:Us.INVERTED),t.remove()}return QT}function UO(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function JT(t){return t!=null&&`${t}`!="false"}function hi(t){return t==null?"":typeof t=="string"?t:`${t}px`}var jr=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(jr||{}),HO=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=jr.HIDDEN;constructor(n,e,i,r=!1){this._renderer=n,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r}fadeOut(){this._renderer.fadeOutRipple(this)}},qW=Du({passive:!0,capture:!0}),WO=class{_events=new Map;addHandler(n,e,i,r){let o=this._events.get(e);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),n.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,qW)})}removeHandler(n,e,i){let r=this._events.get(n);if(!r)return;let o=r.get(e);o&&(o.delete(i),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(n),document.removeEventListener(n,this._delegateEventHandler,qW)))}_delegateEventHandler=n=>{let e=Wr(n);e&&this._events.get(n.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(n))})}},mv={enterDuration:225,exitDuration:150},Vye=800,XW=Du({passive:!0,capture:!0}),KW=["mousedown","touchstart"],YW=["mouseup","mouseleave","touchend","touchcancel"],Bye=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}
`],encapsulation:2,changeDetection:0})}return t})(),fv=class t{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new WO;constructor(n,e,i,r,o){this._target=n,this._ngZone=e,this._platform=r,r.isBrowser&&(this._containerElement=Ea(i)),o&&o.get(Xi).load(Bye)}fadeInRipple(n,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=ie(ie({},mv),i.animation);i.centered&&(n=r.left+r.width/2,e=r.top+r.height/2);let s=i.radius||zye(n,e,r),a=n-r.left,l=e-r.top,c=o.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-s}px`,u.style.top=`${l-s}px`,u.style.height=`${s*2}px`,u.style.width=`${s*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),p=d.transitionProperty,h=d.transitionDuration,m=p==="none"||h==="0s"||h==="0s, 0s"||r.width===0&&r.height===0,g=new HO(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",g.state=jr.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let f=null;return!m&&(c||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let y=()=>{f&&(f.fallbackTimer=null),clearTimeout(v),this._finishRippleTransition(g)},b=()=>this._destroyRipple(g),v=setTimeout(b,c+100);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",b),f={onTransitionEnd:y,onTransitionCancel:b,fallbackTimer:v}}),this._activeRipples.set(g,f),(m||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(n){if(n.state===jr.FADING_OUT||n.state===jr.HIDDEN)return;let e=n.element,i=ie(ie({},mv),n.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",n.state=jr.FADING_OUT,(n._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(n)}fadeOutAll(){this._getActiveRipples().forEach(n=>n.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(n=>{n.config.persistent||n.fadeOut()})}setupTriggerEvents(n){let e=Ea(n);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,KW.forEach(i=>{t._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(n){n.type==="mousedown"?this._onMousedown(n):n.type==="touchstart"?this._onTouchStart(n):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{YW.forEach(e=>{this._triggerElement.addEventListener(e,this,XW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(n){n.state===jr.FADING_IN?this._startFadeOutTransition(n):n.state===jr.FADING_OUT&&this._destroyRipple(n)}_startFadeOutTransition(n){let e=n===this._mostRecentTransientRipple,{persistent:i}=n.config;n.state=jr.VISIBLE,!i&&(!e||!this._isPointerDown)&&n.fadeOut()}_destroyRipple(n){let e=this._activeRipples.get(n)??null;this._activeRipples.delete(n),this._activeRipples.size||(this._containerRect=null),n===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),n.state=jr.HIDDEN,e!==null&&(n.element.removeEventListener("transitionend",e.onTransitionEnd),n.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),n.element.remove()}_onMousedown(n){let e=ov(n),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Vye;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(n.clientX,n.clientY,this._target.rippleConfig))}_onTouchStart(n){if(!this._target.rippleDisabled&&!sv(n)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=n.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(n=>{let e=n.state===jr.VISIBLE||n.config.terminateOnPointerUp&&n.state===jr.FADING_IN;!n.config.persistent&&e&&n.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let n=this._triggerElement;n&&(KW.forEach(e=>t._eventManager.removeHandler(e,n,this)),this._pointerUpEventsRegistered&&(YW.forEach(e=>n.removeEventListener(e,this,XW)),this._pointerUpEventsRegistered=!1))}};function zye(t,n,e){let i=Math.max(Math.abs(t-e.left),Math.abs(t-e.right)),r=Math.max(Math.abs(n-e.top),Math.abs(n-e.bottom));return Math.sqrt(i*i+r*r)}var gv=new he("mat-ripple-global-options"),Xp=(()=>{class t{_elementRef=k(nt);_animationMode=k(kn,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=k(qe),i=k(an),r=k(gv,{optional:!0}),o=k(Vt);this._globalOptions=r||{},this._rippleRenderer=new fv(this,e,this._elementRef,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ie(ie(ie({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,ie(ie({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,ie(ie({},this.rippleConfig),e))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){i&2&&st("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return t})();var Gye={capture:!0},Uye=["focus","mousedown","mouseenter","touchstart"],jO="mat-ripple-loader-uninitialized",qO="mat-ripple-loader-class-name",QW="mat-ripple-loader-centered",eS="mat-ripple-loader-disabled",ZW=(()=>{class t{_document=k(at);_animationMode=k(kn,{optional:!0});_globalRippleOptions=k(gv,{optional:!0});_platform=k(an);_ngZone=k(qe);_injector=k(Vt);_eventCleanups;_hosts=new Map;constructor(){let e=k(Ni).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>Uye.map(i=>ls(e,this._document,i,this._onInteraction,Gye)))}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);this._eventCleanups.forEach(i=>i())}configureRipple(e,i){e.setAttribute(jO,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(qO))&&e.setAttribute(qO,i.className||""),i.centered&&e.setAttribute(QW,""),i.disabled&&e.setAttribute(eS,"")}setDisabled(e,i){let r=this._hosts.get(e);r?(r.target.rippleDisabled=i,!i&&!r.hasSetUpEvents&&(r.hasSetUpEvents=!0,r.renderer.setupTriggerEvents(e))):i?e.setAttribute(eS,""):e.removeAttribute(eS)}_onInteraction=e=>{let i=Wr(e);if(i instanceof HTMLElement){let r=i.closest(`[${jO}="${this._globalRippleOptions?.namespace??""}"]`);r&&this._createRipple(r)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(qO)),e.append(i);let r=this._animationMode==="NoopAnimations",o=this._globalRippleOptions,s=r?0:o?.animation?.enterDuration??mv.enterDuration,a=r?0:o?.animation?.exitDuration??mv.exitDuration,l={rippleDisabled:r||o?.disabled||e.hasAttribute(eS),rippleConfig:{centered:e.hasAttribute(QW),terminateOnPointerUp:o?.terminateOnPointerUp,animation:{enterDuration:s,exitDuration:a}}},c=new fv(l,this._ngZone,i,this._platform,this._injector),u=!l.rippleDisabled;u&&c.setupTriggerEvents(e),this._hosts.set(e,{target:l,renderer:c,hasSetUpEvents:u}),e.removeAttribute(jO)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Mu=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,r){},styles:[`.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}
`],encapsulation:2,changeDetection:0})}return t})();var Hye=["mat-icon-button",""],Wye=["*"];var jye=new he("MAT_BUTTON_CONFIG");var qye=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],XO=(()=>{class t{_elementRef=k(nt);_ngZone=k(qe);_animationMode=k(kn,{optional:!0});_focusMonitor=k(Al);_rippleLoader=k(ZW);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){k(Xi).load(Mu);let e=k(jye,{optional:!0}),i=this._elementRef.nativeElement,r=i.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"});for(let{attribute:o,mdcClasses:s}of qye)i.hasAttribute(o)&&r.add(...s)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Ot],disabled:[2,"disabled","disabled",Ot],ariaDisabled:[2,"aria-disabled","ariaDisabled",Ot],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ot]}})}return t})();var Kp=(()=>{class t extends XO{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Le("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Br(r.color?"mat-"+r.color:""),st("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Mn],attrs:Hye,ngContentSelectors:Wye,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Kn(),ke(0,"span",0),yn(1),ke(2,"span",1)(3,"span",2))},styles:[`.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var Xye=new he("cdk-dir-doc",{providedIn:"root",factory:Kye});function Kye(){return k(at)}var Yye=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function JW(t){let n=t?.toLowerCase()||"";return n==="auto"&&typeof navigator<"u"&&navigator?.language?Yye.test(navigator.language)?"rtl":"ltr":n==="rtl"?"rtl":"ltr"}var qr=(()=>{class t{value="ltr";change=new Se;constructor(){let e=k(Xye,{optional:!0});if(e){let i=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=JW(i||r||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ru=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({})}return t})();var jt=(()=>{class t{constructor(){k(WT)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[Ru,Ru]})}return t})();var Wf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt,jt]})}return t})();var Qye=["mat-button",""],Zye=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Jye=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var cs=(()=>{class t extends XO{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275cmp=De({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,r){i&2&&(Le("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Br(r.color?"mat-"+r.color:""),st("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Mn],attrs:Qye,ngContentSelectors:Jye,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,r){i&1&&(Kn(Zye),ke(0,"span",0),yn(1),R(2,"span",1),yn(3,1),M(),yn(4,2),ke(5,"span",2)(6,"span",3)),i&2&&st("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return t})();var mo=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt,Wf,jt]})}return t})();var ebe=["*"];var tbe=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],nbe=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],ibe=new he("MAT_CARD_CONFIG"),qf=(()=>{class t{appearance;constructor(){let e=k(ibe,{optional:!0});this.appearance=e?.appearance||"raised"}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(i,r){i&2&&st("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:ebe,decls:1,vars:0,template:function(i,r){i&1&&(Kn(),yn(0))},styles:[`.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-color:var(--mdc-elevated-card-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mdc-elevated-card-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color, var(--mat-sys-surface));border-radius:var(--mdc-outlined-card-container-shape, var(--mat-sys-corner-medium));border-width:var(--mdc-outlined-card-outline-width, 1px);border-color:var(--mdc-outlined-card-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mdc-outlined-card-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}
`],encapsulation:2,changeDetection:0})}return t})(),Xf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"]})}return t})();var Kf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]})}return t})(),Yf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]})}return t})(),tS=(()=>{class t{align="start";static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(i,r){i&2&&st("mat-mdc-card-actions-align-end",r.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"]})}return t})(),Qf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:nbe,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(i,r){i&1&&(Kn(tbe),yn(0),R(1,"div",0),yn(2,1),M(),yn(3,2))},encapsulation:2,changeDetection:0})}return t})();var Zf=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt,jt]})}return t})();var nS;function rbe(){if(nS===void 0&&(nS=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(nS=t.trustedTypes.createPolicy("angular#components",{createHTML:n=>n}))}return nS}function yv(t){return rbe()?.createHTML(t)||t}function ej(t){return Error(`Unable to find icon with the name "${t}"`)}function obe(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function tj(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function nj(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var Nl=class{url;svgText;options;svgElement;constructor(n,e,i){this.url=n,this.svgText=e,this.options=i}},rj=(()=>{class t{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,i,r,o){this._httpClient=e,this._sanitizer=i,this._errorHandler=o,this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,o){return this._addSvgIconConfig(e,i,new Nl(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,o){let s=this._sanitizer.sanitize($r.HTML,r);if(!s)throw nj(r);let a=yv(s);return this._addSvgIconConfig(e,i,new Nl("",a,o))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Nl(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){let o=this._sanitizer.sanitize($r.HTML,i);if(!o)throw nj(i);let s=yv(o);return this._addSvgIconSetConfig(e,new Nl("",s,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize($r.RESOURCE_URL,e);if(!i)throw tj(e);let r=this._cachedIconsByUrl.get(i);return r?Qe(iS(r)):this._loadSvgIconFromConfig(new Nl(e,null)).pipe(Jn(o=>this._cachedIconsByUrl.set(i,o)),rt(o=>iS(o)))}getNamedSvgIcon(e,i=""){let r=ij(i,e),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(i,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(i);return s?this._getSvgFromIconSetConfigs(e,s):pu(ej(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Qe(iS(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(rt(i=>iS(i)))}_getSvgFromIconSetConfigs(e,i){let r=this._extractIconWithNameFromAnySet(e,i);if(r)return Qe(r);let o=i.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(Qo(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize($r.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),Qe(null)})));return Zb(o).pipe(rt(()=>{let s=this._extractIconWithNameFromAnySet(e,i);if(!s)throw ej(e);return s}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){let o=i[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Jn(i=>e.svgText=i),rt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Qe(null):this._fetchIcon(e).pipe(Jn(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){let o=e.querySelector(`[id="${i}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(yv("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let i=this._svgElementFromString(yv("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&i.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[o].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw obe();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let s=this._sanitizer.sanitize($r.RESOURCE_URL,i);if(!s)throw tj(i);let a=this._inProgressUrlFetches.get(s);if(a)return a;let l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(rt(c=>yv(c)),dl(()=>this._inProgressUrlFetches.delete(s)),HA());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(ij(e,i),r),this}_addSvgIconSetConfig(e,i){let r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](i,e);if(o)return sbe(o)?new Nl(o.url,null,o.options):new Nl(o,null)}}static \u0275fac=function(i){return new(i||t)(Xe(Tf,8),Xe(DR),Xe(at,8),Xe(Or))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function iS(t){return t.cloneNode(!0)}function ij(t,n){return t+":"+n}function sbe(t){return!!(t.url&&t.options)}var abe=["*"],lbe=new he("MAT_ICON_DEFAULT_OPTIONS"),cbe=new he("mat-icon-location",{providedIn:"root",factory:ube});function ube(){let t=k(at),n=t?t.location:null;return{getPathname:()=>n?n.pathname+n.search:""}}var oj=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],dbe=oj.map(t=>`[${t}]`).join(", "),pbe=/^url\(['"]?#(.*?)['"]?\)$/,Da=(()=>{class t{_elementRef=k(nt);_iconRegistry=k(rj);_location=k(cbe);_errorHandler=k(Or);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=en.EMPTY;constructor(){let e=k(new xu("aria-hidden"),{optional:!0}),i=k(lbe,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let r=e.childNodes[i];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),i.forEach(r=>e.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(dbe),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<i.length;o++)oj.forEach(s=>{let a=i[o],l=a.getAttribute(s),c=l?l.match(pbe):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:s,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Xn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${i}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){i&2&&(Le("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Br(r.color?"mat-"+r.color:""),st("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Ot],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:abe,decls:1,vars:0,template:function(i,r){i&1&&(Kn(),yn(0))},styles:[`mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}
`],encapsulation:2,changeDetection:0})}return t})(),Aa=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt,jt]})}return t})();var rS=class t{constructor(n){this.router=n}startGame(){this.router.navigate(["/game"])}watchAiLearn(){this.router.navigate(["/ai-learning"])}goToSettings(){this.router.navigate(["/settings"])}static \u0275fac=function(e){return new(e||t)(Me(os))};static \u0275cmp=De({type:t,selectors:[["app-menu"]],decls:24,vars:0,consts:[[1,"menu-container"],[1,"menu-card"],[1,"game-description"],["mat-raised-button","","color","primary",1,"primary-btn",3,"click"],["mat-raised-button","","color","accent",1,"secondary-btn",3,"click"],["mat-raised-button","",1,"settings-btn",3,"click"]],template:function(e,i){e&1&&(R(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),Y(4,"Sudoku Game"),M(),R(5,"mat-card-subtitle"),Y(6,"Start playing and challenge yourself"),M()(),R(7,"mat-card-content")(8,"div",2)(9,"p"),Y(10,"Get ready for a challenging Sudoku puzzle! Each game will present you with a randomly generated board."),M()()(),R(11,"mat-card-actions")(12,"button",3),Ce("click",function(){return i.startGame()}),R(13,"mat-icon"),Y(14,"play_arrow"),M(),Y(15," New Game "),M(),R(16,"button",4),Ce("click",function(){return i.watchAiLearn()}),R(17,"mat-icon"),Y(18,"smart_toy"),M(),Y(19," Watch AI Learn "),M(),R(20,"button",5),Ce("click",function(){return i.goToSettings()}),R(21,"mat-icon"),Y(22,"settings"),M(),Y(23," Settings "),M()()()())},dependencies:[pi,mo,cs,Zf,qf,tS,Kf,Qf,Yf,Xf,Aa,Da],styles:['.menu-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;max-width:500px;padding:1rem}.menu-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:2.5rem;background:#fff;border-radius:20px;box-shadow:0 12px 40px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);transition:all .3s ease}body.dark-theme[_ngcontent-%COMP%]   .menu-card[_ngcontent-%COMP%]{background:#2d2d2d;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 40px #0006}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;justify-content:center;text-align:center}mat-card-title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin-bottom:.75rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#6b7280;font-weight:400;line-height:1.4}body.dark-theme[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#9ca3af}.difficulty-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:2.5rem;gap:1.25rem}.difficulty-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:600;color:#374151;text-align:center}body.dark-theme[_ngcontent-%COMP%]   .difficulty-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#f3f4f6}.difficulty-select[_ngcontent-%COMP%]{font-size:1.1rem;background:#f9fafb;border-radius:12px;padding:.75rem 1rem;border:2px solid #e5e7eb;transition:all .3s ease}.difficulty-select[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}body.dark-theme[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]{background:#374151;color:#f3f4f6;border-color:#4b5563}body.dark-theme[_ngcontent-%COMP%]   .difficulty-select[_ngcontent-%COMP%]:hover{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa1a}mat-card-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem;padding:1.5rem 0 .5rem}button[_ngcontent-%COMP%]{width:100%;padding:1.25rem 1.5rem;font-size:1.1rem;font-weight:600;border-radius:14px;transition:all .3s ease;text-transform:none;letter-spacing:.5px;display:flex;align-items:center;justify-content:center;gap:.75rem;min-height:56px;position:relative;overflow:hidden}button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .6s}button[_ngcontent-%COMP%]:hover:before{left:100%}button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.4rem;width:1.4rem;height:1.4rem}.primary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;color:#fff;transform:translateY(0);box-shadow:0 4px 15px #667eea4d}.primary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #667eea66}.secondary-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f093fb,#f5576c);color:#fff;border:none;box-shadow:0 4px 15px #f5576c4d}.secondary-btn[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 25px #f5576c66}.settings-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#4b5563;border:2px solid #e5e7eb}.settings-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;transform:translateY(-3px);box-shadow:0 8px 15px #0000001a}body.dark-theme[_ngcontent-%COMP%]   .primary-btn[_ngcontent-%COMP%]{box-shadow:0 4px 15px #667eea66}body.dark-theme[_ngcontent-%COMP%]   .secondary-btn[_ngcontent-%COMP%]{box-shadow:0 4px 15px #f5576c66}body.dark-theme[_ngcontent-%COMP%]   .settings-btn[_ngcontent-%COMP%]{background:#4b5563;color:#f3f4f6;border-color:#6b7280}body.dark-theme[_ngcontent-%COMP%]   .settings-btn[_ngcontent-%COMP%]:hover{background:#6b7280;box-shadow:0 8px 15px #0000004d}.game-description[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.game-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#6b7280;line-height:1.6;margin:0}body.dark-theme[_ngcontent-%COMP%]   .game-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af}@media (min-width: 768px){mat-card-actions[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;justify-content:space-between;gap:1rem}button[_ngcontent-%COMP%]{width:auto;flex:1;min-width:160px;padding:1.25rem 1rem}}@media (max-width: 480px){.menu-container[_ngcontent-%COMP%]{padding:.5rem}.menu-card[_ngcontent-%COMP%]{padding:1.75rem}mat-card-title[_ngcontent-%COMP%]{font-size:2rem}button[_ngcontent-%COMP%]{padding:1rem;font-size:1rem;min-height:50px}}']})};var hbe=20,eg=(()=>{class t{_ngZone=k(qe);_platform=k(an);_renderer=k(Ni).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new Re;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=hbe){return this._platform.isBrowser?new Lt(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let r=e>0?this._scrolled.pipe(vw(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Qe()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(Cn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_scrollableContainsElement(e,i){let r=Ea(i),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),YO=(()=>{class t{elementRef=k(nt);scrollDispatcher=k(eg);ngZone=k(qe);dir=k(qr,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new Re;_renderer=k(di);_cleanupScroll;_elementScrolled=new Re;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&Hf()!=Us.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),Hf()==Us.INVERTED?e.left=e.right:Hf()==Us.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;ZT()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",r="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?r:i:e=="end"&&(e=s?i:r),s&&Hf()==Us.INVERTED?e==i?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&Hf()==Us.NEGATED?e==i?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==i?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return t})(),mbe=20,tg=(()=>{class t{_platform=k(an);_listeners;_viewportSize;_change=new Re;_document=k(at,{optional:!0});constructor(){let e=k(qe),i=k(Ni).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let r=o=>this._change.next(o);this._listeners=[i.listen("window","resize",r),i.listen("window","orientationchange",r)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),s=-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,a=-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(e=mbe){return e>0?this._change.pipe(vw(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Yp=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({})}return t})(),QO=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[Ru,Yp,Ru,Yp]})}return t})();var ng=class{_attachedHost;attach(n){return this._attachedHost=n,n.attach(this)}detach(){let n=this._attachedHost;n!=null&&(this._attachedHost=null,n.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(n){this._attachedHost=n}},fo=class extends ng{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(n,e,i,r,o){super(),this.component=n,this.viewContainerRef=e,this.injector=i,this.projectableNodes=o}},Na=class extends ng{templateRef;viewContainerRef;context;injector;constructor(n,e,i,r){super(),this.templateRef=n,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(n,e=this.context){return this.context=e,super.attach(n)}detach(){return this.context=void 0,super.detach()}},oS=class extends ng{element;constructor(n){super(),this.element=n instanceof nt?n.nativeElement:n}},Ml=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(n){if(n instanceof fo)return this._attachedPortal=n,this.attachComponentPortal(n);if(n instanceof Na)return this._attachedPortal=n,this.attachTemplatePortal(n);if(this.attachDomPortal&&n instanceof oS)return this._attachedPortal=n,this.attachDomPortal(n)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(n){this._disposeFn=n}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Qp=class extends Ml{outletElement;_appRef;_defaultInjector;_document;constructor(n,e,i,r,o){super(),this.outletElement=n,this._appRef=i,this._defaultInjector=r,this._document=o}attachComponentPortal(n){let e;if(n.viewContainerRef){let i=n.injector||n.viewContainerRef.injector,r=i.get(yl,null,{optional:!0})||void 0;e=n.viewContainerRef.createComponent(n.component,{index:n.viewContainerRef.length,injector:i,ngModuleRef:r,projectableNodes:n.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else{let i=this._appRef,r=n.injector||this._defaultInjector||Vt.NULL,o=r.get(yi,i.injector);e=OC(n.component,{elementInjector:r,environmentInjector:o,projectableNodes:n.projectableNodes||void 0}),i.attachView(e.hostView),this.setDisposeFn(()=>{i.viewCount>0&&i.detachView(e.hostView),e.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=n,e}attachTemplatePortal(n){let e=n.viewContainerRef,i=e.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=n,i}attachDomPortal=n=>{let e=n.element;e.parentNode;let i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=n,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(n){return n.hostView.rootNodes[0]}};var Rl=(()=>{class t extends Ml{_moduleRef=k(yl,{optional:!0});_document=k(at);_viewContainerRef=k(Wi);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new Se;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,r=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn(()=>r.destroy()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let r=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(r,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{r.parentNode&&r.parentNode.replaceChild(i,r)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Mn]})}return t})();var Ma=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({})}return t})();var sj=ZT(),sS=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(n,e){this._viewportRuler=n,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let n=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=n.style.left||"",this._previousHTMLStyles.top=n.style.top||"",n.style.left=hi(-this._previousScrollPosition.left),n.style.top=hi(-this._previousScrollPosition.top),n.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let n=this._document.documentElement,e=this._document.body,i=n.style,r=e.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,n.classList.remove("cdk-global-scrollblock"),sj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),sj&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.documentElement,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var aS=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(n,e,i,r){this._scrollDispatcher=n,this._ngZone=e,this._viewportRuler=i,this._config=r}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(this._scrollSubscription)return;let n=this._scrollDispatcher.scrolled(0).pipe(Cn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=n.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=n.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},xv=class{enable(){}disable(){}attach(){}};function ZO(t,n){return n.some(e=>{let i=t.bottom<e.top,r=t.top>e.bottom,o=t.right<e.left,s=t.left>e.right;return i||r||o||s})}function aj(t,n){return n.some(e=>{let i=t.top<e.top,r=t.bottom>e.bottom,o=t.left<e.left,s=t.right>e.right;return i||r||o||s})}var lS=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(n,e,i,r){this._scrollDispatcher=n,this._viewportRuler=e,this._ngZone=i,this._config=r}attach(n){this._overlayRef,this._overlayRef=n}enable(){if(!this._scrollSubscription){let n=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(n).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();ZO(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},hj=(()=>{class t{_scrollDispatcher=k(eg);_viewportRuler=k(tg);_ngZone=k(qe);_document=k(at);constructor(){}noop=()=>new xv;close=e=>new aS(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new sS(this._viewportRuler,this._document);reposition=e=>new lS(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ol=class{positionStrategy;scrollStrategy=new xv;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(n){if(n){let e=Object.keys(n);for(let i of e)n[i]!==void 0&&(this[i]=n[i])}}};var cS=class{connectionPair;scrollableViewProperties;constructor(n,e){this.connectionPair=n,this.scrollableViewProperties=e}};var mj=(()=>{class t{_attachedOverlays=[];_document=k(at);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fj=(()=>{class t extends mj{_ngZone=k(qe);_renderer=k(Ni).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let r=i.length-1;r>-1;r--)if(i[r]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[r]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gj=(()=>{class t extends mj{_platform=k(an);_ngZone=k(qe);_renderer=k(Ni).createRenderer(null,null);_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;_cleanups;add(e){if(super.add(e),!this._isAttached){let i=this._document.body,r={capture:!0};this._cleanups=this._ngZone.runOutsideAngular(()=>[ls(this._renderer,i,"pointerdown",this._pointerDownListener,r),ls(this._renderer,i,"click",this._clickListener,r),ls(this._renderer,i,"auxclick",this._clickListener,r),ls(this._renderer,i,"contextmenu",this._clickListener,r)]),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){this._isAttached&&(this._cleanups?.forEach(e=>e()),this._cleanups=void 0,this._platform.IOS&&this._cursorStyleIsSet&&(this._document.body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1)}_pointerDownListener=e=>{this._pointerDownEventTarget=Wr(e)};_clickListener=e=>{let i=Wr(e),r=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let o=this._attachedOverlays.slice();for(let s=o.length-1;s>-1;s--){let a=o[s];if(a._outsidePointerEvents.observers.length<1||!a.hasAttached())continue;if(lj(a.overlayElement,i)||lj(a.overlayElement,r))break;let l=a._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>l.next(e)):l.next(e)}};static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lj(t,n){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=n;for(;i;){if(i===t)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var yj=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,r){},styles:[`.cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0;touch-action:manipulation}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}@media(prefers-reduced-motion){.cdk-overlay-backdrop{transition-duration:1ms}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}
`],encapsulation:2,changeDetection:0})}return t})(),pS=(()=>{class t{_platform=k(an);_containerElement;_document=k(at);_styleLoader=k(Xi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||UO()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let i=this._document.createElement("div");i.classList.add(e),UO()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(yj)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),JO=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(n,e,i,r){this._renderer=e,this._ngZone=i,this.element=n.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",r)}detach(){this._ngZone.runOutsideAngular(()=>{let n=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(n,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),n.style.pointerEvents="none",n.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Jp=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new Re;_attachments=new Re;_detachments=new Re;_positionStrategy;_scrollStrategy;_locationChanges=en.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new Re;_outsidePointerEvents=new Re;_renders=new Re;_afterRenderRef;_afterNextRenderRef;constructor(n,e,i,r,o,s,a,l,c,u=!1,d,p){this._portalOutlet=n,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._injector=d,this._renderer=p,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=is(()=>bf(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(n){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(n);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=ts(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let n=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),n}dispose(){let n=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,n&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(n){n!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=n,this.hasAttached()&&(n.attach(this),this.updatePosition()))}updateSize(n){this._config=ie(ie({},this._config),n),this._updateElementSize()}setDirection(n){this._config=At(ie({},this._config),{direction:n}),this._updateElementDirection()}addPanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!0)}removePanelClass(n){this._pane&&this._toggleClasses(this._pane,n,!1)}getDirection(){let n=this._config.direction;return n?typeof n=="string"?n:n.value:"ltr"}updateScrollStrategy(n){n!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=n,this.hasAttached()&&(n.attach(this),n.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let n=this._pane.style;n.width=hi(this._config.width),n.height=hi(this._config.height),n.minWidth=hi(this._config.minWidth),n.minHeight=hi(this._config.minHeight),n.maxWidth=hi(this._config.maxWidth),n.maxHeight=hi(this._config.maxHeight)}_togglePointerEvents(n){this._pane.style.pointerEvents=n?"":"none"}_attachBackdrop(){let n="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new JO(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(n))}):this._backdropRef.element.classList.add(n)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(n,e,i){let r=Uf(e||[]).filter(o=>!!o);r.length&&(i?n.classList.add(...r):n.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let n=this._renders.pipe(Bn(ul(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),n.unsubscribe())})})}_disposeScrollStrategy(){let n=this._scrollStrategy;n?.disable(),n?.detach?.()}},cj="cdk-overlay-connected-position-bounding-box",gbe=/([A-Za-z%]+)$/,uS=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Re;_resizeSubscription=en.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(n,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this.setOrigin(n)}attach(n){this._overlayRef&&this._overlayRef,this._validatePositions(),n.hostElement.classList.add(cj),this._overlayRef=n,this._boundingBox=n.hostElement,this._pane=n.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let l=this._getOriginPoint(n,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,i)){o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!s||s.overlayFit.visibleArea<u.visibleArea)&&(s={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(let c of o){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Zp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(cj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let n=this._lastPosition;if(n){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,n);this._applyPosition(n,e)}else this.apply()}withScrollableContainers(n){return this._scrollables=n,this}withPositions(n){return this._preferredPositions=n,n.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(n){return this._viewportMargin=n,this}withFlexibleDimensions(n=!0){return this._hasFlexibleDimensions=n,this}withGrowAfterOpen(n=!0){return this._growAfterOpen=n,this}withPush(n=!0){return this._canPush=n,this}withLockedPosition(n=!0){return this._positionLocked=n,this}setOrigin(n){return this._origin=n,this}withDefaultOffsetX(n){return this._offsetX=n,this}withDefaultOffsetY(n){return this._offsetY=n,this}withTransformOriginOn(n){return this._transformOriginSelector=n,this}_getOriginPoint(n,e,i){let r;if(i.originX=="center")r=n.left+n.width/2;else{let s=this._isRtl()?n.right:n.left,a=this._isRtl()?n.left:n.right;r=i.originX=="start"?s:a}e.left<0&&(r-=e.left);let o;return i.originY=="center"?o=n.top+n.height/2:o=i.originY=="top"?n.top:n.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(n,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:n.x+r,y:n.y+o}}_getOverlayFit(n,e,i,r){let o=dj(e),{x:s,y:a}=n,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(s+=l),c&&(a+=c);let u=0-s,d=s+o.width-i.width,p=0-a,h=a+o.height-i.height,m=this._subtractOverflows(o.width,u,d),g=this._subtractOverflows(o.height,p,h),f=m*g;return{visibleArea:f,isCompletelyWithinViewport:o.width*o.height===f,fitsInViewportVertically:g===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(n,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,o=i.right-e.x,s=uj(this._overlayRef.getConfig().minHeight),a=uj(this._overlayRef.getConfig().minWidth),l=n.fitsInViewportVertically||s!=null&&s<=r,c=n.fitsInViewportHorizontally||a!=null&&a<=o;return l&&c}return!1}_pushOverlayOnScreen(n,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:n.x+this._previousPushAmount.x,y:n.y+this._previousPushAmount.y};let r=dj(e),o=this._viewportRect,s=Math.max(n.x+r.width-o.width,0),a=Math.max(n.y+r.height-o.height,0),l=Math.max(o.top-i.top-n.y,0),c=Math.max(o.left-i.left-n.x,0),u=0,d=0;return r.width<=o.width?u=c||-s:u=n.x<this._viewportMargin?o.left-i.left-n.x:0,r.height<=o.height?d=l||-a:d=n.y<this._viewportMargin?o.top-i.top-n.y:0,this._previousPushAmount={x:u,y:d},{x:n.x+u,y:n.y+d}}_applyPosition(n,e){if(this._setTransformOrigin(n),this._setOverlayElementStyles(e,n),this._setBoundingBoxStyles(e,n),n.panelClass&&this._addPanelClasses(n.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(n!==this._lastPosition||!this._lastScrollVisibility||!ybe(this._lastScrollVisibility,i)){let r=new cS(n,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=n,this._isInitialRender=!1}_setTransformOrigin(n){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=n.overlayY;n.overlayX==="center"?i="center":this._isRtl()?i=n.overlayX==="start"?"right":"left":i=n.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(n,e){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(e.overlayY==="top")s=n.y,o=i.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-n.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let h=Math.min(i.bottom-n.y+i.top,n.y),m=this._lastBoundingBoxSize.height;o=h*2,s=n.y-h,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(s=n.y-m/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,c=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,u,d,p;if(c)p=i.width-n.x+this._viewportMargin*2,u=n.x-this._viewportMargin;else if(l)d=n.x,u=i.right-n.x;else{let h=Math.min(i.right-n.x+i.left,n.x),m=this._lastBoundingBoxSize.width;u=h*2,d=n.x-h,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(d=n.x-m/2)}return{top:s,left:d,bottom:a,right:p,width:u,height:o}}_setBoundingBoxStyles(n,e){let i=this._calculateBoundingBoxRect(n,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=hi(i.height),r.top=hi(i.top),r.bottom=hi(i.bottom),r.width=hi(i.width),r.left=hi(i.left),r.right=hi(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=hi(o)),s&&(r.maxWidth=hi(s))}this._lastBoundingBoxSize=i,Zp(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Zp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Zp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(n,e){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();Zp(i,this._getExactOverlayY(e,n,u)),Zp(i,this._getExactOverlayX(e,n,u))}else i.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=hi(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=hi(s.maxWidth):o&&(i.maxWidth="")),Zp(this._pane.style,i)}_getExactOverlayY(n,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,n);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),n.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=hi(o.y);return r}_getExactOverlayX(n,e,i){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,n);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=n.overlayX==="end"?"left":"right":s=n.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=hi(o.x);return r}_getScrollVisibility(){let n=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:aj(n,i),isOriginOutsideView:ZO(n,i),isOverlayClipped:aj(e,i),isOverlayOutsideView:ZO(e,i)}}_subtractOverflows(n,...e){return e.reduce((i,r)=>i-Math.max(r,0),n)}_getNarrowedViewportRect(){let n=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+n-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:n-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(n,e){return e==="x"?n.offsetX==null?this._offsetX:n.offsetX:n.offsetY==null?this._offsetY:n.offsetY}_validatePositions(){}_addPanelClasses(n){this._pane&&Uf(n).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(n=>{this._pane.classList.remove(n)}),this._appliedPanelClasses=[])}_getOriginRect(){let n=this._origin;if(n instanceof nt)return n.nativeElement.getBoundingClientRect();if(n instanceof Element)return n.getBoundingClientRect();let e=n.width||0,i=n.height||0;return{top:n.y,bottom:n.y+i,left:n.x,right:n.x+e,height:i,width:e}}};function Zp(t,n){for(let e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function uj(t){if(typeof t!="number"&&t!=null){let[n,e]=t.split(gbe);return!e||e==="px"?parseFloat(n):null}return t||null}function dj(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function ybe(t,n){return t===n?!0:t.isOriginClipped===n.isOriginClipped&&t.isOriginOutsideView===n.isOriginOutsideView&&t.isOverlayClipped===n.isOverlayClipped&&t.isOverlayOutsideView===n.isOverlayOutsideView}var pj="cdk-global-overlay-wrapper",dS=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(n){let e=n.getConfig();this._overlayRef=n,this._width&&!e.width&&n.updateSize({width:this._width}),this._height&&!e.height&&n.updateSize({height:this._height}),n.hostElement.classList.add(pj),this._isDisposed=!1}top(n=""){return this._bottomOffset="",this._topOffset=n,this._alignItems="flex-start",this}left(n=""){return this._xOffset=n,this._xPosition="left",this}bottom(n=""){return this._topOffset="",this._bottomOffset=n,this._alignItems="flex-end",this}right(n=""){return this._xOffset=n,this._xPosition="right",this}start(n=""){return this._xOffset=n,this._xPosition="start",this}end(n=""){return this._xOffset=n,this._xPosition="end",this}width(n=""){return this._overlayRef?this._overlayRef.updateSize({width:n}):this._width=n,this}height(n=""){return this._overlayRef?this._overlayRef.updateSize({height:n}):this._height=n,this}centerHorizontally(n=""){return this.left(n),this._xPosition="center",this}centerVertically(n=""){return this.top(n),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),c=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",h="",m="",g="";l?g="flex-start":u==="center"?(g="center",p?m=d:h=d):p?u==="left"||u==="end"?(g="flex-end",h=d):(u==="right"||u==="start")&&(g="flex-start",m=d):u==="left"||u==="start"?(g="flex-start",h=d):(u==="right"||u==="end")&&(g="flex-end",m=d),n.position=this._cssPosition,n.marginLeft=l?"0":h,n.marginTop=c?"0":this._topOffset,n.marginBottom=this._bottomOffset,n.marginRight=l?"0":m,e.justifyContent=g,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let n=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(pj),i.justifyContent=i.alignItems=n.marginTop=n.marginBottom=n.marginLeft=n.marginRight=n.position="",this._overlayRef=null,this._isDisposed=!0}},bj=(()=>{class t{_viewportRuler=k(tg);_document=k(at);_platform=k(an);_overlayContainer=k(pS);constructor(){}global(){return new dS}flexibleConnectedTo(e){return new uS(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xi=(()=>{class t{scrollStrategies=k(hj);_overlayContainer=k(pS);_positionBuilder=k(bj);_keyboardDispatcher=k(fj);_injector=k(Vt);_ngZone=k(qe);_document=k(at);_directionality=k(qr);_location=k(Cu);_outsideClickDispatcher=k(gj);_animationsModuleType=k(kn,{optional:!0});_idGenerator=k(br);_renderer=k(Ni).createRenderer(null,null);_appRef;_styleLoader=k(Xi);constructor(){}create(e){this._styleLoader.load(yj);let i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),s=new Ol(e);return s.direction=s.direction||this._directionality.value,new Jp(o,i,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(yi),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Lr)),new Qp(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bbe=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],xj=new he("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xi);return()=>t.scrollStrategies.reposition()}}),ig=(()=>{class t{elementRef=k(nt);constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return t})(),hS=(()=>{class t{_overlay=k(xi);_dir=k(qr,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=en.EMPTY;_attachSubscription=en.EMPTY;_detachSubscription=en.EMPTY;_positionSubscription=en.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=k(xj);_disposeOnNavigation=!1;_ngZone=k(qe);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new Se;positionChange=new Se;attach=new Se;detach=new Se;overlayKeydown=new Se;overlayOutsideClick=new Se;constructor(){let e=k(Fr),i=k(Wi);this._templatePortal=new Na(e,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef?.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef?.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this.attachOverlay():this.detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=bbe);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!xr(i)&&(i.preventDefault(),this.detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let r=this._getOriginElement(),o=Wr(i);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new Ol({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){let i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof ig?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof ig?this.origin.elementRef.nativeElement:this.origin instanceof nt?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(WA(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()})),this.open=!0}detachOverlay(){this._overlayRef?.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.open=!1}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Ot],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Ot],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Ot],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Ot],push:[2,"cdkConnectedOverlayPush","push",Ot],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Ot]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[Zt]})}return t})();function xbe(t){return()=>t.scrollStrategies.reposition()}var vbe={provide:xj,deps:[xi],useFactory:xbe},Hs=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({providers:[xi,vbe],imports:[Ru,Ma,QO,QO]})}return t})();var _be=["tooltip"],eF=20;var tF=new he("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xi);return()=>t.scrollStrategies.reposition({scrollThrottle:eF})}});function wj(t){return()=>t.scrollStrategies.reposition({scrollThrottle:eF})}var Cj={provide:tF,deps:[xi],useFactory:wj};function Tj(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var Sj=new he("mat-tooltip-default-options",{providedIn:"root",factory:Tj});var vj="tooltip-panel",_j=Du({passive:!0}),wbe=8,Cbe=8,Tbe=24,Sbe=200,nF=(()=>{class t{_elementRef=k(nt);_ngZone=k(qe);_platform=k(an);_ariaDescriber=k(jW);_focusMonitor=k(Al);_dir=k(qr);_injector=k(Vt);_viewContainerRef=k(Wi);_defaultOptions=k(Sj,{optional:!0});_overlayRef;_tooltipInstance;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=kj;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=JT(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let i=JT(e);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Au(e)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Au(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(e){let i=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new Re;_isDestroyed=!1;constructor(){let e=this._defaultOptions;e&&(this._showDelay=e.showDelay,this._hideDelay=e.hideDelay,e.position&&(this.position=e.position),e.positionAtOrigin&&(this.positionAtOrigin=e.positionAtOrigin),e.touchGestures&&(this.touchGestures=e.touchGestures),e.tooltipClass&&(this.tooltipClass=e.tooltipClass)),this._viewportMargin=wbe}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Bn(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{e.removeEventListener(i,r,_j)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(i);this._detach(),this._portal=this._portal||new fo(this._tooltipComponent,this._viewContainerRef);let o=this._tooltipInstance=r.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(Bn(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(e)}hide(e=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof nt)return this._overlayRef;this._detach()}let i=this._injector.get(eg).getAncestorScrollContainers(this._elementRef),r=this._injector.get(xi),o=r.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return o.positionChanges.pipe(Bn(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=r.create({direction:this._dir,positionStrategy:o,panelClass:`${this._cssClassPrefix}-${vj}`,scrollStrategy:this._injector.get(tF)()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Bn(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Bn(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Bn(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&s.keyCode===27&&!xr(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(Bn(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let i=e.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();i.withPositions([this._addOffset(ie(ie({},r.main),o.main)),this._addOffset(ie(ie({},r.fallback),o.fallback))])}_addOffset(e){let i=Cbe,r=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-i:e.originY==="bottom"?e.offsetY=i:e.originX==="start"?e.offsetX=r?-i:i:e.originX==="end"&&(e.offsetX=r?i:-i),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"||i=="below"?r={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&e||i=="right"&&!e?r={originX:"start",originY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(r={originX:"end",originY:"center"});let{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",i=this.position,r;i=="above"?r={overlayX:"center",overlayY:"bottom"}:i=="below"?r={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&e||i=="right"&&!e?r={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(r={overlayX:"start",overlayY:"center"});let{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),ts(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){let{overlayY:i,originX:r,originY:o}=e,s;if(i==="center"?this._dir&&this._dir.value==="rtl"?s=r==="end"?"left":"right":s=r==="start"?"left":"right":s=i==="bottom"&&o==="top"?"above":"below",s!==this._currentPosition){let a=this._overlayRef;if(a){let l=`${this._cssClassPrefix}-${vj}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let i;e.x!==void 0&&e.y!==void 0&&(i=e),this.show(void 0,i)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let i=e.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let o=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,r)},this._defaultOptions?.touchLongPressShowDelay??o)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{let r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,_j)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let i=this._injector.get(at).elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let i=this._elementRef.nativeElement,r=i.style;(e==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(e==="on"||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._isDestroyed||ts({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,r){i&2&&st("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return t})(),kj=(()=>{class t{_changeDetectorRef=k(Tn);_elementRef=k(nt);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled;_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new Re;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){let e=k(kn,{optional:!0});this._animationsDisabled=e==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>Tbe&&e.width>=Sbe}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let i=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(i.classList.remove(e?o:r),i.classList.add(e?r:o),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let s=getComputedStyle(i);(s.getPropertyValue("animation-duration")==="0s"||s.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-tooltip-component"]],viewQuery:function(i,r){if(i&1&&sn(_be,7),i&2){let o;Gt(o=Ut())&&(r._tooltip=o.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,r){i&1&&Ce("mouseleave",function(s){return r._handleMouseLeave(s)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,r){if(i&1){let o=Xt();R(0,"div",1,0),Ce("animationend",function(a){return Ve(o),Be(r._handleAnimationEnd(a))}),R(2,"div",2),Y(3),M()()}i&2&&(st("mdc-tooltip--multiline",r._isMultiline),J("ngClass",r.tooltipClass),V(3),kt(r.message))},dependencies:[Np],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return t})(),iF=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({providers:[Cj],imports:[pv,Hs,jt,jt,Yp]})}return t})();var Ij={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function Ibe(t,n){if(t&1){let e=Xt();R(0,"div",1)(1,"button",2),Ce("click",function(){Ve(e);let r=ee();return Be(r.action())}),Y(2),M()()}if(t&2){let e=ee();V(2),bn(" ",e.data.action," ")}}var Ebe=["label"];function Dbe(t,n){}var Abe=Math.pow(2,31)-1,vv=class{_overlayRef;instance;containerInstance;_afterDismissed=new Re;_afterOpened=new Re;_onAction=new Re;_durationTimeoutId;_dismissedByAction=!1;constructor(n,e){this._overlayRef=e,this.containerInstance=n,n._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(n){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(n,Abe))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},Ej=new he("MatSnackBarData"),rg=class{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"},Nbe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return t})(),Mbe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return t})(),Rbe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return t})(),Dj=(()=>{class t{snackBarRef=k(vv);data=k(Ej);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(i,r){i&1&&(R(0,"div",0),Y(1),M(),be(2,Ibe,3,1,"div",1)),i&2&&(V(),bn(" ",r.data.message,`
`),V(),Oi(r.hasAction?2:-1))},dependencies:[cs,Nbe,Mbe,Rbe],styles:[`.mat-mdc-simple-snack-bar{display:flex}
`],encapsulation:2,changeDetection:0})}return t})(),rF="_mat-snack-bar-enter",oF="_mat-snack-bar-exit",Obe=(()=>{class t extends Ml{_ngZone=k(qe);_elementRef=k(nt);_changeDetectorRef=k(Tn);_platform=k(an);_rendersRef;_animationsDisabled=k(kn,{optional:!0})==="NoopAnimations";snackBarConfig=k(rg);_document=k(at);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new Re;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new Re;_onExit=new Re;_onEnter=new Re;_animationState="void";_live;_label;_role;_liveElementId=k(br).getId("mat-snack-bar-container-live-");constructor(){super();let e=this.snackBarConfig;e.politeness==="assertive"&&!e.announcementMessage?this._live="assertive":e.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert")),this._rendersRef=bf(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),i}attachTemplatePortal(e){this._assertNotAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),i}attachDomPortal=e=>{this._assertNotAttached();let i=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),i};onAnimationEnd(e){e===oF?this._completeExit():e===rF&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe(Xn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(rF)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(rF)},200)))}exit(){return this._destroyed?Qe(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe(Xn(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(oF)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(oF),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(s=>e.classList.add(s)):e.classList.add(i)),this._exposeToModals();let r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){let e=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){let o=i[r],s=o.getAttribute("aria-owns");this._trackedModals.add(o),s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let i=e.getAttribute("aria-owns");if(i){let r=i.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;let e=this._elementRef.nativeElement,i=e.querySelector("[aria-hidden]"),r=e.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(i,r){if(i&1&&(sn(Rl,7),sn(Ebe,7)),i&2){let o;Gt(o=Ut())&&(r._portalOutlet=o.first),Gt(o=Ut())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(i,r){i&1&&Ce("animationend",function(s){return r.onAnimationEnd(s.animationName)})("animationcancel",function(s){return r.onAnimationEnd(s.animationName)}),i&2&&st("mat-snack-bar-container-enter",r._animationState==="visible")("mat-snack-bar-container-exit",r._animationState==="hidden")("mat-snack-bar-container-animations-enabled",!r._animationsDisabled)},features:[Mn],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(R(0,"div",1)(1,"div",2,0)(3,"div",3),be(4,Dbe,0,0,"ng-template",4),M(),ke(5,"div"),M()()),i&2&&(V(5),Le("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[Rl],styles:[`@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}
`],encapsulation:2})}return t})();function Fbe(){return new rg}var Lbe=new he("mat-snack-bar-default-options",{providedIn:"root",factory:Fbe}),_v=(()=>{class t{_overlay=k(xi);_live=k(dv);_injector=k(Vt);_breakpointObserver=k(uv);_parentSnackBar=k(t,{optional:!0,skipSelf:!0});_defaultConfig=k(Lbe);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=Dj;snackBarContainerComponent=Obe;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){let o=ie(ie({},this._defaultConfig),r);return o.data={message:e,action:i},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){let r=i&&i.viewContainerRef&&i.viewContainerRef.injector,o=Vt.create({parent:r||this._injector,providers:[{provide:rg,useValue:i}]}),s=new fo(this.snackBarContainerComponent,i.viewContainerRef,o),a=e.attach(s);return a.instance.snackBarConfig=i,a.instance}_attach(e,i){let r=ie(ie(ie({},new rg),this._defaultConfig),i),o=this._createOverlay(r),s=this._attachSnackBarContainer(o,r),a=new vv(s,o);if(e instanceof Fr){let l=new Na(e,null,{$implicit:r.data,snackBarRef:a});a.instance=s.attachTemplatePortal(l)}else{let l=this._createInjector(r,a),c=new fo(e,void 0,l),u=s.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe(Ij.HandsetPortrait).pipe(Bn(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){let i=new Ol;i.direction=e.direction;let r=this._overlay.position().global(),o=e.direction==="rtl",s=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!o||e.horizontalPosition==="end"&&o,a=!s&&e.horizontalPosition!=="center";return s?r.left("0"):a?r.right("0"):r.centerHorizontally(),e.verticalPosition==="top"?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){let r=e&&e.viewContainerRef&&e.viewContainerRef.injector;return Vt.create({parent:r||this._injector,providers:[{provide:vv,useValue:i},{provide:Ej,useValue:e.data}]})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Aj=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({providers:[_v],imports:[Hs,Ma,mo,jt,Dj,jt]})}return t})();function Pbe(t,n){}var Ou=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var aF=(()=>{class t extends Ml{_elementRef=k(nt);_focusTrapFactory=k(LO);_config;_interactivityChecker=k(FO);_ngZone=k(qe);_overlayRef=k(Jp);_focusMonitor=k(Al);_renderer=k(di);_changeDetectorRef=k(Tn);_injector=k(Vt);_platform=k(an);_document=k(at,{optional:!0});_portalOutlet;_focusTrapped=new Re;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_isDestroyed=!1;constructor(){super(),this._config=k(Ou,{optional:!0})||new Ou,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._focusTrapped.complete(),this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{o(),s(),e.removeAttribute("tabindex")},o=this._renderer.listen(e,"blur",r),s=this._renderer.listen(e,"mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(e){this._isDestroyed||ts(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus(e);break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement(e)||this._focusDialogContainer(e);break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]',e);break;default:this._focusByCssSelector(this._config.autoFocus,e);break}this._focusTrapped.next()},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let r=av(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(e){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus(e)}_containsFocus(){let e=this._elementRef.nativeElement,i=av();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=av()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(i&1&&sn(Rl,7),i&2){let o;Gt(o=Ut())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){i&2&&Le("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Mn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){i&1&&be(0,Pbe,0,0,"ng-template",0)},dependencies:[Rl],styles:[`.cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}
`],encapsulation:2})}return t})(),wv=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new Re;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(n,e){this.overlayRef=n,this.config=e,this.disableClose=e.disableClose,this.backdropClick=n.backdropClick(),this.keydownEvents=n.keydownEvents(),this.outsidePointerEvents=n.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!xr(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=n.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(n,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(n),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(n="",e=""){return this.overlayRef.updateSize({width:n,height:e}),this}addPanelClass(n){return this.overlayRef.addPanelClass(n),this}removePanelClass(n){return this.overlayRef.removePanelClass(n),this}},$be=new he("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=k(xi);return()=>t.scrollStrategies.block()}}),Vbe=new he("DialogData"),Bbe=new he("DefaultDialogConfig");var lF=(()=>{class t{_overlay=k(xi);_injector=k(Vt);_defaultOptions=k(Bbe,{optional:!0});_parentDialog=k(t,{optional:!0,skipSelf:!0});_overlayContainer=k(pS);_idGenerator=k(br);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Re;_afterOpenedAtThisLevel=new Re;_ariaHiddenElements=new Map;_scrollStrategy=k($be);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=pa(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Mo(void 0)));constructor(){}open(e,i){let r=this._defaultOptions||new Ou;i=ie(ie({},r),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let o=this._getOverlayConfig(i),s=this._overlay.create(o),a=new wv(s,i),l=this._attachContainer(s,a,i);if(a.containerInstance=l,!this.openDialogs.length){let c=this._overlayContainer.getContainerElement();l._focusTrapped?l._focusTrapped.pipe(Xn(1)).subscribe(()=>{this._hideNonDialogContentFromAssistiveTechnology(c)}):this._hideNonDialogContentFromAssistiveTechnology(c)}return this._attachDialogContent(e,a,l,i),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){sF(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){sF(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),sF(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new Ol({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,r){let o=r.injector||r.viewContainerRef?.injector,s=[{provide:Ou,useValue:r},{provide:wv,useValue:i},{provide:Jp,useValue:e}],a;r.container?typeof r.container=="function"?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=aF;let l=new fo(a,r.viewContainerRef,Vt.create({parent:o||this._injector,providers:s}));return e.attach(l).instance}_attachDialogContent(e,i,r,o){if(e instanceof Fr){let s=this._createInjector(o,i,r,void 0),a={$implicit:o.data,dialogRef:i};o.templateContext&&(a=ie(ie({},a),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),r.attachTemplatePortal(new Na(e,null,a,s))}else{let s=this._createInjector(o,i,r,this._injector),a=r.attachComponentPortal(new fo(e,o.viewContainerRef,s));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(e,i,r,o){let s=e.injector||e.viewContainerRef?.injector,a=[{provide:Vbe,useValue:e.data},{provide:wv,useValue:i}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(i,e,r)):a.push(...e.providers)),e.direction&&(!s||!s.get(qr,null,{optional:!0}))&&a.push({provide:qr,useValue:{value:e.direction,change:Qe()}}),Vt.create({parent:s||o,providers:a})}_removeOpenDialog(e,i){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(e){if(e.parentElement){let i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let o=i[r];o!==e&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function sF(t,n){let e=t.length;for(;e--;)n(t[e])}var Mj=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({providers:[lF],imports:[Hs,Ma,pv,Ma]})}return t})();function zbe(t,n){}var Tv=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},cF="mdc-dialog--open",Rj="mdc-dialog--opening",Oj="mdc-dialog--closing",Gbe=150,Ube=75,Pj=(()=>{class t extends aF{_animationMode=k(kn,{optional:!0});_animationStateChanged=new Se;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Lj(this._config.enterAnimationDuration)??Gbe:0;_exitAnimationDuration=this._animationsEnabled?Lj(this._config.exitAnimationDuration)??Ube:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Fj,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Rj,cF)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(cF),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(cF),this._animationsEnabled?(this._hostElement.style.setProperty(Fj,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Oj)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Rj,Oj)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275cmp=De({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){i&2&&(Cl("id",r._config.id),Le("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),st("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},features:[Mn],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){i&1&&(R(0,"div",0)(1,"div",1),be(2,zbe,0,0,"ng-template",2),M()())},dependencies:[Rl],styles:[`.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}
`],encapsulation:2})}return t})(),Fj="--mat-dialog-transition-duration";function Lj(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Au(t.substring(0,t.length-2)):t.endsWith("s")?Au(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var Cv=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(Cv||{}),Fu=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new Re;_beforeClosed=new Re;_result;_closeFallbackTimeout;_state=Cv.OPEN;_closeInteractionType;constructor(n,e,i){this._ref=n,this._containerInstance=i,this.disableClose=e.disableClose,this.id=n.id,n.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(Cn(r=>r.state==="opened"),Xn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Cn(r=>r.state==="closed"),Xn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),n.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),ul(this.backdropClick(),this.keydownEvents().pipe(Cn(r=>r.keyCode===27&&!this.disableClose&&!xr(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),uF(this,r.type==="keydown"?"keyboard":"mouse"))})}close(n){this._result=n,this._containerInstance._animationStateChanged.pipe(Cn(e=>e.state==="closing"),Xn(1)).subscribe(e=>{this._beforeClosed.next(n),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=Cv.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(n){let e=this._ref.config.positionStrategy;return n&&(n.left||n.right)?n.left?e.left(n.left):e.right(n.right):e.centerHorizontally(),n&&(n.top||n.bottom)?n.top?e.top(n.top):e.bottom(n.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(n="",e=""){return this._ref.updateSize(n,e),this}addPanelClass(n){return this._ref.addPanelClass(n),this}removePanelClass(n){return this._ref.removePanelClass(n),this}getState(){return this._state}_finishDialogClose(){this._state=Cv.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function uF(t,n,e){return t._closeInteractionType=n,t.close(e)}var mS=new he("MatMdcDialogData"),$j=new he("mat-mdc-dialog-default-options"),Vj=new he("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xi);return()=>t.scrollStrategies.block()}});var og=(()=>{class t{_overlay=k(xi);_defaultOptions=k($j,{optional:!0});_scrollStrategy=k(Vj);_parentDialog=k(t,{optional:!0,skipSelf:!0});_idGenerator=k(br);_dialog=k(lF);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Re;_afterOpenedAtThisLevel=new Re;dialogConfigClass=Tv;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=pa(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Mo(void 0)));constructor(){this._dialogRefConstructor=Fu,this._dialogContainerType=Pj,this._dialogDataToken=mS}open(e,i){let r;i=ie(ie({},this._defaultOptions||new Tv),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(e,At(ie({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Ou,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),dF=(()=>{class t{dialogRef=k(Fu,{optional:!0});_elementRef=k(nt);_dialog=k(og);ariaLabel;type="button";dialogResult;_matDialogClose;constructor(){}ngOnInit(){this.dialogRef||(this.dialogRef=zj(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){let i=e._matDialogClose||e._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(e){uF(this.dialogRef,e.screenX===0&&e.screenY===0?"keyboard":"mouse",this.dialogResult)}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(i,r){i&1&&Ce("click",function(s){return r._onButtonClick(s)}),i&2&&Le("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Zt]})}return t})(),Bj=(()=>{class t{_dialogRef=k(Fu,{optional:!0});_elementRef=k(nt);_dialog=k(og);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=zj(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t})}return t})(),pF=(()=>{class t extends Bj{id=k(br).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275dir=ot({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){i&2&&Cl("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Mn]})}return t})(),hF=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[CU([YO])]})}return t})(),mF=(()=>{class t extends Bj{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275dir=ot({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,r){i&2&&st("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},features:[Mn]})}return t})();function zj(t,n){let e=t.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?n.find(i=>i.id===e.id):null}var Sv=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({providers:[og],imports:[Mj,Hs,Ma,jt,jt]})}return t})();var Hbe=()=>[1,2,3,4,5,6,7,8,9];function Wbe(t,n){if(t&1&&(R(0,"div",3),Y(1),M()),t&2){let e=ee();V(),kt(e.value)}}function jbe(t,n){if(t&1&&(R(0,"span"),Y(1),M()),t&2){let e=ee().$implicit;V(),kt(e)}}function qbe(t,n){if(t&1&&(R(0,"div",6),be(1,jbe,2,1,"span",7),M()),t&2){let e=n.$implicit,i=ee(2);V(),J("ngIf",i.notes.includes(e))}}function Xbe(t,n){t&1&&(R(0,"div",4),be(1,qbe,2,1,"div",5),M()),t&2&&(V(),J("ngForOf",_u(1,Hbe)))}var sg=class t{value=0;notes=[];isOriginal=!1;isSelected=!1;isSameNumber=!1;isConflict=!1;isHighlighted=!1;isCoachHighlighted=!1;cellClick=new Se;onClick(){this.cellClick.emit()}getNotesGrid(){let n=[[null,null,null],[null,null,null],[null,null,null]];return this.notes.forEach(e=>{let i=Math.floor((e-1)/3),r=(e-1)%3;n[i][r]=e}),n}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=De({type:t,selectors:[["app-cell"]],inputs:{value:"value",notes:"notes",isOriginal:"isOriginal",isSelected:"isSelected",isSameNumber:"isSameNumber",isConflict:"isConflict",isHighlighted:"isHighlighted",isCoachHighlighted:"isCoachHighlighted"},outputs:{cellClick:"cellClick"},decls:3,vars:14,consts:[[1,"cell",3,"click"],["class","cell-value",4,"ngIf"],["class","notes-grid",4,"ngIf"],[1,"cell-value"],[1,"notes-grid"],["class","note-cell",4,"ngFor","ngForOf"],[1,"note-cell"],[4,"ngIf"]],template:function(e,i){e&1&&(R(0,"div",0),Ce("click",function(){return i.onClick()}),be(1,Wbe,2,1,"div",1)(2,Xbe,2,2,"div",2),M()),e&2&&(st("original",i.isOriginal)("selected",i.isSelected)("same-number",i.isSameNumber)("conflict",i.isConflict)("highlighted",i.isHighlighted)("coach-highlighted",i.isCoachHighlighted),V(),J("ngIf",i.value!==0),V(),J("ngIf",i.value===0&&i.notes.length>0))},dependencies:[pi,Ur,Yn],styles:[".cell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;height:100%;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .2s ease;background-color:#fff;position:relative;box-sizing:border-box;aspect-ratio:1;min-height:35px;border-radius:2px;border:1px solid #ccc}.cell[_ngcontent-%COMP%]:hover{background-color:#f3f4f6}.cell.selected[_ngcontent-%COMP%]{background-color:#dbeafe!important;border-color:#3b82f6;box-shadow:inset 0 0 0 2px #3b82f6;color:#fff}.cell.original[_ngcontent-%COMP%]{font-weight:700;color:#1f2937;background-color:#f9fafb}.cell.same-number[_ngcontent-%COMP%]{background-color:#ecfdf5}.cell.conflict[_ngcontent-%COMP%]{background-color:#fef2f2;color:#dc2626}.cell.highlighted[_ngcontent-%COMP%]{background-color:#fef3c7}.coach-highlighted[_ngcontent-%COMP%]{background-color:#ffc10780;animation:_ngcontent-%COMP%_pulse-highlight 2s infinite}@keyframes _ngcontent-%COMP%_pulse-highlight{0%{box-shadow:0 0 #ffc107b3}70%{box-shadow:0 0 0 5px #ffc10700}to{box-shadow:0 0 #ffc10700}}.cell-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#374151;line-height:1}.cell.original[_ngcontent-%COMP%]   .cell-value[_ngcontent-%COMP%]{color:#1f2937;font-weight:700}.notes-grid[_ngcontent-%COMP%]{position:absolute;inset:1px;display:grid;grid-template-rows:repeat(3,1fr);grid-template-columns:repeat(3,1fr);box-sizing:border-box;gap:0}.note-cell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-size:.5rem;font-weight:600;color:#6b7280;line-height:1}.note-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:inherit;line-height:1}@media (max-width: 768px){.cell[_ngcontent-%COMP%]{min-height:30px}.cell-value[_ngcontent-%COMP%]{font-size:1.25rem}.note-cell[_ngcontent-%COMP%]{font-size:.45rem}}@media (min-width: 1024px){.cell[_ngcontent-%COMP%]{min-height:50px}.cell-value[_ngcontent-%COMP%]{font-size:2rem}.note-cell[_ngcontent-%COMP%]{font-size:.65rem}}.dark-theme[_nghost-%COMP%]   .cell[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .cell[_ngcontent-%COMP%]{border-color:#444}.dark-theme[_nghost-%COMP%]   .original[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .original[_ngcontent-%COMP%]{color:#ddd}.dark-theme[_nghost-%COMP%]   .selected[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .selected[_ngcontent-%COMP%]{background-color:#4285f4cc}.dark-theme[_nghost-%COMP%]   .same-number[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .same-number[_ngcontent-%COMP%]{background-color:#4285f466}.dark-theme[_nghost-%COMP%]   .highlighted[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .highlighted[_ngcontent-%COMP%]{background-color:#4285f433}.dark-theme[_nghost-%COMP%]   .notes-grid[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .notes-grid[_ngcontent-%COMP%]{color:#999}.dark-theme[_nghost-%COMP%]   .coach-highlighted[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .coach-highlighted[_ngcontent-%COMP%]{background-color:#ffc10799}"]})};function Kbe(t,n){if(t&1&&(R(0,"p",13),Y(1),M()),t&2){let e=ee(2);V(),bn(" Value: ",e.data.value," ")}}function Ybe(t,n){if(t&1&&(R(0,"div",10)(1,"p",11),Y(2),M(),be(3,Kbe,2,1,"p",12),M()),t&2){let e=ee();V(2),Tl(" Position: Row ",e.data.position.row+1,", Column ",e.data.position.col+1," "),V(),J("ngIf",e.data.value)}}function Qbe(t,n){if(t&1&&(R(0,"div",14)(1,"p",15),Y(2),M()()),t&2){let e=ee();V(2),Tl("Technique ",e.data.currentIndex+1," of ",e.data.techniqueCount,"")}}function Zbe(t,n){if(t&1&&(R(0,"div",16)(1,"div",17)(2,"button",18),Y(3," Skip This "),M(),R(4,"button",18),Y(5),M(),R(6,"button",18),Y(7," Skip to End "),M()()()),t&2){let e=ee();V(2),J("mat-dialog-close","skip-this"),V(2),J("mat-dialog-close","skip-type"),V(),bn(" Skip All ",e.data.technique," "),V(),J("mat-dialog-close","skip-all")}}var th=class t{constructor(n,e){this.dialogRef=n;this.data=e}static \u0275fac=function(e){return new(e||t)(Me(Fu),Me(mS))};static \u0275cmp=De({type:t,selectors:[["app-technique-dialog"]],decls:15,vars:6,consts:[[1,"technique-dialog-container"],["mat-dialog-title",""],[3,"innerHTML"],["class","technique-details",4,"ngIf"],["class","teaching-progress",4,"ngIf"],[1,"button-container"],[1,"primary-actions"],["mat-raised-button","","color","primary",1,"apply-button",3,"mat-dialog-close"],["mat-button","","mat-dialog-close","",1,"cancel-button"],["class","skip-options",4,"ngIf"],[1,"technique-details"],[1,"position"],["class","value",4,"ngIf"],[1,"value"],[1,"teaching-progress"],[1,"progress-text"],[1,"skip-options"],[1,"skip-buttons"],["mat-stroked-button","",1,"skip-button",3,"mat-dialog-close"]],template:function(e,i){e&1&&(R(0,"div",0)(1,"h2",1),Y(2),M(),R(3,"mat-dialog-content"),ke(4,"p",2),be(5,Ybe,4,3,"div",3)(6,Qbe,3,2,"div",4),M(),R(7,"mat-dialog-actions")(8,"div",5)(9,"div",6)(10,"button",7),Y(11," Apply "),M(),R(12,"button",8),Y(13,"Cancel"),M()(),be(14,Zbe,8,4,"div",9),M()()()),e&2&&(V(2),kt(i.data.title),V(2),J("innerHTML",i.data.message,CC),V(),J("ngIf",i.data.position),V(),J("ngIf",i.data.isTeachingMode&&i.data.techniqueCount&&i.data.currentIndex!==void 0),V(4),J("mat-dialog-close","apply"),V(4),J("ngIf",i.data.showSkipOptions))},dependencies:[pi,Yn,Sv,dF,pF,mF,hF,mo,cs],styles:["[_nghost-%COMP%]{display:block}  .technique-dialog .mat-mdc-dialog-surface{background-color:#fffffff2!important;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);position:absolute;top:10px;right:10px;max-width:400px;max-height:calc(100vh - 20px);width:95%;overflow:auto;border-radius:12px;box-shadow:0 8px 32px #0003;border:1px solid rgba(255,255,255,.3)}  .dark-theme .technique-dialog .mat-mdc-dialog-surface{background-color:#2d2d2df2!important;border:1px solid rgba(255,255,255,.1)}.technique-dialog-container[_ngcontent-%COMP%]{color:#333;padding:0 5px}.dark-theme[_nghost-%COMP%]   .technique-dialog-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .technique-dialog-container[_ngcontent-%COMP%]{color:#f5f5f5}mat-dialog-content[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding:0}.technique-details[_ngcontent-%COMP%]{margin:1rem 0;padding:.75rem;background:#0000000a;border-radius:8px}.technique-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0}.teaching-progress[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-style:italic;color:#0009}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;width:100%}.primary-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end}.apply-button[_ngcontent-%COMP%]{min-width:100px}.skip-options[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.12);padding-top:1rem}.skip-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.skip-button[_ngcontent-%COMP%]{width:100%;justify-content:center}.dark-theme[_nghost-%COMP%]   .technique-details[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .technique-details[_ngcontent-%COMP%]{background:#ffffff1a}.dark-theme[_nghost-%COMP%]   .teaching-progress[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .teaching-progress[_ngcontent-%COMP%]{color:#ffffffb3}.dark-theme[_nghost-%COMP%]   .skip-options[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .skip-options[_ngcontent-%COMP%]{border-top-color:#ffffff1f}@media (max-width: 600px){.technique-dialog-container[_ngcontent-%COMP%]{padding:1rem .75rem}mat-dialog-content[_ngcontent-%COMP%]{margin-bottom:1rem}.button-container[_ngcontent-%COMP%]{gap:.75rem}.primary-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;gap:.5rem}.apply-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{width:100%;margin:0}.skip-buttons[_ngcontent-%COMP%]{gap:.5rem}.skip-button[_ngcontent-%COMP%]{padding:.5rem}}"]})};var ag=class t{constructor(n){this.http=n}apiUrl="https://sudoku-api.vercel.app/api/dosuku";getNewBoard(n){return this.http.get(`${this.apiUrl}?query=${encodeURIComponent("{newboard(limit:1){grids{value,solution,difficulty},results,message}}")}`).pipe(rt(i=>{let r=i.newboard.grids[0];return{grid:r.value,solution:r.solution,difficulty:r.difficulty}}),Qo(i=>(console.error("Error fetching Sudoku board:",i),Qe(this.getFallbackBoard()))))}getFallbackBoard(){return{grid:[[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]],solution:[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]],difficulty:"Medium"}}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=0;a<3;a++)for(let l=0;l<3;l++)if(n[o+a][s+l]===r)return!1;return!0}isSolved(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0)return!1;return!0}static \u0275fac=function(e){return new(e||t)(Xe(Tf))};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var fS=class t{constructor(){}generateBoard(n="medium"){let e=this.generateCompleteSolution(),i=this.removeNumbers(e,n);return{grid:this.deepCopy(i),solution:this.deepCopy(e),difficulty:n}}generateCompleteSolution(){let n=Array(9).fill(null).map(()=>Array(9).fill(0));return this.solveSudoku(n),this.shuffleBoard(n),n}solveSudoku(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0){let r=this.shuffleArray([1,2,3,4,5,6,7,8,9]);for(let o of r)if(this.isValidPlacement(n,e,i,o)){if(n[e][i]=o,this.solveSudoku(n))return!0;n[e][i]=0}return!1}return!0}isValidPlacement(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=0;a<3;a++)for(let l=0;l<3;l++)if(n[o+a][s+l]===r)return!1;return!0}removeNumbers(n,e){let i=this.deepCopy(n),r=this.getCellsToRemove(e),o=0,s=r*3;for(let a=0;a<s&&o<r;a++){let l=Math.floor(Math.random()*9),c=Math.floor(Math.random()*9);if(i[l][c]!==0){let u=i[l][c];i[l][c]=0,this.hasUniqueSolution(i)?o++:i[l][c]=u}}return i}getCellsToRemove(n){switch(n){case"easy":return 35;case"medium":return 45;case"hard":return 55;case"expert":return 64;default:return 45}}hasUniqueSolution(n){let e=this.deepCopy(n),i=0,r=o=>{if(!(i>1)){for(let s=0;s<9;s++)for(let a=0;a<9;a++)if(o[s][a]===0){for(let l=1;l<=9;l++)this.isValidPlacement(o,s,a,l)&&(o[s][a]=l,r(o),o[s][a]=0);return}i++}};return r(e),i===1}shuffleBoard(n){for(let e=0;e<3;e++){let i=[e*3,e*3+1,e*3+2];this.shuffleArray(i);let r=this.deepCopy(n);for(let o=0;o<3;o++)for(let s=0;s<9;s++)n[e*3+o][s]=r[i[o]][s]}for(let e=0;e<3;e++){let i=[e*3,e*3+1,e*3+2];this.shuffleArray(i);let r=this.deepCopy(n);for(let o=0;o<9;o++)for(let s=0;s<3;s++)n[o][e*3+s]=r[o][i[s]]}}shuffleArray(n){for(let e=n.length-1;e>0;e--){let i=Math.floor(Math.random()*(e+1));[n[e],n[i]]=[n[i],n[e]]}return n}deepCopy(n){return n.map(e=>[...e])}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var Hj=(c=>(c.NAKED_SINGLE="Naked Single",c.HIDDEN_SINGLE="Hidden Single",c.NAKED_PAIR="Naked Pair",c.HIDDEN_PAIR="Hidden Pair",c.NAKED_TRIPLE="Naked Triple",c.HIDDEN_TRIPLE="Hidden Triple",c.X_WING="X-Wing",c.SWORDFISH="Swordfish",c.Y_WING="Y-Wing",c))(Hj||{}),gS=class t{model=null;modelLoaded=!1;modelLoading=!1;MODEL_URL="assets/models/sudoku_coach/model.json";userProfileSubject=new Zn({strengths:[],weaknesses:[],lastUpdated:new Date});techniqueStats=new Map;constructor(){this.initializeStats(),this.loadModel()}initializeStats(){Object.values(Hj).forEach(e=>{this.techniqueStats.set(e,{technique:e,usageCount:0,successRate:0})});let n=localStorage.getItem("sudoku-technique-stats");if(n)try{let e=JSON.parse(n);Object.entries(e).forEach(([i,r])=>{this.techniqueStats.set(i,r)})}catch(e){console.error("Failed to parse saved technique statistics:",e)}}loadModel(){return H(this,null,function*(){if(!(this.modelLoaded||this.modelLoading)){this.modelLoading=!0;try{yield new Promise(n=>setTimeout(n,1e3)),this.modelLoaded=!0,console.log("Technique detection model loaded successfully")}catch(n){console.error("Failed to load technique detection model:",n)}finally{this.modelLoading=!1}}})}detectTechniques(n,e){return H(this,null,function*(){return yield this.ensureModelLoaded(),this.detectTechniquesRuleBased(n,e)})}detectTechniquesRuleBased(n,e){let i=[],r=this.checkEmptyCellsWithoutNotes(n,e);for(let o=0;o<9;o++)for(let s=0;s<9;s++)if(n[o][s]===0&&e[o][s].length===1){let a=e[o][s][0];i.push({technique:"Naked Single",targetCell:{row:o,col:s},explanation:`Only the number ${a} can go in this cell, as all other candidates have been eliminated.`,value:a,confidence:.95,detailExplanation:`In R${o+1}C${s+1}, all other candidates have been eliminated, leaving ${a} as the only possible value. This is called a "Naked Single" because the single candidate is directly visible.`})}for(let o=0;o<9;o++){let s=new Map;for(let a=0;a<9;a++)if(n[o][a]===0)for(let l of e[o][a])if(!s.has(l))s.set(l,{count:1,col:a});else{let c=s.get(l);s.set(l,{count:c.count+1,col:c.col})}for(let[a,l]of s.entries())l.count===1&&i.push({technique:"Hidden Single",targetCell:{row:o,col:l.col},explanation:`Only this cell in row ${o+1} can contain the number ${a}, as it's eliminated from all other cells.`,value:a,confidence:.9,detailExplanation:`In row ${o+1}, the number ${a} can only go in column ${l.col+1} because it's eliminated from all other cells in this row. This is called a "Hidden Single" because the unique placement isn't immediately obvious.`})}for(let o=0;o<9;o++){let s=new Map;for(let a=0;a<9;a++)if(n[a][o]===0)for(let l of e[a][o])if(!s.has(l))s.set(l,{count:1,row:a});else{let c=s.get(l);s.set(l,{count:c.count+1,row:c.row})}for(let[a,l]of s.entries())l.count===1&&i.push({technique:"Hidden Single",targetCell:{row:l.row,col:o},explanation:`Only this cell in column ${o+1} can contain the number ${a}, as it's eliminated from all other cells.`,value:a,confidence:.9,detailExplanation:`In column ${o+1}, the number ${a} can only go in row ${l.row+1} because it's eliminated from all other cells in this column. This is a column-based "Hidden Single".`})}for(let o=0;o<3;o++)for(let s=0;s<3;s++){let a=o*3,l=s*3,c=new Map;for(let u=a;u<a+3;u++)for(let d=l;d<l+3;d++)if(n[u][d]===0)for(let p of e[u][d])if(!c.has(p))c.set(p,{count:1,row:u,col:d});else{let h=c.get(p);c.set(p,{count:h.count+1,row:h.row,col:h.col})}for(let[u,d]of c.entries())d.count===1&&i.push({technique:"Hidden Single",targetCell:{row:d.row,col:d.col},explanation:`Only this cell in box ${o*3+s+1} can contain the number ${u}.`,value:u,confidence:.9,detailExplanation:`In the ${o*3+s+1} box, the number ${u} can only go at R${d.row+1}C${d.col+1} because it's eliminated from all other cells in this box. This is a box-based "Hidden Single".`})}return r&&i.forEach(o=>{o.prerequisites=["You need to fill in the notes (candidates) for empty cells to use this technique effectively."]}),i}checkEmptyCellsWithoutNotes(n,e){for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0&&e[i][r].length===0)return!0;return!1}getHint(n,e){return H(this,null,function*(){let i=yield this.detectTechniques(n,e);return i.length===0?null:(i.sort((r,o)=>o.confidence-r.confidence),i[0])})}getHintForCell(n,e,i,r){return H(this,null,function*(){if(n[i][r]!==0)return null;let s=(yield this.detectTechniques(n,e)).filter(a=>a.targetCell&&a.targetCell.row===i&&a.targetCell.col===r);return s.length>0?(s.sort((a,l)=>l.confidence-a.confidence),s[0]):null})}recordTechniqueUsage(n,e){let i=this.techniqueStats.get(n);if(i){i.usageCount++;let r=i.successRate*(i.usageCount-1)+(e?1:0);i.successRate=r/i.usageCount,this.saveTechniqueStats(),this.updateUserProfile()}}saveTechniqueStats(){try{let n=Object.fromEntries(this.techniqueStats);localStorage.setItem("sudoku-technique-stats",JSON.stringify(n))}catch(n){console.error("Failed to save technique statistics:",n)}}updateUserProfile(){let e=[...Array.from(this.techniqueStats.values())].filter(s=>s.usageCount>0).sort((s,a)=>a.successRate-s.successRate),i=e.slice(0,3).map(s=>s.technique),r=[...e].sort((s,a)=>s.successRate-a.successRate).slice(0,3).map(s=>s.technique),o={strengths:i,weaknesses:r,lastUpdated:new Date};this.userProfileSubject.next(o);try{localStorage.setItem("sudoku-user-profile",JSON.stringify(o))}catch(s){console.error("Failed to save user technique profile:",s)}}getUserProfile(){return this.userProfileSubject.asObservable()}recommendDifficulty(){let n=this.userProfileSubject.value,e=["X-Wing","Swordfish","Y-Wing"],i=n.weaknesses.some(o=>e.includes(o)),r=n.strengths.some(o=>e.includes(o));return i?"hard":r?"expert":n.weaknesses.includes("Hidden Pair")?"medium":"easy"}ensureModelLoaded(){return H(this,null,function*(){for(!this.modelLoaded&&!this.modelLoading&&(yield this.loadModel());this.modelLoading;)yield new Promise(n=>setTimeout(n,100))})}getTechniqueStats(){return Array.from(this.techniqueStats.values())}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var txe=()=>[1,2,3,4,5,6,7,8,9];function nxe(t,n){t&1&&(R(0,"div",12),ke(1,"div",13),R(2,"p"),Y(3,"Loading puzzle..."),M()())}function ixe(t,n){if(t&1){let e=Xt();R(0,"app-cell",20),Ce("cellClick",function(){let r=Ve(e).$implicit,o=ee(3);return Be(o.selectCell(r.row,r.col))}),M()}if(t&2){let e=n.$implicit,i=ee(3);J("value",e.value)("notes",e.notes)("isOriginal",e.isOriginal)("isSelected",e.isSelected)("isSameNumber",e.isSameNumber)("isHighlighted",e.isHighlighted)("isCoachHighlighted",i.isCoachHighlighted(e.row,e.col))}}function rxe(t,n){if(t&1&&(R(0,"div",18),be(1,ixe,1,7,"app-cell",19),M()),t&2){let e=n.$implicit;V(),J("ngForOf",e)}}function oxe(t,n){if(t&1&&(R(0,"div",14)(1,"div",15)(2,"div",16),be(3,rxe,2,1,"div",17),M()()()),t&2){let e=ee();V(3),J("ngForOf",e.getSections())}}function sxe(t,n){if(t&1){let e=Xt();R(0,"button",30),Ce("click",function(){let r=Ve(e).$implicit,o=ee(2);return Be(o.enterNumber(r))}),Y(1),M()}if(t&2){let e=n.$implicit,i=ee(2);st("notes-mode",i.notesMode),V(),bn(" ",e," ")}}function axe(t,n){if(t&1){let e=Xt();R(0,"div",21)(1,"div",22),be(2,sxe,2,3,"button",23),M(),R(3,"div",24)(4,"button",25),Ce("click",function(){Ve(e);let r=ee();return Be(r.toggleNotesMode())}),R(5,"mat-icon"),Y(6,"edit"),M(),Y(7," Notes "),M(),R(8,"button",26),Ce("click",function(){Ve(e);let r=ee();return Be(r.autoFillAllNotes())}),R(9,"mat-icon"),Y(10,"auto_fix_high"),M(),Y(11," Auto Notes "),M(),R(12,"button",27),Ce("click",function(){Ve(e);let r=ee();return Be(r.toggleCoachMode())}),R(13,"mat-icon"),Y(14,"school"),M(),Y(15," Teach Me "),M(),R(16,"button",28),Ce("click",function(){Ve(e);let r=ee();return Be(r.getSmartHint())}),R(17,"mat-icon"),Y(18,"lightbulb"),M(),Y(19," Hint "),M(),R(20,"button",29),Ce("click",function(){Ve(e);let r=ee();return Be(r.clearCell())}),R(21,"mat-icon"),Y(22,"backspace"),M(),Y(23," Clear "),M()()()}if(t&2){let e=ee();V(2),J("ngForOf",_u(7,txe)),V(2),st("active",e.notesMode),V(8),st("active",e.coachMode),V(4),J("disabled",e.hintsUsed>=e.maxHints),V(4),J("disabled",!e.selectedCell||e.isOriginal(e.selectedCell.row||0,e.selectedCell.col||0))}}function lxe(t,n){if(t&1){let e=Xt();R(0,"div",31)(1,"div",32)(2,"div",33)(3,"mat-icon",34),Y(4,"check_circle"),M(),R(5,"h2"),Y(6,"Puzzle Solved!"),M(),R(7,"div",35)(8,"div",36)(9,"span",37),Y(10,"Time:"),M(),R(11,"span",38),Y(12),M()(),R(13,"div",36)(14,"span",37),Y(15,"Difficulty:"),M(),R(16,"span",38),Y(17),cR(18,"titlecase"),M()(),R(19,"div",36)(20,"span",37),Y(21,"Mistakes:"),M(),R(22,"span",38),Y(23),M()()(),R(24,"div",39)(25,"button",40),Ce("click",function(){Ve(e);let r=ee();return Be(r.newGame())}),Y(26," Play Again "),M(),R(27,"button",41),Ce("click",function(){Ve(e);let r=ee();return Be(r.backToMenu())}),Y(28," Main Menu "),M()()()()()}if(t&2){let e=ee();V(12),kt(e.formatTime()),V(5),kt(uR(18,3,e.difficulty)),V(6),kt(e.mistakes)}}var yS=class t{constructor(n,e,i,r,o,s){this.router=n;this.sudokuService=e;this.localGenerator=i;this._snackBar=r;this.techniqueCoachService=o;this.dialog=s;this.initializeNotes()}board=[];notes=[];solution=[];originalBoard=[];difficulty="medium";selectedCell=null;loading=!0;timer=0;timerInterval;mistakes=0;gameCompleted=!1;notesMode=!1;hintsUsed=0;maxHints=3;Math=Math;highlightedCells=[];activeDetection=null;coachMode=!1;teachingStep="identify";pendingTechniques=[];currentTeachingIndex=-1;notesRequired=!1;singleCellHintRequested=!1;targetCellForHint=null;skippedTechniqueTypes=[];skipToEnd=!1;ngOnInit(){localStorage.getItem("sudoku-theme")==="dark"?(document.body.classList.add("dark-theme"),document.body.classList.remove("light-theme")):(document.body.classList.add("light-theme"),document.body.classList.remove("dark-theme")),this.startNewGame()}ngOnDestroy(){this.stopTimer()}initializeNotes(){this.notes=Array(9).fill(null).map(()=>Array(9).fill(null).map(()=>[]))}startNewGame(){this.loading=!0,this.resetGame();let n=this.getSettings();n.useApi?this.sudokuService.getNewBoard().subscribe({next:e=>{this.initializeGame(e.grid,e.solution,e.difficulty),this.loading=!1},error:e=>{console.error("Error loading puzzle from API:",e),this.generateLocalPuzzle(n.localDifficulty)}}):this.generateLocalPuzzle(n.localDifficulty)}generateLocalPuzzle(n){try{let e=this.localGenerator.generateBoard(n);this.initializeGame(e.grid,e.solution,e.difficulty),this.loading=!1}catch(e){console.error("Error generating local puzzle:",e),this.initializeGame(this.getFallbackPuzzle().grid,this.getFallbackPuzzle().solution,"Medium"),this.loading=!1}}getSettings(){let n=localStorage.getItem("sudokuSettings");return n?JSON.parse(n):{useApi:!0,localDifficulty:"medium"}}getFallbackPuzzle(){return{grid:[[5,3,0,0,7,0,0,0,0],[6,0,0,1,9,5,0,0,0],[0,9,8,0,0,0,0,6,0],[8,0,0,0,6,0,0,0,3],[4,0,0,8,0,3,0,0,1],[7,0,0,0,2,0,0,0,6],[0,6,0,0,0,0,2,8,0],[0,0,0,4,1,9,0,0,5],[0,0,0,0,8,0,0,7,9]],solution:[[5,3,4,6,7,8,9,1,2],[6,7,2,1,9,5,3,4,8],[1,9,8,3,4,2,5,6,7],[8,5,9,7,6,1,4,2,3],[4,2,6,8,5,3,7,9,1],[7,1,3,9,2,4,8,5,6],[9,6,1,5,3,7,2,8,4],[2,8,7,4,1,9,6,3,5],[3,4,5,2,8,6,1,7,9]]}}loadNewGame(){this.startNewGame()}selectCell(n,e){this.selectedCell={row:n,col:e}}isSelected(n,e){return this.selectedCell?.row===n&&this.selectedCell?.col===e}isOriginal(n,e){return this.originalBoard[n][e]!==0}isSameNumber(n,e){if(!this.selectedCell||this.board[n][e]===0)return!1;let i=this.board[this.selectedCell.row][this.selectedCell.col];return this.board[n][e]===i&&i!==0}isHighlighted(n,e){return this.selectedCell?this.selectedCell.row===n||this.selectedCell.col===e||this.getSameBox(this.selectedCell.row,this.selectedCell.col,n,e):!1}getSameBox(n,e,i,r){let o=Math.floor(n/3)*3+Math.floor(e/3),s=Math.floor(i/3)*3+Math.floor(r/3);return o===s}enterNumber(n){if(!this.selectedCell||this.gameCompleted)return;let{row:e,col:i}=this.selectedCell;this.originalBoard[e][i]===0&&(this.notesMode?this.toggleNote(e,i,n):(this.notes[e][i]=[],n===this.solution[e][i]?(this.board[e][i]=n,this.eliminateNotesFromRelatedCells(e,i,n),this.sudokuService.isSolved(this.board)&&(this.gameCompleted=!0,this.stopTimer(),console.log("Congratulations! You solved the puzzle!"))):(this.mistakes++,console.log("Incorrect number!"),this._snackBar.open("Incorrect number!","Close",{duration:2e3}),this.mistakes>=3&&console.log("Game over! Too many mistakes."))))}eliminateNotesFromRelatedCells(n,e,i){for(let s=0;s<9;s++)s!==e&&this.board[n][s]===0&&this.removeNoteFromCell(n,s,i);for(let s=0;s<9;s++)s!==n&&this.board[s][e]===0&&this.removeNoteFromCell(s,e,i);let r=Math.floor(n/3)*3,o=Math.floor(e/3)*3;for(let s=r;s<r+3;s++)for(let a=o;a<o+3;a++)(s!==n||a!==e)&&this.board[s][a]===0&&this.removeNoteFromCell(s,a,i)}removeNoteFromCell(n,e,i){let r=this.notes[n][e].indexOf(i);r>-1&&this.notes[n][e].splice(r,1)}autoFillNotes(n,e){if(this.board[n][e]!==0)return;let i=[];for(let r=1;r<=9;r++)this.isValidPlacement(n,e,r)&&i.push(r);this.notes[n][e]=i}isValidPlacement(n,e,i){for(let s=0;s<9;s++)if(this.board[n][s]===i)return!1;for(let s=0;s<9;s++)if(this.board[s][e]===i)return!1;let r=Math.floor(n/3)*3,o=Math.floor(e/3)*3;for(let s=r;s<r+3;s++)for(let a=o;a<o+3;a++)if(this.board[s][a]===i)return!1;return!0}autoFillAllNotes(){for(let n=0;n<9;n++)for(let e=0;e<9;e++)this.board[n][e]===0&&this.autoFillNotes(n,e);console.log("Auto-filled notes for all empty cells!")}toggleNote(n,e,i){if(this.board[n][e]!==0)return;let r=this.notes[n][e].indexOf(i);r>-1?this.notes[n][e].splice(r,1):(this.notes[n][e].push(i),this.notes[n][e].sort((o,s)=>o-s))}clearCell(){this.selectedCell&&!this.isOriginal(this.selectedCell.row,this.selectedCell.col)&&(this.board[this.selectedCell.row][this.selectedCell.col]=0,this.notes[this.selectedCell.row][this.selectedCell.col]=[])}toggleNotesMode(){this.notesMode=!this.notesMode}toggleCoachMode(){this.coachMode=!this.coachMode,this.coachMode?this.startTeachingMode():(this.highlightedCells=[],this.activeDetection=null,this.pendingTechniques=[],this.currentTeachingIndex=-1,this.teachingStep="identify")}isCoachHighlighted(n,e){return this.highlightedCells.some(i=>i.row===n&&i.col===e)}startTeachingMode(){return H(this,null,function*(){this.highlightedCells=[],this.pendingTechniques=[];let n=!1;for(let e=0;e<9;e++){for(let i=0;i<9;i++)if(this.board[e][i]===0&&this.notes[e][i].length===0){n=!0;break}if(n)break}n?(this.notesRequired=!0,this._snackBar.open("To effectively learn techniques, notes are needed for empty cells. Would you like to auto-fill notes?","Auto-fill Notes",{duration:1e4}).onAction().subscribe(()=>{this.autoFillAllNotes(),this.continueTeachingProcess()})):this.continueTeachingProcess()})}continueTeachingProcess(){return H(this,null,function*(){if(this.pendingTechniques=yield this.techniqueCoachService.detectTechniques(this.board,this.notes),this.pendingTechniques.length===0){this._snackBar.open("No applicable solving techniques found. Try filling in more notes or using direct elimination.","Close",{duration:5e3});return}this.currentTeachingIndex=0,this.teachTechnique()})}teachTechnique(){return H(this,null,function*(){if(this.currentTeachingIndex<0||this.currentTeachingIndex>=this.pendingTechniques.length)return;let n=this.pendingTechniques[this.currentTeachingIndex];if(this.skipToEnd){this._snackBar.open("Skipping all remaining techniques.","Close",{duration:3e3}),this.currentTeachingIndex=this.pendingTechniques.length,this.highlightedCells=[],this.activeDetection=null;return}for(;this.skippedTechniqueTypes.includes(n.technique);){if(this.currentTeachingIndex++,this.currentTeachingIndex>=this.pendingTechniques.length){this._snackBar.open("No more applicable techniques to show.","Close",{duration:3e3}),this.highlightedCells=[],this.activeDetection=null;return}n=this.pendingTechniques[this.currentTeachingIndex]}this.activeDetection=n,this.teachingStep="identify",this.highlightedCells=[],n.targetCell&&(this.highlightedCells.push(n.targetCell),this.selectedCell=n.targetCell),n.relatedCells&&(this.highlightedCells=[...this.highlightedCells,...n.relatedCells]);let e=window.innerWidth<=600,i={data:{title:`Learn: ${n.technique}`,message:`<p>${n.detailExplanation||n.explanation}</p>
                 <p>Do you want to apply this technique to solve this cell?</p>`,technique:n.technique,position:n.targetCell,value:n.value,showSkipOptions:!0,isTeachingMode:!0,techniqueCount:this.pendingTechniques.length,currentIndex:this.currentTeachingIndex},width:e?"100%":"400px",panelClass:["technique-dialog","technique-dialog-section"],hasBackdrop:!e,autoFocus:!1,position:e?{bottom:"0",right:"0",left:"0"}:{top:"10px",right:"10px"}};this.dialog.open(th,i).afterClosed().subscribe(o=>{o==="apply"?this.applyTechniqueAndContinue():o==="skip-this"?this.skipCurrentTechnique():o==="skip-type"?this.skipTechniqueType(n.technique):o==="skip-all"?(this.skipToEnd=!0,this.highlightedCells=[],this.activeDetection=null):(this.highlightedCells=[],this.activeDetection=null)})})}applyAndSkipToNext(){if(!this.activeDetection||!this.activeDetection.targetCell||!this.activeDetection.value)return;let{row:n,col:e}=this.activeDetection.targetCell,i=this.activeDetection.value;if(this.board[n][e]=i,this.notes[n][e]=[],this.techniqueCoachService.recordTechniqueUsage(this.activeDetection.technique,!0),this.eliminateNotesFromRelatedCells(n,e,i),this.sudokuService.isSolved(this.board)){this.gameCompleted=!0,this.stopTimer(),this.coachMode=!1;return}this.highlightedCells=[],this.activeDetection=null,this.currentTeachingIndex++,this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),100):this._snackBar.open("You've applied all available techniques! Try using Auto Notes again to find more.","Continue",{duration:6e3}).onAction().subscribe(()=>{this.autoFillAllNotes(),this.startTeachingMode()})}skipCurrentTechnique(){this.highlightedCells=[],this.activeDetection=null,this.currentTeachingIndex++,this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),100):this._snackBar.open("You've reviewed all available techniques!","OK",{duration:3e3})}skipTechniqueType(n){this.skippedTechniqueTypes.includes(n)||this.skippedTechniqueTypes.push(n),this.highlightedCells=[],this.activeDetection=null;let e=!1;for(;this.currentTeachingIndex<this.pendingTechniques.length&&(this.currentTeachingIndex++,!(this.currentTeachingIndex>=this.pendingTechniques.length));){let i=this.pendingTechniques[this.currentTeachingIndex];if(!this.skippedTechniqueTypes.includes(i.technique)){e=!0;break}}e&&this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),100):this._snackBar.open("No more applicable techniques to show after skipping.","OK",{duration:3e3})}applyTechniqueAndContinue(){if(!this.activeDetection||!this.activeDetection.targetCell||!this.activeDetection.value)return;let{row:n,col:e}=this.activeDetection.targetCell,i=this.activeDetection.value;if(this.board[n][e]=i,this.notes[n][e]=[],this.techniqueCoachService.recordTechniqueUsage(this.activeDetection.technique,!0),this.eliminateNotesFromRelatedCells(n,e,i),this.highlightedCells=[],this.activeDetection=null,this.sudokuService.isSolved(this.board)){this.gameCompleted=!0,this.stopTimer(),this.coachMode=!1;return}this.currentTeachingIndex++,this.currentTeachingIndex<this.pendingTechniques.length?setTimeout(()=>this.teachTechnique(),500):this._snackBar.open("You've applied all available techniques! Try using Auto Notes again to find more.","Continue",{duration:6e3}).onAction().subscribe(()=>{this.autoFillAllNotes(),this.startTeachingMode()})}getSmartHint(){return H(this,null,function*(){if(this.selectedCell&&!this.coachMode){yield this.getHintForSelectedCell();return}if(this.singleCellHintRequested=!1,this.targetCellForHint=null,this.highlightedCells=[],this.hintsUsed>=this.maxHints){this._snackBar.open("No more hints available!","Close",{duration:3e3});return}let n=yield this.techniqueCoachService.getHint(this.board,this.notes);if(!n){this._snackBar.open("No applicable techniques found.","Close",{duration:2e3});return}this.activeDetection=n,n.targetCell&&(this.highlightedCells.push(n.targetCell),this.selectedCell=n.targetCell),n.relatedCells&&(this.highlightedCells=[...this.highlightedCells,...n.relatedCells]),this.coachMode?this.dialog.open(th,{data:{title:`Hint: ${n.technique}`,message:`<p>${n.detailExplanation||n.explanation}</p>`,technique:n.technique,position:n.targetCell,value:n.value},width:"400px"}).afterClosed().subscribe(i=>{i==="apply"?this.applyHint(n):(this.highlightedCells=[],this.activeDetection=null)}):this._snackBar.open(`${n.technique}: ${n.explanation}`,"Apply",{duration:5e3,panelClass:"technique-hint-snackbar"}).onAction().subscribe(()=>{this.applyHint(n)})})}getHintForSelectedCell(){return H(this,null,function*(){if(!this.selectedCell)return;this.singleCellHintRequested=!0,this.targetCellForHint=this.selectedCell;let{row:n,col:e}=this.selectedCell;if(this.hintsUsed>=this.maxHints){this._snackBar.open("No more hints available!","Close",{duration:3e3});return}if(this.board[n][e]!==0){this._snackBar.open("This cell is already filled.","Close",{duration:2e3});return}let i=yield this.techniqueCoachService.getHintForCell(this.board,this.notes,n,e);i?(this.activeDetection=i,this.highlightedCells=[],i.relatedCells&&(this.highlightedCells=[...i.relatedCells]),this.dialog.open(th,{data:{title:`Hint for Selected Cell: ${i.technique}`,message:`<p>${i.detailExplanation||i.explanation}</p>`,technique:i.technique,position:{row:n,col:e},value:i.value,showRevealOption:!0},width:"400px"}).afterClosed().subscribe(o=>{o==="apply"?this.applyHint(i):o==="reveal"?this.revealCellValue(n,e):(this.highlightedCells=[],this.activeDetection=null)})):this.dialog.open(th,{data:{title:"No Technique Available",message:"<p>There are no applicable techniques for this cell at the moment. Would you like to reveal the value?</p>",position:{row:n,col:e},showRevealOption:!0},width:"400px"}).afterClosed().subscribe(o=>{o==="reveal"&&this.revealCellValue(n,e)})})}revealCellValue(n,e){if(this.board[n][e]!==0)return;let i=this.solution[n][e];this.board[n][e]=i,this.notes[n][e]=[],this.hintsUsed++,this.eliminateNotesFromRelatedCells(n,e,i),this.sudokuService.isSolved(this.board)&&(this.gameCompleted=!0,this.stopTimer())}applyHint(n){if(n.targetCell&&n.value){let{row:e,col:i}=n.targetCell;this.board[e][i]=n.value,this.notes[e][i]=[],this.hintsUsed++,this.techniqueCoachService.recordTechniqueUsage(n.technique,!0),this.eliminateNotesFromRelatedCells(e,i,n.value),this.highlightedCells=[],this.activeDetection=null,this.sudokuService.isSolved(this.board)&&(this.gameCompleted=!0,this.stopTimer())}}getHint(){this.getSmartHint()}backToMenu(){this.stopTimer(),this.router.navigate(["/menu"])}newGame(){this.startNewGame()}getSections(){let n=[];for(let e=0;e<3;e++)for(let i=0;i<3;i++){let r=[];for(let o=0;o<3;o++)for(let s=0;s<3;s++){let a=e*3+o,l=i*3+s;r.push({value:this.board[a][l],notes:this.notes[a][l],isOriginal:this.isOriginal(a,l),isSelected:this.isSelected(a,l),isSameNumber:this.isSameNumber(a,l),isHighlighted:this.isHighlighted(a,l),row:a,col:l})}n.push(r)}return n}formatTime(){let n=Math.floor(this.timer/60),e=this.timer%60;return`${n.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}startTimer(){this.stopTimer(),this.timer=0,this.timerInterval=setInterval(()=>{this.timer++},1e3)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}initializeGame(n,e,i){this.board=JSON.parse(JSON.stringify(n)),this.solution=JSON.parse(JSON.stringify(e)),this.originalBoard=JSON.parse(JSON.stringify(n)),this.difficulty=i,this.loading=!1,this.startTimer()}resetGame(){this.board=Array(9).fill(null).map(()=>Array(9).fill(0)),this.notes=Array(9).fill(null).map(()=>Array(9).fill(null).map(()=>[])),this.selectedCell=null,this.loading=!0,this.timer=0,this.mistakes=0,this.gameCompleted=!1,this.notesMode=!1,this.hintsUsed=0}static \u0275fac=function(e){return new(e||t)(Me(os),Me(ag),Me(fS),Me(_v),Me(gS),Me(og))};static \u0275cmp=De({type:t,selectors:[["app-game"]],decls:32,vars:10,consts:[[1,"game-container"],[1,"game-header"],[1,"header-top"],["mat-icon-button","",1,"back-button",3,"click"],[1,"game-title"],["mat-icon-button","",1,"new-game-button",3,"click"],[1,"game-stats"],[1,"stat-item"],["class","loading-container",4,"ngIf"],["class","board-container",4,"ngIf"],["class","controls-panel",4,"ngIf"],["class","completion-overlay",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"board-container"],[1,"sudoku-board"],[1,"board-grid"],["class","board-section",4,"ngFor","ngForOf"],[1,"board-section"],[3,"value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted","cellClick",4,"ngFor","ngForOf"],[3,"cellClick","value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted"],[1,"controls-panel"],[1,"number-pad"],["mat-raised-button","","class","number-button",3,"notes-mode","click",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-raised-button","","color","primary","matTooltip","Toggle notes mode",1,"action-btn","notes-btn",3,"click"],["mat-raised-button","","matTooltip","Auto-fill possible numbers for all empty cells",1,"action-btn","auto-notes-btn",3,"click"],["mat-raised-button","","color","accent","matTooltip","Toggle technique coach mode",1,"action-btn","coach-btn",3,"click"],["mat-raised-button","","matTooltip","Get a smart hint",1,"action-btn","hint-btn",3,"click","disabled"],["mat-raised-button","","color","warn","matTooltip","Clear selected cell",1,"action-btn","clear-btn",3,"click","disabled"],["mat-raised-button","",1,"number-button",3,"click"],[1,"completion-overlay"],[1,"completion-modal"],[1,"completion-content"],[1,"success-icon"],[1,"completion-stats"],[1,"stat"],[1,"label"],[1,"value"],[1,"completion-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"]],template:function(e,i){e&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),Ce("click",function(){return i.backToMenu()}),R(4,"mat-icon"),Y(5,"arrow_back"),M()(),R(6,"h2",4),Y(7),cR(8,"titlecase"),M(),R(9,"button",5),Ce("click",function(){return i.newGame()}),R(10,"mat-icon"),Y(11,"refresh"),M()()(),R(12,"div",6)(13,"div",7)(14,"mat-icon"),Y(15,"timer"),M(),R(16,"span"),Y(17),M()(),R(18,"div",7)(19,"mat-icon"),Y(20,"error_outline"),M(),R(21,"span"),Y(22),M()(),R(23,"div",7)(24,"mat-icon"),Y(25,"lightbulb_outline"),M(),R(26,"span"),Y(27),M()()()(),be(28,nxe,4,0,"div",8)(29,oxe,4,1,"div",9)(30,axe,24,8,"div",10)(31,lxe,29,5,"div",11),M()),e&2&&(V(7),kt(uR(8,8,i.difficulty)),V(10),kt(i.formatTime()),V(5),bn("",i.mistakes,"/3"),V(5),kt(i.maxHints-i.hintsUsed),V(),J("ngIf",i.loading),V(),J("ngIf",!i.loading),V(),J("ngIf",!i.loading),V(),J("ngIf",i.gameCompleted))},dependencies:[pi,Ur,Yn,bR,mo,cs,Kp,Aa,Da,iF,nF,Aj,Sv,sg],styles:[".game-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem;max-width:700px;margin:0 auto;height:calc(100vh - 2rem);box-sizing:border-box;gap:1rem}.game-header[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;margin-bottom:1rem}.header-top[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:space-between;align-items:center}.game-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.back-button[_ngcontent-%COMP%], .new-game-button[_ngcontent-%COMP%]{color:#6b7280}.game-stats[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-top:.5rem}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:60vh}.loading-spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left:4px solid #3f51b5;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.board-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;padding:1rem 0}.sudoku-board[_ngcontent-%COMP%]{width:100%;max-width:500px;aspect-ratio:1}.board-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:4px;width:100%;height:100%;border:2px solid #333;background-color:#333;box-sizing:border-box}.board-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:1px;background-color:#ccc}.controls-panel[_ngcontent-%COMP%]{width:100%;max-width:500px}.number-pad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(9,1fr);gap:.25rem;margin-bottom:1rem}.number-button[_ngcontent-%COMP%]{min-width:unset;padding:0;aspect-ratio:1}.number-button[_ngcontent-%COMP%]:hover{background:#f3f4f6;transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.number-button.notes-mode[_ngcontent-%COMP%]{background-color:#e3f2fd}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem}.action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:1.2rem;height:1.2rem}.notes-btn.active[_ngcontent-%COMP%]{background-color:#3f51b5;color:#fff}.hint-btn[_ngcontent-%COMP%]{background:#fbbf24;color:#92400e}.hint-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#f59e0b;color:#fff}.clear-btn[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.clear-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626}.auto-notes-btn[_ngcontent-%COMP%]{background:#8b5cf6;color:#fff}.auto-notes-btn[_ngcontent-%COMP%]:hover{background:#7c3aed}.completion-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000}.completion-modal[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:2rem;width:90%;max-width:400px;text-align:center;box-shadow:0 4px 20px #0003}.success-icon[_ngcontent-%COMP%]{font-size:4rem;height:4rem;width:4rem;color:#4caf50;margin-bottom:1rem}.completion-content[_ngcontent-%COMP%]{padding:2rem;text-align:center}.completion-stats[_ngcontent-%COMP%]{margin:1.5rem 0;text-align:left}.stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}.completion-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:1.5rem}@media (max-width: 768px){.game-container[_ngcontent-%COMP%]{padding:.5rem;height:calc(100vh - 1rem)}.number-pad[_ngcontent-%COMP%]{grid-template-columns:repeat(9,1fr)}.action-buttons[_ngcontent-%COMP%]{gap:.25rem}.action-btn[_ngcontent-%COMP%]{font-size:.75rem;padding:0 .5rem}}.dark-theme[_nghost-%COMP%]   .board-grid[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .board-grid[_ngcontent-%COMP%]{border-color:#555;background-color:#555}.dark-theme[_nghost-%COMP%]   .board-section[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .board-section[_ngcontent-%COMP%]{background-color:#444}.dark-theme[_nghost-%COMP%]   .completion-modal[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .completion-modal[_ngcontent-%COMP%]{background-color:#333;color:#fff}.dark-theme[_nghost-%COMP%]   .number-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .number-button[_ngcontent-%COMP%]{background-color:#424242;color:#fff}.dark-theme[_nghost-%COMP%]   .number-button.notes-mode[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .number-button.notes-mode[_ngcontent-%COMP%]{background-color:#263238}.dark-theme[_nghost-%COMP%]   .loading-spinner[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{border-color:#ffffff1a;border-left-color:#7986cb}  .technique-hint-snackbar{background-color:#303f9f;color:#fff}.coach-btn.active[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}"]})};var Zj=(()=>{class t{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||t)(Me(di),Me(nt))};static \u0275dir=ot({type:t})}return t})(),cxe=(()=>{class t extends Zj{static \u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})();static \u0275dir=ot({type:t,features:[Mn]})}return t})(),ug=new he("");var uxe={provide:ug,useExisting:es(()=>AS),multi:!0};function dxe(){let t=rs()?rs().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var pxe=new he(""),AS=(()=>{class t extends Zj{_compositionMode;_composing=!1;constructor(e,i,r){super(e,i),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!dxe())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||t)(Me(di),Me(nt),Me(pxe,8))};static \u0275dir=ot({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&Ce("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[bi([uxe]),Mn]})}return t})();function yF(t){return t==null||bF(t)===0}function bF(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var Nv=new he(""),xF=new he(""),hxe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,xS=class{static min(n){return mxe(n)}static max(n){return fxe(n)}static required(n){return gxe(n)}static requiredTrue(n){return yxe(n)}static email(n){return bxe(n)}static minLength(n){return xxe(n)}static maxLength(n){return vxe(n)}static pattern(n){return _xe(n)}static nullValidator(n){return Jj()}static compose(n){return o5(n)}static composeAsync(n){return s5(n)}};function mxe(t){return n=>{if(n.value==null||t==null)return null;let e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}function fxe(t){return n=>{if(n.value==null||t==null)return null;let e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}function gxe(t){return yF(t.value)?{required:!0}:null}function yxe(t){return t.value===!0?null:{required:!0}}function bxe(t){return yF(t.value)||hxe.test(t.value)?null:{email:!0}}function xxe(t){return n=>{let e=n.value?.length??bF(n.value);return e===null||e===0?null:e<t?{minlength:{requiredLength:t,actualLength:e}}:null}}function vxe(t){return n=>{let e=n.value?.length??bF(n.value);return e!==null&&e>t?{maxlength:{requiredLength:t,actualLength:e}}:null}}function _xe(t){if(!t)return Jj;let n,e;return typeof t=="string"?(e="",t.charAt(0)!=="^"&&(e+="^"),e+=t,t.charAt(t.length-1)!=="$"&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),i=>{if(yF(i.value))return null;let r=i.value;return n.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Jj(t){return null}function e5(t){return t!=null}function t5(t){return Ep(t)?Vn(t):t}function n5(t){let n={};return t.forEach(e=>{n=e!=null?ie(ie({},n),e):n}),Object.keys(n).length===0?null:n}function i5(t,n){return n.map(e=>e(t))}function wxe(t){return!t.validate}function r5(t){return t.map(n=>wxe(n)?n:e=>n.validate(e))}function o5(t){if(!t)return null;let n=t.filter(e5);return n.length==0?null:function(e){return n5(i5(e,n))}}function vF(t){return t!=null?o5(r5(t)):null}function s5(t){if(!t)return null;let n=t.filter(e5);return n.length==0?null:function(e){let i=i5(e,n).map(t5);return Zb(i).pipe(rt(n5))}}function _F(t){return t!=null?s5(r5(t)):null}function Wj(t,n){return t===null?[n]:Array.isArray(t)?[...t,n]:[t,n]}function a5(t){return t._rawValidators}function l5(t){return t._rawAsyncValidators}function fF(t){return t?Array.isArray(t)?t:[t]:[]}function vS(t,n){return Array.isArray(t)?t.includes(n):t===n}function jj(t,n){let e=fF(n);return fF(t).forEach(r=>{vS(e,r)||e.push(r)}),e}function qj(t,n){return fF(n).filter(e=>!vS(t,e))}var _S=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=vF(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=_F(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,e){return this.control?this.control.hasError(n,e):!1}getError(n,e){return this.control?this.control.getError(n,e):null}},nh=class extends _S{name;get formDirective(){return null}get path(){return null}},ih=class extends _S{_parent=null;name=null;valueAccessor=null},gF=class{_cd;constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Cxe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},nnt=At(ie({},Cxe),{"[class.ng-submitted]":"isSubmitted"}),NS=(()=>{class t extends gF{constructor(e){super(e)}static \u0275fac=function(i){return new(i||t)(Me(ih,2))};static \u0275dir=ot({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&st("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[Mn]})}return t})();var kv="VALID",bS="INVALID",lg="PENDING",Iv="DISABLED",Lu=class{},wS=class extends Lu{value;source;constructor(n,e){super(),this.value=n,this.source=e}},Dv=class extends Lu{pristine;source;constructor(n,e){super(),this.pristine=n,this.source=e}},Av=class extends Lu{touched;source;constructor(n,e){super(),this.touched=n,this.source=e}},cg=class extends Lu{status;source;constructor(n,e){super(),this.status=n,this.source=e}},CS=class extends Lu{source;constructor(n){super(),this.source=n}},TS=class extends Lu{source;constructor(n){super(),this.source=n}};function c5(t){return(MS(t)?t.validators:t)||null}function Txe(t){return Array.isArray(t)?vF(t):t||null}function u5(t,n){return(MS(n)?n.asyncValidators:t)||null}function Sxe(t){return Array.isArray(t)?_F(t):t||null}function MS(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function kxe(t,n,e){let i=t.controls;if(!(n?Object.keys(i):i).length)throw new ye(1e3,"");if(!i[e])throw new ye(1001,"")}function Ixe(t,n,e){t._forEachChild((i,r)=>{if(e[r]===void 0)throw new ye(1002,"")})}var SS=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(n,e){this._assignValidators(n),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return is(this.statusReactive)}set status(n){is(()=>this.statusReactive.set(n))}_status=Ap(()=>this.statusReactive());statusReactive=wa(void 0);get valid(){return this.status===kv}get invalid(){return this.status===bS}get pending(){return this.status==lg}get disabled(){return this.status===Iv}get enabled(){return this.status!==Iv}errors;get pristine(){return is(this.pristineReactive)}set pristine(n){is(()=>this.pristineReactive.set(n))}_pristine=Ap(()=>this.pristineReactive());pristineReactive=wa(!0);get dirty(){return!this.pristine}get touched(){return is(this.touchedReactive)}set touched(n){is(()=>this.touchedReactive.set(n))}_touched=Ap(()=>this.touchedReactive());touchedReactive=wa(!1);get untouched(){return!this.touched}_events=new Re;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(jj(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(jj(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(qj(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(qj(n,this._rawAsyncValidators))}hasValidator(n){return vS(this._rawValidators,n)}hasAsyncValidator(n){return vS(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let e=this.touched===!1;this.touched=!0;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(At(ie({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new Av(!0,i))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(n))}markAsUntouched(n={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:i})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,i),e&&n.emitEvent!==!1&&this._events.next(new Av(!1,i))}markAsDirty(n={}){let e=this.pristine===!0;this.pristine=!1;let i=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(At(ie({},n),{sourceControl:i})),e&&n.emitEvent!==!1&&this._events.next(new Dv(!1,i))}markAsPristine(n={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=n.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,i),e&&n.emitEvent!==!1&&this._events.next(new Dv(!0,i))}markAsPending(n={}){this.status=lg;let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new cg(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(At(ie({},n),{sourceControl:e}))}disable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=Iv,this.errors=null,this._forEachChild(r=>{r.disable(At(ie({},n),{onlySelf:!0}))}),this._updateValue();let i=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new wS(this.value,i)),this._events.next(new cg(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(At(ie({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(n={}){let e=this._parentMarkedDirty(n.onlySelf);this.status=kv,this._forEachChild(i=>{i.enable(At(ie({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(At(ie({},n),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(n,e){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kv||this.status===lg)&&this._runAsyncValidator(i,n.emitEvent)}let e=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new wS(this.value,e)),this._events.next(new cg(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(At(ie({},n),{sourceControl:e}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Iv:kv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,e){if(this.asyncValidator){this.status=lg,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=t5(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:e,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(n){let e=n;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(n,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,e,i){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||i)&&this._events.next(new cg(this.status,e)),this._parent&&this._parent._updateControlsErrors(n,e,i)}_initObservables(){this.valueChanges=new Se,this.statusChanges=new Se}_calculateStatus(){return this._allControlsDisabled()?Iv:this.errors?bS:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lg)?lg:this._anyControlsHaveStatus(bS)?bS:kv}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,e){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,e),r&&this._events.next(new Dv(this.pristine,e))}_updateTouched(n={},e){this.touched=this._anyControlsTouched(),this._events.next(new Av(this.touched,e)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,e)}_onDisabledChange=[];_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){MS(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let e=this._parent&&this._parent.dirty;return!n&&!!e&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=Txe(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=Sxe(this._rawAsyncValidators)}},kS=class extends SS{constructor(n,e,i){super(c5(e),u5(i,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,i={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,i={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){Ixe(this,!0,n),Object.keys(n).forEach(i=>{kxe(this,!0,i),this.controls[i].setValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){n!=null&&(Object.keys(n).forEach(i=>{let r=this.controls[i];r&&r.patchValue(n[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((i,r)=>{i.reset(n?n[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,i)=>(n[i]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&n(i,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&n(i))return!0;return!1}_reduceValue(){let n={};return this._reduceChildren(n,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(n,e){let i=n;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}};var RS=new he("",{providedIn:"root",factory:()=>wF}),wF="always";function Exe(t,n){return[...n.path,t]}function IS(t,n,e=wF){CF(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||e==="always")&&n.valueAccessor.setDisabledState?.(t.disabled),Axe(t,n),Mxe(t,n),Nxe(t,n),Dxe(t,n)}function Xj(t,n,e=!0){let i=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(i),n.valueAccessor.registerOnTouched(i)),DS(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ES(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Dxe(t,n){if(n.valueAccessor.setDisabledState){let e=i=>{n.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}function CF(t,n){let e=a5(t);n.validator!==null?t.setValidators(Wj(e,n.validator)):typeof e=="function"&&t.setValidators([e]);let i=l5(t);n.asyncValidator!==null?t.setAsyncValidators(Wj(i,n.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();ES(n._rawValidators,r),ES(n._rawAsyncValidators,r)}function DS(t,n){let e=!1;if(t!==null){if(n.validator!==null){let r=a5(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==n.validator);o.length!==r.length&&(e=!0,t.setValidators(o))}}if(n.asyncValidator!==null){let r=l5(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==n.asyncValidator);o.length!==r.length&&(e=!0,t.setAsyncValidators(o))}}}let i=()=>{};return ES(n._rawValidators,i),ES(n._rawAsyncValidators,i),e}function Axe(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&d5(t,n)})}function Nxe(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&d5(t,n),t.updateOn!=="submit"&&t.markAsTouched()})}function d5(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Mxe(t,n){let e=(i,r)=>{n.valueAccessor.writeValue(i),r&&n.viewToModelUpdate(i)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}function p5(t,n){t==null,CF(t,n)}function Rxe(t,n){return DS(t,n)}function Oxe(t,n){if(!t.hasOwnProperty("model"))return!1;let e=t.model;return e.isFirstChange()?!0:!Object.is(n,e.currentValue)}function Fxe(t){return Object.getPrototypeOf(t.constructor)===cxe}function h5(t,n){t._syncPendingControls(),n.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Lxe(t,n){if(!n)return null;Array.isArray(n);let e,i,r;return n.forEach(o=>{o.constructor===AS?e=o:Fxe(o)?i=o:r=o}),r||i||e||null}function Pxe(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}var $xe={provide:nh,useExisting:es(()=>TF)},Ev=Promise.resolve(),TF=(()=>{class t extends nh{callSetDisabledState;get submitted(){return is(this.submittedReactive)}_submitted=Ap(()=>this.submittedReactive());submittedReactive=wa(!1);_directives=new Set;form;ngSubmit=new Se;options;constructor(e,i,r){super(),this.callSetDisabledState=r,this.form=new kS({},vF(e),_F(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Ev.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),IS(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Ev.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Ev.then(()=>{let i=this._findContainer(e.path),r=new kS({});p5(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Ev.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Ev.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),h5(this.form,this._directives),this.ngSubmit.emit(e),this.form._events.next(new CS(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1),this.form._events.next(new TS(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||t)(Me(Nv,10),Me(xF,10),Me(RS,8))};static \u0275dir=ot({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){i&1&&Ce("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[bi([$xe]),Mn]})}return t})();function Kj(t,n){let e=t.indexOf(n);e>-1&&t.splice(e,1)}function Yj(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var m5=class extends SS{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(n=null,e,i){super(c5(e),u5(i,e)),this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),MS(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Yj(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Kj(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Kj(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Yj(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var Vxe=t=>t instanceof m5;var Bxe={provide:ih,useExisting:es(()=>Mv)},Qj=Promise.resolve(),Mv=(()=>{class t extends ih{_changeDetectorRef;callSetDisabledState;control=new m5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Se;constructor(e,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=Lxe(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Oxe(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){IS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Qj.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,r=i!==0&&Ot(i);Qj.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?Exe(e,this._parent):[e]}static \u0275fac=function(i){return new(i||t)(Me(nh,9),Me(Nv,10),Me(xF,10),Me(ug,10),Me(Tn,8),Me(RS,8))};static \u0275dir=ot({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[bi([Bxe]),Mn,Zt]})}return t})();var zxe={provide:nh,useExisting:es(()=>SF)},SF=(()=>{class t extends nh{callSetDisabledState;get submitted(){return is(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Ap(()=>this._submittedReactive());_submittedReactive=wa(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new Se;constructor(e,i,r){super(),this.callSetDisabledState=r,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(DS(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return IS(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){Xj(e.control||null,e,!1),Pxe(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),h5(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new CS(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new TS(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,r=this.form.get(e.path);i!==r&&(Xj(i||null,e),Vxe(r)&&(IS(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);p5(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&Rxe(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CF(this.form,this),this._oldForm&&DS(this._oldForm,this)}static \u0275fac=function(i){return new(i||t)(Me(Nv,10),Me(xF,10),Me(RS,8))};static \u0275dir=ot({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&Ce("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[bi([zxe]),Mn,Zt]})}return t})();var Gxe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({})}return t})();var OS=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:RS,useValue:e.callSetDisabledState??wF}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[Gxe]})}return t})();var Uxe=["mat-internal-form-field",""],Hxe=["*"],g5=(()=>{class t{labelPosition;static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){i&2&&st("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:Uxe,ngContentSelectors:Hxe,decls:1,vars:0,template:function(i,r){i&1&&(Kn(),yn(0))},styles:[`.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
`],encapsulation:2,changeDetection:0})}return t})();var Wxe=["switch"],jxe=["*"];function qxe(t,n){t&1&&(R(0,"span",10),Ze(),R(1,"svg",12),ke(2,"path",13),M(),R(3,"svg",14),ke(4,"path",15),M()())}var Xxe=new he("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),Kxe={provide:ug,useExisting:es(()=>LS),multi:!0},FS=class{source;checked;constructor(n,e){this.source=n,this.checked=e}},LS=(()=>{class t{_elementRef=k(nt);_focusMonitor=k(Al);_changeDetectorRef=k(Tn);defaults=k(Xxe);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new FS(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new Se;toggleChange=new Se;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){k(Xi).load(Mu);let e=k(new xu("tabindex"),{optional:!0}),i=this.defaults,r=k(kn,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=i.color||"accent",this._noopAnimations=r==="NoopAnimations",this.id=this._uniqueId=k(br).getId("mat-mdc-slide-toggle-"),this.hideIcon=i.hideIcon??!1,this.disabledInteractive=i.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new FS(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(i&1&&sn(Wxe,5),i&2){let o;Gt(o=Ut())&&(r._switchElement=o.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){i&2&&(Cl("id",r.id),Le("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Br(r.color?"mat-"+r.color:""),st("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",Ot],color:"color",disabled:[2,"disabled","disabled",Ot],disableRipple:[2,"disableRipple","disableRipple",Ot],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ji(e)],checked:[2,"checked","checked",Ot],hideIcon:[2,"hideIcon","hideIcon",Ot],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ot]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[bi([Kxe,{provide:Nv,useExisting:t,multi:!0}]),Zt],ngContentSelectors:jxe,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(i&1){let o=Xt();Kn(),R(0,"div",1)(1,"button",2,0),Ce("click",function(){return Ve(o),Be(r._handleClick())}),ke(3,"span",3),R(4,"span",4)(5,"span",5)(6,"span",6),ke(7,"span",7),M(),R(8,"span",8),ke(9,"span",9),M(),be(10,qxe,5,0,"span",10),M()()(),R(11,"label",11),Ce("click",function(a){return Ve(o),Be(a.stopPropagation())}),yn(12),M()()}if(i&2){let o=ns(2);J("labelPosition",r.labelPosition),V(),st("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),J("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),Le("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),V(8),J("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),V(),Oi(r.hideIcon?-1:10),V(),J("for",r.buttonId),Le("id",r._labelId)}},dependencies:[Xp,g5],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}
`],encapsulation:2,changeDetection:0})}return t})();var y5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[LS,jt,jt]})}return t})();var b5=(()=>{class t{_animationMode=k(kn,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){i&2&&st("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,r){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return t})();var Qxe=["text"],Zxe=[[["mat-icon"]],"*"],Jxe=["mat-icon","*"];function eve(t,n){if(t&1&&ke(0,"mat-pseudo-checkbox",1),t&2){let e=ee();J("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function tve(t,n){if(t&1&&ke(0,"mat-pseudo-checkbox",3),t&2){let e=ee();J("disabled",e.disabled)}}function nve(t,n){if(t&1&&(R(0,"span",4),Y(1),M()),t&2){let e=ee();V(),bn("(",e.group.label,")")}}var IF=new he("MAT_OPTION_PARENT_COMPONENT"),EF=new he("MatOptgroup");var kF=class{source;isUserInput;constructor(n,e=!1){this.source=n,this.isUserInput=e}},rh=(()=>{class t{_element=k(nt);_changeDetectorRef=k(Tn);_parent=k(IF,{optional:!0});group=k(EF,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=k(br).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new Se;_text;_stateChanges=new Re;constructor(){let e=k(Xi);e.load(Mu),e.load(Gf),this._signalDisableRipple=!!this._parent&&ff(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!xr(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new kF(this,e))}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-option"]],viewQuery:function(i,r){if(i&1&&sn(Qxe,7),i&2){let o;Gt(o=Ut())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){i&1&&Ce("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),i&2&&(Cl("id",r.id),Le("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),st("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Ot]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:Jxe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){i&1&&(Kn(Zxe),be(0,eve,1,2,"mat-pseudo-checkbox",1),yn(1),R(2,"span",2,0),yn(4,1),M(),be(5,tve,1,1,"mat-pseudo-checkbox",3)(6,nve,2,1,"span",4),ke(7,"div",5)),i&2&&(Oi(r.multiple?0:-1),V(5),Oi(!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),V(),Oi(r.group&&r.group._inert?6:-1),V(),J("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[b5,Xp],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();function x5(t,n,e){if(e.length){let i=n.toArray(),r=e.toArray(),o=0;for(let s=0;s<t+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}function v5(t,n,e,i){return t<e?t:t+n>e+i?Math.max(0,t-i+n):e}var _5=(()=>{class t{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t})}return t})();var w5=new he("MatFormField");var Rv=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Re;constructor(n=!1,e,i=!0,r){this._multiple=n,this._emitChanges=i,this.compareWith=r,e&&e.length&&(n?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...n){this._verifyValueAssignment(n),n.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...n){this._verifyValueAssignment(n),n.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...n){this._verifyValueAssignment(n);let e=this.selected,i=new Set(n.map(o=>this._getConcreteValue(o)));n.forEach(o=>this._markSelected(o)),e.filter(o=>!i.has(this._getConcreteValue(o,i))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(n){return this.isSelected(n)?this.deselect(n):this.select(n)}clear(n=!0){this._unmarkAll();let e=this._hasQueuedChanges();return n&&this._emitChangeEvent(),e}isSelected(n){return this._selection.has(this._getConcreteValue(n))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(n){this._multiple&&this.selected&&this._selected.sort(n)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(n){n=this._getConcreteValue(n),this.isSelected(n)||(this._multiple||this._unmarkAll(),this.isSelected(n)||this._selection.add(n),this._emitChanges&&this._selectedToEmit.push(n))}_unmarkSelected(n){n=this._getConcreteValue(n),this.isSelected(n)&&(this._selection.delete(n),this._emitChanges&&this._deselectedToEmit.push(n))}_unmarkAll(){this.isEmpty()||this._selection.forEach(n=>this._unmarkSelected(n))}_verifyValueAssignment(n){n.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(n,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(n,i))return i;return n}else return n}};var C5=(()=>{class t{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var VS=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(n,e,i,r,o){this._defaultMatcher=n,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o}updateErrorState(){let n=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,e)??!1;o!==n&&(this.errorState=o,this._stateChanges.next())}};var T5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt]})}return t})();var DF=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[Wf,jt,T5]})}return t})();var S5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt,HT,jt]})}return t})();var ive=["trigger"],rve=["panel"],ove=[[["mat-select-trigger"]],"*"],sve=["mat-select-trigger","*"];function ave(t,n){if(t&1&&(R(0,"span",4),Y(1),M()),t&2){let e=ee();V(),kt(e.placeholder)}}function lve(t,n){t&1&&yn(0)}function cve(t,n){if(t&1&&(R(0,"span",11),Y(1),M()),t&2){let e=ee(2);V(),kt(e.triggerValue)}}function uve(t,n){if(t&1&&(R(0,"span",5),be(1,lve,1,0)(2,cve,2,1,"span",11),M()),t&2){let e=ee();V(),Oi(e.customTrigger?1:2)}}function dve(t,n){if(t&1){let e=Xt();R(0,"div",12,1),Ce("keydown",function(r){Ve(e);let o=ee();return Be(o._handleKeydown(r))}),yn(2,1),M()}if(t&2){let e=ee();NC("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),st("mat-select-panel-animations-enabled",!e._animationsDisabled),J("ngClass",e.panelClass),Le("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var AF=new he("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=k(xi);return()=>t.scrollStrategies.reposition()}});function k5(t){return()=>t.scrollStrategies.reposition()}var I5=new he("MAT_SELECT_CONFIG"),E5={provide:AF,deps:[xi],useFactory:k5},D5=new he("MatSelectTrigger"),BS=class{source;value;constructor(n,e){this.source=n,this.value=e}},Ov=(()=>{class t{_viewportRuler=k(tg);_changeDetectorRef=k(Tn);_elementRef=k(nt);_dir=k(qr,{optional:!0});_idGenerator=k(br);_renderer=k(di);_parentFormField=k(w5,{optional:!0});ngControl=k(ih,{self:!0,optional:!0});_liveAnnouncer=k(dv);_defaultOptions=k(I5,{optional:!0});_animationsDisabled=k(kn,{optional:!0})==="NoopAnimations";_initialized=new Re;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let i=this.options.toArray()[e];if(i){let r=this.panel.nativeElement,o=x5(e,this.options,this.optionGroups),s=i._getHostElement();e===0&&o===1?r.scrollTop=0:r.scrollTop=v5(s.offsetTop,s.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new BS(this,e)}_scrollStrategyFactory=k(AF);_panelOpen=!1;_compareWith=(e,i)=>e===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new Re;_errorStateTracker;stateChanges=new Re;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(xS.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=pa(()=>{let e=this.options;return e?e.changes.pipe(Mo(e),nr(()=>ul(...e.map(i=>i.onSelectionChange)))):this._initialized.pipe(nr(()=>this.optionSelectionChanges))});openedChange=new Se;_openedStream=this.openedChange.pipe(Cn(e=>e),rt(()=>{}));_closedStream=this.openedChange.pipe(Cn(e=>!e),rt(()=>{}));selectionChange=new Se;valueChange=new Se;constructor(){let e=k(C5),i=k(TF,{optional:!0}),r=k(SF,{optional:!0}),o=k(new xu("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new VS(e,this.ngControl,r,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=o==null?0:parseInt(o)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Rv(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(Bn(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Bn(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Mo(null),Bn(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(Xn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let i=`${this.id}-panel`;this._trackedModal&&YT(this._trackedModal,"aria-owns",i),GO(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;YT(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel){this._detachOverlay();return}this._cleanupDetach?.(),this._cleanupDetach=()=>{i(),clearTimeout(r),this._cleanupDetach=void 0};let e=this.panel.nativeElement,i=this._renderer.listen(e,"animationend",o=>{o.animationName==="_mat-select-exit"&&(this._cleanupDetach?.(),this._detachOverlay())}),r=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);e.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let i=e.keyCode,r=i===40||i===38||i===37||i===39,o=i===13||i===32,s=this._keyManager;if(!s.isTyping()&&o&&!xr(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(e);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){let i=this._keyManager,r=e.keyCode,o=r===40||r===38,s=i.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(!s&&(r===13||r===32)&&i.activeItem&&!xr(e))e.preventDefault(),i.activeItem._selectViaInteraction();else if(!s&&this._multiple&&r===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=i.activeItemIndex;i.onKeydown(e),this._multiple&&o&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}}_handleOverlayKeydown(e){e.keyCode===27&&!xr(e)&&(e.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return(r.value!=null||this.canSelectNullableOptions)&&this._compareWith(r.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof ig?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new hv(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=ul(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Bn(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),ul(...this.options.map(i=>i._stateChanges)).pipe(Bn(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){let r=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,e):e.indexOf(i)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let i;this.multiple?i=this.selected.map(r=>r.value):i=this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,i=e?e+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||"";return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e||(e=this._valueId),e}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-select"]],contentQueries:function(i,r,o){if(i&1&&($s(o,D5,5),$s(o,rh,5),$s(o,EF,5)),i&2){let s;Gt(s=Ut())&&(r.customTrigger=s.first),Gt(s=Ut())&&(r.options=s),Gt(s=Ut())&&(r.optionGroups=s)}},viewQuery:function(i,r){if(i&1&&(sn(ive,5),sn(rve,5),sn(hS,5)),i&2){let o;Gt(o=Ut())&&(r.trigger=o.first),Gt(o=Ut())&&(r.panel=o.first),Gt(o=Ut())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,r){i&1&&Ce("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),i&2&&(Le("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),st("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Ot],disableRipple:[2,"disableRipple","disableRipple",Ot],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ji(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ot],placeholder:"placeholder",required:[2,"required","required",Ot],multiple:[2,"multiple","multiple",Ot],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Ot],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",ji],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",Ot]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[bi([{provide:_5,useExisting:t},{provide:IF,useExisting:t}]),Zt],ngContentSelectors:sve,decls:11,vars:9,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"detach","backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","cdkConnectedOverlayFlexibleDimensions"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,r){if(i&1){let o=Xt();Kn(ove),R(0,"div",2,0),Ce("click",function(){return Ve(o),Be(r.open())}),R(3,"div",3),be(4,ave,2,1,"span",4)(5,uve,3,1,"span",5),M(),R(6,"div",6)(7,"div",7),Ze(),R(8,"svg",8),ke(9,"path",9),M()()()(),be(10,dve,3,10,"ng-template",10),Ce("detach",function(){return Ve(o),Be(r.close())})("backdropClick",function(){return Ve(o),Be(r.close())})("overlayKeydown",function(a){return Ve(o),Be(r._handleOverlayKeydown(a))})}if(i&2){let o=ns(1);V(3),Le("id",r._valueId),V(),Oi(r.empty?4:5),V(6),J("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)("cdkConnectedOverlayFlexibleDimensions",!0)}},dependencies:[ig,hS,Np],styles:[`@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}
`],encapsulation:2,changeDetection:0})}return t})();var Fv=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({providers:[E5],imports:[Hs,DF,jt,Yp,S5,DF,jt]})}return t})();var dg=class t{isDarkModeSubject=new Zn(!1);isDarkMode$=this.isDarkModeSubject.asObservable();constructor(){this.initializeTheme()}initializeTheme(){let e=localStorage.getItem("sudoku-theme")==="dark";this.setTheme(e)}setTheme(n){this.isDarkModeSubject.next(n),localStorage.setItem("sudoku-theme",n?"dark":"light"),this.applyTheme(n)}toggleTheme(){let n=this.isDarkModeSubject.value;this.setTheme(!n)}getCurrentTheme(){return this.isDarkModeSubject.value}applyTheme(n){let e=document.body;n?(e.classList.add("dark-theme"),e.classList.remove("light-theme")):(e.classList.add("light-theme"),e.classList.remove("dark-theme"))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};function pve(t,n){if(t&1){let e=Xt();R(0,"div",3)(1,"span"),Y(2,"Local Difficulty"),M(),R(3,"mat-select",8),Gr("ngModelChange",function(r){Ve(e);let o=ee();return co(o.localDifficulty,r)||(o.localDifficulty=r),Be(r)}),R(4,"mat-option",14),Y(5,"Easy"),M(),R(6,"mat-option",15),Y(7,"Medium"),M(),R(8,"mat-option",16),Y(9,"Hard"),M(),R(10,"mat-option",17),Y(11,"Expert"),M()()()}if(t&2){let e=ee();V(3),zr("ngModel",e.localDifficulty)}}function hve(t,n){t&1&&(R(0,"div",18)(1,"p")(2,"mat-icon"),Y(3,"info"),M(),Y(4," Random puzzles from online API"),M()())}function mve(t,n){t&1&&(R(0,"div",19)(1,"p")(2,"mat-icon"),Y(3,"offline_pin"),M(),Y(4," Locally generated puzzles with selected difficulty"),M()())}var zS=class t{constructor(n,e){this.router=n;this.themeService=e}showMistakes=!0;showTimer=!0;highlightSameNumbers=!0;theme="light";useApi=!0;localDifficulty="medium";ngOnInit(){this.themeService.isDarkMode$.subscribe(e=>{this.theme=e?"dark":"light"});let n=localStorage.getItem("sudokuSettings");if(n){let e=JSON.parse(n);this.showMistakes=e.showMistakes??!0,this.showTimer=e.showTimer??!0,this.highlightSameNumbers=e.highlightSameNumbers??!0,this.useApi=e.useApi??!0,this.localDifficulty=e.localDifficulty??"medium"}}onThemeChange(){this.themeService.setTheme(this.theme==="dark")}onApiToggle(){this.saveSettings()}saveSettings(){let n={showMistakes:this.showMistakes,showTimer:this.showTimer,highlightSameNumbers:this.highlightSameNumbers,theme:this.theme,useApi:this.useApi,localDifficulty:this.localDifficulty};localStorage.setItem("sudokuSettings",JSON.stringify(n)),this.router.navigate(["/menu"])}cancel(){this.router.navigate(["/menu"])}static \u0275fac=function(e){return new(e||t)(Me(os),Me(dg))};static \u0275cmp=De({type:t,selectors:[["app-settings"]],decls:49,vars:8,consts:[[1,"settings-container"],[1,"settings-card"],[1,"settings-group"],[1,"setting-item"],[3,"ngModelChange","change","ngModel"],["class","setting-item",4,"ngIf"],["class","api-info",4,"ngIf"],["class","local-info",4,"ngIf"],[3,"ngModelChange","ngModel"],[3,"ngModelChange","selectionChange","ngModel"],["value","light"],["value","dark"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],["value","easy"],["value","medium"],["value","hard"],["value","expert"],[1,"api-info"],[1,"local-info"]],template:function(e,i){e&1&&(R(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),Y(4,"Game Settings"),M(),R(5,"mat-card-subtitle"),Y(6,"Customize your Sudoku experience"),M()(),R(7,"mat-card-content")(8,"div",2)(9,"h3"),Y(10,"Puzzle Source"),M(),R(11,"div",3)(12,"span"),Y(13,"Use Online API"),M(),R(14,"mat-slide-toggle",4),Gr("ngModelChange",function(o){return co(i.useApi,o)||(i.useApi=o),o}),Ce("change",function(){return i.onApiToggle()}),M()(),be(15,pve,12,1,"div",5)(16,hve,5,0,"div",6)(17,mve,5,0,"div",7),M(),R(18,"div",2)(19,"h3"),Y(20,"Game Options"),M(),R(21,"div",3)(22,"span"),Y(23,"Show Mistakes Counter"),M(),R(24,"mat-slide-toggle",8),Gr("ngModelChange",function(o){return co(i.showMistakes,o)||(i.showMistakes=o),o}),M()(),R(25,"div",3)(26,"span"),Y(27,"Show Timer"),M(),R(28,"mat-slide-toggle",8),Gr("ngModelChange",function(o){return co(i.showTimer,o)||(i.showTimer=o),o}),M()(),R(29,"div",3)(30,"span"),Y(31,"Highlight Same Numbers"),M(),R(32,"mat-slide-toggle",8),Gr("ngModelChange",function(o){return co(i.highlightSameNumbers,o)||(i.highlightSameNumbers=o),o}),M()()(),R(33,"div",2)(34,"h3"),Y(35,"Appearance"),M(),R(36,"div",3)(37,"span"),Y(38,"Theme"),M(),R(39,"mat-select",9),Gr("ngModelChange",function(o){return co(i.theme,o)||(i.theme=o),o}),Ce("selectionChange",function(){return i.onThemeChange()}),R(40,"mat-option",10),Y(41,"Light"),M(),R(42,"mat-option",11),Y(43,"Dark"),M()()()()(),R(44,"mat-card-actions")(45,"button",12),Ce("click",function(){return i.saveSettings()}),Y(46,"Save"),M(),R(47,"button",13),Ce("click",function(){return i.cancel()}),Y(48,"Cancel"),M()()()()),e&2&&(V(14),zr("ngModel",i.useApi),V(),J("ngIf",!i.useApi),V(),J("ngIf",i.useApi),V(),J("ngIf",!i.useApi),V(7),zr("ngModel",i.showMistakes),V(4),zr("ngModel",i.showTimer),V(4),zr("ngModel",i.highlightSameNumbers),V(7),zr("ngModel",i.theme))},dependencies:[pi,Yn,OS,NS,Mv,mo,cs,Zf,qf,tS,Kf,Qf,Yf,Xf,y5,LS,Fv,Ov,rh,Aa,Da],styles:[".settings-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;max-width:600px;padding:1rem}.settings-card[_ngcontent-%COMP%]{width:100%;max-width:550px;padding:2.5rem;background:#fff;border-radius:20px;box-shadow:0 12px 40px #00000026;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);transition:all .3s ease}body.dark-theme[_ngcontent-%COMP%]   .settings-card[_ngcontent-%COMP%]{background:#2d2d2d;border:1px solid rgba(255,255,255,.1);box-shadow:0 12px 40px #0006}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2.5rem;justify-content:center;text-align:center}mat-card-title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin-bottom:.75rem;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}mat-card-subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#6b7280;font-weight:400;line-height:1.4}body.dark-theme[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{color:#9ca3af}.settings-group[_ngcontent-%COMP%]{margin-bottom:2.5rem;padding:2rem;background:#f9fafb;border-radius:16px;border:1px solid #e5e7eb;transition:all .3s ease}body.dark-theme[_ngcontent-%COMP%]   .settings-group[_ngcontent-%COMP%]{background:#374151;border-color:#4b5563}.settings-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 2rem;font-size:1.4rem;font-weight:600;color:#374151;padding-bottom:1rem;border-bottom:2px solid #e5e7eb;text-align:center}body.dark-theme[_ngcontent-%COMP%]   .settings-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f3f4f6;border-bottom-color:#4b5563}.setting-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.75rem;padding:1.5rem;background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000000d;transition:all .3s ease;min-height:64px}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]{background:#2d2d2d;box-shadow:0 2px 8px #0003}.setting-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000001a;transform:translateY(-2px)}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #0000004d}.setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:#374151;flex:1}body.dark-theme[_ngcontent-%COMP%]   .setting-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#f3f4f6}mat-slide-toggle[_ngcontent-%COMP%]{margin-left:2rem;min-width:50px}mat-select[_ngcontent-%COMP%]{margin-left:2rem;min-width:140px;background:#f3f4f6;border-radius:8px;padding:.75rem 1rem;border:2px solid #e5e7eb;font-size:1rem;font-weight:500;transition:all .3s ease}mat-select[_ngcontent-%COMP%]:hover{border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}body.dark-theme[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{background:#4b5563;color:#f3f4f6;border-color:#6b7280}body.dark-theme[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]:hover{border-color:#60a5fa;box-shadow:0 0 0 3px #60a5fa1a}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;padding:2rem 0 0;border-top:1px solid #e5e7eb;margin-top:2rem}body.dark-theme[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{border-top-color:#4b5563}button[_ngcontent-%COMP%]{padding:1rem 2.5rem;font-size:1.1rem;font-weight:600;border-radius:12px;transition:all .3s ease;min-width:120px;text-transform:none}button[color=primary][_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border:none;transform:translateY(0);box-shadow:0 4px 15px #667eea4d}button[color=primary][_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #667eea66}button[_ngcontent-%COMP%]:not([color]){background:#f3f4f6;color:#6b7280;border:2px solid #d1d5db}button[_ngcontent-%COMP%]:not([color]):hover{background:#e5e7eb;border-color:#9ca3af;transform:translateY(-1px)}body.dark-theme[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]){background:#374151;color:#f3f4f6;border-color:#4b5563}body.dark-theme[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not([color]):hover{background:#4b5563;border-color:#6b7280}.api-info[_ngcontent-%COMP%], .local-info[_ngcontent-%COMP%]{margin-top:1rem;padding:1rem;border-radius:8px;background:#f0f9ff;border:1px solid #bae6fd}body.dark-theme[_ngcontent-%COMP%]   .api-info[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   .local-info[_ngcontent-%COMP%]{background:#1e3a8a;border-color:#3b82f6}.api-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .local-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#0369a1;display:flex;align-items:center;gap:.5rem}body.dark-theme[_ngcontent-%COMP%]   .api-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme[_ngcontent-%COMP%]   .local-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#93c5fd}.api-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .local-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.1rem;width:1.1rem;height:1.1rem}@media (max-width: 768px){.settings-container[_ngcontent-%COMP%]{padding:.5rem}.settings-card[_ngcontent-%COMP%]{padding:2rem}.settings-group[_ngcontent-%COMP%]{padding:1.5rem}.setting-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1.25rem;text-align:left;padding:1.25rem}mat-slide-toggle[_ngcontent-%COMP%], mat-select[_ngcontent-%COMP%]{margin-left:0;align-self:stretch;width:100%}mat-select[_ngcontent-%COMP%]{min-width:unset}mat-card-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}button[_ngcontent-%COMP%]{width:100%}}@media (max-width: 480px){mat-card-title[_ngcontent-%COMP%]{font-size:2rem}.settings-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}}"]})};function fve(t,n){t&1&&ke(0,"div",2)}var gve=new he("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var R5=(()=>{class t{_elementRef=k(nt);_ngZone=k(qe);_changeDetectorRef=k(Tn);_renderer=k(di);_cleanupTransitionEnd;_animationMode=k(kn,{optional:!0});constructor(){let e=k(gve,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",e&&(e.color&&(this.color=this._defaultColor=e.color),this.mode=e.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";get value(){return this._value}set value(e){this._value=M5(e||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=M5(e||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new Se;get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._cleanupTransitionEnd=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._transitionendHandler)})}ngOnDestroy(){this._cleanupTransitionEnd?.()}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=e=>{this.animationEnd.observers.length===0||!e.target||!e.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,r){i&2&&(Le("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),Br("mat-"+r.color),st("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",ji],bufferValue:[2,"bufferValue","bufferValue",ji],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,r){i&1&&(R(0,"div",0),ke(1,"div",1),be(2,fve,1,0,"div",2),M(),R(3,"div",3),ke(4,"span",4),M(),R(5,"div",5),ke(6,"span",4),M()),i&2&&(V(),Ri("flex-basis",r._getBufferBarFlexBasis()),V(),Oi(r.mode==="buffer"?2:-1),V(),Ri("transform",r._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}
`],encapsulation:2,changeDetection:0})}return t})();function M5(t,n=0,e=100){return Math.max(n,Math.min(e,t))}var O5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt]})}return t})();var bve=["knob"],xve=["valueIndicatorContainer"];function vve(t,n){if(t&1&&(R(0,"div",2,1)(2,"div",5)(3,"span",6),Y(4),M()()()),t&2){let e=ee();V(4),kt(e.valueIndicatorText)}}var _ve=["trackActive"],wve=["*"];function Cve(t,n){if(t&1&&ke(0,"div"),t&2){let e=n.$implicit,i=n.$index,r=ee(3);Br(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Ri("transform",r._calcTickMarkTransform(i))}}function Tve(t,n){if(t&1&&zU(0,Cve,1,4,"div",8,BU),t&2){let e=ee(2);GU(e._tickMarks)}}function Sve(t,n){if(t&1&&(R(0,"div",6,1),be(2,Tve,2,0),M()),t&2){let e=ee();V(2),Oi(e._cachedWidth?2:-1)}}function kve(t,n){if(t&1&&ke(0,"mat-slider-visual-thumb",7),t&2){let e=ee();J("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var wt=function(t){return t[t.START=1]="START",t[t.END=2]="END",t}(wt||{}),pg=function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t}(pg||{}),NF=new he("_MatSlider"),F5=new he("_MatSliderThumb"),Ive=new he("_MatSliderRangeThumb"),L5=new he("_MatSliderVisualThumb");var Eve=(()=>{class t{_cdr=k(Tn);_ngZone=k(qe);_slider=k(NF);_renderer=k(di);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=k(nt).nativeElement;_platform=k(an);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let i=this._sliderInputEl,r=this._renderer;this._listenerCleanups=[r.listen(i,"pointermove",this._onPointerMove),r.listen(i,"pointerdown",this._onDragStart),r.listen(i,"pointerup",this._onDragEnd),r.listen(i,"pointerleave",this._onMouseLeave),r.listen(i,"focus",this._onFocus),r.listen(i,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let i=this._hostElement.getBoundingClientRect(),r=this._slider._isCursorOnSliderThumb(e,i);this._isHovered=r,r?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===jr.FADING_IN||e?.state===jr.VISIBLE}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===wt.START?wt.END:wt.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!i)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===wt.START?wt.END:wt.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,r){if(i&1&&(sn(Xp,5),sn(bve,5),sn(xve,5)),i&2){let o;Gt(o=Ut())&&(r._ripple=o.first),Gt(o=Ut())&&(r._knob=o.first),Gt(o=Ut())&&(r._valueIndicatorContainer=o.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[bi([{provide:L5,useExisting:t}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,r){i&1&&(be(0,vve,5,1,"div",2),ke(1,"div",3,0)(3,"div",4)),i&2&&(Oi(r.discrete?0:-1),V(3),J("matRippleDisabled",!0))},dependencies:[Xp],styles:[`.mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}
`],encapsulation:2,changeDetection:0})}return t})(),P5=(()=>{class t{_ngZone=k(qe);_cdr=k(Tn);_elementRef=k(nt);_dir=k(qr,{optional:!0});_globalRippleOptions=k(gv,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let i=this._getInput(wt.END),r=this._getInput(wt.START);i&&(i.disabled=this._disabled),r&&(r.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;showTickMarks=!1;get min(){return this._min}set min(e){let i=isNaN(e)?this._min:e;this._min!==i&&this._updateMin(i)}_min=0;color;disableRipple=!1;_updateMin(e){let i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let i=this._getInput(wt.END),r=this._getInput(wt.START),o=i.value,s=r.value;r.min=e.new,i.min=Math.max(e.new,r.value),r.max=Math.min(i.max,i.value),r._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,r):this._onTranslateXChangeBySideEffect(r,i),o!==i.value&&this._onValueChange(i),s!==r.value&&this._onValueChange(r)}_updateMinNonRange(e){let i=this._getInput(wt.END);if(i){let r=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){let i=isNaN(e)?this._max:e;this._max!==i&&this._updateMax(i)}_max=100;_updateMax(e){let i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let i=this._getInput(wt.END),r=this._getInput(wt.START),o=i.value,s=r.value;i.max=e.new,r.max=Math.min(e.new,i.value),i.min=r.value,i._updateWidthInactive(),r._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(r,i):this._onTranslateXChangeBySideEffect(i,r),o!==i.value&&this._onValueChange(i),s!==r.value&&this._onValueChange(r)}_updateMaxNonRange(e){let i=this._getInput(wt.END);if(i){let r=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),r!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){let i=isNaN(e)?this._step:e;this._step!==i&&this._updateStep(i)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(wt.END),i=this._getInput(wt.START),r=e.value,o=i.value,s=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<s?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),r!==e.value&&this._onValueChange(e),o!==i.value&&this._onValueChange(i)}_updateStepNonRange(){let e=this._getInput(wt.END);if(e){let i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations;_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=k(an);constructor(){k(Xi).load(Mu);let e=k(kn,{optional:!0});this._noopAnimations=e==="NoopAnimations",this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(wt.END),i=this._getInput(wt.START);this._isRange=!!e&&!!i,this._cdr.detectChanges();let r=this._getThumb(wt.END);this._rippleRadius=r._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(wt.END),i=this._getInput(wt.START);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(wt.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(wt.START)._isActive||this._getThumb(wt.END)._isActive}_getValue(e=wt.END){let i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!!(this._getInput(wt.START)?._skipUIUpdate||this._getInput(wt.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let i=this._trackActive.nativeElement.style;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,i.transform=e.transform}_calcTickMarkTransform(e){let i=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-i:i}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){this._hasViewInitialized&&(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(wt.END),i=this._getInput(wt.START);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{let e=this._getInput(wt.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(wt.START),i=this._getInput(wt.END);return!e||!i?!1:i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let i=e.getSibling(),r=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),r._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let i=this._getThumb(e.thumbPosition===wt.END?wt.END:wt.START);i._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(i):e._hostElement.setAttribute("aria-valuetext",i),this.discrete){e.thumbPosition===wt.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;let r=this._getThumb(e.thumbPosition);i.length<3?r._hostElement.classList.add("mdc-slider__thumb--short-value"):r._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(wt.END),i=this._getInput(wt.START);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,r=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*r}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let i=e.getSibling();if(!i||!this._cachedWidth)return;let r=Math.abs(i.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-i.translateX}px`,transformOrigin:"right",transform:`scaleX(${r})`}):this._setTrackActiveStyles({left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${r})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let i=this._getValue(),r=Math.max(Math.round((i-this.min)/e),0)+1,o=Math.max(Math.round((this.max-i)/e),0)-1;this._isRtl?r++:o++,this._tickMarks=Array(r).fill(pg.ACTIVE).concat(Array(o).fill(pg.INACTIVE))}_updateTickMarkUIRange(e){let i=this._getValue(),r=this._getValue(wt.START),o=Math.max(Math.round((r-this.min)/e),0),s=Math.max(Math.round((i-r)/e)+1,0),a=Math.max(Math.round((this.max-i)/e),0);this._tickMarks=Array(o).fill(pg.INACTIVE).concat(Array(s).fill(pg.ACTIVE),Array(a).fill(pg.INACTIVE))}_getInput(e){if(e===wt.END&&this._input)return this._input;if(this._inputs?.length)return e===wt.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===wt.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,i){let r=i.width/2,o=i.x+r,s=i.y+r,a=e.clientX-o,l=e.clientY-s;return Math.pow(a,2)+Math.pow(l,2)<Math.pow(r,2)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=De({type:t,selectors:[["mat-slider"]],contentQueries:function(i,r,o){if(i&1&&($s(o,F5,5),$s(o,Ive,4)),i&2){let s;Gt(s=Ut())&&(r._input=s.first),Gt(s=Ut())&&(r._inputs=s)}},viewQuery:function(i,r){if(i&1&&(sn(_ve,5),sn(L5,5)),i&2){let o;Gt(o=Ut())&&(r._trackActive=o.first),Gt(o=Ut())&&(r._thumbs=o)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,r){i&2&&(Br("mat-"+(r.color||"primary")),st("mdc-slider--range",r._isRange)("mdc-slider--disabled",r.disabled)("mdc-slider--discrete",r.discrete)("mdc-slider--tick-marks",r.showTickMarks)("_mat-animation-noopable",r._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",Ot],discrete:[2,"discrete","discrete",Ot],showTickMarks:[2,"showTickMarks","showTickMarks",Ot],min:[2,"min","min",ji],color:"color",disableRipple:[2,"disableRipple","disableRipple",Ot],max:[2,"max","max",ji],step:[2,"step","step",ji],displayWith:"displayWith"},exportAs:["matSlider"],features:[bi([{provide:NF,useExisting:t}])],ngContentSelectors:wve,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,r){i&1&&(Kn(),yn(0),R(1,"div",2),ke(2,"div",3),R(3,"div",4),ke(4,"div",5,0),M(),be(6,Sve,3,1,"div",6),M(),be(7,kve,1,3,"mat-slider-visual-thumb",7),ke(8,"mat-slider-visual-thumb",7)),i&2&&(V(6),Oi(r.showTickMarks?6:-1),V(),Oi(r._isRange?7:-1),V(),J("discrete",r.discrete)("thumbPosition",2)("valueIndicatorText",r.endValueIndicatorText))},dependencies:[Eve],styles:[`.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mdc-slider-active-track-height, 4px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mdc-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mdc-slider-inactive-track-height, 4px);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mdc-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-width:calc(var(--mdc-slider-handle-height, 20px)/2) calc(var(--mdc-slider-handle-width, 20px)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size, 2px);height:var(--mdc-slider-with-tick-marks-container-size, 2px);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return t})();var Dve={provide:ug,useExisting:es(()=>MF),multi:!0};var MF=(()=>{class t{_ngZone=k(qe);_elementRef=k(nt);_cdr=k(Tn);_slider=k(NF);_platform=k(an);_listenerCleanups;get value(){return ji(this._hostElement.value,0)}set value(e){e=isNaN(e)?0:e;let i=e+"";if(!this._hasSetInitialValue){this._initialValue=i;return}this._isActive||this._setValue(i)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new Se;dragStart=new Se;dragEnd=new Se;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=wt.END;get min(){return ji(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return ji(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return ji(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return Ot(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=wa("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new Re;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=k(di);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let i=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=i,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let i=e.clientX-this._slider._cachedLeft,r=this._slider._cachedWidth,o=this._slider.step===0?1:this._slider.step,s=Math.floor((this._slider.max-this._slider.min)/o),a=this._slider._isRtl?1-i/r:i/r,c=Math.round(a*s)/s*(this._slider.max-this._slider.min)+this._slider.min,u=Math.round(c/o)*o,d=this.value;if(u===d){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=u,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let i=this._tickMarkOffset,r=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,r),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(i){return new(i||t)};static \u0275dir=ot({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,r){i&1&&Ce("change",function(){return r._onChange()})("input",function(){return r._onInput()})("blur",function(){return r._onBlur()})("focus",function(){return r._onFocus()}),i&2&&Le("aria-valuetext",r._valuetext())},inputs:{value:[2,"value","value",ji]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[bi([Dve,{provide:F5,useExisting:t}])]})}return t})();var $5=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=$e({type:t});static \u0275inj=Pe({imports:[jt,Wf]})}return t})();var GS="http://www.w3.org/1999/xhtml",RF={svg:"http://www.w3.org/2000/svg",xhtml:GS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fl(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),RF.hasOwnProperty(n)?{space:RF[n],local:t}:t}function Nve(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===GS&&n.documentElement.namespaceURI===GS?n.createElement(t):n.createElementNS(e,t)}}function Mve(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function US(t){var n=Fl(t);return(n.local?Mve:Nve)(n)}function Rve(){}function oh(t){return t==null?Rve:function(){return this.querySelector(t)}}function V5(t){typeof t!="function"&&(t=oh(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,a=i[r]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new oi(i,this._parents)}function OF(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ove(){return[]}function Lv(t){return t==null?Ove:function(){return this.querySelectorAll(t)}}function Fve(t){return function(){return OF(t.apply(this,arguments))}}function B5(t){typeof t=="function"?t=Fve(t):t=Lv(t);for(var n=this._groups,e=n.length,i=[],r=[],o=0;o<e;++o)for(var s=n[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),r.push(l));return new oi(i,r)}function Pv(t){return function(){return this.matches(t)}}function HS(t){return function(n){return n.matches(t)}}var Lve=Array.prototype.find;function Pve(t){return function(){return Lve.call(this.children,t)}}function $ve(){return this.firstElementChild}function z5(t){return this.select(t==null?$ve:Pve(typeof t=="function"?t:HS(t)))}var Vve=Array.prototype.filter;function Bve(){return Array.from(this.children)}function zve(t){return function(){return Vve.call(this.children,t)}}function G5(t){return this.selectAll(t==null?Bve:zve(typeof t=="function"?t:HS(t)))}function U5(t){typeof t!="function"&&(t=Pv(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new oi(i,this._parents)}function WS(t){return new Array(t.length)}function H5(){return new oi(this._enter||this._groups.map(WS),this._parents)}function $v(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}$v.prototype={constructor:$v,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function W5(t){return function(){return t}}function Gve(t,n,e,i,r,o){for(var s=0,a,l=n.length,c=o.length;s<c;++s)(a=n[s])?(a.__data__=o[s],i[s]=a):e[s]=new $v(t,o[s]);for(;s<l;++s)(a=n[s])&&(r[s]=a)}function Uve(t,n,e,i,r,o,s){var a,l,c=new Map,u=n.length,d=o.length,p=new Array(u),h;for(a=0;a<u;++a)(l=n[a])&&(p[a]=h=s.call(l,l.__data__,a,n)+"",c.has(h)?r[a]=l:c.set(h,l));for(a=0;a<d;++a)h=s.call(t,o[a],a,o)+"",(l=c.get(h))?(i[a]=l,l.__data__=o[a],c.delete(h)):e[a]=new $v(t,o[a]);for(a=0;a<u;++a)(l=n[a])&&c.get(p[a])===l&&(r[a]=l)}function Hve(t){return t.__data__}function j5(t,n){if(!arguments.length)return Array.from(this,Hve);var e=n?Uve:Gve,i=this._parents,r=this._groups;typeof t!="function"&&(t=W5(t));for(var o=r.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],p=d.length,h=Wve(t.call(u,u&&u.__data__,c,i)),m=h.length,g=a[c]=new Array(m),f=s[c]=new Array(m),y=l[c]=new Array(p);e(u,d,g,f,y,h,n);for(var b=0,v=0,_,w;b<m;++b)if(_=g[b]){for(b>=v&&(v=b+1);!(w=f[v])&&++v<m;);_._next=w||null}}return s=new oi(s,i),s._enter=a,s._exit=l,s}function Wve(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function q5(){return new oi(this._exit||this._groups.map(WS),this._parents)}function X5(t,n,e){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),n!=null&&(r=n(r),r&&(r=r.selection())),e==null?o.remove():e(o),i&&r?i.merge(r).order():r}function K5(t){for(var n=t.selection?t.selection():t,e=this._groups,i=n._groups,r=e.length,o=i.length,s=Math.min(r,o),a=new Array(r),l=0;l<s;++l)for(var c=e[l],u=i[l],d=c.length,p=a[l]=new Array(d),h,m=0;m<d;++m)(h=c[m]||u[m])&&(p[m]=h);for(;l<r;++l)a[l]=e[l];return new oi(a,this._parents)}function Y5(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var i=t[n],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Q5(t){t||(t=jve);function n(d,p){return d&&p?t(d.__data__,p.__data__):!d-!p}for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var s=e[o],a=s.length,l=r[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(n)}return new oi(r,this._parents).order()}function jve(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Z5(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function J5(){return Array.from(this)}function eq(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function tq(){let t=0;for(let n of this)++t;return t}function nq(){return!this.node()}function iq(t){for(var n=this._groups,e=0,i=n.length;e<i;++e)for(var r=n[e],o=0,s=r.length,a;o<s;++o)(a=r[o])&&t.call(a,a.__data__,o,r);return this}function qve(t){return function(){this.removeAttribute(t)}}function Xve(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Kve(t,n){return function(){this.setAttribute(t,n)}}function Yve(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Qve(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Zve(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function rq(t,n){var e=Fl(t);if(arguments.length<2){var i=this.node();return e.local?i.getAttributeNS(e.space,e.local):i.getAttribute(e)}return this.each((n==null?e.local?Xve:qve:typeof n=="function"?e.local?Zve:Qve:e.local?Yve:Kve)(e,n))}function jS(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Jve(t){return function(){this.style.removeProperty(t)}}function e0e(t,n,e){return function(){this.style.setProperty(t,n,e)}}function t0e(t,n,e){return function(){var i=n.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,e)}}function oq(t,n,e){return arguments.length>1?this.each((n==null?Jve:typeof n=="function"?t0e:e0e)(t,n,e??"")):Pu(this.node(),t)}function Pu(t,n){return t.style.getPropertyValue(n)||jS(t).getComputedStyle(t,null).getPropertyValue(n)}function n0e(t){return function(){delete this[t]}}function i0e(t,n){return function(){this[t]=n}}function r0e(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function sq(t,n){return arguments.length>1?this.each((n==null?n0e:typeof n=="function"?r0e:i0e)(t,n)):this.node()[t]}function aq(t){return t.trim().split(/^|\s+/)}function FF(t){return t.classList||new lq(t)}function lq(t){this._node=t,this._names=aq(t.getAttribute("class")||"")}lq.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function cq(t,n){for(var e=FF(t),i=-1,r=n.length;++i<r;)e.add(n[i])}function uq(t,n){for(var e=FF(t),i=-1,r=n.length;++i<r;)e.remove(n[i])}function o0e(t){return function(){cq(this,t)}}function s0e(t){return function(){uq(this,t)}}function a0e(t,n){return function(){(n.apply(this,arguments)?cq:uq)(this,t)}}function dq(t,n){var e=aq(t+"");if(arguments.length<2){for(var i=FF(this.node()),r=-1,o=e.length;++r<o;)if(!i.contains(e[r]))return!1;return!0}return this.each((typeof n=="function"?a0e:n?o0e:s0e)(e,n))}function l0e(){this.textContent=""}function c0e(t){return function(){this.textContent=t}}function u0e(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function pq(t){return arguments.length?this.each(t==null?l0e:(typeof t=="function"?u0e:c0e)(t)):this.node().textContent}function d0e(){this.innerHTML=""}function p0e(t){return function(){this.innerHTML=t}}function h0e(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function hq(t){return arguments.length?this.each(t==null?d0e:(typeof t=="function"?h0e:p0e)(t)):this.node().innerHTML}function m0e(){this.nextSibling&&this.parentNode.appendChild(this)}function mq(){return this.each(m0e)}function f0e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fq(){return this.each(f0e)}function gq(t){var n=typeof t=="function"?t:US(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function g0e(){return null}function yq(t,n){var e=typeof t=="function"?t:US(t),i=n==null?g0e:typeof n=="function"?n:oh(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),i.apply(this,arguments)||null)})}function y0e(){var t=this.parentNode;t&&t.removeChild(this)}function bq(){return this.each(y0e)}function b0e(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function x0e(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function xq(t){return this.select(t?x0e:b0e)}function vq(t){return arguments.length?this.property("__data__",t):this.node().__data__}function v0e(t){return function(n){t.call(this,n,this.__data__)}}function _0e(t){return t.trim().split(/^|\s+/).map(function(n){var e="",i=n.indexOf(".");return i>=0&&(e=n.slice(i+1),n=n.slice(0,i)),{type:n,name:e}})}function w0e(t){return function(){var n=this.__on;if(n){for(var e=0,i=-1,r=n.length,o;e<r;++e)o=n[e],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):n[++i]=o;++i?n.length=i:delete this.__on}}}function C0e(t,n,e){return function(){var i=this.__on,r,o=v0e(n);if(i){for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=e),r.value=n;return}}this.addEventListener(t.type,o,e),r={type:t.type,name:t.name,value:n,listener:o,options:e},i?i.push(r):this.__on=[r]}}function _q(t,n,e){var i=_0e(t+""),r,o=i.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(r=0,u=a[l];r<o;++r)if((s=i[r]).type===u.type&&s.name===u.name)return u.value}return}for(a=n?C0e:w0e,r=0;r<o;++r)this.each(a(i[r],n,e));return this}function wq(t,n,e){var i=jS(t),r=i.CustomEvent;typeof r=="function"?r=new r(n,e):(r=i.document.createEvent("Event"),e?(r.initEvent(n,e.bubbles,e.cancelable),r.detail=e.detail):r.initEvent(n,!1,!1)),t.dispatchEvent(r)}function T0e(t,n){return function(){return wq(this,t,n)}}function S0e(t,n){return function(){return wq(this,t,n.apply(this,arguments))}}function Cq(t,n){return this.each((typeof n=="function"?S0e:T0e)(t,n))}function*Tq(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var i=t[n],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var LF=[null];function oi(t,n){this._groups=t,this._parents=n}function Sq(){return new oi([[document.documentElement]],LF)}function k0e(){return this}oi.prototype=Sq.prototype={constructor:oi,select:V5,selectAll:B5,selectChild:z5,selectChildren:G5,filter:U5,data:j5,enter:H5,exit:q5,join:X5,merge:K5,selection:k0e,order:Y5,sort:Q5,call:Z5,nodes:J5,node:eq,size:tq,empty:nq,each:iq,attr:rq,style:oq,property:sq,classed:dq,text:pq,html:hq,raise:mq,lower:fq,append:gq,insert:yq,remove:bq,clone:xq,datum:vq,on:_q,dispatch:Cq,[Symbol.iterator]:Tq};var Ll=Sq;function vr(t){return typeof t=="string"?new oi([[document.querySelector(t)]],[document.documentElement]):new oi([[t]],LF)}function kq(t){let n;for(;n=t.sourceEvent;)t=n;return t}function qS(t,n){if(t=kq(t),n===void 0&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var r=n.getBoundingClientRect();return[t.clientX-r.left-n.clientLeft,t.clientY-r.top-n.clientTop]}}return[t.pageX,t.pageY]}var I0e={value:()=>{}};function Eq(){for(var t=0,n=arguments.length,e={},i;t<n;++t){if(!(i=arguments[t]+"")||i in e||/[\s.]/.test(i))throw new Error("illegal type: "+i);e[i]=[]}return new XS(e)}function XS(t){this._=t}function E0e(t,n){return t.trim().split(/^|\s+/).map(function(e){var i="",r=e.indexOf(".");if(r>=0&&(i=e.slice(r+1),e=e.slice(0,r)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:i}})}XS.prototype=Eq.prototype={constructor:XS,on:function(t,n){var e=this._,i=E0e(t+"",e),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=D0e(e[r],t.name)))return r;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++o<s;)if(r=(t=i[o]).type)e[r]=Iq(e[r],t.name,n);else if(n==null)for(r in e)e[r]=Iq(e[r],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new XS(t)},call:function(t,n){if((r=arguments.length-2)>0)for(var e=new Array(r),i=0,r,o;i<r;++i)e[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(n,e)}};function D0e(t,n){for(var e=0,i=t.length,r;e<i;++e)if((r=t[e]).name===n)return r.value}function Iq(t,n,e){for(var i=0,r=t.length;i<r;++i)if(t[i].name===n){t[i]=I0e,t=t.slice(0,i).concat(t.slice(i+1));break}return e!=null&&t.push({name:n,value:e}),t}var Vv=Eq;var KS={capture:!0,passive:!1};function YS(t){t.preventDefault(),t.stopImmediatePropagation()}function PF(t){var n=t.document.documentElement,e=vr(t).on("dragstart.drag",YS,KS);"onselectstart"in n?e.on("selectstart.drag",YS,KS):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function $F(t,n){var e=t.document.documentElement,i=vr(t).on("dragstart.drag",null);n&&(i.on("click.drag",YS,KS),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in e?i.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function QS(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function VF(t,n){var e=Object.create(t.prototype);for(var i in n)e[i]=n[i];return e}function Gv(){}var Bv=.7,e1=1/Bv,hg="\\s*([+-]?\\d+)\\s*",zv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A0e=/^#([0-9a-f]{3,8})$/,N0e=new RegExp(`^rgb\\(${hg},${hg},${hg}\\)$`),M0e=new RegExp(`^rgb\\(${Ra},${Ra},${Ra}\\)$`),R0e=new RegExp(`^rgba\\(${hg},${hg},${hg},${zv}\\)$`),O0e=new RegExp(`^rgba\\(${Ra},${Ra},${Ra},${zv}\\)$`),F0e=new RegExp(`^hsl\\(${zv},${Ra},${Ra}\\)$`),L0e=new RegExp(`^hsla\\(${zv},${Ra},${Ra},${zv}\\)$`),Dq={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};QS(Gv,js,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Aq,formatHex:Aq,formatHex8:P0e,formatHsl:$0e,formatRgb:Nq,toString:Nq});function Aq(){return this.rgb().formatHex()}function P0e(){return this.rgb().formatHex8()}function $0e(){return Pq(this).formatHsl()}function Nq(){return this.rgb().formatRgb()}function js(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=A0e.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?Mq(n):e===3?new go(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?ZS(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?ZS(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=N0e.exec(t))?new go(n[1],n[2],n[3],1):(n=M0e.exec(t))?new go(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=R0e.exec(t))?ZS(n[1],n[2],n[3],n[4]):(n=O0e.exec(t))?ZS(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=F0e.exec(t))?Fq(n[1],n[2]/100,n[3]/100,1):(n=L0e.exec(t))?Fq(n[1],n[2]/100,n[3]/100,n[4]):Dq.hasOwnProperty(t)?Mq(Dq[t]):t==="transparent"?new go(NaN,NaN,NaN,0):null}function Mq(t){return new go(t>>16&255,t>>8&255,t&255,1)}function ZS(t,n,e,i){return i<=0&&(t=n=e=NaN),new go(t,n,e,i)}function V0e(t){return t instanceof Gv||(t=js(t)),t?(t=t.rgb(),new go(t.r,t.g,t.b,t.opacity)):new go}function mg(t,n,e,i){return arguments.length===1?V0e(t):new go(t,n,e,i??1)}function go(t,n,e,i){this.r=+t,this.g=+n,this.b=+e,this.opacity=+i}QS(go,mg,VF(Gv,{brighter(t){return t=t==null?e1:Math.pow(e1,t),new go(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Bv:Math.pow(Bv,t),new go(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new go(ah(this.r),ah(this.g),ah(this.b),t1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rq,formatHex:Rq,formatHex8:B0e,formatRgb:Oq,toString:Oq}));function Rq(){return`#${sh(this.r)}${sh(this.g)}${sh(this.b)}`}function B0e(){return`#${sh(this.r)}${sh(this.g)}${sh(this.b)}${sh((isNaN(this.opacity)?1:this.opacity)*255)}`}function Oq(){let t=t1(this.opacity);return`${t===1?"rgb(":"rgba("}${ah(this.r)}, ${ah(this.g)}, ${ah(this.b)}${t===1?")":`, ${t})`}`}function t1(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ah(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function sh(t){return t=ah(t),(t<16?"0":"")+t.toString(16)}function Fq(t,n,e,i){return i<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Ws(t,n,e,i)}function Pq(t){if(t instanceof Ws)return new Ws(t.h,t.s,t.l,t.opacity);if(t instanceof Gv||(t=js(t)),!t)return new Ws;if(t instanceof Ws)return t;t=t.rgb();var n=t.r/255,e=t.g/255,i=t.b/255,r=Math.min(n,e,i),o=Math.max(n,e,i),s=NaN,a=o-r,l=(o+r)/2;return a?(n===o?s=(e-i)/a+(e<i)*6:e===o?s=(i-n)/a+2:s=(n-e)/a+4,a/=l<.5?o+r:2-o-r,s*=60):a=l>0&&l<1?0:s,new Ws(s,a,l,t.opacity)}function $q(t,n,e,i){return arguments.length===1?Pq(t):new Ws(t,n,e,i??1)}function Ws(t,n,e,i){this.h=+t,this.s=+n,this.l=+e,this.opacity=+i}QS(Ws,$q,VF(Gv,{brighter(t){return t=t==null?e1:Math.pow(e1,t),new Ws(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Bv:Math.pow(Bv,t),new Ws(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,i=e+(e<.5?e:1-e)*n,r=2*e-i;return new go(BF(t>=240?t-240:t+120,r,i),BF(t,r,i),BF(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ws(Lq(this.h),JS(this.s),JS(this.l),t1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=t1(this.opacity);return`${t===1?"hsl(":"hsla("}${Lq(this.h)}, ${JS(this.s)*100}%, ${JS(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lq(t){return t=(t||0)%360,t<0?t+360:t}function JS(t){return Math.max(0,Math.min(1,t||0))}function BF(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}function zF(t,n,e,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*n+(4-6*o+3*s)*e+(1+3*t+3*o-3*s)*i+s*r)/6}function Vq(t){var n=t.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),r=t[i],o=t[i+1],s=i>0?t[i-1]:2*r-o,a=i<n-1?t[i+2]:2*o-r;return zF((e-i/n)*n,s,r,o,a)}}function Bq(t){var n=t.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),r=t[(i+n-1)%n],o=t[i%n],s=t[(i+1)%n],a=t[(i+2)%n];return zF((e-i/n)*n,r,o,s,a)}}var Uv=t=>()=>t;function z0e(t,n){return function(e){return t+e*n}}function G0e(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(i){return Math.pow(t+i*n,e)}}function zq(t){return(t=+t)==1?n1:function(n,e){return e-n?G0e(n,e,t):Uv(isNaN(n)?e:n)}}function n1(t,n){var e=n-t;return e?z0e(t,e):Uv(isNaN(t)?n:t)}var lh=function t(n){var e=zq(n);function i(r,o){var s=e((r=mg(r)).r,(o=mg(o)).r),a=e(r.g,o.g),l=e(r.b,o.b),c=n1(r.opacity,o.opacity);return function(u){return r.r=s(u),r.g=a(u),r.b=l(u),r.opacity=c(u),r+""}}return i.gamma=t,i}(1);function Gq(t){return function(n){var e=n.length,i=new Array(e),r=new Array(e),o=new Array(e),s,a;for(s=0;s<e;++s)a=mg(n[s]),i[s]=a.r||0,r[s]=a.g||0,o[s]=a.b||0;return i=t(i),r=t(r),o=t(o),a.opacity=1,function(l){return a.r=i(l),a.g=r(l),a.b=o(l),a+""}}}var U0e=Gq(Vq),H0e=Gq(Bq);function Uq(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,i=n.slice(),r;return function(o){for(r=0;r<e;++r)i[r]=t[r]*(1-o)+n[r]*o;return i}}function Hq(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Wq(t,n){var e=n?n.length:0,i=t?Math.min(e,t.length):0,r=new Array(i),o=new Array(e),s;for(s=0;s<i;++s)r[s]=Pl(t[s],n[s]);for(;s<e;++s)o[s]=n[s];return function(a){for(s=0;s<i;++s)o[s]=r[s](a);return o}}function jq(t,n){var e=new Date;return t=+t,n=+n,function(i){return e.setTime(t*(1-i)+n*i),e}}function rr(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function qq(t,n){var e={},i={},r;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(r in n)r in t?e[r]=Pl(t[r],n[r]):i[r]=n[r];return function(o){for(r in e)i[r]=e[r](o);return i}}var UF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,GF=new RegExp(UF.source,"g");function W0e(t){return function(){return t}}function j0e(t){return function(n){return t(n)+""}}function Hv(t,n){var e=UF.lastIndex=GF.lastIndex=0,i,r,o,s=-1,a=[],l=[];for(t=t+"",n=n+"";(i=UF.exec(t))&&(r=GF.exec(n));)(o=r.index)>e&&(o=n.slice(e,o),a[s]?a[s]+=o:a[++s]=o),(i=i[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:rr(i,r)})),e=GF.lastIndex;return e<n.length&&(o=n.slice(e),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?j0e(l[0].x):W0e(n):(n=l.length,function(c){for(var u=0,d;u<n;++u)a[(d=l[u]).i]=d.x(c);return a.join("")})}function Pl(t,n){var e=typeof n,i;return n==null||e==="boolean"?Uv(n):(e==="number"?rr:e==="string"?(i=js(n))?(n=i,lh):Hv:n instanceof js?lh:n instanceof Date?jq:Hq(n)?Uq:Array.isArray(n)?Wq:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?qq:rr)(t,n)}function HF(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var Xq=180/Math.PI,i1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function WF(t,n,e,i,r,o){var s,a,l;return(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s),(l=t*e+n*i)&&(e-=t*l,i-=n*l),(a=Math.sqrt(e*e+i*i))&&(e/=a,i/=a,l/=a),t*i<n*e&&(t=-t,n=-n,l=-l,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(n,t)*Xq,skewX:Math.atan(l)*Xq,scaleX:s,scaleY:a}}var r1;function Kq(t){let n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?i1:WF(n.a,n.b,n.c,n.d,n.e,n.f)}function Yq(t){return t==null?i1:(r1||(r1=document.createElementNS("http://www.w3.org/2000/svg","g")),r1.setAttribute("transform",t),(t=r1.transform.baseVal.consolidate())?(t=t.matrix,WF(t.a,t.b,t.c,t.d,t.e,t.f)):i1)}function Qq(t,n,e,i){function r(c){return c.length?c.pop()+" ":""}function o(c,u,d,p,h,m){if(c!==d||u!==p){var g=h.push("translate(",null,n,null,e);m.push({i:g-4,x:rr(c,d)},{i:g-2,x:rr(u,p)})}else(d||p)&&h.push("translate("+d+n+p+e)}function s(c,u,d,p){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),p.push({i:d.push(r(d)+"rotate(",null,i)-2,x:rr(c,u)})):u&&d.push(r(d)+"rotate("+u+i)}function a(c,u,d,p){c!==u?p.push({i:d.push(r(d)+"skewX(",null,i)-2,x:rr(c,u)}):u&&d.push(r(d)+"skewX("+u+i)}function l(c,u,d,p,h,m){if(c!==d||u!==p){var g=h.push(r(h)+"scale(",null,",",null,")");m.push({i:g-4,x:rr(c,d)},{i:g-2,x:rr(u,p)})}else(d!==1||p!==1)&&h.push(r(h)+"scale("+d+","+p+")")}return function(c,u){var d=[],p=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,d,p),s(c.rotate,u.rotate,d,p),a(c.skewX,u.skewX,d,p),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,p),c=u=null,function(h){for(var m=-1,g=p.length,f;++m<g;)d[(f=p[m]).i]=f.x(h);return d.join("")}}}var jF=Qq(Kq,"px, ","px)","deg)"),qF=Qq(Yq,", ",")",")");var fg=0,jv=0,Wv=0,Jq=1e3,o1,qv,s1=0,ch=0,a1=0,Xv=typeof performance=="object"&&performance.now?performance:Date,e6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Yv(){return ch||(e6(q0e),ch=Xv.now()+a1)}function q0e(){ch=0}function Kv(){this._call=this._time=this._next=null}Kv.prototype=l1.prototype={constructor:Kv,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?Yv():+e)+(n==null?0:+n),!this._next&&qv!==this&&(qv?qv._next=this:o1=this,qv=this),this._call=t,this._time=e,XF()},stop:function(){this._call&&(this._call=null,this._time=1/0,XF())}};function l1(t,n,e){var i=new Kv;return i.restart(t,n,e),i}function t6(){Yv(),++fg;for(var t=o1,n;t;)(n=ch-t._time)>=0&&t._call.call(void 0,n),t=t._next;--fg}function Zq(){ch=(s1=Xv.now())+a1,fg=jv=0;try{t6()}finally{fg=0,K0e(),ch=0}}function X0e(){var t=Xv.now(),n=t-s1;n>Jq&&(a1-=n,s1=t)}function K0e(){for(var t,n=o1,e,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:o1=e);qv=t,XF(i)}function XF(t){if(!fg){jv&&(jv=clearTimeout(jv));var n=t-ch;n>24?(t<1/0&&(jv=setTimeout(Zq,t-Xv.now()-a1)),Wv&&(Wv=clearInterval(Wv))):(Wv||(s1=Xv.now(),Wv=setInterval(X0e,Jq)),fg=1,e6(Zq))}}function c1(t,n,e){var i=new Kv;return n=n==null?0:+n,i.restart(r=>{i.stop(),t(r+n)},n,e),i}var Y0e=Vv("start","end","cancel","interrupt"),Q0e=[],r6=0,n6=1,d1=2,u1=3,i6=4,p1=5,Qv=6;function $u(t,n,e,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(e in s)return;Z0e(t,e,{name:n,index:i,group:r,on:Y0e,tween:Q0e,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:r6})}function Zv(t,n){var e=Fi(t,n);if(e.state>r6)throw new Error("too late; already scheduled");return e}function or(t,n){var e=Fi(t,n);if(e.state>u1)throw new Error("too late; already running");return e}function Fi(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Z0e(t,n,e){var i=t.__transition,r;i[n]=e,e.timer=l1(o,0,e.time);function o(c){e.state=n6,e.timer.restart(s,e.delay,e.time),e.delay<=c&&s(c-e.delay)}function s(c){var u,d,p,h;if(e.state!==n6)return l();for(u in i)if(h=i[u],h.name===e.name){if(h.state===u1)return c1(s);h.state===i6?(h.state=Qv,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[u]):+u<n&&(h.state=Qv,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[u])}if(c1(function(){e.state===u1&&(e.state=i6,e.timer.restart(a,e.delay,e.time),a(c))}),e.state=d1,e.on.call("start",t,t.__data__,e.index,e.group),e.state===d1){for(e.state=u1,r=new Array(p=e.tween.length),u=0,d=-1;u<p;++u)(h=e.tween[u].value.call(t,t.__data__,e.index,e.group))&&(r[++d]=h);r.length=d+1}}function a(c){for(var u=c<e.duration?e.ease.call(null,c/e.duration):(e.timer.restart(l),e.state=p1,1),d=-1,p=r.length;++d<p;)r[d].call(t,u);e.state===p1&&(e.on.call("end",t,t.__data__,e.index,e.group),l())}function l(){e.state=Qv,e.timer.stop(),delete i[n];for(var c in i)return;delete t.__transition}}function gg(t,n){var e=t.__transition,i,r,o=!0,s;if(e){n=n==null?null:n+"";for(s in e){if((i=e[s]).name!==n){o=!1;continue}r=i.state>d1&&i.state<p1,i.state=Qv,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete e[s]}o&&delete t.__transition}}function o6(t){return this.each(function(){gg(this,t)})}function J0e(t,n){var e,i;return function(){var r=or(this,t),o=r.tween;if(o!==e){i=e=o;for(var s=0,a=i.length;s<a;++s)if(i[s].name===n){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function e_e(t,n,e){var i,r;if(typeof e!="function")throw new Error;return function(){var o=or(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var a={name:n,value:e},l=0,c=r.length;l<c;++l)if(r[l].name===n){r[l]=a;break}l===c&&r.push(a)}o.tween=r}}function s6(t,n){var e=this._id;if(t+="",arguments.length<2){for(var i=Fi(this.node(),e).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((n==null?J0e:e_e)(e,t,n))}function yg(t,n,e){var i=t._id;return t.each(function(){var r=or(this,i);(r.value||(r.value={}))[n]=e.apply(this,arguments)}),function(r){return Fi(r,i).value[n]}}function h1(t,n){var e;return(typeof n=="number"?rr:n instanceof js?lh:(e=js(n))?(n=e,lh):Hv)(t,n)}function t_e(t){return function(){this.removeAttribute(t)}}function n_e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function i_e(t,n,e){var i,r=e+"",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=n(i=s,e)}}function r_e(t,n,e){var i,r=e+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=n(i=s,e)}}function o_e(t,n,e){var i,r,o;return function(){var s,a=e(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,a)))}}function s_e(t,n,e){var i,r,o;return function(){var s,a=e(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,a)))}}function a6(t,n){var e=Fl(t),i=e==="transform"?qF:h1;return this.attrTween(t,typeof n=="function"?(e.local?s_e:o_e)(e,i,yg(this,"attr."+t,n)):n==null?(e.local?n_e:t_e)(e):(e.local?r_e:i_e)(e,i,n))}function a_e(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function l_e(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function c_e(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&l_e(t,o)),e}return r._value=n,r}function u_e(t,n){var e,i;function r(){var o=n.apply(this,arguments);return o!==i&&(e=(i=o)&&a_e(t,o)),e}return r._value=n,r}function l6(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var i=Fl(t);return this.tween(e,(i.local?c_e:u_e)(i,n))}function d_e(t,n){return function(){Zv(this,t).delay=+n.apply(this,arguments)}}function p_e(t,n){return n=+n,function(){Zv(this,t).delay=n}}function c6(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?d_e:p_e)(n,t)):Fi(this.node(),n).delay}function h_e(t,n){return function(){or(this,t).duration=+n.apply(this,arguments)}}function m_e(t,n){return n=+n,function(){or(this,t).duration=n}}function u6(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?h_e:m_e)(n,t)):Fi(this.node(),n).duration}function f_e(t,n){if(typeof n!="function")throw new Error;return function(){or(this,t).ease=n}}function d6(t){var n=this._id;return arguments.length?this.each(f_e(n,t)):Fi(this.node(),n).ease}function g_e(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;or(this,t).ease=e}}function p6(t){if(typeof t!="function")throw new Error;return this.each(g_e(this._id,t))}function h6(t){typeof t!="function"&&(t=Pv(t));for(var n=this._groups,e=n.length,i=new Array(e),r=0;r<e;++r)for(var o=n[r],s=o.length,a=i[r]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Xr(i,this._parents,this._name,this._id)}function m6(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,i=n.length,r=e.length,o=Math.min(i,r),s=new Array(i),a=0;a<o;++a)for(var l=n[a],c=e[a],u=l.length,d=s[a]=new Array(u),p,h=0;h<u;++h)(p=l[h]||c[h])&&(d[h]=p);for(;a<i;++a)s[a]=n[a];return new Xr(s,this._parents,this._name,this._id)}function y_e(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function b_e(t,n,e){var i,r,o=y_e(n)?Zv:or;return function(){var s=o(this,t),a=s.on;a!==i&&(r=(i=a).copy()).on(n,e),s.on=r}}function f6(t,n){var e=this._id;return arguments.length<2?Fi(this.node(),e).on.on(t):this.each(b_e(e,t,n))}function x_e(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function g6(){return this.on("end.remove",x_e(this._id))}function y6(t){var n=this._name,e=this._id;typeof t!="function"&&(t=oh(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var a=i[s],l=a.length,c=o[s]=new Array(l),u,d,p=0;p<l;++p)(u=a[p])&&(d=t.call(u,u.__data__,p,a))&&("__data__"in u&&(d.__data__=u.__data__),c[p]=d,$u(c[p],n,e,p,c,Fi(u,e)));return new Xr(o,this._parents,n,e)}function b6(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Lv(t));for(var i=this._groups,r=i.length,o=[],s=[],a=0;a<r;++a)for(var l=i[a],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var p=t.call(u,u.__data__,d,l),h,m=Fi(u,e),g=0,f=p.length;g<f;++g)(h=p[g])&&$u(h,n,e,g,p,m);o.push(p),s.push(u)}return new Xr(o,s,n,e)}var v_e=Ll.prototype.constructor;function x6(){return new v_e(this._groups,this._parents)}function __e(t,n){var e,i,r;return function(){var o=Pu(this,t),s=(this.style.removeProperty(t),Pu(this,t));return o===s?null:o===e&&s===i?r:r=n(e=o,i=s)}}function v6(t){return function(){this.style.removeProperty(t)}}function w_e(t,n,e){var i,r=e+"",o;return function(){var s=Pu(this,t);return s===r?null:s===i?o:o=n(i=s,e)}}function C_e(t,n,e){var i,r,o;return function(){var s=Pu(this,t),a=e(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Pu(this,t))),s===l?null:s===i&&l===r?o:(r=l,o=n(i=s,a))}}function T_e(t,n){var e,i,r,o="style."+n,s="end."+o,a;return function(){var l=or(this,t),c=l.on,u=l.value[o]==null?a||(a=v6(n)):void 0;(c!==e||r!==u)&&(i=(e=c).copy()).on(s,r=u),l.on=i}}function _6(t,n,e){var i=(t+="")=="transform"?jF:h1;return n==null?this.styleTween(t,__e(t,i)).on("end.style."+t,v6(t)):typeof n=="function"?this.styleTween(t,C_e(t,i,yg(this,"style."+t,n))).each(T_e(this._id,t)):this.styleTween(t,w_e(t,i,n),e).on("end.style."+t,null)}function S_e(t,n,e){return function(i){this.style.setProperty(t,n.call(this,i),e)}}function k_e(t,n,e){var i,r;function o(){var s=n.apply(this,arguments);return s!==r&&(i=(r=s)&&S_e(t,s,e)),i}return o._value=n,o}function w6(t,n,e){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(n==null)return this.tween(i,null);if(typeof n!="function")throw new Error;return this.tween(i,k_e(t,n,e??""))}function I_e(t){return function(){this.textContent=t}}function E_e(t){return function(){var n=t(this);this.textContent=n??""}}function C6(t){return this.tween("text",typeof t=="function"?E_e(yg(this,"text",t)):I_e(t==null?"":t+""))}function D_e(t){return function(n){this.textContent=t.call(this,n)}}function A_e(t){var n,e;function i(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&D_e(r)),n}return i._value=t,i}function T6(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,A_e(t))}function S6(){for(var t=this._name,n=this._id,e=m1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=Fi(l,n);$u(l,t,e,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Xr(i,this._parents,t,e)}function k6(){var t,n,e=this,i=e._id,r=e.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--r===0&&o()}};e.each(function(){var c=or(this,i),u=c.on;u!==t&&(n=(t=u).copy(),n._.cancel.push(a),n._.interrupt.push(a),n._.end.push(l)),c.on=n}),r===0&&o()})}var N_e=0;function Xr(t,n,e,i){this._groups=t,this._parents=n,this._name=e,this._id=i}function I6(t){return Ll().transition(t)}function m1(){return++N_e}var $l=Ll.prototype;Xr.prototype=I6.prototype={constructor:Xr,select:y6,selectAll:b6,selectChild:$l.selectChild,selectChildren:$l.selectChildren,filter:h6,merge:m6,selection:x6,transition:S6,call:$l.call,nodes:$l.nodes,node:$l.node,size:$l.size,empty:$l.empty,each:$l.each,on:f6,attr:a6,attrTween:l6,style:_6,styleTween:w6,text:C6,textTween:T6,remove:g6,tween:s6,delay:c6,duration:u6,ease:d6,easeVarying:p6,end:k6,[Symbol.iterator]:$l[Symbol.iterator]};function f1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var M_e={time:null,delay:0,duration:250,ease:f1};function R_e(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function E6(t){var n,e;t instanceof Xr?(n=t._id,t=t._name):(n=m1(),(e=M_e).time=Yv(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&$u(l,t,n,c,s,e||R_e(l,n));return new Xr(i,this._parents,t,n)}Ll.prototype.interrupt=o6;Ll.prototype.transition=E6;var g1=t=>()=>t;function KF(t,{sourceEvent:n,target:e,selection:i,mode:r,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:e,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function D6(t){t.stopImmediatePropagation()}function y1(t){t.preventDefault(),t.stopImmediatePropagation()}var A6={name:"drag"},YF={name:"space"},bg={name:"handle"},xg={name:"center"},{abs:N6,max:_r,min:wr}=Math;function M6(t){return[+t[0],+t[1]]}function JF(t){return[M6(t[0]),M6(t[1])]}var b1={name:"x",handles:["w","e"].map(Jv),input:function(t,n){return t==null?null:[[+t[0],n[0][1]],[+t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},QF={name:"y",handles:["n","s"].map(Jv),input:function(t,n){return t==null?null:[[n[0][0],+t[0]],[n[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},gut={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Jv),input:function(t){return t==null?null:JF(t)},output:function(t){return t}},Vl={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},R6={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},O6={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},O_e={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},F_e={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Jv(t){return{type:t}}function L_e(t){return!t.ctrlKey&&!t.button}function P_e(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function $_e(){return navigator.maxTouchPoints||"ontouchstart"in this}function ZF(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function V_e(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function e2(){return B_e(b1)}function B_e(t){var n=P_e,e=L_e,i=$_e,r=!0,o=Vv("start","brush","end"),s=6,a;function l(f){var y=f.property("__brush",g).selectAll(".overlay").data([Jv("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Vl.overlay).merge(y).each(function(){var v=ZF(this).extent;vr(this).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1])}),f.selectAll(".selection").data([Jv("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Vl.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=f.selectAll(".handle").data(t.handles,function(v){return v.type});b.exit().remove(),b.enter().append("rect").attr("class",function(v){return"handle handle--"+v.type}).attr("cursor",function(v){return Vl[v.type]}),f.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(i).on("touchstart.brush",p).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(f,y,b){f.tween?f.on("start.brush",function(v){u(this,arguments).beforestart().start(v)}).on("interrupt.brush end.brush",function(v){u(this,arguments).end(v)}).tween("brush",function(){var v=this,_=v.__brush,w=u(v,arguments),T=_.selection,D=t.input(typeof y=="function"?y.apply(this,arguments):y,_.extent),N=Pl(T,D);function O(P){_.selection=P===1&&D===null?null:N(P),c.call(v),w.brush()}return T!==null&&D!==null?O:O(1)}):f.each(function(){var v=this,_=arguments,w=v.__brush,T=t.input(typeof y=="function"?y.apply(v,_):y,w.extent),D=u(v,_).beforestart();gg(v),w.selection=T===null?null:T,c.call(v),D.start(b).brush(b).end(b)})},l.clear=function(f,y){l.move(f,null,y)};function c(){var f=vr(this),y=ZF(this).selection;y?(f.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),f.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?y[1][0]-s/2:y[0][0]-s/2}).attr("y",function(b){return b.type[0]==="s"?y[1][1]-s/2:y[0][1]-s/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?y[1][0]-y[0][0]+s:s}).attr("height",function(b){return b.type==="e"||b.type==="w"?y[1][1]-y[0][1]+s:s})):f.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(f,y,b){var v=f.__brush.emitter;return v&&(!b||!v.clean)?v:new d(f,y,b)}function d(f,y,b){this.that=f,this.args=y,this.state=f.__brush,this.active=0,this.clean=b}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(f,y){return this.starting?(this.starting=!1,this.emit("start",f,y)):this.emit("brush",f),this},brush:function(f,y){return this.emit("brush",f,y),this},end:function(f,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",f,y)),this},emit:function(f,y,b){var v=vr(this.that).datum();o.call(f,this.that,new KF(f,{sourceEvent:y,target:l,selection:t.output(this.state.selection),mode:b,dispatch:o}),v)}};function p(f){if(a&&!f.touches||!e.apply(this,arguments))return;var y=this,b=f.target.__data__.type,v=(r&&f.metaKey?b="overlay":b)==="selection"?A6:r&&f.altKey?xg:bg,_=t===QF?null:O_e[b],w=t===b1?null:F_e[b],T=ZF(y),D=T.extent,N=T.selection,O=D[0][0],P,B,K=D[0][1],X,Z,te=D[1][0],U,j,q=D[1][1],Q,oe,ae=0,de=0,fe,ge=_&&w&&r&&f.shiftKey,xe,Ne,ve=Array.from(f.touches||[f],Fe=>{let ft=Fe.identifier;return Fe=qS(Fe,y),Fe.point0=Fe.slice(),Fe.identifier=ft,Fe});gg(y);var Ue=u(y,arguments,!0).beforestart();if(b==="overlay"){N&&(fe=!0);let Fe=[ve[0],ve[1]||ve[0]];T.selection=N=[[P=t===QF?O:wr(Fe[0][0],Fe[1][0]),X=t===b1?K:wr(Fe[0][1],Fe[1][1])],[U=t===QF?te:_r(Fe[0][0],Fe[1][0]),Q=t===b1?q:_r(Fe[0][1],Fe[1][1])]],ve.length>1&&mt(f)}else P=N[0][0],X=N[0][1],U=N[1][0],Q=N[1][1];B=P,Z=X,j=U,oe=Q;var se=vr(y).attr("pointer-events","none"),we=se.selectAll(".overlay").attr("cursor",Vl[b]);if(f.touches)Ue.moved=ue,Ue.ended=lt;else{var Ie=vr(f.view).on("mousemove.brush",ue,!0).on("mouseup.brush",lt,!0);r&&Ie.on("keydown.brush",Dt,!0).on("keyup.brush",xt,!0),PF(f.view)}c.call(y),Ue.start(f,v.name);function ue(Fe){for(let ft of Fe.changedTouches||[Fe])for(let Mr of ve)Mr.identifier===ft.identifier&&(Mr.cur=qS(ft,y));if(ge&&!xe&&!Ne&&ve.length===1){let ft=ve[0];N6(ft.cur[0]-ft[0])>N6(ft.cur[1]-ft[1])?Ne=!0:xe=!0}for(let ft of ve)ft.cur&&(ft[0]=ft.cur[0],ft[1]=ft.cur[1]);fe=!0,y1(Fe),mt(Fe)}function mt(Fe){let ft=ve[0],Mr=ft.point0;var An;switch(ae=ft[0]-Mr[0],de=ft[1]-Mr[1],v){case YF:case A6:{_&&(ae=_r(O-P,wr(te-U,ae)),B=P+ae,j=U+ae),w&&(de=_r(K-X,wr(q-Q,de)),Z=X+de,oe=Q+de);break}case bg:{ve[1]?(_&&(B=_r(O,wr(te,ve[0][0])),j=_r(O,wr(te,ve[1][0])),_=1),w&&(Z=_r(K,wr(q,ve[0][1])),oe=_r(K,wr(q,ve[1][1])),w=1)):(_<0?(ae=_r(O-P,wr(te-P,ae)),B=P+ae,j=U):_>0&&(ae=_r(O-U,wr(te-U,ae)),B=P,j=U+ae),w<0?(de=_r(K-X,wr(q-X,de)),Z=X+de,oe=Q):w>0&&(de=_r(K-Q,wr(q-Q,de)),Z=X,oe=Q+de));break}case xg:{_&&(B=_r(O,wr(te,P-ae*_)),j=_r(O,wr(te,U+ae*_))),w&&(Z=_r(K,wr(q,X-de*w)),oe=_r(K,wr(q,Q+de*w)));break}}j<B&&(_*=-1,An=P,P=U,U=An,An=B,B=j,j=An,b in R6&&we.attr("cursor",Vl[b=R6[b]])),oe<Z&&(w*=-1,An=X,X=Q,Q=An,An=Z,Z=oe,oe=An,b in O6&&we.attr("cursor",Vl[b=O6[b]])),T.selection&&(N=T.selection),xe&&(B=N[0][0],j=N[1][0]),Ne&&(Z=N[0][1],oe=N[1][1]),(N[0][0]!==B||N[0][1]!==Z||N[1][0]!==j||N[1][1]!==oe)&&(T.selection=[[B,Z],[j,oe]],c.call(y),Ue.brush(Fe,v.name))}function lt(Fe){if(D6(Fe),Fe.touches){if(Fe.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else $F(Fe.view,fe),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);se.attr("pointer-events","all"),we.attr("cursor",Vl.overlay),T.selection&&(N=T.selection),V_e(N)&&(T.selection=null,c.call(y)),Ue.end(Fe,v.name)}function Dt(Fe){switch(Fe.keyCode){case 16:{ge=_&&w;break}case 18:{v===bg&&(_&&(U=j-ae*_,P=B+ae*_),w&&(Q=oe-de*w,X=Z+de*w),v=xg,mt(Fe));break}case 32:{(v===bg||v===xg)&&(_<0?U=j-ae:_>0&&(P=B-ae),w<0?Q=oe-de:w>0&&(X=Z-de),v=YF,we.attr("cursor",Vl.selection),mt(Fe));break}default:return}y1(Fe)}function xt(Fe){switch(Fe.keyCode){case 16:{ge&&(xe=Ne=ge=!1,mt(Fe));break}case 18:{v===xg&&(_<0?U=j:_>0&&(P=B),w<0?Q=oe:w>0&&(X=Z),v=bg,mt(Fe));break}case 32:{v===YF&&(Fe.altKey?(_&&(U=j-ae*_,P=B+ae*_),w&&(Q=oe-de*w,X=Z+de*w),v=xg):(_<0?U=j:_>0&&(P=B),w<0?Q=oe:w>0&&(X=Z),v=bg),we.attr("cursor",Vl[b]),mt(Fe));break}default:return}y1(Fe)}}function h(f){u(this,arguments).moved(f)}function m(f){u(this,arguments).ended(f)}function g(){var f=this.__brush||{selection:null};return f.extent=JF(n.apply(this,arguments)),f.dim=t,f}return l.extent=function(f){return arguments.length?(n=typeof f=="function"?f:g1(JF(f)),l):n},l.filter=function(f){return arguments.length?(e=typeof f=="function"?f:g1(!!f),l):e},l.touchable=function(f){return arguments.length?(i=typeof f=="function"?f:g1(!!f),l):i},l.handleSize=function(f){return arguments.length?(s=+f,l):s},l.keyModifiers=function(f){return arguments.length?(r=!!f,l):r},l.on=function(){var f=o.on.apply(o,arguments);return f===o?l:f},l}function Oa(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function t2(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function uh(t){let n,e,i;t.length!==2?(n=Oa,e=(a,l)=>Oa(t(a),l),i=(a,l)=>t(a)-l):(n=t===Oa||t===t2?t:z_e,e=t,i=t);function r(a,l,c=0,u=a.length){if(c<u){if(n(l,l)!==0)return u;do{let d=c+u>>>1;e(a[d],l)<0?c=d+1:u=d}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(n(l,l)!==0)return u;do{let d=c+u>>>1;e(a[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function s(a,l,c=0,u=a.length){let d=r(a,l,c,u-1);return d>c&&i(a[d-1],l)>-i(a[d],l)?d-1:d}return{left:r,center:s,right:o}}function z_e(){return 0}function e0(t){return t===null?NaN:+t}var F6=uh(Oa),L6=F6.right,G_e=F6.left,U_e=uh(e0).center,t0=L6;var vg=class extends Map{constructor(n,e=j_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),n!=null)for(let[i,r]of n)this.set(i,r)}get(n){return super.get(P6(this,n))}has(n){return super.has(P6(this,n))}set(n,e){return super.set(H_e(this,n),e)}delete(n){return super.delete(W_e(this,n))}};function P6({_intern:t,_key:n},e){let i=n(e);return t.has(i)?t.get(i):e}function H_e({_intern:t,_key:n},e){let i=n(e);return t.has(i)?t.get(i):(t.set(i,e),e)}function W_e({_intern:t,_key:n},e){let i=n(e);return t.has(i)&&(e=t.get(i),t.delete(i)),e}function j_e(t){return t!==null&&typeof t=="object"?t.valueOf():t}var q_e=Math.sqrt(50),X_e=Math.sqrt(10),K_e=Math.sqrt(2);function x1(t,n,e){let i=(n-t)/Math.max(0,e),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),s=o>=q_e?10:o>=X_e?5:o>=K_e?2:1,a,l,c;return r<0?(c=Math.pow(10,-r)/s,a=Math.round(t*c),l=Math.round(n*c),a/c<t&&++a,l/c>n&&--l,c=-c):(c=Math.pow(10,r)*s,a=Math.round(t/c),l=Math.round(n/c),a*c<t&&++a,l*c>n&&--l),l<a&&.5<=e&&e<2?x1(t,n,e*2):[a,l,c]}function v1(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];let i=n<t,[r,o,s]=i?x1(n,t,e):x1(t,n,e);if(!(o>=r))return[];let a=o-r+1,l=new Array(a);if(i)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(r+c)/-s;else for(let c=0;c<a;++c)l[c]=(r+c)*s;return l}function n0(t,n,e){return n=+n,t=+t,e=+e,x1(t,n,e)[2]}function _g(t,n,e){n=+n,t=+t,e=+e;let i=n<t,r=i?n0(n,t,e):n0(t,n,e);return(i?-1:1)*(r<0?1/-r:r)}function n2(t,n,e=e0){if(!(!(i=t.length)||isNaN(n=+n))){if(n<=0||i<2)return+e(t[0],0,t);if(n>=1)return+e(t[i-1],i-1,t);var i,r=(i-1)*n,o=Math.floor(r),s=+e(t[o],o,t),a=+e(t[o+1],o+1,t);return s+(a-s)*(r-o)}}function wg(t,n,e){t=+t,n=+n,e=(r=arguments.length)<2?(n=t,t=0,1):r<3?1:+e;for(var i=-1,r=Math.max(0,Math.ceil((n-t)/e))|0,o=new Array(r);++i<r;)o[i]=t+i*e;return o}function Fa(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}var i2=Symbol("implicit");function dh(){var t=new vg,n=[],e=[],i=i2;function r(o){let s=t.get(o);if(s===void 0){if(i!==i2)return i;t.set(o,s=n.push(o)-1)}return e[s%e.length]}return r.domain=function(o){if(!arguments.length)return n.slice();n=[],t=new vg;for(let s of o)t.has(s)||t.set(s,n.push(s)-1);return r},r.range=function(o){return arguments.length?(e=Array.from(o),r):e.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return dh(n,e).unknown(i)},Fa.apply(r,arguments),r}function Cg(){var t=dh().unknown(void 0),n=t.domain,e=t.range,i=0,r=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function d(){var p=n().length,h=r<i,m=h?r:i,g=h?i:r;o=(g-m)/Math.max(1,p-l+c*2),a&&(o=Math.floor(o)),m+=(g-m-o*(p-l))*u,s=o*(1-l),a&&(m=Math.round(m),s=Math.round(s));var f=wg(p).map(function(y){return m+o*y});return e(h?f.reverse():f)}return t.domain=function(p){return arguments.length?(n(p),d()):n()},t.range=function(p){return arguments.length?([i,r]=p,i=+i,r=+r,d()):[i,r]},t.rangeRound=function(p){return[i,r]=p,i=+i,r=+r,a=!0,d()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(p){return arguments.length?(a=!!p,d()):a},t.padding=function(p){return arguments.length?(l=Math.min(1,c=+p),d()):l},t.paddingInner=function(p){return arguments.length?(l=Math.min(1,p),d()):l},t.paddingOuter=function(p){return arguments.length?(c=+p,d()):c},t.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),d()):u},t.copy=function(){return Cg(n(),[i,r]).round(a).paddingInner(l).paddingOuter(c).align(u)},Fa.apply(d(),arguments)}function $6(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return $6(n())},t}function _1(){return $6(Cg.apply(null,arguments).paddingInner(1))}function r2(t){return function(){return t}}function o2(t){return+t}var V6=[0,1];function Tg(t){return t}function s2(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:r2(isNaN(n)?NaN:.5)}function Q_e(t,n){var e;return t>n&&(e=t,t=n,n=e),function(i){return Math.max(t,Math.min(n,i))}}function Z_e(t,n,e){var i=t[0],r=t[1],o=n[0],s=n[1];return r<i?(i=s2(r,i),o=e(s,o)):(i=s2(i,r),o=e(o,s)),function(a){return o(i(a))}}function J_e(t,n,e){var i=Math.min(t.length,n.length)-1,r=new Array(i),o=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<i;)r[s]=s2(t[s],t[s+1]),o[s]=e(n[s],n[s+1]);return function(a){var l=t0(t,a,1,i)-1;return o[l](r[l](a))}}function w1(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ewe(){var t=V6,n=V6,e=Pl,i,r,o,s=Tg,a,l,c;function u(){var p=Math.min(t.length,n.length);return s!==Tg&&(s=Q_e(t[0],t[p-1])),a=p>2?J_e:Z_e,l=c=null,d}function d(p){return p==null||isNaN(p=+p)?o:(l||(l=a(t.map(i),n,e)))(i(s(p)))}return d.invert=function(p){return s(r((c||(c=a(n,t.map(i),rr)))(p)))},d.domain=function(p){return arguments.length?(t=Array.from(p,o2),u()):t.slice()},d.range=function(p){return arguments.length?(n=Array.from(p),u()):n.slice()},d.rangeRound=function(p){return n=Array.from(p),e=HF,u()},d.clamp=function(p){return arguments.length?(s=p?!0:Tg,u()):s!==Tg},d.interpolate=function(p){return arguments.length?(e=p,u()):e},d.unknown=function(p){return arguments.length?(o=p,d):o},function(p,h){return i=p,r=h,u()}}function i0(){return ewe()(Tg,Tg)}function B6(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ph(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,i=t.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+t.slice(e+1)]}function La(t){return t=ph(Math.abs(t)),t?t[1]:NaN}function z6(t,n){return function(e,i){for(var r=e.length,o=[],s=0,a=t[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),o.push(e.substring(r-=a,r+a)),!((l+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(n)}}function G6(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var twe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vu(t){if(!(n=twe.exec(t)))throw new Error("invalid format: "+t);var n;return new C1({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Vu.prototype=C1.prototype;function C1(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}C1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function U6(t){e:for(var n=t.length,e=1,i=-1,r;e<n;++e)switch(t[e]){case".":i=r=e;break;case"0":i===0&&(i=e),r=e;break;default:if(!+t[e])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var a2;function H6(t,n){var e=ph(t,n);if(!e)return t+"";var i=e[0],r=e[1],o=r-(a2=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ph(t,Math.max(0,n+o-1))[0]}function l2(t,n){var e=ph(t,n);if(!e)return t+"";var i=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}var c2={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:B6,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>l2(t*100,n),r:l2,s:H6,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function u2(t){return t}var W6=Array.prototype.map,j6=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function q6(t){var n=t.grouping===void 0||t.thousands===void 0?u2:z6(W6.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?u2:G6(W6.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"\u2212":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Vu(d);var p=d.fill,h=d.align,m=d.sign,g=d.symbol,f=d.zero,y=d.width,b=d.comma,v=d.precision,_=d.trim,w=d.type;w==="n"?(b=!0,w="g"):c2[w]||(v===void 0&&(v=12),_=!0,w="g"),(f||p==="0"&&h==="=")&&(f=!0,p="0",h="=");var T=g==="$"?e:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",D=g==="$"?i:/[%p]/.test(w)?s:"",N=c2[w],O=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function P(B){var K=T,X=D,Z,te,U;if(w==="c")X=N(B)+X,B="";else{B=+B;var j=B<0||1/B<0;if(B=isNaN(B)?l:N(Math.abs(B),v),_&&(B=U6(B)),j&&+B==0&&m!=="+"&&(j=!1),K=(j?m==="("?m:a:m==="-"||m==="("?"":m)+K,X=(w==="s"?j6[8+a2/3]:"")+X+(j&&m==="("?")":""),O){for(Z=-1,te=B.length;++Z<te;)if(U=B.charCodeAt(Z),48>U||U>57){X=(U===46?r+B.slice(Z+1):B.slice(Z))+X,B=B.slice(0,Z);break}}}b&&!f&&(B=n(B,1/0));var q=K.length+B.length+X.length,Q=q<y?new Array(y-q+1).join(p):"";switch(b&&f&&(B=n(Q+B,Q.length?y-X.length:1/0),Q=""),h){case"<":B=K+B+X+Q;break;case"=":B=K+Q+B+X;break;case"^":B=Q.slice(0,q=Q.length>>1)+K+B+X+Q.slice(q);break;default:B=Q+K+B+X;break}return o(B)}return P.toString=function(){return d+""},P}function u(d,p){var h=c((d=Vu(d),d.type="f",d)),m=Math.max(-8,Math.min(8,Math.floor(La(p)/3)))*3,g=Math.pow(10,-m),f=j6[8+m/3];return function(y){return h(g*y)+f}}return{format:c,formatPrefix:u}}var T1,S1,k1;d2({thousands:",",grouping:[3],currency:["$",""]});function d2(t){return T1=q6(t),S1=T1.format,k1=T1.formatPrefix,T1}function p2(t){return Math.max(0,-La(Math.abs(t)))}function h2(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(La(n)/3)))*3-La(Math.abs(t)))}function m2(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,La(n)-La(t))+1}function f2(t,n,e,i){var r=_g(t,n,e),o;switch(i=Vu(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(n));return i.precision==null&&!isNaN(o=h2(r,s))&&(i.precision=o),k1(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=m2(r,Math.max(Math.abs(t),Math.abs(n))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=p2(r))&&(i.precision=o-(i.type==="%")*2);break}}return S1(i)}function nwe(t){var n=t.domain;return t.ticks=function(e){var i=n();return v1(i[0],i[i.length-1],e??10)},t.tickFormat=function(e,i){var r=n();return f2(r[0],r[r.length-1],e??10,i)},t.nice=function(e){e==null&&(e=10);var i=n(),r=0,o=i.length-1,s=i[r],a=i[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=r,r=o,o=c);u-- >0;){if(c=n0(s,a,e),c===l)return i[r]=s,i[o]=a,n(i);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function Pa(){var t=i0();return t.copy=function(){return w1(t,Pa())},Fa.apply(t,arguments),nwe(t)}function g2(t,n){t=t.slice();var e=0,i=t.length-1,r=t[e],o=t[i],s;return o<r&&(s=e,e=i,i=s,s=r,r=o,o=s),t[e]=n.floor(r),t[i]=n.ceil(o),t}function r0(){var t=[],n=[],e=[],i;function r(){var s=0,a=Math.max(1,n.length);for(e=new Array(a-1);++s<a;)e[s-1]=n2(t,s/a);return o}function o(s){return s==null||isNaN(s=+s)?i:n[t0(e,s)]}return o.invertExtent=function(s){var a=n.indexOf(s);return a<0?[NaN,NaN]:[a>0?e[a-1]:t[0],a<e.length?e[a]:t[t.length-1]]},o.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Oa),r()},o.range=function(s){return arguments.length?(n=Array.from(s),r()):n.slice()},o.unknown=function(s){return arguments.length?(i=s,o):i},o.quantiles=function(){return e.slice()},o.copy=function(){return r0().domain(t).range(n).unknown(i)},Fa.apply(o,arguments)}var y2=new Date,b2=new Date;function Rn(t,n,e,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),n(o,1),t(o),o),r.round=o=>{let s=r(o),a=r.ceil(o);return o-s<a-o?s:a},r.offset=(o,s)=>(n(o=new Date(+o),s==null?1:Math.floor(s)),o),r.range=(o,s,a)=>{let l=[];if(o=r.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),n(o,a),t(o);while(c<o&&o<s);return l},r.filter=o=>Rn(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;n(s,-1),!o(s););else for(;--a>=0;)for(;n(s,1),!o(s););}),e&&(r.count=(o,s)=>(y2.setTime(+o),b2.setTime(+s),t(y2),t(b2),Math.floor(e(y2,b2))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?s=>i(s)%o===0:s=>r.count(0,s)%o===0):r)),r}var o0=Rn(()=>{},(t,n)=>{t.setTime(+t+n)},(t,n)=>n-t);o0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Rn(n=>{n.setTime(Math.floor(n/t)*t)},(n,e)=>{n.setTime(+n+e*t)},(n,e)=>(e-n)/t):o0);var cpt=o0.range;var $a=Rn(t=>{t.setTime(t-t.getMilliseconds())},(t,n)=>{t.setTime(+t+n*1e3)},(t,n)=>(n-t)/1e3,t=>t.getUTCSeconds()),X6=$a.range;var Sg=Rn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3)},(t,n)=>{t.setTime(+t+n*6e4)},(t,n)=>(n-t)/6e4,t=>t.getMinutes()),iwe=Sg.range,I1=Rn(t=>{t.setUTCSeconds(0,0)},(t,n)=>{t.setTime(+t+n*6e4)},(t,n)=>(n-t)/6e4,t=>t.getUTCMinutes()),rwe=I1.range;var kg=Rn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*1e3-t.getMinutes()*6e4)},(t,n)=>{t.setTime(+t+n*36e5)},(t,n)=>(n-t)/36e5,t=>t.getHours()),owe=kg.range,E1=Rn(t=>{t.setUTCMinutes(0,0,0)},(t,n)=>{t.setTime(+t+n*36e5)},(t,n)=>(n-t)/36e5,t=>t.getUTCHours()),swe=E1.range;var Bl=Rn(t=>t.setHours(0,0,0,0),(t,n)=>t.setDate(t.getDate()+n),(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/864e5,t=>t.getDate()-1),awe=Bl.range,a0=Rn(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/864e5,t=>t.getUTCDate()-1),lwe=a0.range,D1=Rn(t=>{t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n)},(t,n)=>(n-t)/864e5,t=>Math.floor(t/864e5)),cwe=D1.range;function fh(t){return Rn(n=>{n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},(n,e)=>{n.setDate(n.getDate()+e*7)},(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*6e4)/6048e5)}var zl=fh(0),Ig=fh(1),Y6=fh(2),Q6=fh(3),Bu=fh(4),Z6=fh(5),J6=fh(6),e8=zl.range,uwe=Ig.range,dwe=Y6.range,pwe=Q6.range,hwe=Bu.range,mwe=Z6.range,fwe=J6.range;function gh(t){return Rn(n=>{n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e*7)},(n,e)=>(e-n)/6048e5)}var yh=gh(0),Eg=gh(1),t8=gh(2),n8=gh(3),zu=gh(4),i8=gh(5),r8=gh(6),o8=yh.range,gwe=Eg.range,ywe=t8.range,bwe=n8.range,xwe=zu.range,vwe=i8.range,_we=r8.range;var Dg=Rn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,n)=>{t.setMonth(t.getMonth()+n)},(t,n)=>n.getMonth()-t.getMonth()+(n.getFullYear()-t.getFullYear())*12,t=>t.getMonth()),wwe=Dg.range,A1=Rn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCMonth(t.getUTCMonth()+n)},(t,n)=>n.getUTCMonth()-t.getUTCMonth()+(n.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth()),Cwe=A1.range;var Po=Rn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n)},(t,n)=>n.getFullYear()-t.getFullYear(),t=>t.getFullYear());Po.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rn(n=>{n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e*t)});var Twe=Po.range,qs=Rn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n)},(t,n)=>n.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());qs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Rn(n=>{n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e*t)});var Swe=qs.range;function a8(t,n,e,i,r,o){let s=[[$a,1,1e3],[$a,5,5*1e3],[$a,15,15*1e3],[$a,30,30*1e3],[o,1,6e4],[o,5,5*6e4],[o,15,15*6e4],[o,30,30*6e4],[r,1,36e5],[r,3,3*36e5],[r,6,6*36e5],[r,12,12*36e5],[i,1,864e5],[i,2,2*864e5],[e,1,6048e5],[n,1,2592e6],[n,3,3*2592e6],[t,1,31536e6]];function a(c,u,d){let p=u<c;p&&([c,u]=[u,c]);let h=d&&typeof d.range=="function"?d:l(c,u,d),m=h?h.range(c,+u+1):[];return p?m.reverse():m}function l(c,u,d){let p=Math.abs(u-c)/d,h=uh(([,,f])=>f).right(s,p);if(h===s.length)return t.every(_g(c/31536e6,u/31536e6,d));if(h===0)return o0.every(Math.max(_g(c,u,d),1));let[m,g]=s[p/s[h-1][2]<s[h][2]/p?h-1:h];return m.every(g)}return[a,l]}var[Iwe,Ewe]=a8(qs,A1,yh,D1,E1,I1),[x2,v2]=a8(Po,Dg,zl,Bl,kg,Sg);function _2(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function w2(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function l0(t,n,e){return{y:t,m:n,d:e,H:0,M:0,S:0,L:0}}function C2(t){var n=t.dateTime,e=t.date,i=t.time,r=t.periods,o=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,c=c0(r),u=u0(r),d=c0(o),p=u0(o),h=c0(s),m=u0(s),g=c0(a),f=u0(a),y=c0(l),b=u0(l),v={a:j,A:q,b:Q,B:oe,c:null,d:h8,e:h8,f:Qwe,g:aCe,G:cCe,H:Xwe,I:Kwe,j:Ywe,L:b8,m:Zwe,M:Jwe,p:ae,q:de,Q:g8,s:y8,S:eCe,u:tCe,U:nCe,V:iCe,w:rCe,W:oCe,x:null,X:null,y:sCe,Y:lCe,Z:uCe,"%":f8},_={a:fe,A:ge,b:xe,B:Ne,c:null,d:m8,e:m8,f:mCe,g:TCe,G:kCe,H:dCe,I:pCe,j:hCe,L:v8,m:fCe,M:gCe,p:ve,q:Ue,Q:g8,s:y8,S:yCe,u:bCe,U:xCe,V:vCe,w:_Ce,W:wCe,x:null,X:null,y:CCe,Y:SCe,Z:ICe,"%":f8},w={a:P,A:B,b:K,B:X,c:Z,d:d8,e:d8,f:Hwe,g:u8,G:c8,H:p8,I:p8,j:Bwe,L:Uwe,m:Vwe,M:zwe,p:O,q:$we,Q:jwe,s:qwe,S:Gwe,u:Rwe,U:Owe,V:Fwe,w:Mwe,W:Lwe,x:te,X:U,y:u8,Y:c8,Z:Pwe,"%":Wwe};v.x=T(e,v),v.X=T(i,v),v.c=T(n,v),_.x=T(e,_),_.X=T(i,_),_.c=T(n,_);function T(se,we){return function(Ie){var ue=[],mt=-1,lt=0,Dt=se.length,xt,Fe,ft;for(Ie instanceof Date||(Ie=new Date(+Ie));++mt<Dt;)se.charCodeAt(mt)===37&&(ue.push(se.slice(lt,mt)),(Fe=l8[xt=se.charAt(++mt)])!=null?xt=se.charAt(++mt):Fe=xt==="e"?" ":"0",(ft=we[xt])&&(xt=ft(Ie,Fe)),ue.push(xt),lt=mt+1);return ue.push(se.slice(lt,mt)),ue.join("")}}function D(se,we){return function(Ie){var ue=l0(1900,void 0,1),mt=N(ue,se,Ie+="",0),lt,Dt;if(mt!=Ie.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(we&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(lt=w2(l0(ue.y,0,1)),Dt=lt.getUTCDay(),lt=Dt>4||Dt===0?Eg.ceil(lt):Eg(lt),lt=a0.offset(lt,(ue.V-1)*7),ue.y=lt.getUTCFullYear(),ue.m=lt.getUTCMonth(),ue.d=lt.getUTCDate()+(ue.w+6)%7):(lt=_2(l0(ue.y,0,1)),Dt=lt.getDay(),lt=Dt>4||Dt===0?Ig.ceil(lt):Ig(lt),lt=Bl.offset(lt,(ue.V-1)*7),ue.y=lt.getFullYear(),ue.m=lt.getMonth(),ue.d=lt.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),Dt="Z"in ue?w2(l0(ue.y,0,1)).getUTCDay():_2(l0(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(Dt+5)%7:ue.w+ue.U*7-(Dt+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,w2(ue)):_2(ue)}}function N(se,we,Ie,ue){for(var mt=0,lt=we.length,Dt=Ie.length,xt,Fe;mt<lt;){if(ue>=Dt)return-1;if(xt=we.charCodeAt(mt++),xt===37){if(xt=we.charAt(mt++),Fe=w[xt in l8?we.charAt(mt++):xt],!Fe||(ue=Fe(se,Ie,ue))<0)return-1}else if(xt!=Ie.charCodeAt(ue++))return-1}return ue}function O(se,we,Ie){var ue=c.exec(we.slice(Ie));return ue?(se.p=u.get(ue[0].toLowerCase()),Ie+ue[0].length):-1}function P(se,we,Ie){var ue=h.exec(we.slice(Ie));return ue?(se.w=m.get(ue[0].toLowerCase()),Ie+ue[0].length):-1}function B(se,we,Ie){var ue=d.exec(we.slice(Ie));return ue?(se.w=p.get(ue[0].toLowerCase()),Ie+ue[0].length):-1}function K(se,we,Ie){var ue=y.exec(we.slice(Ie));return ue?(se.m=b.get(ue[0].toLowerCase()),Ie+ue[0].length):-1}function X(se,we,Ie){var ue=g.exec(we.slice(Ie));return ue?(se.m=f.get(ue[0].toLowerCase()),Ie+ue[0].length):-1}function Z(se,we,Ie){return N(se,n,we,Ie)}function te(se,we,Ie){return N(se,e,we,Ie)}function U(se,we,Ie){return N(se,i,we,Ie)}function j(se){return s[se.getDay()]}function q(se){return o[se.getDay()]}function Q(se){return l[se.getMonth()]}function oe(se){return a[se.getMonth()]}function ae(se){return r[+(se.getHours()>=12)]}function de(se){return 1+~~(se.getMonth()/3)}function fe(se){return s[se.getUTCDay()]}function ge(se){return o[se.getUTCDay()]}function xe(se){return l[se.getUTCMonth()]}function Ne(se){return a[se.getUTCMonth()]}function ve(se){return r[+(se.getUTCHours()>=12)]}function Ue(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var we=T(se+="",v);return we.toString=function(){return se},we},parse:function(se){var we=D(se+="",!1);return we.toString=function(){return se},we},utcFormat:function(se){var we=T(se+="",_);return we.toString=function(){return se},we},utcParse:function(se){var we=D(se+="",!0);return we.toString=function(){return se},we}}}var l8={"-":"",_:" ",0:"0"},Ki=/^\s*\d+/,Dwe=/^%/,Awe=/[\\^$*+?|[\]().{}]/g;function ln(t,n,e){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<e?new Array(e-o+1).join(n)+r:r)}function Nwe(t){return t.replace(Awe,"\\$&")}function c0(t){return new RegExp("^(?:"+t.map(Nwe).join("|")+")","i")}function u0(t){return new Map(t.map((n,e)=>[n.toLowerCase(),e]))}function Mwe(t,n,e){var i=Ki.exec(n.slice(e,e+1));return i?(t.w=+i[0],e+i[0].length):-1}function Rwe(t,n,e){var i=Ki.exec(n.slice(e,e+1));return i?(t.u=+i[0],e+i[0].length):-1}function Owe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.U=+i[0],e+i[0].length):-1}function Fwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.V=+i[0],e+i[0].length):-1}function Lwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.W=+i[0],e+i[0].length):-1}function c8(t,n,e){var i=Ki.exec(n.slice(e,e+4));return i?(t.y=+i[0],e+i[0].length):-1}function u8(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),e+i[0].length):-1}function Pwe(t,n,e){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),e+i[0].length):-1}function $we(t,n,e){var i=Ki.exec(n.slice(e,e+1));return i?(t.q=i[0]*3-3,e+i[0].length):-1}function Vwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.m=i[0]-1,e+i[0].length):-1}function d8(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.d=+i[0],e+i[0].length):-1}function Bwe(t,n,e){var i=Ki.exec(n.slice(e,e+3));return i?(t.m=0,t.d=+i[0],e+i[0].length):-1}function p8(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.H=+i[0],e+i[0].length):-1}function zwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.M=+i[0],e+i[0].length):-1}function Gwe(t,n,e){var i=Ki.exec(n.slice(e,e+2));return i?(t.S=+i[0],e+i[0].length):-1}function Uwe(t,n,e){var i=Ki.exec(n.slice(e,e+3));return i?(t.L=+i[0],e+i[0].length):-1}function Hwe(t,n,e){var i=Ki.exec(n.slice(e,e+6));return i?(t.L=Math.floor(i[0]/1e3),e+i[0].length):-1}function Wwe(t,n,e){var i=Dwe.exec(n.slice(e,e+1));return i?e+i[0].length:-1}function jwe(t,n,e){var i=Ki.exec(n.slice(e));return i?(t.Q=+i[0],e+i[0].length):-1}function qwe(t,n,e){var i=Ki.exec(n.slice(e));return i?(t.s=+i[0],e+i[0].length):-1}function h8(t,n){return ln(t.getDate(),n,2)}function Xwe(t,n){return ln(t.getHours(),n,2)}function Kwe(t,n){return ln(t.getHours()%12||12,n,2)}function Ywe(t,n){return ln(1+Bl.count(Po(t),t),n,3)}function b8(t,n){return ln(t.getMilliseconds(),n,3)}function Qwe(t,n){return b8(t,n)+"000"}function Zwe(t,n){return ln(t.getMonth()+1,n,2)}function Jwe(t,n){return ln(t.getMinutes(),n,2)}function eCe(t,n){return ln(t.getSeconds(),n,2)}function tCe(t){var n=t.getDay();return n===0?7:n}function nCe(t,n){return ln(zl.count(Po(t)-1,t),n,2)}function x8(t){var n=t.getDay();return n>=4||n===0?Bu(t):Bu.ceil(t)}function iCe(t,n){return t=x8(t),ln(Bu.count(Po(t),t)+(Po(t).getDay()===4),n,2)}function rCe(t){return t.getDay()}function oCe(t,n){return ln(Ig.count(Po(t)-1,t),n,2)}function sCe(t,n){return ln(t.getFullYear()%100,n,2)}function aCe(t,n){return t=x8(t),ln(t.getFullYear()%100,n,2)}function lCe(t,n){return ln(t.getFullYear()%1e4,n,4)}function cCe(t,n){var e=t.getDay();return t=e>=4||e===0?Bu(t):Bu.ceil(t),ln(t.getFullYear()%1e4,n,4)}function uCe(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ln(n/60|0,"0",2)+ln(n%60,"0",2)}function m8(t,n){return ln(t.getUTCDate(),n,2)}function dCe(t,n){return ln(t.getUTCHours(),n,2)}function pCe(t,n){return ln(t.getUTCHours()%12||12,n,2)}function hCe(t,n){return ln(1+a0.count(qs(t),t),n,3)}function v8(t,n){return ln(t.getUTCMilliseconds(),n,3)}function mCe(t,n){return v8(t,n)+"000"}function fCe(t,n){return ln(t.getUTCMonth()+1,n,2)}function gCe(t,n){return ln(t.getUTCMinutes(),n,2)}function yCe(t,n){return ln(t.getUTCSeconds(),n,2)}function bCe(t){var n=t.getUTCDay();return n===0?7:n}function xCe(t,n){return ln(yh.count(qs(t)-1,t),n,2)}function _8(t){var n=t.getUTCDay();return n>=4||n===0?zu(t):zu.ceil(t)}function vCe(t,n){return t=_8(t),ln(zu.count(qs(t),t)+(qs(t).getUTCDay()===4),n,2)}function _Ce(t){return t.getUTCDay()}function wCe(t,n){return ln(Eg.count(qs(t)-1,t),n,2)}function CCe(t,n){return ln(t.getUTCFullYear()%100,n,2)}function TCe(t,n){return t=_8(t),ln(t.getUTCFullYear()%100,n,2)}function SCe(t,n){return ln(t.getUTCFullYear()%1e4,n,4)}function kCe(t,n){var e=t.getUTCDay();return t=e>=4||e===0?zu(t):zu.ceil(t),ln(t.getUTCFullYear()%1e4,n,4)}function ICe(){return"+0000"}function f8(){return"%"}function g8(t){return+t}function y8(t){return Math.floor(+t/1e3)}var Ag,N1,w8,C8,T8;T2({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function T2(t){return Ag=C2(t),N1=Ag.format,w8=Ag.parse,C8=Ag.utcFormat,T8=Ag.utcParse,Ag}function ECe(t){return new Date(t)}function DCe(t){return t instanceof Date?+t:+new Date(+t)}function S8(t,n,e,i,r,o,s,a,l,c){var u=i0(),d=u.invert,p=u.domain,h=c(".%L"),m=c(":%S"),g=c("%I:%M"),f=c("%I %p"),y=c("%a %d"),b=c("%b %d"),v=c("%B"),_=c("%Y");function w(T){return(l(T)<T?h:a(T)<T?m:s(T)<T?g:o(T)<T?f:i(T)<T?r(T)<T?y:b:e(T)<T?v:_)(T)}return u.invert=function(T){return new Date(d(T))},u.domain=function(T){return arguments.length?p(Array.from(T,DCe)):p().map(ECe)},u.ticks=function(T){var D=p();return t(D[0],D[D.length-1],T??10)},u.tickFormat=function(T,D){return D==null?w:c(D)},u.nice=function(T){var D=p();return(!T||typeof T.range!="function")&&(T=n(D[0],D[D.length-1],T??10)),T?p(g2(D,T)):u},u.copy=function(){return w1(u,S8(t,n,e,i,r,o,s,a,l,c))},u}function d0(){return Fa.apply(S8(x2,v2,Po,Dg,zl,Bl,kg,Sg,$a,N1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vi(t){return function(){return t}}var S2=Math.PI,k2=2*S2,bh=1e-6,ACe=k2-bh;function k8(t){this._+=t[0];for(let n=1,e=t.length;n<e;++n)this._+=arguments[n]+t[n]}function NCe(t){let n=Math.floor(t);if(!(n>=0))throw new Error(`invalid digits: ${t}`);if(n>15)return k8;let e=10**n;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*e)/e+i[r]}}var xh=class{constructor(n){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=n==null?k8:NCe(n)}moveTo(n,e){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(n,e){this._append`L${this._x1=+n},${this._y1=+e}`}quadraticCurveTo(n,e,i,r){this._append`Q${+n},${+e},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(n,e,i,r,o,s){this._append`C${+n},${+e},${+i},${+r},${this._x1=+o},${this._y1=+s}`}arcTo(n,e,i,r,o){if(n=+n,e=+e,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=i-n,c=r-e,u=s-n,d=a-e,p=u*u+d*d;if(this._x1===null)this._append`M${this._x1=n},${this._y1=e}`;else if(p>bh)if(!(Math.abs(d*l-c*u)>bh)||!o)this._append`L${this._x1=n},${this._y1=e}`;else{let h=i-s,m=r-a,g=l*l+c*c,f=h*h+m*m,y=Math.sqrt(g),b=Math.sqrt(p),v=o*Math.tan((S2-Math.acos((g+p-f)/(2*y*b)))/2),_=v/b,w=v/y;Math.abs(_-1)>bh&&this._append`L${n+_*u},${e+_*d}`,this._append`A${o},${o},0,0,${+(d*h>u*m)},${this._x1=n+w*l},${this._y1=e+w*c}`}}arc(n,e,i,r,o,s){if(n=+n,e=+e,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let a=i*Math.cos(r),l=i*Math.sin(r),c=n+a,u=e+l,d=1^s,p=s?r-o:o-r;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>bh||Math.abs(this._y1-u)>bh)&&this._append`L${c},${u}`,i&&(p<0&&(p=p%k2+k2),p>ACe?this._append`A${i},${i},0,1,${d},${n-a},${e-l}A${i},${i},0,1,${d},${this._x1=c},${this._y1=u}`:p>bh&&this._append`A${i},${i},0,${+(p>=S2)},${d},${this._x1=n+i*Math.cos(o)},${this._y1=e+i*Math.sin(o)}`)}rect(n,e,i,r){this._append`M${this._x0=this._x1=+n},${this._y0=this._y1=+e}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function I8(){return new xh}I8.prototype=xh.prototype;function M1(t){let n=3;return t.digits=function(e){if(!arguments.length)return n;if(e==null)n=null;else{let i=Math.floor(e);if(!(i>=0))throw new RangeError(`invalid digits: ${e}`);n=i}return t},()=>new xh(n)}var fht=Array.prototype.slice;function R1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function E8(t){this._context=t}E8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break}}};function vh(t){return new E8(t)}function O1(t){return t[0]}function F1(t){return t[1]}function p0(t,n){var e=vi(!0),i=null,r=vh,o=null,s=M1(a);t=typeof t=="function"?t:t===void 0?O1:vi(t),n=typeof n=="function"?n:n===void 0?F1:vi(n);function a(l){var c,u=(l=R1(l)).length,d,p=!1,h;for(i==null&&(o=r(h=s())),c=0;c<=u;++c)!(c<u&&e(d=l[c],c,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+t(d,c,l),+n(d,c,l));if(h)return o=null,h+""||null}return a.x=function(l){return arguments.length?(t=typeof l=="function"?l:vi(+l),a):t},a.y=function(l){return arguments.length?(n=typeof l=="function"?l:vi(+l),a):n},a.defined=function(l){return arguments.length?(e=typeof l=="function"?l:vi(!!l),a):e},a.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),a):r},a.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),a):i},a}function L1(t,n,e){var i=null,r=vi(!0),o=null,s=vh,a=null,l=M1(c);t=typeof t=="function"?t:t===void 0?O1:vi(+t),n=typeof n=="function"?n:n===void 0?vi(0):vi(+n),e=typeof e=="function"?e:e===void 0?F1:vi(+e);function c(d){var p,h,m,g=(d=R1(d)).length,f,y=!1,b,v=new Array(g),_=new Array(g);for(o==null&&(a=s(b=l())),p=0;p<=g;++p){if(!(p<g&&r(f=d[p],p,d))===y)if(y=!y)h=p,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),m=p-1;m>=h;--m)a.point(v[m],_[m]);a.lineEnd(),a.areaEnd()}y&&(v[p]=+t(f,p,d),_[p]=+n(f,p,d),a.point(i?+i(f,p,d):v[p],e?+e(f,p,d):_[p]))}if(b)return a=null,b+""||null}function u(){return p0().defined(r).curve(s).context(o)}return c.x=function(d){return arguments.length?(t=typeof d=="function"?d:vi(+d),i=null,c):t},c.x0=function(d){return arguments.length?(t=typeof d=="function"?d:vi(+d),c):t},c.x1=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:vi(+d),c):i},c.y=function(d){return arguments.length?(n=typeof d=="function"?d:vi(+d),e=null,c):n},c.y0=function(d){return arguments.length?(n=typeof d=="function"?d:vi(+d),c):n},c.y1=function(d){return arguments.length?(e=d==null?null:typeof d=="function"?d:vi(+d),c):e},c.lineX0=c.lineY0=function(){return u().x(t).y(n)},c.lineY1=function(){return u().x(t).y(e)},c.lineX1=function(){return u().x(i).y(n)},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:vi(!!d),c):r},c.curve=function(d){return arguments.length?(s=d,o!=null&&(a=s(o)),c):s},c.context=function(d){return arguments.length?(d==null?o=a=null:a=s(o=d),c):o},c}var LCe=["caretElm"],PCe=t=>({model:t});function $Ce(t,n){}function VCe(t,n){if(t&1&&(R(0,"span"),be(1,$Ce,0,0,"ng-template",5),M()),t&2){let e=ee();V(),J("ngTemplateOutlet",e.template)("ngTemplateOutletContext",lR(2,PCe,e.context))}}function BCe(t,n){if(t&1&&ke(0,"span",6),t&2){let e=ee();J("innerHTML",e.title,CC)}}function zCe(t,n){if(t&1&&(R(0,"header",4)(1,"span",5),Y(2),M()()),t&2){let e=ee();V(2),kt(e.title)}}function GCe(t,n){if(t&1){let e=Xt();R(0,"li",6)(1,"ngx-charts-legend-entry",7),Ce("select",function(r){Ve(e);let o=ee();return Be(o.labelClick.emit(r))})("activate",function(r){Ve(e);let o=ee();return Be(o.activate(r))})("deactivate",function(r){Ve(e);let o=ee();return Be(o.deactivate(r))}),M()()}if(t&2){let e=n.$implicit,i=ee();V(),J("label",e.label)("formattedLabel",e.formattedLabel)("color",e.color)("isActive",i.isActive(e))}}var B8=["*"];function UCe(t,n){if(t&1&&ke(0,"ngx-charts-scale-legend",4),t&2){let e=ee();J("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("valueRange",e.legendOptions.domain)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)}}function HCe(t,n){if(t&1){let e=Xt();R(0,"ngx-charts-legend",5),Ce("labelClick",function(r){Ve(e);let o=ee();return Be(o.legendLabelClick.emit(r))})("labelActivate",function(r){Ve(e);let o=ee();return Be(o.legendLabelActivate.emit(r))})("labelDeactivate",function(r){Ve(e);let o=ee();return Be(o.legendLabelDeactivate.emit(r))}),M()}if(t&2){let e=ee();J("horizontal",e.legendOptions&&e.legendOptions.position===e.LegendPosition.Below)("data",e.legendOptions.domain)("title",e.legendOptions.title)("colors",e.legendOptions.colors)("height",e.view[1])("width",e.legendWidth)("activeEntries",e.activeEntries)}}var WCe=["ngx-charts-axis-label",""],z8=["ticksel"],jCe=["ngx-charts-x-axis-ticks",""];function qCe(t,n){t&1&&(Ze(),MC(0))}function XCe(t,n){if(t&1&&(Ze(),R(0,"tspan",10),Y(1),M()),t&2){let e=n.$implicit,i=n.index;Le("y",i*12),V(),bn(" ",e," ")}}function KCe(t,n){if(t&1&&(Ze(),Ls(0),be(1,XCe,2,2,"tspan",9),Ps()),t&2){let e=n.ngIf;V(),J("ngForOf",e)}}function YCe(t,n){if(t&1&&be(0,KCe,2,1,"ng-container",6),t&2){let e=ee(2).$implicit,i=ee();J("ngIf",i.tickChunks(e))}}function QCe(t,n){if(t&1&&Y(0),t&2){let e=ee().ngIf,i=ee(2);bn(" ",i.tickTrim(e)," ")}}function ZCe(t,n){if(t&1&&(Ze(),Ls(0),R(1,"title"),Y(2),M(),R(3,"text",7),be(4,qCe,1,0,"ng-container",8),M(),be(5,YCe,1,1,"ng-template",null,1,Dp)(7,QCe,1,1,"ng-template",null,2,Dp),Ps()),t&2){let e=n.ngIf,i=ns(6),r=ns(8),o=ee(2);V(2),kt(e),V(),Le("text-anchor",o.textAnchor)("transform",o.textTransform),V(),J("ngIf",o.isWrapTicksSupported)("ngIfThen",i)("ngIfElse",r)}}function JCe(t,n){if(t&1&&(Ze(),R(0,"g",5),be(1,ZCe,9,6,"ng-container",6),M()),t&2){let e=n.$implicit,i=ee();Le("transform",i.tickTransform(e)),V(),J("ngIf",i.tickFormat(e))}}function eTe(t,n){if(t&1&&(Ze(),R(0,"g"),ke(1,"line",11),M()),t&2){let e=ee(2);Le("transform",e.gridLineTransform()),V(),Le("y1",-e.gridLineHeight)}}function tTe(t,n){if(t&1&&(Ze(),R(0,"g"),be(1,eTe,2,2,"g",6),M()),t&2){let e=n.$implicit,i=ee();Le("transform",i.tickTransform(e)),V(),J("ngIf",i.showGridLines)}}var nTe=["ngx-charts-x-axis",""];function iTe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g",2),Ce("dimensionsChanged",function(r){Ve(e);let o=ee();return Be(o.emitTicksHeight(r))}),M()}if(t&2){let e=ee();J("trimTicks",e.trimTicks)("rotateTicks",e.rotateTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickStroke",e.tickStroke)("scale",e.xScale)("orient",e.xOrient)("showGridLines",e.showGridLines)("gridLineHeight",e.dims.height)("width",e.dims.width)("tickValues",e.ticks)("wrapTicks",e.wrapTicks)}}function rTe(t,n){if(t&1&&(Ze(),ke(0,"g",3)),t&2){let e=ee();J("label",e.labelText)("offset",e.labelOffset)("orient",e.orientation.Bottom)("height",e.dims.height)("width",e.dims.width)}}var oTe=["ngx-charts-y-axis-ticks",""];function sTe(t,n){t&1&&(Ze(),MC(0))}function aTe(t,n){if(t&1&&(Ze(),R(0,"tspan",12),Y(1),M()),t&2){let e=n.$implicit,i=n.index,r=ee(6);Le("y",i*(8+r.tickSpacing)),V(),bn(" ",e," ")}}function lTe(t,n){if(t&1&&(Ze(),Ls(0),be(1,aTe,2,2,"tspan",11),Ps()),t&2){let e=ee().ngIf;V(),J("ngForOf",e)}}function cTe(t,n){if(t&1&&(Ze(),Ls(0),be(1,lTe,2,1,"ng-container",10),Ps()),t&2){let e=n.ngIf;ee(2);let i=ns(8);V(),J("ngIf",e.length>1)("ngIfElse",i)}}function uTe(t,n){if(t&1&&be(0,cTe,2,2,"ng-container",7),t&2){let e=ee(2).$implicit,i=ee();J("ngIf",i.tickChunks(e))}}function dTe(t,n){if(t&1&&Y(0),t&2){let e=ee().ngIf,i=ee(2);bn(" ",i.tickTrim(e)," ")}}function pTe(t,n){if(t&1&&(Ze(),Ls(0),R(1,"title"),Y(2),M(),R(3,"text",8),be(4,sTe,1,0,"ng-container",9),M(),be(5,uTe,1,1,"ng-template",null,1,Dp)(7,dTe,1,1,"ng-template",null,2,Dp),Ps()),t&2){let e=n.ngIf,i=ns(6),r=ns(8),o=ee(2);V(2),kt(e),V(),Ri("font-size","12px"),Le("dy",o.dy)("x",o.x1)("y",o.y1)("text-anchor",o.textAnchor),V(),J("ngIf",o.wrapTicks)("ngIfThen",i)("ngIfElse",r)}}function hTe(t,n){if(t&1&&(Ze(),R(0,"g",6),be(1,pTe,9,10,"ng-container",7),M()),t&2){let e=n.$implicit,i=ee();Le("transform",i.transform(e)),V(),J("ngIf",i.tickFormat(e))}}function mTe(t,n){if(t&1&&(Ze(),ke(0,"path",13)),t&2){let e=ee();Le("d",e.referenceAreaPath)("transform",e.gridLineTransform())}}function fTe(t,n){if(t&1&&(Ze(),ke(0,"line",15)),t&2){let e=ee(3);Le("x2",e.gridLineWidth)}}function gTe(t,n){if(t&1&&(Ze(),ke(0,"line",15)),t&2){let e=ee(3);Le("x2",-e.gridLineWidth)}}function yTe(t,n){if(t&1&&(Ze(),R(0,"g"),be(1,fTe,1,1,"line",14)(2,gTe,1,1,"line",14),M()),t&2){let e=ee(2);Le("transform",e.gridLineTransform()),V(),J("ngIf",e.orient===e.Orientation.Left),V(),J("ngIf",e.orient===e.Orientation.Right)}}function bTe(t,n){if(t&1&&(Ze(),R(0,"g"),be(1,yTe,3,3,"g",7),M()),t&2){let e=n.$implicit,i=ee();Le("transform",i.transform(e)),V(),J("ngIf",i.showGridLines)}}function xTe(t,n){if(t&1&&(Ze(),R(0,"g")(1,"title"),Y(2),M(),R(3,"text",17),Y(4),M()()),t&2){let e=ee(2).$implicit,i=ee();V(2),kt(i.tickTrim(i.tickFormat(e.value))),V(),Le("dy",i.dy)("y",-6)("x",i.gridLineWidth)("text-anchor",i.textAnchor),V(),bn(" ",e.name," ")}}function vTe(t,n){if(t&1&&(Ze(),R(0,"g"),ke(1,"line",16),be(2,xTe,5,6,"g",7),M()),t&2){let e=ee().$implicit,i=ee();Le("transform",i.transform(e.value)),V(),Le("x2",i.gridLineWidth)("transform",i.gridLineTransform()),V(),J("ngIf",i.showRefLabels)}}function _Te(t,n){if(t&1&&(Ze(),R(0,"g"),be(1,vTe,3,4,"g",7),M()),t&2){let e=ee();V(),J("ngIf",e.showRefLines)}}var wTe=["ngx-charts-y-axis",""];function CTe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g",2),Ce("dimensionsChanged",function(r){Ve(e);let o=ee();return Be(o.emitTicksWidth(r))}),M()}if(t&2){let e=ee();J("trimTicks",e.trimTicks)("maxTickLength",e.maxTickLength)("tickFormatting",e.tickFormatting)("tickArguments",e.tickArguments)("tickValues",e.ticks)("tickStroke",e.tickStroke)("scale",e.yScale)("orient",e.yOrient)("showGridLines",e.showGridLines)("gridLineWidth",e.dims.width)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("height",e.dims.height)("wrapTicks",e.wrapTicks)}}function TTe(t,n){if(t&1&&(Ze(),ke(0,"g",3)),t&2){let e=ee();J("label",e.labelText)("offset",e.labelOffset)("orient",e.yOrient)("height",e.dims.height)("width",e.dims.width)}}var STe=["ngx-charts-circle",""],kTe=["ngx-charts-svg-linear-gradient",""];function ITe(t,n){if(t&1&&(Ze(),ke(0,"stop")),t&2){let e=n.$implicit;Ri("stop-color",e.color)("stop-opacity",e.opacity),Le("offset",e.offset+"%")}}var ETe=["ngx-charts-circle-series",""],DTe=t=>({name:t});function ATe(t,n){if(t&1&&(Ze(),ke(0,"rect",4)),t&2){let e=ee(2);J("@animationState","active"),Le("x",e.circle.cx-e.circle.radius)("y",e.circle.cy)("width",e.circle.radius*2)("height",e.circle.height)("fill",e.gradientFill)}}function NTe(t,n){if(t&1&&(Ze(),ke(0,"rect",4)),t&2){let e=ee(2);Le("x",e.circle.cx-e.circle.radius)("y",e.circle.cy)("width",e.circle.radius*2)("height",e.circle.height)("fill",e.gradientFill)}}function MTe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g")(1,"defs"),ke(2,"g",1),M(),be(3,ATe,1,6,"rect",2)(4,NTe,1,5,"rect",2),R(5,"g",3),Ce("select",function(){Ve(e);let r=ee();return Be(r.onClick(r.circle.data))})("activate",function(){Ve(e);let r=ee();return Be(r.activateCircle())})("deactivate",function(){Ve(e);let r=ee();return Be(r.deactivateCircle())}),M()()}if(t&2){let e=ee();V(2),J("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.circle.gradientStops),V(),J("ngIf",!e.isSSR&&e.barVisible&&e.type==="standard"),V(),J("ngIf",e.isSSR&&e.barVisible&&e.type==="standard"),V(),st("active",e.isActive(lR(20,DTe,e.circle.seriesName))),J("cx",e.circle.cx)("cy",e.circle.cy)("r",e.circle.radius)("fill",e.circle.color)("pointerEvents",e.circle.value===0?"none":"all")("data",e.circle.value)("classNames",e.circle.classNames)("tooltipDisabled",e.tooltipDisabled)("tooltipPlacement",e.placementTypes.Top)("tooltipType",e.styleTypes.tooltip)("tooltipTitle",e.tooltipTemplate?void 0:e.getTooltipText(e.circle))("tooltipTemplate",e.tooltipTemplate)("tooltipContext",e.circle.data)}}var RTe=["ngx-charts-area",""];function OTe(t,n){if(t&1&&(Ze(),R(0,"defs"),ke(1,"g",2),M()),t&2){let e=ee();V(),J("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.gradientStops)}}var FTe=["tooltipAnchor"],LTe=["ngx-charts-tooltip-area",""];function PTe(t,n){if(t&1&&(R(0,"div",6),ke(1,"span",7),Y(2),M()),t&2){let e=n.$implicit,i=ee(2);V(),Ri("background-color",e.color),V(),bn(" ",i.getToolTipText(e)," ")}}function $Te(t,n){if(t&1&&(R(0,"div",4),be(1,PTe,3,3,"div",5),M()),t&2){let e=n.model;V(),J("ngForOf",e)}}var VTe=["ngx-charts-timeline",""];var BTe=["tooltipTemplate"],zTe=["seriesTooltipTemplate"],G8=(t,n)=>[t,n];var GTe=`.ngx-charts-outer{animation:chartFadeIn linear .6s}@keyframes chartFadeIn{0%{opacity:0}20%{opacity:0}to{opacity:1}}.ngx-charts{float:left;overflow:visible}.ngx-charts .circle,.ngx-charts .cell,.ngx-charts .bar,.ngx-charts .node,.ngx-charts .link,.ngx-charts .arc{cursor:pointer}.ngx-charts .bar.active,.ngx-charts .bar:hover,.ngx-charts .cell.active,.ngx-charts .cell:hover,.ngx-charts .arc.active,.ngx-charts .arc:hover,.ngx-charts .node.active,.ngx-charts .node:hover,.ngx-charts .link.active,.ngx-charts .link:hover,.ngx-charts .card.active,.ngx-charts .card:hover{opacity:.8;transition:opacity .1s ease-in-out}.ngx-charts .bar:focus,.ngx-charts .cell:focus,.ngx-charts .arc:focus,.ngx-charts .node:focus,.ngx-charts .link:focus,.ngx-charts .card:focus{outline:none}.ngx-charts .bar.hidden,.ngx-charts .cell.hidden,.ngx-charts .arc.hidden,.ngx-charts .node.hidden,.ngx-charts .link.hidden,.ngx-charts .card.hidden{display:none}.ngx-charts g:focus{outline:none}.ngx-charts .line-series.inactive,.ngx-charts .line-series-range.inactive,.ngx-charts .polar-series-path.inactive,.ngx-charts .polar-series-area.inactive,.ngx-charts .area-series.inactive{transition:opacity .1s ease-in-out;opacity:.2}.ngx-charts .line-highlight{display:none}.ngx-charts .line-highlight.active{display:block}.ngx-charts .area{opacity:.6}.ngx-charts .circle:hover{cursor:pointer}.ngx-charts .label{font-size:12px;font-weight:400}.ngx-charts .tooltip-anchor{fill:#000}.ngx-charts .gridline-path{stroke:#ddd;stroke-width:1;fill:none}.ngx-charts .refline-path{stroke:#a8b2c7;stroke-width:1;stroke-dasharray:5;stroke-dashoffset:5}.ngx-charts .refline-label{font-size:9px}.ngx-charts .reference-area{fill-opacity:.05;fill:#000}.ngx-charts .gridline-path-dotted{stroke:#ddd;stroke-width:1;fill:none;stroke-dasharray:1,20;stroke-dashoffset:3}.ngx-charts .grid-panel rect{fill:none}.ngx-charts .grid-panel.odd rect{fill:#0000000d}
`;var UTe=["ngx-charts-line",""];function HTe(t,n){if(t&1&&(Ze(),R(0,"g"),ke(1,"path",1),M()),t&2){let e=ee();V(),J("@animationState","active"),Le("d",e.initialPath)("fill",e.fill)("stroke",e.stroke)}}function WTe(t,n){if(t&1&&(Ze(),R(0,"g"),ke(1,"path",1),M()),t&2){let e=ee();V(),Le("d",e.initialPath)("fill",e.fill)("stroke",e.stroke)}}var jTe=["ngx-charts-line-series",""];function qTe(t,n){if(t&1&&(Ze(),ke(0,"g",4)),t&2){let e=ee();J("orientation",e.barOrientation.Vertical)("name",e.gradientId)("stops",e.gradientStops)}}function XTe(t,n){if(t&1&&(Ze(),ke(0,"g",5)),t&2){let e=ee();st("active",e.isActive(e.data))("inactive",e.isInactive(e.data)),J("data",e.data)("path",e.outerPath)("fill",e.hasGradient?e.gradientUrl:e.colors.getColor(e.data.name))("opacity",e.rangeFillOpacity)("animations",e.animations)}}function KTe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g",7),Ce("dimensionsChanged",function(r){Ve(e);let o=ee();return Be(o.updateXAxisHeight(r))}),M()}if(t&2){let e=ee();J("xScale",e.xScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showXAxisLabel)("labelText",e.xAxisLabel)("trimTicks",e.trimXAxisTicks)("rotateTicks",e.rotateXAxisTicks)("maxTickLength",e.maxXAxisTickLength)("tickFormatting",e.xAxisTickFormatting)("ticks",e.xAxisTicks)("wrapTicks",e.wrapTicks)}}function YTe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g",8),Ce("dimensionsChanged",function(r){Ve(e);let o=ee();return Be(o.updateYAxisWidth(r))}),M()}if(t&2){let e=ee();J("yScale",e.yScale)("dims",e.dims)("showGridLines",e.showGridLines)("showLabel",e.showYAxisLabel)("labelText",e.yAxisLabel)("trimTicks",e.trimYAxisTicks)("maxTickLength",e.maxYAxisTickLength)("tickFormatting",e.yAxisTickFormatting)("ticks",e.yAxisTicks)("referenceLines",e.referenceLines)("showRefLines",e.showRefLines)("showRefLabels",e.showRefLabels)("wrapTicks",e.wrapTicks)}}function QTe(t,n){if(t&1&&(Ze(),R(0,"g"),ke(1,"g",10),M()),t&2){let e=n.$implicit,i=ee(2);J("@animationState","active"),V(),J("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("scaleType",i.scaleType)("curve",i.curve)("rangeFillOpacity",i.rangeFillOpacity)("hasRange",i.hasRange)("animations",i.animations)}}function ZTe(t,n){if(t&1&&(Ze(),R(0,"g"),be(1,QTe,2,11,"g",9),M()),t&2){let e=ee();V(),J("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function JTe(t,n){if(t&1&&(Ze(),R(0,"g"),ke(1,"g",10),M()),t&2){let e=n.$implicit,i=ee(2);V(),J("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("activeEntries",i.activeEntries)("scaleType",i.scaleType)("curve",i.curve)("rangeFillOpacity",i.rangeFillOpacity)("hasRange",i.hasRange)("animations",i.animations)}}function eSe(t,n){if(t&1&&(Ze(),R(0,"g"),be(1,JTe,2,10,"g",9),M()),t&2){let e=ee();V(),J("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function tSe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g")(1,"g",14),Ce("select",function(r){Ve(e);let o=ee(2);return Be(o.onClick(r))})("activate",function(r){Ve(e);let o=ee(2);return Be(o.onActivate(r))})("deactivate",function(r){Ve(e);let o=ee(2);return Be(o.onDeactivate(r))}),M()()}if(t&2){let e=n.$implicit,i=ee(2);V(),J("xScale",i.xScale)("yScale",i.yScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("visibleValue",i.hoveredVertical)("activeEntries",i.activeEntries)("tooltipDisabled",i.tooltipDisabled)("tooltipTemplate",i.tooltipTemplate)}}function nSe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g",11),Ce("mouseleave",function(){Ve(e);let r=ee();return Be(r.hideCircles())}),R(1,"g",12),Ce("hover",function(r){Ve(e);let o=ee();return Be(o.updateHoveredVertical(r))}),M(),be(2,tSe,2,9,"g",13),M()}if(t&2){let e=ee();V(),J("dims",e.dims)("xSet",e.xSet)("xScale",e.xScale)("yScale",e.yScale)("results",e.results)("colors",e.colors)("tooltipDisabled",e.tooltipDisabled)("tooltipTemplate",e.seriesTooltipTemplate),V(),J("ngForOf",e.results)}}function iSe(t,n){if(t&1&&(Ze(),R(0,"g"),ke(1,"g",16),M()),t&2){let e=n.$implicit,i=ee(2);V(),J("xScale",i.timelineXScale)("yScale",i.timelineYScale)("colors",i.colors)("data",e)("scaleType",i.scaleType)("curve",i.curve)("hasRange",i.hasRange)("animations",i.animations)}}function rSe(t,n){if(t&1){let e=Xt();Ze(),R(0,"g",15),Ce("onDomainChange",function(r){Ve(e);let o=ee();return Be(o.updateDomain(r))}),be(1,iSe,2,8,"g",9),M()}if(t&2){let e=ee();J("results",e.results)("view",vx(10,G8,e.timelineWidth,e.height))("height",e.timelineHeight)("scheme",e.scheme)("customColors",e.customColors)("scaleType",e.scaleType)("legend",e.legend),Le("transform",e.timelineTransform),V(),J("ngForOf",e.results)("ngForTrackBy",e.trackBy)}}function oSe(t,n,e){e=e||{};let i,r,o,s=null,a=0;function l(){a=e.leading===!1?0:+new Date,s=null,o=t.apply(i,r)}return function(){let c=+new Date;!a&&e.leading===!1&&(a=c);let u=n-(c-a);return i=this,r=arguments,u<=0?(clearTimeout(s),s=null,a=c,o=t.apply(i,r)):!s&&e.trailing!==!1&&(s=setTimeout(l,u)),o}}function sSe(t,n){return function(i,r,o){return{configurable:!0,enumerable:o.enumerable,get:function(){return Object.defineProperty(this,r,{configurable:!0,enumerable:o.enumerable,value:oSe(o.value,t,n)}),this[r]}}}}var qt=function(t){return t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t.Center="center",t}(qt||{}),Gu=7;function D8(t,n,e){if(e===qt.Top)return t.top-Gu;if(e===qt.Bottom)return t.top+t.height-n.height+Gu;if(e===qt.Center)return t.top+t.height/2-n.height/2}function A8(t,n,e){if(e===qt.Left)return t.left-Gu;if(e===qt.Right)return t.left+t.width-n.width+Gu;if(e===qt.Center)return t.left+t.width/2-n.width/2}var m0=class t{static calculateVerticalAlignment(n,e,i){let r=D8(n,e,i);return r+e.height>window.innerHeight&&(r=window.innerHeight-e.height),r}static calculateVerticalCaret(n,e,i,r){let o;r===qt.Top&&(o=n.height/2-i.height/2+Gu),r===qt.Bottom&&(o=e.height-n.height/2-i.height/2-Gu),r===qt.Center&&(o=e.height/2-i.height/2);let s=D8(n,e,r);return s+e.height>window.innerHeight&&(o+=s+e.height-window.innerHeight),o}static calculateHorizontalAlignment(n,e,i){let r=A8(n,e,i);return r+e.width>window.innerWidth&&(r=window.innerWidth-e.width),r}static calculateHorizontalCaret(n,e,i,r){let o;r===qt.Left&&(o=n.width/2-i.width/2+Gu),r===qt.Right&&(o=e.width-n.width/2-i.width/2-Gu),r===qt.Center&&(o=e.width/2-i.width/2);let s=A8(n,e,r);return s+e.width>window.innerWidth&&(o+=s+e.width-window.innerWidth),o}static shouldFlip(n,e,i,r){let o=!1;return i===qt.Right&&n.left+n.width+e.width+r>window.innerWidth&&(o=!0),i===qt.Left&&n.left-e.width-r<0&&(o=!0),i===qt.Top&&n.top-e.height-r<0&&(o=!0),i===qt.Bottom&&n.top+n.height+e.height+r>window.innerHeight&&(o=!0),o}static positionCaret(n,e,i,r,o){let s=0,a=0;return n===qt.Right?(a=-7,s=t.calculateVerticalCaret(i,e,r,o)):n===qt.Left?(a=e.width,s=t.calculateVerticalCaret(i,e,r,o)):n===qt.Top?(s=e.height,a=t.calculateHorizontalCaret(i,e,r,o)):n===qt.Bottom&&(s=-7,a=t.calculateHorizontalCaret(i,e,r,o)),{top:s,left:a}}static positionContent(n,e,i,r,o){let s=0,a=0;return n===qt.Right?(a=i.left+i.width+r,s=t.calculateVerticalAlignment(i,e,o)):n===qt.Left?(a=i.left-e.width-r,s=t.calculateVerticalAlignment(i,e,o)):n===qt.Top?(s=i.top-e.height-r,a=t.calculateHorizontalAlignment(i,e,o)):n===qt.Bottom&&(s=i.top+i.height+r,a=t.calculateHorizontalAlignment(i,e,o)),{top:s,left:a}}static determinePlacement(n,e,i,r){if(t.shouldFlip(i,e,n,r)){if(n===qt.Right)return qt.Left;if(n===qt.Left)return qt.Right;if(n===qt.Top)return qt.Bottom;if(n===qt.Bottom)return qt.Top}return n}},aSe=(()=>{class t{get cssClasses(){let e="ngx-charts-tooltip-content";return e+=` position-${this.placement}`,e+=` type-${this.type}`,e+=` ${this.cssClass}`,e}constructor(e,i,r){this.element=e,this.renderer=i,this.platformId=r}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){if(!Vs(this.platformId))return;let e=this.element.nativeElement,i=this.host.nativeElement.getBoundingClientRect();if(!i.height&&!i.width)return;let r=e.getBoundingClientRect();this.checkFlip(i,r),this.positionContent(e,i,r),this.showCaret&&this.positionCaret(i,r),setTimeout(()=>this.renderer.addClass(e,"animate"),1)}positionContent(e,i,r){let{top:o,left:s}=m0.positionContent(this.placement,r,i,this.spacing,this.alignment);this.renderer.setStyle(e,"top",`${o}px`),this.renderer.setStyle(e,"left",`${s}px`)}positionCaret(e,i){let r=this.caretElm.nativeElement,o=r.getBoundingClientRect(),{top:s,left:a}=m0.positionCaret(this.placement,i,e,o,this.alignment);this.renderer.setStyle(r,"top",`${s}px`),this.renderer.setStyle(r,"left",`${a}px`)}checkFlip(e,i){this.placement=m0.determinePlacement(this.placement,i,e,this.spacing)}onWindowResize(){this.position()}static{this.\u0275fac=function(i){return new(i||t)(Me(nt),Me(di),Me(Pr))}}static{this.\u0275cmp=De({type:t,selectors:[["ngx-tooltip-content"]],viewQuery:function(i,r){if(i&1&&sn(LCe,5),i&2){let o;Gt(o=Ut())&&(r.caretElm=o.first)}},hostVars:2,hostBindings:function(i,r){i&1&&Ce("resize",function(){return r.onWindowResize()},!1,PG),i&2&&Br(r.cssClasses)},inputs:{host:"host",showCaret:"showCaret",type:"type",placement:"placement",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},standalone:!1,decls:6,vars:6,consts:[["caretElm",""],[3,"hidden"],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(i,r){i&1&&(R(0,"div"),ke(1,"span",1,0),R(3,"div",2),be(4,VCe,2,4,"span",3)(5,BCe,1,1,"span",4),M()()),i&2&&(V(),NC("tooltip-caret position-",r.placement,""),J("hidden",!r.showCaret),V(3),J("ngIf",!r.title),V(),J("ngIf",r.title))},dependencies:[Yn,yR],styles:[`.ngx-charts-tooltip-content{position:fixed;border-radius:3px;z-index:5000;display:block;font-weight:400;opacity:0;pointer-events:none!important}.ngx-charts-tooltip-content.type-popover{background:#fff;color:#060709;border:1px solid #72809b;box-shadow:0 1px 3px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #fff}.ngx-charts-tooltip-content.type-tooltip{color:#fff;background:#000000bf;font-size:12px;padding:0 10px;text-align:center;pointer-events:auto}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-top:7px solid transparent;border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content .tooltip-label{display:block;line-height:1em;padding:8px 5px 5px;font-size:1em}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{position:absolute;z-index:5001;width:0;height:0}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;transition:opacity .3s,transform .3s;transform:translateZ(0);pointer-events:auto}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{text-align:left;line-height:1.2em;padding:5px 0}.tooltip-item .tooltip-item-color{display:inline-block;height:12px;width:12px;margin-right:5px;color:#5b646b;border-radius:3px}
`],encapsulation:2})}}return jB([sSe(100)],t.prototype,"onWindowResize",null),t})(),E2=class{constructor(n){this.injectionService=n,this.defaults={},this.components=new Map}getByType(n=this.type){return this.components.get(n)}create(n){return this.createByType(this.type,n)}createByType(n,e){e=this.assignDefaults(e);let i=this.injectComponent(n,e);return this.register(n,i),i}destroy(n){let e=this.components.get(n.componentType);if(e&&e.length){let i=e.indexOf(n);i>-1&&(e[i].destroy(),e.splice(i,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(n){let e=this.components.get(n);if(e&&e.length){let i=e.length-1;for(;i>=0;)this.destroy(e[i--])}}injectComponent(n,e){return this.injectionService.appendComponent(n,e)}assignDefaults(n){let e=ie({},this.defaults.inputs),i=ie({},this.defaults.outputs);return!n.inputs&&!n.outputs&&(n={inputs:n}),e&&(n.inputs=ie(ie({},e),n.inputs)),i&&(n.outputs=ie(ie({},i),n.outputs)),n}register(n,e){this.components.has(n)||this.components.set(n,[]),this.components.get(n).push(e)}};function lSe(t){return t.element}var U8=(()=>{class t{static{this.globalRootViewContainer=null}static setGlobalRootViewContainer(e){t.globalRootViewContainer=e}constructor(e,i,r){this.applicationRef=e,this.componentFactoryResolver=i,this.injector=r}getRootViewContainer(){if(this._container)return this._container;if(t.globalRootViewContainer)return t.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(e){this._container=e}getComponentRootNode(e){return lSe(e)?e.element.nativeElement:e.hostView&&e.hostView.rootNodes.length>0?e.hostView.rootNodes[0]:e.location.nativeElement}getRootViewContainerNode(e){return this.getComponentRootNode(e)}projectComponentBindings(e,i){if(i){if(i.inputs!==void 0){let r=Object.getOwnPropertyNames(i.inputs);for(let o of r)e.instance[o]=i.inputs[o]}if(i.outputs!==void 0){let r=Object.getOwnPropertyNames(i.outputs);for(let o of r)e.instance[o]=i.outputs[o]}}return e}appendComponent(e,i={},r){r||(r=this.getRootViewContainer());let o=this.getComponentRootNode(r),s=new Qp(o,this.componentFactoryResolver,this.applicationRef,this.injector),a=new fo(e),l=s.attach(a);return this.projectComponentBindings(l,i),l}static{this.\u0275fac=function(i){return new(i||t)(Xe(Lr),Xe(xf),Xe(Vt))}}static{this.\u0275prov=pe({token:t,factory:t.\u0275fac})}}return t})(),N2=(()=>{class t extends E2{constructor(e){super(e),this.type=aSe}static{this.\u0275fac=function(i){return new(i||t)(Xe(U8))}}static{this.\u0275prov=pe({token:t,factory:t.\u0275fac})}}return t})(),_h=function(t){return t.Right="right",t.Below="below",t}(_h||{}),h0=function(t){return t.ScaleLegend="scaleLegend",t.Legend="legend",t}(h0||{}),ct=function(t){return t.Time="time",t.Linear="linear",t.Ordinal="ordinal",t.Quantile="quantile",t}(ct||{});function H8(t){return t instanceof Date?t=t.toLocaleDateString():t=t.toLocaleString(),t}function N8(t){return t.toLocaleString().replace(/[&'`"<>]/g,n=>({"&":"&amp;","'":"&#x27;","`":"&#x60;",'"':"&quot;","<":"&lt;",">":"&gt;"})[n])}var cSe=(()=>{class t{constructor(){this.isActive=!1,this.select=new Se,this.activate=new Se,this.deactivate=new Se,this.toggle=new Se}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(i,r){i&1&&Ce("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{color:"color",label:"label",formattedLabel:"formattedLabel",isActive:"isActive"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},standalone:!1,decls:4,vars:6,consts:[["tabindex","-1",3,"click","title"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(i,r){i&1&&(R(0,"span",0),Ce("click",function(){return r.select.emit(r.formattedLabel)}),R(1,"span",1),Ce("click",function(){return r.toggle.emit(r.formattedLabel)}),M(),R(2,"span",2),Y(3),M()()),i&2&&(st("active",r.isActive),J("title",r.formattedLabel),V(),Ri("background-color",r.color),V(2),bn(" ",r.trimmedLabel," "))},encapsulation:2,changeDetection:0})}}return t})(),uSe=(()=>{class t{constructor(e){this.cd=e,this.horizontal=!1,this.labelClick=new Se,this.labelActivate=new Se,this.labelDeactivate=new Se,this.legendEntries=[]}ngOnChanges(e){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){let e=[];for(let i of this.data){let r=H8(i);e.findIndex(s=>s.label===r)===-1&&e.push({label:i,formattedLabel:r,color:this.colors.getColor(i)})}return e}isActive(e){return this.activeEntries?this.activeEntries.find(r=>e.label===r.name)!==void 0:!1}activate(e){this.labelActivate.emit(e)}deactivate(e){this.labelDeactivate.emit(e)}trackBy(e,i){return i.label}static{this.\u0275fac=function(i){return new(i||t)(Me(Tn))}}static{this.\u0275cmp=De({type:t,selectors:[["ngx-charts-legend"]],inputs:{data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries",horizontal:"horizontal"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},standalone:!1,features:[Zt],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"select","activate","deactivate","label","formattedLabel","color","isActive"]],template:function(i,r){i&1&&(R(0,"div"),be(1,zCe,3,1,"header",0),R(2,"div",1)(3,"ul",2),be(4,GCe,2,4,"li",3),M()()()),i&2&&(Ri("width",r.width,"px"),V(),J("ngIf",(r.title==null?null:r.title.length)>0),V(2),Ri("max-height",r.height-45,"px"),st("horizontal-legend",r.horizontal),V(),J("ngForOf",r.legendEntries)("ngForTrackBy",r.trackBy))},dependencies:[Ur,Yn,cSe],styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{white-space:nowrap;overflow:hidden;margin-left:10px;margin-bottom:5px;font-size:14px;font-weight:700}.chart-legend ul,.chart-legend li{padding:0;margin:0;list-style:none}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{line-height:85%;list-style:none;text-align:left;float:left;width:100%;border-radius:3px;overflow-y:auto;overflow-x:hidden;white-space:nowrap;background:#0000000d}.chart-legend .legend-label{cursor:pointer;font-size:90%;margin:8px;color:#afb7c8}.chart-legend .legend-label:hover{color:#000;-webkit-transition:.2s;-moz-transition:.2s;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{display:inline-block;height:15px;width:15px;margin-right:5px;color:#5b646b;border-radius:3px}.chart-legend .legend-label-text{display:inline-block;vertical-align:top;line-height:15px;font-size:12px;width:calc(100% - 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .legend-title-text{vertical-align:bottom;display:inline-block;line-height:16px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}
`],encapsulation:2,changeDetection:0})}}return t})(),dSe=(()=>{class t{constructor(){this.horizontal=!1}ngOnChanges(e){let i=this.gradientString(this.colors.range(),this.colors.domain()),r=this.horizontal?"right":"bottom";this.gradient=`linear-gradient(to ${r}, ${i})`}gradientString(e,i){i.push(1);let r=[];return e.reverse().forEach((o,s)=>{r.push(`${o} ${Math.round(i[s]*100)}%`)}),r.join(", ")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["ngx-charts-scale-legend"]],inputs:{valueRange:"valueRange",colors:"colors",height:"height",width:"width",horizontal:"horizontal"},standalone:!1,features:[Zt],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(i,r){i&1&&(R(0,"div",0)(1,"div",1)(2,"span"),Y(3),M()(),ke(4,"div",2),R(5,"div",1)(6,"span"),Y(7),M()()()),i&2&&(Ri("height",r.horizontal?void 0:r.height,"px")("width",r.width,"px"),st("horizontal-legend",r.horizontal),V(3),kt(r.valueRange[1].toLocaleString()),V(),Ri("background",r.gradient),V(3),kt(r.valueRange[0].toLocaleString()))},styles:[`.chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{text-align:center;display:flex;flex-direction:column}.chart-legend .scale-legend-wrap{display:inline-block;flex:1;width:30px;border-radius:5px;margin:0 auto}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{width:auto;height:30px;margin:0 16px}
`],encapsulation:2,changeDetection:0})}}return t})(),pSe=(()=>{class t{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new Se,this.legendLabelActivate=new Se,this.legendLabelDeactivate=new Se,this.LegendPosition=_h,this.LegendType=h0}ngOnChanges(e){this.update()}update(){let e=0;this.showLegend&&(this.legendType=this.getLegendType(),(!this.legendOptions||this.legendOptions.position===_h.Right)&&(this.legendType===h0.ScaleLegend?e=1:e=2));let i=12-e;this.chartWidth=Math.floor(this.view[0]*i/12),this.legendWidth=!this.legendOptions||this.legendOptions.position===_h.Right?Math.floor(this.view[0]*e/12):this.chartWidth}getLegendType(){return this.legendOptions.scaleType===ct.Linear?h0.ScaleLegend:h0.Legend}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["ngx-charts-chart"]],inputs:{view:"view",showLegend:"showLegend",legendOptions:"legendOptions",legendType:"legendType",activeEntries:"activeEntries",animations:"animations"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},standalone:!1,features:[bi([N2]),Zt],ngContentSelectors:B8,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"labelClick","labelActivate","labelDeactivate","horizontal","data","title","colors","height","width","activeEntries"]],template:function(i,r){i&1&&(Kn(),R(0,"div",0),Ze(),R(1,"svg",1),yn(2),M(),be(3,UCe,1,5,"ngx-charts-scale-legend",2)(4,HCe,1,7,"ngx-charts-legend",3),M()),i&2&&(Ri("width",r.view[0],"px")("height",r.view[1],"px"),V(),Le("width",r.chartWidth)("height",r.view[1]),V(2),J("ngIf",r.showLegend&&r.legendType===r.LegendType.ScaleLegend),V(),J("ngIf",r.showLegend&&r.legendType===r.LegendType.Legend))},dependencies:[Yn,uSe,dSe],encapsulation:2,changeDetection:0})}}return t})(),hSe=(()=>{class t{constructor(e,i){this.element=e,this.zone=i,this.visible=new Se,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){let e=()=>{if(!this.element)return;let{offsetHeight:i,offsetWidth:r}=this.element.nativeElement;i&&r?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>e())})}static{this.\u0275fac=function(i){return new(i||t)(Me(nt),Me(qe))}}static{this.\u0275dir=ot({type:t,selectors:[["visibility-observer"]],outputs:{visible:"visible"},standalone:!1})}}return t})();function M8(t){return toString.call(t)==="[object Date]"}var mSe=(()=>{class t{constructor(e,i,r,o){this.chartElement=e,this.zone=i,this.cd=r,this.platformId=o,this.scheme="cool",this.schemeType=ct.Ordinal,this.animations=!0,this.select=new Se}ngOnInit(){Sl(this.platformId)&&(this.animations=!1)}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new hSe(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(e){this.update()}update(){if(this.results?this.results=this.cloneData(this.results):this.results=[],this.view)this.width=this.view[0],this.height=this.view[1];else{let e=this.getContainerDims();e&&(this.width=e.width,this.height=e.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let e,i,r=this.chartElement.nativeElement;if(Vs(this.platformId)&&r.parentNode!==null){let o=r.parentNode.getBoundingClientRect();e=o.width,i=o.height}return e&&i?{width:e,height:i}:null}formatDates(){for(let e=0;e<this.results.length;e++){let i=this.results[e];if(i.label=i.name,M8(i.label)&&(i.label=i.label.toLocaleDateString()),i.series)for(let r=0;r<i.series.length;r++){let o=i.series[r];o.label=o.name,M8(o.label)&&(o.label=o.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){if(!Vs(this.platformId))return;let i=Jb(window,"resize").pipe(dp(200)).subscribe(r=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=i}cloneData(e){let i=[];for(let r of e){let o={};if(r.name!==void 0&&(o.name=r.name),r.value!==void 0&&(o.value=r.value),r.series!==void 0){o.series=[];for(let s of r.series){let a=Object.assign({},s);o.series.push(a)}}r.extra!==void 0&&(o.extra=JSON.parse(JSON.stringify(r.extra))),r.source!==void 0&&(o.source=r.source),r.target!==void 0&&(o.target=r.target),i.push(o)}return i}static{this.\u0275fac=function(i){return new(i||t)(Me(nt),Me(qe),Me(Tn),Me(Pr))}}static{this.\u0275cmp=De({type:t,selectors:[["base-chart"]],inputs:{results:"results",view:"view",scheme:"scheme",schemeType:"schemeType",customColors:"customColors",animations:"animations"},outputs:{select:"select"},standalone:!1,features:[Zt],decls:1,vars:0,template:function(i,r){i&1&&ke(0,"div")},encapsulation:2})}}return t})(),sr=function(t){return t.Top="top",t.Bottom="bottom",t.Left="left",t.Right="right",t}(sr||{}),W8=(()=>{class t{constructor(e){this.textHeight=25,this.margin=5,this.element=e.nativeElement}ngOnChanges(e){this.update()}update(){switch(this.strokeWidth="0.01",this.textAnchor="middle",this.transform="",this.orient){case sr.Top:this.y=this.offset,this.x=this.width/2;break;case sr.Bottom:this.y=this.offset,this.x=this.width/2;break;case sr.Left:this.y=-(this.offset+this.textHeight+this.margin),this.x=-this.height/2,this.transform="rotate(270)";break;case sr.Right:this.y=this.offset+this.margin,this.x=-this.height/2,this.transform="rotate(270)";break;default:}}static{this.\u0275fac=function(i){return new(i||t)(Me(nt))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-axis-label",""]],inputs:{orient:"orient",label:"label",offset:"offset",width:"width",height:"height"},standalone:!1,features:[Zt],attrs:WCe,decls:2,vars:6,template:function(i,r){i&1&&(Ze(),R(0,"text"),Y(1),M()),i&2&&(Le("stroke-width",r.strokeWidth)("x",r.x)("y",r.y)("text-anchor",r.textAnchor)("transform",r.transform),V(),bn(" ",r.label," "))},encapsulation:2,changeDetection:0})}}return t})();function j8(t,n=16){return typeof t!="string"?typeof t=="number"?t+"":"":(t=t.trim(),t.length<=n?t:`${t.slice(0,n)}...`)}function q8(t,n){if(t.length>n){let e=[],i=Math.floor(t.length/n);for(let r=0;r<t.length;r++)r%i===0&&e.push(t[r]);t=e}return t}function X8(t,n,e){let i=(t||"").toString(),r=[];if(/\s/.test(i))r=i.split(/\s+/).reduce((o,s)=>{let a=(o.pop()||"")+" ";return a.length+s.length>n?[...o,a.trim(),s.trim()]:[...o,a+s]},[]);else{let o=0;for(;o<i.length;)r.push(i.substring(o,o+n)),o+=n}return r.length>e&&(r=r.splice(0,e),r[r.length-1]+="..."),r}var Gl=function(t){return t.Start="start",t.Middle="middle",t.End="end",t}(Gl||{}),R8=(()=>{class t{get isWrapTicksSupported(){return this.wrapTicks&&this.scale.step}constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.rotateTicks=!0,this.wrapTicks=!1,this.dimensionsChanged=new Se,this.verticalSpacing=20,this.rotateLabels=!1,this.innerTickSize=6,this.outerTickSize=6,this.tickPadding=3,this.textAnchor=Gl.Middle,this.maxTicksLength=0,this.maxAllowedLength=16,this.height=0,this.approxHeight=10,this.maxPossibleLengthForTickIfWrapped=16}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!Vs(this.platformId)){this.dimensionsChanged.emit({height:this.approxHeight});return}let e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().height,10);e!==this.height&&(this.height=e,this.dimensionsChanged.emit({height:this.height}),setTimeout(()=>this.updateDims()))}update(){let e=this.scale;this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(r){return r.constructor.name==="Date"?r.toLocaleDateString():r.toLocaleString()};let i=this.rotateTicks?this.getRotationAngle(this.ticks):null;this.adjustedScale=this.scale.bandwidth?function(r){return this.scale(r)+this.scale.bandwidth()*.5}:this.scale,this.textTransform="",i&&i!==0?(this.textTransform=`rotate(${i})`,this.textAnchor=Gl.End,this.verticalSpacing=10):this.textAnchor=Gl.Middle,setTimeout(()=>this.updateDims())}getRotationAngle(e){let i=0;this.maxTicksLength=0;for(let d=0;d<e.length;d++){let p=this.tickFormat(e[d]).toString(),h=p.length;this.trimTicks&&(h=this.tickTrim(p).length),h>this.maxTicksLength&&(this.maxTicksLength=h)}let r=Math.min(this.maxTicksLength,this.maxAllowedLength),o=7,s=r*o,a=s,l=Math.floor(this.width/e.length);for(;a>l&&i>-90;)i-=30,a=Math.cos(i*(Math.PI/180))*s;let c=14;if(this.isWrapTicksSupported){let d=this.ticks.reduce((h,m)=>m.length>h.length?m:h,"");c=14*(this.tickChunks(d).length||1),this.maxPossibleLengthForTickIfWrapped=this.getMaxPossibleLengthForTick(d)}let u=i!==0?Math.max(Math.abs(Math.sin(i*Math.PI/180))*this.maxTickLength*o,10):c;return this.approxHeight=Math.min(u,200),i}getTicks(){let e,i=this.getMaxTicks(20),r=this.getMaxTicks(100);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[r]):(e=this.scale.domain(),e=q8(e,i)),e}getMaxTicks(e){return Math.floor(this.width/e)}tickTransform(e){return"translate("+this.adjustedScale(e)+","+this.verticalSpacing+")"}gridLineTransform(){return`translate(0,${-this.verticalSpacing-5})`}tickTrim(e){return this.trimTicks?j8(e,this.maxTickLength):e}getMaxPossibleLengthForTick(e){if(this.scale.bandwidth){let r=Math.floor(this.scale.bandwidth()/7),o=e.slice(0,r);return Math.max(o.length,this.maxTickLength)}return this.maxTickLength}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){let r=this.rotateTicks?Math.floor(this.scale.step()/14):5;if(r<=1)return[this.tickTrim(e)];let o=Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength);return Vs(this.platformId)||(o=Math.floor(Math.min(this.approxHeight/5,Math.max(this.maxPossibleLengthForTickIfWrapped,this.maxTickLength)))),r=Math.min(r,5),X8(e,o,r<1?1:r)}return[this.tickTrim(e)]}static{this.\u0275fac=function(i){return new(i||t)(Me(Pr))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-x-axis-ticks",""]],viewQuery:function(i,r){if(i&1&&sn(z8,5),i&2){let o;Gt(o=Ut())&&(r.ticksElement=o.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineHeight:"gridLineHeight",width:"width",rotateTicks:"rotateTicks",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Zt],attrs:jCe,decls:4,vars:2,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01","font-size","12px"],[4,"ngIf","ngIfThen","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],["y2","0",1,"gridline-path","gridline-path-vertical"]],template:function(i,r){i&1&&(Ze(),R(0,"g",null,0),be(2,JCe,2,2,"g",3),M(),be(3,tTe,2,2,"g",4)),i&2&&(V(2),J("ngForOf",r.ticks),V(),J("ngForOf",r.ticks))},dependencies:[Ur,Yn],encapsulation:2,changeDetection:0})}}return t})(),fSe=(()=>{class t{constructor(){this.rotateTicks=!0,this.showGridLines=!1,this.xOrient=sr.Bottom,this.xAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new Se,this.xAxisClassName="x axis",this.labelOffset=0,this.fill="none",this.stroke="stroke",this.tickStroke="#ccc",this.strokeWidth="none",this.padding=5,this.orientation=sr}ngOnChanges(e){this.update()}update(){this.transform=`translate(0,${this.xAxisOffset+this.padding+this.dims.height})`,typeof this.xAxisTickCount<"u"&&(this.tickArguments=[this.xAxisTickCount])}emitTicksHeight({height:e}){let i=e+25+5;i!==this.labelOffset&&(this.labelOffset=i,setTimeout(()=>{this.dimensionsChanged.emit({height:e})},0))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-x-axis",""]],viewQuery:function(i,r){if(i&1&&sn(R8,5),i&2){let o;Gt(o=Ut())&&(r.ticksComponent=o.first)}},inputs:{xScale:"xScale",dims:"dims",trimTicks:"trimTicks",rotateTicks:"rotateTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",ticks:"ticks",xAxisTickCount:"xAxisTickCount",xOrient:"xOrient",xAxisOffset:"xAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Zt],attrs:nTe,decls:3,vars:4,consts:[["ngx-charts-x-axis-ticks","",3,"trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-x-axis-ticks","",3,"dimensionsChanged","trimTicks","rotateTicks","maxTickLength","tickFormatting","tickArguments","tickStroke","scale","orient","showGridLines","gridLineHeight","width","tickValues","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(i,r){i&1&&(Ze(),R(0,"g"),be(1,iTe,1,13,"g",0)(2,rTe,1,5,"g",1),M()),i&2&&(Le("class",r.xAxisClassName)("transform",r.transform),V(),J("ngIf",r.xScale),V(),J("ngIf",r.showLabel))},dependencies:[Yn,W8,R8],encapsulation:2,changeDetection:0})}}return t})();function gSe(t,n,e,i,r,[o,s,a,l]){let c="";return e=Math.floor(e),i=Math.floor(i),e=e===0?1:e,i=i===0?1:i,c=`M${[t+r,n]}`,c+=`h${e-2*r}`,s?c+=`a${[r,r]} 0 0 1 ${[r,r]}`:c+=`h${r}v${r}`,c+=`v${i-2*r}`,l?c+=`a${[r,r]} 0 0 1 ${[-r,r]}`:c+=`v${r}h${-r}`,c+=`h${2*r-e}`,a?c+=`a${[r,r]} 0 0 1 ${[-r,-r]}`:c+=`h${-r}v${-r}`,c+=`v${2*r-i}`,o?c+=`a${[r,r]} 0 0 1 ${[r,-r]}`:c+=`v${-r}h${r}`,c+="z",c}var O8=(()=>{class t{constructor(e){this.platformId=e,this.tickArguments=[5],this.tickStroke="#ccc",this.trimTicks=!0,this.maxTickLength=16,this.showGridLines=!1,this.showRefLabels=!1,this.showRefLines=!1,this.wrapTicks=!1,this.dimensionsChanged=new Se,this.innerTickSize=6,this.tickPadding=3,this.verticalSpacing=20,this.textAnchor=Gl.Middle,this.width=0,this.outerTickSize=6,this.rotateLabels=!1,this.referenceLineLength=0,this.Orientation=sr}ngOnChanges(e){this.update()}ngAfterViewInit(){setTimeout(()=>this.updateDims())}updateDims(){if(!Vs(this.platformId)){this.width=this.getApproximateAxisWidth(),this.dimensionsChanged.emit({width:this.width});return}let e=parseInt(this.ticksElement.nativeElement.getBoundingClientRect().width,10);e!==this.width&&(this.width=e,this.dimensionsChanged.emit({width:e}),setTimeout(()=>this.updateDims()))}update(){let e=this.scale,i=this.orient===sr.Top||this.orient===sr.Right?-1:1;switch(this.tickSpacing=Math.max(this.innerTickSize,0)+this.tickPadding,this.ticks=this.getTicks(),this.tickFormatting?this.tickFormat=this.tickFormatting:e.tickFormat?this.tickFormat=e.tickFormat.apply(e,this.tickArguments):this.tickFormat=function(r){return r.constructor.name==="Date"?r.toLocaleDateString():r.toLocaleString()},this.adjustedScale=e.bandwidth?r=>{let o=e(r)+e.bandwidth()*.5;if(this.wrapTicks&&r.toString().length>this.maxTickLength){let s=this.tickChunks(r).length;if(s===1)return o;let a=e.bandwidth(),l=s*8,c=a*.5-l*.5;return e(r)+c}return o}:e,this.showRefLines&&this.referenceLines&&this.setReferencelines(),this.orient){case sr.Top:this.transform=function(r){return"translate("+this.adjustedScale(r)+",0)"},this.textAnchor=Gl.Middle,this.y2=this.innerTickSize*i,this.y1=this.tickSpacing*i,this.dy=i<0?"0em":".71em";break;case sr.Bottom:this.transform=function(r){return"translate("+this.adjustedScale(r)+",0)"},this.textAnchor=Gl.Middle,this.y2=this.innerTickSize*i,this.y1=this.tickSpacing*i,this.dy=i<0?"0em":".71em";break;case sr.Left:this.transform=function(r){return"translate(0,"+this.adjustedScale(r)+")"},this.textAnchor=Gl.End,this.x2=this.innerTickSize*-i,this.x1=this.tickSpacing*-i,this.dy=".32em";break;case sr.Right:this.transform=function(r){return"translate(0,"+this.adjustedScale(r)+")"},this.textAnchor=Gl.Start,this.x2=this.innerTickSize*-i,this.x1=this.tickSpacing*-i,this.dy=".32em";break;default:}setTimeout(()=>this.updateDims())}setReferencelines(){this.refMin=this.adjustedScale(Math.min.apply(null,this.referenceLines.map(e=>e.value))),this.refMax=this.adjustedScale(Math.max.apply(null,this.referenceLines.map(e=>e.value))),this.referenceLineLength=this.referenceLines.length,this.referenceAreaPath=gSe(0,this.refMax,this.gridLineWidth,this.refMin-this.refMax,0,[!1,!1,!1,!1])}getTicks(){let e,i=this.getMaxTicks(20),r=this.getMaxTicks(50);return this.tickValues?e=this.tickValues:this.scale.ticks?e=this.scale.ticks.apply(this.scale,[r]):(e=this.scale.domain(),e=q8(e,i)),e}getMaxTicks(e){return Math.floor(this.height/e)}tickTransform(e){return`translate(${this.adjustedScale(e)},${this.verticalSpacing})`}gridLineTransform(){return"translate(5,0)"}tickTrim(e){return this.trimTicks?j8(e,this.maxTickLength):e}getApproximateAxisWidth(){return Math.max(...this.ticks.map(r=>this.tickTrim(this.tickFormat(r)).length))*7}tickChunks(e){if(e.toString().length>this.maxTickLength&&this.scale.bandwidth){let i=this.maxTickLength,r=Math.floor(this.scale.bandwidth()/15);return r<=1?[this.tickTrim(e)]:X8(e,i,Math.min(r,5))}return[this.tickFormat(e)]}static{this.\u0275fac=function(i){return new(i||t)(Me(Pr))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-y-axis-ticks",""]],viewQuery:function(i,r){if(i&1&&sn(z8,5),i&2){let o;Gt(o=Ut())&&(r.ticksElement=o.first)}},inputs:{scale:"scale",orient:"orient",tickArguments:"tickArguments",tickValues:"tickValues",tickStroke:"tickStroke",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",showGridLines:"showGridLines",gridLineWidth:"gridLineWidth",height:"height",referenceLines:"referenceLines",showRefLabels:"showRefLabels",showRefLines:"showRefLines",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Zt],attrs:oTe,decls:6,vars:4,consts:[["ticksel",""],["tmplMultilineTick",""],["tmplSinglelineTick",""],["class","tick",4,"ngFor","ngForOf"],["class","reference-area",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"tick"],[4,"ngIf"],["stroke-width","0.01"],[4,"ngIf","ngIfThen","ngIfElse"],[4,"ngIf","ngIfElse"],["x","0",4,"ngFor","ngForOf"],["x","0"],[1,"reference-area"],["class","gridline-path gridline-path-horizontal","x1","0",4,"ngIf"],["x1","0",1,"gridline-path","gridline-path-horizontal"],["x1","0",1,"refline-path","gridline-path-horizontal"],[1,"refline-label"]],template:function(i,r){i&1&&(Ze(),R(0,"g",null,0),be(2,hTe,2,2,"g",3),M(),be(3,mTe,1,2,"path",4)(4,bTe,2,2,"g",5)(5,_Te,2,1,"g",5)),i&2&&(V(2),J("ngForOf",r.ticks),V(),J("ngIf",r.referenceLineLength>1&&r.refMax&&r.refMin&&r.showRefLines),V(),J("ngForOf",r.ticks),V(),J("ngForOf",r.referenceLines))},dependencies:[Ur,Yn],encapsulation:2,changeDetection:0})}}return t})(),ySe=(()=>{class t{constructor(){this.showGridLines=!1,this.yOrient=sr.Left,this.yAxisOffset=0,this.wrapTicks=!1,this.dimensionsChanged=new Se,this.yAxisClassName="y axis",this.labelOffset=15,this.fill="none",this.stroke="#CCC",this.tickStroke="#CCC",this.strokeWidth=1,this.padding=5}ngOnChanges(e){this.update()}update(){this.offset=-(this.yAxisOffset+this.padding),this.yOrient===sr.Right?(this.labelOffset=65,this.transform=`translate(${this.offset+this.dims.width} , 0)`):this.transform=`translate(${this.offset} , 0)`,this.yAxisTickCount!==void 0&&(this.tickArguments=[this.yAxisTickCount])}emitTicksWidth({width:e}){e!==this.labelOffset&&this.yOrient===sr.Right?(this.labelOffset=e+this.labelOffset,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0)):e!==this.labelOffset&&(this.labelOffset=e,setTimeout(()=>{this.dimensionsChanged.emit({width:e})},0))}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-y-axis",""]],viewQuery:function(i,r){if(i&1&&sn(O8,5),i&2){let o;Gt(o=Ut())&&(r.ticksComponent=o.first)}},inputs:{yScale:"yScale",dims:"dims",trimTicks:"trimTicks",maxTickLength:"maxTickLength",tickFormatting:"tickFormatting",ticks:"ticks",showGridLines:"showGridLines",showLabel:"showLabel",labelText:"labelText",yAxisTickCount:"yAxisTickCount",yOrient:"yOrient",referenceLines:"referenceLines",showRefLines:"showRefLines",showRefLabels:"showRefLabels",yAxisOffset:"yAxisOffset",wrapTicks:"wrapTicks"},outputs:{dimensionsChanged:"dimensionsChanged"},standalone:!1,features:[Zt],attrs:wTe,decls:3,vars:4,consts:[["ngx-charts-y-axis-ticks","",3,"trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width",4,"ngIf"],["ngx-charts-y-axis-ticks","",3,"dimensionsChanged","trimTicks","maxTickLength","tickFormatting","tickArguments","tickValues","tickStroke","scale","orient","showGridLines","gridLineWidth","referenceLines","showRefLines","showRefLabels","height","wrapTicks"],["ngx-charts-axis-label","",3,"label","offset","orient","height","width"]],template:function(i,r){i&1&&(Ze(),R(0,"g"),be(1,CTe,1,15,"g",0)(2,TTe,1,5,"g",1),M()),i&2&&(Le("class",r.yAxisClassName)("transform",r.transform),V(),J("ngIf",r.yScale),V(),J("ngIf",r.showLabel))},dependencies:[Yn,W8,O8],encapsulation:2,changeDetection:0})}}return t})(),F8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[pi]})}}return t})(),$1=function(t){return t.popover="popover",t.tooltip="tooltip",t}($1||{}),Ng=function(t){return t[t.all="all"]="all",t[t.focus="focus"]="focus",t[t.mouseover="mouseover"]="mouseover",t}(Ng||{}),K8=(()=>{class t{get listensForFocus(){return this.tooltipShowEvent===Ng.all||this.tooltipShowEvent===Ng.focus}get listensForHover(){return this.tooltipShowEvent===Ng.all||this.tooltipShowEvent===Ng.mouseover}constructor(e,i,r){this.tooltipService=e,this.viewContainerRef=i,this.renderer=r,this.tooltipCssClass="",this.tooltipAppendToBody=!0,this.tooltipSpacing=10,this.tooltipDisabled=!1,this.tooltipShowCaret=!0,this.tooltipPlacement=qt.Top,this.tooltipAlignment=qt.Center,this.tooltipType=$1.popover,this.tooltipCloseOnClickOutside=!0,this.tooltipCloseOnMouseLeave=!0,this.tooltipHideTimeout=300,this.tooltipShowTimeout=100,this.tooltipShowEvent=Ng.all,this.tooltipImmediateExit=!1,this.show=new Se,this.hide=new Se}ngOnDestroy(){this.hideTooltip(!0)}onFocus(){this.listensForFocus&&this.showTooltip()}onBlur(){this.listensForFocus&&this.hideTooltip(!0)}onMouseEnter(){this.listensForHover&&this.showTooltip()}onMouseLeave(e){if(this.listensForHover&&this.tooltipCloseOnMouseLeave){if(clearTimeout(this.timeout),this.component&&this.component.instance.element.nativeElement.contains(e))return;this.hideTooltip(this.tooltipImmediateExit)}}onMouseClick(){this.listensForHover&&this.hideTooltip(!0)}showTooltip(e){if(this.component||this.tooltipDisabled)return;let i=e?0:this.tooltipShowTimeout+(navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?400:0);clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.tooltipService.destroyAll();let r=this.createBoundOptions();this.component=this.tooltipService.create(r),setTimeout(()=>{this.component&&this.addHideListeners(this.component.instance.element.nativeElement)},10),this.show.emit(!0)},i)}addHideListeners(e){this.mouseEnterContentEvent=this.renderer.listen(e,"mouseenter",()=>{clearTimeout(this.timeout)}),this.tooltipCloseOnMouseLeave&&(this.mouseLeaveContentEvent=this.renderer.listen(e,"mouseleave",()=>{this.hideTooltip(this.tooltipImmediateExit)})),this.tooltipCloseOnClickOutside&&(this.documentClickEvent=this.renderer.listen("window","click",i=>{e.contains(i.target)||this.hideTooltip()}))}hideTooltip(e=!1){if(!this.component)return;let i=()=>{this.mouseLeaveContentEvent&&this.mouseLeaveContentEvent(),this.mouseEnterContentEvent&&this.mouseEnterContentEvent(),this.documentClickEvent&&this.documentClickEvent(),this.hide.emit(!0),this.tooltipService.destroy(this.component),this.component=void 0};clearTimeout(this.timeout),e?i():this.timeout=setTimeout(i,this.tooltipHideTimeout)}createBoundOptions(){return{title:this.tooltipTitle,template:this.tooltipTemplate,host:this.viewContainerRef.element,placement:this.tooltipPlacement,alignment:this.tooltipAlignment,type:this.tooltipType,showCaret:this.tooltipShowCaret,cssClass:this.tooltipCssClass,spacing:this.tooltipSpacing,context:this.tooltipContext}}static{this.\u0275fac=function(i){return new(i||t)(Me(N2),Me(Wi),Me(di))}}static{this.\u0275dir=ot({type:t,selectors:[["","ngx-tooltip",""]],hostBindings:function(i,r){i&1&&Ce("focusin",function(){return r.onFocus()})("blur",function(){return r.onBlur()})("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(s){return r.onMouseLeave(s.target)})("click",function(){return r.onMouseClick()})},inputs:{tooltipCssClass:"tooltipCssClass",tooltipTitle:"tooltipTitle",tooltipAppendToBody:"tooltipAppendToBody",tooltipSpacing:"tooltipSpacing",tooltipDisabled:"tooltipDisabled",tooltipShowCaret:"tooltipShowCaret",tooltipPlacement:"tooltipPlacement",tooltipAlignment:"tooltipAlignment",tooltipType:"tooltipType",tooltipCloseOnClickOutside:"tooltipCloseOnClickOutside",tooltipCloseOnMouseLeave:"tooltipCloseOnMouseLeave",tooltipHideTimeout:"tooltipHideTimeout",tooltipShowTimeout:"tooltipShowTimeout",tooltipTemplate:"tooltipTemplate",tooltipShowEvent:"tooltipShowEvent",tooltipContext:"tooltipContext",tooltipImmediateExit:"tooltipImmediateExit"},outputs:{show:"show",hide:"hide"},standalone:!1})}}return t})(),L8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({providers:[U8,N2],imports:[pi]})}}return t})(),P8={};function Mg(){let t=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return t=`a${t}`,P8[t]?Mg():(P8[t]=!0,t)}var wh=function(t){return t.Vertical="vertical",t.Horizontal="horizontal",t}(wh||{}),bSe=(()=>{class t{constructor(){this.select=new Se,this.activate=new Se,this.deactivate=new Se}onClick(){this.select.emit(this.data)}onMouseEnter(){this.activate.emit(this.data)}onMouseLeave(){this.deactivate.emit(this.data)}ngOnChanges(e){this.classNames=Array.isArray(this.classNames)?this.classNames.join(" "):"",this.classNames+="circle"}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-circle",""]],hostBindings:function(i,r){i&1&&Ce("click",function(){return r.onClick()})("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{cx:"cx",cy:"cy",r:"r",fill:"fill",stroke:"stroke",data:"data",classNames:"classNames",circleOpacity:"circleOpacity",pointerEvents:"pointerEvents"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},standalone:!1,features:[Zt],attrs:STe,decls:1,vars:8,template:function(i,r){i&1&&(Ze(),ke(0,"circle")),i&2&&Le("cx",r.cx)("cy",r.cy)("r",r.r)("fill",r.fill)("stroke",r.stroke)("opacity",r.circleOpacity)("class",r.classNames)("pointer-events",r.pointerEvents)},encapsulation:2,changeDetection:0})}}return t})(),M2=(()=>{class t{constructor(){this.orientation=wh.Vertical}ngOnChanges(e){this.x1="0%",this.x2="0%",this.y1="0%",this.y2="0%",this.orientation===wh.Horizontal?this.x2="100%":this.orientation===wh.Vertical&&(this.y1="100%")}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-svg-linear-gradient",""]],inputs:{orientation:"orientation",name:"name",stops:"stops"},standalone:!1,features:[Zt],attrs:kTe,decls:2,vars:6,consts:[[3,"id"],[3,"stop-color","stop-opacity",4,"ngFor","ngForOf"]],template:function(i,r){i&1&&(Ze(),R(0,"linearGradient",0),be(1,ITe,1,5,"stop",1),M()),i&2&&(J("id",r.name),Le("x1",r.x1)("y1",r.y1)("x2",r.x2)("y2",r.y2),V(),J("ngForOf",r.stops))},dependencies:[Ur],encapsulation:2,changeDetection:0})}}return t})(),P1=function(t){return t.Standard="standard",t.Stacked="stacked",t}(P1||{}),xSe=(()=>{class t{constructor(e){this.platformId=e,this.type=P1.Standard,this.tooltipDisabled=!1,this.select=new Se,this.activate=new Se,this.deactivate=new Se,this.barVisible=!1,this.barOrientation=wh,this.placementTypes=qt,this.styleTypes=$1,this.isSSR=!1}ngOnInit(){this.gradientId="grad"+Mg().toString(),this.gradientFill=`url(#${this.gradientId})`,Sl(this.platformId)&&(this.isSSR=!0)}ngOnChanges(){this.update()}update(){this.circle=this.getActiveCircle()}getActiveCircle(){let e=this.data.series.findIndex(i=>{let r=i.name;return r&&this.visibleValue&&r.toString()===this.visibleValue.toString()&&i.value!==void 0});if(e!==-1)return this.mapDataPointToCircle(this.data.series[e],e)}mapDataPointToCircle(e,i){let r=this.data.name,o=e.value,s=e.name,a=H8(s),l;this.scaleType===ct.Time?l=this.xScale(s):this.scaleType===ct.Linear?l=this.xScale(Number(s)):l=this.xScale(s);let c=this.yScale(this.type===P1.Standard?o:e.d1),u=5,d=this.yScale.range()[0]-c,p=1,h;this.colors.scaleType===ct.Linear?this.type===P1.Standard?h=this.colors.getColor(o):h=this.colors.getColor(e.d1):h=this.colors.getColor(r);let m=Object.assign({},e,{series:r,value:o,name:s});return{classNames:[`circle-data-${i}`],value:o,label:s,data:m,cx:l,cy:c,radius:u,height:d,tooltipLabel:a,color:h,opacity:p,seriesName:r,gradientStops:this.getGradientStops(h),min:e.min,max:e.max}}getTooltipText({tooltipLabel:e,value:i,seriesName:r,min:o,max:s}){return`
      <span class="tooltip-label">${N8(r)} \u2022 ${N8(e)}</span>
      <span class="tooltip-val">${i.toLocaleString()}${this.getTooltipMinMaxText(o,s)}</span>
    `}getTooltipMinMaxText(e,i){if(e!==void 0||i!==void 0){let r=" (";return e!==void 0?(i===void 0&&(r+="\u2265"),r+=e.toLocaleString(),i!==void 0&&(r+=" - ")):i!==void 0&&(r+="\u2264"),i!==void 0&&(r+=i.toLocaleString()),r+=")",r}else return""}getGradientStops(e){return[{offset:0,color:e,opacity:.2},{offset:100,color:e,opacity:1}]}onClick(e){this.select.emit(e)}isActive(e){return this.activeEntries?this.activeEntries.find(r=>e.name===r.name)!==void 0:!1}activateCircle(){this.barVisible=!0,this.activate.emit({name:this.data.name})}deactivateCircle(){this.barVisible=!1,this.circle.opacity=0,this.deactivate.emit({name:this.data.name})}static{this.\u0275fac=function(i){return new(i||t)(Me(Pr))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-circle-series",""]],inputs:{data:"data",type:"type",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",visibleValue:"visibleValue",activeEntries:"activeEntries",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate"},outputs:{select:"select",activate:"activate",deactivate:"deactivate"},standalone:!1,features:[Zt],attrs:ETe,decls:1,vars:1,consts:[[4,"ngIf"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"],["class","tooltip-bar",4,"ngIf"],["ngx-charts-circle","","ngx-tooltip","",1,"circle",3,"select","activate","deactivate","cx","cy","r","fill","pointerEvents","data","classNames","tooltipDisabled","tooltipPlacement","tooltipType","tooltipTitle","tooltipTemplate","tooltipContext"],[1,"tooltip-bar"]],template:function(i,r){i&1&&be(0,MTe,6,22,"g",0),i&2&&J("ngIf",r.circle)},dependencies:[Yn,K8,bSe,M2],encapsulation:2,data:{animation:[Lf("animationState",[zp(":enter",[Hr({opacity:0}),Bp(250,Hr({opacity:1}))])])]},changeDetection:0})}}return t})();var vSe=(()=>{class t{constructor(e){this.opacity=1,this.startOpacity=.5,this.endOpacity=1,this.gradient=!1,this.animations=!0,this.select=new Se,this.animationsLoaded=!1,this.hasGradient=!1,this.barOrientation=wh,this.element=e.nativeElement}ngOnChanges(){this.update(),this.animationsLoaded||(this.loadAnimation(),this.animationsLoaded=!0)}update(){this.gradientId="grad"+Mg().toString(),this.gradientFill=`url(#${this.gradientId})`,this.gradient||this.stops?(this.gradientStops=this.getGradient(),this.hasGradient=!0):this.hasGradient=!1,this.updatePathEl()}loadAnimation(){this.areaPath=this.startingPath,setTimeout(this.updatePathEl.bind(this),100)}updatePathEl(){let e=vr(this.element).select(".area");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}getGradient(){return this.stops?this.stops:[{offset:0,color:this.fill,opacity:this.startOpacity},{offset:100,color:this.fill,opacity:this.endOpacity}]}static{this.\u0275fac=function(i){return new(i||t)(Me(nt))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-area",""]],inputs:{data:"data",path:"path",startingPath:"startingPath",fill:"fill",opacity:"opacity",startOpacity:"startOpacity",endOpacity:"endOpacity",gradient:"gradient",stops:"stops",animations:"animations"},outputs:{select:"select"},standalone:!1,features:[Zt],attrs:RTe,decls:2,vars:5,consts:[[4,"ngIf"],[1,"area"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"]],template:function(i,r){i&1&&(be(0,OTe,2,3,"defs",0),Ze(),ke(1,"path",1)),i&2&&(J("ngIf",r.gradient),V(),Ri("opacity",r.opacity),Le("d",r.areaPath)("fill",r.gradient?r.gradientFill:r.fill))},dependencies:[Yn,M2],encapsulation:2,changeDetection:0})}}return t})();var D2;typeof window<"u"?D2=window:typeof global<"u"&&(D2=global);var $8=D2.MouseEvent;function I2(t,n=!1,e=!0){if(typeof $8=="function")return new $8(t,{bubbles:n,cancelable:e});{let i=document.createEvent("MouseEvent");return i.initEvent(t,n,e),i}}var _Se=(()=>{class t{constructor(e){this.platformId=e,this.anchorOpacity=0,this.anchorPos=-1,this.anchorValues=[],this.placementTypes=qt,this.styleTypes=$1,this.showPercentage=!1,this.tooltipDisabled=!1,this.hover=new Se}getValues(e){let i=[];for(let r of this.results){let o=r.series.find(a=>a.name.toString()===e.toString()),s=r.name;if(s instanceof Date&&(s=s.toLocaleDateString()),o){let a=o.name,l=o.value;this.showPercentage&&(l=(o.d1-o.d0).toFixed(2)+"%");let c;if(this.colors.scaleType===ct.Linear){let d=l;o.d1&&(d=o.d1),c=this.colors.getColor(d)}else c=this.colors.getColor(r.name);let u=Object.assign({},o,{value:l,name:a,series:s,min:o.min,max:o.max,color:c});i.push(u)}}return i}mouseMove(e){if(!Vs(this.platformId))return;let i=e.pageX-e.target.getBoundingClientRect().left,r=this.findClosestPointIndex(i),o=this.xSet[r];if(this.anchorPos=this.xScale(o),this.anchorPos=Math.max(0,this.anchorPos),this.anchorPos=Math.min(this.dims.width,this.anchorPos),this.anchorValues=this.getValues(o),this.anchorPos!==this.lastAnchorPos){let s=I2("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(s),this.anchorOpacity=.7,this.hover.emit({value:o}),this.showTooltip(),this.lastAnchorPos=this.anchorPos}}findClosestPointIndex(e){let i=0,r=this.xSet.length-1,o=Number.MAX_VALUE,s=0;for(;i<=r;){let a=(i+r)/2|0,l=this.xScale(this.xSet[a]),c=Math.abs(l-e);if(c<o&&(o=c,s=a),l<e)i=a+1;else if(l>e)r=a-1;else{o=0,s=a;break}}return s}showTooltip(){let e=I2("mouseenter");this.tooltipAnchor.nativeElement.dispatchEvent(e)}hideTooltip(){let e=I2("mouseleave");this.tooltipAnchor.nativeElement.dispatchEvent(e),this.anchorOpacity=0,this.lastAnchorPos=-1}getToolTipText(e){let i="";return e.series!==void 0?i+=e.series:i+="???",i+=": ",e.value!==void 0&&(i+=e.value.toLocaleString()),(e.min!==void 0||e.max!==void 0)&&(i+=" (",e.min!==void 0?(e.max===void 0&&(i+="\u2265"),i+=e.min.toLocaleString(),e.max!==void 0&&(i+=" - ")):e.max!==void 0&&(i+="\u2264"),e.max!==void 0&&(i+=e.max.toLocaleString()),i+=")"),i}static{this.\u0275fac=function(i){return new(i||t)(Me(Pr))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-tooltip-area",""]],viewQuery:function(i,r){if(i&1&&sn(FTe,5),i&2){let o;Gt(o=Ut())&&(r.tooltipAnchor=o.first)}},inputs:{dims:"dims",xSet:"xSet",xScale:"xScale",yScale:"yScale",results:"results",colors:"colors",showPercentage:"showPercentage",tooltipDisabled:"tooltipDisabled",tooltipTemplate:"tooltipTemplate"},outputs:{hover:"hover"},standalone:!1,attrs:LTe,decls:6,vars:18,consts:[["defaultTooltipTemplate",""],["tooltipAnchor",""],["y","0",1,"tooltip-area",2,"opacity","0","cursor","'auto'",3,"mousemove","mouseleave"],["y","0","ngx-tooltip","",1,"tooltip-anchor",3,"tooltipDisabled","tooltipPlacement","tooltipType","tooltipSpacing","tooltipTemplate","tooltipContext","tooltipImmediateExit"],[1,"area-tooltip-container"],["class","tooltip-item",4,"ngFor","ngForOf"],[1,"tooltip-item"],[1,"tooltip-item-color"]],template:function(i,r){if(i&1){let o=Xt();Ze(),R(0,"g")(1,"rect",2),Ce("mousemove",function(a){return Ve(o),Be(r.mouseMove(a))})("mouseleave",function(){return Ve(o),Be(r.hideTooltip())}),M(),be(2,$Te,2,1,"ng-template",null,0,Dp),ke(4,"rect",3,1),M()}if(i&2){let o=ns(3);V(),Le("x",0)("width",r.dims.width)("height",r.dims.height),V(3),Ri("opacity",r.anchorOpacity)("pointer-events","none"),J("@animationState",r.anchorOpacity!==0?"active":"inactive")("tooltipDisabled",r.tooltipDisabled)("tooltipPlacement",r.placementTypes.Right)("tooltipType",r.styleTypes.tooltip)("tooltipSpacing",15)("tooltipTemplate",r.tooltipTemplate?r.tooltipTemplate:o)("tooltipContext",r.anchorValues)("tooltipImmediateExit",!0),Le("x",r.anchorPos)("width",1)("height",r.dims.height)}},dependencies:[Ur,K8],encapsulation:2,data:{animation:[Lf("animationState",[zp("inactive => active",[Hr({opacity:0}),Bp(250,Hr({opacity:.7}))]),zp("active => inactive",[Hr({opacity:.7}),Bp(250,Hr({opacity:0}))])])]},changeDetection:0})}}return t})(),wSe=(()=>{class t{constructor(e,i){this.cd=i,this.height=50,this.select=new Se,this.onDomainChange=new Se,this.initialized=!1,this.element=e.nativeElement}ngOnChanges(e){this.update(),this.initialized||(this.addBrush(),this.initialized=!0)}update(){this.dims=this.getDims(),this.height=this.dims.height;let e=this.view[1]-this.height;this.xDomain=this.getXDomain(),this.xScale=this.getXScale(),this.brush&&this.updateBrush(),this.transform=`translate(0 , ${e})`,this.filterId="filter"+Mg().toString(),this.filter=`url(#${this.filterId})`,this.cd.markForCheck()}getXDomain(){let e=[];for(let r of this.results)for(let o of r.series)e.includes(o.name)||e.push(o.name);let i=[];if(this.scaleType===ct.Time){let r=Math.min(...e),o=Math.max(...e);i=[r,o]}else if(this.scaleType===ct.Linear){e=e.map(s=>Number(s));let r=Math.min(...e),o=Math.max(...e);i=[r,o]}else i=e;return i}getXScale(){let e;return this.scaleType===ct.Time?e=d0().range([0,this.dims.width]).domain(this.xDomain):this.scaleType===ct.Linear?e=Pa().range([0,this.dims.width]).domain(this.xDomain):this.scaleType===ct.Ordinal&&(e=_1().range([0,this.dims.width]).padding(.1).domain(this.xDomain)),e}addBrush(){if(this.brush)return;let e=this.height,i=this.view[0];this.brush=e2().extent([[0,0],[i,e]]).on("brush end",({selection:r})=>{let s=(r||this.xScale.range()).map(this.xScale.invert);this.onDomainChange.emit(s),this.cd.markForCheck()}),vr(this.element).select(".brush").call(this.brush)}updateBrush(){if(!this.brush)return;let e=this.height,i=this.view[0];this.brush.extent([[0,0],[i,e]]),vr(this.element).select(".brush").call(this.brush),vr(this.element).select(".selection").attr("fill",void 0).attr("stroke",void 0).attr("fill-opacity",void 0),this.cd.markForCheck()}getDims(){return{width:this.view[0],height:this.height}}static{this.\u0275fac=function(i){return new(i||t)(Me(nt),Me(Tn))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-timeline",""]],inputs:{view:"view",results:"results",scheme:"scheme",customColors:"customColors",legend:"legend",autoScale:"autoScale",scaleType:"scaleType",height:"height"},outputs:{select:"select",onDomainChange:"onDomainChange"},standalone:!1,features:[Zt],attrs:VTe,ngContentSelectors:B8,decls:7,vars:4,consts:[[1,"timeline"],["in","SourceGraphic","type","matrix","values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"],[1,"embedded-chart"],["x","0","y","0",1,"brush-background"],[1,"brush"]],template:function(i,r){i&1&&(Kn(),Ze(),R(0,"g",0)(1,"filter"),ke(2,"feColorMatrix",1),M(),R(3,"g",2),yn(4),M(),ke(5,"rect",3)(6,"g",4),M()),i&2&&(Le("transform",r.transform),V(),Le("id",r.filterId),V(4),Le("width",r.view[0])("height",r.height))},styles:[`.timeline .brush-background{fill:#0000000d}.timeline .brush .selection{fill:#0000001a;stroke-width:1px;stroke:#888}.timeline .brush .handle{fill-opacity:0}.timeline .embedded-chart{opacity:.6}
`],encapsulation:2,changeDetection:0})}}return t})();var $o=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[pi,F8,L8,pi,F8,L8]})}}return t})();function CSe({width:t,height:n,margins:e,showXAxis:i=!1,showYAxis:r=!1,xAxisHeight:o=0,yAxisWidth:s=0,showXLabel:a=!1,showYLabel:l=!1,showLegend:c=!1,legendType:u=ct.Ordinal,legendPosition:d=_h.Right,columns:p=12}){let h=e[3],m=t,g=n-e[0]-e[2];return c&&d===_h.Right&&(u===ct.Ordinal?p-=2:p-=1),m=m*p/12,m=m-e[1]-e[3],i&&(g-=5,g-=o,a&&(g-=30)),r&&(m-=5,m-=s,h+=s,h+=10,l&&(m-=30,h+=30)),m=Math.max(0,m),g=Math.max(0,g),{width:Math.floor(m),height:Math.floor(g),xOffset:Math.floor(h)}}var V8=[{name:"vivid",selectable:!0,group:ct.Ordinal,domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:ct.Ordinal,domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:ct.Ordinal,domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:ct.Ordinal,domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:ct.Linear,domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:ct.Linear,domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:ct.Linear,domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:ct.Ordinal,domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:ct.Ordinal,domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:ct.Ordinal,domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:ct.Ordinal,domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:ct.Ordinal,domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:ct.Ordinal,domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:ct.Ordinal,domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:ct.Ordinal,domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}],A2=class{constructor(n,e,i,r){typeof n=="string"&&(n=V8.find(o=>o.name===n)),this.colorDomain=n.domain,this.scaleType=e,this.domain=i,this.customColors=r,this.scale=this.generateColorScheme(n,e,this.domain)}generateColorScheme(n,e,i){typeof n=="string"&&(n=V8.find(o=>o.name===n));let r;switch(e){case ct.Quantile:r=r0().range(n.domain).domain(i);break;case ct.Ordinal:r=dh().range(n.domain).domain(i);break;case ct.Linear:{let o=[...n.domain];o.length===1&&(o.push(o[0]),this.colorDomain=o);let s=wg(0,1,1/o.length);r=Pa().range(o).domain(s)}break;default:break}return r}getColor(n){if(n==null)throw new Error("Value can not be null");if(this.scaleType===ct.Linear){let e=Pa().domain(this.domain).range([0,1]);return this.scale(e(n))}else{if(typeof this.customColors=="function")return this.customColors(n);let e=n.toString(),i;return this.customColors&&this.customColors.length>0&&(i=this.customColors.find(r=>r.name.toLowerCase()===e.toLowerCase())),i?i.value:this.scale(n)}}getLinearGradientStops(n,e){e===void 0&&(e=this.domain[0]);let i=Pa().domain(this.domain).range([0,1]),r=Cg().domain(this.colorDomain).range([0,1]),o=this.getColor(n),s=i(e),a=this.getColor(e),l=i(n),c=1,u=s,d=[];for(d.push({color:a,offset:s,originalOffset:s,opacity:1});u<l&&c<this.colorDomain.length;){let p=this.colorDomain[c],h=r(p);if(h<=s){c++;continue}if(h.toFixed(4)>=(l-r.bandwidth()).toFixed(4))break;d.push({color:p,offset:h,opacity:1}),u=h,c++}if(d[d.length-1].offset<100&&d.push({color:o,offset:l,opacity:1}),l===s)d[0].offset=0,d[1].offset=100;else if(d[d.length-1].offset!==100)for(let p of d)p.offset=(p.offset-s)/(l-s)*100;return d}};function TSe(t){let n=new Set;for(let e of t)for(let i of e.series)n.add(i.name);return Array.from(n)}function SSe(t,n=!0){return n&&t.every(r=>r instanceof Date)?ct.Time:t.every(i=>typeof i=="number")?ct.Linear:ct.Ordinal}function kSe(t,n,e="asc"){return t.sort((i,r)=>e==="asc"?i[n]-r[n]:r[n]-i[n])}function ISe(t,n,e="asc",i){return t.sort((r,o)=>{let s=r[n],a=o[n],l=i.indexOf(s),c=i.indexOf(a);return e==="asc"?l-c:c-l})}function ESe(t,n,e="asc"){return t.sort((i,r)=>{let o=i[n].getTime(),s=r[n].getTime();return e==="asc"?o>s?1:s>o?-1:0:o>s?-1:s>o?1:0})}var DSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})();var Y8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})();var ASe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})();var NSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})();var MSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})(),RSe=(()=>{class t{constructor(e,i){this.element=e,this.platformId=i,this.fill="none",this.animations=!0,this.initialized=!1,this.isSSR=!1}ngOnInit(){Sl(this.platformId)&&(this.isSSR=!0)}ngOnChanges(e){this.initialized?this.updatePathEl():(this.initialized=!0,this.initialPath=this.path)}updatePathEl(){let e=vr(this.element.nativeElement).select(".line");this.animations?e.transition().duration(750).attr("d",this.path):e.attr("d",this.path)}static{this.\u0275fac=function(i){return new(i||t)(Me(nt),Me(Pr))}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-line",""]],inputs:{path:"path",stroke:"stroke",data:"data",fill:"fill",animations:"animations"},standalone:!1,features:[Zt],attrs:UTe,decls:2,vars:2,consts:[[4,"ngIf"],["stroke-width","1.5px",1,"line"]],template:function(i,r){i&1&&be(0,HTe,2,4,"g",0)(1,WTe,2,3,"g",0),i&2&&(J("ngIf",!r.isSSR),V(),J("ngIf",r.isSSR))},dependencies:[Yn],encapsulation:2,data:{animation:[Lf("animationState",[zp(":enter",[Hr({strokeDasharray:2e3,strokeDashoffset:2e3}),Bp(1e3,Hr({strokeDashoffset:0}))])])]},changeDetection:0})}}return t})(),OSe=(()=>{class t{constructor(){this.animations=!0,this.barOrientation=wh}ngOnChanges(e){this.update()}update(){this.updateGradients();let e=this.sortData(this.data.series),i=this.getLineGenerator();this.path=i(e)||"";let r=this.getAreaGenerator();if(this.areaPath=r(e)||"",this.hasRange){let o=this.getRangeGenerator();this.outerPath=o(e)||""}if(this.hasGradient){this.stroke=this.gradientUrl;let o=this.data.series.map(l=>l.value),s=Math.max(...o),a=Math.min(...o);s===a&&(this.stroke=this.colors.getColor(s))}else this.stroke=this.colors.getColor(this.data.name)}getLineGenerator(){return p0().x(e=>{let i=e.name,r;return this.scaleType===ct.Time?r=this.xScale(i):this.scaleType===ct.Linear?r=this.xScale(Number(i)):r=this.xScale(i),r}).y(e=>this.yScale(e.value)).curve(this.curve)}getRangeGenerator(){return L1().x(e=>{let i=e.name,r;return this.scaleType===ct.Time?r=this.xScale(i):this.scaleType===ct.Linear?r=this.xScale(Number(i)):r=this.xScale(i),r}).y0(e=>this.yScale(typeof e.min=="number"?e.min:e.value)).y1(e=>this.yScale(typeof e.max=="number"?e.max:e.value)).curve(this.curve)}getAreaGenerator(){let e=i=>{let r=i.name;return this.xScale(r)};return L1().x(e).y0(()=>this.yScale.range()[0]).y1(i=>this.yScale(i.value)).curve(this.curve)}sortData(e){return this.scaleType===ct.Linear?e=kSe(e,"name"):this.scaleType===ct.Time?e=ESe(e,"name"):e=ISe(e,"name","asc",this.xScale.domain()),e}updateGradients(){if(this.colors.scaleType===ct.Linear){this.hasGradient=!0,this.gradientId="grad"+Mg().toString(),this.gradientUrl=`url(#${this.gradientId})`;let e=this.data.series.map(o=>o.value),i=Math.max(...e),r=Math.min(...e);this.gradientStops=this.colors.getLinearGradientStops(i,r),this.areaGradientStops=this.colors.getLinearGradientStops(i)}else this.hasGradient=!1,this.gradientStops=void 0,this.areaGradientStops=void 0}isActive(e){return this.activeEntries?this.activeEntries.find(r=>e.name===r.name)!==void 0:!1}isInactive(e){return!this.activeEntries||this.activeEntries.length===0?!1:this.activeEntries.find(r=>e.name===r.name)===void 0}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=De({type:t,selectors:[["g","ngx-charts-line-series",""]],inputs:{data:"data",xScale:"xScale",yScale:"yScale",colors:"colors",scaleType:"scaleType",curve:"curve",activeEntries:"activeEntries",rangeFillOpacity:"rangeFillOpacity",hasRange:"hasRange",animations:"animations"},standalone:!1,features:[Zt],attrs:jTe,decls:6,vars:22,consts:[["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops",4,"ngIf"],["ngx-charts-area","",1,"line-highlight",3,"data","path","fill","opacity","startOpacity","gradient","stops","animations"],["ngx-charts-line","",1,"line-series",3,"data","path","stroke","animations"],["ngx-charts-area","","class","line-series-range",3,"data","path","fill","active","inactive","opacity","animations",4,"ngIf"],["ngx-charts-svg-linear-gradient","",3,"orientation","name","stops"],["ngx-charts-area","",1,"line-series-range",3,"data","path","fill","opacity","animations"]],template:function(i,r){i&1&&(Ze(),R(0,"g")(1,"defs"),be(2,qTe,1,3,"g",0),M(),ke(3,"g",1)(4,"g",2),be(5,XTe,1,9,"g",3),M()),i&2&&(V(2),J("ngIf",r.hasGradient),V(),st("active",r.isActive(r.data))("inactive",r.isInactive(r.data)),J("data",r.data)("path",r.areaPath)("fill",r.hasGradient?r.gradientUrl:r.colors.getColor(r.data.name))("opacity",.25)("startOpacity",0)("gradient",!0)("stops",r.areaGradientStops)("animations",r.animations),V(),st("active",r.isActive(r.data))("inactive",r.isInactive(r.data)),J("data",r.data)("path",r.path)("stroke",r.stroke)("animations",r.animations),V(),J("ngIf",r.hasRange))},dependencies:[Yn,vSe,M2,RSe],encapsulation:2,changeDetection:0})}}return t})(),Q8=(()=>{class t extends mSe{constructor(){super(...arguments),this.legendTitle="Legend",this.legendPosition=_h.Right,this.showGridLines=!0,this.curve=vh,this.activeEntries=[],this.trimXAxisTicks=!0,this.trimYAxisTicks=!0,this.rotateXAxisTicks=!0,this.maxXAxisTickLength=16,this.maxYAxisTickLength=16,this.roundDomains=!1,this.tooltipDisabled=!1,this.showRefLines=!1,this.showRefLabels=!0,this.wrapTicks=!1,this.activate=new Se,this.deactivate=new Se,this.margin=[10,20,10,20],this.xAxisHeight=0,this.yAxisWidth=0,this.timelineHeight=50,this.timelinePadding=10,this.isSSR=!1}ngOnInit(){Sl(this.platformId)&&(this.isSSR=!0)}ngOnChanges(){this.update()}update(){super.update(),this.dims=CSe({width:this.width,height:this.height,margins:this.margin,showXAxis:this.xAxis,showYAxis:this.yAxis,xAxisHeight:this.xAxisHeight,yAxisWidth:this.yAxisWidth,showXLabel:this.showXAxisLabel,showYLabel:this.showYAxisLabel,showLegend:this.legend,legendType:this.schemeType,legendPosition:this.legendPosition}),this.timeline&&(this.dims.height-=this.timelineHeight+this.margin[2]+this.timelinePadding),this.xDomain=this.getXDomain(),this.filteredDomain&&(this.xDomain=this.filteredDomain),this.yDomain=this.getYDomain(),this.seriesDomain=this.getSeriesDomain(),this.xScale=this.getXScale(this.xDomain,this.dims.width),this.yScale=this.getYScale(this.yDomain,this.dims.height),this.updateTimeline(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.transform=`translate(${this.dims.xOffset} , ${this.margin[0]})`,this.clipPathId="clip"+Mg().toString(),this.clipPath=`url(#${this.clipPathId})`}updateTimeline(){this.timeline&&(this.timelineWidth=this.dims.width,this.timelineXDomain=this.getXDomain(),this.timelineXScale=this.getXScale(this.timelineXDomain,this.timelineWidth),this.timelineYScale=this.getYScale(this.yDomain,this.timelineHeight),this.timelineTransform=`translate(${this.dims.xOffset}, ${-this.margin[2]})`)}getXDomain(){let e=TSe(this.results);this.scaleType=SSe(e);let i=[];this.scaleType===ct.Linear&&(e=e.map(s=>Number(s)));let r,o;return(this.scaleType===ct.Time||this.scaleType===ct.Linear)&&(r=this.xScaleMin?this.xScaleMin:Math.min(...e),o=this.xScaleMax?this.xScaleMax:Math.max(...e)),this.scaleType===ct.Time?(i=[new Date(r),new Date(o)],this.xSet=[...e].sort((s,a)=>{let l=s.getTime(),c=a.getTime();return l>c?1:c>l?-1:0})):this.scaleType===ct.Linear?(i=[r,o],this.xSet=[...e].sort((s,a)=>s-a)):(i=e,this.xSet=e),i}getYDomain(){let e=[];for(let s of this.results)for(let a of s.series)e.indexOf(a.value)<0&&e.push(a.value),a.min!==void 0&&(this.hasRange=!0,e.indexOf(a.min)<0&&e.push(a.min)),a.max!==void 0&&(this.hasRange=!0,e.indexOf(a.max)<0&&e.push(a.max));let i=[...e];this.autoScale||i.push(0);let r=this.yScaleMin?this.yScaleMin:Math.min(...i),o=this.yScaleMax?this.yScaleMax:Math.max(...i);return[r,o]}getSeriesDomain(){return this.results.map(e=>e.name)}getXScale(e,i){let r;return this.scaleType===ct.Time?r=d0().range([0,i]).domain(e):this.scaleType===ct.Linear?(r=Pa().range([0,i]).domain(e),this.roundDomains&&(r=r.nice())):this.scaleType===ct.Ordinal&&(r=_1().range([0,i]).padding(.1).domain(e)),r}getYScale(e,i){let r=Pa().range([i,0]).domain(e);return this.roundDomains?r.nice():r}updateDomain(e){this.filteredDomain=e,this.xDomain=this.filteredDomain,this.xScale=this.getXScale(this.xDomain,this.dims.width)}updateHoveredVertical(e){this.hoveredVertical=e.value,this.deactivateAll()}hideCircles(){this.hoveredVertical=null,this.deactivateAll()}onClick(e){this.select.emit(e)}trackBy(e,i){return`${i.name}`}setColors(){let e;this.schemeType===ct.Ordinal?e=this.seriesDomain:e=this.yDomain,this.colors=new A2(this.scheme,this.schemeType,e,this.customColors)}getLegendOptions(){let e={scaleType:this.schemeType,colors:void 0,domain:[],title:void 0,position:this.legendPosition};return e.scaleType===ct.Ordinal?(e.domain=this.seriesDomain,e.colors=this.colors,e.title=this.legendTitle):(e.domain=this.yDomain,e.colors=this.colors.scale),e}updateYAxisWidth({width:e}){this.yAxisWidth=e,this.update()}updateXAxisHeight({height:e}){this.xAxisHeight=e,this.update()}onActivate(e){this.deactivateAll(),!(this.activeEntries.findIndex(r=>r.name===e.name&&r.value===e.value)>-1)&&(this.activeEntries=[e],this.activate.emit({value:e,entries:this.activeEntries}))}onDeactivate(e){let i=this.activeEntries.findIndex(r=>r.name===e.name&&r.value===e.value);this.activeEntries.splice(i,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:e,entries:this.activeEntries})}deactivateAll(){this.activeEntries=[...this.activeEntries];for(let e of this.activeEntries)this.deactivate.emit({value:e,entries:[]});this.activeEntries=[]}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Mi(t)))(r||t)}})()}static{this.\u0275cmp=De({type:t,selectors:[["ngx-charts-line-chart"]],contentQueries:function(i,r,o){if(i&1&&($s(o,BTe,5),$s(o,zTe,5)),i&2){let s;Gt(s=Ut())&&(r.tooltipTemplate=s.first),Gt(s=Ut())&&(r.seriesTooltipTemplate=s.first)}},hostBindings:function(i,r){i&1&&Ce("mouseleave",function(){return r.hideCircles()})},inputs:{legend:"legend",legendTitle:"legendTitle",legendPosition:"legendPosition",xAxis:"xAxis",yAxis:"yAxis",showXAxisLabel:"showXAxisLabel",showYAxisLabel:"showYAxisLabel",xAxisLabel:"xAxisLabel",yAxisLabel:"yAxisLabel",autoScale:"autoScale",timeline:"timeline",gradient:"gradient",showGridLines:"showGridLines",curve:"curve",activeEntries:"activeEntries",schemeType:"schemeType",rangeFillOpacity:"rangeFillOpacity",trimXAxisTicks:"trimXAxisTicks",trimYAxisTicks:"trimYAxisTicks",rotateXAxisTicks:"rotateXAxisTicks",maxXAxisTickLength:"maxXAxisTickLength",maxYAxisTickLength:"maxYAxisTickLength",xAxisTickFormatting:"xAxisTickFormatting",yAxisTickFormatting:"yAxisTickFormatting",xAxisTicks:"xAxisTicks",yAxisTicks:"yAxisTicks",roundDomains:"roundDomains",tooltipDisabled:"tooltipDisabled",showRefLines:"showRefLines",referenceLines:"referenceLines",showRefLabels:"showRefLabels",xScaleMin:"xScaleMin",xScaleMax:"xScaleMax",yScaleMin:"yScaleMin",yScaleMax:"yScaleMax",wrapTicks:"wrapTicks"},outputs:{activate:"activate",deactivate:"deactivate"},standalone:!1,features:[Mn,Zt],decls:12,vars:20,consts:[[3,"legendLabelClick","legendLabelActivate","legendLabelDeactivate","view","showLegend","legendOptions","activeEntries","animations"],[1,"line-chart","chart"],["ngx-charts-x-axis","",3,"xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","wrapTicks","dimensionsChanged",4,"ngIf"],["ngx-charts-y-axis","",3,"yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","wrapTicks","dimensionsChanged",4,"ngIf"],[4,"ngIf"],[3,"mouseleave",4,"ngIf"],["ngx-charts-timeline","",3,"results","view","height","scheme","customColors","scaleType","legend","onDomainChange",4,"ngIf"],["ngx-charts-x-axis","",3,"dimensionsChanged","xScale","dims","showGridLines","showLabel","labelText","trimTicks","rotateTicks","maxTickLength","tickFormatting","ticks","wrapTicks"],["ngx-charts-y-axis","",3,"dimensionsChanged","yScale","dims","showGridLines","showLabel","labelText","trimTicks","maxTickLength","tickFormatting","ticks","referenceLines","showRefLines","showRefLabels","wrapTicks"],[4,"ngFor","ngForOf","ngForTrackBy"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","activeEntries","scaleType","curve","rangeFillOpacity","hasRange","animations"],[3,"mouseleave"],["ngx-charts-tooltip-area","",3,"hover","dims","xSet","xScale","yScale","results","colors","tooltipDisabled","tooltipTemplate"],[4,"ngFor","ngForOf"],["ngx-charts-circle-series","",3,"select","activate","deactivate","xScale","yScale","colors","data","scaleType","visibleValue","activeEntries","tooltipDisabled","tooltipTemplate"],["ngx-charts-timeline","",3,"onDomainChange","results","view","height","scheme","customColors","scaleType","legend"],["ngx-charts-line-series","",3,"xScale","yScale","colors","data","scaleType","curve","hasRange","animations"]],template:function(i,r){i&1&&(R(0,"ngx-charts-chart",0),Ce("legendLabelClick",function(s){return r.onClick(s)})("legendLabelActivate",function(s){return r.onActivate(s)})("legendLabelDeactivate",function(s){return r.onDeactivate(s)}),Ze(),R(1,"defs")(2,"clipPath"),ke(3,"rect"),M()(),R(4,"g",1),be(5,KTe,1,11,"g",2)(6,YTe,1,13,"g",3),R(7,"g"),be(8,ZTe,2,2,"g",4)(9,eSe,2,2,"g",4)(10,nSe,3,9,"g",5),M()(),be(11,rSe,2,13,"g",6),M()),i&2&&(J("view",vx(17,G8,r.width,r.height))("showLegend",r.legend)("legendOptions",r.legendOptions)("activeEntries",r.activeEntries)("animations",r.animations),V(2),Le("id",r.clipPathId),V(),Le("width",r.dims.width+10)("height",r.dims.height+10)("transform","translate(-5, -5)"),V(),Le("transform",r.transform),V(),J("ngIf",r.xAxis),V(),J("ngIf",r.yAxis),V(),Le("clip-path",r.clipPath),V(),J("ngIf",!r.isSSR),V(),J("ngIf",r.isSSR),V(),J("ngIf",!r.tooltipDisabled),V(),J("ngIf",r.timeline&&r.scaleType!="ordinal"))},dependencies:[Ur,Yn,fSe,ySe,_Se,pSe,xSe,wSe,OSe],styles:[GTe],encapsulation:2,data:{animation:[Lf("animationState",[zp(":leave",[Hr({opacity:1}),Bp(500,Hr({opacity:0}))])])]},changeDetection:0})}}return t})(),Z8=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})();var Dmt=2*Math.PI;var R2=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})(),FSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o,R2,Z8]})}}return t})();var LSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})();var PSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})();var $Se=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o,R2,Y8]})}}return t})();function VSe(){typeof SVGElement<"u"&&typeof SVGElement.prototype.contains>"u"&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}var BSe=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o]})}}return t})(),J8=(()=>{class t{constructor(){VSe()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$e({type:t})}static{this.\u0275inj=Pe({imports:[$o,DSe,Y8,ASe,NSe,MSe,BSe,Z8,FSe,LSe,R2,PSe,$Se]})}}return t})();var Ch=class{constructor(n,e){this.backend=n,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(n){return this.data.has(n)||this.dataMover.moveData(this.backend,n),this.data.get(n)}set(n,e){this.dataIdsCount++,this.data.set(n,e)}has(n){return this.data.has(n)}delete(n){return this.dataIdsCount--,this.data.delete(n)}numDataIds(){return this.dataIdsCount}},Ul=class{refCount(n){return yo("refCount")}incRef(n){return yo("incRef")}timerAvailable(){return!0}time(n){return yo("time")}read(n){return yo("read")}readSync(n){return yo("readSync")}readToGPU(n,e){return yo("readToGPU")}numDataIds(){return yo("numDataIds")}disposeData(n,e){return yo("disposeData")}write(n,e,i){return yo("write")}move(n,e,i,r,o){return yo("move")}createTensorFromGPUData(n,e,i){return yo("createTensorFromGPUData")}memory(){return yo("memory")}floatPrecision(){return yo("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return yo("dispose")}};function yo(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function eX(t){let n=t.length,e=0;for(;n>0;)e=Math.random()*n|0,n--,V1(t,n,e)}function GSe(t,n){if(t.length!==n.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${n.length}`);let e=t.length,i=0;for(;e>0;)i=Math.random()*e|0,e--,V1(t,e,i),V1(n,e,i)}function Rg(t,n,e){return Math.max(t,Math.min(n,e))}function USe(t){return t%2===0?t:t+1}function V1(t,n,e){let i=t[n];t[n]=t[e],t[e]=i}function HSe(t){let n=0;for(let e=0;e<t.length;e++)n+=t[e];return n}function WSe(t,n){let e=Math.random();return n*e+(1-e)*t}function jSe(t,n){let e=0;for(let i=0;i<t.length;i++){let r=Number(t[i])-Number(n[i]);e+=r*r}return e}function A(t,n){if(!t)throw new Error(typeof n=="string"?n:n())}function B1(t,n,e=""){A(Uu(t,n),()=>e+` Shapes ${t} and ${n} must match`)}function f0(t){A(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function Ht(t){if(t.length===0)return 1;let n=t[0];for(let e=1;e<t.length;e++)n*=t[e];return n}function qSe(t){return t.length===0}function XSe(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==null&&n[e]!==null&&t[e]!==n[e])return!1;return!0}function Uu(t,n){if(t===n)return!0;if(t==null||n==null||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}function Hl(t){return t%1===0}function KSe(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{let n=Math.exp(2*t);return(n-1)/(n+1)}}function YSe(t){let n=Math.ceil(Math.sqrt(t));return[n,Math.ceil(t/n)]}function QSe(t){let n=new Uint32Array(t);for(let e=0;e<t;++e)n[e]=e;return eX(n),n}function Sh(t,n){return n<=t.length?t:t+" ".repeat(n-t.length)}function ZSe(t,n=r=>0,e,i){return new Promise((r,o)=>{let s=0,a=()=>{if(t()){r();return}s++;let l=n(s);if(e!=null&&s>=e){o();return}i!=null?i(a,l):setTimeout(a,l)};a()})}function JSe(t,n){let e=1,i=-1;for(let o=0;o<t.length;++o)if(t[o]>=0)e*=t[o];else if(t[o]===-1){if(i!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${i} and dim ${o}`);i=o}else if(t[o]<0)throw Error(`Shapes can not be < 0. Found ${t[o]} at dim ${o}`);if(i===-1){if(n>0&&n!==e)throw Error(`Size(${n}) must match the product of shape ${t}`);return t}if(e===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(n%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${n} / ${e}`);let r=t.slice();return r[i]=n/e,r}function si(t,n){let e=n.length;return t=t==null?n.map((i,r)=>r):[].concat(t),A(t.every(i=>i>=-e&&i<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${t}`),A(t.every(i=>Hl(i)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(i=>i<0?e+i:i)}function O2(t,n){let e=[],i=[],r=n!=null&&Array.isArray(n)&&n.length===0,o=n==null||r?null:si(n,t).sort(),s=0;for(let a=0;a<t.length;++a){if(o!=null){if(o[s]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(o[s]==null||o[s]>a)&&t[a]===1&&(e.push(t[a]),i.push(a)),o[s]<=a&&s++}t[a]!==1&&(e.push(t[a]),i.push(a))}return{newShape:e,keptDims:i}}function e1e(t,n){return z1(t,n)}function z1(t,n){let e=null;if(t==null||t==="float32")e=new Float32Array(n);else if(t==="int32")e=new Int32Array(n);else if(t==="bool")e=new Uint8Array(n);else if(t==="string")e=new Array(n);else throw new Error(`Unknown data type ${t}`);return e}function F2(t,n){for(let e=0;e<t.length;e++){let i=t[e];if(isNaN(i)||!isFinite(i))throw Error(`A tensor of type ${n} being uploaded contains ${i}.`)}}function L2(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function t1e(t,n){return!(n==="complex64"||n==="float32"&&t!=="complex64"||n==="int32"&&t!=="float32"&&t!=="complex64"||n==="bool"&&t==="bool")}function Og(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function P2(t){if(t==null)return 0;let n=0;return t.forEach(e=>n+=e.length),n}function Fg(t){return typeof t=="string"||t instanceof String}function tX(t){return typeof t=="boolean"}function nX(t){return typeof t=="number"}function Hu(t){return Array.isArray(t)?Hu(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":nX(t)?"float32":Fg(t)?"string":tX(t)?"bool":"float32"}function Lg(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Pg(t,n){for(let e=n;e<t;++e)if(t%e===0)return e;return t}function Ba(t){let n=t.length;if(n<2)return[];let e=new Array(n-1);e[n-2]=t[n-1];for(let i=n-3;i>=0;--i)e[i]=e[i+1]*t[i+1];return e}function iX(t,n,e,i=!1){let r=new Array;if(n.length===1){let o=n[0]*(i?2:1);for(let s=0;s<o;s++)r[s]=e[t+s]}else{let o=n[0],s=n.slice(1),a=s.reduce((l,c)=>l*c)*(i?2:1);for(let l=0;l<o;l++)r[l]=iX(t+l*a,s,e,i)}return r}function Th(t,n,e=!1){if(t.length===0)return n[0];let i=t.reduce((r,o)=>r*o)*(e?2:1);if(i===0)return[];if(i!==n.length)throw new Error(`[${t}] does not match the input size ${n.length}${e?" for a complex tensor":""}.`);return iX(0,t,n,e)}function n1e(t,n){if(Array.isArray(t))return t;if(n==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(n==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(n==="bool"||n==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${n}`)}function g0(t,n){let e=$g(t,n);for(let i=0;i<e.length;i++)e[i]=1;return e}function $g(t,n){if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${n}`)}function i1e(t,n){let e=t.reduce((i,r)=>i*r,1);if(n==null||n==="float32")return Th(t,new Float32Array(e));if(n==="int32")return Th(t,new Int32Array(e));if(n==="bool")return Th(t,new Uint8Array(e));throw new Error(`Unknown data type ${n}`)}function Li(t){t.forEach(n=>{A(Number.isInteger(n)&&n>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function r1e(t,n,e){if(n===0)return 0;if(n===1)return t[0];let i=t[t.length-1];for(let r=0;r<t.length-1;++r)i+=e[r]*t[r];return i}function o1e(t,n,e){if(n===0)return[];if(n===1)return[t];let i=new Array(n);for(let r=0;r<i.length-1;++r)i[r]=Math.floor(t/e[r]),t-=i[r]*e[r];return i[i.length-1]=t,i}function kh(t){return t&&t.then&&typeof t.then=="function"}var rX="tfjsflags",y0=class{constructor(n){this.global=n,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=a1e,this.populateURLFlags()}setPlatform(n,e){this.platform!=null&&(G().getBool("IS_TEST")||G().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${n}.`)),this.platformName=n,this.platform=e}registerFlag(n,e,i){if(this.flagRegistry[n]={evaluationFn:e,setHook:i},this.urlFlags[n]!=null){let r=this.urlFlags[n];G().getBool("IS_TEST")||G().getBool("PROD")||console.warn(`Setting feature override from URL ${n}: ${r}.`),this.set(n,r)}}getAsync(n){return H(this,null,function*(){return n in this.flags?this.flags[n]:(this.flags[n]=yield this.evaluateFlag(n),this.flags[n])})}get(n){if(n in this.flags)return this.flags[n];let e=this.evaluateFlag(n);if(kh(e))throw new Error(`Flag ${n} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[n]=e,this.flags[n]}getNumber(n){return this.get(n)}getBool(n){return this.get(n)}getString(n){return this.get(n)}getFlags(){return this.flags}get features(){return this.flags}set(n,e){if(this.flagRegistry[n]==null)throw new Error(`Cannot set flag ${n} as it has not been registered.`);this.flags[n]=e,this.flagRegistry[n].setHook!=null&&this.flagRegistry[n].setHook(e)}evaluateFlag(n){if(this.flagRegistry[n]==null)throw new Error(`Cannot evaluate flag '${n}': no evaluation function found.`);return this.flagRegistry[n].evaluationFn()}setFlags(n){this.flags=Object.assign({},n)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let n=this.getQueryParams(this.global.location.search);rX in n&&n[rX].split(",").forEach(i=>{let[r,o]=i.split(":");this.urlFlags[r]=c1e(r,o)})}};function a1e(t){let n={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...i)=>(l1e(n,i[0],i[1]),i.join("="))),n}function l1e(t,n,e){t[decodeURIComponent(n)]=decodeURIComponent(e||"")}function c1e(t,n){let e=n.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:n}function G(){return $2}var $2=null;function oX(t){$2=t}var V2;function B2(){if(V2==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");V2=t}return V2}function u1e(){let t=B2();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function b0(t,n){let e=u1e();if(e.has(t))return e.get(t);{let i=n();return e.set(t,i),e.get(t)}}var Wu="Abs",Wl="Acos",jl="Acosh",Xs="Add",Vg="AddN",Bg="All",zg="Any",ju="ArgMax",qu="ArgMin",ql="Asin",Xl="Asinh",Kl="Atan",Yl="Atanh",Ql="Atan2",Xu="AvgPool",Gg="AvgPoolGrad",Ku="AvgPool3D",Ug="AvgPool3DGrad",Yu="BatchMatMul",Qu="BatchToSpaceND",Hg="Bincount",x0="BitwiseAnd",sX="BroadcastTo",G1="BroadcastArgs",za="Cast",Zl="Ceil",Jl="ClipByValue",Wg="Complex",Zu="ComplexAbs",Ju="Concat",ed="Conv2D",jg="Conv2DBackpropFilter",td="Conv2DBackpropInput",nd="Conv3D",qg="Conv3DBackpropFilterV2",Xg="Conv3DBackpropInputV2",ec="Cos",tc="Cosh",Kg="Cumprod",id="Cumsum",Yg="CropAndResize",Qg="DenseBincount",Zg="DepthToSpace",rd="DepthwiseConv2dNative",Jg="DepthwiseConv2dNativeBackpropFilter",ey="DepthwiseConv2dNativeBackpropInput",U1="Diag",od="Dilation2D",v0="Dilation2DBackpropInput",_0="Dilation2DBackpropFilter",aX="Draw",nc="RealDiv",ty="Einsum",ic="Elu",ny="EluGrad",rc="Erf",Ih="Equal",oc="Exp",sd="ExpandDims",sc="Expm1",iy="FFT",ry="Fill",oy="FlipLeftRight",ac="Floor",lc="FloorDiv",ad="FusedBatchNorm",ld="GatherV2",H1="GatherNd",Eh="Greater",cc="GreaterEqual",Ga="Identity",sy="IFFT",ay="Imag",uc="IsFinite",dc="IsInf",pc="IsNan",cd="LeakyRelu",Dh="Less",Ah="LessEqual",W1="LinSpace",hc="Log",mc="Log1p",Nh="LogicalAnd",Mh="LogicalNot",Rh="LogicalOr";var lX="LogSoftmax";var ud="LRN",ly="LRNGrad";var dd="Max",fc="Maximum",pd="MaxPool",cy="MaxPoolGrad",hd="MaxPool3D",uy="MaxPool3DGrad",j1="MaxPoolWithArgmax",md="Mean",fd="Min",gc="Minimum",gd="MirrorPad",yc="Mod",q1="Multinomial",bc="Multiply",yd="Neg",Oh="NotEqual",dy="NonMaxSuppressionV3",py="NonMaxSuppressionV4",hy="NonMaxSuppressionV5",bd="OnesLike",xd="OneHot",vd="Pack",_d="PadV2";var xc="Pow",wd="Prelu",Cd="Prod",X1="RaggedGather",K1="RaggedRange",Y1="RaggedTensorToTensor",my="Range",fy="Real",vc="Reciprocal",_c="Relu",Td="Reshape",Sd="ResizeNearestNeighbor",gy="ResizeNearestNeighborGrad",kd="ResizeBilinear",yy="ResizeBilinearGrad",wc="Relu6",Id="Reverse",Cc="Round",Tc="Rsqrt",Q1="ScatterNd",Z1="TensorScatterUpdate",J1="SearchSorted",Ed="Select",Sc="Selu",Dd="Slice",kc="Sin",Ic="Sinh",Ec="Sign",Dc="Sigmoid",Ac="Softplus",Nc="Sqrt",Ad="Sum",Nd="SpaceToBatchND",Md="SplitV",Rd="Softmax",ek="SparseFillEmptyRows",tk="SparseReshape",nk="SparseSegmentMean",ik="SparseSegmentSum",rk="SparseToDense",Mc="SquaredDifference",by="Square",w0="StaticRegexReplace",xy="StridedSlice",ok="StringNGrams",sk="StringSplit",ak="StringToHashBucketFast",Rc="Sub",Oc="Tan",Fc="Tanh",Ua="Tile",vy="TopK",_y="Transform",Ha="Transpose",wy="Unique",Od="Unpack",Fd="UnsortedSegmentSum";var Ld="ZerosLike",Lc="Step",cX="FromPixels",Cy="RotateWithOffset",Fh="_FusedMatMul",Lh="FusedConv2D",Ph="FusedDepthwiseConv2D";function Wa(...t){G().getBool("IS_TEST")||G().getBool("PROD")||console.warn(...t)}function d1e(...t){G().getBool("IS_TEST")||G().getBool("PROD")||console.log(...t)}var lk=b0("kernelRegistry",()=>new Map),z2=b0("gradRegistry",()=>new Map);function G2(t,n){let e=pX(t,n);return lk.get(e)}function U2(t){return z2.get(t)}function H2(t){let n=lk.entries(),e=[];for(;;){let{done:i,value:r}=n.next();if(i)break;let[o,s]=r,[a]=o.split("_");a===t&&e.push(s)}return e}function ck(t){let{kernelName:n,backendName:e}=t,i=pX(n,e);lk.has(i)&&Wa(`The kernel '${n}' for backend '${e}' is already registered`),lk.set(i,t)}function dX(t){let{kernelName:n}=t;z2.has(n)&&G().getBool("DEBUG")&&Wa(`Overriding the gradient for '${n}'`),z2.set(n,t)}function pX(t,n){return`${n}_${t}`}var x={};Ko(x,{arraysEqual:()=>Uu,arraysEqualWithNull:()=>XSe,assert:()=>A,assertNonNegativeIntegerDimensions:()=>Li,assertNonNull:()=>f0,assertShapesMatch:()=>B1,bytesFromStringArray:()=>P2,bytesPerElement:()=>Og,checkConversionForErrors:()=>F2,clamp:()=>Rg,computeStrides:()=>Ba,convertBackendValuesAndArrayBuffer:()=>n1e,createScalarValue:()=>b1e,createShuffledIndices:()=>QSe,decodeString:()=>Ey,distSquared:()=>jSe,encodeString:()=>Iy,fetch:()=>v1e,fingerPrint64:()=>y1e,flatten:()=>$d,getArrayFromDType:()=>z1,getTypedArrayFromDType:()=>e1e,hasEncodingLoss:()=>t1e,hexToLong:()=>C0,indexToLoc:()=>o1e,inferDtype:()=>Hu,inferFromImplicitShape:()=>JSe,isBoolean:()=>tX,isFunction:()=>Lg,isInt:()=>Hl,isNumber:()=>nX,isPromise:()=>kh,isScalarShape:()=>qSe,isString:()=>Fg,isTypedArray:()=>ar,isValidDtype:()=>L2,locToIndex:()=>r1e,makeOnesTypedArray:()=>g0,makeZerosNestedTypedArray:()=>i1e,makeZerosTypedArray:()=>$g,nearestDivisor:()=>Pg,nearestLargerEven:()=>USe,now:()=>Gh,parseAxisParam:()=>si,randUniform:()=>WSe,repeatedTry:()=>ZSe,rightPad:()=>Sh,shuffle:()=>eX,shuffleCombo:()=>GSe,sizeFromShape:()=>Ht,sizeToSquarishShape:()=>YSe,squeezeShape:()=>O2,sum:()=>HSe,swap:()=>V1,tanh:()=>KSe,toNestedArray:()=>Th,toTypedArray:()=>ky});function uk(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var X2=Gb(CX());var zh=X2.default||X2;function C0(t){return zh.fromString(t,!0,16)}var SX=C0("c3a5c85c97cb3127"),Bh=C0("b492b66fbe98f273"),Cr=C0("9ae16a3b2f90404f");function q2(t){return t.xor(t.shru(47))}function kX(t,n,e){let i=t.slice(n,n+e);return zh.fromBytes(Array.from(i),!0,!0)}function On(t,n){return kX(t,n,8)}function TX(t,n){return kX(t,n,4)}function Pi(t,n){return n===0?t:t.shru(n).or(t.shl(64-n))}function Pd(t,n,e=C0("9ddfea08eb382d69")){let i=t.xor(n).mul(e);i=i.xor(i.shru(47));let r=n.xor(i).mul(e);return r=r.xor(r.shru(47)),r=r.mul(e),r}function h1e(t,n,e,i,r,o){r=r.add(t),o=Pi(o.add(r).add(i),21);let s=r;return r=r.add(n),r=r.add(e),o=o.add(Pi(r,44)),[r.add(i),o.add(s)]}function pk(t,n,e,i){return h1e(On(t,n),On(t,n+8),On(t,n+16),On(t,n+24),e,i)}function m1e(t,n=t.length){if(n>=8){let e=Cr.add(n*2),i=On(t,0).add(Cr),r=On(t,n-8),o=Pi(r,37).mul(e).add(i),s=Pi(i,25).add(r).mul(e);return Pd(o,s,e)}if(n>=4){let e=Cr.add(n*2),i=TX(t,0);return Pd(i.shl(3).add(n),TX(t,n-4),e)}if(n>0){let e=t[0],i=t[n>>1],r=t[n-1],o=e+(i<<8),s=n+(r<<2);return q2(Cr.mul(o).xor(SX.mul(s))).mul(Cr)}return Cr}function f1e(t,n=t.length){let e=Cr.add(n*2),i=On(t,0).mul(Bh),r=On(t,8),o=On(t,n-8).mul(e),s=On(t,n-16).mul(Cr);return Pd(Pi(i.add(r),43).add(Pi(o,30)).add(s),i.add(Pi(r.add(Cr),18)).add(o),e)}function g1e(t,n=t.length){let e=Cr.add(n*2),i=On(t,0).mul(Cr),r=On(t,8),o=On(t,n-8).mul(e),s=On(t,n-16).mul(Cr),a=Pi(i.add(r),43).add(Pi(o,30)).add(s),l=Pd(a,i.add(Pi(r.add(Cr),18)).add(o),e),c=On(t,16).mul(e),u=On(t,24),d=a.add(On(t,n-32)).mul(e),p=l.add(On(t,n-24)).mul(e);return Pd(Pi(c.add(u),43).add(Pi(d,30)).add(p),c.add(Pi(u.add(i),18)).add(d),e)}function y1e(t,n=t.length){let e=zh.fromNumber(81,!0);if(n<=32)return n<=16?m1e(t,n):f1e(t,n);if(n<=64)return g1e(t,n);let i=e,r=e.mul(Bh).add(113),o=q2(r.mul(Cr).add(113)).mul(Cr),s=[zh.UZERO,zh.UZERO],a=[zh.UZERO,zh.UZERO];i=i.mul(Cr).add(On(t,0));let l=0,c=(n-1>>6)*64,u=c+(n-1&63)-63;do i=Pi(i.add(r).add(s[0]).add(On(t,l+8)),37).mul(Bh),r=Pi(r.add(s[1]).add(On(t,l+48)),42).mul(Bh),i=i.xor(a[1]),r=r.add(s[0]).add(On(t,l+40)),o=Pi(o.add(a[0]),33).mul(Bh),s=pk(t,l,s[1].mul(Bh),i.add(a[0])),a=pk(t,l+32,o.add(a[1]),r.add(On(t,l+16))),[o,i]=[i,o],l+=64;while(l!==c);let d=Bh.add(o.and(255).shl(1));return l=u,a[0]=a[0].add(n-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),i=Pi(i.add(r).add(s[0]).add(On(t,l+8)),37).mul(d),r=Pi(r.add(s[1]).add(On(t,l+48)),42).mul(d),i=i.xor(a[1].mul(9)),r=r.add(s[0].mul(9).add(On(t,l+40))),o=Pi(o.add(a[0]),33).mul(d),s=pk(t,l,s[1].mul(d),i.add(a[0])),a=pk(t,l+32,o.add(a[1]),r.add(On(t,l+16))),[o,i]=[i,o],Pd(Pd(s[0],a[0],d).add(q2(r).mul(SX)).add(o),Pd(s[1],a[1],d).add(i),d)}function b1e(t,n){return n==="string"?Iy(t):ky([t],n)}function x1e(t,n){return t instanceof Float32Array&&n==="float32"||t instanceof Int32Array&&n==="int32"||t instanceof Uint8Array&&n==="bool"}function ky(t,n){if(n==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=$d(t)),G().getBool("DEBUG")&&F2(t,n),x1e(t,n))return t;if(n==null||n==="float32"||n==="complex64")return new Float32Array(t);if(n==="int32")return new Int32Array(t);if(n==="bool"){let e=new Uint8Array(t.length);for(let i=0;i<e.length;++i)Math.round(t[i])!==0&&(e[i]=1);return e}else throw new Error(`Unknown data type ${n}`)}function Gh(){return G().platform.now()}function v1e(t,n){return G().platform.fetch(t,n)}function Iy(t,n="utf-8"){return n=n||"utf-8",G().platform.encode(t,n)}function Ey(t,n="utf-8"){return n=n||"utf-8",G().platform.decode(t,n)}function ar(t){return G().platform.isTypedArray!=null?G().platform.isTypedArray(t):uk(t)}function $d(t,n=[],e=!1){if(n==null&&(n=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||kh(t)||t==null||ar(t)&&e)n.push(t);else if(Array.isArray(t)||ar(t))for(let i=0;i<t.length;++i)$d(t[i],n,e);else{let i=-1;for(let r of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(r)&&(i=Math.max(i,Number(r)));for(let r=0;r<=i;r++)$d(t[r],n,e)}return n}var hk=class{constructor(n,e){this.backendTimer=n,this.logger=e,e==null&&(this.logger=new K2)}profileKernel(n,e,i){let r,o=()=>{r=i()},s,a=Gh();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(o);else{o();for(let c of r)c.dataSync();s=Promise.resolve({kernelMs:Gh()-a})}if(G().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<r.length;c++){let u=r[c];u.data().then(d=>{_1e(d,u.dtype,n)})}return{kernelName:n,outputs:r,inputs:e,timeMs:s.then(c=>c.kernelMs),extraInfo:s.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(n){let{kernelName:e,outputs:i,timeMs:r,inputs:o,extraInfo:s}=n;i.forEach(a=>{Promise.all([a.data(),r,s]).then(l=>{this.logger.logKernelProfile(e,a,l[0],l[1],o,l[2])})})}};function _1e(t,n,e){if(n!=="float32")return!1;for(let i=0;i<t.length;i++){let r=t[i];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${e}'`),!0}return!1}var K2=class{logKernelProfile(n,e,i,r,o,s){let a=typeof r=="number"?Sh(`${r}ms`,9):r.error,l=Sh(n,25),c=e.rank,u=e.size,d=Sh(e.shape.toString(),14),p="";for(let h in o){let m=o[h];if(m!=null){let g=m.shape||e.shape,f=g.length;p+=`${h}: ${f}D ${f>0?g:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${p}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function IX(t,n,e){let i={},r={};for(let l=0;l<n.length;l++)i[n[l].id]=!0;for(let l=0;l<t.length;l++){let c=t[l],u=c.inputs;for(let d in u){let p=u[d],h=!1;for(let m=0;m<n.length;m++)if(i[p.id]){c.outputs.forEach(g=>i[g.id]=!0),h=!0,r[c.id]=!0;break}if(h)break}}let o={};o[e.id]=!0;let s={};for(let l=t.length-1;l>=0;l--){let c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(o[c.outputs[d].id]){for(let p in u)o[u[p].id]=!0,s[c.id]=!0;break}}let a=[];for(let l=0;l<t.length;l++){let c=t[l];if(r[c.id]&&s[c.id]){let u={};for(let p in c.inputs){let h=c.inputs[p];i[h.id]&&(u[p]=h)}let d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function EX(t,n,e,i){for(let r=n.length-1;r>=0;r--){let o=n[r],s=[];if(o.outputs.forEach(l=>{let c=t[l.id];c!=null?s.push(c):s.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);let a=o.gradient(s);for(let l in o.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);let c=e(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);let u=o.inputs[l];if(!Uu(c.shape,u.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{let d=t[u.id];t[u.id]=i(d,c),d.dispose()}}}}var DX=20,T0=3,Y2=7;function AX(t,n,e,i){let r=Ba(n),o=w1e(t,n,e,r),s=n.length,a=mk(t,n,e,r,o),l=["Tensor"];return i&&(l.push(`  dtype: ${e}`),l.push(`  rank: ${s}`),l.push(`  shape: [${n}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function w1e(t,n,e,i){let r=Ht(n),o=i[i.length-1],s=new Array(o).fill(0),a=n.length,l=e==="complex64"?k0(t):t;if(a>1)for(let c=0;c<r/o;c++){let u=c*o;for(let d=0;d<o;d++)s[d]=Math.max(s[d],S0(l[u+d],0,e).length)}return s}function S0(t,n,e){let i;return Array.isArray(t)?i=`${parseFloat(t[0].toFixed(Y2))} + ${parseFloat(t[1].toFixed(Y2))}j`:Fg(t)?i=`'${t}'`:e==="bool"?i=NX(t):i=parseFloat(t.toFixed(Y2)).toString(),Sh(i,n)}function NX(t){return t===0?"false":"true"}function mk(t,n,e,i,r,o=!0){let s=e==="complex64"?2:1,a=n[0],l=n.length;if(l===0){if(e==="complex64"){let g=k0(t);return[S0(g[0],0,e)]}return e==="bool"?[NX(t[0])]:[t[0].toString()]}if(l===1){if(a>DX){let f=T0*s,y=Array.from(t.slice(0,f)),b=Array.from(t.slice((a-T0)*s,a*s));return e==="complex64"&&(y=k0(y),b=k0(b)),["["+y.map((v,_)=>S0(v,r[_],e)).join(", ")+", ..., "+b.map((v,_)=>S0(v,r[a-T0+_],e)).join(", ")+"]"]}return["["+(e==="complex64"?k0(t):Array.from(t)).map((f,y)=>S0(f,r[y],e)).join(", ")+"]"]}let c=n.slice(1),u=i.slice(1),d=i[0]*s,p=[];if(a>DX){for(let g=0;g<T0;g++){let f=g*d,y=f+d;p.push(...mk(t.slice(f,y),c,e,u,r,!1))}p.push("...");for(let g=a-T0;g<a;g++){let f=g*d,y=f+d;p.push(...mk(t.slice(f,y),c,e,u,r,g===a-1))}}else for(let g=0;g<a;g++){let f=g*d,y=f+d;p.push(...mk(t.slice(f,y),c,e,u,r,g===a-1))}let h=l===2?",":"";p[0]="["+(a>0?p[0]+h:"");for(let g=1;g<p.length-1;g++)p[g]=" "+p[g]+h;let m=`,
`;for(let g=2;g<l;g++)m+=`
`;return p[p.length-1]=" "+p[p.length-1]+"]"+(o?"":m),p}function k0(t){let n=[];for(let e=0;e<t.length;e+=2)n.push([t[e],t[e+1]]);return n}var tn=class{constructor(n,e,i){if(this.dtype=e,this.shape=n.slice(),this.size=Ht(n),i!=null){let r=i.length;A(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=i||z1(e,this.size),this.strides=Ba(n)}set(n,...e){e.length===0&&(e=[0]),A(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let i=this.locToIndex(e);this.values[i]=n}get(...n){n.length===0&&(n=[0]);let e=0;for(let r of n){if(r<0||r>=this.shape[e]){let o=`Requested out of range element at ${n}.   Buffer shape=${this.shape}`;throw new Error(o)}e++}let i=n[n.length-1];for(let r=0;r<n.length-1;++r)i+=this.strides[r]*n[r];return this.values[i]}locToIndex(n){if(this.rank===0)return 0;if(this.rank===1)return n[0];let e=n[n.length-1];for(let i=0;i<n.length-1;++i)e+=this.strides[i]*n[i];return e}indexToLoc(n){if(this.rank===0)return[];if(this.rank===1)return[n];let e=new Array(this.shape.length);for(let i=0;i<e.length-1;++i)e[i]=Math.floor(n/this.strides[i]),n-=e[i]*this.strides[i];return e[e.length-1]=n,e}get rank(){return this.shape.length}toTensor(){return Ys().makeTensor(this.values,this.shape,this.dtype)}},Ys=null,Dy=null,C1e=null;function MX(t){Ys=t}function RX(t){Dy=t}function OX(t){C1e=t}var Kt=class{constructor(n,e,i,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=n.slice(),this.dtype=e||"float32",this.size=Ht(n),this.strides=Ba(n),this.dataId=i,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return H(this,null,function*(){let n=yield this.data();return Dy.buffer(this.shape,this.dtype,n)})}bufferSync(){return Dy.buffer(this.shape,this.dtype,this.dataSync())}array(){return H(this,null,function*(){let n=yield this.data();return Th(this.shape,n,this.dtype==="complex64")})}arraySync(){return Th(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return H(this,null,function*(){this.throwIfDisposed();let n=Ys().read(this.dataId);if(this.dtype==="string"){let e=yield n;try{return e.map(i=>Ey(i))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return n})}dataToGPU(n){return this.throwIfDisposed(),Ys().readToGPU(this.dataId,n)}dataSync(){this.throwIfDisposed();let n=Ys().readSync(this.dataId);if(this.dtype==="string")try{return n.map(e=>Ey(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return n}bytes(){return H(this,null,function*(){this.throwIfDisposed();let n=yield Ys().read(this.dataId);return this.dtype==="string"?n:new Uint8Array(n.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),Ys().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(n=!1){return Dy.print(this,n)}clone(){return this.throwIfDisposed(),Dy.clone(this)}toString(n=!1){let e=this.dataSync();return AX(e,this.shape,this.dtype,n)}cast(n){return this.throwIfDisposed(),Dy.cast(this,n)}variable(n=!0,e,i){return this.throwIfDisposed(),Ys().makeVariable(this,n,e,i)}};Object.defineProperty(Kt,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function L(){return b0("Tensor",()=>Kt)}L();var Pc=class extends Kt{constructor(n,e,i,r){super(n.shape,n.dtype,n.dataId,r),this.trainable=e,this.name=i}assign(n){if(n.dtype!==this.dtype)throw new Error(`dtype of the new value (${n.dtype}) and previous value (${this.dtype}) must match`);if(!Uu(n.shape,this.shape))throw new Error(`shape of the new value (${n.shape}) and previous value (${this.shape}) must match`);Ys().disposeTensor(this),this.dataId=n.dataId,Ys().incRef(this,null)}dispose(){Ys().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(Pc,Symbol.hasInstance,{value:t=>t instanceof Kt&&t.assign!=null&&t.assign instanceof Function});var FX=function(t){return t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64",t}(FX||{}),LX=function(t){return t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64",t}(LX||{}),PX=function(t){return t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64",t}(PX||{}),$X=function(t){return t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64",t}($X||{}),T1e={float32:PX,int32:FX,bool:LX,complex64:$X};function ni(t,n){if(t==="string"||n==="string"){if(t==="string"&&n==="string")return"string";throw new Error(`Can not upcast ${t} with ${n}`)}return T1e[t][n]}function Uh(t){return ni(t,"int32")}function fk(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function gk(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}function Ct(t,n){if(t.dtype===n.dtype)return[t,n];let e=ni(t.dtype,n.dtype);return[t.cast(e),n.cast(e)]}function yk(t){let n=[];return VX(t,n,new Set),n}function VX(t,n,e){if(t==null)return;if(t instanceof Kt){n.push(t);return}if(!S1e(t))return;let i=t;for(let r in i){let o=i[r];e.has(o)||(e.add(o),VX(o,n,e))}}function S1e(t){return Array.isArray(t)||typeof t=="object"}function Q2(t){return t.kernelName!=null}var bk=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(n=>n.name)))}}}dispose(){for(let n in this.registeredVariables)this.registeredVariables[n].dispose()}},I1e=(()=>{class t{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new bk}ready(){return H(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let i=0;i<e.length;i++){let r=e[i];if(yield this.initializeBackend(r).success){yield this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:i}=this.initializeBackendsAndReturnBest();if(i)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:i}=this.initializeBackend(e);if(i)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,i,r=1){return e in this.registryFactory?(Wa(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:i,priority:r},!0)}setBackend(e){return H(this,null,function*(){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:i,asyncInit:r}=this.initializeBackend(e);if(!(r?yield i:i))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new hk(this.backendInstance),!0})}setupRegisteredKernels(){H2(this.backendName).forEach(i=>{i.setupFunc!=null&&i.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){H2(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){let i=this.registryFactory[e];if(i==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let r=i.factory();if(r&&!(r instanceof Ul)&&typeof r.then=="function"){let o=++this.pendingBackendInitId,s=r.then(a=>o<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,Wa(`Initialization of backend ${e} failed`),Wa(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Wa(`Initialization of backend ${e} failed`),Wa(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,i)=>this.registryFactory[i].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let i=0;i<e.length;i++){let r=e[i],{success:o,asyncInit:s}=this.initializeBackend(r);if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,i){let r=this.state.tensorInfo.get(i),o=r.backend,s=this.readSync(i),a=o.refCount(i);o.disposeData(i,!0),r.backend=e,e.move(i,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,i){let r=null;if(i==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");i=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof i!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=i(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,i,r){e();try{let o=r();return i(),o}catch(o){throw i(),o}}nextTensorId(){return t.nextTensorId++}nextVariableId(){return t.nextVariableId++}clone(e){let i=I.runKernel(Ga,{x:e}),r={x:e},o=a=>({x:()=>{let l="float32",c={x:a},u={dtype:l};return I.runKernel(za,c,u)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[i],o,s,{}),i}runKernel(e,i,r){if(this.backendName==null&&this.backend,!(G2(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:i,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,i,r){let o=this.backend.numDataIds(),s=0;r.forEach(c=>{s+=c.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=o-i-s-a;if(l>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${l} data ids) after running '${e}'`)}runKernelFunc(e){let i,r=[],o=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let l;this.backendName==null&&this.backend;let c,u=Q2(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(Q2(e)){let{kernelName:g,inputs:f,attrs:y}=e;this.backendName==null&&this.backend;let b=G2(g,this.backendName);A(b!=null,()=>`Cannot find registered kernel '${g}' for backend '${this.backendName}'`),l=()=>{let v=this.backend.numDataIds();c=b.kernelFunc({inputs:f,attrs:y,backend:this.backend});let _=Array.isArray(c)?c:[c];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(g,v,_);let w=_.map(T=>T.rank!=null?T:this.makeTensorFromTensorInfo(T));if(o){let T=this.getTensorsForGradient(g,f,w);r=this.saveTensorsForBackwardMode(T)}return w}}else{let{forwardFunc:g}=e,f=y=>{o&&(r=y.map(b=>this.keep(this.clone(b))))};l=()=>{let y=this.backend.numDataIds();c=this.tidy(()=>g(this.backend,f));let b=Array.isArray(c)?c:[c];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(u,y,b),b}}let{inputs:d,attrs:p}=e,h=Q2(e)?null:e.backwardsFunc,m;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?i=l():(m=this.profiler.profileKernel(u,d,()=>l()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),i=m.outputs)}),o&&this.addTapeNode(u,d,i,h,r,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map(g=>d[g]!=null?d[g].shape:null),outputShapes:i.map(g=>g.shape),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(c)?i:i[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,i,r){let o=U2(e);if(o!=null){let s=o.inputsToSave||[],a=o.outputsToSave||[],l;o.saveAllInputs?(A(Array.isArray(i),()=>"saveAllInputs is true, expected inputs to be an array."),l=Object.keys(i).map(u=>i[u])):l=s.map(u=>i[u]);let c=r.filter((u,d)=>a[d]);return l.concat(c)}return[]}makeTensor(e,i,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let s=e;r==="string"&&Fg(e[0])&&(s=e.map(c=>Iy(c)));let a=o.write(s,i,r),l=new Kt(i,r,a,this.nextTensorId());if(this.trackTensor(l,o),r==="string"){let c=this.state.tensorInfo.get(a),u=P2(s);this.state.numBytes+=u-c.bytes,c.bytes=u}return l}makeTensorFromDataId(e,i,r,o){r=r||"float32";let s={dataId:e,shape:i,dtype:r};return this.makeTensorFromTensorInfo(s,o)}makeTensorFromTensorInfo(e,i){let{dataId:r,shape:o,dtype:s}=e,a=new Kt(o,s,r,this.nextTensorId());return this.trackTensor(a,i),a}makeVariable(e,i=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));let s=new Pc(e,i,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,i){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*Og(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:i||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof Pc||this.track(e)}incRef(e,i){this.trackTensor(e,i),this.backend.incRef(e.dataId)}removeDataId(e,i){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===i&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let i=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=i.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let r=e.size*Og(e.dtype);this.state.numBytes-=r}i.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,i.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let i=this.state.registeredVariables[e];this.disposeVariable(i)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){return H(this,null,function*(){this.state.profiling=!0;let i=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-i,this.state.activeProfile.newTensors=this.state.numTensors-r;for(let o of this.state.activeProfile.kernels)o.kernelTimeMs=yield o.kernelTimeMs,o.extraInfo=yield o.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,i,r,o,s,a){let l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:i,outputs:r,saved:s},c=U2(e);c!=null&&(o=c.gradFunc),o!=null&&(l.gradient=u=>(u=u.map((d,p)=>{if(d==null){let h=r[p],m=$g(h.size,h.dtype);return this.makeTensor(m,h.shape,h.dtype)}return d}),o(u.length>1?u:u[0],s,a))),this.state.activeTape.push(l)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let i={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(i.name=e),this.state.scopeStack.push(i),this.state.activeScope=i}endScope(e){let i=yk(e),r=new Set(i.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}let o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],i.forEach(s=>{!s.kept&&s.scopeId===o.id&&this.track(s)})}gradients(e,i,r,o=!1){if(A(i.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));A(s instanceof Kt,()=>"The result y returned by f() must be a tensor.");let a=IX(this.state.activeTape,i,s);if(!o&&a.length===0&&i.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let l={};l[s.id]=r??E1e(s.shape),EX(l,a,u=>this.tidy(u),D1e);let c=i.map(u=>l[u.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(u=>{for(let d of u.saved)d.dispose()}),this.state.activeTape=null),{value:s,grads:c}})}customGrad(e){return A(Lg(e),()=>"The f passed in customGrad(f) must be a function."),(...i)=>{A(i.every(l=>l instanceof Kt),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r,o={};i.forEach((l,c)=>{o[c]=l});let s=(l,c)=>(r=e(...i,c),A(r.value instanceof Kt,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),A(Lg(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(l,c)=>{let u=r.gradFunc(l,c),d=Array.isArray(u)?u:[u];A(d.length===i.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),A(d.every(h=>h instanceof Kt),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let p={};return d.forEach((h,m)=>{p[m]=()=>h}),p};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,i){return this.state.tensorInfo.get(e).backend.readToGPU(e,i)}time(e){return H(this,null,function*(){let i=Gh(),r=yield this.backend.time(e);return r.wallMs=Gh()-i,r})}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new bk;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return t.nextTensorId=0,t.nextVariableId=0,t})();function E1e(t){let n=g0(Ht(t),"float32");return I.makeTensor(n,t,"float32")}function Z2(){let t=B2();if(t._tfengine==null){let n=new y0(t);t._tfengine=new I1e(n)}return oX(t._tfengine.ENV),MX(()=>t._tfengine),t._tfengine}var I=Z2();function D1e(t,n){let e={a:t,b:n};return I.runKernel(Xs,e)}var Vd={};Ko(Vd,{isBrowser:()=>eL,isMobile:()=>M1e,mockIsMobile:()=>N1e});function A1e(){return typeof navigator<"u"&&navigator!=null}var J2;function N1e(t){J2=t}function M1e(t){if(J2!==void 0)return J2;if(t||A1e()){if(t||(t=navigator),t.product==="ReactNative")return!0;let n=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!n){let e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))}return!1}function eL(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Kr=G();Kr.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Kr.registerFlag("IS_BROWSER",()=>eL());Kr.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Kr.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Kr.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Kr.registerFlag("PROD",()=>!1);Kr.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Kr.getBool("DEBUG"));Kr.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Kr.registerFlag("IS_TEST",()=>!1);Kr.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Kr.getBool("DEBUG"));Kr.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Kr.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Kr.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);function Hh(t,n){let e=t;if(ar(t))return n==="string"?[]:[t.length];if(fk(t)){let r=t.channels||"RGBA";return[t.height,t.width*r.length]}else if(gk(t))return[t.buffer.size/(n==null?4:Og(n))];if(!Array.isArray(t))return[];let i=[];for(;Array.isArray(e)||ar(e)&&n!=="string";)i.push(e.length),e=e[0];return Array.isArray(t)&&G().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&zX(t,i,[]),i}function zX(t,n,e){if(e=e||[],!Array.isArray(t)&&!ar(t)){A(n.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);return}A(n.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${t.length} elements`),A(t.length===n[0],()=>`Element arr[${e.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let i=n.slice(1);for(let r=0;r<t.length;++r)zX(t[r],i,e.concat(r))}function BX(t,n,e,i){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==n||t==="numeric"&&n==="string")throw new Error(`Argument '${e}' passed to '${i}' must be ${t} tensor, but got ${n} tensor`)}}function S(t,n,e,i="numeric"){if(t instanceof L())return BX(i,t.dtype,n,e),t;let r=Hu(t);if(r!=="string"&&["bool","int32","float32"].indexOf(i)>=0&&(r=i),BX(i,r,n,e),t==null||!ar(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){let l=t==null?"null":t.constructor.name;throw new Error(`Argument '${n}' passed to '${e}' must be a Tensor or TensorLike, but got '${l}'`)}let o=Hh(t,r);!ar(t)&&!Array.isArray(t)&&(t=[t]);let a=r!=="string"?ky(t,r):$d(t,[],!0);return I.makeTensor(a,o,r)}function xk(t,n,e,i="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${n} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((o,s)=>S(o,`${n}[${s}]`,e,i))}var R1e="__op";function E(t){let n=Object.keys(t);if(n.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${n.length} keys.`);let e=n[0],i=t[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+R1e;let r=(...o)=>{I.startScope(e);try{let s=i(...o);return kh(s)&&console.error("Cannot return a Promise inside of tidy."),I.endScope(s),s}catch(s){throw I.endScope(null),s}};return Object.defineProperty(r,"name",{value:e,configurable:!0}),r}function O1e(t,n){let e=S(t,"real","complex"),i=S(n,"imag","complex");B1(e.shape,i.shape,`real and imag shapes, ${e.shape} and ${i.shape}, must match in call to tf.complex().`);let r={real:e,imag:i};return I.runKernel(Wg,r)}var Vo=E({complex_:O1e});function Bd(t,n,e,i){if(i==null)i=Hu(t);else if(i==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(gk(t)||fk(t)){if(i!=="float32"&&i!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${i}.`);return I.backend.createTensorFromGPUData(t,n||e,i)}if(!ar(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(n!=null){Li(n);let r=Ht(n),o=Ht(e);A(r===o,()=>`Based on the provided shape, [${n}], the tensor should have ${r} values but has ${o}`);for(let s=0;s<e.length;++s){let a=e[s],l=s===e.length-1?a!==Ht(n.slice(s)):!0;A(e[s]===n[s]||!l,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${n}). `)}}return!ar(t)&&!Array.isArray(t)&&(t=[t]),n=n||e,t=i!=="string"?ky(t,i):$d(t,[],!0),I.makeTensor(t,n,i)}function $i(t,n,e){let i=Hh(t,e);return Bd(t,n,i,e)}var $c={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};var Yi=class t{static join(n){return new t(n).slice()}constructor(n){if(this.shards=[],this.previousShardIndex=0,n==null||(n instanceof Array||(n=[n]),n=n.map(i=>ar(i)?i.buffer:i),n.length===0))return;this.bufferUniformSize=n[0].byteLength;let e=0;for(let i=0;i<n.length;i++){let r=n[i];i!==n.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let o=e+r.byteLength;this.shards.push({buffer:r,start:e,end:o}),e=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(n=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(n=isNaN(Number(n))?0:n,e=isNaN(Number(e))?0:e,n=Math.max(0,n),e=Math.min(this.byteLength,e),e<=n)return new ArrayBuffer(0);let i=this.findShardForByte(n);if(i===-1)throw new Error(`Could not find start shard for byte ${n}`);let r=e-n,o=new ArrayBuffer(r),s=new Uint8Array(o),a=0;for(let l=i;l<this.shards.length;l++){let c=this.shards[l],d=n+a-c.start,p=a,m=Math.min(e,c.end)-c.start,g=new Uint8Array(c.buffer,d,m-d);if(s.set(g,p),a+=g.length,e<c.end)break}return o}findShardForByte(n){if(this.shards.length===0||n<0||n>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(n/this.bufferUniformSize),this.previousShardIndex;function e(r){return n<r.start?-1:n>=r.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let i=F1e(this.shards,e);return i===-1?-1:(this.previousShardIndex=i,this.previousShardIndex)}};function F1e(t,n){let e=0,i=t.length;for(;e<=i;){let r=Math.floor((i-e)/2)+e,o=n(t[r]);if(o===0)return r;o<0?i=r:e=r+1}return-1}function L1e(t){G().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}OX(L1e);function hs(){return I}function I0(){return I.memory()}function W(t,n){return I.tidy(t,n)}function it(t){yk(t).forEach(e=>e.dispose())}function _i(t){return I.keep(t)}function GX(){return I.backendName}function vk(t,n,e=1){return I.registerBackend(t,n,e)}function _k(){return I.backend}var zd=4;function WX(t,n){return H(this,null,function*(){let e=[],i=[],r=Array.isArray(t)?t.map(s=>s.name):Object.keys(t);for(let s=0;s<r.length;++s){let a=r[s],l=Array.isArray(t)?t[s].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);let c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){let u=new Promise(d=>H(null,null,function*(){let p=yield l.bytes(),h=p.reduce((f,y)=>f+y.length,0)+zd*p.length,m=new Uint8Array(h),g=0;for(let f=0;f<p.length;f++){let y=p[f],b=new Uint8Array(new Uint32Array([y.length]).buffer);m.set(b,g),g+=zd,m.set(y,g),g+=y.length}d(m)}));i.push(u)}else i.push(l.data());n!=null&&(c.group=n),e.push(c)}let o=yield Promise.all(i);return{data:V1e(o),specs:e}})}function wk(t,n){let e=new Yi(t),i={},r=0;for(let o of n){let s=P1e(o,(a,l)=>e.slice(r+a,r+l));i[o.name]=jX(o,e.slice(r,r+s)),r+=s}return i}function P1e(t,n){let e=Ht(t.shape),i;if("quantization"in t){let r=t.quantization;i=$c[r.dtype]}else if(t.dtype==="string"){let r=0;for(let o=0;o<e;o++)r+=zd+new Uint32Array(n(r,r+zd))[0];return r}else i=$c[t.dtype];return e*i}function $1e(t,n){return H(this,null,function*(){let e=Ht(t.shape),i;if("quantization"in t){let r=t.quantization;i=$c[r.dtype]}else if(t.dtype==="string"){let r=0;for(let o=0;o<e;o++)r+=zd+new Uint32Array(yield n(r,r+zd))[0];return r}else i=$c[t.dtype];return e*i})}function jX(t,n){let e=t.name,i=t.dtype,r=t.shape,o=Ht(r),s,a=0;if("quantization"in t){let l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(i!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${i}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let c=$c[l.dtype],u=l.dtype==="uint8"?new Uint8Array(n):new Uint16Array(n);if(i==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){s=new Float32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=p*l.scale+l.min}}else if(l.dtype==="float16")s=U1e()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(i==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);s=new Int32Array(u.length);for(let d=0;d<u.length;d++){let p=u[d];s[d]=Math.round(p*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${e}': ${i}`);a+=o*c}else if(i==="string"){let l=Ht(t.shape);s=[];for(let c=0;c<l;c++){let u=new Uint32Array(n.slice(a,a+zd))[0];a+=zd;let d=new Uint8Array(n.slice(a,a+u));s.push(d),a+=u}}else{let l=$c[i];if(i==="float32")s=new Float32Array(n);else if(i==="int32")s=new Int32Array(n);else if(i==="bool")s=new Uint8Array(n);else if(i==="complex64"){s=new Float32Array(n);let c=new Float32Array(s.length/2),u=new Float32Array(s.length/2);for(let m=0;m<c.length;m++)c[m]=s[m*2],u[m]=s[m*2+1];let d=$i(c,r,"float32"),p=$i(u,r,"float32"),h=Vo(d,p);return d.dispose(),p.dispose(),h}else throw new Error(`Unsupported dtype in weight '${e}': ${i}`);a+=o*l}return $i(s,r,i)}function UX(t,n,e){return H(this,null,function*(){let i=new Uint8Array(n);for(;i.byteLength<e;){let{done:r,value:o}=yield t.read();if(r&&o==null){let a=e-i.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(i.length+o.byteLength);s.set(i,0),s.set(new Uint8Array(o),i.length),i=s}return i.buffer})}function tL(t,n){return H(this,null,function*(){let e={},i=t.getReader(),r=new ArrayBuffer(0);for(let o of n){let s=yield $1e(o,(c,u)=>H(null,null,function*(){return r=yield UX(i,r,u),r.slice(c,u)}));r=yield UX(i,r,s);let a=r.slice(0,s);r=r.slice(s);let l=jX(o,a);if(e[o.name]=l,GX()==="webgpu"){let c=_k();"uploadToGPU"in c&&Ht(l.shape)>=G().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return e})}function V1e(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let n=0,e=[];t.forEach(o=>{if(n+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});let i=new Uint8Array(n),r=0;return e.forEach(o=>{i.set(new Uint8Array(o.buffer),r),r+=o.byteLength}),i.buffer}var nL=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function HX(t){return nL?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function qX(t){if(nL)return Buffer.from(t).toString("base64");let n=new Uint8Array(t),e="";for(let i=0,r=n.length;i<r;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function XX(t){if(nL){let i=Buffer.from(t,"base64");return i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength)}let n=atob(t),e=new Uint8Array(n.length);for(let i=0;i<n.length;++i)e.set([n.charCodeAt(i)],i);return e.buffer}function KX(t){return Yi.join(t)}function iL(t){let n="/";for(t=t.trim();t.endsWith(n);)t=t.slice(0,t.length-1);let e=t.split(n);return e[e.length-1]}function Ck(t,n){let e={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};return t.signature!=null&&(e.signature=t.signature),t.userDefinedMetadata!=null&&(e.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(e.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(e.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(e.trainingConfig=t.trainingConfig),e}function rL(t,n,e){let i={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(i.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!n)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");i.weightSpecs=n,i.weightData=e}return t.signature!=null&&(i.signature=t.signature),t.userDefinedMetadata!=null&&(i.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(i.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(i.initializerSignature=t.initializerSignature),i}function Ay(t,n){return H(this,null,function*(){let e,i;return t.weightsManifest!=null&&([e,i]=yield n(t.weightsManifest)),rL(t,e,i)})}function ja(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:HX(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:HX(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new Yi(t.weightData).byteLength}}function E0(t){let n=[];for(let e of t)n.push(...e.weights);return n}function B1e(){let t=e=>{let i=e<<13,r=0;for(;(i&8388608)===0;)r-=8388608,i<<=1;return i&=-8388609,r+=947912704,i|r},n=new Uint32Array(2048);n[0]=0;for(let e=1;e<1024;e++)n[e]=t(e);for(let e=1024;e<2048;e++)n[e]=939524096+(e-1024<<13);return n}function z1e(){let t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let n=1;n<31;n++)t[n]=n<<23;for(let n=33;n<63;n++)t[n]=2147483648+(n-32<<23);return t}function G1e(){let t=new Uint32Array(64);for(let n=0;n<64;n++)t[n]=1024;return t[0]=t[32]=0,t}function U1e(){let t=B1e(),n=z1e(),e=G1e();return i=>{let r=new ArrayBuffer(4*i.length),o=new Uint32Array(r);for(let s=0;s<i.length;s++){let a=i[s],l=t[e[a>>10]+(a&1023)]+n[a>>10];o[s]=l}return new Float32Array(r)}}var wi=class t{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerSaveRouter(n){t.getInstance().saveRouters.push(n)}static registerLoadRouter(n){t.getInstance().loadRouters.push(n)}static getSaveHandlers(n){return t.getHandlers(n,"save")}static getLoadHandlers(n,e){return t.getHandlers(n,"load",e)}static getHandlers(n,e,i){let r=[];return(e==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(s=>{let a=s(n,i);a!==null&&r.push(a)}),r}},YX=t=>wi.registerSaveRouter(t),QX=t=>wi.registerLoadRouter(t),ZX=t=>wi.getSaveHandlers(t),JX=(t,n)=>wi.getLoadHandlers(t,n);var oL="tensorflowjs",sL=1,Wh="models_store",Gd="model_info_store";function eK(){if(!G().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let t=typeof window>"u"?self:window,n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(n==null)throw new Error("The current browser does not appear to support IndexedDB.");return n}function aL(t){let n=t.result;n.createObjectStore(Wh,{keyPath:"modelPath"}),n.createObjectStore(Gd,{keyPath:"modelPath"})}var jh=(()=>{class t{constructor(e){if(this.indexedDB=eK(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){return H(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)})}load(){return H(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(e,i){return new Promise((r,o)=>{let s=this.indexedDB.open(oL,sL);s.onupgradeneeded=()=>aL(s),s.onsuccess=()=>{let a=s.result;if(i==null){let l=a.transaction(Wh,"readonly"),u=l.objectStore(Wh).get(this.modelPath);u.onsuccess=()=>{if(u.result==null)return a.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(u.result.modelArtifacts)},u.onerror=d=>(a.close(),o(u.error)),l.oncomplete=()=>a.close()}else{i.weightData=Yi.join(i.weightData);let l=ja(i),c=a.transaction(Gd,"readwrite"),u=c.objectStore(Gd),d;try{d=u.put({modelPath:this.modelPath,modelArtifactsInfo:l})}catch(h){return o(h)}let p;d.onsuccess=()=>{p=a.transaction(Wh,"readwrite");let h=p.objectStore(Wh),m;try{m=h.put({modelPath:this.modelPath,modelArtifacts:i,modelArtifactsInfo:l})}catch(g){return o(g)}m.onsuccess=()=>r({modelArtifactsInfo:l}),m.onerror=g=>{u=c.objectStore(Gd);let f=u.delete(this.modelPath);f.onsuccess=()=>(a.close(),o(m.error)),f.onerror=y=>(a.close(),o(m.error))}},d.onerror=h=>(a.close(),o(d.error)),c.oncomplete=()=>{p==null?a.close():p.oncomplete=()=>a.close()}}},s.onerror=a=>o(s.error)})}}return t.URL_SCHEME="indexeddb://",t})();var tK=t=>G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(jh.URL_SCHEME)?H1e(t.slice(jh.URL_SCHEME.length)):null;wi.registerSaveRouter(tK);wi.registerLoadRouter(tK);function H1e(t){return new jh(t)}function W1e(t){return t.startsWith(jh.URL_SCHEME)?t.slice(jh.URL_SCHEME.length):t}var Tk=class{constructor(){this.indexedDB=eK()}listModels(){return H(this,null,function*(){return new Promise((n,e)=>{let i=this.indexedDB.open(oL,sL);i.onupgradeneeded=()=>aL(i),i.onsuccess=()=>{let r=i.result,o=r.transaction(Gd,"readonly"),a=o.objectStore(Gd).getAll();a.onsuccess=()=>{let l={};for(let c of a.result)l[c.modelPath]=c.modelArtifactsInfo;n(l)},a.onerror=l=>(r.close(),e(a.error)),o.oncomplete=()=>r.close()},i.onerror=r=>e(i.error)})})}removeModel(n){return H(this,null,function*(){return n=W1e(n),new Promise((e,i)=>{let r=this.indexedDB.open(oL,sL);r.onupgradeneeded=()=>aL(r),r.onsuccess=()=>{let o=r.result,s=o.transaction(Gd,"readwrite"),a=s.objectStore(Gd),l=a.get(n),c;l.onsuccess=()=>{if(l.result==null)return o.close(),i(new Error(`Cannot find model with path '${n}' in IndexedDB.`));{let u=a.delete(n),d=()=>{c=o.transaction(Wh,"readwrite");let h=c.objectStore(Wh).delete(n);h.onsuccess=()=>e(l.result.modelArtifactsInfo),h.onerror=m=>i(l.error)};u.onsuccess=d,u.onerror=p=>(d(),o.close(),i(l.error))}},l.onerror=u=>(o.close(),i(l.error)),s.oncomplete=()=>{c==null?o.close():c.oncomplete=()=>o.close()}},r.onerror=o=>i(r.error)})})}};var Vc="/",Ny="tensorflowjs_models",nK="info",j1e="model_topology",q1e="weight_specs",X1e="weight_data",K1e="model_metadata";function iK(t){return{info:[Ny,t,nK].join(Vc),topology:[Ny,t,j1e].join(Vc),weightSpecs:[Ny,t,q1e].join(Vc),weightData:[Ny,t,X1e].join(Vc),modelMetadata:[Ny,t,K1e].join(Vc)}}function rK(t){for(let n of Object.values(t))window.localStorage.removeItem(n)}function Y1e(t){let n=t.split(Vc);if(n.length<3)throw new Error(`Invalid key format: ${t}`);return n.slice(1,n.length-1).join(Vc)}function Q1e(t){return t.startsWith(qh.URL_SCHEME)?t.slice(qh.URL_SCHEME.length):t}var qh=(()=>{class t{constructor(e){if(!G().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=iK(this.modelPath)}save(e){return H(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let i=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=ja(e),s=Yi.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,i),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,qX(s));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:o}}catch{throw rK(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}})}load(){return H(this,null,function*(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let i={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);i.modelTopology=r;let o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);i.weightSpecs=o;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let l=JSON.parse(s);i.format=l.format,i.generatedBy=l.generatedBy,i.convertedBy=l.convertedBy,l.signature!=null&&(i.signature=l.signature),l.userDefinedMetadata!=null&&(i.userDefinedMetadata=l.userDefinedMetadata),l.modelInitializer!=null&&(i.modelInitializer=l.modelInitializer),l.initializerSignature!=null&&(i.initializerSignature=l.initializerSignature),l.trainingConfig!=null&&(i.trainingConfig=l.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return i.weightData=XX(a),i})}}return t.URL_SCHEME="localstorage://",t})();var oK=t=>G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(qh.URL_SCHEME)?Z1e(t.slice(qh.URL_SCHEME.length)):null;wi.registerSaveRouter(oK);wi.registerLoadRouter(oK);function Z1e(t){return new qh(t)}var Sk=class{constructor(){A(G().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),A(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return H(this,null,function*(){let n={},e=Ny+Vc,i=Vc+nK;for(let r=0;r<this.LS.length;++r){let o=this.LS.key(r);if(o.startsWith(e)&&o.endsWith(i)){let s=Y1e(o);n[s]=JSON.parse(this.LS.getItem(o))}}return n})}removeModel(n){return H(this,null,function*(){n=Q1e(n);let e=iK(n);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${n}'`);let i=JSON.parse(this.LS.getItem(e.info));return rK(e),i})}};var My="://",Qs=class t{constructor(){this.managers={}}static getInstance(){return t.instance==null&&(t.instance=new t),t.instance}static registerManager(n,e){A(n!=null,()=>"scheme must not be undefined or null."),n.endsWith(My)&&(n=n.slice(0,n.indexOf(My))),A(n.length>0,()=>"scheme must not be an empty string.");let i=t.getInstance();A(i.managers[n]==null,()=>`A model store manager is already registered for scheme '${n}'.`),i.managers[n]=e}static getManager(n){let e=t.getInstance().managers[n];if(e==null)throw new Error(`Cannot find model manager for scheme '${n}'`);return e}static getSchemes(){return Object.keys(t.getInstance().managers)}};function kk(t){if(t.indexOf(My)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${Qs.getSchemes().join(",")}`);return{scheme:t.split(My)[0],path:t.split(My)[1]}}function sK(t,n,e=!1){return H(this,null,function*(){A(t!==n,()=>`Old path and new path are the same: '${t}'`);let i=wi.getLoadHandlers(t);A(i.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),A(i.length<2,()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${t}.`);let r=i[0],o=wi.getSaveHandlers(n);A(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${n}.`),A(o.length<2,()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${n}.`);let s=o[0],a=kk(t).scheme,l=kk(t).path,c=a===kk(t).scheme,u=yield r.load();e&&c&&(yield Qs.getManager(a).removeModel(l));let d=yield s.save(u);return e&&!c&&(yield Qs.getManager(a).removeModel(l)),d.modelArtifactsInfo})}function aK(){return H(this,null,function*(){let t=Qs.getSchemes(),n={};for(let e of t){let i=yield Qs.getManager(e).listModels();for(let r in i){let o=e+My+r;n[o]=i[r]}}return n})}function lK(t){return H(this,null,function*(){let n=kk(t);return Qs.getManager(n.scheme).removeModel(n.path)})}function cK(t,n){return H(this,null,function*(){return sK(t,n,!1)})}function uK(t,n){return H(this,null,function*(){return sK(t,n,!0)})}var lL=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(n,e){return fetch(n,e)}now(){return performance.now()}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(n)}decode(n,e){return new TextDecoder(e).decode(n)}setTimeoutCustom(n,e){if(typeof window>"u"||!G().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(n,e);return}this.functionRefs.push(n),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",i=>{if(i.source===window&&i.data.name===this.messageName){i.stopPropagation();let r=this.functionRefs[i.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(n){return uk(n)}};if(G().get("IS_BROWSER")){G().setPlatform("browser",new lL);try{Qs.registerManager(qh.URL_SCHEME,new Sk)}catch{}try{Qs.registerManager(jh.URL_SCHEME,new Tk)}catch{}}var eke={importFetch:()=>pK()},cL;var uL=class{constructor(){this.util=hK(),this.textEncoder=new this.util.TextEncoder}fetch(n,e){return G().global.fetch!=null?G().global.fetch(n,e):(cL==null&&(cL=eke.importFetch()),cL(n,e))}now(){let n=process.hrtime();return n[0]*1e3+n[1]/1e6}encode(n,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(n)}decode(n,e){return n.length===0?"":new this.util.TextDecoder(e).decode(n)}isTypedArray(n){return this.util.types.isFloat32Array(n)||this.util.types.isInt32Array(n)||this.util.types.isUint8Array(n)||this.util.types.isUint8ClampedArray(n)}};G().get("IS_NODE")&&!G().get("IS_BROWSER")&&G().setPlatform("node",new uL);function Ge(t,n="float32",e){return n=n||"float32",Li(t),new tn(t,n,e)}function tke(t,n){let e=S(t,"x","cast");if(!L2(n))throw new Error(`Failed to cast to unknown dtype ${n}`);if(n==="string"&&e.dtype!=="string"||n!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");let i={x:e},r={dtype:n};return I.runKernel(za,i,r)}var ce=E({cast_:tke});function nke(t){let e={x:S(t,"x","clone","string_or_numeric")};return I.runKernel(Ga,e)}var vo=E({clone_:nke});function mK(t,n=!1){console.log(t.toString(n))}Z2();var ike={buffer:Ge,cast:ce,clone:vo,print:mK};RX(ike);function rke(t,n){let e=S(t,"a","add"),i=S(n,"b","add");[e,i]=Ct(e,i);let r={a:e,b:i};return I.runKernel(Xs,r)}var re=E({add_:rke});function oke(t,n){let e=S(t,"a","floorDiv"),i=S(n,"b","floorDiv");[e,i]=Ct(e,i);let r={a:e,b:i};return I.runKernel(lc,r)}var Ik=E({floorDiv_:oke});function ske(t,n){let e=S(t,"a","div"),i=S(n,"b","div");if([e,i]=Ct(e,i),e.dtype==="int32"&&i.dtype==="int32")return Ik(e,i);let r={a:e,b:i},o={};return I.runKernel(nc,r,o)}var _e=E({div_:ske});function ake(t,n){let e=S(t,"a","mul"),i=S(n,"b","mul");[e,i]=Ct(e,i);let r={a:e,b:i};return I.runKernel(bc,r)}var F=E({mul_:ake});function lke(t){let n=S(t,"x","abs");if(n.dtype==="complex64"){let e={x:n};return I.runKernel(Zu,e)}else{let e={x:n};return I.runKernel(Wu,e)}}var ii=E({abs_:lke});function cke(t){let e={x:S(t,"x","acos")};return I.runKernel(Wl,e)}var dL=E({acos_:cke});function uke(t){let e={x:S(t,"x","acosh")};return I.runKernel(jl,e)}var pL=E({acosh_:uke});function dke(t,n=null,e=!1){let r={x:S(t,"x","all","bool")},o={axis:n,keepDims:e};return I.runKernel(Bg,r,o)}var D0=E({all_:dke});function pke(t,n=null,e=!1){let r={x:S(t,"x","any","bool")},o={axis:n,keepDims:e};return I.runKernel(zg,r,o)}var Oy=E({any_:pke});function hke(t,n=0){let i={x:S(t,"x","argMax")},r={axis:n};return I.runKernel(ju,i,r)}var Bc=E({argMax_:hke});function mke(t,n=0){let i={x:S(t,"x","argMin")},r={axis:n};return I.runKernel(qu,i,r)}var fK=E({argMin_:mke});function fke(t){let e={x:S(t,"x","asin")};return I.runKernel(ql,e)}var hL=E({asin_:fke});function gke(t){let e={x:S(t,"x","asinh")};return I.runKernel(Xl,e)}var mL=E({asinh_:gke});function yke(t){let e={x:S(t,"x","atan")};return I.runKernel(Kl,e)}var fL=E({atan_:yke});function bke(t,n){let e=S(t,"a","atan2"),i=S(n,"b","atan2");[e,i]=Ct(e,i);let r={a:e,b:i};return I.runKernel(Ql,r)}var gK=E({atan2_:bke});function xke(t){let e={x:S(t,"x","atanh")};return I.runKernel(Yl,e)}var gL=E({atanh_:xke});function vke(t,n,e,i,r="NHWC",o){let s=t[3],a=[...n,s],l=bK(r);return Kh(t,a,e,o,i,null,null,l)}function bL(t,n,e,i,r,o,s="channelsLast"){let[a,l]=A0(n),c;if(s==="channelsLast")c=[a,l,t[3],t[3]];else if(s==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return Kh(t,c,e,i,r,o,!1,s)}function _ke(t,n,e,i,r,o,s="NDHWC"){let[a,l,c]=yL(n),u,d;if(s==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(s==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${s}`);return yK(t,u,e,i,r,!1,d,o)}function Kh(t,n,e,i,r,o,s=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);let[p,h,,m]=n,[g,f]=A0(e),[y,b]=A0(i),v=Fy(p,y),_=Fy(h,b),{padInfo:w,outHeight:T,outWidth:D}=Tke(r,c,u,g,f,v,_,o,a),N=s?m*d:m,O;return a==="channelsFirst"?O=[l,N,T,D]:a==="channelsLast"&&(O=[l,T,D,N]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:T,outWidth:D,outChannels:N,padInfo:w,strideHeight:g,strideWidth:f,filterHeight:p,filterWidth:h,effectiveFilterHeight:v,effectiveFilterWidth:_,dilationHeight:y,dilationWidth:b,inShape:t,outShape:O,filterShape:n}}function yK(t,n,e,i,r,o=!1,s="channelsLast",a){let[l,c,u,d,p]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[l,c,u,d,p]=t;else if(s==="channelsFirst")[l,p,c,u,d]=t;else throw new Error(`Unknown dataFormat ${s}`);let[h,m,g,,f]=n,[y,b,v]=yL(e),[_,w,T]=yL(i),D=Fy(h,_),N=Fy(m,w),O=Fy(g,T),{padInfo:P,outDepth:B,outHeight:K,outWidth:X}=Ske(r,c,u,d,y,b,v,D,N,O,a),Z=o?f*p:f,te;return s==="channelsFirst"?te=[l,Z,B,K,X]:s==="channelsLast"&&(te=[l,B,K,X,Z]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:u,inWidth:d,inChannels:p,outDepth:B,outHeight:K,outWidth:X,outChannels:Z,padInfo:P,strideDepth:y,strideHeight:b,strideWidth:v,filterDepth:h,filterHeight:m,filterWidth:g,effectiveFilterDepth:D,effectiveFilterHeight:N,effectiveFilterWidth:O,dilationDepth:_,dilationHeight:w,dilationWidth:T,inShape:t,outShape:te,filterShape:n}}function wke(t,n,e,i,r){i==null&&(i=xL(t,n,e));let o=t[0],s=t[1],a=N0((o-n+2*i)/e+1,r),l=N0((s-n+2*i)/e+1,r);return[a,l]}function Cke(t,n,e,i,r,o){r==null&&(r=xL(t,n[0],i[0]));let s=[0,0,0,e];for(let a=0;a<3;a++)t[a]+2*r>=n[a]&&(s[a]=N0((t[a]-n[a]+2*r)/i[a]+1,o));return s}function xL(t,n,e,i=1){let r=Fy(n,i);return Math.floor((t[0]*(e-1)-e+r)/2)}function A0(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function yL(t){return typeof t=="number"?[t,t,t]:t}function Fy(t,n){return n<=1?t:t+(t-1)*(n-1)}function Tke(t,n,e,i,r,o,s,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};let h=wke([n,e],o,i,t,a);u=h[0],d=h[1]}else if(t==="same"){u=Math.ceil(n/i),d=Math.ceil(e/r);let p=Math.max(0,(u-1)*i+o-n),h=Math.max(0,(d-1)*r+s-e),m=Math.floor(p/2),g=p-m,f=Math.floor(h/2),y=h-f;c={top:m,bottom:g,left:f,right:y,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((n-o+1)/i),d=Math.ceil((e-s+1)/r);else if(typeof t=="object"){let p=l==="channelsLast"?t[1][0]:t[2][0],h=l==="channelsLast"?t[1][1]:t[2][1],m=l==="channelsLast"?t[2][0]:t[3][0],g=l==="channelsLast"?t[2][1]:t[3][1];c={top:p,bottom:h,left:m,right:g,type:p===0&&h===0&&m===0&&g===0?"VALID":"EXPLICIT"},u=N0((n-o+p+h)/i+1,a),d=N0((e-s+m+g)/r+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function Ske(t,n,e,i,r,o,s,a,l,c,u){let d,p,h,m;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};let f=Cke([n,e,i,1],[a,l,c],1,[r,o,s],t,u);p=f[0],h=f[1],m=f[2]}else if(t==="same"){p=Math.ceil(n/r),h=Math.ceil(e/o),m=Math.ceil(i/s);let g=(p-1)*r+a-n,f=(h-1)*o+l-e,y=(m-1)*s+c-i,b=Math.floor(g/2),v=g-b,_=Math.floor(f/2),w=f-_,T=Math.floor(y/2),D=y-T;d={top:_,bottom:w,left:T,right:D,front:b,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:p,outHeight:h,outWidth:m}}function N0(t,n){if(!n)return Math.trunc(t);switch(n){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${n}`)}}function Bo(t){let[n,e,i]=A0(t);return n===1&&e===1&&i===1}function Vi(t,n){return Bo(t)||Bo(n)}function qa(t){return A0(t).every(n=>n>0)}function bK(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function mn(t,n,e){if(e!=null){if(typeof n=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);if(typeof n=="number")A(Hl(n),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${n}.`);else if(typeof n=="object")n.forEach(i=>{i.forEach(r=>{A(Hl(r),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${e} but got pad ${r}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${n}`)}}function kke(t,n){let i={x:S(t,"x","reshape","string_or_numeric")},r={shape:n};return I.runKernel(Td,i,r)}var $=E({reshape_:kke});function Ike(t,n,e,i,r){let o=S(t,"x","avgPool","float32"),s=1;A(Vi(e,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`);let a=o,l=!1;o.rank===3&&(l=!0,a=$(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),mn("avgPool",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r},d=I.runKernel(Xu,c,u);return d=ce(d,o.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Yh=E({avgPool_:Ike});function Eke(t,n,e,i,r,o="NDHWC"){let s=S(t,"x","avgPool3d","float32"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),A(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),A(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),mn("avgPool3d",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r,dataFormat:o},d=I.runKernel(Ku,c,u);return d=ce(d,a.dtype),l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var vL=E({avgPool3d_:Eke});function Dke(t,n=0){A(t.length>=1,()=>"Pass at least one tensor to concat");let e=xk(t,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),e.length===1)return vo(e[0]);let i=e,r={axis:n};return I.runKernel(Ju,i,r)}var xn=E({concat_:Dke});function Ake(t,n,e=!1,i=!1){let r=S(t,"a","matMul"),o=S(n,"b","matMul");[r,o]=Ct(r,o);let s={a:r,b:o},a={transposeA:e,transposeB:i};return I.runKernel(Yu,s,a)}var Wt=E({matMul_:Ake});function Nke(t){let e={x:S(t,"x","sigmoid","float32")};return I.runKernel(Dc,e)}var ms=E({sigmoid_:Nke});function Mke(t,n,e){let i=S(t,"x","slice","string_or_numeric");if(i.rank===0)throw new Error("Slicing scalar is not possible");let r={x:i},o={begin:n,size:e};return I.runKernel(Dd,r,o)}var Rt=E({slice_:Mke});function Rke(t){let e={x:S(t,"x","tanh","float32")};return I.runKernel(Fc,e)}var Qh=E({tanh_:Rke});function Oke(t,n,e){let i=S(t,"x","batchToSpaceND"),r=n.reduce((a,l)=>a*l);A(i.rank>=1+n.length,()=>`input rank is ${i.rank} but should be > than blockShape.length ${n.length}`),A(e.length===n.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${n.length}`),A(i.shape[0]%r===0,()=>`input tensor batch is ${i.shape[0]} but is not divisible by the product of the elements of blockShape ${n.join(" * ")} === ${r}`);let o={x:i},s={blockShape:n,crops:e};return I.runKernel(Qu,o,s)}var Ly=E({batchToSpaceND_:Oke});function xK(t){let n;return t.rank===0||t.rank===1?n=$(t,[1,1,1,t.size]):t.rank===2?n=$(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?n=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]):n=t,n}function Fke(t,n,e,i,r,o){o==null&&(o=.001);let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;i!=null&&(u=S(i,"offset","batchNorm")),A(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:xK(s),scale:c,offset:u,mean:a,variance:l},h={varianceEpsilon:o},m=I.runKernel(ad,p,h);return $(m,s.shape)}var Ud=E({batchNorm_:Fke});function Lke(t,n,e,i,r,o){let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;return i!=null&&(u=S(i,"offset","batchNorm")),A(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),A(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),A(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&A(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&A(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Ud(s,a,l,u,c,o)}var _L=E({batchNorm2d_:Lke});function Pke(t,n,e,i,r,o){let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;return i!=null&&(u=S(i,"offset","batchNorm")),A(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),A(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),A(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&A(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&A(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Ud(s,a,l,u,c,o)}var wL=E({batchNorm3d_:Pke});function $ke(t,n,e,i,r,o){let s=S(t,"x","batchNorm"),a=S(n,"mean","batchNorm"),l=S(e,"variance","batchNorm"),c;r!=null&&(c=S(r,"scale","batchNorm"));let u;return i!=null&&(u=S(i,"offset","batchNorm")),A(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),A(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),A(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&A(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&A(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Ud(s,a,l,u,c,o)}var CL=E({batchNorm4d_:$ke});function Vke(t,n,e){let i=S(t,"x","bincount"),r=S(n,"weights","bincount");A(i.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${i.dtype}`),A(e>=0,()=>`size must be non-negative, but got ${e}.`),A(r.size===i.size||r.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${i.shape}, weights shape: ${r.shape}.`);let o={x:i,weights:r},s={size:e};return I.runKernel(Hg,o,s)}var vK=E({bincount_:Vke});function Bke(t,n){let e=S(t,"broadcastTo","x"),i=e.shape;if(Li(n),n.length<e.rank)throw new Error(`broadcastTo(): shape.length=${n.length} < input.rank=${e.rank}.`);if(n.length>e.rank){let c=e.shape.slice();for(;c.length<n.length;)c.unshift(1);e=$(e,c)}let r=e.shape,o=Array.from(n);for(let c=n.length-1;c>=0;c--)if(r[c]===n[c])o[c]=1;else if(e.shape[c]!==1)throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${n}].`);if(o.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return vo(e);let a={x:e},l={reps:o};return I.runKernel(Ua,a,l)}var zc=E({broadcastTo_:Bke});function zke(t){let e={x:S(t,"x","ceil","float32")};return I.runKernel(Zl,e)}var TL=E({ceil_:zke});function Gc(t,n,e){Li(t),e=e||Hu(n);let i={shape:t,value:n,dtype:e};return I.runKernel(ry,{},i)}function Gke(t,n,e){let i=S(t,"x","clipByValue");if(A(n<=e,()=>`Error in clip: min (${n}) must be less than or equal to max (${e}).`),n===e)return Gc(i.shape,n,i.dtype);let r={x:i},o={clipValueMin:n,clipValueMax:e};return I.runKernel(Jl,r,o)}var mi=E({clipByValue_:Gke});function Uke(t){return xn(t,0)}var SL=E({concat1d_:Uke});function Hke(t,n){return xn(t,n)}var kL=E({concat2d_:Hke});function Wke(t,n){return xn(t,n)}var IL=E({concat3d_:Wke});function jke(t,n){return xn(t,n)}var EL=E({concat4d_:jke});function qke(t,n,e,i,r="NHWC",o=[1,1],s){let a=S(t,"x","conv2d","float32"),l=S(n,"filter","conv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),A(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),mn("conv2d",i,s);let d=r==="NHWC"?c.shape[3]:c.shape[1];A(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),A(Vi(e,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),A(qa(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),A(qa(e),()=>"Error in conv2D: Strides should be larger than 0.");let p={x:c,filter:l},h={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s},m=I.runKernel(ed,p,h);return u?$(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var _o=E({conv2d_:qke});function Xke(t,n,e,i,r="NWC",o=1,s){let a=S(t,"x","conv1d"),l=S(n,"filter","conv1d"),c=a,u=!1;a.rank===2&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1]])),A(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),A(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),mn("conv1d",i,s),A(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),A(Vi(e,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${o}'`),A(qa(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),A(qa(e),()=>"Error in conv1D: Stride should be larger than 0."),A(r==="NWC",()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`);let d=$(l,[1,l.shape[0],l.shape[1],l.shape[2]]),p=$(c,[c.shape[0],1,c.shape[1],c.shape[2]]),f=_o(p,d,[1,e],i,"NHWC",[1,o],s);return u?$(f,[f.shape[2],f.shape[3]]):$(f,[f.shape[0],f.shape[2],f.shape[3]])}var M0=E({conv1d_:Xke});function Kke(t,n,e,i,r,o="NHWC",s){A(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let a=t,l=n,c=!1;n.rank===3&&(c=!0,l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]),a=[1,t[0],t[1],t[2]]),A(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),A(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),A(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);let u=o==="NHWC"?a[3]:a[1],d=o==="NHWC"?l.shape[3]:l.shape[1];A(u===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${e.shape[2]}.`),A(d===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${e.shape[3]}.`),mn("conv2dDerInput",r,s);let p={dy:l,filter:e},h={strides:i,pad:r,dataFormat:o,dimRoundingMode:s,inputShape:a},m=I.runKernel(td,p,h);return c?$(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var Py=E({conv2DBackpropInput_:Kke});function Yke(t,n,e,i,r,o){let s=S(t,"x","conv2dTranspose"),a=S(n,"filter","conv2dTranspose");return Py(e,s,a,i,r,"NHWC",o)}var R0=E({conv2dTranspose_:Yke});function Qke(t,n,e,i,r="NDHWC",o=[1,1,1]){let s=S(t,"x","conv3d"),a=S(n,"filter","conv3d"),l=s,c=!1;s.rank===4&&(c=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),A(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),A(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),A(Vi(e,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),A(r==="NDHWC",()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`),A(qa(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),A(qa(e),()=>"Error in conv3D: Strides should be larger than 0.");let u={x:l,filter:a},d={strides:e,pad:i,dataFormat:r,dilations:o},p=I.runKernel(nd,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var DL=E({conv3d_:Qke});function Zke(t,n,e,i,r){A(t.length===n.rank,()=>`Length of inShape (${t.length}) and rank of dy (${n.rank}) must match`);let o=t,s=n,a=!1;n.rank===4&&(a=!0,s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]]),o=[1,t[0],t[1],t[2],t[3]]);let l=o[4],c=s.shape[4];A(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),A(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),A(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),A(l===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${e.shape[3]}.`),A(c===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${e.shape[4]}.`);let u={dy:s,filter:e},d={pad:r,strides:i,inputShape:o},p=I.runKernel(Xg,u,d);return a?$(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}var Ek=E({conv3DBackpropInput_:Zke});function Jke(t,n,e,i,r){let o=S(t,"x","conv3dTranspose"),s=S(n,"filter","conv3dTranspose");return Ek(e,o,s,i,r)}var AL=E({conv3dTranspose_:Jke});function eIe(t){let e={x:S(t,"x","cos","float32")};return I.runKernel(ec,e)}var Zh=E({cos_:eIe});function tIe(t){let e={x:S(t,"x","cosh","float32")};return I.runKernel(tc,e)}var O0=E({cosh_:tIe});function nIe(t,n=0,e=!1,i=!1){let o={x:S(t,"x","cumprod")},s={axis:n,exclusive:e,reverse:i};return I.runKernel(Kg,o,s)}var F0=E({cumprod_:nIe});function iIe(t,n=0,e=!1,i=!1){let o={x:S(t,"x","cumsum")},s={axis:n,exclusive:e,reverse:i};return I.runKernel(id,o,s)}var Dk=E({cumsum_:iIe});function rIe(t,n,e,i=!1){let r=S(t,"x","denseBincount"),o=S(n,"weights","denseBincount");A(r.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${r.dtype}`),A(r.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${r.rank}.`),A(e>=0,()=>`size must be non-negative, but got ${e}.`),A(o.size===r.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${r.shape}, weights shape: ${o.shape}.`);let s={x:r,weights:o},a={size:e,binaryOutput:i};return I.runKernel(Qg,s,a)}var Ak=E({denseBincount_:rIe});function oIe(t,n,e="NHWC"){let i=S(t,"x","depthToSpace","float32"),r=e==="NHWC"?i.shape[1]:i.shape[2],o=e==="NHWC"?i.shape[2]:i.shape[3],s=e==="NHWC"?i.shape[3]:i.shape[1];A(n>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${n}`),A(r*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${n}  for depthToSpace with input shape
    ${i.shape}`),A(o*n>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${n} for depthToSpace with input shape
        ${i.shape}`),A(s%(n*n)===0,()=>`Dimension size must be evenly divisible by ${n*n} but is ${s} for depthToSpace with input shape ${i.shape}`);let a={x:i},l={blockSize:n,dataFormat:e};return I.runKernel(Zg,a,l)}var _K=E({depthToSpace_:oIe});function sIe(t,n,e,i,r="NHWC",o=[1,1],s){let a=S(t,"x","depthwiseConv2d","float32"),l=S(n,"filter","depthwiseConv2d","float32"),c=a,u=!1;a.rank===3&&(u=!0,c=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),A(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let d=r==="NHWC"?c.shape[3]:c.shape[1];A(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),mn("depthwiseConv2d",i,s);let p={x:c,filter:l},h={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s},m=I.runKernel(rd,p,h);return u?$(m,[m.shape[1],m.shape[2],m.shape[3]]):m}var Uc=E({depthwiseConv2d_:sIe});function aIe(t,n,e,i,r=[1,1],o="NHWC"){let s=S(t,"x","dilation2d"),a=S(n,"filter","dilation2d");A(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),A(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),A(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let l=s,c=!1;s.rank===3&&(l=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),c=!0),A(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);let u={x:l,filter:a},d={strides:e,pad:i,dilations:r},p=I.runKernel(od,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var wK=E({dilation2d_:aIe});var wo={};Ko(wo,{assertAndGetBroadcastShape:()=>ut,getBroadcastDims:()=>CK,getReductionAxes:()=>cn});function CK(t,n){let e=t.length,i=[];for(let r=0;r<e;r++){let o=e-1-r,s=t[o]||1;(n[n.length-1-r]||1)>1&&s===1&&i.unshift(o)}return i}function cn(t,n){let e=[];for(let i=0;i<n.length;i++){let r=t[t.length-i-1],o=n.length-i-1,s=n[o];(r==null||r===1&&s>1)&&e.unshift(o)}return e}function ut(t,n){let e=Math.max(t.length,n.length),i=new Array(e);for(let r=0;r<e;r++){let o=t[t.length-r-1];o==null&&(o=1);let s=n[n.length-r-1];if(s==null&&(s=1),o===1)i[e-r-1]=s;else if(s===1)i[e-r-1]=o;else if(o!==s){let a=`Operands could not be broadcast together with shapes ${t} and ${n}.`;throw Error(a)}else i[e-r-1]=o}return i}function lIe(t,n){let e=S(t,"a","equal","string_or_numeric"),i=S(n,"b","equal","string_or_numeric");[e,i]=Ct(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Ih,r)}var Tr=E({equal_:lIe});function cIe(t,n,e){let i=S(n,"a","where"),r=S(e,"b","where"),o=S(t,"condition","where","bool"),s=ut(ut(o.shape,i.shape),r.shape),a=zc(o,s),l=zc(i,s),c=zc(r,s),u={condition:a,t:l,e:c};return I.runKernel(Ed,u)}var vn=E({where_:cIe});function uIe(t){let e={x:S(t,"x","zerosLike")};return I.runKernel(Ld,e)}var He=E({zerosLike_:uIe});function dIe(t,n){let e=S(t,"a","div"),i=S(n,"b","div");[e,i]=Ct(e,i);let r=_e(e,i),o=He(r),s=Tr(i,o);return vn(s,o,r)}var TK=E({divNoNan_:dIe});function pIe(t,n){let e=S(t,"t1","dot"),i=S(n,"t2","dot");A((e.rank===1||e.rank===2)&&(i.rank===1||i.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${i.rank}.`);let r=e.rank===1?e.size:e.shape[1],o=i.rank===1?i.size:i.shape[0];if(A(r===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${o}.`),e.rank===1&&i.rank===1){let s=$(e,[1,-1]),a=$(i,[-1,1]),l=Wt(s,a);return $(l,[])}else if(e.rank===1&&i.rank===2){let s=$(e,[1,-1]),a=$(i,[i.shape[0],i.shape[1]]),l=Wt(s,a);return $(l,[l.size])}else if(e.rank===2&&i.rank===1){let s=$(i,[-1,1]),a=Wt(e,s);return $(a,[a.size])}else{let s=$(i,[i.shape[0],i.shape[1]]);return Wt(e,s)}}var SK=E({dot_:pIe});function hIe(t,...n){let e=n.map((r,o)=>S(r,`tensors${o}`,"einsum")),i={equation:t};return I.runKernel(ty,e,i)}var $y=E({einsum_:hIe});function mIe(t){let e={x:S(t,"x","elu","float32")};return I.runKernel(ic,e)}var Hc=E({elu_:mIe});function fIe(t){let n=S(t,"x","erf");A(n.dtype==="int32"||n.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),n.dtype==="int32"&&(n=ce(n,"float32"));let e={x:n};return I.runKernel(rc,e)}var L0=E({erf_:fIe});function NL(t,n){for(let e=0;e<t.length;++e)if(t[t.length-e-1]!==n-1-e)return!1;return!0}function kK(t,n,e){let i=t.length+n.length,r=[],o=0,s=0;for(let a=0;a<i;a++)e.indexOf(a)===-1?r.push(t[o++]):r.push(n[s++]);return r}function ML(t,n){let e=[],i=t.length;for(let o=0;o<i;o++)n.indexOf(o)===-1&&e.push(t[o]);let r=n.map(o=>t[o]);return[e,r]}function Xa(t,n){let e=n.map(i=>1);return kK(t,e,n)}function gIe(t,n,e){A(NL(n,e),()=>`${t} supports only inner-most axes for now. Got axes ${n} and rank-${e} input.`)}function RL(t,n){if(NL(t,n))return null;let e=[];for(let i=0;i<n;++i)t.indexOf(i)===-1&&e.push(i);return t.forEach(i=>e.push(i)),e}function P0(t){return t.map((n,e)=>[e,n]).sort((n,e)=>n[1]-e[1]).map(n=>n[0])}function yIe(t,n){let e=[];for(let i=n-t;i<n;++i)e.push(i);return e}function bIe(t,n=null,e=!1){let r={x:S(t,"x","max")},o={reductionIndices:n,keepDims:e};return I.runKernel(dd,r,o)}var Bi=E({max_:bIe});function xIe(t,n=null,e=!1){let r={x:S(t,"x","min")},o={axis:n,keepDims:e};return I.runKernel(fd,r,o)}var Hd=E({min_:xIe});function vIe(t,n){let e=S(t,"base","pow"),i=S(n,"exp","pow");[e,i]=Ct(e,i);let r={a:e,b:i};return I.runKernel(xc,r)}var Yr=E({pow_:vIe});function je(t,n){if((ar(t)&&n!=="string"||Array.isArray(t))&&n!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(n==="string"&&ar(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Bd(t,[],[],n)}function _Ie(t){let e={x:S(t,"x","sqrt","float32")};return I.runKernel(Nc,e)}var un=E({sqrt_:_Ie});function wIe(t){let n=S(t,"x","square"),e={};return I.runKernel("Square",{x:n},e)}var yt=E({square_:wIe});function CIe(t,n=null,e=!1){let i=S(t,"x","sum");i.dtype==="bool"&&(i=ce(i,"int32"));let r={x:i},o={axis:n,keepDims:e};return I.runKernel(Ad,r,o)}var Te=E({sum_:CIe});function TIe(t,n="euclidean",e=null,i=!1){t=S(t,"x","norm");let r=IK(t,n,e),o=r.shape;if(i){let s=si(e,t.shape);o=Xa(r.shape,s)}return $(r,o)}function IK(t,n,e=null){if(t.rank===0)return ii(t);if(t.rank!==1&&e===null)return IK($(t,[-1]),n,e);if(t.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(n===1)return Te(ii(t),e);if(n===1/0)return Bi(ii(t),e);if(n===-1/0)return Hd(ii(t),e);if(n==="euclidean"||n===2)return un(Te(Yr(ii(t),je(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}if(Array.isArray(e)&&e.length===2){if(n===1)return Bi(Te(ii(t),e[0]),e[1]-1);if(n===1/0)return Bi(Te(ii(t),e[1]),e[0]);if(n===-1/0)return Hd(Te(ii(t),e[1]),e[0]);if(n==="fro"||n==="euclidean")return un(Te(yt(t),e));throw new Error(`Error in norm: invalid ord value: ${n}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}var Wd=E({norm_:TIe});function SIe(t,n=null,e=!1){return Wd(t,"euclidean",n,e)}var EK=E({euclideanNorm_:SIe});function kIe(t){let e={x:S(t,"x","exp")};return I.runKernel(oc,e)}var ai=E({exp_:kIe});function IIe(t,n=0){let e=S(t,"x","expandDims","string_or_numeric");A(n<=e.rank,()=>"Axis must be <= rank of the tensor");let i={input:e},r={dim:n};return I.runKernel(sd,i,r)}var Qn=E({expandDims_:IIe});function EIe(t){let e={x:S(t,"x","expm1")};return I.runKernel(sc,e)}var FL=E({expm1_:EIe});function DIe(t,n){let e=S(t,"x","tile","string_or_numeric");A(e.rank===n.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${n}.`);let i={x:e},r={reps:n};return I.runKernel(Ua,i,r)}var Qi=E({tile_:DIe});function AIe(t,n,e,i="float32"){n==null&&(n=t);let r=Ge([t,n],i),o=t<=n?t:n;for(let a=0;a<o;++a)r.set(1,a,a);let s=$(r.toTensor(),[t,n]);if(e==null)return s;if(e.length===1)return Qi(Qn(s,0),[e[0],1,1]);if(e.length===2)return Qi(Qn(Qn(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return Qi(Qn(Qn(Qn(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}var Vy=E({eye_:AIe});function NIe(t){let e={x:S(t,"x","floor","float32")};return I.runKernel(ac,e)}var Wc=E({floor_:NIe});function MIe(t,n,e=0,i=0){let r=S(t,"x","gather"),o=S(n,"indices","gather","int32"),s={x:r,indices:o},a={axis:e,batchDims:i};return I.runKernel(ld,s,a)}var jc=E({gather_:MIe});function RIe(t,n){let e=S(t,"a","greater","string_or_numeric"),i=S(n,"b","greater","string_or_numeric");[e,i]=Ct(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Eh,r)}var Un=E({greater_:RIe});function OIe(t,n){let e=S(t,"a","greaterEqual","string_or_numeric"),i=S(n,"b","greaterEqual","string_or_numeric");[e,i]=Ct(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(cc,r)}var Qr=E({greaterEqual_:OIe});function FIe(t){let e={input:S(t,"input","imag")};return I.runKernel(ay,e)}var By=E({imag_:FIe});function LIe(t){let e={x:S(t,"x","isFinite")};return I.runKernel(uc,e)}var LL=E({isFinite_:LIe});function PIe(t){let e={x:S(t,"x","isInf")};return I.runKernel(dc,e)}var PL=E({isInf_:PIe});function $Ie(t){let e={x:S(t,"x","isNaN")};return I.runKernel(pc,e)}var $L=E({isNaN_:$Ie});function VIe(t,n=.2){let i={x:S(t,"x","leakyRelu")},r={alpha:n};return I.runKernel(cd,i,r)}var Jh=E({leakyRelu_:VIe});function BIe(t,n){let e=S(t,"a","less","string_or_numeric"),i=S(n,"b","less","string_or_numeric");[e,i]=Ct(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Dh,r)}var em=E({less_:BIe});function zIe(t,n){let e=S(t,"a","lessEqual","string_or_numeric"),i=S(n,"b","lessEqual","string_or_numeric");[e,i]=Ct(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Ah,r)}var fs=E({lessEqual_:zIe});function GIe(t,n=5,e=1,i=1,r=.5){let o=S(t,"x","localResponseNormalization");A(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),A(Hl(n),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${n}.`);let s=o,a=!1;o.rank===3&&(a=!0,s=$(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let l={x:s},c={depthRadius:n,bias:e,alpha:i,beta:r},u=I.runKernel(ud,l,c);return a?$(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var DK=E({localResponseNormalization_:GIe});function UIe(t){let e={x:S(t,"x","log","float32")};return I.runKernel(hc,e)}var zi=E({log_:UIe});function HIe(t){let e={x:S(t,"x","log1p")};return I.runKernel(mc,e)}var $0=E({log1p_:HIe});function VL(t,n){A(Lg(t),()=>"The f passed in variableGrads(f) must be a function"),A(n==null||Array.isArray(n)&&n.every(c=>c instanceof Pc),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let e=n!=null;if(!e){n=[];for(let c in I.registeredVariables)n.push(I.registeredVariables[c])}let i=e?n.filter(c=>!c.trainable):null,r=n.length;n=n.filter(c=>c.trainable),A(n.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`);let o=!0,{value:s,grads:a}=I.gradients(t,n,null,o);A(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),A(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let l={};return n.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),i?.forEach(c=>l[c.name]=null),{value:s,grads:l}}function Go(t){return I.customGrad(t)}function WIe(t){let e={x:S(t,"x","neg")};return I.runKernel(yd,e)}var Tt=E({neg_:WIe});function jIe(t){let e={x:S(t,"x","softplus")};return I.runKernel(Ac,e)}var Ka=E({softplus_:jIe});function qIe(t){let n=S(t,"x","logSigmoid");return Go(i=>({value:Tt(Ka(Tt(i))),gradFunc:s=>F(s,ms(Tt(i)))}))(n)}var BL=E({logSigmoid_:qIe});function XIe(t,n){let e=S(t,"a","sub"),i=S(n,"b","sub");[e,i]=Ct(e,i);let r={a:e,b:i};return I.runKernel(Rc,r)}var Ee=E({sub_:XIe});function KIe(t,n=-1){let e=S(t,"logits","logSoftmax");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${n}`);return Go((r,o)=>{let a=Bi(r,n,!0),l=Ee(r,a),c=Ee(ce(l,"float32"),zi(Te(ai(l),n,!0)));return o([c]),{value:c,gradFunc:(d,p)=>{let[h]=p,m=!0,g=ai(h);return Ee(d,F(Te(d,n,m),g))}}})(e)}var V0=E({logSoftmax_:KIe});function YIe(t,n=null,e=!1){let i=S(t,"x","logSumExp"),r=si(n,i.shape),o=Bi(i,r,!0),s=Ee(i,o),a=ai(s),l=Te(a,r),c=zi(l),u=re($(o,c.shape),c);if(e){let d=Xa(u.shape,r);return $(u,d)}return u}var B0=E({logSumExp_:YIe});function QIe(t,n){let e=S(t,"a","logicalAnd","bool"),i=S(n,"b","logicalAnd","bool");ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Nh,r)}var lr=E({logicalAnd_:QIe});function ZIe(t){let e={x:S(t,"x","logicalNot","bool")};return I.runKernel(Mh,e)}var zy=E({logicalNot_:ZIe});function JIe(t,n){let e=S(t,"a","logicalOr","bool"),i=S(n,"b","logicalOr","bool");ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Rh,r)}var Nk=E({logicalOr_:JIe});function eEe(t,n){let e=S(t,"a","logicalXor","bool"),i=S(n,"b","logicalXor","bool");return ut(e.shape,i.shape),lr(Nk(t,n),zy(lr(t,n)))}var AK=E({logicalXor_:eEe});function tEe(t,n,e,i,r){let o=S(t,"x","maxPool"),s=1,a=o,l=!1;o.rank===3&&(l=!0,a=$(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),A(Vi(e,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),mn("maxPool",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r},d=I.runKernel(pd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var tm=E({maxPool_:tEe});function nEe(t,n=[1,1,1],e,i,r,o="NDHWC"){let s=S(t,"x","maxPool3d"),a=s,l=!1;s.rank===4&&(l=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),A(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),mn("maxPool3d",i,r);let c={x:a},u={filterSize:n,strides:e,pad:i,dimRoundingMode:r,dataFormat:o},d=I.runKernel(hd,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}var zL=E({maxPool3d_:nEe});function iEe(t,n){let e=S(t,"a","maximum"),i=S(n,"b","maximum");[e,i]=Ct(e,i),e.dtype==="bool"&&(e=ce(e,"int32"),i=ce(i,"int32")),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(fc,r)}var Co=E({maximum_:iEe});function rEe(t,n=null,e=!1){let r={x:S(t,"x","mean")},o={axis:n,keepDims:e};return I.runKernel(md,r,o)}var fn=E({mean_:rEe});function _n(t,n="float32"){if(Li(t),n==="complex64"){let i=_n(t,"float32"),r=_n(t,"float32");return Vo(i,r)}let e=$g(Ht(t),n);return I.makeTensor(e,t,n)}function Sr(t,n="float32"){if(Li(t),n==="complex64"){let i=Sr(t,"float32"),r=_n(t,"float32");return Vo(i,r)}let e=g0(Ht(t),n);return I.makeTensor(e,t,n)}function oEe(t,n){let e=S(t,"a","minimum"),i=S(n,"b","minimum");[e,i]=Ct(e,i),e.dtype==="bool"&&(e=ce(e,"int32"),i=ce(i,"int32")),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(gc,r)}var gs=E({minimum_:oEe});function sEe(t,n,e){A(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);let i=S(t,"x","mirrorPad");if(i.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");A(n.length===i.rank,()=>`Padding doesn't match input. Must be ${i.rank}. Got ${n.length}.`);let r=e==="reflect"?1:0;for(let a=0;a<i.rank;a++)A(n[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),A(n[a][0]>=0&&n[a][0]<=i.shape[a]-r&&n[a][1]>=0&&n[a][1]<=i.shape[a]-r,()=>`Padding in dimension ${a} cannot be greater than or equal to ${i.shape[a]-r} or less than 0 for input of shape ${i.shape}`);let o={paddings:n,mode:e},s={x:i};return I.runKernel(gd,s,o)}var NK=E({mirrorPad_:sEe});function aEe(t,n){let e=S(t,"a","mod"),i=S(n,"b","mod");[e,i]=Ct(e,i);let r={a:e,b:i};return I.runKernel(yc,r)}var MK=E({mod_:aEe});function lEe(t,n=null,e=!1){t=S(t,"x","moments");let i=si(n,t.shape),r=fn(t,i,e),o=r.shape;e||(o=Xa(r.shape,i));let s=yt(Ee(ce(t,"float32"),$(r,o))),a=fn(s,i,e);return{mean:r,variance:a}}var Gy=E({moments_:lEe});function cEe(t,n){let e=S(t,"a","notEqual","string_or_numeric"),i=S(n,"b","notEqual","string_or_numeric");[e,i]=Ct(e,i),ut(e.shape,i.shape);let r={a:e,b:i};return I.runKernel(Oh,r)}var jd=E({notEqual_:cEe});function uEe(t,n,e=1,i=0,r="int32"){if(n<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${n}`);let s={indices:S(t,"indices","oneHot","int32")},a={dtype:r,depth:n,onValue:e,offValue:i};return I.runKernel(xd,s,a)}var Uy=E({oneHot_:uEe});function dEe(t){let e={x:S(t,"x","onesLike")};return I.runKernel(bd,e)}var Ci=E({onesLike_:dEe});function pEe(t,n,e=0){let i=S(t,"x","pad");if(i.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let r={paddings:n,constantValue:e},o={x:i};return I.runKernel(_d,o,r)}var nm=E({pad_:pEe});function hEe(t,n,e){let i=S(t,"x","spaceToBatchND");A(i.rank>=1+n.length,()=>`input rank ${i.rank} should be > than [blockShape] ${n.length}`),A(e.length===n.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${n.length}`),A(i.shape.reduce((s,a,l)=>l>0&&l<=n.length?s&&(a+e[l-1][0]+e[l-1][1])%n[l-1]===0:s,!0),()=>`input spatial dimensions ${i.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${n.toString()}`);let r={x:i},o={blockShape:n,paddings:e};return I.runKernel(Nd,r,o)}var Hy=E({spaceToBatchND_:hEe});function mEe(t,n,e,i,r,o,s){r==null&&(r=[1,1]),o==null&&(o=1),i===0&&(i="valid");let a=S(t,"x","maxPool"),l=a,c=!1;a.rank===3&&(c=!0,l=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(Vi(o,r),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${r}'`);let u=bL(l.shape,n,o,r,i),d=[u.dilationHeight,u.dilationWidth],p;i==="same"?p=gEe([u.filterHeight,u.filterWidth],d):p=[[0,0],[0,0]];let h=d[0]===1&&d[1]===1,[m,g]=fEe([u.inHeight,u.inWidth],d,p),f=h?i:"valid",y=h?l:Hy(l,d,m),v=(e==="avg"?()=>Yh(y,n,o,f,s):()=>tm(y,n,o,f,s))(),_=h?v:Ly(v,d,g);return c?$(_,[_.shape[1],_.shape[2],_.shape[3]]):_}function fEe(t,n,e){let i=e.map(u=>u[0]),r=e.map(u=>u[1]),o=t.concat(i,r),s=n.map((u,d)=>(u-o[d]%u)%u),a=r.map((u,d)=>u+s[d]),l=n.map((u,d)=>[i[d],a[d]]),c=n.map((u,d)=>[0,s[d]]);return[l,c]}function gEe(t,n){let i=t.map((s,a)=>s+(s-1)*(n[a]-1)).map(s=>s-1),r=i.map(s=>Math.floor(s/2)),o=i.map((s,a)=>s-r[a]);return i.map((s,a)=>[r[a],o[a]])}var RK=E({pool_:mEe});function yEe(t,n){let e=S(t,"x","prelu"),i=S(n,"alpha","prelu"),r={x:e,alpha:i};return I.runKernel(wd,r)}var im=E({prelu_:yEe});function bEe(t,n=null,e=!1){let i=S(t,"x","prod");i.dtype==="bool"&&(i=ce(i,"int32"));let r={x:i},o={axis:n,keepDims:e};return I.runKernel(Cd,r,o)}var OK=E({prod_:bEe});var XL=Gb(z0());var Wy=class{constructor(n,e,i,r,o){this.mean=n,this.stdDev=e,this.dtype=i,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=o||Math.random();this.random=XL.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let r=this.nextVal;return this.nextVal=NaN,r}let n,e,i=!1;for(;!i;){let r,o,s;do r=2*this.random()-1,o=2*this.random()-1,s=r*r+o*o;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*r*a,e=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(n))&&(i=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(n)}convertValue(n){return this.dtype==null||this.dtype==="float32"?n:Math.round(n)}isValidTruncated(n){return n<=this.upper&&n>=this.lower}};var Rk=class{constructor(n=0,e=1,i,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=n,this.range=e-n,this.dtype=i,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${n} - ${e} <= 1 and dtype is not float`);this.random=XL.alea(r)}convertValue(n){return this.canReturnFloat()?n:Math.round(n)}nextValue(){return this.convertValue(this.min+this.range*this.random())}};function SEe(t,n=0,e=1,i,r){if(Li(t),i!=null&&i==="bool")throw new Error(`Unsupported data type ${i}`);let o=new Wy(n,e,i,!1,r),s=Ge(t,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}var Ok=E({randomNormal_:SEe});function kEe(t,n=0,e=1,i="float32",r){Li(t);let o=Ge(t,i),s=new Rk(n,e,null,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}var Zs=E({randomUniform_:kEe});function qc(t,n,e=1,i="float32"){if(e===0)throw new Error("Cannot have a step of zero");let r={start:t,stop:n,step:e,dtype:i};return I.runKernel(my,{},r)}function IEe(t){let e={input:S(t,"input","real")};return I.runKernel(fy,e)}var om=E({real_:IEe});function EEe(t){let e={x:S(t,"x","reciprocal")};return I.runKernel(vc,e)}var KL=E({reciprocal_:EEe});function DEe(t){let e={x:S(t,"x","relu")};return I.runKernel(_c,e)}var To=E({relu_:DEe});function AEe(t){let e={x:S(t,"x","relu6")};return I.runKernel(wc,e)}var Fk=E({relu6_:AEe});function NEe(t,n){let i={x:S(t,"x","reverse")},r={dims:n};return I.runKernel(Id,i,r)}var Uo=E({reverse_:NEe});function MEe(t){let e={x:S(t,"x","round")};return I.runKernel(Cc,e)}var G0=E({round_:MEe});function REe(t){let e={x:S(t,"x","rsqrt","float32")};return I.runKernel(Tc,e)}var U0=E({rsqrt_:REe});function OEe(t){let e={x:S(t,"x","selu")};return I.runKernel(Sc,e)}var H0=E({selu_:OEe});function FEe(t,n,e,i,r,o=[1,1],s="NHWC"){let a=S(t,"x","separableConv2d"),l=S(n,"depthwiseFilter","separableConv2d"),c=S(e,"pointwiseFilter","separableConv2d"),u=a,d=!1;if(a.rank===3&&(d=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");A(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),A(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),A(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),A(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);let p=l.shape[2],h=l.shape[3];A(c.shape[2]===p*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${p*h}, but got ${c.shape[2]}.`);let m=Uc(u,l,i,r,s,o),f=_o(m,c,1,"valid",s);return d?$(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var W0=E({separableConv2d_:FEe});function LEe(t){let e={x:S(t,"x","sign")};return I.runKernel(Ec,e)}var YL=E({sign_:LEe});function PEe(t){let e={x:S(t,"x","sin","float32")};return I.runKernel(kc,e)}var j0=E({sin_:PEe});function $Ee(t){let e={x:S(t,"x","sinh")};return I.runKernel(Ic,e)}var q0=E({sinh_:$Ee});function VEe(t,n,e){let i=S(t,"x","slice1d");return A(i.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${i.rank} tensor`),Rt(i,[n],[e])}var X0=E({slice1d_:VEe});function BEe(t,n,e){let i=S(t,"x","slice2d");return A(i.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${i.rank} tensor`),Rt(i,n,e)}var Lk=E({slice2d_:BEe});function zEe(t,n,e){let i=S(t,"x","slice3d");return A(i.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${i.rank} tensor`),Rt(i,n,e)}var K0=E({slice3d_:zEe});function GEe(t,n,e){let i=S(t,"x","slice4d");return A(i.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${i.rank} tensor`),Rt(i,n,e)}var jy=E({slice4d_:GEe});function UEe(t,n=-1){let e=S(t,"logits","softmax","float32");if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${n}`);let i={logits:e},r={dim:n};return I.runKernel(Rd,i,r)}var sm=E({softmax_:UEe});function HEe(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);let n={input:t};return I.runKernel(iy,n)}var Y0=E({fft_:HEe});function WEe(t){A(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);let n={input:t};return I.runKernel(sy,n)}var qy=E({ifft_:WEe});function jEe(t){let n=t.shape[t.shape.length-1],e=t.size/n,i;if(n<=2){let r=$(t,[e,n]);i=qy(r)}else{let r=[e,2*(n-1)],o=$(om(t),[e,n]),s=$(By(t),[e,n]),a=Uo(Rt(o,[0,1],[e,n-2]),1),l=F(Uo(Rt(s,[0,1],[e,n-2]),1),je(-1)),c=xn([o,a],1),u=xn([s,l],1),d=$(Vo(c,u),[r[0],r[1]]);i=qy(d)}if(i=om(i),t.rank===3&&t.shape[0]!==0){let r=i,o=t.shape[0];i=$(i,[o,i.shape[0]/o,i.shape[1]]),r.dispose()}return i}var QL=E({irfft_:jEe});function qEe(t,n,e=0){let r={x:S(t,"x","split")},o={numOrSizeSplits:n,axis:e};return I.runKernel(Md,r,o)}var fi=E({split_:qEe});function XEe(t,n){A(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let e=t.shape[t.shape.length-1],i=t.size/e,r;if(n!=null&&n<e){let m=t.shape.map(f=>0),g=t.shape.map(f=>f);g[t.shape.length-1]=n,r=Rt(t,m,g),e=n}else if(n!=null&&n>e){let m=t.shape.map(g=>g);m[t.shape.length-1]=n-e,r=xn([t,_n(m)],t.shape.length-1),e=n}else r=t;let o=He(r),s=$(Vo(r,o),[i,e]),a=Y0(s),l=Math.floor(e/2)+1,c=om(a),u=By(a),d=fi(c,[l,e-l],c.shape.length-1),p=fi(u,[l,e-l],u.shape.length-1),h=r.shape.slice();return h[r.shape.length-1]=l,$(Vo(d[0],p[0]),h)}var ZL=E({rfft_:XEe});function KEe(t,n){let e=S(t,"a","squaredDifference"),i=S(n,"b","squaredDifference");[e,i]=Ct(e,i),ut(e.shape,i.shape);let r={a:e,b:i},o={};return I.runKernel(Mc,r,o)}var QK=E({squaredDifference_:KEe});function YEe(t,n){let e=S(t,"x","squeeze","string_or_numeric");return $(e,O2(e.shape,n).newShape)}var Js=E({squeeze_:YEe});function QEe(t,n=0){let e=xk(t,"tensors","stack","string_or_numeric");A(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&A(n<=e[0].rank,()=>"Axis must be <= rank of the tensor");let i=e,r={axis:n};return I.runKernel(vd,i,r)}var li=E({stack_:QEe});function ZEe(t,n=0){let i={x:S(t,"x","step")},r={alpha:n};return I.runKernel(Lc,i,r)}var ea=E({step_:ZEe});function JEe(t,n,e,i,r=0,o=0,s=0,a=0,l=0){let u={x:S(t,"x","stridedSlice","string_or_numeric")},d={begin:n,end:e,strides:i,beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};return I.runKernel(xy,u,d)}var JL=E({stridedSlice_:JEe});function eDe(t){let e={x:S(t,"x","tan","float32")};return I.runKernel(Oc,e)}var eP=E({tan_:eDe});function In(t,n){f0(t);let e=Hh(t,n);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Bd(t,null,e,n)}function cr(t,n,e){if(f0(t),n!=null&&n.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let i=Hh(t,e);if(i.length!==2&&i.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(i.length===1&&n==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Bd(t,n,i,e)}function ZK(t,n,e){let i=n.rank>1?n.shape[n.rank-1]:1,r=n.rank>1?n.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${n.shape}, shape: ${t}, sliceDim: ${i}, and batchDim: ${r}.`;if(e.rank<r)throw new Error(o+` update.rank < ${r}. `);if(t.length<i+(e.rank-r))throw new Error(o+` Output shape length < ${i+(e.rank-r)}`);if(e.rank!==r+t.length-i)throw new Error(o+` update.rank != ${r+t.length-i}`);for(let s=0;s<r;++s)if(e.shape[s]!==n.shape[s])throw new Error(o+` updates.shape[${s}] (${e.shape[s]}) != indices.shape[${s}] (${n.shape[s]}).`);for(let s=0;s<e.rank-r;++s)if(e.shape[s+r]!==t[s+i])throw new Error(o+` updates.shape[${s+r}] (${e.shape[s+r]}) != shape[${s+r}] (${t[s+r]})`)}function tDe(t,n,e){if(n.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${n.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(n.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${n.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(e.length===0){if(n.size===0)throw new Error(`Indices specified for empty output. indices shape: ${n.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}ZK(e,n,t)}function nDe(t,n,e){let i=n.shape.length,r=i>1?n.shape[i-1]:1,o=e.length,s=1;for(let d=r;d<o;++d)s*=e[d];let a=r<1?1:r,l=Ht(n.shape)/a,c=[...Ba(e.slice(0,r)),1],u=Ht(e);return{sliceRank:r,numUpdates:l,sliceSize:s,strides:c,outputSize:u}}function iDe(t,n=1,e=!0){let i=S(t,"x","topk");if(i.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let r=i.shape[i.shape.length-1];if(n<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${n}`);if(n>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${n}`);let o={x:i},s={k:n,sorted:e},[a,l]=I.runKernel(vy,o,s);return{values:a,indices:l}}var JK=E({topk_:iDe});function rDe(t,n=0,e=1,i,r){if(Li(t),i!=null&&i==="bool")throw new Error("Unsupported data type $ { dtype }");let o=new Wy(n,e,i,!0,r),s=Ge(t,i);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}var Q0=E({truncatedNormal_:rDe});function oDe(t,n=0){let e=S(t,"x","unique","string_or_numeric");A(e.rank>0,()=>"The input tensor must be at least 1D");let i={x:e},r={axis:n},[o,s]=I.runKernel(wy,i,r);return{values:o,indices:s}}var eY=E({unique_:oDe});function sDe(t,n,e){let i=S(t,"x","unsortedSegmentSum"),r=S(n,"segmentIds","unsortedSegmentSum","int32");A(Hl(e),()=>"numSegments must be of dtype int");let o={x:i,segmentIds:r},s={numSegments:e};return I.runKernel(Fd,o,s)}var Pk=E({unsortedSegmentSum_:sDe});function aDe(t,n=0){let e=S(t,"x","unstack","string_or_numeric");A(n>=-e.shape.length&&n<e.shape.length,()=>`Axis = ${n} is not in [-${e.shape.length}, ${e.shape.length})`);let i={value:e},r={axis:n};return I.runKernel(Od,i,r)}var ur=E({unstack_:aDe});function tP(t,n=!0,e,i){return I.makeVariable(t,n,e,i)}function tY(t,n){let e=[];for(let o=0;o<n.length;o++)n[o]&&e.push(o);let i=Ge(t,"int32"),r=Ge([e.length,t.length],"int32");for(let o=0;o<e.length;o++){let s=i.indexToLoc(e[o]),a=o*t.length;r.values.set(s,a)}return r.toTensor()}function lDe(t,n,e){let i=S(t,"x","transpose");if(n==null&&(n=i.shape.map((s,a)=>a).reverse()),A(i.rank===n.length,()=>`Error in transpose: rank of input ${i.rank} must match length of perm ${n}.`),n.forEach(s=>{A(s>=0&&s<i.rank,()=>`All entries in 'perm' must be between 0 and ${i.rank-1} but got ${n}`)}),i.rank<=1)return i.clone();let r={x:i},o={perm:n};return i.dtype==="complex64"?W(()=>{let s=om(i),a=By(i);return s=I.runKernel(Ha,{x:s},o),a=I.runKernel(Ha,{x:a},o),e&&(a=Tt(a)),Vo(s,a)}):I.runKernel(Ha,r,o)}var gt=E({transpose_:lDe});function nY(t,n){if(n==null)return t.shape.slice();if(Uu(t.shape,n))return n;if(t.shape.length===n.length){let e=[];for(let i=0;i<t.shape.length;i++)n[i]==null&&t.shape[i]!=null?e.push(t.shape[i]):e.push(n[i]);return e}return n}function cDe(t,n,e,i){let r=S(t,"x","dropout");if(A(r.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`),A(n>=0&&n<1,()=>`rate must be a float in the range [0, 1), but got ${n}.`),n===0)return t instanceof Kt?r.clone():r;let o=nY(r,e),s=1-n,a=_e(Wc(re(Zs(o,0,1,"float32",i),s)),s);return F(r,a)}var iY=E({dropout_:cDe});var dm={};Ko(dm,{conv2d:()=>rY,depthwiseConv2d:()=>oY,matMul:()=>sY});function uDe(t,n,e,i,r,o="NHWC",s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]])),A(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),A(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),A(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);let c=o==="NHWC"?a.shape[3]:a.shape[1],u=o==="NHWC"?l.shape[3]:l.shape[1];A(c===e[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${e[2]}.`),A(u===e[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${e[3]}).`),mn("conv2dDerFilter",r,s);let d={x:a,dy:l},p={strides:i,pad:r,dataFormat:o,dimRoundingMode:s,filterShape:e};return I.runKernel(jg,d,p)}var Xy=E({conv2DBackpropFilter_:uDe});function am(t,n,e){if(e==null||e==="linear")return t;if(e==="relu")return F(t,ea(n));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function lm(t,n){let e=n,i=cn(t.shape,n.shape);return i.length>0&&(e=Te(e,i)),$(e,t.shape)}function cm(t,n,e,i){if(n==="linear")return t;if(n==="relu")return To(t);if(n==="elu")return Hc(t);if(n==="relu6")return Fk(t);if(n==="prelu")return im(t,e);if(n==="leakyrelu")return Jh(t,i);if(n==="sigmoid")return ms(t);throw new Error(`Unknown fused activation ${n}.`)}var um=(t,n)=>!(t>0)||n==="linear";function dDe({x:t,filter:n,strides:e,pad:i,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",um(I.state.gradientDepth,l)===!1){A(r==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${r} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let T=_o(t,n,e,i,r,o,s);return a!=null&&(T=re(T,a)),cm(T,l,c,u)}let d=S(t,"x","conv2d","float32"),p=S(n,"filter","conv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(h.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),A(p.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${p.rank}.`),mn("fused conv2d",i,s);let g=r==="NHWC"?h.shape[3]:h.shape[1];A(p.shape[2]===g,()=>`Error in conv2d: depth of input (${g}) must match input depth for filter ${p.shape[2]}.`),A(Vi(e,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`);let f=Kh(h.shape,p.shape,e,o,i,s),y;a!=null&&(y=S(a,"bias","fused conv2d"),[y]=Ct(y,d),r==="NHWC"?ut(f.outShape,y.shape):(A(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),A(y.shape.length===0||y.shape[0]===f.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${f.outChannels})`)));let b;if(c!=null){let T=c.shape;if(A(T.length<=1||T.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${T.length}.`),T.length===1)A(T[0]===1||T[0]===f.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the number of output channels (${f.outChannels}).`);else if(T.length===3)try{ut(T,f.outShape)}catch{let N=`Error in fused conv2d: PReLU activation weights (${T}) is not compatible with the output shape of the conv2d (${f.outShape}).`;throw Error(N)}b=S(c,"prelu weights","fused conv2d")}let v=(T,D)=>{A(r==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${r} but only NHWC is currently supported.`);let[N,O,P,B]=D,K=am(T,P,l);A(Bo(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let X=Py(O.shape,K,N,e,i),Z=Xy(O,K,N.shape,e,i),te=[X,Z];if(B!=null){let U=lm(B,K);te.push(U)}return te},_={x:h,filter:p,bias:y,preluActivationWeights:b},w={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Go((D,N,O)=>{let P=I.runKernel(Lh,_,w);return O([N,D,P]),m&&(P=$(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:v}})(h,p):Go((D,N,O,P)=>{let B=I.runKernel(Lh,_,w);return P([N,D,B,O]),m&&(B=$(B,[B.shape[1],B.shape[2],B.shape[3]])),{value:B,gradFunc:v}})(h,p,y)}var rY=E({fusedConv2d_:dDe});function pDe(t,n,e,i,r,o=[1,1],s){let a=t;t.rank===3&&(a=$(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=n;l.rank===3&&(l=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={x:a,dy:l},u={strides:i,pad:r,dimRoundingMode:s,dilations:o,filterShape:e};return I.runKernel(Jg,c,u)}var $k=E({depthwiseConv2dNativeBackpropFilter_:pDe});function hDe(t,n,e,i,r,o=[1,1],s){let a=n,l=!1;n.rank===3&&(l=!0,a=$(n,[1,n.shape[0],n.shape[1],n.shape[2]]));let c={dy:a,filter:e},u={strides:i,pad:r,dimRoundingMode:s,dilations:o,inputShape:t},d=I.runKernel(ey,c,u);return l?$(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var Vk=E({depthwiseConv2dNativeBackpropInput_:hDe});function mDe({x:t,filter:n,strides:e,pad:i,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(um(I.state.gradientDepth,l)===!1){let w=Uc(t,n,e,i,r,o,s);return a!=null&&(w=re(w,a)),cm(w,l,c,u)}let d=S(t,"x","depthwiseConv2d","float32"),p=S(n,"filter","depthwiseConv2d","float32"),h=d,m=!1;d.rank===3&&(m=!0,h=$(d,[1,d.shape[0],d.shape[1],d.shape[2]])),A(h.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),A(p.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${p.rank}.`),A(h.shape[3]===p.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${p.shape[2]}.`),o==null&&(o=[1,1]),A(Vi(e,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),mn("fused depthwiseConv2d",i,s);let g=Kh(h.shape,p.shape,e,o,i,s,!0),f;a!=null&&(f=S(a,"bias","fused conv2d"),[f]=Ct(f,d),ut(g.outShape,f.shape));let y;c!=null&&(y=S(c,"prelu weights","fused depthwiseConv2d"));let b=(w,T)=>{A(Bo(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[D,N,O,P]=T,B=am(w,O,l),K=Vk(N.shape,B,D,e,i,o,s),X=$k(N,B,D.shape,e,i,o,s);if(P!=null){let Z=lm(f,B);return[K,X,Z]}return[K,X]},v={x:h,filter:p,bias:f,preluActivationWeights:y},_={strides:e,pad:i,dataFormat:r,dilations:o,dimRoundingMode:s,activation:l,leakyreluAlpha:u};return a==null?Go((T,D,N)=>{let O=I.runKernel(Ph,v,_);return N([D,T,O]),m&&(O=$(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:b}})(h,p):Go((T,D,N,O)=>{let P=I.runKernel(Ph,v,_);return O([D,T,P,N]),m&&(P=$(P,[P.shape[1],P.shape[2],P.shape[3]])),{value:P,gradFunc:b}})(h,p,f)}var oY=E({fusedDepthwiseConv2d_:mDe});function fDe({a:t,b:n,transposeA:e=!1,transposeB:i=!1,bias:r,activation:o="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(um(I.state.gradientDepth,o)===!1){let B=Wt(t,n,e,i);return r!=null&&(B=re(B,r)),cm(B,o,s,a)}let l=S(t,"a","fused matMul"),c=S(n,"b","fused matMul");[l,c]=Ct(l,c);let u=e?l.shape[l.rank-2]:l.shape[l.rank-1],d=i?c.shape[c.rank-1]:c.shape[c.rank-2],p=e?l.shape[l.rank-1]:l.shape[l.rank-2],h=i?c.shape[c.rank-2]:c.shape[c.rank-1],m=l.shape.slice(0,-2),g=c.shape.slice(0,-2),f=Ht(m),y=Ht(g);A(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${e} and transposeB=${i} must match.`);let v=ut(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([p,h]),_=e?$(l,[f,u,p]):$(l,[f,p,u]),w=i?$(c,[y,h,d]):$(c,[y,d,h]),T;r!=null&&(T=S(r,"bias","fused matMul"),[T]=Ct(T,l),ut(v,T.shape));let D;s!=null&&(D=S(s,"prelu weights","fused matMul"));let N=(B,K)=>{let[X,Z,te,U]=K,j=am($(B,te.shape),te,o),q,Q;if(!e&&!i?(q=Wt(j,Z,!1,!0),Q=Wt(X,j,!0,!1)):!e&&i?(q=Wt(j,Z,!1,!1),Q=Wt(j,X,!0,!1)):e&&!i?(q=Wt(Z,j,!1,!0),Q=Wt(X,j,!1,!1)):(q=Wt(Z,j,!0,!0),Q=Wt(j,X,!0,!0)),r!=null){let oe=lm(U,j);return[q,Q,oe]}else return[q,Q]},O={a:_,b:w,bias:T,preluActivationWeights:D},P={transposeA:e,transposeB:i,activation:o,leakyreluAlpha:a};return r==null?Go((K,X,Z)=>{let te=I.runKernel(Fh,O,P);return Z([K,X,te]),{value:$(te,v),gradFunc:N}})(_,w):Go((K,X,Z,te)=>{let U=I.runKernel(Fh,O,P);return te([K,X,U,Z]),{value:$(U,v),gradFunc:N}})(_,w,T)}var sY=E({fusedMatMul_:fDe});function gDe(t,n,e,i,r="bilinear",o=0){let s=S(t,"image","cropAndResize"),a=S(n,"boxes","cropAndResize","float32"),l=S(e,"boxInd","cropAndResize","int32"),c=a.shape[0];A(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),A(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),A(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),A(i.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${i.length}.`),A(i[0]>=1&&i[1]>=1,()=>`cropSize must be atleast [1,1], but was ${i}`),A(r==="bilinear"||r==="nearest",()=>`method must be bilinear or nearest, but was ${r}`);let u={image:s,boxes:a,boxInd:l},d={method:r,extrapolationValue:o,cropSize:i};return I.runKernel(Yg,u,d)}var aY=E({cropAndResize_:gDe});function yDe(t){let n=S(t,"image","flipLeftRight","float32");A(n.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${n.rank}.`);let e={image:n};return I.runKernel(oy,e,{})}var lY=E({flipLeftRight_:yDe});function bDe(t){let n=S(t,"image","grayscaleToRGB"),e=n.rank-1,i=n.shape[e];A(n.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${n.rank}.`),A(i===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${i}.`);let r=new Array(n.rank);return r.fill(1,0,e),r[e]=3,Qi(n,r)}var cY=E({grayscaleToRGB_:bDe});function xDe(t){let n=S(t,"image","RGBToGrayscale"),e=n.rank-1,i=n.shape[e];A(n.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${n.rank}.`),A(i===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${i}.`);let r=n.dtype,o=ce(n,"float32"),s=In([.2989,.587,.114]),a;switch(n.rank){case 2:a=$y("ij,j->i",o,s);break;case 3:a=$y("ijk,k->ij",o,s);break;case 4:a=$y("ijkl,l->ijk",o,s);break;case 5:a=$y("ijklm,m->ijkl",o,s);break;case 6:a=$y("ijklmn,n->ijklm",o,s);break;default:throw new Error("Not a valid tensor rank.")}return a=Qn(a,-1),ce(a,r)}var uY=E({rgbToGrayscale_:xDe});function vDe(t,n,e=0,i=.5){let r=S(t,"image","rotateWithOffset","float32");A(r.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`);let o={image:r},s={radians:n,fillValue:e,center:i};return I.runKernel(Cy,o,s)}var dY=E({rotateWithOffset_:vDe});function ys(t,n,e,i,r,o){i==null&&(i=.5),r==null&&(r=Number.NEGATIVE_INFINITY),o==null&&(o=0);let s=t.shape[0];return e=Math.min(e,s),A(0<=i&&i<=1,()=>`iouThreshold must be in [0, 1], but was '${i}'`),A(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),A(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),A(n.rank===1,()=>"scores must be a 1D tensor"),A(n.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${n.shape[0]}`),A(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:e,iouThreshold:i,scoreThreshold:r,softNmsSigma:o}}function _De(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY){let o=S(t,"boxes","nonMaxSuppression","float32"),s=S(n,"scores","nonMaxSuppression","float32"),a=ys(o,s,e,i,r);e=a.maxOutputSize,i=a.iouThreshold,r=a.scoreThreshold;let l={maxOutputSize:e,iouThreshold:i,scoreThreshold:r};return I.runKernel(dy,{boxes:o,scores:s},l)}var pY=E({nonMaxSuppression_:_De});function hY(t,n,e){let i=wDe(t,n,e),r=i<0?-(i+1):i;t.splice(r,0,n)}function wDe(t,n,e){return TDe(t,n,e||CDe)}function CDe(t,n){return t>n?1:t<n?-1:0}function TDe(t,n,e){let i=0,r=t.length,o=0,s=!1;for(;i<r;){o=i+(r-i>>>1);let a=e(n,t[o]);a>0?i=o+1:(r=o,s=!a)}return s?i:-i-1}function Bk(t,n,e,i,r){return nP(t,n,e,i,r,0)}function zk(t,n,e,i,r,o){return nP(t,n,e,i,r,0,!1,o,!0)}function Gk(t,n,e,i,r,o){return nP(t,n,e,i,r,o,!0)}function nP(t,n,e,i,r,o,s=!1,a=!1,l=!1){let c=[];for(let f=0;f<n.length;f++)n[f]>r&&c.push({score:n[f],boxIndex:f,suppressBeginIndex:0});c.sort(mY);let u=o>0?-.5/o:0,d=[],p=[];for(;d.length<e&&c.length>0;){let f=c.pop(),{score:y,boxIndex:b,suppressBeginIndex:v}=f;if(y<r)break;let _=!1;for(let w=d.length-1;w>=v;--w){let T=SDe(t,b,d[w]);if(T>=i){_=!0;break}if(f.score=f.score*kDe(i,u,T),f.score<=r)break}f.suppressBeginIndex=d.length,_||(f.score===y?(d.push(b),p.push(f.score)):f.score>r&&hY(c,f,mY))}let h=d.length,m=e-h;a&&m>0&&(d.push(...new Array(m).fill(0)),p.push(...new Array(m).fill(0)));let g={selectedIndices:d};return s&&(g.selectedScores=p),l&&(g.validOutputs=h),g}function SDe(t,n,e){let i=t.subarray(n*4,n*4+4),r=t.subarray(e*4,e*4+4),o=Math.min(i[0],i[2]),s=Math.min(i[1],i[3]),a=Math.max(i[0],i[2]),l=Math.max(i[1],i[3]),c=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),d=Math.max(r[0],r[2]),p=Math.max(r[1],r[3]),h=(a-o)*(l-s),m=(d-c)*(p-u);if(h<=0||m<=0)return 0;let g=Math.max(o,c),f=Math.max(s,u),y=Math.min(a,d),b=Math.min(l,p),v=Math.max(y-g,0)*Math.max(b-f,0);return v/(h+m-v)}function kDe(t,n,e){let i=Math.exp(n*e*e);return e<=t?i:0}function mY(t,n){return t.score-n.score||t.score===n.score&&n.boxIndex-t.boxIndex}function IDe(o,s,a){return H(this,arguments,function*(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY){let l=S(t,"boxes","nonMaxSuppressionAsync"),c=S(n,"scores","nonMaxSuppressionAsync"),u=ys(l,c,e,i,r);e=u.maxOutputSize,i=u.iouThreshold,r=u.scoreThreshold;let d=yield Promise.all([l.data(),c.data()]),p=d[0],h=d[1],{selectedIndices:m}=Bk(p,h,e,i,r);return l!==t&&l.dispose(),c!==n&&c.dispose(),In(m,"int32")})}var fY=IDe;function EDe(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=0){let s=S(t,"boxes","nonMaxSuppression"),a=S(n,"scores","nonMaxSuppression"),l=ys(s,a,e,i,r,o);e=l.maxOutputSize,i=l.iouThreshold,r=l.scoreThreshold,o=l.softNmsSigma;let c={boxes:s,scores:a},u={maxOutputSize:e,iouThreshold:i,scoreThreshold:r,softNmsSigma:o},d=I.runKernel(hy,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}var gY=E({nonMaxSuppressionWithScore_:EDe});function DDe(s,a,l){return H(this,arguments,function*(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=0){let c=S(t,"boxes","nonMaxSuppressionAsync"),u=S(n,"scores","nonMaxSuppressionAsync"),d=ys(c,u,e,i,r,o);e=d.maxOutputSize,i=d.iouThreshold,r=d.scoreThreshold,o=d.softNmsSigma;let p=yield Promise.all([c.data(),u.data()]),h=p[0],m=p[1],{selectedIndices:g,selectedScores:f}=Gk(h,m,e,i,r,o);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:In(g,"int32"),selectedScores:In(f)}})}var yY=DDe;function ADe(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=!1){let s=S(t,"boxes","nonMaxSuppression"),a=S(n,"scores","nonMaxSuppression"),l=ys(s,a,e,i,r,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,p={boxes:s,scores:a},h={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:o},m=I.runKernel(py,p,h);return{selectedIndices:m[0],validOutputs:m[1]}}var bY=E({nonMaxSuppressionPadded_:ADe});function NDe(s,a,l){return H(this,arguments,function*(t,n,e,i=.5,r=Number.NEGATIVE_INFINITY,o=!1){let c=S(t,"boxes","nonMaxSuppressionAsync"),u=S(n,"scores","nonMaxSuppressionAsync"),d=ys(c,u,e,i,r,null),p=d.maxOutputSize,h=d.iouThreshold,m=d.scoreThreshold,[g,f]=yield Promise.all([c.data(),u.data()]),{selectedIndices:y,validOutputs:b}=zk(g,f,p,h,m,o);return c!==t&&c.dispose(),u!==n&&u.dispose(),{selectedIndices:In(y,"int32"),validOutputs:je(b,"int32")}})}var xY=NDe;function MDe(t,n,e=!1,i=!1){let r=S(t,"images","resizeBilinear");A(r.rank===3||r.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),A(n.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${n}.`),A(i===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=r,s=!1;r.rank===3&&(s=!0,o=$(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let[]=n,a={images:o},l={alignCorners:e,halfPixelCenters:i,size:n},c=I.runKernel(kd,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var Uk=E({resizeBilinear_:MDe});function RDe(t,n,e=!1,i=!1){let r=S(t,"images","resizeNearestNeighbor");A(r.rank===3||r.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),A(n.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${n}.`),A(r.dtype==="float32"||r.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),A(i===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=r,s=!1;r.rank===3&&(s=!0,o=$(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let[]=n,a={images:o},l={alignCorners:e,halfPixelCenters:i,size:n},c=I.runKernel(Sd,a,l);return s?$(c,[c.shape[1],c.shape[2],c.shape[3]]):c}var Hk=E({resizeNearestNeighbor_:RDe});function ODe(t,n="binary",e=!1,i=.5){let r=S(t,"image","threshold"),o=.2989,s=.587,a=.114,l=r.shape[0]*r.shape[1],c=F(In([i]),255),u,d,p,h;if(A(r.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`),A(r.shape[2]===3||r.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`),A(r.dtype==="int32"||r.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`),A(n==="otsu"||n==="binary",()=>`Method must be binary or otsu, but was ${n}`),r.shape[2]===3){[u,d,p]=fi(r,[1,1,1],-1);let f=F(u,o),y=F(d,s),b=F(p,a);h=re(re(f,y),b)}else h=t;if(n==="otsu"){let f=vK(ce(G0(h),"int32"),$i([]),256);c=FDe(f,l)}let m=e?fs(h,c):Un(h,c);return ce(F(m,255),"int32")}function FDe(t,n){let e=In([-1]),i=In([0]),r=In([0]),o,s,a,l,c,u;for(let d=0;d<t.size-1;d++){o=Rt(t,0,d+1),s=Rt(t,d+1),c=_e(Te(o),n),u=_e(Te(s),n);let p=Te(F(o,qc(0,o.size)));a=_e(p,Te(o));let h=Gc(s.shape,o.size),m=re(qc(0,s.size),h),g=F(s,m);l=_e(Te(g),Te(s));let f=Ee(a,l),y=Ee(a,l),b=F(c,u);r=F(F(b,f),y);let v=Un(r,i);i=vn(v,r,i),e=vn(v,In([d]),e)}return e}var vY=E({threshold_:ODe});function LDe(t,n,e="nearest",i="constant",r=0,o){let s=S(t,"image","transform","float32"),a=S(n,"transforms","transform","float32");A(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),A(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),A(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);let l={image:s,transforms:a},c={interpolation:e,fillMode:i,fillValue:r,outputShape:o};return I.runKernel(_y,l,c)}var _Y=E({transform_:LDe});function PDe(t,n,e){let i=S(t,"a","bandPart");A(i.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${i.rank}.`);let r=i.shape,[o,s]=i.shape.slice(-2),a,l;typeof n=="number"?(A(n%1===0,()=>`bandPart(): numLower must be an integer, got ${n}.`),A(n<=o,()=>`bandPart(): numLower (${n}) must not be greater than the number of rows (${o}).`),a=S(n<0?o:n,"numLower","bandPart")):(A(n.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=vn(em(n,0),o,gs(n,o))),typeof e=="number"?(A(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),A(e<=s,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${s}).`),l=S(e<0?s:e,"numUpper","bandPart")):(A(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=vn(em(e,0),s,gs(e,s)));let c=$(qc(0,o,1,"int32"),[-1,1]),u=qc(0,s,1,"int32"),d=Ee(c,u),p=lr(fs(d,a),Qr(d,Tt(l))),h=_n([o,s],i.dtype);return $(li(ur($(i,[-1,o,s])).map(m=>vn(p,m,h))),r)}var wY=E({bandPart_:PDe});function $De(t){let n;if(Array.isArray(t)){n=!1,A(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let r=t[0].shape[0];for(let o=1;o<t.length;++o)A(t[o].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[o].shape[0]} vs. ${r})`)}else n=!0,t=fi(t,t.shape[0],0).map(r=>Js(r,[0]));A(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);let e=[],i=t;for(let r=0;r<t.length;++r)e.push(I.tidy(()=>{let o=i[r];if(r>0)for(let s=0;s<r;++s){let a=F(Te(F(e[s],o)),e[s]);o=Ee(o,a)}return _e(o,Wd(o,"euclidean"))}));return n?li(e,0):e}var CY=E({gramSchmidt_:$De});function VDe(t,n=!1){if(A(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return TY(t,n);{let e=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),i=ur($(t,[e,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),r=[],o=[];i.forEach(l=>{let[c,u]=TY(l,n);r.push(c),o.push(u)});let s=$(li(r,0),t.shape),a=$(li(o,0),t.shape);return[s,a]}}function TY(t,n=!1){return I.tidy(()=>{A(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);let e=t.shape[0],i=t.shape[1],r=Vy(e),o=vo(t),s=cr([[1]],[1,1]),a=vo(s),l=e>=i?i:e;for(let c=0;c<l;++c){let u=o,d=a,p=r;[a,o,r]=I.tidy(()=>{let h=Rt(o,[c,c],[e-c,1]),m=Wd(h),g=Rt(o,[c,c],[1,1]),f=vn(Un(g,0),cr([[-1]]),cr([[1]])),y=Ee(g,F(f,m)),b=_e(h,y);b.shape[0]===1?a=vo(s):a=xn([s,Rt(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);let v=Tt(_e(Wt(f,y),m)),_=Rt(o,[c,0],[e-c,i]),w=F(v,a),T=gt(a);if(c===0)o=Ee(_,Wt(w,Wt(T,_)));else{let O=Ee(_,Wt(w,Wt(T,_)));o=xn([Rt(o,[0,0],[c,i]),O],0)}let D=gt(w),N=Rt(r,[0,c],[e,r.shape[1]-c]);if(c===0)r=Ee(N,Wt(Wt(N,a),D));else{let O=Ee(N,Wt(Wt(N,a),D));r=xn([Rt(r,[0,0],[e,c]),O],1)}return[a,o,r]}),it([u,d,p])}return!n&&e>i&&(r=Rt(r,[0,0],[e,i]),o=Rt(o,[0,0],[i,i])),[r,o]})}var SY=E({qr_:VDe});var So={flipLeftRight:lY,grayscaleToRGB:cY,resizeNearestNeighbor:Hk,resizeBilinear:Uk,rgbToGrayscale:uY,rotateWithOffset:dY,cropAndResize:aY,nonMaxSuppression:pY,nonMaxSuppressionAsync:fY,nonMaxSuppressionWithScore:gY,nonMaxSuppressionWithScoreAsync:yY,nonMaxSuppressionPadded:bY,nonMaxSuppressionPaddedAsync:xY,threshold:vY,transform:_Y},kY={bandPart:wY,gramSchmidt:CY,qr:SY};var ne={};Ko(ne,{Serializable:()=>Z0,SerializationMap:()=>Wk,getRegisteredName:()=>zDe,registerClass:()=>rP});var BDe=new Map,iP=new Map,Z0=class{getClassName(){return this.constructor.className}static fromConfig(n,e){return new n(e)}},Wk=class t{constructor(){this.classNameMap={}}static getMap(){return t.instance==null&&(t.instance=new t),t.instance}static register(n){t.getMap().classNameMap[n.className]=[n,n.fromConfig]}};function rP(t,n,e){A(t.className!=null,()=>"Class being registered does not have the static className property defined."),A(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),A(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof n>"u"&&(n="Custom"),typeof e>"u"&&(e=t.className);let i=e,r=n+">"+i;return Wk.register(t),BDe.set(r,t),iP.set(t,r),t}function zDe(t){return iP.has(t)?iP.get(t):t.className}var Zi=class extends Z0{minimize(n,e=!1,i){let{value:r,grads:o}=this.computeGradients(n,i);if(i!=null){let s=i.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(s)}else this.applyGradients(o);return it(o),e?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(n,e){return VL(n,e)}dispose(){this.iterations_!=null&&it(this.iterations_)}saveIterations(){return H(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:je(this.iterations_,"int32")}})}getWeights(){return H(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(n){return H(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(n){return H(this,null,function*(){return this.iterations_=(yield n[0].tensor.data())[0],n.slice(1)})}};Object.defineProperty(Zi,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});var Ky=class extends Zi{static get className(){return"Adadelta"}constructor(n,e,i=null){super(),this.learningRate=n,this.rho=e,this.epsilon=i,this.accumulatedGrads=[],this.accumulatedUpdates=[],i==null&&(this.epsilon=I.backend.epsilon())}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i],s=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${i}/accum_grad`,variable:W(()=>He(o).variable(s))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${i}/accum_var`,variable:W(()=>He(o).variable(s))});let a=Array.isArray(n)?n[r].tensor:n[i];if(a==null)return;let l=this.accumulatedGrads[r].variable,c=this.accumulatedUpdates[r].variable;W(()=>{let u=re(F(l,this.rho),F(yt(a),1-this.rho)),d=F(_e(un(re(c,this.epsilon)),un(re(l,this.epsilon))),a),p=re(F(c,this.rho),F(yt(d),1-this.rho));l.assign(u),c.assign(p);let h=re(F(d,-this.learningRate),o);o.assign(h)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(it(this.accumulatedGrads.map(n=>n.variable)),it(this.accumulatedUpdates.map(n=>n.variable)))}getWeights(){return H(this,null,function*(){let n=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return H(this,null,function*(){n=yield this.extractIterations(n);let e=n.length/2,i=!1;this.accumulatedGrads=n.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedUpdates=n.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.rho,e.epsilon)}};var Yy=class extends Zi{static get className(){return"Adagrad"}constructor(n,e=.1){super(),this.learningRate=n,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${i}/accumulator`,variable:W(()=>Gc(o.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(n)?n[r].tensor:n[i];if(s==null)return;let a=this.accumulatedGrads[r].variable;W(()=>{let l=re(a,yt(s));a.assign(l);let c=re(F(_e(s,un(re(l,I.backend.epsilon()))),-this.learningRate),o);o.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&it(this.accumulatedGrads.map(n=>n.variable))}getWeights(){return H(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return H(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulatedGrads=n.map(i=>({originalName:i.name,variable:i.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(n,e){return new n(e.learningRate,e.initialAccumulatorValue)}};var Qy=class extends Zi{static get className(){return"Adam"}constructor(n,e,i,r=null){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],W(()=>{this.accBeta1=je(e).variable(),this.accBeta2=je(i).variable()}),r==null&&(this.epsilon=I.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);W(()=>{let i=Ee(1,this.accBeta1),r=Ee(1,this.accBeta2);e.forEach((o,s)=>{let a=I.registeredVariables[o],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:W(()=>He(a).variable(l))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${o}/v`,variable:W(()=>He(a).variable(l))});let c=Array.isArray(n)?n[s].tensor:n[o];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedSecondMoment[s].variable,p=re(F(u,this.beta1),F(c,1-this.beta1)),h=re(F(d,this.beta2),F(yt(c),1-this.beta2)),m=_e(p,i),g=_e(h,r);u.assign(p),d.assign(h);let f=re(F(_e(m,re(un(g),this.epsilon)),-this.learningRate),a);a.assign(f)}),this.accBeta1.assign(F(this.accBeta1,this.beta1)),this.accBeta2.assign(F(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&it(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedSecondMoment!=null&&it(this.accumulatedSecondMoment.map(n=>n.variable))}getWeights(){return H(this,null,function*(){let n=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return H(this,null,function*(){n=yield this.extractIterations(n),W(()=>{this.accBeta1.assign(Yr(this.beta1,this.iterations_+1)),this.accBeta2.assign(Yr(this.beta2,this.iterations_+1))});let e=n.length/2,i=!1;this.accumulatedFirstMoment=n.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedSecondMoment=n.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon)}};var Zy=class extends Zi{static get className(){return"Adamax"}constructor(n,e,i,r=null,o=0){super(),this.learningRate=n,this.beta1=e,this.beta2=i,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],W(()=>{this.iteration=je(0).variable(),this.accBeta1=je(e).variable()}),r==null&&(this.epsilon=I.backend.epsilon())}applyGradients(n){let e=Array.isArray(n)?n.map(i=>i.name):Object.keys(n);W(()=>{let i=Ee(1,this.accBeta1),r=_e(-this.learningRate,re(F(this.iteration,this.decay),1));e.forEach((o,s)=>{let a=I.registeredVariables[o],l=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:He(a).variable(l)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${o}/v`,variable:He(a).variable(l)});let c=Array.isArray(n)?n[s].tensor:n[o];if(c==null)return;let u=this.accumulatedFirstMoment[s].variable,d=this.accumulatedWeightedInfNorm[s].variable,p=re(F(u,this.beta1),F(c,1-this.beta1)),h=F(d,this.beta2),m=ii(c),g=Co(h,m);u.assign(p),d.assign(g);let f=re(F(_e(r,i),_e(p,re(g,this.epsilon))),a);a.assign(f)}),this.iteration.assign(re(this.iteration,1)),this.accBeta1.assign(F(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&it(this.accumulatedFirstMoment.map(n=>n.variable)),this.accumulatedWeightedInfNorm!=null&&it(this.accumulatedWeightedInfNorm.map(n=>n.variable))}getWeights(){return H(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(n){return H(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(n,e){return new n(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}};var qd=class extends Zi{static get className(){return"SGD"}constructor(n){super(),this.learningRate=n,this.setLearningRate(n)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=Array.isArray(n)?n[r].tensor:n[i];if(o==null)return;let s=I.registeredVariables[i];W(()=>{let a=re(F(this.c,o),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=_i(je(-n))}dispose(){this.c.dispose()}getWeights(){return H(this,null,function*(){return[yield this.saveIterations()]})}setWeights(n){return H(this,null,function*(){if(n=yield this.extractIterations(n),n.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(n,e){return new n(e.learningRate)}};var Jy=class extends qd{static get className(){return"Momentum"}constructor(n,e,i=!1){super(n),this.learningRate=n,this.momentum=e,this.useNesterov=i,this.accumulations=[],this.m=je(this.momentum)}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${i}/momentum`,variable:W(()=>He(o).variable(!1))});let s=this.accumulations[r].variable,a=Array.isArray(n)?n[r].tensor:n[i];a!=null&&W(()=>{let l,c=re(F(this.m,s),a);this.useNesterov?l=re(F(this.c,re(a,F(c,this.m))),o):l=re(F(this.c,c),o),s.assign(c),o.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&it(this.accumulations.map(n=>n.variable))}setMomentum(n){this.momentum=n}getWeights(){return H(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(n=>({name:n.originalName,tensor:n.variable})))})}setWeights(n){return H(this,null,function*(){n=yield this.extractIterations(n);let e=!1;this.accumulations=n.map(i=>({originalName:i.name,variable:i.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(n,e){return new n(e.learningRate,e.momentum,e.useNesterov)}};var eb=class extends Zi{static get className(){return"RMSProp"}constructor(n,e=.9,i=0,r=null,o=!1){if(super(),this.learningRate=n,this.decay=e,this.momentum=i,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,r==null&&(this.epsilon=I.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(n){(Array.isArray(n)?n.map(i=>i.name):Object.keys(n)).forEach((i,r)=>{let o=I.registeredVariables[i],s=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${i}/rms`,variable:W(()=>He(o).variable(s))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${i}/momentum`,variable:W(()=>He(o).variable(s))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${i}/mg`,variable:W(()=>He(o).variable(s))});let a=Array.isArray(n)?n[r].tensor:n[i];if(a==null)return;let l=this.accumulatedMeanSquares[r].variable,c=this.accumulatedMoments[r].variable;W(()=>{let u=re(F(l,this.decay),F(yt(a),1-this.decay));if(this.centered){let d=this.accumulatedMeanGrads[r].variable,p=re(F(d,this.decay),F(a,1-this.decay)),h=_e(F(a,this.learningRate),un(Ee(u,re(yt(p),this.epsilon)))),m=re(F(c,this.momentum),h);l.assign(u),d.assign(p),c.assign(m);let g=Ee(o,m);o.assign(g)}else{let d=re(F(l,this.decay),F(yt(a),1-this.decay)),p=re(F(c,this.momentum),_e(F(a,this.learningRate),un(re(d,this.epsilon))));l.assign(d),c.assign(p);let h=Ee(o,p);o.assign(h)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&it(this.accumulatedMeanSquares.map(n=>n.variable)),this.accumulatedMeanGrads!=null&&this.centered&&it(this.accumulatedMeanGrads.map(n=>n.variable)),this.accumulatedMoments!=null&&it(this.accumulatedMoments.map(n=>n.variable))}getWeights(){return H(this,null,function*(){let n=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&n.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(n.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(n){return H(this,null,function*(){n=yield this.extractIterations(n);let e=this.centered?n.length/3:n.length/2,i=!1;this.accumulatedMeanSquares=n.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.accumulatedMoments=n.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})),this.centered&&(this.accumulatedMeanGrads=n.slice(e*2,e*3).map(r=>({originalName:r.name,variable:r.tensor.variable(i)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(n,e){return new n(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}};var GDe=[Ky,Yy,Qy,Zy,Jy,eb,qd];function IY(){for(let t of GDe)rP(t)}var bs={};Ko(bs,{CompositeArrayBuffer:()=>Yi,browserFiles:()=>DY,browserHTTPRequest:()=>OY,concatenateArrayBuffers:()=>KX,copyModel:()=>cK,decodeWeights:()=>wk,decodeWeightsStream:()=>tL,encodeWeights:()=>WX,fromMemory:()=>FY,fromMemorySync:()=>dP,getLoadHandlers:()=>JX,getModelArtifactsForJSON:()=>Ay,getModelArtifactsForJSONSync:()=>rL,getModelArtifactsInfoForJSON:()=>ja,getSaveHandlers:()=>ZX,getWeightSpecs:()=>E0,http:()=>qk,isHTTPScheme:()=>jk,listModels:()=>aK,loadWeights:()=>NY,moveModel:()=>uK,registerLoadRouter:()=>QX,registerSaveRouter:()=>YX,removeModel:()=>lK,weightsLoaderFactory:()=>cP,withSaveHandler:()=>LY,withSaveHandlerSync:()=>PY});var UDe="model",HDe=".json",WDe=".weights.bin";function EY(t){return new Promise(n=>setTimeout(n)).then(t)}var oP=(()=>{class t{constructor(e){if(!G().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),(e==null||e.length===0)&&(e=UDe),this.modelJsonFileName=e+HDe,this.weightDataFileName=e+WDe}save(e){return H(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let i=Yi.join(e.weightData),r=window.URL.createObjectURL(new Blob([i],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let o=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=Ck(e,o),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),l=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(l.download=this.modelJsonFileName,l.href=a,yield EY(()=>l.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let c=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;c.download=this.weightDataFileName,c.href=r,yield EY(()=>c.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:ja(e)}}})}}return t.URL_SCHEME="downloads://",t})();var sP=class{constructor(n){if(n==null||n.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${n}`);this.jsonFile=n[0],this.weightsFiles=n.slice(1)}load(){return H(this,null,function*(){return new Promise((n,e)=>{let i=new FileReader;i.onload=r=>{let o=JSON.parse(r.target.result),s=o.modelTopology;if(s==null){e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){n({modelTopology:s});return}let l=Ay(o,c=>this.loadWeights(c));n(l)},i.onerror=r=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(this.jsonFile)})})}loadWeights(n){let e=[],i=[];for(let s of n)e.push(...s.weights),i.push(...s.paths);let r=this.checkManifestAndWeightFiles(n),o=i.map(s=>this.loadWeightsFile(s,r[s]));return Promise.all(o).then(s=>[e,s])}loadWeightsFile(n,e){return new Promise((i,r)=>{let o=new FileReader;o.onload=s=>{let a=s.target.result;i(a)},o.onerror=s=>r(`Failed to weights data from file of path '${n}'.`),o.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(n){let e=[],i=this.weightsFiles.map(o=>iL(o.name)),r={};for(let o of n)o.paths.forEach(s=>{let a=iL(s);if(e.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),i.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);r[s]=this.weightsFiles[i.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}},jDe=t=>G().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(oP.URL_SCHEME)?qDe(t.slice(oP.URL_SCHEME.length)):null;wi.registerSaveRouter(jDe);function qDe(t="model"){return new oP(t)}function DY(t){return new sP(t)}function aP(t,n,e,i){s(t),e=e??0,i=i??1,a(e,i);let r=0,o=l=>(l.then(c=>{let u=e+ ++r/t.length*(i-e);return n(u),c}),l);function s(l){A(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){A(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),A(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),A(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(o))}function lP(t,n){return H(this,null,function*(){n==null&&(n={});let e=n.fetchFunc==null?G().platform.fetch:n.fetchFunc,i=t.map(d=>e(d,n.requestInit,{isBinary:!0})),a=(n.onProgress==null?yield Promise.all(i):yield aP(i,n.onProgress,0,.5)).map(d=>d.arrayBuffer());return n.onProgress==null?yield Promise.all(a):yield aP(a,n.onProgress,.5,1)})}function AY(t,n){var e;let i=n.fetchFunc==null?G().platform.fetch:n.fetchFunc,r=0,o;return(e=n.onProgress)===null||e===void 0||e.call(n,0),new ReadableStream({pull:s=>H(null,null,function*(){for(var a;r<t.length;){o||(o=(yield i(t[r],n.requestInit,{isBinary:!0})).body.getReader());let{done:l,value:c}=yield o.read();if(l){r++,o=void 0,(a=n.onProgress)===null||a===void 0||a.call(n,r/t.length);continue}s.enqueue(c);return}s.close()})})}function NY(t,n="",e,i){return H(this,null,function*(){return cP(s=>lP(s,{requestInit:i}))(t,n,e)})}function cP(t){return(n,e="",i)=>H(null,null,function*(){let r=n.map(()=>!1),o={},s=i!=null?i.map(()=>!1):[],a=[];if(n.forEach((h,m)=>{let g=0;h.weights.forEach(f=>{let y="quantization"in f?f.quantization.dtype:f.dtype,b=$c[y]*Ht(f.shape),v=()=>{r[m]=!0,o[m]==null&&(o[m]=[]),o[m].push({manifestEntry:f,groupOffset:g,sizeBytes:b})};i!=null?i.forEach((_,w)=>{_===f.name&&(v(),s[w]=!0)}):v(),a.push(f.name),g+=b})}),!s.every(h=>h)){let h=i.filter((m,g)=>!s[g]);throw new Error(`Could not find weights in manifest with names: ${h.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let l=r.reduce((h,m,g)=>(m&&h.push(g),h),[]),c=[];l.forEach(h=>{n[h].paths.forEach(m=>{let g=e+(e.endsWith("/")?"":"/")+m;c.push(g)})});let u=yield t(c),d={},p=0;return l.forEach(h=>{let m=n[h].paths.length,g=new Yi(u.slice(p,p+m));o[h].forEach(y=>{let b=g.slice(y.groupOffset,y.groupOffset+y.sizeBytes),v=wk(b,[y.manifestEntry]);for(let _ in v)d[_]=v[_]}),p+=m}),d})}var XDe="application/octet-stream",KDe="application/json",MY=(()=>{class t{constructor(e,i){if(this.DEFAULT_METHOD="POST",i==null&&(i={}),this.weightPathPrefix=i.weightPathPrefix,this.weightUrlConverter=i.weightUrlConverter,i.fetchFunc!=null?(A(typeof i.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=i.fetchFunc):this.fetch=G().platform.fetch,A(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&A(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,i.requestInit!=null&&i.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=i.requestInit||{},this.loadOptions=i}save(e){return H(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let i=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);i.body=new FormData;let r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o=Ck(e,r);if(i.body.append("model.json",new Blob([JSON.stringify(o)],{type:KDe}),"model.json"),e.weightData!=null){let a=Yi.join(e.weightData);i.body.append("model.weights.bin",new Blob([a],{type:XDe}),"model.weights.bin")}let s=yield this.fetch(this.path,i);if(s.ok)return{modelArtifactsInfo:ja(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return H(this,null,function*(){let e=yield this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let i;try{i=yield e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let r=i.modelTopology,o=i.weightsManifest;if(r==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return i})}load(){return H(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let e=yield this.loadModelJSON();return Ay(e,i=>this.loadWeights(i))})}loadStream(){return H(this,null,function*(){let e=yield this.loadModelJSON(),i=yield this.getWeightUrls(e.weightsManifest),r=E0(e.weightsManifest),o=()=>AY(i,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:o})})}getWeightUrls(e){return H(this,null,function*(){let i=Array.isArray(this.path)?this.path[1]:this.path,[r,o]=YDe(i),s=this.weightPathPrefix||r,a=[],l=[];for(let c of e)for(let u of c.paths)this.weightUrlConverter!=null?l.push(this.weightUrlConverter(u)):a.push(s+u+o);return this.weightUrlConverter&&a.push(...yield Promise.all(l)),a})}loadWeights(e){return H(this,null,function*(){let i=yield this.getWeightUrls(e),r=E0(e),o=yield lP(i,this.loadOptions);return[r,o]})}}return t.URL_SCHEME_REGEX=/^https?:\/\//,t})();function YDe(t){let n=t.lastIndexOf("/"),e=t.lastIndexOf("?"),i=t.substring(0,n),r=e>n?t.substring(e):"";return[i+"/",r]}function jk(t){return t.match(MY.URL_SCHEME_REGEX)!=null}var RY=(t,n)=>{if(typeof fetch>"u"&&(n==null||n.fetchFunc==null))return null;{let e=!0;if(Array.isArray(t)?e=t.every(i=>jk(i)):e=jk(t),e)return qk(t,n)}return null};wi.registerSaveRouter(RY);wi.registerLoadRouter(RY);function qk(t,n){return new MY(t,n)}function OY(t,n){return qk(t,n)}var J0=class{constructor(n){this.modelArtifacts=n}load(){return this.modelArtifacts}},Xk=class{constructor(n){this.saveHandler=n}save(n){return this.saveHandler(n)}},uP=class{constructor(n){n.load&&(this.load=()=>Promise.resolve(n.load())),n.save&&(this.save=e=>Promise.resolve(n.save(e)))}};function FY(t,n,e,i){let r=arguments;return new uP(dP(...r))}function dP(t,n,e,i){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new J0(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new J0({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new J0({modelTopology:t,weightSpecs:n,weightData:e,trainingConfig:i}))}function LY(t){return new Xk(t)}function PY(t){return new Xk(t)}function QDe(t,n){let e=t.shape.length,i=n.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(i<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${i}.`);if(n.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${n.dtype}.`);if(n.shape[i-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${n.shape[i-1]} vs. ${e}`);if(Ht(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);let r=n.shape,o=r[r.length-1],s=1;for(let d=0;d<r.length-1;++d)s*=r[d];let a=t.shape,l=r.slice();l.pop();let c=1;for(let d=o;d<e;++d)c*=a[d],l.push(a[d]);let u=[...Ba(t.shape).map(d=>d/c),1].slice(0,o);return[l,s,c,u]}var Ti={};Ko(Ti,{assertParamsValid:()=>JDe,computeFlatOffset:()=>rAe,computeOutShape:()=>tAe,getNormalizedAxes:()=>nAe,isSliceContinous:()=>iAe,maskToAxes:()=>eAe,parseSliceParams:()=>hP,sliceInfo:()=>oAe,startForAxis:()=>WY,startIndicesWithElidedDims:()=>GY,stopForAxis:()=>jY,stopIndicesWithElidedDims:()=>UY,stridesForAxis:()=>HY,stridesWithElidedDims:()=>VY});var pP=-2,ZDe=-1;function JDe(t,n,e){let i=t.shape.length;A(i===n.length,()=>`Error in slice${i}D: Length of begin ${n} must match the rank of the array (${i}).`),A(i===e.length,()=>`Error in slice${i}D: Length of size ${e} must match the rank of the array (${i}).`);for(let r=0;r<i;++r)A(n[r]+e[r]<=t.shape[r],()=>`Error in slice${i}D: begin[${r}] + size[${r}] (${n[r]+e[r]}) would overflow input.shape[${r}] (${t.shape[r]})`)}function eAe(t){let n=[],e=0;for(;t>0;)t&1&&n.push(e),t/=2,e++;return n}function tAe(t,n,e){let i=[];for(let r=0;r<t.length;r++)i[r]=Math.ceil((n[r]-t[r])/e[r]);return i}function VY(t,n,e,i){let r=[...t];for(let o=r.length;o<i.length;o++)r.push(1);for(let o=0;o<e;o++)o===0?r[n]=1:(r.splice(n,0,1),r.pop());return r}function BY(t,n,e){return e<=t?e:e-(n-1)}function zY(t,n){let e=[];for(let i=0;i<t;i++)e.push(n+i);return e}function nAe(t,n,e,i,r,o,s,a,l){let c=t.length,u=new Array(c),d=new Array(c),p=new Array(c);if(n.length&&e>0){let h=n[0],m=e+1;u=GY(s,h,m,i,t),d=UY(a,h,m,r,t),p=VY(o,h,m,t)}else for(let h=0;h<c;h++)u[h]=WY(s,i,o,t,h,l),d[h]=jY(a,r,o,t,h,l),p[h]=HY(o,h,l);return{begin:u,end:d,strides:p}}function GY(t,n,e,i,r){let o=[...r],s=zY(e,n);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=0;else{let l=BY(n,e,a),c=i[l];t&1<<l&&(c=0),o[a]=c}return o}function UY(t,n,e,i,r){let o=[...r],s=zY(e,n);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{let l=BY(n,e,a),c=i[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),o[a]=c}for(let a=0;a<o.length;a++){let l=r[a];o[a]<0&&(o[a]+=l),o[a]=Rg(0,o[a],r[a])}return o}function HY(t,n,e){let i=t[n];return(e&1<<n||i==null)&&(i=1),i}function WY(t,n,e,i,r,o){let s=n[r],a=e[r]||1;(t&1<<r||o&1<<r||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let l=i[r];return s<0&&(s+=l),s=Rg(0,s,l-1),s}function jY(t,n,e,i,r,o){let s=n[r],a=e[r]||1;(t&1<<r||o&1<<r||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let l=i[r];return s<0&&(s+=l),a>0?s=Rg(0,s,l):s=Rg(-1,s,l-1),s}function iAe(t,n,e){let i=e.length;for(let r=0;r<e.length;r++)if(e[r]>1){i=r;break}for(let r=i+1;r<e.length;r++)if(n[r]>0||e[r]!==t[r])return!1;return!0}function rAe(t,n){let e=t.length>0?t[t.length-1]:1;for(let i=0;i<t.length-1;i++)e+=t[i]*n[i];return e}function hP(t,n,e){let i,r=t.shape.length;typeof n=="number"?i=[n,...new Array(r-1).fill(0)]:n.length<r?i=n.concat(new Array(r-n.length).fill(0)):i=n.slice(),i.forEach(s=>{A(s!==-1,()=>"slice() does not support negative begin indexing.")});let o;return e==null?o=new Array(r).fill(-1):typeof e=="number"?o=[e,...new Array(r-1).fill(-1)]:e.length<r?o=e.concat(new Array(r-e.length).fill(-1)):o=e,o=o.map((s,a)=>s>=0?s:(A(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),t.shape[a]-i[a])),[i,o]}function oAe(t,n,e,i,r,o,s,a,l){let c;if(i==null?(c=new Array(n.length),c.fill(1)):c=i,s!=null&&(s&s-1)!==0)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:n.slice(),end:e.slice(),strides:c.slice(),beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let v=0;v<d.dims;v++)u&&(1<<v&a)!==0&&d.numAddAxisAfterEllipsis++,1<<v&s&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);let p={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};sAe(d,p);let h=!0,m=!0,g=!0,f=[],y=[];for(let v=0;v<t.length;++v){if(p.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);let _=!!(p.shrinkAxisMask&1<<v),w=t[v];if(w===-1){f.push(_?1:-1);continue}let T=[p.beginMask&1<<v,p.endMask&1<<v],D=[p.strides[v]>0?0:-1,p.strides[v]>0?w:w-1];if(_&&p.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&p.strides[v]===1;let N=!!(p.beginMask&1<<v&&p.endMask&1<<v);if(p.beginValid&&p.endValid){if(_){let K=p.begin[v]<0?w+p.begin[v]:p.begin[v];if(p.begin[v]=K,p.end[v]=p.begin[v]+1,K<0||K>=w)throw Error(`slice index ${p.begin[v]} of dimension ${v} out of bounds.`)}else p.begin[v]=$Y(p.begin[v],0,p.strides[v],w,T,D),p.end[v]=$Y(p.end[v],1,p.strides[v],w,T,D);let B=p.strides[v]===1&&p.begin[v]===0&&p.end[v]===w;h=h&&B,m=m&&(v===0&&p.strides[v]===1||B)}else h=h&&p.strides[v]===1&&N,m=m&&(v===0&&p.strides[v]===1||N);let O,P=!1;if(p.beginValid&&p.endValid?(O=p.end[v]-p.begin[v],P=!0):_?(O=1,P=!0):N&&w>=0&&(p.strides[v]<0?O=-w:O=w,P=!0),P){let B;O===0||O<0!=p.strides[v]<0?B=0:B=Math.trunc(O/p.strides[v])+(O%p.strides[v]!==0?1:0),f.push(B)}else f.push(-1)}for(let v=0;v<p.finalShapeGatherIndices.length;++v){let _=p.finalShapeGatherIndices[v];_>=0?y.push(f[_]):_===pP&&y.push(1)}return{finalShapeSparse:y.filter((v,_)=>p.finalShapeGatherIndices[_]!==pP),finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function sAe(t,n){n.beginMask=0,n.endMask=0,n.shrinkAxisMask=0;let e=0;n.beginValid=t.begin!=null,n.endValid=t.end!=null,n.begin=new Array(n.dims),n.end=new Array(n.dims),n.strides=new Array(n.dims),n.finalShapeGatherIndices=[],n.finalShapeGatherIndicesSparse=[],n.inputShapeGatherIndicesSparse=new Array(n.dims);for(let i=0;i<t.dims;i++)if(1<<i&t.ellipsisMask){let r=Math.min(n.dims-(t.dims-i)+1+t.numAddAxisAfterEllipsis,n.dims);for(;e<r;e++)n.begin[e]=0,n.end[e]=0,n.strides[e]=1,n.beginMask|=1<<e,n.endMask|=1<<e,n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(-1),n.inputShapeGatherIndicesSparse[e]=i}else if(1<<i&t.newAxisMask)n.finalShapeGatherIndices.push(pP),n.finalShapeGatherIndicesSparse.push(-1);else{if(e===n.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${n.dims} dims, ${n.begin.length}.`);t.begin!=null&&(n.begin[e]=t.begin[i]),t.end!=null&&(n.end[e]=t.end[i]),n.strides[e]=t.strides[i],t.beginMask&1<<i&&(n.beginMask|=1<<e),t.endMask&1<<i&&(n.endMask|=1<<e),t.shrinkAxisMask&1<<i?(n.finalShapeGatherIndices.push(ZDe),n.finalShapeGatherIndicesSparse.push(-1),n.shrinkAxisMask|=1<<e):(n.finalShapeGatherIndices.push(e),n.finalShapeGatherIndicesSparse.push(i)),n.inputShapeGatherIndicesSparse[e]=i,e++}}function $Y(t,n,e,i,r,o){if(r[n])return e>0?o[n]:o[n+1&1];{let s=t<0?i+t:t;return s<o[0]?o[0]:s>o[1]?o[1]:s}}var Kk=class{static sgd(n){return new qd(n)}static momentum(n,e,i=!1){return new Jy(n,e,i)}static rmsprop(n,e=.9,i=0,r=null,o=!1){return new eb(n,e,i,r,o)}static adam(n=.001,e=.9,i=.999,r=null){return new Qy(n,e,i,r)}static adadelta(n=.001,e=.95,i=null){return new Ky(n,e,i)}static adamax(n=.002,e=.9,i=.999,r=null,o=0){return new Zy(n,e,i,r,o)}static adagrad(n,e=.1){return new Yy(n,e)}};var Ho=Kk;var aAe=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function e_(){return new Promise(t=>aAe(()=>t()))}var C={};Ko(C,{ERF_A1:()=>wAe,ERF_A2:()=>CAe,ERF_A3:()=>TAe,ERF_A4:()=>SAe,ERF_A5:()=>kAe,ERF_P:()=>_Ae,PARALLELIZE_THRESHOLD:()=>Yk,RowPartitionType:()=>Xc,SELU_SCALE:()=>fP,SELU_SCALEALPHA:()=>mP,applyActivation:()=>cm,assertAndGetBroadcastShape:()=>ut,assertAxesAreInnerMostDims:()=>gIe,assertParamsConsistent:()=>lAe,assignToTypedArray:()=>MAe,axesAreInnerMostDims:()=>NL,calculateShapes:()=>nDe,checkEinsumDimSizes:()=>$Ae,checkPadOnDimRoundingMode:()=>mn,combineLocations:()=>kK,combineRaggedTensorToTensorShapes:()=>uAe,complexWithEvenIndex:()=>DAe,complexWithOddIndex:()=>AAe,computeConv2DInfo:()=>Kh,computeConv3DInfo:()=>yK,computeDefaultPad:()=>xL,computeDilation2DInfo:()=>vke,computeOptimalWindowSize:()=>mAe,computeOutAndReduceShapes:()=>ML,computeOutShape:()=>cAe,computePool2DInfo:()=>bL,computePool3DInfo:()=>_ke,convertConv2DDataFormat:()=>bK,decodeEinsumEquation:()=>LAe,eitherStridesOrDilationsAreOne:()=>Vi,expandShapeToKeepDim:()=>Xa,exponent:()=>OAe,exponents:()=>RAe,fromStringArrayToUint8:()=>oNe,fromUint8ToStringArray:()=>rNe,getAxesPermutation:()=>RL,getBroadcastDims:()=>CK,getComplexWithIndex:()=>NAe,getEinsumComputePath:()=>VAe,getEinsumPermutation:()=>PAe,getFusedBiasGradient:()=>lm,getFusedDyActivation:()=>am,getImageCenter:()=>fAe,getInnerMostAxes:()=>yIe,getPermuted:()=>yAe,getRaggedRank:()=>pAe,getReductionAxes:()=>cn,getReshaped:()=>gAe,getReshapedPermuted:()=>bAe,getRowPartitionTypesHelper:()=>dAe,getSliceBeginCoords:()=>xAe,getSliceSize:()=>vAe,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>UAe,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>HAe,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>WAe,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>XAe,getSparseReshapeInputOutputMismatchErrorMessage:()=>YAe,getSparseReshapeInputOutputMultipleErrorMessage:()=>KAe,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>jAe,getSparseReshapeNegativeOutputDimErrorMessage:()=>qAe,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>eNe,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>QAe,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>ZAe,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>JAe,getUndoAxesPermutation:()=>P0,isIdentityPermutation:()=>BAe,log:()=>d1e,mergeRealAndImagArrays:()=>IAe,prepareAndValidate:()=>QDe,prepareSplitSize:()=>GAe,segment_util:()=>yP,shouldFuse:()=>um,slice_util:()=>Ti,splitRealAndImagArrays:()=>EAe,stridesOrDilationsArePositive:()=>qa,tupleValuesAreOne:()=>Bo,upcastType:()=>ni,validateDefaultValueShape:()=>hAe,validateInput:()=>tDe,validateUpdateShape:()=>ZK,warn:()=>Wa});function lAe(t,n){let e=t[0].length;t.forEach((r,o)=>{A(r.length===e,()=>`Error in concat${e}D: rank of tensors[${o}] must be the same as the rank of the rest (${e})`)}),A(n>=0&&n<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);let i=t[0];t.forEach((r,o)=>{for(let s=0;s<e;s++)A(s===n||r[s]===i[s],()=>`Error in concat${e}D: Shape of tensors[${o}] (${r}) does not match the shape of the rest (${i}) along the non-concatenated axis ${o}.`)})}function cAe(t,n){let e=t[0].slice();for(let i=1;i<t.length;i++)e[n]+=t[i][n];return e}var Xc=function(t){return t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS",t}(Xc||{});function uAe(t,n,e){let i=new Array;if(e==null&&n==null)return i;if(n==null)for(;i.length<t+e.length;)i.push(-1);else i=n.slice();if(e==null)return i;if(t+e.length!==i.length)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.rank = ${t+e.length}, but shape.rank = ${i.length}`);for(let r=1;r<e.length;++r){let o=e[r],s=i[i.length-e.length+r],a=i[s];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${n} are incompatible: rt input.shape[${r+t}] = ${o} but shape[${r+t}] = ${a}`)}else i[s]=o}return i}function dAe(t){let n={FIRST_DIM_SIZE:Xc.FIRST_DIM_SIZE,VALUE_ROWIDS:Xc.VALUE_ROWIDS,ROW_LENGTHS:Xc.ROW_LENGTHS,ROW_SPLITS:Xc.ROW_SPLITS,ROW_LIMITS:Xc.ROW_LIMITS,ROW_STARTS:Xc.ROW_STARTS},e=[];for(let i of t)if(i in n)e.push(n[i]);else break;return e}function pAe(t){return t.length===0?0:t[0]===Xc.FIRST_DIM_SIZE?t.length-1:t.length}function hAe(t,n){if(t==null||n==null)return;let e=t.length,i=n.length;if(e>=i)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${n}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${i})`);for(let r=0;r<Math.min(e,i-1);++r){let o=t[r],s=n[r+1];if(o>=0&&s>=0&&o!==1&&o!==s)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${n} are incompatible: defaultValue.shape[${r-t.length}] = ${o} but ragged tensor input.flatValues.shape[${r-t.length}] = ${s}`)}}var Yk=30;function mAe(t){return t<=Yk?t:Pg(t,Math.floor(Math.sqrt(t)))}function fAe(t,n,e){let i=e*(typeof t=="number"?t:t[0]),r=n*(typeof t=="number"?t:t[1]);return[i,r]}function gAe(t,n,e,i=!0){let r=[];if(i)r=r.concat(n.slice(0)),r.push(t[0]/e),r=r.concat(t.slice(1));else{r=r.concat(t[0]);let o=n.length;for(let s=0;s<o;++s)r=r.concat([t[s+1]/n[s],n[s]]);r=r.concat(t.slice(o+1))}return r}function yAe(t,n,e=!0){let i=[];if(e){i.push(n);for(let r=n+1;r<t;++r)r<=2*n?(i.push(r),i.push(r-(n+1))):i.push(r)}else{let r=[],o=[];for(let s=1;s<t;++s)s>=n*2+1||s%2===1?o.push(s):r.push(s);i.push(...r),i.push(0),i.push(...o)}return i}function bAe(t,n,e,i=!0){let r=[];i?r.push(t[0]/e):r.push(t[0]*e);for(let o=1;o<t.length;++o)o<=n.length?i?r.push(n[o-1]*t[o]):r.push(t[o]/n[o-1]):r.push(t[o]);return r}function xAe(t,n){let e=[0];for(let i=0;i<n;++i)e.push(t[i][0]);return e}function vAe(t,n,e){let i=t.slice(0,1);for(let r=0;r<e;++r)i.push(t[r+1]-n[r][0]-n[r][1]);return i}var mP=1.7580993408473768,fP=1.0507009873554805;var _Ae=.3275911,wAe=.254829592,CAe=-.284496736,TAe=1.421413741,SAe=-1.453152027,kAe=1.061405429;function IAe(t,n){if(t.length!==n.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${n.length}.`);let e=new Float32Array(t.length*2);for(let i=0;i<e.length;i+=2)e[i]=t[i/2],e[i+1]=n[i/2];return e}function EAe(t){let n=new Float32Array(t.length/2),e=new Float32Array(t.length/2);for(let i=0;i<t.length;i+=2)n[i/2]=t[i],e[i/2]=t[i+1];return{real:n,imag:e}}function DAe(t){let n=Math.ceil(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let r=0;r<t.length;r+=4)e[Math.floor(r/4)]=t[r],i[Math.floor(r/4)]=t[r+1];return{real:e,imag:i}}function AAe(t){let n=Math.floor(t.length/4),e=new Float32Array(n),i=new Float32Array(n);for(let r=2;r<t.length;r+=4)e[Math.floor(r/4)]=t[r],i[Math.floor(r/4)]=t[r+1];return{real:e,imag:i}}function NAe(t,n){let e=t[n*2],i=t[n*2+1];return{real:e,imag:i}}function MAe(t,n,e,i){t[i*2]=n,t[i*2+1]=e}function RAe(t,n){let e=new Float32Array(t/2),i=new Float32Array(t/2);for(let r=0;r<Math.ceil(t/2);r++){let o=(n?2:-2)*Math.PI*(r/t);e[r]=Math.cos(o),i[r]=Math.sin(o)}return{real:e,imag:i}}function OAe(t,n,e){let i=(e?2:-2)*Math.PI*(t/n),r=Math.cos(i),o=Math.sin(i);return{real:r,imag:o}}var gP="->",FAe=/->/g,qY=",",XY="...";function LAe(t,n){t=t.replace(/\s/g,"");let e=(t.length-t.replace(FAe,"").length)/gP.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${gP}").`);let[i,r]=t.split(gP);A(i.indexOf(XY)===-1,()=>`The ellipsis notation ("${XY}") is not supported yet.`);let o=i.split(qY),s=o.length;if(n!==s)throw new Error(`Expected ${s} input tensors, received ${n}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let p=0;p<r.length;++p){let h=r[p];if(!o.some(m=>m.indexOf(h)!==-1))throw new Error(`Output subscripts contain the label ${h} not present in the input subscripts.`);a.indexOf(h)===-1&&a.push(h)}for(let p=0;p<i.length;++p){let h=i[p];a.indexOf(h)===-1&&h!==qY&&a.push(h)}let l=new Array(o.length);for(let p=0;p<s;++p){if(new Set(o[p].split("")).size!==o[p].length)throw new Error(`Found duplicate axes in input component ${o[p]}. Support for duplicate axes in input is not implemented yet.`);l[p]=[];for(let h=0;h<o[p].length;++h)l[p].push(a.indexOf(o[p][h]))}let c=a.length,u=r.length,d=[];for(let p=u;p<c;++p)d.push(p);return{allDims:a,summedDims:d,idDims:l}}function PAe(t,n){let e=new Array(t);e.fill(-1);for(let r=0;r<n.length;++r)e[n[r]]=r;let i=[];for(let r=0;r<t;++r)e[r]===-1&&i.push(r);return e=e.filter(r=>r!==-1),{permutationIndices:e,expandDims:i}}function $Ae(t,n,e){let i=new Array(t);for(let r=0;r<e.length;++r){let o=e[r].shape;for(let s=0;s<n[r].length;++s)i[n[r][s]]===void 0?i[n[r][s]]=o[s]:A(i[n[r][s]]===o[s],()=>`Expected dimension ${i[n[r][s]]} at axis ${s} of input shaped ${JSON.stringify(o)}, but got dimension ${o[s]}`)}}function VAe(t,n){let e=t,i=[],r=0;t.length===0&&e.push(-1),r=t.length+1;for(let s=0;s<r;++s)i.push([]);let o=[];for(let s=0;s<e.length;++s){let a=e[s],l=zAe(n,a);for(let c of l)o.indexOf(c)===-1&&(i[s].push(c),o.push(c))}return{path:e,steps:i}}function BAe(t){return t.every((n,e)=>n===e)}function zAe(t,n){let e=[];for(let i=0;i<t.length;++i)(t[i].length===0||t[i].indexOf(n)!==-1||n===-1)&&e.push(i);return e}function GAe(t,n,e=0){let i=[];if(typeof n=="number")A(t.shape[e]%n===0,()=>"Number of splits must evenly divide the axis."),i=new Array(n).fill(t.shape[e]/n);else{let r=n.reduce((s,a)=>(a===-1&&(s+=1),s),0);A(r<=1,()=>"There should be only one negative value in split array.");let o=n.indexOf(-1);if(o!==-1){let s=n.reduce((a,l)=>l>0?a+l:a);n[o]=t.shape[e]-s}A(t.shape[e]===n.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),i=n}return i}function UAe(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function HAe(t,n){return`indices(${t}, 0) is invalid: ${n} < 0`}function WAe(t,n,e){return`indices(${t}, 0) is invalid: ${n} >= ${e}`}function jAe(t,n){return`only one output dimension may be -1, not both ${t} and ${n}`}function qAe(t,n){return`size ${t} must be non-negative, not ${n}`}function XAe(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function KAe(t,n){let e=Ht(t),i=Ht(n);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${i}. inputShape=${t} outputShape= ${n}`}function YAe(t,n){let e=Ht(t),i=Ht(n);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${i}. inputShape=${t} outputShape=${n}`}function QAe(){return"segment ids must be >= 0"}function ZAe(){return"segment ids are not increasing"}function JAe(t,n){return`Segment id ${t} out of range [0, ${n}), possibly because segmentIds input is not sorted.`}function eNe(t,n,e){return`Bad: indices[${t}] == ${n} out of range [0, ${e})`}var yP={};Ko(yP,{collectGatherOpShapeInfo:()=>iNe,computeOutShape:()=>nNe,segOpComputeOptimalWindowSize:()=>tNe});function tNe(t,n){let e=!1,i;for(t<=Yk?(i=t,e=!0):i=Pg(t,Math.floor(Math.sqrt(t)));!e;)i>n||i===t?e=!0:i=Pg(t,i+1);return i}function nNe(t,n,e){let i=[],r=t.length;for(let o=0;o<r;o++)o!==n?i.push(t[o]):i.push(e);return i}function iNe(t,n,e,i){let r=n.shape.length,o=t.shape.length;if(i!==0&&(i<-r||i>r))throw new Error(`Expect batchDims in the range of [-${r}, ${r}], but got ${i}`);if(i<0&&(i+=r),i>o)throw new Error(`batchDims (${i}) must be less than rank(x) (
    ${o}).`);if(e<i)throw new Error(`batchDims (${i}) must be less than or equal to axis (${e}).`);for(let d=0;d<i;++d)if(t.shape[d]!==n.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${n.shape[d]}.`);let s=t.shape[e],a=[],l=1,c=1,u=1;for(let d=0;d<i;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=i;d<e;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=i;d<r;d++)a.push(n.shape[d]);for(let d=e+1;d<o;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:s,outputShape:a}}function rNe(t){try{return t.map(n=>Ey(n))}catch(n){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${n}`)}}function oNe(t){return t.map(n=>Iy(n))}var Ji={};Ko(Ji,{nonMaxSuppressionV3Impl:()=>Bk,nonMaxSuppressionV4Impl:()=>zk,nonMaxSuppressionV5Impl:()=>Gk,whereImpl:()=>tY});IY();var Qk={kernelName:Wu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(t,ea(ce(e,"float32"),-1))}}};var KY={kernelName:Wl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=yt(ce(e,"float32")),r=un(Ee(je(1),i));return Tt(_e(t,r))}}}};var YY={kernelName:jl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=un(Ee(yt(ce(e,"float32")),1));return _e(t,i)}}}};var QY={kernelName:Xs,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=t,l=cn(e.shape,r);return l.length>0&&(a=Te(a,l)),$(a,e.shape)},b:()=>{let a=t,l=cn(i.shape,r);return l.length>0&&(a=Te(a,l)),$(a,i.shape)}}}};var ZY={kernelName:Vg,saveAllInputs:!0,gradFunc:(t,n)=>{let e={};return n.forEach((i,r)=>{e[r]=()=>t.clone()}),e}};var JY={kernelName:ju,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>He(e)}}};var e7={kernelName:qu,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>He(e)}}};var t7={kernelName:ql,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,un(Ee(je(1),yt(ce(e,"float32")))))}}};var n7={kernelName:Xl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=un(re(je(1),yt(ce(e,"float32"))));return _e(t,i)}}}};var i7={kernelName:Ql,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=re(yt(e),yt(i)),l=F(t,_e(i,a)),c=cn(e.shape,r);return c.length>0&&(l=Te(l,c)),$(l,e.shape)},b:()=>{let a=re(yt(e),yt(i)),l=Tt(F(t,_e(e,a))),c=cn(i.shape,r);return c.length>0&&(l=Te(l,c)),$(l,i.shape)}}}};var r7={kernelName:Kl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,re(yt(ce(e,"float32")),1))}}};var o7={kernelName:Yl,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,Ee(je(1),yt(ce(e,"float32"))))}}};function sNe(t,n,e,i,r,o){let s=S(t,"dy","avgPool3dGrad"),a=S(n,"input","avgPool3dGrad"),l=s,c=a,u=!1;a.rank===4&&(u=!0,l=$(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),A(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),A(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),mn("avgPool3dGrad",r,o);let d={dy:l,input:c},p={filterSize:e,strides:i,pad:r,dimRoundingMode:o},h=I.runKernel(Ug,d,p);return u?$(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var s7=E({avgPool3dGrad_:sNe});var a7={kernelName:Ku,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{filterSize:r,strides:o,pad:s,dimRoundingMode:a}=e;return{x:()=>s7(t,i,r,o,s,a)}}};function aNe(t,n,e,i,r){let o=S(t,"dy","avgPoolGrad"),s=S(n,"input","avgPoolGrad");A(s.rank===o.rank,()=>`Rank of input (${s.rank}) does not match rank of dy (${o.rank})`);let a=s,l=o,c=!1;s.rank===3&&(c=!0,a=$(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=$(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),A(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);let u={dy:l,input:a},d={filterSize:e,strides:i,pad:r},p=I.runKernel(Gg,u,d);return c?$(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var l7=E({avgPoolGrad_:aNe});var c7={kernelName:Xu,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{filterSize:r,strides:o,pad:s}=e;return{x:()=>l7(t,i,r,o,s)}}};var u7={kernelName:Yu,inputsToSave:["a","b"],gradFunc:(t,n,e)=>{let[i,r]=n,{transposeA:o,transposeB:s}=e;return!o&&!s?{a:()=>Wt(t,r,!1,!0),b:()=>Wt(i,t,!0,!1)}:!o&&s?{a:()=>Wt(t,r,!1,!1),b:()=>Wt(t,i,!0,!1)}:o&&!s?{a:()=>Wt(r,t,!1,!0),b:()=>Wt(i,t,!1,!1)}:{a:()=>Wt(r,t,!0,!0),b:()=>Wt(t,i,!0,!0)}}};var d7={kernelName:Qu,gradFunc:(t,n,e)=>{let{blockShape:i,crops:r}=e;return{x:()=>Hy(t,i,r)}}};var p7={kernelName:sX,gradFunc:(t,n,e)=>{let i=e,r=i.inputShape,o=i.shape,s=Array.from(o);for(let l=r.length-1;l>=0;l--)if(r[l]===o[l])s[l]=1;else if(r[l]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${o}].`);let a=[];for(let l=0;l<s.length;l++)s[l]>1&&a.push(l);return{x:()=>Te(t,a,!0)}}};var h7={kernelName:za,gradFunc:t=>({x:()=>t.clone()})};var m7={kernelName:Zl,gradFunc:t=>({x:()=>He(t)})};var f7={kernelName:Jl,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{clipValueMin:r,clipValueMax:o}=e;return{x:()=>vn(lr(Qr(i,r),fs(i,o)),t,He(t))}}};var g7={kernelName:Zu,inputsToSave:["x"],gradFunc:Qk.gradFunc};var y7={kernelName:Ju,saveAllInputs:!0,gradFunc:(t,n,e)=>{let i=n.map(l=>l.shape),{axis:r}=e,o=si(r,n[0].shape)[0],s=i.map(l=>l[o]);return fi(t,s,o).map(l=>()=>l)}};var b7={kernelName:ed,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[i,r]=n,{dilations:o,strides:s,pad:a,dataFormat:l}=e;return A(Bo(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>Py(i.shape,t,r,s,a,l),filter:()=>Xy(i,t,r.shape,s,a,l)}}};var x7={kernelName:td,inputsToSave:["dy","filter"],gradFunc:(t,n,e)=>{let[i,r]=n,{strides:o,pad:s,dataFormat:a,dimRoundingMode:l}=e;return{dy:()=>_o(t,r,o,s,a,1,l),filter:()=>Xy(t,i,r.shape,o,s,a,l)}}};function lNe(t,n,e,i,r){let o=t;t.rank===4&&(o=$(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let s=n;s.rank===4&&(s=$(n,[1,n.shape[0],n.shape[1],n.shape[2],n.shape[3]])),A(o.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),A(s.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`),A(e.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${e}.`),A(o.shape[4]===e[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${e[3]}.`),A(s.shape[4]===e[4],()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${e[4]}).`);let a={x:o,dy:s},l={strides:i,pad:r,filterShape:e};return I.runKernel(qg,a,l)}var v7=E({conv3DBackpropFilter_:lNe});var _7={kernelName:nd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:i,strides:r,pad:o}=e;A(Bo(i),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);let[s,a]=n;return{x:()=>Ek(s.shape,t,a,r,o),filter:()=>v7(s,t,a.shape,r,o)}}};var w7={kernelName:ec,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(Tt(j0(ce(e,"float32"))),t)}}};var C7={kernelName:tc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(q0(ce(e,"float32")),t)}}};var T7={kernelName:id,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{axis:r,exclusive:o,reverse:s}=e;return{x:()=>{let a=RL([r],i.rank),l=Dk(t,r,o,!s);return a!=null&&(l=gt(l,a)),l}}}};var S7={kernelName:rd,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let{dilations:i,strides:r,pad:o,dimRoundingMode:s}=e,a=i??[1,1];A(Bo(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);let[l,c]=n;return A(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),A(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),A(Vi(r,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${r} and dilations '${a}'.`),mn("depthwiseConv2d",o,s),{x:()=>Vk(l.shape,t,c,r,o,a,s),filter:()=>$k(l,t,c.shape,r,o,a,s)}}};var k7={kernelName:od,inputsToSave:["x","filter"],gradFunc:(t,n,e)=>{let[i,r]=n,o={x:i,filter:r,dy:t},s={x:i,filter:r,dy:t};return{x:()=>I.runKernel(v0,o,e),filter:()=>I.runKernel(_0,s,e)}}};var I7={kernelName:ic,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n,i={dy:t,y:e};return{x:()=>I.runKernel(ny,i)}}};var E7={kernelName:rc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,i=F(ai(Tt(yt(e))),2/Math.sqrt(Math.PI));return{x:()=>F(t,i)}}};var D7={kernelName:oc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(t,e)}}};var A7={kernelName:sd,inputsToSave:["input"],gradFunc:(t,n)=>{let[e]=n;return{input:()=>$(t,e.shape)}}};var N7={kernelName:sc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(t,ai(e))}}};var M7={kernelName:ac,gradFunc:t=>({x:()=>He(t)})};var R7={kernelName:lc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=_e(t,ce(i,"float32")),l=cn(e.shape,r);return l.length>0?$(Te(a,l),e.shape):a},b:()=>{let a=F(t,ce(e,"float32")),l=cn(i.shape,r);l.length>0&&(a=$(Te(a,l),i.shape));let c=yt(i);return Tt(_e(a,ce(c,"float32")))}}}};var O7={kernelName:ad,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,n,e)=>{let{varianceEpsilon:i}=e,[r,o,s,a]=n,l=a??je(1),c=cn(o.shape,r.shape),u=[];if(o.rank===1){for(let _=0;_<r.shape.length-1;++_)u.push(r.shape[_]);u.push(1)}let d=Ee(r,o),p=F(t,l),h=U0(re(s,je(i))),m=F(F(F(h,h),h),je(-.5));return{x:()=>o.rank===1?$(F(F(t,Qi($(h,[1,1,1,o.shape[0]]),u)),l),r.shape):$(F(F(t,h),l),r.shape),mean:()=>{let _=F(F(h,je(-1)),p);return o.rank===1&&(_=Te(_,c)),$(_,o.shape)},variance:()=>{let _=F(F(m,d),p);return o.rank===1&&(_=Te(_,c)),$(_,o.shape)},scale:()=>{let _=F(d,h),w=F(t,_);return o.rank===1&&(w=Te(w,c)),$(w,o.shape)},offset:()=>{let _=t;return o.rank===1&&(_=Te(_,c)),$(_,o.shape)}}}};var P7={kernelName:ld,inputsToSave:["x","indices"],gradFunc:(t,n,e)=>{let[i,r]=n,{axis:o,batchDims:s}=e,a=si(o,i.shape)[0],l=(c,u,d)=>()=>{let p=c.shape,h=u.size,m=p.slice(0,a),g=m.length,f=p.slice(o,p.length).slice(1),y=f.length,b=F7(0,g),v=F7(g+1,g+1+y),_=L7([m,[h],f]),w=$(d,_),T=$(u,[h]),D=L7([[g],b,v]),N=gt(w,D),O=Pk(N,T,c.shape[a]),P=P0(D);return O=gt(O,P),O};if(s===1){let c=i.shape[0],u=i.split(c,0);return{x:()=>li(u.map((h,m)=>l(h,r.slice(m,1),t.slice(m,1))())).reshape(i.shape),indices:()=>r}}else return{x:l(i,r,t),indices:()=>r}}};function F7(t,n){let e=[];for(let i=t;i<n;++i)e.push(i);return e}function L7(t){let n=[];for(let e=0;e<t.length;++e)for(let i=0;i<t[e].length;++i)n.push(t[e][i]);return n}var $7={kernelName:cc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n;return{a:()=>He(e),b:()=>He(i)}}};var V7={kernelName:Ga,gradFunc:t=>({x:()=>ce(t,"float32")})};var B7={kernelName:uc,gradFunc:t=>({x:()=>He(t)})};var z7={kernelName:dc,gradFunc:t=>({x:()=>He(t)})};var G7={kernelName:pc,gradFunc:t=>({x:()=>He(t)})};var U7={kernelName:cd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{alpha:r}=e,o=Un(i,0);return{x:()=>vn(o,t,F(t,r))}}};var H7={kernelName:mc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,re(e,1))}}};var W7={kernelName:hc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,ce(e,"float32"))}}};var j7={kernelName:lX,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i]=n,{axis:r}=e;return{logits:()=>{let s=ai(i);return Ee(t,F(Te(t,r,!0),s))}}}};function cNe(t,n,e,i=5,r=1,o=1,s=.5){let a={x:t,y:n,dy:e},l={depthRadius:i,bias:r,alpha:o,beta:s};return I.runKernel(ly,a,l)}var q7=E({localResponseNormalizationBackprop_:cNe});var X7={kernelName:ud,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i,r]=n,{depthRadius:o,bias:s,alpha:a,beta:l}=e;return{x:()=>q7(i,r,t,o,s,a,l)}}};function Zk(t,n,e,i){return n.rank<e.rank&&(n=$(n,Xa(n.shape,i))),t.rank<e.rank&&(t=$(t,Xa(t.shape,i))),{x:()=>F(t,ce(Tr(e,n),t.dtype))}}var bP={kernelName:dd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let i=e,{reductionIndices:r}=i,o=n[0],s=n[1],a=si(r,o.shape),l=Zk(t,s,o,a);return{x:()=>l.x()}}};var K7={kernelName:fc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n;return{a:()=>F(t,ce(Qr(e,i),"float32")),b:()=>F(t,ce(em(e,i),"float32"))}}};function uNe(t,n,e,i,r,o,s){let a=S(t,"dy","maxPool3dGrad"),l=S(n,"input","maxPool3dGrad"),c=S(e,"output","maxPool3dGrad"),u=a,d=l,p=c,h=!1;l.rank===4&&(h=!0,u=$(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=$(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),p=$(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),A(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),A(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),A(p.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${p.rank}.`),mn("maxPool3dGrad",o,s);let m={dy:u,input:d,output:p},g={filterSize:i,strides:r,pad:o,dimRoundingMode:s},f=I.runKernel(uy,m,g);return h?$(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}var Y7=E({maxPool3dGrad_:uNe});var Q7={kernelName:hd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i,r]=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=e;return{x:()=>Y7(t,i,r,o,s,a,l)}}};function dNe(t,n,e,i,r,o,s){let a=S(t,"dy","maxPoolGrad"),l=S(n,"input","maxPoolGrad"),c=S(e,"output","maxPoolGrad");A(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),A(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),A(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),mn("maxPoolGrad",o,s);let u={dy:a,input:l,output:c},d={filterSize:i,strides:r,pad:o,dimRoundingMode:s};return I.runKernel(cy,u,d)}var Z7=E({maxPoolGrad_:dNe});var J7={kernelName:pd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i,r]=n,{filterSize:o,strides:s,pad:a}=e;return{x:()=>Z7(t,i,r,o,s,a)}}};var e9={kernelName:md,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{axis:r}=e,o=si(r,i.shape),a=ML(i.shape,o)[1],l=Ht(a);return{x:()=>{let u=i.shape.slice();o.forEach(h=>{u[h]=1});let d=$(t,u);return _e(F(d,Sr(i.shape,"float32")),l)}}}};var t9={kernelName:fd,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,n,e)=>{let i=e,{axis:r}=i,[o,s]=n,a=si(r,o.shape),l=Zk(t,s,o,a);return{x:()=>l.x()}}};var n9={kernelName:gc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n;return{a:()=>F(t,ce(fs(e,i),"float32")),b:()=>F(t,ce(Un(e,i),"float32"))}}};var i9={kernelName:gd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let i=n[0],{paddings:r}=e,o=r.map(s=>s[0]);return{x:()=>Rt(t,o,i.shape)}}};var r9={kernelName:yc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=cn(e.shape,r);return a.length>0?$(Te(t,a),e.shape):t},b:()=>{let a=F(t,Tt(Wc(_e(e,i)))),l=cn(i.shape,r);return l.length>0?$(Te(a,l),i.shape):a}}}};var o9={kernelName:bc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=F(t,ce(i,"float32")),l=cn(e.shape,r);return l.length>0?$(Te(a,l),e.shape):a},b:()=>{let a=F(t,ce(e,"float32")),l=cn(i.shape,r);return l.length>0?$(Te(a,l),i.shape):a}}}};var s9={kernelName:yd,gradFunc:t=>({x:()=>Tt(t)})};var a9={kernelName:xd,inputsToSave:["indices"],gradFunc:(t,n)=>{let e=n[0];return{indices:()=>_n(e.shape,"float32")}}};var l9={kernelName:bd,gradFunc:t=>({x:()=>He(t)})};var c9={kernelName:vd,saveAllInputs:!0,gradFunc:(t,n,e)=>{let{axis:i}=e;return ur(t,i).map(o=>()=>o)}};var xP={kernelName:_d,inputsToSave:["x"],gradFunc:(t,n,e)=>{let i=n[0],{paddings:r}=e,o=r.map(s=>s[0]);return{x:()=>Rt(t,o,i.shape)}}};var u9={kernelName:xc,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,n)=>{let[e,i,r]=n,o=e,s=i,a=ut(o.shape,s.shape);return{a:()=>{let u=ce(s,"float32"),d=F(t,F(u,Yr(o,Ee(u,je(1))))),p=cn(o.shape,a);return p.length>0&&(d=Te(d,p)),$(d,o.shape)},b:()=>{let u=Un(o,0),d=vn(u,zi(o),He(o)),p=F(t,F(r,d)),h=cn(s.shape,a);return h.length>0&&(p=Te(p,h)),$(p,s.shape)}}}};var d9={kernelName:wd,inputsToSave:["x","alpha"],gradFunc:(t,n)=>{let[e,i]=n,r=Un(e,0);return{x:()=>vn(r,t,F(t,i)),alpha:()=>{let o=vn(r,He(t),F(t,e)),s=cn(i.shape,t.shape);return s.length>0&&(o=Te(o,s)),$(o,i.shape)}}}};function pNe(t,n,e){let i=t.shape.slice();i[e]=1;let r=$(n,i),o=F0(t,e,!0,!1),s=F0(t,e,!0,!0),a=F(o,s);return F(r,a)}function hNe(t,n,e){let i=t.shape.length,r=i-e.length,o=C.getAxesPermutation(e,i),s=t;o!=null&&(s=gt(t,o));let a=s.shape.slice(),c=a.splice(i-e.length,e.length).reduce((p,h)=>p*h,1);a.push(c);let u=s.reshape(a),d=pNe(u,n,r);if(d=d.reshape(s.shape),o!=null){let p=C.getUndoAxesPermutation(o);d=gt(d,p)}return d}var p9={kernelName:Cd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{axis:r}=e,o=[];return r==null?o=i.shape.map((s,a)=>a):typeof r=="number"?o=[r]:o=r,{x:()=>hNe(i,t,o)}}};var h9={kernelName:nc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=_e(t,ce(i,"float32")),l=cn(e.shape,r);return l.length>0?$(Te(a,l),e.shape):a},b:()=>{let a=F(t,ce(e,"float32")),l=cn(i.shape,r);l.length>0&&(a=$(Te(a,l),i.shape));let c=yt(i);return Tt(_e(a,ce(c,"float32")))}}}};var m9={kernelName:vc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,Tt(yt(e)))}}};var f9={kernelName:wc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n,i=F(fs(e,6),ea(e));return{x:()=>F(t,ce(i,"float32"))}}};var g9={kernelName:_c,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(t,ce(ea(e),"float32"))}}};var y9={kernelName:Td,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>$(t,e.shape)}}};var b9={kernelName:kd,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[i]=n,r={dy:t,images:i};return{images:()=>I.runKernel(yy,r,e)}}};var x9={kernelName:Sd,inputsToSave:["images"],gradFunc:(t,n,e)=>{let[i]=n,r={dy:t,images:i};return{images:()=>I.runKernel(gy,r,e)}}};var v9={kernelName:Id,gradFunc:(t,n,e)=>{let{dims:i}=e,r=si(i,t.shape);return{x:()=>Uo(t,r)}}};var _9={kernelName:Cc,gradFunc:t=>({x:()=>He(t)})};var w9={kernelName:Tc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>Tt(_e(t,F(Yr(e,1.5),2)))}}};var C9={kernelName:Ed,inputsToSave:["condition"],gradFunc:(t,n)=>{let[e]=n;return{condition:()=>ce(He(e),"float32"),t:()=>F(t,ce(e,t.dtype)),e:()=>F(t,ce(zy(e),t.dtype))}}};var T9={kernelName:Sc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>{let i=Un(e,je(0)),r=je(mP),o=je(fP),s=F(t,o),a=F(F(t,r),ai(ce(e,"float32")));return vn(i,s,a)}}}};var S9={kernelName:Dc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(t,F(e,Ee(je(1),e)))}}};var k9={kernelName:Ec,gradFunc:t=>({x:()=>He(t)})};var I9={kernelName:kc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(Zh(ce(e,"float32")),t)}}};var E9={kernelName:Ic,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(O0(ce(e,"float32")),t)}}};var D9={kernelName:Dd,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{begin:r,size:o}=e,s=i.shape,[a,l]=hP(i,r,o),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],s[u]-a[u]-l[u]]);return{x:()=>nm(t,c)}}};var A9={kernelName:Rd,outputsToSave:[!0],gradFunc:(t,n,e)=>{let[i]=n,{dim:r}=e,o=!0,s=F(t,i);return{logits:()=>Ee(s,F(Te(s,[r],o),i))}}};var N9={kernelName:Ac,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(t,ms(e))}}};var vP={kernelName:Nd,gradFunc:(t,n,e)=>{let{blockShape:i,paddings:r}=e;return{x:()=>Ly(t,i,r)}}};var _P={kernelName:Md,gradFunc:(t,n,e)=>{let{axis:i}=e;return{x:()=>xn(t,i)}}};var M9={kernelName:Nc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,F(un(ce(e,"float32")),2))}}};var R9={kernelName:by,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(t,F(ce(e,"float32"),2))}}};var O9={kernelName:Mc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=je(2);return{a:()=>F(t,F(r,Ee(e,i))),b:()=>F(t,F(r,Ee(i,e)))}}};var F9={kernelName:Lc,gradFunc:t=>({x:()=>He(t)})};var L9={kernelName:Rc,inputsToSave:["a","b"],gradFunc:(t,n)=>{let[e,i]=n,r=ut(e.shape,i.shape);return{a:()=>{let a=t,l=cn(e.shape,r);return l.length>0&&(a=Te(a,l)),$(a,e.shape)},b:()=>{let a=t,l=cn(i.shape,r);return l.length>0&&(a=Te(a,l)),$(Tt(a),i.shape)}}}};var P9={kernelName:Ad,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,r=i.shape.slice(),{axis:o}=e;si(o,i.shape).forEach(c=>{r[c]=1});let a=$(t,r),l=F(a,Sr(i.shape,"float32"));return{x:()=>l}}};var $9={kernelName:Oc,inputsToSave:["x"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>_e(t,yt(Zh(e)))}}};var V9={kernelName:Fc,outputsToSave:[!0],gradFunc:(t,n)=>{let[e]=n;return{x:()=>F(Ee(je(1),yt(e)),t)}}};var B9={kernelName:Ua,inputsToSave:["x"],gradFunc:(t,n,e)=>{let[i]=n,{reps:r}=e;return{x:()=>{let s=He(i);if(i.rank===1)for(let a=0;a<r[0];++a)s=re(s,Rt(t,[a*i.shape[0]],[i.shape[0]]));else if(i.rank===2)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)s=re(s,Rt(t,[a*i.shape[0],l*i.shape[1]],[i.shape[0],i.shape[1]]));else if(i.rank===3)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)for(let c=0;c<r[2];++c)s=re(s,Rt(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2]],[i.shape[0],i.shape[1],i.shape[2]]));else if(i.rank===4)for(let a=0;a<r[0];++a)for(let l=0;l<r[1];++l)for(let c=0;c<r[2];++c)for(let u=0;u<r[3];++u)s=re(s,Rt(t,[a*i.shape[0],l*i.shape[1],c*i.shape[2],u*i.shape[3]],[i.shape[0],i.shape[1],i.shape[2],i.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${i.rank} tensors yet.`);return s}}}};var z9={kernelName:Ha,gradFunc:(t,n,e)=>{let i=e,{perm:r}=i,o=P0(r);return{x:()=>gt(t,o)}}};var G9={kernelName:Od,gradFunc:(t,n,e)=>{let i=e,{axis:r}=i;return{value:()=>li(t,r)}}};var U9={kernelName:Fd,inputsToSave:["segmentIds"],gradFunc:(t,n)=>{let[e]=n;return{x:()=>mNe(t,e)}}};function mNe(t,n){let e=Co(n,He(n)),i=jc(t,e),r=Qr(n,je(0,"int32")),o=i.rank-r.rank;for(let a=0;a<o;++a)r=Qn(r,a+1);r=lr(r,Sr(i.shape,"bool"));let s=He(i);return vn(r,i,s)}var H9={kernelName:Ld,gradFunc:t=>({x:()=>He(t)})};var fNe=[Qk,KY,YY,QY,ZY,JY,e7,t7,n7,i7,r7,o7,a7,c7,u7,d7,p7,h7,m7,f7,g7,y7,x7,b7,_7,w7,C7,T7,S7,k7,h9,I7,E7,D7,A7,N7,R7,M7,O7,P7,$7,V7,B7,z7,G7,U7,H7,W7,j7,X7,bP,bP,K7,Q7,J7,e9,t9,n9,i9,r9,o9,s9,a9,l9,c9,xP,xP,u9,d9,p9,m9,f9,g9,y9,b9,x9,v9,_9,w9,C9,T9,S9,k9,I9,E9,D9,A9,N9,vP,vP,_P,_P,M9,O9,R9,F9,L9,P9,$9,V9,B9,z9,G9,U9,H9];for(let t of fNe)dX(t);L().prototype.abs=function(){return this.throwIfDisposed(),ii(this)};L().prototype.acos=function(){return this.throwIfDisposed(),dL(this)};L().prototype.acosh=function(){return this.throwIfDisposed(),pL(this)};L().prototype.add=function(t){return this.throwIfDisposed(),re(this,t)};L().prototype.all=function(t,n){return this.throwIfDisposed(),D0(this,t,n)};L().prototype.any=function(t,n){return this.throwIfDisposed(),Oy(this,t,n)};L().prototype.argMax=function(t){return this.throwIfDisposed(),Bc(this,t)};L().prototype.argMin=function(t){return this.throwIfDisposed(),fK(this,t)};L().prototype.asScalar=function(){return this.throwIfDisposed(),A(this.size===1,()=>"The array must have only 1 element."),$(this,[])};L().prototype.asType=function(t){return this.throwIfDisposed(),ce(this,t)};L().prototype.as1D=function(){return this.throwIfDisposed(),$(this,[this.size])};L().prototype.as2D=function(t,n){return this.throwIfDisposed(),$(this,[t,n])};L().prototype.as3D=function(t,n,e){return this.throwIfDisposed(),$(this,[t,n,e])};L().prototype.as4D=function(t,n,e,i){return this.throwIfDisposed(),$(this,[t,n,e,i])};L().prototype.as5D=function(t,n,e,i,r){return this.throwIfDisposed(),$(this,[t,n,e,i,r])};L().prototype.asin=function(){return this.throwIfDisposed(),hL(this)};L().prototype.asinh=function(){return this.throwIfDisposed(),mL(this)};L().prototype.atan=function(){return this.throwIfDisposed(),fL(this)};L().prototype.atan2=function(t){return this.throwIfDisposed(),gK(this,t)};L().prototype.atanh=function(){return this.throwIfDisposed(),gL(this)};L().prototype.avgPool=function(t,n,e,i){return this.throwIfDisposed(),Yh(this,t,n,e,i)};L().prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),Ly(this,t,n)};L().prototype.batchNorm=function(t,n,e,i,r){return this.throwIfDisposed(),Ud(this,t,n,e,i,r)};L().prototype.broadcastTo=function(t){return this.throwIfDisposed(),zc(this,t)};L().prototype.cast=function(t){return this.throwIfDisposed(),ce(this,t)};L().prototype.ceil=function(){return this.throwIfDisposed(),TL(this)};L().prototype.clipByValue=function(t,n){return this.throwIfDisposed(),mi(this,t,n)};L().prototype.concat=function(t,n){return this.throwIfDisposed(),t instanceof Kt&&(t=[t]),xn([this,...t],n)};L().prototype.conv1d=function(t,n,e,i,r,o){return this.throwIfDisposed(),M0(this,t,n,e,i,r,o)};L().prototype.conv2dTranspose=function(t,n,e,i,r){return this.throwIfDisposed(),R0(this,t,n,e,i,r)};L().prototype.conv2d=function(t,n,e,i,r,o){return this.throwIfDisposed(),_o(this,t,n,e,i,r,o)};L().prototype.cos=function(){return this.throwIfDisposed(),Zh(this)};L().prototype.cosh=function(){return this.throwIfDisposed(),O0(this)};L().prototype.cumprod=function(t,n,e){return this.throwIfDisposed(),F0(this,t,n,e)};L().prototype.cumsum=function(t,n,e){return this.throwIfDisposed(),Dk(this,t,n,e)};L().prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),_K(this,t,n)};L().prototype.depthwiseConv2d=function(t,n,e,i,r,o){return this.throwIfDisposed(),Uc(this,t,n,e,i,r,o)};L().prototype.dilation2d=function(t,n,e,i,r){return this.throwIfDisposed(),wK(this,t,n,e,i,r)};L().prototype.divNoNan=function(t){return this.throwIfDisposed(),TK(this,t)};L().prototype.div=function(t){return this.throwIfDisposed(),_e(this,t)};L().prototype.dot=function(t){return this.throwIfDisposed(),SK(this,t)};L().prototype.elu=function(){return this.throwIfDisposed(),Hc(this)};L().prototype.equal=function(t){return this.throwIfDisposed(),Tr(this,t)};L().prototype.erf=function(){return this.throwIfDisposed(),L0(this)};L().prototype.euclideanNorm=function(t,n){return this.throwIfDisposed(),EK(this,t,n)};L().prototype.exp=function(){return this.throwIfDisposed(),ai(this)};L().prototype.expandDims=function(t){return this.throwIfDisposed(),Qn(this,t)};L().prototype.expm1=function(){return this.throwIfDisposed(),FL(this)};L().prototype.fft=function(){return this.throwIfDisposed(),Y0(this)};L().prototype.flatten=function(){return this.throwIfDisposed(),$(this,[this.size])};L().prototype.floor=function(){return this.throwIfDisposed(),Wc(this)};L().prototype.floorDiv=function(t){return this.throwIfDisposed(),Ik(this,t)};L().prototype.gather=function(t,n,e){return this.throwIfDisposed(),jc(this,t,n,e)};L().prototype.greaterEqual=function(t){return this.throwIfDisposed(),Qr(this,t)};L().prototype.greater=function(t){return this.throwIfDisposed(),Un(this,t)};L().prototype.ifft=function(){return this.throwIfDisposed(),qy(this)};L().prototype.irfft=function(){return this.throwIfDisposed(),QL(this)};L().prototype.isFinite=function(){return this.throwIfDisposed(),LL(this)};L().prototype.isInf=function(){return this.throwIfDisposed(),PL(this)};L().prototype.isNaN=function(){return this.throwIfDisposed(),$L(this)};L().prototype.leakyRelu=function(t){return this.throwIfDisposed(),Jh(this,t)};L().prototype.lessEqual=function(t){return this.throwIfDisposed(),fs(this,t)};L().prototype.less=function(t){return this.throwIfDisposed(),em(this,t)};L().prototype.localResponseNormalization=function(t,n,e,i){return this.throwIfDisposed(),DK(this,t,n,e,i)};L().prototype.logSigmoid=function(){return this.throwIfDisposed(),BL(this)};L().prototype.logSoftmax=function(t){return this.throwIfDisposed(),V0(this,t)};L().prototype.logSumExp=function(t,n){return this.throwIfDisposed(),B0(this,t,n)};L().prototype.log=function(){return this.throwIfDisposed(),zi(this)};L().prototype.log1p=function(){return this.throwIfDisposed(),$0(this)};L().prototype.logicalAnd=function(t){return this.throwIfDisposed(),lr(this,t)};L().prototype.logicalNot=function(){return this.throwIfDisposed(),zy(this)};L().prototype.logicalOr=function(t){return this.throwIfDisposed(),Nk(this,t)};L().prototype.logicalXor=function(t){return this.throwIfDisposed(),AK(this,t)};L().prototype.matMul=function(t,n,e){return this.throwIfDisposed(),Wt(this,t,n,e)};L().prototype.maxPool=function(t,n,e,i){return this.throwIfDisposed(),tm(this,t,n,e,i)};L().prototype.max=function(t,n){return this.throwIfDisposed(),Bi(this,t,n)};L().prototype.maximum=function(t){return this.throwIfDisposed(),Co(this,t)};L().prototype.mean=function(t,n){return this.throwIfDisposed(),fn(this,t,n)};L().prototype.min=function(t,n){return this.throwIfDisposed(),Hd(this,t,n)};L().prototype.minimum=function(t){return this.throwIfDisposed(),gs(this,t)};L().prototype.mirrorPad=function(t,n){return this.throwIfDisposed(),NK(this,t,n)};L().prototype.mod=function(t){return this.throwIfDisposed(),MK(this,t)};L().prototype.mul=function(t){return this.throwIfDisposed(),F(this,t)};L().prototype.neg=function(){return this.throwIfDisposed(),Tt(this)};L().prototype.norm=function(t,n,e){return this.throwIfDisposed(),Wd(this,t,n,e)};L().prototype.notEqual=function(t){return this.throwIfDisposed(),jd(this,t)};L().prototype.oneHot=function(t,n=1,e=0){return this.throwIfDisposed(),Uy(this,t,n,e)};L().prototype.onesLike=function(){return this.throwIfDisposed(),Ci(this)};L().prototype.pad=function(t,n){return this.throwIfDisposed(),nm(this,t,n)};L().prototype.pool=function(t,n,e,i,r,o){return this.throwIfDisposed(),RK(this,t,n,e,i,r,o)};L().prototype.pow=function(t){return this.throwIfDisposed(),Yr(this,t)};L().prototype.prelu=function(t){return this.throwIfDisposed(),im(this,t)};L().prototype.prod=function(t,n){return this.throwIfDisposed(),OK(this,t,n)};L().prototype.reciprocal=function(){return this.throwIfDisposed(),KL(this)};L().prototype.relu=function(){return this.throwIfDisposed(),To(this)};L().prototype.relu6=function(){return this.throwIfDisposed(),Fk(this)};L().prototype.reshapeAs=function(t){return this.throwIfDisposed(),$(this,t.shape)};L().prototype.reshape=function(t){return this.throwIfDisposed(),$(this,t)};L().prototype.resizeBilinear=function(t,n,e){return this.throwIfDisposed(),Uk(this,t,n,e)};L().prototype.resizeNearestNeighbor=function(t,n,e){return this.throwIfDisposed(),Hk(this,t,n,e)};L().prototype.reverse=function(t){return this.throwIfDisposed(),Uo(this,t)};L().prototype.rfft=function(){return this.throwIfDisposed(),ZL(this)};L().prototype.round=function(){return this.throwIfDisposed(),G0(this)};L().prototype.rsqrt=function(){return this.throwIfDisposed(),U0(this)};L().prototype.selu=function(){return this.throwIfDisposed(),H0(this)};L().prototype.separableConv2d=function(t,n,e,i,r,o){return this.throwIfDisposed(),W0(this,t,n,e,i,r,o)};L().prototype.sigmoid=function(){return this.throwIfDisposed(),ms(this)};L().prototype.sign=function(){return this.throwIfDisposed(),YL(this)};L().prototype.sin=function(){return this.throwIfDisposed(),j0(this)};L().prototype.sinh=function(){return this.throwIfDisposed(),q0(this)};L().prototype.slice=function(t,n){return this.throwIfDisposed(),Rt(this,t,n)};L().prototype.softmax=function(t){return this.throwIfDisposed(),sm(this,t)};L().prototype.softplus=function(){return this.throwIfDisposed(),Ka(this)};L().prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),Hy(this,t,n)};L().prototype.split=function(t,n){return this.throwIfDisposed(),fi(this,t,n)};L().prototype.sqrt=function(){return this.throwIfDisposed(),un(this)};L().prototype.square=function(){return this.throwIfDisposed(),yt(this)};L().prototype.squaredDifference=function(t){return this.throwIfDisposed(),QK(this,t)};L().prototype.squeeze=function(t){return this.throwIfDisposed(),Js(this,t)};L().prototype.stack=function(t,n){this.throwIfDisposed();let e=t instanceof Kt?[this,t]:[this,...t];return li(e,n)};L().prototype.step=function(t){return this.throwIfDisposed(),ea(this,t)};L().prototype.stridedSlice=function(t,n,e,i,r,o,s,a){return this.throwIfDisposed(),JL(this,t,n,e,i,r,o,s,a)};L().prototype.sub=function(t){return this.throwIfDisposed(),Ee(this,t)};L().prototype.sum=function(t,n){return this.throwIfDisposed(),Te(this,t,n)};L().prototype.tan=function(){return this.throwIfDisposed(),eP(this)};L().prototype.tanh=function(){return this.throwIfDisposed(),Qh(this)};L().prototype.tile=function(t){return this.throwIfDisposed(),Qi(this,t)};L().prototype.toBool=function(){return this.throwIfDisposed(),ce(this,"bool")};L().prototype.toFloat=function(){return this.throwIfDisposed(),ce(this,"float32")};L().prototype.toInt=function(){return this.throwIfDisposed(),ce(this,"int32")};L().prototype.topk=function(t,n){return this.throwIfDisposed(),JK(this,t,n)};L().prototype.transpose=function(t){return this.throwIfDisposed(),gt(this,t)};L().prototype.unique=function(t){return this.throwIfDisposed(),eY(this,t)};L().prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),Pk(this,t,n)};L().prototype.unstack=function(t){return this.throwIfDisposed(),ur(this,t)};L().prototype.where=function(t,n){return this.throwIfDisposed(),vn(t,this,n)};L().prototype.zerosLike=function(){return this.throwIfDisposed(),He(this)};var Wo=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},kr=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},z=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},et=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}},Jk=class t extends Error{constructor(n){super(n),Object.setPrototypeOf(this,t.prototype)}};var t_=class{constructor(n){this.maxEntries=n||100,this.cache=new Map}get(n){let e;return this.cache.has(n)&&(e=this.cache.get(n),this.cache.delete(n),this.cache.set(n,e)),e}put(n,e){if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.maxEntries){let i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(n,e)}getMaxEntries(){return this.maxEntries}setMaxEntries(n){if(n<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${n}.`);if(this.maxEntries>n)for(let e=0;e<this.maxEntries-n;e++){let i=this.cache.keys().next().value;this.cache.delete(i)}this.maxEntries=n}};function vs(t,n){if(Array.isArray(t)){let e=[];for(let i=0;i<n;i++)e=e.concat(t);return e}else{let e=new Array(n);return e.fill(t),e}}function jo(t,n){if(!t)throw new Jk(n)}function CP(t,n){let e=0;for(let i of t)i===n&&e++;return e}function Si(t){return t.length===1?t[0]:t}function Yt(t){return Array.isArray(t)?t:[t]}function _s(t){let e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return e[0]!=="_"?e:"private"+e}function Kc(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(n,e)=>e.toUpperCase())}var xs={};function tb(t){if(t==null)return null;let n={};return n.className=t.getClassName(),n.config=t.getConfig(),n}function wP(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(n=>wP(n));else{let n=Object.keys(t);for(let e of n){let i=t[e];i!=null&&typeof i=="object"&&(!Array.isArray(i)&&i.type==="ndarray"&&typeof i.value=="number"?t[e]=i.value:wP(i))}}}function Ya(t,n={},e={},i="object",r=!1){if(typeof t=="string"){let o=t,s;if(o in e)s=e[o];else if(o in xs)s=xs[o];else if(s=n[o],s==null)throw new z(`Unknown ${i}: ${t}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return s}else{let o=t;if(o.className==null||o.config==null)throw new z(`${i}: Improper config format: ${JSON.stringify(o)}.
'className' and 'config' must set.`);let s=o.className,a,l;if(s in e?[a,l]=e[s]:s in xs?[a,l]=xs.className:s in n&&([a,l]=n[s]),a==null)throw new z(`Unknown ${i}: ${s}. This may be due to one of the following reasons:
1. The ${i} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${i} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){let c={};for(let h of Object.keys(xs))c[h]=xs[h];for(let h of Object.keys(e))c[h]=e[h];let u=o.config;u.customObjects=c;let d=Object.assign({},xs);for(let h of Object.keys(e))xs[h]=e[h];wP(o.config);let p=l(a,o.config,e,r);return xs=Object.assign({},d),p}else{let c=Object.assign({},xs);for(let d of Object.keys(e))xs[d]=e[d];let u=new a(o.config);return xs=Object.assign({},c),u}}}function gNe(t,n){return t<n?-1:t>n?1:0}function n_(t,n){return-1*gNe(t,n)}function ws(t){if(t==null)return t;let n=[];for(let e of t)n.indexOf(e)===-1&&n.push(e);return n}function W9(t){if(t==null)throw new z(`Invalid value in obj: ${JSON.stringify(t)}`);for(let n in t)if(t.hasOwnProperty(n))return!1;return!0}function Qa(t,n,e){if(e!=null&&t.indexOf(e)<0)throw new z(`${e} is not a valid ${n}.  Valid values are ${t} or null/undefined.`)}function eI(t,n,e=0,i=1/0){return jo(e>=0),jo(i>=e),Array.isArray(t)&&t.length>=e&&t.length<=i&&t.every(r=>typeof r===n)}function Wn(t,n){Array.isArray(t)?(x.assert(t.length>0,()=>`${n} is unexpectedly an empty array.`),t.forEach((e,i)=>Wn(e,`element ${i+1} of ${n}`))):x.assert(Number.isInteger(t)&&t>0,()=>`Expected ${n} to be a positive integer, but got ${j9(t)}.`)}function j9(t){return t===null?"null":Array.isArray(t)?"["+t.map(n=>j9(n)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function q9(t,n,e){let i=e!=null?e():x.now(),r;return(...s)=>{let a=e!=null?e():x.now();return a-i<n||(i=a,r=t(...s)),r}}function tI(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}var yNe=0;function iI(){return yNe++}var nI={};function Xd(t=""){return t in nI||(nI[t]=0),nI[t]+=1,t+nI[t].toString()}var X9=["channelsFirst","channelsLast"],K9=["nearest","bilinear"],Y9=["valid","same","causal"],Q9=["max","avg"],Z9=["sum","mul","concat","ave"];var nb=new Map;function En(t){Qa(X9,"DataFormat",t)}function eQ(t){Qa(K9,"InterpolationFormat",t)}function Ir(t){Qa(Y9,"PaddingMode",t)}function TP(t){Qa(Q9,"PoolMode",t)}var i_=[],J9="/";function na(t,n){i_.push(t);try{let e=n();return i_.pop(),e}catch(e){throw i_.pop(),e}}function bNe(){return i_.length===0?"":i_.join(J9)+J9}function rI(t){if(!tQ(t))throw new Error("Not a valid tensor name: '"+t+"'");return bNe()+t}function oI(t){if(!tQ(t))throw new Error("Not a valid tensor name: '"+t+"'");nb.has(t)||nb.set(t,0);let n=nb.get(t);if(nb.set(t,nb.get(t)+1),n>0){let e=`${t}_${n}`;return nb.set(e,1),e}else return t}var xNe=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function tQ(t){return!!t.match(xNe)}function nQ(t){return t===parseInt(t.toString(),10)}function Cs(t,n,e){n==null&&(n=0),e==null&&(e=t.length);let i=1;for(let r=n;r<e;++r)i*=t[r];return i}function pm(t){if(t.length===0)return Number.NaN;let n=Number.POSITIVE_INFINITY;for(let e=0;e<t.length;e++){let i=t[e];i<n&&(n=i)}return n}function ia(t){if(t.length===0)return Number.NaN;let n=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++){let i=t[e];i>n&&(n=i)}return n}function Er(t,n){if(n<t)throw new z(`end (${n}) < begin (${t}) is forbidden.`);let e=[];for(let i=t;i<n;++i)e.push(i);return e}var SP;function ri(){return SP==null&&(SP=_k().epsilon()),SP}function Dr(){return"channelsLast"}function dr(t,n){return ce(t,n)}function Qc(t,n=-1){let e=t.shape.slice();return n<0&&(n=e.length+n+1),e.splice(n,0,1),$(t,e)}function iQ(t,n){return W(()=>{if(t.shape.length!==2)throw new z(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);let e=Qc(t,1);return aI(e,[1,n,1])})}function rQ(t){let n=[Cs(t.shape)];return $(t,n)}function oQ(t){if(t.rank<=1)throw new z(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);let n=[t.shape[0],Cs(t.shape,1)];return $(t,n)}function Yc(t,n,e){return W(()=>{switch(t.rank){case 1:return X0(t,n,e);case 2:return Lk(t,[n,0],[e,t.shape[1]]);case 3:return K0(t,[n,0,0],[e,t.shape[1],t.shape[2]]);case 4:return jy(t,[n,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3]]);case 5:return Rt(t,[n,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return Rt(t,[n,0,0,0,0,0],[e,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new z(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function kP(t,n,e){return W(()=>{switch(t.rank){case 1:return X0(t,n,e);case 2:return Lk(t,[0,n],[t.shape[0],e]);case 3:return K0(t,[0,0,n],[t.shape[0],t.shape[1],e]);case 4:return jy(t,[0,0,0,n],[t.shape[0],t.shape[1],t.shape[2],e]);default:throw new z(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function r_(t,n,e,i){return W(()=>{switch(t.rank){case 1:return X0(t,n,e);case 2:switch(i){case 1:return Yc(t,n,e);case 2:return kP(t,n,e);default:throw new z(`The axis is not within the rank of the tensor ${i}`)}case 3:switch(i){case 1:return Yc(t,n,e);case 2:return K0(t,[0,n,0],[t.shape[0],e,t.shape[2]]);case 3:return kP(t,n,e);default:throw new z(`The axis is not within the rank of the tensor ${i}`)}case 4:switch(i){case 1:return Yc(t,n,e);case 2:return jy(t,[0,n,0,0],[t.shape[0],e,t.shape[2],t.shape[3]]);case 3:return jy(t,[0,0,n,0],[t.shape[0],t.shape[1],e,t.shape[3]]);case 4:return kP(t,n,e);default:throw new z(`The axis is not within the rank of the tensor ${i}`)}default:throw new z(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function ib(t,n=-1){let e;return n<0&&(e=t[0].rank,e!==0?n=e:n=0),n===t[0].rank&&(n=-1),xn(t,n)}function EP(t,n){switch(t.rank){case 1:return SL([t,n]);case 2:return kL([t,n],0);case 3:return IL([t,n],0);case 4:return EL([t,n],0);default:throw new z(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function aI(t,n){if(Array.isArray(n)||(n=[n]),t.rank!==n.length)throw new z(`The length of input n (${n.length}) does not match the number of dimensions in input x (${t.rank})`);return Qi(t,n)}function rb(t,n=0,e=1,i,r){return Ok(t,n,e,i,r)}function Ts(t,n,e,i){if(t.rank<2||n.rank<2)throw new et(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${n.shape}`);if(n.rank>=3){let r=t.shape.slice(-1)[0],o=n.shape.slice(-2)[0];if(r!==o)throw new et(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${n.shape}`)}if(t.rank===2&&n.rank===2)return dm.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?IP(t.rank,i,Dr()):null,activation:e});{let r=t.shape.slice(),o=r.pop();t=$(t,[-1,o]);let s=n.shape.slice(),a=s.pop(),l=s.pop(),c=[...s,a],u=Array.from({length:n.rank},(m,g)=>g===0?n.rank-2:g<=n.rank-2?g-1:g);n=$(gt(n,u),[l,-1]);let d=[...r,...c];return $(dm.matMul({a:t,b:n,transposeA:!1,transposeB:!1,bias:i?IP(t.rank,i,Dr()):null,activation:e}),d)}}function lI(t,n,e){return W(()=>(Array.isArray(n)?n=In(n,"int32"):n=ce(n,"int32"),jc(t,n,e)))}function hm(t){return F(t,t)}function IP(t,n,e){let i=n.shape;if(n.rank!==1&&n.rank!==t)throw new z(`Unexpected bias dimensions: ${n.rank}; expected it to be 1 or ${t}`);if(t===5){if(e==="channelsFirst")return i.length===1?$(n,[1,i[0],1,1,1]):$(n,[1,i[3],i[0],i[1],i[2]]);if(e==="channelsLast")return i.length===1?$(n,[1,1,1,1,i[0]]):$(n,[1].concat(i))}else if(t===4){if(e==="channelsFirst")return i.length===1?$(n,[1,i[0],1,1]):$(n,[1,i[2],i[0],i[1]]);if(e==="channelsLast")return i.length===1?$(n,[1,1,1,i[0]]):$(n,[1].concat(i))}else if(t===3){if(e==="channelsFirst")return i.length===1?$(n,[1,i[0],1]):$(n,[1,i[1],i[0]]);if(e==="channelsLast")return i.length===1?$(n,[1,1,i[0]]):$(n,[1].concat(i))}else if(t<3)return n;throw new z(`Unsupported input rank by biasAdd: ${n.rank}`)}function Ar(t,n,e){return W(()=>(e==null&&(e=Dr()),En(e),re(t,IP(t.rank,n,e))))}function sQ(t,n=1){if(n!==1)throw new et(`Support for alpha values other than 1 (${n}) is not implemented yet.`);return Hc(t)}function aQ(t){return W(()=>_e(t,re(ii(t),1)))}function cI(t,n,e,i){return W(()=>iY(t,n,e,i))}function lQ(t){return W(()=>{let n=re(.5,F(.2,t));return mi(n,0,1)})}function Kd(t,n,e=!1){return e?t():n()}var cQ=["fanIn","fanOut","fanAvg"],uQ=["normal","uniform","truncatedNormal"];function vNe(t){Qa(cQ,"FanMode",t)}function _Ne(t){Qa(uQ,"Distribution",t)}var Nr=class extends ne.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},hQ=(()=>{class t extends Nr{apply(e,i){return _n(e,i)}}return t.className="Zeros",t})();ne.registerClass(hQ);var uI=(()=>{class t extends Nr{apply(e,i){return Sr(e,i)}}return t.className="Ones",t})();ne.registerClass(uI);var mQ=(()=>{class t extends Nr{constructor(e){if(super(),typeof e!="object")throw new z(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new z(`config must have value set but got ${e}`);this.value=e.value}apply(e,i){return W(()=>F(je(this.value),Sr(e,i)))}getConfig(){return{value:this.value}}}return t.className="Constant",t})();ne.registerClass(mQ);var fQ=(()=>{class t extends Nr{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,i){return Zs(e,this.minval,this.maxval,i,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}return t.className="RandomUniform",t})();ne.registerClass(fQ);var gQ=(()=>{class t extends Nr{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if(i=i||"float32",i!=="float32"&&i!=="int32")throw new et(`randomNormal does not support dType ${i}.`);return rb(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="RandomNormal",t})();ne.registerClass(gQ);var yQ=(()=>{class t extends Nr{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,i){if(i=i||"float32",i!=="float32"&&i!=="int32")throw new et(`truncatedNormal does not support dType ${i}.`);return Q0(e,this.mean,this.stddev,i,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}return t.className="TruncatedNormal",t})();ne.registerClass(yQ);var bQ=(()=>{class t extends Nr{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,i){return W(()=>{if(e.length!==2||e[0]!==e[1])throw new z("Identity matrix initializer can only be used for 2D square matrices.");return F(this.gain,Vy(e[0]))})}getConfig(){return{gain:this.gain}}}return t.className="Identity",t})();ne.registerClass(bQ);function wNe(t,n="channelsLast"){let e,i;if(En(n),t.length===2)e=t[0],i=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(n==="channelsFirst"){let r=Cs(t,2);e=t[1]*r,i=t[0]*r}else if(n==="channelsLast"){let r=Cs(t,0,t.length-2);e=t[t.length-2]*r,i=t[t.length-1]*r}}else{let r=Cs(t);e=Math.sqrt(r),i=Math.sqrt(r)}return[e,i]}var ko=(()=>{class t extends Nr{constructor(e){if(super(),e.scale<0)throw new z(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,vNe(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,_Ne(this.distribution),this.seed=e.seed}apply(e,i){let r=wNe(e),o=r[0],s=r[1],a=this.scale;if(this.mode==="fanIn"?a/=Math.max(1,o):this.mode==="fanOut"?a/=Math.max(1,s):a/=Math.max(1,(o+s)/2),this.distribution==="normal"){let l=Math.sqrt(a);if(i=i||"float32",i!=="float32"&&i!=="int32")throw new et(`${this.getClassName()} does not support dType ${i}.`);return Q0(e,0,l,i,this.seed)}else{let l=Math.sqrt(3*a);return Zs(e,-l,l,i,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}return t.className="VarianceScaling",t})();ne.registerClass(ko);var DP=(()=>{class t extends ko{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ko.className}}return t.className="GlorotUniform",t})();ne.registerClass(DP);var AP=(()=>{class t extends ko{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ko.className}}return t.className="GlorotNormal",t})();ne.registerClass(AP);var NP=(()=>{class t extends ko{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ko.className}}return t.className="HeNormal",t})();ne.registerClass(NP);var MP=(()=>{class t extends ko{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ko.className}}return t.className="HeUniform",t})();ne.registerClass(MP);var RP=(()=>{class t extends ko{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return ko.className}}return t.className="LeCunNormal",t})();ne.registerClass(RP);var OP=(()=>{class t extends ko{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return ko.className}}return t.className="LeCunUniform",t})();ne.registerClass(OP);var xQ=(()=>{class t extends Nr{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,i){return W(()=>{if(e.length<2)throw new et("Shape must be at least 2D.");if(i!=="int32"&&i!=="float32"&&i!==void 0)throw new TypeError(`Unsupported data type ${i}.`);i=i;let r=x.sizeFromShape(e.slice(0,-1)),o=e[e.length-1],s=r*o;s>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${s}) elements: Slowness may result.`);let a=[Math.max(o,r),Math.min(o,r)],l=rb(a,0,1,i,this.seed),c=kY.qr(l,!1),u=c[0],p=c[1].flatten().stridedSlice([0],[Math.min(o,r)*Math.min(o,r)],[Math.min(o,r)+1]);return u=F(u,p.sign()),r<o&&(u=u.transpose()),F(je(this.gain),u.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}return t.className="Orthogonal",t})();ne.registerClass(xQ);var dQ={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function pQ(t,n={}){return Ya(t,ne.SerializationMap.getMap().classNameMap,n,"initializer")}function gn(t){return tb(t)}function rn(t){if(typeof t=="string"){let n=t in dQ?dQ[t]:t;if(n==="GlorotNormal")return new AP;if(n==="GlorotUniform")return new DP;if(n==="HeNormal")return new NP;if(n==="HeUniform")return new MP;if(n==="LeCunNormal")return new RP;if(n==="LeCunUniform")return new OP;{let e={};return e.className=n,e.config={},pQ(e)}}else return t instanceof Nr?t:pQ(t)}function dI(t){return Array.isArray(t)&&Array.isArray(t[0])}function ob(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function We(t){let n;if(Array.isArray(t)){if(t.length!==1)throw new z(`Expected Tensor length to be 1; got ${t.length}`);n=t[0]}else n=t;return n}function ht(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new z(`Expected exactly 1 Shape; got ${t.length}`)}else return t}function sb(t){let n=0;for(let e of t)e.shape.length===0?n+=1:n+=e.shape.reduce((i,r)=>i*r);return n}var _Q="Variable",o_=class{constructor(n,e="float32",i=_Q,r=!0,o=null){this.dtype=e??"float32",this.shape=n.shape,this.id=iI(),i=i??_Q,this.originalName=rI(i),this.name=oI(this.originalName),this.trainable_=r,this.constraint=o,this.val=tP(n,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(n){return this.assertNotDisposed(),TNe(this.val,n),this.val.id!==n.id&&(this.val.assign(n),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(n){this.trainable_=n,this.val.trainable=n}};function TNe(t,n){if(t.shape.toString()!==n.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(n.shape))}function s_(t){return t.map(n=>n.read())}function ab(t){t.forEach(n=>{n[0].write(n[1])})}var dn=class{constructor(n){this.dtype=n.dtype,this.shape=n.shape,n.shape!=null?this.ndim=n.shape.length:this.ndim=n.ndim,this.maxNDim=n.maxNDim,this.minNDim=n.minNDim,this.axes=n.axes||{}}},pr=class{constructor(n,e,i,r,o,s,a){this.dtype=n,this.shape=e,this.sourceLayer=i,this.inputs=r,this.callArgs=o,this.outputTensorIndex=a,this.id=iI(),s!=null&&(this.originalName=rI(s),this.name=oI(this.originalName)),this.rank=e.length}},SNe=0,Zc=class{constructor(n,e){this.callArgs=e,this.id=SNe++,this.outboundLayer=n.outboundLayer,this.inboundLayers=n.inboundLayers,this.nodeIndices=n.nodeIndices,this.tensorIndices=n.tensorIndices,this.inputTensors=n.inputTensors,this.outputTensors=n.outputTensors,this.inputMasks=n.inputMasks,this.outputMasks=n.outputMasks,this.inputShapes=n.inputShapes,this.outputShapes=n.outputShapes;for(let i of n.inboundLayers)i?.outboundNodes.push(this);n.outboundLayer.inboundNodes.push(this)}getConfig(){let n=[];for(let e of this.inboundLayers)e!=null?n.push(e.name):n.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:n,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},kNe=0,Je=class extends ne.Serializable{constructor(n={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=kNe++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let e=n.name;if(!e){let i=this.getClassName();e=_s(i)+"_"+Xd(i)}if(this.name=e,this.trainable_=n.trainable==null?!0:n.trainable,n.inputShape!=null||n.batchInputShape!=null){let i;if(n.batchInputShape!=null)i=n.batchInputShape;else if(n.inputShape!=null){let o=null;n.batchSize!=null&&(o=n.batchSize),i=[o].concat(n.inputShape)}this.batchInputShape=i;let r=n.dtype;r==null&&(r=n.inputDType),r==null&&(r="float32"),this.dtype=r}n.weights!=null?this.initialWeights=n.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(n,e){return n.name+"_ib-"+e.toString()}getNodeAtIndex(n,e){if(this.inboundNodes.length===0)throw new kr(`The layer has never been called and thus has no defined ${e}.`);if(this.inboundNodes.length<=n)throw new z(`Asked to get ${e} at node ${n}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[n]}getInputAt(n){return Si(this.getNodeAtIndex(n,"input").inputTensors)}getOutputAt(n){return Si(this.getNodeAtIndex(n,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Wo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new Wo(`Layer ${this.name} is not connected, no input to return.`);return Si(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new Wo(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Wo(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Si(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(n=>n())}get updates(){return this._updates}get built(){return this._built}set built(n){this._built=n}get trainable(){return this.trainable_}set trainable(n){this._trainableWeights.forEach(e=>e.trainable=n),this.trainable_=n}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(n=>n.trainable):[]}set trainableWeights(n){this._trainableWeights=n}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(n=>!n.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(n){this._nonTrainableWeights=n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(n){let e=Yt(n);if(this.inputSpec==null||this.inputSpec.length===0)return;let i=Yt(this.inputSpec);if(e.length!==i.length)throw new z(`Layer ${this.name} expects ${i.length} inputs, but it received ${e.length} input tensors. Input received: ${n}`);for(let r=0;r<e.length;r++){let o=e[r],s=i[r];if(s==null)continue;let a=o.rank;if(s.ndim!=null&&a!==s.ndim)throw new z(`Input ${r} is incompatible with layer ${this.name}: expected ndim=${s.ndim}, found ndim=${a}`);if(s.maxNDim!=null&&a>s.maxNDim)throw new z(`Input ${r} is incompatible with layer ${this.name}: expected max_ndim=${s.maxNDim}, found ndim=${a}`);if(s.minNDim!=null&&a<s.minNDim)throw new z(`Input ${r} is incompatible with layer ${this.name}: expected min_ndim=${s.minNDim}, found ndim=${a}.`);if(s.dtype!=null&&o.dtype!==s.dtype)throw new z(`Input ${r} is incompatible with layer ${this.name} : expected dtype=${s.dtype}, found dtype=${o.dtype}.`);if(s.axes){let l=o.shape;for(let c in s.axes){let u=Number(c),d=s.axes[c],p=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(p)===-1)throw new z(`Input ${r} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(s.shape!=null)for(let l=0;l<s.shape.length;++l){let c=s.shape[l],u=o.shape[l];if(c!=null&&u!=null&&c!==u)throw new z(`Input ${r} is incompatible with layer ${this.name}: expected shape=${s.shape}, found shape=${o.shape}.`)}}}call(n,e){return n}invokeCallHook(n,e){this._callHook!=null&&this._callHook(n,e)}setCallHook(n){this._callHook=n}clearCallHook(){this._callHook=null}apply(n,e){e=e||{},this.assertNotDisposed();let i=Yt(n),r=DNe(n),o=ANe(n);if(r===o)throw new z("Arguments to apply() must be all SymbolicTensors or all Tensors");return na(this.name,()=>{if(!this.built){this.assertInputCompatibility(n);let s=[];for(let a of Yt(n))s.push(a.shape);this.build(Si(s)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&o&&(this._refCount=1)}if(this.assertInputCompatibility(n),o){let s=this.call(n,e);this.supportsMasking&&this.setMaskMetadata(n,s);let a=Yt(s),l=[];for(let c of a)i.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(s=Si(l),this.activityRegularizer!=null)throw new et("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return s}else{let s=INe(n),a=this.computeOutputShape(s),l,c=ENe(n);if(this.warnOnIncompatibleInputShape(Array.isArray(n)?s[0]:s),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new pr(c,u,this,Yt(n),e,this.name,d)):l=new pr(c,a,this,Yt(n),e,this.name),this.addInboundNode(n,l,null,null,s,a,e),this._refCount++,this.activityRegularizer!=null)throw new et("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(n){if(this.batchInputShape!=null)if(n.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(n)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let e=!1;this.batchInputShape.forEach((i,r)=>{i!=null&&n[r]!=null&&n[r]!==i&&(e=!0)}),e&&console.warn(`The shape of the input tensor (${JSON.stringify(n)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new Wo(`The layer ${this.name} has never been called and thus has no defined output shape.`);let n=[];for(let e of this.inboundNodes){let i=JSON.stringify(e.outputShapes);n.indexOf(i)===-1&&n.push(i)}if(n.length===1){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&e.length===1?e[0]:e}else throw new Wo(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new kr(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return sb(this.weights)}build(n){this.built=!0}getWeights(n=!1){return s_(n?this.trainableWeights:this.weights)}setWeights(n){W(()=>{let e=this.weights;if(e.length!==n.length)throw new z(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${n.length}, but the layer was expecting ${e.length} weights. Provided weights: ${n}...`);if(e.length===0)return;let i=[],r=s_(e);for(let o=0;o<r.length;++o){let s=r[o],a=e[o],l=n[o];if(!x.arraysEqual(s.shape,l.shape))throw new z(`Layer weight shape ${s.shape} not compatible with provided weight shape ${l.shape}`);i.push([a,l])}ab(i)})}addWeight(n,e,i,r,o,s,a,l){if(this._addedWeightNames.indexOf(n)!==-1)throw new z(`Duplicate weight name ${n} for layer ${this.name}`);this._addedWeightNames.push(n),i==null&&(i="float32"),this.fastWeightInitDuringBuild&&(r=l!=null?l():rn("zeros"));let c=r.apply(e,i),u=new o_(c,i,n,s,a);return c.dispose(),o!=null&&this.addLoss(()=>o.apply(u.read())),s==null&&(s=!0),s?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(n){this.fastWeightInitDuringBuild=n}addLoss(n){n==null||Array.isArray(n)&&n.length===0||(n=Yt(n),this._losses!==void 0&&this._losses!==null&&this.losses.push(...n))}computeOutputShape(n){return n}computeMask(n,e){if(!this.supportsMasking){if(e!=null)if(Array.isArray(e))e.forEach(i=>{if(i!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return e}setMaskMetadata(n,e,i){if(!this.supportsMasking)return;let r=this.computeMask(n,i),o=Yt(e),s=Yt(r);if(o.length!==s.length)throw new Error(`${this.name} outputs ${o.length} tensors but ${o.length} masks for those tensors`);for(let a=0;a<o.length;a++)o[a].kerasMask=s[a]}addInboundNode(n,e,i,r,o,s,a=null){let l=Yt(n);e=Yt(e),i=Yt(i),r=Yt(r),o=ob(o),s=ob(s);let c=[],u=[],d=[];for(let p of l)c.push(p.sourceLayer),u.push(p.nodeIndex),d.push(p.tensorIndex);new Zc({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:e,inputMasks:i,outputMasks:r,inputShapes:o,outputShapes:s},a);for(let p=0;p<e.length;p++)e[p].sourceLayer=this,e[p].nodeIndex=this.inboundNodes.length-1,e[p].tensorIndex=p}getConfig(){let n={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(n.batchInputShape=this.batchInputShape),this.dtype!=null&&(n.dtype=this.dtype),n}disposeWeights(){return this.weights.forEach(n=>n.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let n=0;return--this._refCount===0&&(n=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:n}}};function INe(t){t=Yt(t);let n=[];for(let e of t)n.push(e.shape);return Si(n)}function ENe(t){return"float32"}function FP(t,n,e){if((n==null||e!=null&&e>0)&&(n=t.sourceLayer,e=t.nodeIndex),n.inboundNodes.length===0)return[t];{let i=n.inboundNodes[e];if(i.inboundLayers.length===0)return i.inputTensors;{let r=[];for(let o=0;o<i.inboundLayers.length;o++){let s=i.inputTensors[o],a=i.inboundLayers[o],l=i.nodeIndices[o],c=FP(s,a,l);for(let u of c)r.indexOf(u)===-1&&r.push(u)}return r}}}function DNe(t){let n=!0;for(let e of Yt(t))if(!(e instanceof pr)){n=!1;break}return n}function ANe(t){let n=!0;for(let e of Yt(t))if(e instanceof pr){n=!1;break}return n}var Yd=(()=>{class t extends Je{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:Xd("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new z("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let i=e.batchInputShape;if(i==null){if(e.inputShape==null)throw new z("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");i=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new z("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let r=e.dtype||"float32";this.batchInputShape=i,this.dtype=r,this.inputSpec=[{shape:i}];let o=new pr(this.dtype,this.batchInputShape,this,[],{},this.name);o.nodeIndex=0,o.tensorIndex=0,new Zc({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[i],outputShapes:[i]})}apply(e,i){throw new z(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}return t.className="InputLayer",t})();ne.registerClass(Yd);function pI(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new z("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let n=t.batchShape;t.shape!=null&&n==null&&(n=[null].concat(t.shape));let e=t.dtype;return e==null&&(e="float32"),new Yd({batchInputShape:n,name:t.name,dtype:e,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function NNe(t,n){if(t.dtype==null||t.dtype===n.dtype)return n;try{return ce(n,t.dtype)}catch{throw new z(`The dtype of the feed (${n.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}var Za=class t{constructor(n){if(this.id2Value={},this.id2Mask={},this.name2Id={},n instanceof t)for(let e in n.id2Value)this.id2Value[e]=n.id2Value[e],e in n.id2Mask&&(this.id2Mask[e]=n.id2Mask[e]);else{if(n==null)return;for(let e of n)this.add(e.key,e.value)}}add(n,e,i){if(this.id2Value[n.id]==null)this.id2Value[n.id]=NNe(n,e),this.name2Id[n.name]=n.id,i!=null&&(this.id2Mask[n.id]=i);else throw new z(`Duplicate key: name=${n.name}, id=${n.id}`);return this}addFeed(n){this.add(n.key,n.value)}hasKey(n){return this.id2Value[n.id]!=null}names(){return Object.keys(this.name2Id)}getValue(n){if(n instanceof pr){if(this.id2Value[n.id]==null)throw new z(`Nonexistent key: ${n.name}`);return this.id2Value[n.id]}else{let e=this.name2Id[n];if(e==null)throw new z(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Value[e]}}getMask(n){if(n instanceof pr){if(this.id2Value[n.id]==null)throw new z(`Nonexistent key: ${n.name}`);return this.id2Mask[n.id]}else{let e=this.name2Id[n];if(e==null)throw new z(`Feed dict has no SymbolicTensor name: ${n}`);return this.id2Mask[e]}}disposeMasks(){this.id2Mask!=null&&it(this.id2Mask)}},hI=new t_,mI=new t_;function CQ(t){hI?.setMaxEntries(t),mI?.setMaxEntries(t)}function mm(t,n,e,i){let r=e==null?!1:e.training,o=Array.isArray(t),s=o?t:[t],a=s.map(m=>m.name),l=[],c=n.names();for(let m of a)c.indexOf(m)!==-1?l.push(n.getValue(m)):l.push(null);i!=null&&(i.maxNumTensors=-1/0,i.minNumTensors=1/0);let u=a.join(",")+"|"+n.names().sort().join(","),d=hI.get(u),p;if(d==null){let m=MNe(s,n);d=m.sorted,p=m.recipientCounts,hI.put(u,d),mI.put(u,p)}p={},r||Object.assign(p,mI.get(u));let h=new Za(n);for(let m=0;m<d.length;++m){if(i!=null){let O=I0().numTensors;O>i.maxNumTensors&&(i.maxNumTensors=O),O<i.minNumTensors&&(i.minNumTensors=O)}let g=d[m],f=g.sourceLayer;if(f instanceof Yd)continue;let y=[],b=[],v=[],_=!1;for(let O of g.inputs){let P=h.getValue(O),B=h.getMask(O);y.push(P),b.push(B),B!=null&&(_=!0),r||(p[O.name]--,p[O.name]===0&&!n.hasKey(O)&&a.indexOf(O.name)===-1&&!P.isDisposed&&O.sourceLayer.stateful!==!0&&v.push(P))}_&&(e=e||{},e.mask=b[0]);let w=Yt(f.apply(y,e)),T=null;f.supportsMasking&&(T=f.computeMask(y,b));let D=ONe(g),N=Array.isArray(D)?D:[D];for(let O=0;O<N.length;++O){h.hasKey(N[O])||h.add(N[O],w[O],Array.isArray(T)?T[0]:T);let P=a.indexOf(N[O].name);P!==-1&&(l[P]=w[O])}r||it(v)}return h.disposeMasks(),o?l:l[0]}function MNe(t,n){x.assert(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let e=[],i={};if(t.length===1){let r=wQ(t[0],n);e=r.sorted,i=r.recipientMap}else{let r=new Set;for(let o of t){let{sorted:s,recipientMap:a}=wQ(o,n);for(let l of s)r.has(l.name)||(e.push(l),r.add(l.name));for(let l in a)i[l]==null&&(i[l]=new Set),a[l].forEach(c=>i[l].add(c))}}return{sorted:e,recipientCounts:RNe(i)}}function RNe(t){let n={};for(let e in t)n[e]=t[e].size;return n}function wQ(t,n){let e=new Set,i=[],r={};for(let a of n.names())e.add(a);let o=[],s=[];for(o.push(t);o.length>0;){let a=o[o.length-1];if(e.has(a.name)){o.pop();continue}let l=s[s.length-1]===o.length-1;if(a.inputs.length===0||l)o.pop(),i.push(a),e.add(a.name),l&&s.pop();else{s.push(o.length-1);for(let c of a.inputs)r[c.name]==null&&(r[c.name]=new Set),r[c.name].add(a.name),!e.has(c.name)&&o.push(c)}}return{sorted:i,recipientMap:r}}function ONe(t){let n;if(t.sourceLayer.inboundNodes.length===1)n=t.sourceLayer.output;else{let e=null;for(let i=0;i<t.sourceLayer.inboundNodes.length;++i)for(let r of t.sourceLayer.inboundNodes[i].outputTensors)if(r.id===t.id){e=i;break}n=t.sourceLayer.getOutputAt(e)}return n}var FNe=G();FNe.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,CQ);function LP(t,n){return W(()=>un(Te(F(t,t),n,!0)))}var fm=class extends ne.Serializable{getConfig(){return{}}},kQ=(()=>{class t extends fm{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return W(()=>{let i=LP(e,this.axis),r=mi(i,0,this.maxValue);return F(e,_e(r,re(ri(),i)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}return t.className="MaxNorm",t})();ne.registerClass(kQ);var IQ=(()=>{class t extends fm{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return W(()=>_e(e,re(ri(),LP(e,this.axis))))}getConfig(){return{axis:this.axis}}}return t.className="UnitNorm",t})();ne.registerClass(IQ);var EQ=(()=>{class t extends fm{apply(e){return To(e)}}return t.className="NonNeg",t})();ne.registerClass(EQ);var DQ=(()=>{class t extends fm{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return W(()=>{let i=LP(e,this.axis),r=re(F(this.rate,mi(i,this.minValue,this.maxValue)),F(1-this.rate,i));return F(e,_e(r,re(ri(),i)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}return t.className="MinMaxNorm",t})();ne.registerClass(DQ);var TQ={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function Fn(t){return tb(t)}function SQ(t,n={}){return Ya(t,ne.SerializationMap.getMap().classNameMap,n,"constraint")}function Ln(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in TQ?TQ[t]:t,config:{}};return SQ(e)}else return t instanceof fm?t:SQ(t)}var on={};Ko(on,{Layer:()=>Je,RNN:()=>el,RNNCell:()=>eu,activation:()=>bRe,add:()=>IRe,alphaDropout:()=>uOe,average:()=>ERe,averagePooling1d:()=>J$,averagePooling2d:()=>eV,averagePooling3d:()=>tV,avgPool1d:()=>PRe,avgPool2d:()=>VRe,avgPool3d:()=>zRe,avgPooling1d:()=>$Re,avgPooling2d:()=>BRe,avgPooling3d:()=>GRe,batchNormalization:()=>ORe,bidirectional:()=>nOe,categoryEncoding:()=>fOe,centerCrop:()=>hOe,concatenate:()=>DRe,conv1d:()=>cRe,conv2d:()=>uRe,conv2dTranspose:()=>dRe,conv3d:()=>pRe,conv3dTranspose:()=>hRe,convLstm2d:()=>ZRe,convLstm2dCell:()=>JRe,cropping2D:()=>fRe,dense:()=>xRe,depthwiseConv2d:()=>yRe,dot:()=>RRe,dropout:()=>vRe,elu:()=>iRe,embedding:()=>kRe,flatten:()=>wRe,gaussianDropout:()=>cOe,gaussianNoise:()=>lOe,globalAveragePooling1d:()=>URe,globalAveragePooling2d:()=>HRe,globalMaxPool1d:()=>rOe,globalMaxPool2d:()=>oOe,globalMaxPooling1d:()=>iZ,globalMaxPooling2d:()=>rZ,gru:()=>jRe,gruCell:()=>qRe,input:()=>p_,inputLayer:()=>nRe,layerNormalization:()=>FRe,leakyReLU:()=>oRe,lstm:()=>XRe,lstmCell:()=>KRe,masking:()=>dOe,maxPool1d:()=>sOe,maxPool2d:()=>aOe,maxPooling1d:()=>oZ,maxPooling2d:()=>sZ,maxPooling3d:()=>WRe,maximum:()=>ARe,minimum:()=>NRe,multiply:()=>MRe,permute:()=>SRe,prelu:()=>sRe,randomWidth:()=>gOe,reLU:()=>rRe,repeatVector:()=>CRe,rescaling:()=>pOe,reshape:()=>TRe,resizing:()=>mOe,rnn:()=>eOe,separableConv2d:()=>mRe,simpleRNN:()=>YRe,simpleRNNCell:()=>QRe,softmax:()=>aRe,spatialDropout1d:()=>_Re,stackedRNNCells:()=>tOe,thresholdedReLU:()=>lRe,timeDistributed:()=>iOe,upSampling2d:()=>gRe,zeroPadding2d:()=>LRe});function Jc(t){return H(this,null,function*(){if(t==null)return;let n=[],e=[],i=[];for(let r in t){let o=t[r];if(typeof o!="number"){let s=o;n.push(s.data()),e.push(r),i.push(s)}}if(n.length>0){let r=yield Promise.all(n);for(let o=0;o<r.length;++o)t[e[o]]=r[o][0];it(i)}})}function fI(t){if(t!=null)for(let n in t){let e=t[n];typeof e!="number"&&e.dispose()}}var $Ne=125,Qd=class{constructor(){this.validationData=null}setParams(n){this.params=n}onEpochBegin(n,e){return H(this,null,function*(){})}onEpochEnd(n,e){return H(this,null,function*(){})}onBatchBegin(n,e){return H(this,null,function*(){})}onBatchEnd(n,e){return H(this,null,function*(){})}onTrainBegin(n){return H(this,null,function*(){})}onTrainEnd(n){return H(this,null,function*(){})}setModel(n){}},gI=class{constructor(n,e=10){n==null&&(n=[]),this.callbacks=n,this.queueLength=e}append(n){this.callbacks.push(n)}setParams(n){for(let e of this.callbacks)e.setParams(n)}setModel(n){for(let e of this.callbacks)e.setModel(n)}onEpochBegin(n,e){return H(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onEpochBegin(n,e)})}onEpochEnd(n,e){return H(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onEpochEnd(n,e)})}onBatchBegin(n,e){return H(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onBatchBegin(n,e)})}onBatchEnd(n,e){return H(this,null,function*(){e==null&&(e={});for(let i of this.callbacks)yield i.onBatchEnd(n,e)})}onTrainBegin(n){return H(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainBegin(n)})}onTrainEnd(n){return H(this,null,function*(){n==null&&(n={});for(let e of this.callbacks)yield e.onTrainEnd(n)})}},PP=class extends Qd{constructor(){super()}onEpochBegin(n){return H(this,null,function*(){this.seen=0,this.totals={}})}onBatchEnd(n,e){return H(this,null,function*(){e==null&&(e={});let i=e.size==null?0:e.size;this.seen+=i;for(let r in e){let o=e[r];if(typeof o=="number")this.totals.hasOwnProperty(r)||(this.totals[r]=0),this.totals[r]=this.totals[r]+o*i;else{let s;r in this.totals?s=this.totals[r]:this.totals[r]=0;let a=W(()=>re(this.totals[r],F(o,i)));this.totals[r]=a,s?.dispose()}}})}onEpochEnd(n,e){return H(this,null,function*(){if(e!=null)for(let i of this.params.metrics)this.totals[i]!=null&&(typeof this.totals[i]=="number"?e[i]=this.totals[i]/this.seen:W(()=>{let r=F(_e(1,this.seen),this.totals[i]);e[i]=r,this.totals[i].dispose(),_i(e[i])}))})}},yI=class extends Qd{onTrainBegin(n){return H(this,null,function*(){this.epoch=[],this.history={}})}onEpochEnd(n,e){return H(this,null,function*(){e==null&&(e={}),this.epoch.push(n);for(let i in e)this.history[i]==null&&(this.history[i]=[]),this.history[i].push(e[i])})}syncData(){return H(this,null,function*(){let n=[],e=[],i=[];for(let o in this.history){let s=this.history[o];for(let a=0;a<s.length;++a)if(typeof s[a]!="number"){let l=s[a];n.push(l.data()),e.push(o),i.push(a)}}let r=yield Promise.all(n);for(let o=0;o<r.length;++o)this.history[e[o]][i[o]].dispose(),this.history[e[o]][i[o]]=r[o][0]})}},bI=class extends Qd{constructor(n,e){if(super(),this.currentEpoch=0,this.nowFunc=n.nowFunc,this.nextFrameFunc=n.nextFrameFunc||e_,this.yieldEvery=e||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=$Ne),this.yieldEvery==="never"&&n.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");x.isNumber(this.yieldEvery)&&(this.maybeWait=q9(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=n.onTrainBegin,this.trainEnd=n.onTrainEnd,this.epochBegin=n.onEpochBegin,this.epochEnd=n.onEpochEnd,this.batchBegin=n.onBatchBegin,this.batchEnd=n.onBatchEnd,this.yield=n.onYield}maybeWait(n,e,i){return H(this,null,function*(){let r=[];this.yield!=null&&(yield Jc(i),r.push(this.yield(n,e,i))),r.push(this.nextFrameFunc()),yield Promise.all(r)})}onEpochBegin(n,e){return H(this,null,function*(){this.currentEpoch=n,this.epochBegin!=null&&(yield Jc(e),yield this.epochBegin(n,e))})}onEpochEnd(n,e){return H(this,null,function*(){let i=[];this.epochEnd!=null&&(yield Jc(e),i.push(this.epochEnd(n,e))),this.yieldEvery==="epoch"&&i.push(this.nextFrameFunc()),yield Promise.all(i)})}onBatchBegin(n,e){return H(this,null,function*(){this.batchBegin!=null&&(yield Jc(e),yield this.batchBegin(n,e))})}onBatchEnd(n,e){return H(this,null,function*(){let i=[];this.batchEnd!=null&&(yield Jc(e),i.push(this.batchEnd(n,e))),this.yieldEvery==="batch"?i.push(this.nextFrameFunc()):x.isNumber(this.yieldEvery)&&i.push(this.maybeWait(this.currentEpoch,n,e)),yield Promise.all(i)})}onTrainBegin(n){return H(this,null,function*(){this.trainBegin!=null&&(yield Jc(n),yield this.trainBegin(n))})}onTrainEnd(n){return H(this,null,function*(){this.trainEnd!=null&&(yield Jc(n),yield this.trainEnd(n))})}};function xI(t,n){return t==null&&(t={}),t instanceof Qd?[t]:Array.isArray(t)&&t[0]instanceof Qd?t:Yt(t).map(i=>new bI(i,n))}var AQ=(()=>{class t{constructor(){}static registerCallbackConstructor(e,i){x.assert(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),t.checkForDuplicate(i),t.constructors[e]==null&&(t.constructors[e]=[]),t.constructors[e].push(i)}static checkForDuplicate(e){for(let i in t.constructors)t.constructors[+i].forEach(o=>{if(o===e)throw new z("Duplicate callback constructor.")})}static clear(){t.constructors={}}static createCallbacks(e){let i=[];for(let r in t.constructors){let o=+r;e>=o&&i.push(...t.constructors[o])}return i.map(r=>new r)}}return t.constructors={},t})();function vI(t,n,e,i,r,o,s,a,l){let c=new yI,u=[new PP,...AQ.createCallbacks(n)];t!=null&&u.push(...t),u.push(c);let d=new gI(u);return d.setParams({epochs:e,initialEpoch:i,samples:r,steps:o,batchSize:s,verbose:n,doValidation:a,metrics:l}),{callbackList:d,history:c}}function Zr(t,n={},e=!1){return Ya(t,ne.SerializationMap.getMap().classNameMap,n,"layer",e)}function a_(t,n){return W(()=>{t.dtype!=="float32"&&(t=ce(t,"float32"));let e=Te(hm(t),n,!0),i=Gc(e.shape,ri()),r=un(Co(e,i));return _e(t,r)})}function gm(t,n){return W(()=>fn(hm(Ee(n,t)),-1))}function c_(t,n){return W(()=>fn(ii(Ee(n,t)),-1))}function u_(t,n){return W(()=>{let e=Ee(t,n),i=mi(ii(t),ri(),Number.MAX_VALUE),r=ii(_e(e,i));return F(100,fn(r,-1))})}function VNe(t,n){return W(()=>{let e=mi(n,ri(),Number.MAX_VALUE),i=zi(re(1,e)),r=mi(t,ri(),Number.MAX_VALUE),o=zi(re(1,r));return fn(hm(Ee(i,o)),-1)})}function BNe(t,n){return W(()=>{let e=Co(0,Ee(1,F(t,n)));return fn(hm(e),-1)})}function zNe(t,n){return W(()=>{let e=Co(0,Ee(1,F(t,n)));return fn(e,-1)})}function GNe(t,n){return W(()=>{let e=Te(F(t,n),-1),i=Bi(F(Ee(1,t),n),-1);return Co(0,re(1,Ee(i,e)))})}function UNe(t,n){return W(()=>{let e=Math.log(2),i=Ee(n,t),r=Ee(re(i,Ka(F(-2,i))),e);return fn(r,-1)})}function ym(t,n,e=!1){return W(()=>{if(e)n=sm(n);else{let i=Te(n,n.shape.length-1,!0);n=_e(n,i)}return n=mi(n,ri(),1-ri()),Tt(Te(F(ce(t,"float32"),zi(n)),n.shape.length-1))})}function lb(t,n,e=!1){return W(()=>{let i=ce(Wc(rQ(t)),"int32");n=mi(n,ri(),1-ri());let r=n.shape,o=$(Uy(i,r[r.length-1]),r);return ym(o,n,e)})}function HNe(t,n){if(!x.arraysEqual(t.shape,n.shape))throw new z(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(n.shape)}`);return W(()=>{let e=To(n),i=Tt(ii(n));return re(Ee(e,F(n,t)),$0(ai(i)))})}function cb(t,n){return W(()=>{let e;return e=mi(n,ri(),1-ri()),e=zi(_e(e,Ee(1,e))),fn(HNe(t,e),-1)})}function WNe(t,n){return W(()=>{let e=mi(t,ri(),1),i=mi(n,ri(),1);return Te(F(t,zi(_e(e,i))),-1)})}function jNe(t,n){return W(()=>{let e=zi(re(ri(),n));return fn(Ee(n,F(t,e)),-1)})}function _I(t,n){return W(()=>{let e=a_(t,-1),i=a_(n,-1),r=F(e,i);return Tt(Te(r,-1))})}var l_={meanSquaredError:gm,meanAbsoluteError:c_,meanAbsolutePercentageError:u_,meanSquaredLogarithmicError:VNe,squaredHinge:BNe,hinge:zNe,categoricalHinge:GNe,logcosh:UNe,categoricalCrossentropy:ym,sparseCategoricalCrossentropy:lb,binaryCrossentropy:cb,kullbackLeiblerDivergence:WNe,poisson:jNe,cosineProximity:_I};function wI(t){if(typeof t=="string"){if(t in l_)return l_[t];let n=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new z(n)}else return t}function TI(t,n){return W(()=>{let e=F(.5,Ci(n)),i=dr(Un(n,e),t.dtype);return fn(Tr(t,i),-1)})}function SI(t,n){return W(()=>dr(Tr(Bc(t,-1),Bc(n,-1)),"float32"))}function qNe(t,n){return W(()=>ce(Te(lr(Tr(t,1),Tr(n,1))),"float32"))}function XNe(t,n){return W(()=>ce(Te(lr(Tr(t,0),Tr(n,1))),"float32"))}function MQ(t,n){return W(()=>{let e=qNe(t,n),i=XNe(t,n),r=re(e,i);return ce(vn(Un(r,0),_e(e,r),0),"float32")})}function $P(t,n){return cb(t,n)}function VP(t,n){return t.rank===n.rank&&(t=Js(t,[t.rank-1])),n=Bc(n,-1),n.dtype!==t.dtype&&(n=ce(n,t.dtype)),ce(Tr(t,n),"float32")}var KNe=gm,YNe=gm,QNe=c_,ZNe=c_,JNe=u_,eMe=u_,kI=ym,tMe=_I,BP=lb,CI={binaryAccuracy:TI,categoricalAccuracy:SI,precision:MQ,categoricalCrossentropy:kI,sparseCategoricalCrossentropy:BP,mse:KNe,MSE:YNe,mae:QNe,MAE:ZNe,mape:JNe,MAPE:eMe,cosine:tMe};function RQ(t){if(typeof t=="string"&&t in CI)return CI[t];if(typeof t!="string"&&t!=null)return t;throw new z(`Unknown metric ${t}`)}function d_(t){if(jo(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let n;for(let e of Object.keys(l_))if(l_[e]===t){n=e;break}if(n!==void 0)return n;for(let e of Object.keys(CI))if(CI[e]===t){n=e;break}return n!==void 0?n:t.name}}function FQ(t){let n={Adagrad:()=>Ho.adagrad(.01),Adadelta:()=>Ho.adadelta(1,.95,ri()),Adam:()=>Ho.adam(.001,.9,.999,ri()),Adamax:()=>Ho.adamax(.002,.9,.999,ri(),0),RMSProp:()=>Ho.rmsprop(.001,.9,0,ri()),SGD:()=>Ho.sgd(.01)};if(n.adagrad=n.Adagrad,n.adadelta=n.Adadelta,n.adam=n.Adam,n.adamax=n.Adamax,n.rmsprop=n.RMSProp,n.sgd=n.SGD,t in n)return n[t]();throw new z(`Unknown Optimizer ${t}`)}function GP(t,n,e=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!zP(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(e){let i=JSON.stringify(t);i.length>1048576&&console.warn(`User-defined metadata of model "${n}" is too large in size (length=${i.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function zP(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t);for(let e of n)if(typeof e!="string"||!zP(t[e]))return!1;return!0}else if(Array.isArray(t)){for(let n of t)if(!zP(n))return!1;return!0}else return!1;else{let n=typeof t;return n==="string"||n==="number"||n==="boolean"}}function LQ(t,n,e,i=console.log){let r=rMe(t),o=["Layer (type)","Input Shape","Output shape","Param #"];r?(n=n||90,e=e||[.32,.61,.89,1]):(n=n||115,e=e||[.24,.48,.7,.8,1]),e[e.length-1]<=1&&(e=e.map(u=>Math.floor(n*u)));let s;if(!r){o.push("Receives inputs"),s=[];for(let u in t.nodesByDepth)s.push(...t.nodesByDepth[u])}i("_".repeat(n)),II(o,e,i),i("=".repeat(n));let a=t.layers;for(let u=0;u<a.length;++u)r?oMe(a[u],e,i):sMe(a[u],e,s,i),i((u===a.length-1?"=":"_").repeat(n));t.checkTrainableWeightsConsistency();let l=iMe(t),c=sb(t.nonTrainableWeights);i(`Total params: ${l+c}`),i(`Trainable params: ${l}`),i(`Non-trainable params: ${c}`),i("_".repeat(n))}function iMe(t){let n;return t.collectedTrainableWeights!=null?n=sb(t.collectedTrainableWeights):n=sb(t.trainableWeights),n}function rMe(t){let n=!0,e=[],i=[];for(let r in t.nodesByDepth)e.push(t.nodesByDepth[r]);for(let r of e){if(r.length>1||r.length===1&&r[0].inboundLayers.length>1){n=!1;break}i.push(...r)}if(n)for(let r of t.layers){let o=!1;for(let s of r.inboundNodes)if(i.indexOf(s)!==-1)if(o){n=!1;break}else o=!0;if(!n)break}return n}function II(t,n,e=console.log){let i="";for(let r=0;r<t.length;++r)r>0&&(i=i.slice(0,i.length-1)+" "),i+=t[r],i=i.slice(0,n[r]),i+=" ".repeat(n[r]-i.length);e(i)}function oMe(t,n,e){let i,r;try{r=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{r="multiple"}try{i=JSON.stringify(t.outputShape)}catch{i="multiple"}let o=t.name,s=t.getClassName(),a=[`${o} (${s})`,r,i,t.countParams().toString()];II(a,n,e)}function sMe(t,n,e,i){let r,o;try{o=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{o="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}let s=[];for(let d of t.inboundNodes)if(!(e!=null&&e.length>0&&e.indexOf(d)===-1))for(let p=0;p<d.inboundLayers.length;++p){let h=d.inboundLayers[p].name,m=d.nodeIndices[p],g=d.tensorIndices[p];s.push(`${h}[${m}][${g}]`)}let a=t.name,l=t.getClassName(),c=s.length===0?"":s[0],u=[`${a} (${l})`,o,r,t.countParams().toString(),c];II(u,n,i);for(let d=1;d<s.length;++d)II(["","","","",s[d]],n,i)}function PQ(t,n,e){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&n===0&&typeof e=="string"}function ub(t,n){if(t===null)return null;if(typeof t=="string")return Kc(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],i=t.length;for(let r=0;r<i;++r){let o=t[r];PQ(n,r,o)?e.push(o):e.push(ub(o,n))}return e}else{let e={};for(let i of Object.keys(t)){let r=t[i];if(i==="name"&&typeof r=="string")e[i]=r;else{let o=Kc(i);e[o]=ub(r,o)}}return e}}function EI(t,n){if(t==null)return null;if(typeof t=="string")return _s(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){let e=[],i=t.length;for(let r=0;r<i;++r){let o=t[r];PQ(n,r,o)?e.push(o):e.push(EI(o,n))}return e}else{let e={};for(let i of Object.keys(t)){let r=t[i],o=_s(i);(i==="name"||i==="className")&&typeof r=="string"?e[o]=r:e[o]=EI(r,i)}return e}}var db="4.22.0";var aMe=t=>{let n=Object.keys(t);if(n.length===0)return!1;let e=n[0].split("/");return!isNaN(parseInt(e[e.length-1],10))},DI=class t extends Je{constructor(n){if(super({}),this.containerNodes=new Set,this.name=n.name,this.name==null){let b=this.getClassName().toLowerCase();this.name=Xd(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(n.inputs)?this.inputs=n.inputs.slice():this.inputs=[n.inputs],Array.isArray(n.outputs)?this.outputs=n.outputs.slice():this.outputs=[n.outputs],ws(this.inputs).length!==this.inputs.length)throw new z(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);ws(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let b of this.outputs){let v=b.sourceLayer,_=b.nodeIndex,w=b.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(_),this.outputLayersTensorIndices.push(w)}for(let b of this.inputs){let v=b.sourceLayer,_=b.nodeIndex,w=b.tensorIndex;jo(_===0,"input layer has >1 nodes"),jo(w===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(_),this.inputLayersTensorIndices.push(w)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){let v=this.inputLayers[b];if(!(v instanceof Yd))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${n.inputs}. Input ${b} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(let b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);let e={},i={},r={},o={},s={},a=[],l=(b,v,_,w,T,D)=>{(w==null||T==null||D==null)&&(w=b.sourceLayer,T=b.nodeIndex,D=b.tensorIndex);let N=w.inboundNodes[T];if(_.indexOf(N)!==-1)throw new kr(`The tensor ${b.name} at layer "${w.name}" is part of a cycle.`);if(v.indexOf(N)!==-1)return;this.containerNodes.add(t.nodeKey(w,T)),w.id in s||(s[w.id]=Object.keys(s).length),_.indexOf(N)===-1&&_.push(N);let O=N.inboundLayers.length;for(let P=0;P<O;P++){let B=N.inputTensors[P],K=N.inboundLayers[P],X=N.nodeIndices[P],Z=N.tensorIndices[P];l(B,v,_,K,X,Z)}for(v.push(N);_.indexOf(N)>=0;)_.splice(_.indexOf(N),1);a.push(N)},c=[],u=[];for(let b of this.outputs)l(b,c,u);let d=a.slice().reverse();for(let b of d){i[b.id]=b,b.id in e||(e[b.id]=0);let v=e[b.id],_=r[b.outboundLayer.id]==null?0:r[b.outboundLayer.id];v=Math.max(v,_),r[b.outboundLayer.id]=v,o[b.outboundLayer.id]=b.outboundLayer,e[b.id]=v;for(let w=0;w<b.inboundLayers.length;w++){let T=b.inboundLayers[w],D=b.nodeIndices[w],N=T.inboundNodes[D],O=e[N.id]==null?0:e[N.id];e[N.id]=Math.max(v+1,O),i[N.id]=N}}let p={};for(let b in e){let v=e[b];v in p||(p[v]=[]),p[v].push(i[b])}let h={};for(let b in r){let v=r[b];v in h||(h[v]=[]),h[v].push(o[b])}let m=Object.keys(h).map(b=>parseInt(b,10)).sort(n_);this.layers=[];for(let b of m){let v=h[b];v.sort((_,w)=>{let T=s[_.id],D=s[w.id];return T<D?-1:T>D?1:0});for(let _ of v)_ instanceof t&&this.internalContainerRefs.push(_),this.layers.push(_)}this.layersByDepth=h,m=Object.keys(p).map(b=>parseInt(b,10)).sort(n_);let g=this.inputs.slice(),f=[];for(let b of m)for(let v of p[b]){let _=v.outboundLayer;if(_!=null){for(let w of v.inputTensors)if(g.indexOf(w)===-1)throw new kr(`Graph disconnected: cannot obtain value for tensor ${w} at layer "${_.name}". The following previous layers were accessed without issue: ${f}`);for(let w of v.outputTensors)g.push(w);f.push(_.name)}}this.nodesByDepth=p;let y=this.layers.map(b=>b.name);for(let b of y){let v=y.filter(_=>_===b).length;if(v!==1)throw new kr(`The name "${b}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new Zc({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let n={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(let e of this.layers)n.numDisposedVariables+=e.dispose().numDisposedVariables;for(let e of this.internalContainerRefs)n.numDisposedVariables+=e.dispose().numDisposedVariables}return n.refCountAfterDispose=this._refCount,n}get trainable(){return this.trainable_}set trainable(n){this.layers.forEach(e=>{e._trainableWeights.forEach(i=>i.trainable=n)}),this.trainable_=n}get trainableWeights(){if(this._trainableWeights.length>0)throw new z("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let n=[];for(let e of this.layers)n=n.concat(e.trainableWeights);return n}get nonTrainableWeights(){let n=[];for(let e of this.layers)n.push(...e.nonTrainableWeights);if(!this.trainable){let e=[];for(let i of this.layers)e.push(...i.trainableWeights);return e.concat(n)}return n}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(n,e=!0){let i={},r=0,o=aMe(n);o&&this.parseWeights(n);for(let a of this.layers)for(let[l,c]of a.weights.entries()){let u=o?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(i[u]!=null)throw new z(`Duplicate weight name: ${u}`);i[u]=c,r++}let s=[];for(let a in n){let l=a;if(i[a]==null){let c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(i[l]!=null)s.push([i[l],n[a]]);else if(e)throw new z(`Provided weight data has no target variable: ${a}`);delete i[l]}if(e){let a=[];for(let l in i)a.push(l);if(a.length>0)throw new z(`${a.length} of ${r} weights are not set: ${a}`)}ab(s)}parseWeights(n){for(let e in Object.keys(n)){let i=e.split("/"),r=["vars","layer_checkpoint_dependencies"],o=i.map(s=>s.startsWith("_")?s.slice(1):s).filter(s=>!r.includes(s)).join("/");o!==e&&(n[o]=n[e],delete n[e])}}updatedConfig(){let n=this.getConfig(),e={};return e.className=this.getClassName(),e.config=n,e.kerasVersion=`tfjs-layers ${db}`,e.backend="TensorFlow.js",e}toJSON(n,e=!0){let i=EI(this.updatedConfig());return e?JSON.stringify(i):i}call(n,e){return W(()=>{n=Yt(n);let i=new Za;for(let r=0;r<this.inputs.length;++r)i.add(this.inputs[r],n[r]);return mm(this.outputs,i,e)})}computeMask(n,e){return W(()=>{n=Yt(n);let i;return e==null?i=vs(null,n.length):i=Yt(e),this.runInternalGraph(n,i)[1]})}computeOutputShape(n){let e=ob(n);if(e.length!==this.inputLayers.length)throw new z(`Invalid inputShape argument ${n}: model has ${this.inputLayers.length} tensor inputs.`);let i={};for(let a=0;a<e.length;a++){let l=this.inputLayers[a],c=e[a],u=l.name+"_0_0";i[u]=c}let r=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(n_);if(r.length>1)for(let a of r){let l=this.nodesByDepth[a];for(let c of l){let u=c.outboundLayer;if(this.inputLayers.map(g=>g.id).indexOf(u.id)!==-1)continue;let d=[];for(let g=0;g<c.inboundLayers.length;g++){let f=c.inboundLayers[g],y=c.nodeIndices[g],b=c.tensorIndices[g],v=`${f.name}_${y}_${b}`,_=i[v];d.push(_)}let p=u.computeOutputShape(Si(d)),h=ob(p),m=u.inboundNodes.indexOf(c);for(let g=0;g<h.length;g++){let f=`${u.name}_${m}_${g}`;i[f]=h[g]}}}let o=[],s=[];for(let a=0;a<this.outputLayers.length;a++){let l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;s.push(d)}for(let a=0;a<s.length;a++){let l=s[a];jo(l in i),o.push(i[l])}return Si(o)}runInternalGraph(n,e){e==null&&(e=vs(null,n.length));let i={};for(let l=0;l<this.inputs.length;++l){let c=this.inputs[l],u=n[l],d=e[l];i[c.id]=[u,d]}let r=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(n_);for(let l of r){let c=this.nodesByDepth[l];for(let u of c){let d=u.outboundLayer,p=u.inputTensors,h=u.outputTensors,m=new Array;for(let g of p)g.id in i&&m.push(i[g.id]);if(m.length===p.length){let g={},f,y,b,v;if(u.callArgs!=null&&(g=u.callArgs),m.length===1){let[_,w]=m[0];g.mask==null&&(g.mask=w),b=Yt(d.call(_,g)),v=Yt(d.computeMask(_,w)),f=[_],y=[w]}else f=m.map(_=>_[0]),y=m.map(_=>_[1]),g.mask==null&&(g.mask=y),b=Yt(d.call(f,g)),v=Yt(d.computeMask(f,y));if(d.activityRegularizer)throw new et("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let _=0;_<h.length;++_){let w=h[_],T=b[_],D=v[_];i[w.id]=[T,D]}}}}let o=[],s=[],a=[];for(let l of this.outputs){jo(l.id in i,`Could not compute output ${l.name} : ${l.id}`);let[c,u]=i[l.id];a.push(c.shape),o.push(c),s.push(u)}return[o,s,a]}buildNodeConversionMap(n){let e={},i;for(let r of this.layers){i=r instanceof t?1:0;for(let o=0;o<r.inboundNodes.length;o++){let s=t.nodeKey(r,o);this.containerNodes.has(s)&&(e[s]=i,i+=1)}}return e}getLayer(n,e){if(e!=null)return this.findLayer(e);if(n==null)throw new z("Provide either a layer name or layer index");if(typeof n=="number")return this.findLayer(n);for(let i of this.layers)if(i.name===n)return i;throw new z(`No such layer: ${n}`)}findLayer(n){if(this.layers.length<=n)throw new z(`Was asked to retrieve layer at index ${n}, but model only has ${this.layers.length} layer(s).`);return this.layers[n]}calculateLosses(){return W(()=>{let n=[];for(let e of this.layers)for(let i=0;i<e.inboundNodes.length;++i){let r=t.nodeKey(e,i);this.containerNodes.has(r)&&n.push(...e.calculateLosses())}return n})}getConfig(){let n={name:this.name},e=this.buildNodeConversionMap(this.layers),i=[];for(let s of this.layers){let a=s.getClassName(),l=s.getConfig(),c=[];for(let d=0;d<s.inboundNodes.length;d++){let p=s.inboundNodes[d],h=t.nodeKey(s,d),m={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),m=p.callArgs}catch{console.warn(`Layer ${s.name} was passed non-serializable keyword arguments: ${p.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),m={}}if(p.inboundLayers.length>0){let g=[];for(let f=0;f<p.inboundLayers.length;f++){let y=p.inboundLayers[f],b=p.nodeIndices[f],v=p.tensorIndices[f],_=t.nodeKey(y,b),w=e[_];w==null&&(w=0),g.push([y.name,w,v,m])}c.push(g)}}}let u={};u.name=s.name,u.className=a,u.config=l,u.inboundNodes=c,i.push(u)}n.layers=i;let r=[];for(let s=0;s<this.inputLayers.length;s++){let a=this.inputLayers[s],l=this.inputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.inputLayersTensorIndices[s];r.push([a.name,u,d])}n.inputLayers=r;let o=[];for(let s=0;s<this.outputLayers.length;s++){let a=this.outputLayers[s],l=this.outputLayersNodeIndices[s],c=t.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=e[c];u==null&&(u=0);let d=this.outputLayersTensorIndices[s];o.push([a.name,u,d])}return n.outputLayers=o,n}static fromConfig(n,e,i={},r=!1){let o={},s={};function a(f,y){f.name in s?s[f.name].push(y):s[f.name]=[y]}function l(f,y){let b=[],v;for(let _ of y){let w=_[0],T=_[1],D=_[2];if(v=_[3]==null?{}:_[3],!(w in o)){a(f,y);return}let N=o[w];if(N.inboundNodes.length<=T){a(f,y);return}let O=N.inboundNodes[T];b.push(O.outputTensors[D])}b.length>0&&f.apply(Si(b),v)}function c(f){let y=f.name,b=Zr(f,e.customObjects!=null?e.customObjects:{});b.setFastWeightInitDuringBuild(r),o[y]=b,f.inboundNodes.forEach(_=>{if(!(_ instanceof Array))throw new z(`Corrupted configuration, expected array for nodeData: ${_}`);a(b,_)})}let u=e.name,d=e.layers;for(let f of d)c(f);for(;!W9(s);)for(let f of d){let y=o[f.name];if(y.name in s){let b=s[y.name];delete s[y.name];for(let v of b)l(y,v)}}let p=[],h=[],m=e.inputLayers;for(let f of m){let y=f[0],b=f[1],v=f[2];jo(y in o);let w=o[y].inboundNodes[b].outputTensors;p.push(w[v])}let g=e.outputLayers;for(let f of g){let y=f[0],b=f[1],v=f[2];jo(y in o);let w=o[y].inboundNodes[b].outputTensors;h.push(w[v])}return new n({inputs:p,outputs:h,name:u})}get stateful(){if(this._stateful)throw new z("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let n of this.layers)if(n.stateful)return!0;return!1}resetStates(){W(()=>{this.layers.forEach(n=>{n.stateful&&n.resetStates()})})}};function lMe(t,n,e){let i=n.length;if(t==null||Array.isArray(t)&&t.length===0)return n.map(r=>null);if(i===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&n[0]in t?[t[n[0]]]:[t];if(Array.isArray(t)){if(t.length!==i)throw new Error(`Provided ${e} is an array of ${t.length} element(s), but the model has ${i} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){let r=[];return n.forEach(o=>{o in t?r.push(t[o]):r.push(null)}),r}else throw new Error(`The model has multiple (${i}) outputs, so ${e} must be either an array with ${i} elements or an object with ${n} keys. Provided ${e} not understood: ${JSON.stringify(t)}`)}function AI(t,n){return lMe(t,n,"classWeight")}function NI(t,n,e,i){return H(this,null,function*(){if(n!=null||i!=null)throw new Error("Support sampleWeight is not implemented yet");if(e!=null){let r=W(()=>{if(t.shape.length===1)return vo(t);if(t.shape.length===2){if(t.shape[1]>1)return Bc(t,1);if(t.shape[1]===1)return $(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),o=Array.from(yield r.data());it(r);let s=[];return o.forEach(a=>{if(e[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);s.push(e[a])}),In(s,"float32")}else return null})}function $Q(t,n){return F(t,n)}var cMe=32;function zQ(t,n){let e,i,r=n;e=r.xs,i=r.ys,x.assert(e!=null&&i!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${n}`);let o=VQ("input",t.inputNames,e),s=VQ("output",t.outputNames,i),a=o[0].shape[0];x.assert(o.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),x.assert(s.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<o.length;l++)x.assert(o[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<s.length;l++)x.assert(s[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${s[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:o,ys:s}}function VQ(t,n,e){if(e instanceof Kt)return[e];if(Array.isArray(e))return x.assert(e.length===n.length,()=>`Received an array of ${e.length} Tensors, but expected ${n.length} to match the ${t} keys ${n}.`),e;{let i=[];for(let r of n){if(e[r]==null)throw new z(`The feature data generated by the dataset lacks the required ${t} key '${r}'.`);i.push(e[r])}return i}}function uMe(t){if(t.length===3)throw new et("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}function GQ(t,n,e){return H(this,null,function*(){let i=e.batchesPerEpoch!=null;if(x.assert(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),x.assert(e!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),x.assert(e.epochs!=null&&e.epochs>0&&Number.isInteger(e.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${e.epochs}`),x.assert(!i||e.batchesPerEpoch>0&&Number.isInteger(e.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${e.batchesPerEpoch}`),x.assert(e.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{let r=e.validationData!=null,o,s;if(r)if(BQ(e.validationData))x.assert(e.validationBatches==null||e.validationBatches>0&&Number.isInteger(e.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${e.validationBatches}`);else{let f=uMe(e.validationData);o=f.xs,s=f.ys}let a=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),c;r?c=l.slice().concat(l.map(f=>"val_"+f)):c=l.slice();let u=xI(e.callbacks,e.yieldEvery),d=e.verbose==null?1:e.verbose,{callbackList:p,history:h}=vI(u,d,e.epochs,null,null,dMe(n,e),null,r,c);p.setModel(t),t.history=h,yield p.onTrainBegin(),t.stopTraining_=!1;let m=e.initialEpoch==null?0:e.initialEpoch,g=yield n.iterator();for(;m<e.epochs;){let f={};yield p.onEpochBegin(m);let y=0,b=0;for(i||(g=yield n.iterator());!i||y<e.batchesPerEpoch;){let v=yield g.next();if(i&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${e.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${e.batchesPerEpoch*e.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){let{xs:_,ys:w}=zQ(t,v.value),T={};T.batch=b,T.size=_[0].shape[0],yield p.onBatchBegin(b,T);let D=[];if(e.classWeight!=null){let P=AI(e.classWeight,t.outputNames);for(let B=0;B<P.length;++B)D.push(yield NI(w[B],null,P[B]))}let N=_.concat(w).concat(D),O=a(N);it(N);for(let P=0;P<l.length;++P){let B=l[P],K=O[P];T[B]=K,_i(K)}yield p.onBatchEnd(b,T),fI(T),b++,y++}if(i?y>=e.batchesPerEpoch:v.done){if(r){let _;BQ(e.validationData)?_=Yt(yield t.evaluateDataset(e.validationData,{batches:e.validationBatches})):_=Yt(t.evaluate(o,s,{batchSize:e.validationBatchSize==null?cMe:e.validationBatchSize,verbose:0}));for(let w=0;w<t.metricsNames.length;++w)f[`val_${t.metricsNames[w]}`]=_[w]}break}if(t.stopTraining_)break}if(yield p.onEpochEnd(m,f),m++,t.stopTraining_)break}return yield p.onTrainEnd(),yield t.history.syncData(),t.history}finally{t.isTraining=!1}})}function dMe(t,n){let e=null;return n.batchesPerEpoch!=null?e=n.batchesPerEpoch:Number.isFinite(t.size)&&(e=t.size),e}function BQ(t){return typeof t.iterator=="function"}function pMe(t){return typeof t.next=="function"}function UQ(t,n,e){return H(this,null,function*(){e=e||{};let i=e.batches!=null,r=t.testFunction,o=[];if(e.verbose>0)throw new et("Verbose mode is not implemented yet.");x.assert(!i||e.batches>0&&Number.isInteger(e.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(e.batches)}`);let s=pMe(n)?n:yield n.iterator(),a=0,l=0;for(;!i||l<e.batches;){let c=yield s.next();if(o=W(()=>{if(c.value){let{xs:u,ys:d}=zQ(t,c.value),p=u.concat(d),h=W(()=>r(p));if(it(p),l===0)for(let g=0;g<h.length;++g)o.push(je(0));let m=p[0].shape[0];for(let g=0;g<h.length;++g){let f=h[g],y=o[g];o[g]=W(()=>re(o[g],F(m,f))),l>0&&it(y)}it(h),a+=m,++l}return o}),c.done){i&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${e.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<o.length;++c){let u=o[c];o[c]=_e(o[c],a),it(u)}return Si(o)})}function MI(t){x.assert(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function pb(t,n,e){return t==null?[null]:Array.isArray(t)?t.map(i=>Yc(i,n,e-n)):Yc(t,n,e-n)}function RI(t,n){return W(()=>t==null?null:Array.isArray(t)?t.map(e=>RI(e,n)):lI(t,n.dtype==="int32"?n:ce(n,"int32")))}function OI(t,n){let e=[],i=0,r=null;for(;i<t;)r=i+n,r>=t&&(r=t),e.push([i,r]),i=r;return e}function UP(t){let n=[];t instanceof Kt&&(t=[t]);for(let e=0;e<t.length;++e){let i=t[e];if(i.rank===1)n.push(Qc(i,1));else{if(i.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");n.push(i)}}return n}function Ss(t,n){if(t==null)return;let e=[];if(n instanceof Kt)e.push(n.id);else if(Array.isArray(n))n.forEach(r=>e.push(r.id));else if(n!=null)for(let r in n){let o=n[r];e.push(o.id)}let i=[];if(t instanceof Kt)e.indexOf(t.id)===-1&&i.push(t);else if(Array.isArray(t))t.forEach(r=>{e.indexOf(r.id)===-1&&i.push(r)});else if(t!=null)for(let r in t){let o=t[r];e.indexOf(o.id)===-1&&i.push(o)}i.forEach(r=>{r.isDisposed||r.dispose()})}function hMe(t){return t instanceof Kt}function HP(t){return Array.isArray(t)}function HQ(t){return!hMe(t)&&!HP(t)}function WQ(t,n,e,i=!0,r=""){if(n==null||n.length===0){if(t!=null){let s=!1;if(HP(t)&&t.length>0)s=!0;else if(HQ(t)){for(let a in t)if(t.hasOwnProperty(a)){s=!0;break}}else s=!0;if(s)throw new z(`Error when checking model ${r} expected no data, but got ${t}`)}return[]}if(t==null)return n.map(s=>null);let o;if(HQ(t)){t=t,o=[];for(let s of n){if(t[s]==null)throw new z(`No data provided for "${s}". Need data for each key in: ${n}`);o.push(t[s])}}else if(HP(t)){if(t=t,t.length!==n.length)throw new z(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${n.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);o=t}else{if(t=t,n.length>1)throw new z(`The model ${r} expects ${n.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);o=[t]}if(o=UP(o),e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=o[s];if(a.shape.length!==e[s].length)throw new z(`Error when checking ${r}: expected ${n[s]} to have ${e[s].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<e[s].length;++l){if(l===0&&!i)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u>=0&&c!==u)throw new z(`${r} expected a batch of elements where each example has shape [${e[s].slice(1,e[s].length)}] (i.e.,tensor shape [*,${e[s].slice(1,e[s].length)}]) but the ${r} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function mMe(t,n,e){let i=ws(t.map(o=>o.shape[0]));i.sort();let r=ws(n.map(o=>o.shape[0]));if(r.sort(),i.length>1)throw new z(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(o=>o.shape))}`);if(r.length>1)throw new z(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(n.map(o=>o.shape))}`);if(i.length>0&&r.length>0&&!x.arraysEqual(i,r))throw new z(`Input Tensors should have the same number of samples as target Tensors. Found ${i[0]} input sample(s) and ${r[0]} target sample(s).`)}function fMe(t,n,e){let i=[gm,cb,ym];for(let r=0;r<t.length;++r){let o=t[r],s=n[r],a=e[r];if(s!=null){if(s===ym&&o.shape[o.shape.length-1]===1)throw new z(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(i.indexOf(s)!==-1){let l=o.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){let d=l[u],p=c[u];if(p!=null&&d!==p)throw new z(`A target Tensor with shape ${o.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function jQ(t,n,e,i=!0,r=""){let o;if(Array.isArray(t)){if(t.length!==n.length)throw new z(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${n.length} Tensor(s), but instead got ${t.length} Tensors(s).`);o=t}else{if(n.length>1)throw new z(`The model expects ${n.length} ${r} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);o=[t]}if(e!=null)for(let s=0;s<n.length;++s){if(e[s]==null)continue;let a=o[s];if(a.shape.length!==e[s].length)throw new z(`Error when checking ${r}: expected ${n[s]} to have ${e[s].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<e[s].length;++l){if(l===0&&!i)continue;let c=a.shape[l],u=e[s][l];if(u!=null&&u!==c)throw new z(`Error when checking ${r}: expected ${n[s]} to have shape ${JSON.stringify(e[s])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function gMe(t,n){if(t==null||Array.isArray(t)&&t.length===0)return n.map(i=>[]);let e;if(typeof t=="string"||typeof t=="function")e=[t];else if(Array.isArray(t)||typeof t=="object")e=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(e))return n.map(i=>e);{let i=[];for(let r of n){let o=e.hasOwnProperty(r)?e[r]:[];Array.isArray(o)||(o=[o]),i.push(o)}return i}}var yMe="layers-model",Ja=(()=>{class t extends DI{constructor(e){super(e),this.isTraining=!1}summary(e,i,r=console.log){if(!this.built)throw new z("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");LQ(this,e,i,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=FQ(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof Zi))throw new z("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let i=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(let a in e.loss)if(this.outputNames.indexOf(a)===-1)throw new z(`Unknown entry in loss dictionary: "${a}". Only expected the following keys: ${this.outputNames}`);for(let a of this.outputNames)e.loss[a]==null&&console.warn(`Output "${a}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${a} during training`),i.push(wI(e.loss[a]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new z(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);i=e.loss.map(l=>wI(l))}else{let a=wI(e.loss);this.outputs.forEach(l=>{i.push(a)})}this.lossFunctions=i,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let a=0;a<this.outputs.length;++a){let l=this.internalOutputShapes[a],c=this.outputNames[a];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[a])}let r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],na("loss",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;let l=this.lossFunctions[a];this.outputs.length>1&&(this.metricsTensors.push([l,a]),this.metricsNames.push(this.outputNames[a]+"_loss"))}});let o=gMe(e.metrics,this.outputNames),s=(a,l,c)=>{this.outputNames.length>1&&(l=this.outputNames[a]+"_"+l),this.metricsNames.push(l),this.metricsTensors.push([c,a])};na("metric",()=>{for(let a=0;a<this.outputs.length;++a){if(r.indexOf(a)!==-1)continue;let l=o[a];(u=>{let d="",p,h,m;for(let g of u){if(typeof g=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(g)!==-1){let y=this.internalOutputShapes[a];y[y.length-1]===1||this.lossFunctions[a]===cb?["accuracy","acc"].indexOf(g)!==-1?h=TI:["crossentropy","ce"].indexOf(g)!==-1&&(h=$P):this.lossFunctions[a]===lb?["accuracy","acc"].indexOf(g)!==-1?h=VP:["crossentropy","ce"].indexOf(g)!==-1&&(h=BP):["accuracy","acc"].indexOf(g)!==-1?h=SI:["crossentropy","ce"].indexOf(g)!==-1&&(h=kI);let b;["accuracy","acc"].indexOf(g)!==-1?b="acc":["crossentropy","ce"].indexOf(g)!==-1&&(b="ce"),m=h,p=d+b}else m=RQ(g),p=d+d_(g);let f;na(p,()=>{f=m}),s(a,p,f)}})(l)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,i,r={}){let o=r.batchSize==null?32:r.batchSize;MI(o);let a=this.standardizeUserDataXY(e,i,!0,o);try{let l=a[0].concat(a[1]);this.makeTestFunction();let c=this.testFunction,u=this.testLoop(c,l,o,r.verbose,r.steps);return Si(u)}finally{Ss(a[0],e),Ss(a[1],i)}}evaluateDataset(e,i){return H(this,null,function*(){return this.makeTestFunction(),UQ(this,e,i)})}checkNumSamples(e,i,r,o="steps"){let s;if(r!=null){if(s=null,i!=null)throw new z(`If ${o} is set, batchSize must be null or undefined.Got batchSize = ${i}`)}else if(e!=null)Array.isArray(e)?s=e[0].shape[0]:s=e.shape[0];else throw new z(`Either the input data should have a defined shape, or ${o} shoud be specified.`);return s}execute(e,i){if(Array.isArray(i)&&i.length===0)throw new z("`outputs` is an empty Array, which is not allowed.");let r=Array.isArray(i),o=r?i:[i],s=this.retrieveSymbolicTensors(o),a=new Za;if(e instanceof Kt&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new z(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let c=0;c<this.inputs.length;++c)a.add(this.inputs[c],e[c])}else for(let c of this.inputs){let u=e[c.name];if(u==null)throw new z(`No value is provided for the model's input ${c.name}`);a.add(c,u)}let l=mm(s,a);return r?l:l[0]}retrieveSymbolicTensors(e){let i=vs(null,e.length),r=e.length;for(let o of this.layers){let s=Array.isArray(o.output)?o.output:[o.output],a=s.map(l=>l.name);for(let l=0;l<e.length;++l){let c=a.indexOf(e[l]);if(c!==-1&&(i[l]=s[c],r--),r===0)break}if(r===0)break}if(r>0){let o=[];throw i.forEach((s,a)=>{s==null&&o.push(e[a])}),new z(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(o)}`)}return i}predictLoop(e,i=32,r=!1){return W(()=>{let o=this.checkNumSamples(e);if(r)throw new et("Verbose predictLoop() is not implemented yet.");let s=OI(o,i),a=this.outputs.map(l=>[]);for(let l=0;l<s.length;++l)W(()=>{let u=s[l][0],d=s[l][1],p=pb(e,u,d),h=[];if(Array.isArray(p))for(let g=0;g<p.length;++g)h.push({key:this.inputs[g],value:p[g]});else h.push({key:this.inputs[0],value:p});let m=new Za(h);return mm(this.outputs,m)}).forEach((u,d)=>a[d].push(u));return Si(a.map(l=>xn(l,0)))})}predict(e,i={}){let r=UP(e);jQ(r,this.inputNames,this.feedInputShapes,!1);try{let o=i.batchSize==null?32:i.batchSize;return MI(o),this.predictLoop(r,o)}finally{Ss(r,e)}}predictOnBatch(e){jQ(e,this.inputNames,this.feedInputShapes,!0);let i=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,i)}standardizeUserDataXY(e,i,r=!0,o){if(this.optimizer_==null)throw new kr("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let s=[];for(let a=0;a<this.feedOutputShapes.length;++a){let l=this.feedOutputShapes[a];this.feedLossFns[a]===lb?s.push(l.slice(0,l.length-1).concat([1])):s.push(l)}if(e=WQ(e,this.feedInputNames,this.feedInputShapes,!1,"input"),i=WQ(i,this.feedOutputNames,s,!1,"target"),mMe(e,i,null),fMe(i,this.feedLossFns,this.feedOutputShapes),this.stateful&&o!=null&&o>0&&e[0].shape[0]%o!==0)throw new z(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${o}. Found: ${e[0].shape[0]} sample(s).`);return[e,i]}standardizeUserData(e,i,r,o,s=!0,a){return H(this,null,function*(){let[l,c]=this.standardizeUserDataXY(e,i,s,a);if(r!=null)throw new Error("sample weight is not supported yet.");let u=null;if(o!=null){let d=AI(o,this.outputNames);u=[];for(let p=0;p<d.length;++p)u.push(yield NI(c[p],null,d[p]))}return[l,c,u]})}testLoop(e,i,r,o=0,s){return W(()=>{let a=this.checkNumSamples(i,r,s,"steps"),l=[];if(o>0)throw new et("Verbose mode is not implemented yet.");if(s!=null)throw new et("steps mode in testLoop() is not implemented yet");{let c=OI(a,r),u=In(Er(0,a));for(let d=0;d<c.length;++d){let p=c[d][0],h=c[d][1],m=Yc(u,p,h-p),g=RI(i,m),f=e(g);if(d===0)for(let y=0;y<f.length;++y)l.push(je(0));for(let y=0;y<f.length;++y){let b=f[y];l[y]=re(l[y],F(h-p,b))}}for(let d=0;d<l.length;++d)l[d]=_e(l[d],a)}return l})}getDedupedMetricsNames(){let e=this.metricsNames,i=[];for(let r=0;r<e.length;++r){let o=e[r],s=o;if(CP(e,o)>1){let a=CP(e.slice(0,r),o);s+=`_${a}`}i.push(s)}return i}makeTrainFunction(){return e=>{let i=[],r=e.slice(0,this.inputs.length),o=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),s=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),a=[],l=()=>{let p=[];for(let f=0;f<this.inputs.length;++f)p.push({key:this.inputs[f],value:r[f]});let h=new Za(p),m=mm(this.outputs,h,{training:!0}),g;for(let f=0;f<this.lossFunctions.length;++f){let y=this.lossFunctions[f],b=y(o[f],m[f]);s[f]!=null&&(b=$Q(b,s[f]));let v=fn(b);i.push(v),f===0?g=b:g=re(g,b)}for(let f=0;f<this.metricsTensors.length;++f){let y;if(this.outputs.length>1&&f<this.outputs.length)y=i[f];else{let b=this.metricsTensors[f][0],v=this.metricsTensors[f][1];y=fn(b(o[v],m[v]))}_i(y),a.push(y)}return g=fn(g),this.calculateLosses().forEach(f=>{g=re(g,f)}),g},c=this.collectedTrainableWeights.map(p=>p.read());return[this.optimizer_.minimize(l,!0,c)].concat(a)}}makeTestFunction(){this.testFunction=e=>W(()=>{let i=[],r,o=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),a=[];for(let u=0;u<this.inputs.length;++u)a.push({key:this.inputs[u],value:o[u]});let l=new Za(a),c=mm(this.outputs,l);for(let u=0;u<this.lossFunctions.length;++u){let d=this.lossFunctions[u],p=fn(d(s[u],c[u]));u===0?r=p:r=re(r,p),i.push(r)}for(let u=0;u<this.metricsTensors.length;++u){let d=this.metricsTensors[u][0],p=this.metricsTensors[u][1],h=fn(d(s[p],c[p]));i.push(h)}return i})}fit(o,s){return H(this,arguments,function*(e,i,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let a,l,c,u,d,p,h,m,g;try{let f=r.batchSize==null?32:r.batchSize;MI(f);let b=yield this.standardizeUserData(e,i,r.sampleWeight,r.classWeight,!1,f);a=b[0],l=b[1],g=b[2];let v=!1,_;if(r.validationData!=null&&r.validationData.length>0){if(v=!0,r.validationData.length===2)d=r.validationData[0],p=r.validationData[1];else throw r.validationData.length===3?new et("validationData including sample weights is not supported yet."):new z(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);let X=yield this.standardizeUserData(d,p,null,null,!0,f);h=X[0],m=X[1],_=h.concat(m)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){v=!0;let K=Math.floor(a[0].shape[0]*(1-r.validationSplit)),X=a[0].shape[0];h=pb(a,K,X),c=a,a=pb(a,0,K),m=pb(l,K,X),u=l,l=pb(l,0,K),_=h.concat(m)}else r.validationSteps!=null&&(v=!0);let w=a.concat(l).concat(g);this.checkTrainableWeightsConsistency();let T=this.makeTrainFunction(),D=this.getDedupedMetricsNames(),N,O;v?(this.makeTestFunction(),N=this.testFunction,O=D.slice().concat(D.map(K=>"val_"+K))):(N=null,_=[],O=D.slice());let P=xI(r.callbacks,r.yieldEvery);return yield this.fitLoop(T,w,D,f,r.epochs,r.verbose,P,N,_,r.shuffle,O,r.initialEpoch,null,null)}finally{this.isTraining=!1,Ss(a,e),Ss(l,i),Ss(c,e),Ss(u,i),Ss(h,d),Ss(m,p),g!=null&&it(g)}})}fitLoop(e,i,r,o,s,a,l,c,u,d,p,h,m,g){return H(this,null,function*(){o==null&&(o=32),s==null&&(s=1),d==null&&(d=!0),h==null&&(h=0);let f=!1;if(c!=null&&u!=null&&(f=!0),g!=null&&(f=!0,m==null))throw new z("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let y=this.checkNumSamples(i,o,m,"steps_per_epoch"),b;y!=null&&(b=Er(0,y)),a==null&&(a=1);let{callbackList:v,history:_}=vI(l,a,s,h,y,m,o,f,p);v.setModel(this),this.history=_,yield v.onTrainBegin(),this.stopTraining_=!1;for(let w=h;w<s;++w){yield v.onEpochBegin(w);let T={};if(m!=null)throw new et("stepsPerEpoch mode is not implemented yet.");{if(d==="batch")throw new et("batch shuffling is not implemneted yet");d&&x.shuffle(b);let D=In(b),N=OI(y,o);for(let O=0;O<N.length;++O){let P={};if(yield v.onBatchBegin(O,P),W(()=>{let B=N[O][0],K=N[O][1],X=Yc(D,B,K-B);P.batch=O,P.size=K-B;let Z=RI(i,X),te=e(Z);for(let U=0;U<r.length;++U){let j=r[U],q=te[U];P[j]=q,_i(q)}if(O===N.length-1&&f){let U=this.testLoop(c,u,o);for(let j=0;j<r.length;++j){let q=r[j],Q=U[j];_i(Q),T["val_"+q]=Q}}}),yield v.onBatchEnd(O,P),fI(P),this.stopTraining_)break}D.dispose()}if(yield v.onEpochEnd(w,T),this.stopTraining_)break}return yield v.onTrainEnd(),yield this.history.syncData(),this.history})}fitDataset(e,i){return H(this,null,function*(){return GQ(this,e,i)})}trainOnBatch(e,i){return H(this,null,function*(){let r=yield this.standardizeUserData(e,i),o=r[0],s=r[1],l=this.makeTrainFunction()(o.concat(s)),c=[];for(let u of l){let d=yield u.data();c.push(d[0])}return it(l),Ss(r[0],e),Ss(r[1],i),Si(c)})}getNamedWeights(e){let i=[],r=e!=null&&e.trainableOnly,o=r?this.trainableWeights:this.weights,s=this.getWeights(r);for(let a=0;a<o.length;++a)r&&!o[a].trainable||i.push({name:o[a].originalName,tensor:s[a]});return i}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){let i=I0().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=i-I0().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=_s(this.loss);else if(Array.isArray(this.loss)){for(let i of this.loss)if(typeof i!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(i=>_s(i))}else{let i=Object.keys(this.loss);e={};let r=this.loss;for(let o of i)if(typeof r[o]=="string")e[o]=_s(r[o]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[_s(d_(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>_s(d_(e)));{let e={};for(let i in this.metrics)e[i]=_s(d_(this.metrics[i]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");let i=ub(e.optimizer_config),r=Zr(i),o;if(typeof e.loss=="string")o=Kc(e.loss);else if(Array.isArray(e.loss))o=e.loss.map(a=>Kc(a));else if(e.loss!=null){o={};for(let a in e.loss)o[a]=Kc(e.loss[a])}let s;if(Array.isArray(e.metrics))s=e.metrics.map(a=>Kc(a));else if(e.metrics!=null){s={};for(let a in e.metrics)s[a]=Kc(e.metrics[a])}this.compile({loss:o,metrics:s,optimizer:r})}save(e,i){return H(this,null,function*(){if(typeof e=="string"){let u=bs.getSaveHandlers(e);if(u.length===0)throw new z(`Cannot find any save handlers for URL '${e}'`);if(u.length>1)throw new z(`Found more than one (${u.length}) save handlers for URL '${e}'`);e=u[0]}if(e.save==null)throw new z("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let r=yield bs.encodeWeights(this.getNamedWeights(i)),l={modelTopology:this.toJSON(null,!1),format:yMe,generatedBy:`TensorFlow.js tfjs-layers v${db}`,convertedBy:null};if((i==null?!1:i.includeOptimizer)&&this.optimizer!=null){l.trainingConfig=this.getTrainingConfig();let u="optimizer",{data:d,specs:p}=yield bs.encodeWeights(yield this.optimizer.getWeights(),u);r.specs.push(...p),r.data=bs.concatenateArrayBuffers([r.data,d])}return this.userDefinedMetadata!=null&&(GP(this.userDefinedMetadata,this.name,!0),l.userDefinedMetadata=this.userDefinedMetadata),l.weightData=r.data,l.weightSpecs=r.specs,e.save(l)})}setUserDefinedMetadata(e){GP(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}return t.className="Model",t})();ne.registerClass(Ja);var bMe=(()=>{class t extends Ja{}return t.className="Functional",t})();ne.registerClass(bMe);function Zd(t,n){return H(this,null,function*(){if(n==null&&(n={}),typeof t=="string"){let e=bs.getLoadHandlers(t,n);if(e.length===0)e.push(bs.browserHTTPRequest(t,n));else if(e.length>1)throw new z(`Found more than one (${e.length}) load handlers for URL '${t}'`);t=e[0]}return xMe(t,void 0,n)})}function xMe(t,n,e){return H(this,null,function*(){if(e==null&&(e={}),t.load==null)throw new z("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let i=yield t.load(),r=i.modelTopology;r.model_config!=null&&(r=r.model_config);let o=e.strict==null?!0:e.strict,s=i.weightData!=null&&i.weightSpecs!=null&&o,a=Zr(ub(r),n,s),l=i.trainingConfig;if(l!=null&&a.loadTrainingConfig(l),i.userDefinedMetadata!=null&&a.setUserDefinedMetadata(i.userDefinedMetadata),i.weightData!=null){if(i.weightSpecs==null)throw new z("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:c,optimizerWeights:u}=vMe(i.weightData,i.weightSpecs);a.loadWeights(c,o),a.optimizer!=null&&u.length>0&&(yield a.optimizer.setWeights(u)),it(c),it(u.map(d=>d.tensor))}return a})}function vMe(t,n){let e=bs.decodeWeights(t,n),i={},r=[];return n.forEach(o=>{o.group==="optimizer"?r.push({name:o.name,tensor:e[o.name]}):i[o.name]=e[o.name]}),{modelWeights:i,optimizerWeights:r}}var FI=(()=>{class t extends Ja{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:Xd("sequential_"),e.layers!=null)for(let i of e.layers)this.add(i)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new z(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let i=e instanceof t||e instanceof Ja,r;if(i){if(r=e,r.outputs.length!==1)throw new z("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new z("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new z("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let o=pI({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(o)}if(i)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new z(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new z("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=FP(this.outputs[0])}this.inboundNodes=[],new Zc({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:vs(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(o=>o.shape),outputShapes:this.outputs[0].shape})}else{let o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,i){return this.model==null&&this.build(),this.model.call(e,i)}build(e){if(ht(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Ja({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,i,r=console.log){this.built||this.build(),super.summary(e,i,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,i,r={}){if(!this.built)throw new kr("The model needs to be compiled before being used.");return this.model.evaluate(e,i,r)}evaluateDataset(e,i){return H(this,null,function*(){if(!this.built)throw new kr("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,i)})}predict(e,i={}){return this.model==null&&this.build(),this.model.predict(e,i)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}fit(o,s){return H(this,arguments,function*(e,i,r={}){if(!this.built)throw new kr("The model needs to be compiled before being used.");return this.model.fit(e,i,r)})}fitDataset(e,i){return H(this,null,function*(){if(!this.built)throw new kr("The model needs to be compiled before being used.");return this.model.fitDataset(e,i)})}trainOnBatch(e,i){return H(this,null,function*(){return this.model.trainOnBatch(e,i)})}static fromConfig(e,i,r={},o=!1){let s,a={};if(i instanceof Array){if(i[0].className==null||i[0].className==="Merge")throw new z("Legacy serialization format not supported yet.");s=i}else x.assert(i.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),s=i.layers,delete i.layers,a=i;let l=new e(a);if(!(l instanceof t))throw new et(`Sequential.fromConfig called on non-Sequential input: ${l}`);for(let c of s){let d=Zr(c,void 0,o);o&&d.setFastWeightInitDuringBuild(!0),l.add(d)}return l}set stopTraining(e){if(this.model==null)throw new z("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new z("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let i of this.layers){let r={};r.className=i.getClassName(),r.config=i.getConfig(),e.push(r)}return{name:this.name,layers:e}}}return t.className="Sequential",t})();ne.registerClass(FI);function WP(t){return new Ja(t)}function hb(t){return new FI(t)}function p_(t){return pI(t)}var Gi=class extends ne.Serializable{getConfig(){return{}}},_Me=(()=>{class t extends Gi{apply(e,i=1){return sQ(e,i)}}return t.className="elu",t})();ne.registerClass(_Me);var wMe=(()=>{class t extends Gi{apply(e){return H0(e)}}return t.className="selu",t})();ne.registerClass(wMe);var CMe=(()=>{class t extends Gi{apply(e){return To(e)}}return t.className="relu",t})();ne.registerClass(CMe);var TMe=(()=>{class t extends Gi{apply(e){return W(()=>gs(6,To(e)))}}return t.className="relu6",t})();ne.registerClass(TMe);var SMe=(()=>{class t extends Gi{apply(e){return e}}return t.className="linear",t})();ne.registerClass(SMe);var kMe=(()=>{class t extends Gi{apply(e){return ms(e)}}return t.className="sigmoid",t})();ne.registerClass(kMe);var IMe=(()=>{class t extends Gi{apply(e){return lQ(e)}}return t.className="hardSigmoid",t})();ne.registerClass(IMe);var EMe=(()=>{class t extends Gi{apply(e){return Ka(e)}}return t.className="softplus",t})();ne.registerClass(EMe);var DMe=(()=>{class t extends Gi{apply(e){return aQ(e)}}return t.className="softsign",t})();ne.registerClass(DMe);var AMe=(()=>{class t extends Gi{apply(e){return Qh(e)}}return t.className="tanh",t})();ne.registerClass(AMe);var qP=(()=>{class t extends Gi{apply(e,i=-1){return sm(e,i)}}return t.className="softmax",t})();ne.registerClass(qP);var NMe=(()=>{class t extends Gi{apply(e,i=-1){return V0(e,i)}}return t.className="logSoftmax",t})();ne.registerClass(NMe);var MMe=(()=>{class t extends Gi{apply(e){return W(()=>W(()=>{let i=Math.sqrt(2),r=F(.5,re(1,L0(_e(e,i))));return F(e,r)}))}}return t.className="gelu",t})();ne.registerClass(MMe);var RMe=(()=>{class t extends Gi{apply(e){return W(()=>F(.5,F(e,re(1,Qh(F(un(_e(2,Math.PI)),re(e,F(.044715,Yr(e,3)))))))))}}return t.className="gelu_new",t})();ne.registerClass(RMe);var OMe=(()=>{class t extends Gi{apply(e){return W(()=>F(e,Qh(Ka(e))))}}return t.className="mish",t})();ne.registerClass(OMe);var FMe=(()=>{class t extends Gi{apply(e,i=1){return W(()=>F(ms(F(e,i)),e))}}return t.className="swish",t})();ne.registerClass(FMe);function ra(t){return t.getClassName()}function jP(t,n={}){return Ya(t,ne.SerializationMap.getMap().classNameMap,n,"activation")}function oa(t){if(t==null){let n={};return n.className="linear",n.config={},jP(n)}if(typeof t=="string"){let n={};return n.className=t,n.config={},jP(n)}else return t instanceof Gi?t:jP(t)}function LMe(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}var LI=class extends ne.Serializable{},KQ=(()=>{class t extends LI{constructor(e){super(),LMe(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return W(()=>{let i=_n([1]);return this.hasL1&&(i=re(i,Te(F(this.l1,ii(e))))),this.hasL2&&(i=re(i,Te(F(this.l2,hm(e))))),$(i,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,i){return new e({l1:i.l1,l2:i.l2})}}return t.className="L1L2",t})();ne.registerClass(KQ);var qQ={l1l2:"L1L2"};function Jt(t){return tb(t)}function XQ(t,n={}){return Ya(t,ne.SerializationMap.getMap().classNameMap,n,"regularizer")}function pn(t){if(t==null)return null;if(typeof t=="string"){let e={className:t in qQ?qQ[t]:t,config:{}};return XQ(e)}else return t instanceof LI?t:XQ(t)}var XP=(()=>{class t extends Je{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,i){e=We(e);let r=To(e);return this.maxValue!=null&&(r=mi(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ReLU",t})();ne.registerClass(XP);var KP=(()=>{class t extends Je{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,i){let r=We(e);return Jh(r,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LeakyReLU",t})();ne.registerClass(KP);var YP=(()=>{class t extends Je{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=rn(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=pn(e.alphaRegularizer),this.alphaConstraint=Ln(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new z(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=ht(e);let i=e.slice(1);if(this.sharedAxes!=null)for(let o of this.sharedAxes)i[o-1]=1;this.alpha=this.addWeight("alpha",i,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let r={};if(this.sharedAxes!=null)for(let o=1;o<e.length;++o)r[o]=e[o];this.inputSpec=[new dn({ndim:e.length,axes:r})],this.built=!0}call(e,i){return e=We(e),im(e,this.alpha.read())}getConfig(){let e={alphaInitializer:gn(this.alphaInitializer),alphaRegularizer:Jt(this.alphaRegularizer),alphaConstraint:Fn(this.alphaConstraint),sharedAxes:this.sharedAxes},i=super.getConfig();return Object.assign(e,i),e}}return t.className="PReLU",t})();ne.registerClass(YP);var QP=(()=>{class t extends Je{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new et(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,i){let r=We(e);return Hc(r)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ELU",t})();ne.registerClass(QP);var ZP=(()=>{class t extends Je{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,i){let r=We(e);return F(r,ce(Un(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ThresholdedReLU",t})();ne.registerClass(ZP);var JP=(()=>{class t extends Je{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new qP().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,i){return W(()=>{let r=We(e),o=i.mask;if(o!=null){let s=F(Ee(Sr(r.shape),ce(o,r.dtype)),je(-1e9));r=re(r,s)}return this.axis instanceof Array?this.axis.length>1?ai(Ee(r,B0(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Softmax",t})();ne.registerClass(JP);function Jd(t,n,e){if(typeof t=="number")return vs(t,n);if(t.length!==n)throw new z(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${t.length} elements.`);for(let i=0;i<n;++i){let r=t[i];if(!nQ(r))throw new z(`The ${e} argument must be an integer or tuple of ${n} integers. Received: ${JSON.stringify(t)} including a non-integer number ${r}`)}return t}function Jr(t,n,e,i,r=1){if(t==null)return t;let o=n+(n-1)*(r-1),s;return e==="same"?s=t:s=t-o+1,Math.floor((s+i-1)/i)}function sa(t,n,e,i){if(t==null)return null;if(i==="valid")t=t*n+ia([e-n,0]);else if(i==="same")t=t*n;else throw new z(`Unsupport padding mode: ${i}.`);return t}function m_(t,n){return W(()=>(En(n),n==="channelsFirst"?gt(t,[0,2,3,1]):t))}function e$(t,n){return W(()=>(En(n),n==="channelsFirst"?gt(t,[0,2,3,4,1]):t))}function $Me(t,n,e,i=1,r="valid",o,s=1){return W(()=>{if(o==null&&(o=Dr()),En(o),t.shape.length!==3)throw new z(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(n.shape.length!==3)throw new z(`The kernel for a conv1dWithBias operation should be 3, but is ${n.shape.length} instead`);if(e!=null&&e.shape.length!==1)throw new z(`The bias for a conv1dWithBias operation should be 1, but is ${e.shape.length} instead`);if(o==="channelsFirst"&&(t=gt(t,[0,2,1])),r==="causal")throw new et("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=M0(t,n,i,r==="same"?"same":"valid","NWC",s);return e!=null&&(a=Ar(a,e)),a})}function YQ(t,n,e,i=[1,1],r="valid",o,s,a=null){return W(()=>{if(o==null&&(o=Dr()),En(o),t.rank!==3&&t.rank!==4)throw new z(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(n.rank!==3&&n.rank!==4)throw new z(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=m_(t,o);if(r==="causal")throw new et("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=dm.conv2d({x:l,filter:n,strides:i,pad:r==="same"?"same":"valid",dilations:s,dataFormat:"NHWC",bias:e,activation:a}),o==="channelsFirst"&&(l=gt(l,[0,3,1,2])),l})}function VMe(t,n,e,i=[1,1,1],r="valid",o,s){return W(()=>{if(o==null&&(o=Dr()),En(o),t.rank!==4&&t.rank!==5)throw new z(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(n.rank!==4&&n.rank!==5)throw new z(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=e$(t,o);if(r==="causal")throw new et("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=DL(a,n,i,r==="same"?"same":"valid","NDHWC",s),e!=null&&(a=Ar(a,e)),o==="channelsFirst"&&(a=gt(a,[0,4,1,2,3])),a})}var h_=class t extends Je{constructor(n,e){if(super(e),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(e),this.rank=n,Wn(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new et(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=Jd(e.kernelSize,n,"kernelSize"),this.strides=Jd(e.strides==null?1:e.strides,n,"strides"),this.padding=e.padding==null?"valid":e.padding,Ir(this.padding),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,En(this.dataFormat),this.activation=oa(e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.biasInitializer=rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Ln(e.biasConstraint),this.biasRegularizer=pn(e.biasRegularizer),this.activityRegularizer=pn(e.activityRegularizer),this.dilationRate=Jd(e.dilationRate==null?1:e.dilationRate,n,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new z(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new z(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new z(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(n){if(jo("kernelSize"in n,"required key 'kernelSize' not in config"),typeof n.kernelSize!="number"&&!eI(n.kernelSize,"number",1,3))throw new z(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(n.kernelSize)}.`)}getConfig(){let n={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ra(this.activation),useBias:this.useBias,biasInitializer:gn(this.biasInitializer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),biasConstraint:Fn(this.biasConstraint)},e=super.getConfig();return Object.assign(n,e),n}},mb=class t extends h_{constructor(n,e){super(n,e),this.kernel=null,t.verifyArgs(e),this.filters=e.filters,Wn(this.filters,"filters"),this.kernelInitializer=rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Ln(e.kernelConstraint),this.kernelRegularizer=pn(e.kernelRegularizer)}build(n){n=ht(n);let e=this.dataFormat==="channelsFirst"?1:n.length-1;if(n[e]==null)throw new z(`The channel dimension of the input should be defined. Found ${n[e]}`);let i=n[e],r=this.kernelSize.concat([i,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[e]:i}}],this.built=!0}call(n,e){return W(()=>{n=We(n);let i,r=this.bias==null?null:this.bias.read(),o=tI(this.activation.getClassName());if(o!=null&&this.rank===2)i=YQ(n,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate,o);else{if(this.rank===1)i=$Me(n,this.kernel.read(),r,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)i=YQ(n,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)i=VMe(n,this.kernel.read(),r,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new et("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(i=this.activation.apply(i))}return i})}computeOutputShape(n){n=ht(n);let e=[],i=this.dataFormat==="channelsLast"?n.slice(1,n.length-1):n.slice(2);for(let o=0;o<i.length;++o){let s=Jr(i[o],this.kernelSize[o],this.padding,this.strides[o],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[o]);e.push(s)}let r=[n[0]];return this.dataFormat==="channelsLast"?(r=r.concat(e),r.push(this.filters)):(r.push(this.filters),r=r.concat(e)),r}getConfig(){let n={filters:this.filters,kernelInitializer:gn(this.kernelInitializer),kernelRegularizer:Jt(this.kernelRegularizer),kernelConstraint:Fn(this.kernelConstraint)},e=super.getConfig();return Object.assign(n,e),n}static verifyArgs(n){if(!("filters"in n)||typeof n.filters!="number"||n.filters<1)throw new z(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(n.filters)}`)}},PI=(()=>{class t extends mb{constructor(e){super(2,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!eI(e.kernelSize,"number",1,2))throw new z(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv2D",t})();ne.registerClass(PI);var $I=(()=>{class t extends mb{constructor(e){super(3,e),t.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new z(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv3D",t})();ne.registerClass($I);var t$=(()=>{class t extends PI{constructor(e){if(super(e),this.inputSpec=[new dn({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new z(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=ht(e),e.length!==4)throw new z("Input should have rank 4; Received input shape: "+JSON.stringify(e));let i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new z("The channel dimension of the inputs should be defined. Found `None`.");let r=e[i],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new dn({ndim:4,axes:{[i]:r}})],this.built=!0}call(e,i){return W(()=>{let r=We(e);if(r.shape.length!==4)throw new z(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);let o=r.shape,s=o[0],a,l;this.dataFormat==="channelsFirst"?(a=2,l=3):(a=1,l=2);let c=o[a],u=o[l],d=this.kernelSize[0],p=this.kernelSize[1],h=this.strides[0],m=this.strides[1],g=sa(c,h,d,this.padding),f=sa(u,m,p,this.padding),y=[s,g,f,this.filters];this.dataFormat!=="channelsLast"&&(r=gt(r,[0,2,3,1]));let b=R0(r,this.kernel.read(),y,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(b=gt(b,[0,3,1,2])),this.bias!=null&&(b=Ar(b,this.bias.read(),this.dataFormat)),this.activation!=null&&(b=this.activation.apply(b)),b})}computeOutputShape(e){e=ht(e);let i=e.slice(),r,o,s;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3):(r=3,o=1,s=2);let a=this.kernelSize[0],l=this.kernelSize[1],c=this.strides[0],u=this.strides[1];return i[r]=this.filters,i[o]=sa(i[o],c,a,this.padding),i[s]=sa(i[s],u,l,this.padding),i}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv2DTranspose",t})();ne.registerClass(t$);var n$=(()=>{class t extends $I{constructor(e){if(super(e),this.inputSpec=[new dn({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new z(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=ht(e),e.length!==5)throw new z("Input should have rank 5; Received input shape: "+JSON.stringify(e));let i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null)throw new z("The channel dimension of the inputs should be defined. Found `None`.");let r=e[i],o=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",o,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new dn({ndim:5,axes:{[i]:r}})],this.built=!0}call(e,i){return W(()=>{let r=We(e);if(r.shape.length!==5)throw new z(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);let o=r.shape,s=o[0],a,l,c;this.dataFormat==="channelsFirst"?(c=2,a=3,l=4):(c=1,a=2,l=3);let u=o[c],d=o[a],p=o[l],h=this.kernelSize[0],m=this.kernelSize[1],g=this.kernelSize[2],f=this.strides[0],y=this.strides[1],b=this.strides[2],v=sa(u,f,h,this.padding),_=sa(d,y,m,this.padding),w=sa(p,b,g,this.padding),T=[s,v,_,w,this.filters];this.dataFormat!=="channelsLast"&&(r=gt(r,[0,2,3,4,1]));let D=AL(r,this.kernel.read(),T,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(D=gt(D,[0,4,1,2,3])),this.bias!==null&&(D=Ar(D,this.bias.read(),this.dataFormat)),this.activation!==null&&(D=this.activation.apply(D)),D})}computeOutputShape(e){e=ht(e);let i=e.slice(),r,o,s,a;this.dataFormat==="channelsFirst"?(r=1,o=2,s=3,a=4):(r=4,o=1,s=2,a=3);let l=this.kernelSize[0],c=this.kernelSize[1],u=this.kernelSize[2],d=this.strides[0],p=this.strides[1],h=this.strides[2];return i[r]=this.filters,i[o]=sa(i[o],d,l,this.padding),i[s]=sa(i[s],p,c,this.padding),i[a]=sa(i[a],h,u,this.padding),i}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}}return t.className="Conv3DTranspose",t})();ne.registerClass(n$);var BMe=(()=>{class t extends mb{constructor(e,i){if(super(e,i),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,i.filters==null)throw new z("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(i.kernelInitializer!=null||i.kernelRegularizer!=null||i.kernelConstraint!=null)throw new z("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(i.padding!=null&&i.padding!=="same"&&i.padding!=="valid")throw new z(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(i.padding)}`);this.depthMultiplier=i.depthMultiplier==null?1:i.depthMultiplier,this.depthwiseInitializer=rn(i.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=pn(i.depthwiseRegularizer),this.depthwiseConstraint=Ln(i.depthwiseConstraint),this.pointwiseInitializer=rn(i.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=pn(i.pointwiseRegularizer),this.pointwiseConstraint=Ln(i.pointwiseConstraint)}build(e){if(e=ht(e),e.length<this.rank+2)throw new z(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let i=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[i]==null||e[i]<0)throw new z(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[i])}`);let r=e[i],o=this.kernelSize.concat([r,this.depthMultiplier]),s=[];for(let l=0;l<this.rank;++l)s.push(1);s.push(r*this.depthMultiplier,this.filters);let a=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",o,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,a,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",s,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,a,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,a,this.biasConstraint):this.bias=null,this.inputSpec=[new dn({ndim:this.rank+2,axes:{[i]:r}})],this.built=!0}call(e,i){return W(()=>{e=We(e);let r;if(this.rank===1)throw new et("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=gt(e,[0,2,3,1])),r=W0(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ar(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=gt(r,[0,3,1,2])),r})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=gn(this.depthwiseInitializer),e.pointwiseInitializer=gn(this.pointwiseInitializer),e.depthwiseRegularizer=Jt(this.depthwiseRegularizer),e.pointwiseRegularizer=Jt(this.pointwiseRegularizer),e.depthwiseConstraint=Fn(this.depthwiseConstraint),e.pointwiseConstraint=Fn(this.pointwiseConstraint),e}}return t.className="SeparableConv",t})();var i$=(()=>{class t extends BMe{constructor(e){super(2,e)}}return t.className="SeparableConv2D",t})();ne.registerClass(i$);var r$=(()=>{class t extends mb{constructor(e){super(1,e),t.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!eI(e.kernelSize,"number",1,1))throw new z(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}return t.className="Conv1D",t})();ne.registerClass(r$);var o$=(()=>{class t extends Je{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,i){return W(()=>{if(e=We(e),this.dataFormat==="channelsLast"){let r=r_(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return r_(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{let r=r_(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return r_(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Cropping2D",t})();ne.registerClass(o$);var s$=(()=>{class t extends Je{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,En(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,eQ(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){let i=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],i,r]}else{let i=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],i,r,e[3]]}}call(e,i){return W(()=>{let r=We(e),o=r.shape;if(this.dataFormat==="channelsFirst"){r=gt(r,[0,2,3,1]);let s=this.size[0]*o[2],a=this.size[1]*o[3],l=this.interpolation==="nearest"?So.resizeNearestNeighbor(r,[s,a]):So.resizeBilinear(r,[s,a]);return gt(l,[0,3,1,2])}else{let s=this.size[0]*o[1],a=this.size[1]*o[2];return this.interpolation==="nearest"?So.resizeNearestNeighbor(r,[s,a]):So.resizeBilinear(r,[s,a])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}}return t.className="UpSampling2D",t})();ne.registerClass(s$);function zMe(t,n,e=[1,1],i="valid",r,o){return W(()=>{r==null&&(r=Dr()),En(r);let s=m_(t,r);if(t.rank!==4)throw new z(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(n.rank!==4)throw new z(`depthwiseKernel is required to be 4-D, but is instead ${n.rank}-D`);return s=Uc(s,n,e,i==="same"?"same":"valid","NHWC",o),r==="channelsFirst"&&(s=gt(s,[0,3,1,2])),s})}var a$=(()=>{class t extends h_{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=rn(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Ln(e.depthwiseConstraint),this.depthwiseRegularizer=pn(e.depthwiseRegularizer)}build(e){if(e=ht(e),e.length<4)throw new z(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let i=this.dataFormat==="channelsFirst"?1:3;if(e[i]==null||e[i]<0)throw new z(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[i]}).`);let r=e[i],o=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",o,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,i){return W(()=>{e=We(e);let r=zMe(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ar(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=ht(e);let i=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],o=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,s=Jr(i,this.kernelSize[0],this.padding,this.strides[0]),a=Jr(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],o,s,a]:[e[0],s,a,o]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=gn(this.depthwiseInitializer),e.depthwiseRegularizer=Jt(this.depthwiseRegularizer),e.depthwiseConstraint=Fn(this.depthwiseRegularizer),e}}return t.className="DepthwiseConv2D",t})();ne.registerClass(a$);function l$(t,n,e,i){if(Array.isArray(t)){if(n!=null||e!=null)throw new z("When inputs is an array, neither initialState or constants should be provided");i!=null&&(e=t.slice(t.length-i,t.length),t=t.slice(0,t.length-i)),t.length>1&&(n=t.slice(1,t.length)),t=t[0]}function r(o){return o==null||Array.isArray(o)?o:[o]}return n=r(n),e=r(e),{inputs:t,initialState:n,constants:e}}function c$(t,n,e,i=!1,r,o,s=!1,a=!1){return W(()=>{let l=n.shape.length;if(l<3)throw new z(`Input should be at least 3D, but is ${l}D.`);let c=[1,0].concat(Er(2,l));if(n=gt(n,c),o!=null)throw new et("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r!=null&&(r=ce(ce(r,"bool"),"float32"),r.rank===l-1&&(r=Qn(r,-1)),r=gt(r,c)),i&&(n=Uo(n,0),r!=null&&(r=Uo(r,0)));let u=[],d,p=e,h=n.shape[0],m=ur(n),g;r!=null&&(g=ur(r));for(let y=0;y<h;++y){let b=m[y],v=W(()=>t(b,p));if(r==null)d=v[0],p=v[1];else{let _=W(()=>{let w=g[y],T=Ee(Ci(w),w),D=re(F(v[0],w),F(p[0],T)),N=p.map((O,P)=>re(F(v[1][P],w),F(O,T)));return{output:D,newStates:N}});d=_.output,p=_.newStates}a&&u.push(d)}let f;return a&&(f=li(u,1)),[d,f,p]})}var el=(()=>{class t extends Je{constructor(e){super(e);let i;if(e.cell==null)throw new z("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?i=new zI({cells:e.cell}):i=e.cell,i.stateSize==null)throw new z("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=i,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new dn({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return Er(0,e).map(i=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){dI(e)&&(e=e[0]),e=e;let i=this.cell.stateSize;Array.isArray(i)||(i=[i]);let r=i[0],o;if(this.returnSequences?o=[e[0],e[1],r]:o=[e[0],r],this.returnState){let s=[];for(let a of i)s.push([e[0],a]);return[o].concat(s)}else return o}computeMask(e,i){return W(()=>{Array.isArray(i)&&(i=i[0]);let r=this.returnSequences?i:null;if(this.returnState){let o=this.states.map(s=>null);return[r].concat(o)}else return r})}get states(){if(this.states_==null){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,i=[];for(let r=0;r<e;++r)i.push(null);return i}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new et("Constants support is not implemented in RNN yet.");dI(e)&&(e=e[0]),e=e;let r=this.stateful?e[0]:null,o=e.slice(2);this.inputSpec[0]=new dn({shape:[r,null,...o]});let s=[e[0]].concat(e.slice(2));this.cell.build(s);let a;if(Array.isArray(this.cell.stateSize)?a=this.cell.stateSize:a=[this.cell.stateSize],this.stateSpec!=null){if(!x.arraysEqual(this.stateSpec.map(l=>l.shape[l.shape.length-1]),a))throw new z(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=a.map(l=>new dn({shape:[null,l]}));this.stateful&&this.resetStates()}resetStates(e,i=!1){W(()=>{if(!this.stateful)throw new Wo("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape[0];if(r==null)throw new z("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>_n([r,o])):this.states_=[_n([r,this.cell.stateSize])];else if(e==null)it(this.states_),this.keptStates!=null&&(it(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(o=>_n([r,o])):this.states_[0]=_n([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new z(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);i===!0?this.keptStates.push(this.states_.slice()):it(this.states_);for(let o=0;o<this.states_.length;++o){let s=e[o],a=Array.isArray(this.cell.stateSize)?this.cell.stateSize[o]:this.cell.stateSize,l=[r,a];if(!x.arraysEqual(s.shape,l))throw new z(`State ${o} is incompatible with layer ${this.name}: expected shape=${l}, received shape=${s.shape}`);this.states_[o]=s}}this.states_=this.states_.map(o=>_i(o.clone()))})}apply(e,i){let r=i==null?null:i.initialState,o=i==null?null:i.constants;i==null&&(i={});let s=l$(e,r,o,this.numConstants);e=s.inputs,r=s.initialState,o=s.constants;let a=[],l=[];if(r!=null){i.initialState=r,a=a.concat(r),this.stateSpec=[];for(let u of r)this.stateSpec.push(new dn({shape:u.shape}));l=l.concat(this.stateSpec)}if(o!=null&&(i.constants=o,a=a.concat(o),this.numConstants=o.length),a[0]instanceof pr){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,i);return this.inputSpec=p,h}else return super.apply(e,i)}call(e,i){return W(()=>{let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;e=We(e),s==null&&(this.stateful?s=this.states_:s=this.getInitialState(e));let a=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(s.length!==a)throw new z(`RNN Layer has ${a} state(s) but was passed ${s.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let l={training:o},u=c$((g,f)=>{let y=this.cell.call([g].concat(f),l);return[y[0],y.slice(1)]},e,s,this.goBackwards,r,null,this.unroll,this.returnSequences),d=u[0],p=u[1],h=u[2];this.stateful&&this.resetStates(h,o);let m=this.returnSequences?p:d;return this.returnState?[m].concat(h):m})}getInitialState(e){return W(()=>{let i=_n(e.shape);return i=Te(i,[1,2]),i=Qc(i),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?aI(i,[1,r]):i):this.cell.stateSize>1?[aI(i,[1,this.cell.stateSize])]:[i]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),i={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(i.numConstants=this.numConstants);let r=this.cell.getConfig();return this.getClassName()===t.className&&(i.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),i)}static fromConfig(e,i,r={}){let o=i.cell,s=Zr(o,r);return new e(Object.assign(i,{cell:s}))}}return t.className="RNN",t})();ne.registerClass(el);var eu=class extends Je{},VI=(()=>{class t extends eu{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Wn(this.units,"units"),this.activation=oa(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=rn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=pn(e.kernelRegularizer),this.recurrentRegularizer=pn(e.recurrentRegularizer),this.biasRegularizer=pn(e.biasRegularizer),this.kernelConstraint=Ln(e.kernelConstraint),this.recurrentConstraint=Ln(e.recurrentConstraint),this.biasConstraint=Ln(e.biasConstraint),this.dropout=pm([1,ia([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=pm([1,ia([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ht(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,i){return W(()=>{if(e=e,e.length!==2)throw new z(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];let o=i.training==null?!1:i.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Ci(e),rate:this.dropout,training:o,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Ci(r),rate:this.recurrentDropout,training:o,dropoutFunc:this.dropoutFunc}));let s,a=this.dropoutMask,l=this.recurrentDropoutMask;a!=null?s=Ts(F(e,a),this.kernel.read()):s=Ts(e,this.kernel.read()),this.bias!=null&&(s=Ar(s,this.bias.read())),l!=null&&(r=F(r,l));let c=re(s,Ts(r,this.recurrentKernel.read()));return this.activation!=null&&(c=this.activation.apply(c)),[c,c]})}getConfig(){let e=super.getConfig(),i={units:this.units,activation:ra(this.activation),useBias:this.useBias,kernelInitializer:gn(this.kernelInitializer),recurrentInitializer:gn(this.recurrentInitializer),biasInitializer:gn(this.biasInitializer),kernelRegularizer:Jt(this.kernelRegularizer),recurrentRegularizer:Jt(this.recurrentRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),i)}}return t.className="SimpleRNNCell",t})();ne.registerClass(VI);var u$=(()=>{class t extends el{constructor(e){e.cell=new VI(e),super(e)}call(e,i){return W(()=>{this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,i){return new e(i)}}return t.className="SimpleRNN",t})();ne.registerClass(u$);var BI=(()=>{class t extends eu{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new z("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Wn(this.units,"units"),this.activation=oa(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=oa(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=rn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=pn(e.kernelRegularizer),this.recurrentRegularizer=pn(e.recurrentRegularizer),this.biasRegularizer=pn(e.biasRegularizer),this.kernelConstraint=Ln(e.kernelConstraint),this.recurrentConstraint=Ln(e.recurrentConstraint),this.biasConstraint=Ln(e.biasConstraint),this.dropout=pm([1,ia([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=pm([1,ia([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=ht(e);let i=e[e.length-1];this.kernel=this.addWeight("kernel",[i,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,i){return W(()=>{if(e=e,e.length!==2)throw new z(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let r=i.training==null?!1:i.training,o=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Ci(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Ci(o),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));let s=this.dropoutMask,a=this.recurrentDropoutMask,l,c,u;0<this.dropout&&this.dropout<1&&(e=F(e,s[0]));let d=Ts(e,this.kernel.read());this.useBias&&(d=Ar(d,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(o=F(o,a[0]));let p=this.recurrentKernel.read(),[h,m]=fi(p,[2*this.units,this.units],p.rank-1),g=Ts(o,h),[f,y,b]=fi(d,3,d.rank-1),[v,_]=fi(g,2,g.rank-1);l=this.recurrentActivation.apply(re(f,v)),c=this.recurrentActivation.apply(re(y,_));let w=Ts(F(c,o),m);u=this.activation.apply(re(b,w));let T=re(F(l,o),F(re(1,Tt(l)),u));return[T,T]})}getConfig(){let e=super.getConfig(),i={units:this.units,activation:ra(this.activation),recurrentActivation:ra(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gn(this.kernelInitializer),recurrentInitializer:gn(this.recurrentInitializer),biasInitializer:gn(this.biasInitializer),kernelRegularizer:Jt(this.kernelRegularizer),recurrentRegularizer:Jt(this.recurrentRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),i)}}return t.className="GRUCell",t})();ne.registerClass(BI);var d$=(()=>{class t extends el{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new BI(e),super(e)}call(e,i){return W(()=>{this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,i){return i.implmentation===0&&(i.implementation=1),new e(i)}}return t.className="GRU",t})();ne.registerClass(d$);var fb=(()=>{class t extends eu{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Wn(this.units,"units"),this.activation=oa(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=oa(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=rn(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=pn(e.kernelRegularizer),this.recurrentRegularizer=pn(e.recurrentRegularizer),this.biasRegularizer=pn(e.biasRegularizer),this.kernelConstraint=Ln(e.kernelConstraint),this.recurrentConstraint=Ln(e.recurrentConstraint),this.biasConstraint=Ln(e.biasConstraint),this.dropout=pm([1,ia([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=pm([1,ia([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var i;e=ht(e);let r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let o;if(this.useBias){if(this.unitForgetBias){let s=this.biasInitializer,a=this.units;o=new(i=class extends Nr{apply(c,u){let d=s.apply([a]),p=new uI().apply([a]),h=s.apply([a*2]);return EP(EP(d,p),h)}},i.className="CustomInit",i)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,o,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,i){return W(()=>{let r=i.training==null?!1:i.training;if(e=e,e.length!==3)throw new z(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let o=e[1],s=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Ci(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Ci(o),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,l=this.recurrentDropoutMask,c,u,d,p;0<this.dropout&&this.dropout<1&&(e=F(e,a[0]));let h=Ts(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(o=F(o,l[0])),h=re(h,Ts(o,this.recurrentKernel.read())),this.useBias&&(h=Ar(h,this.bias.read()));let[m,g,f,y]=fi(h,4,h.rank-1);c=this.recurrentActivation.apply(m),u=this.recurrentActivation.apply(g),d=re(F(u,s),F(c,this.activation.apply(f))),p=this.recurrentActivation.apply(y);let b=F(p,this.activation.apply(d));return[b,b,d]})}getConfig(){let e=super.getConfig(),i={units:this.units,activation:ra(this.activation),recurrentActivation:ra(this.recurrentActivation),useBias:this.useBias,kernelInitializer:gn(this.kernelInitializer),recurrentInitializer:gn(this.recurrentInitializer),biasInitializer:gn(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Jt(this.kernelRegularizer),recurrentRegularizer:Jt(this.recurrentRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),recurrentConstraint:Fn(this.recurrentConstraint),biasConstraint:Fn(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),i)}}return t.className="LSTMCell",t})();ne.registerClass(fb);var p$=(()=>{class t extends el{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new fb(e),super(e)}call(e,i){return W(()=>{this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}static fromConfig(e,i){return i.implmentation===0&&(i.implementation=1),new e(i)}}return t.className="LSTM",t})();ne.registerClass(p$);var zI=(()=>{class t extends eu{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let i of this.cells.slice().reverse())Array.isArray(i.stateSize)?e.push(...i.stateSize):e.push(i.stateSize);return e}call(e,i){return W(()=>{e=e;let r=e.slice(1),o=[];for(let l of this.cells.slice().reverse())Array.isArray(l.stateSize)?o.push(r.splice(0,l.stateSize.length)):o.push(r.splice(0,1));o.reverse();let s=[],a;for(let l=0;l<this.cells.length;++l){let c=this.cells[l];r=o[l],l===0?a=[e[0]].concat(r):a=[a[0]].concat(r),a=c.call(a,i),s.push(a.slice(1))}r=[];for(let l of s.slice().reverse())r.push(...l);return[a[0]].concat(r)})}build(e){dI(e)&&(e=e[0]),e=e;let i;this.cells.forEach((r,o)=>{na(`RNNCell_${o}`,()=>{r.build(e),Array.isArray(r.stateSize)?i=r.stateSize[0]:i=r.stateSize,e=[e[0],i]})}),this.built=!0}getConfig(){let e=super.getConfig(),i=s=>({className:s.getClassName(),config:s.getConfig()}),o={cells:this.cells.map(i)};return Object.assign(Object.assign({},e),o)}static fromConfig(e,i,r={}){let o=[];for(let s of i.cells)o.push(Zr(s,r));return new e({cells:o})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let i of this.cells)e.push(...i.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let i of this.cells)e.push(...i.nonTrainableWeights);if(!this.trainable){let i=[];for(let r of this.cells)i.push(...r.trainableWeights);return i.concat(e)}return e}getWeights(){let e=[];for(let i of this.cells)e.push(...i.weights);return s_(e)}setWeights(e){let i=[];for(let r of this.cells){let o=r.weights.length,s=e.splice(o);for(let a=0;a<r.weights.length;++a)i.push([r.weights[a],s[a]])}ab(i)}}return t.className="StackedRNNCells",t})();ne.registerClass(zI);function tu(t){let{ones:n,rate:e,training:i=!1,count:r=1,dropoutFunc:o}=t,s=()=>o!=null?o(n(),e):cI(n(),e),a=()=>Kd(s,n,i);return!r||r<=1?_i(a().clone()):Array(r).fill(void 0).map(a).map(c=>_i(c.clone()))}var GMe=function(t,n){var e={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.indexOf(i)<0&&(e[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(e[i[r]]=t[i[r]]);return e};var UMe=(()=>{class t extends el{constructor(e){if(e.unroll)throw new et("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new et("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new dn({ndim:5})]}call(e,i){return W(()=>{if(this.cell.dropoutMask!=null&&(it(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(it(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),i&&i.constants)throw new z("ConvRNN2D cell does not support constants");let r=i==null?null:i.mask,o=i==null?null:i.training,s=i==null?null:i.initialState;return super.call(e,{mask:r,training:o,initialState:s})})}computeOutputShape(e){let i=this.computeSingleOutputShape(e);return this.returnSequences||(i=[i[0],...i.slice(2)]),this.returnState&&(i=[i,...Array(2).fill([e[0],...i.slice(-3)])]),i}getInitialState(e){return W(()=>{let{stateSize:i}=this.cell,r=e.shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)],a=_n(s);return Array.isArray(i)?Array(i.length).fill(a):[a]})}resetStates(e,i=!1){W(()=>{if(!this.stateful)throw new Wo("Cannot call resetStates() on an RNN Layer that is not stateful.");let r=this.inputSpec[0].shape,o=this.computeSingleOutputShape(r),s=[o[0],...o.slice(2)];if(r[0]==null)throw new z("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_n(s)):this.states_=[_n(s)];else if(e==null)it(this.states_),this.keptStates!=null&&(it(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>_n(s)):this.states_[0]=_n(s);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new z(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);i?this.keptStates.push(this.states_.slice()):it(this.states_);for(let l=0;l<this.states_.length;++l){let c=e[l],u=s;if(!x.arraysEqual(c.shape,u))throw new z(`State ${l} is incompatible with layer ${this.name}: expected shape=${u}, received shape=${c.shape}`);this.states_[l]=c}}this.states_=this.states_.map(l=>_i(l.clone()))})}computeSingleOutputShape(e){let{dataFormat:i,filters:r,kernelSize:o,padding:s,strides:a,dilationRate:l}=this.cell,c=i==="channelsFirst",u=e[c?3:2],d=e[c?4:3],p=Jr(u,o[0],s,a[0],l[0]),h=Jr(d,o[1],s,a[1],l[1]);return[...e.slice(0,2),...c?[r,p,h]:[p,h,r]]}}return t.className="ConvRNN2D",t})(),GI=(()=>{class t extends fb{constructor(e){let{filters:i,kernelSize:r,strides:o,padding:s,dataFormat:a,dilationRate:l}=e;super(Object.assign(Object.assign({},e),{units:i})),this.filters=i,Wn(this.filters,"filters"),this.kernelSize=Jd(r,2,"kernelSize"),this.kernelSize.forEach(c=>Wn(c,"kernelSize")),this.strides=Jd(o||1,2,"strides"),this.strides.forEach(c=>Wn(c,"strides")),this.padding=s||"valid",Ir(this.padding),this.dataFormat=a||"channelsLast",En(this.dataFormat),this.dilationRate=Jd(l||1,2,"dilationRate"),this.dilationRate.forEach(c=>Wn(c,"dilationRate"))}build(e){var i;e=ht(e);let r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new z(`The channel dimension of the input should be defined. Found ${e[r]}`);let o=e[r],s=4,a=this.kernelSize.concat([o,this.filters*s]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let l=this.kernelSize.concat([this.filters,this.filters*s]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",l,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let c;if(this.unitForgetBias){let u=this.biasInitializer,d=this.filters;c=new(i=class extends Nr{apply(h,m){let g=u.apply([d]),f=Sr([d]),y=u.apply([d*2]);return ib([g,f,y])}},i.className="CustomInit",i)}else c=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*s],null,c,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,i){return W(()=>{if(e.length!==3)throw new z(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=i.training||!1,o=e[0],s=e[1],a=e[2],l=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=tu({ones:()=>Ci(o),rate:this.dropout,training:r,count:l,dropoutFunc:this.dropoutFunc}));let c=this.dropoutMask,u=(ae,de,fe)=>!de||!de[fe]?ae:F(de[fe],ae),d=u(o,c,0),p=u(o,c,1),h=u(o,c,2),m=u(o,c,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=tu({ones:()=>Ci(s),rate:this.recurrentDropout,training:r,count:l,dropoutFunc:this.dropoutFunc}));let g=this.recurrentDropoutMask,f=u(s,g,0),y=u(s,g,1),b=u(s,g,2),v=u(s,g,3),_=3,[w,T,D,N]=fi(this.kernel.read(),l,_),[O,P,B,K]=this.useBias?fi(this.bias.read(),l):[null,null,null,null];d=this.inputConv(d,w,O,this.padding),p=this.inputConv(p,T,P,this.padding),h=this.inputConv(h,D,B,this.padding),m=this.inputConv(m,N,K,this.padding);let[X,Z,te,U]=fi(this.recurrentKernel.read(),l,_);f=this.recurrentConv(f,X),y=this.recurrentConv(y,Z),b=this.recurrentConv(b,te),v=this.recurrentConv(v,U);let j=this.recurrentActivation.apply(re(d,f)),q=this.recurrentActivation.apply(re(p,y)),Q=re(F(q,a),F(j,this.activation.apply(re(h,b)))),oe=F(this.recurrentActivation.apply(re(m,v)),this.activation.apply(Q));return[oe,oe,Q]})}getConfig(){let e=super.getConfig(),{units:i}=e,r=GMe(e,["units"]),o={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},r),o)}inputConv(e,i,r,o){let s=_o(e,i,this.strides,o||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ar(s,r,this.dataFormat):s}recurrentConv(e,i){return _o(e,i,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}return t.className="ConvLSTM2DCell",t})();ne.registerClass(GI);var h$=(()=>{class t extends UMe{constructor(e){let i=new GI(e);super(Object.assign(Object.assign({},e),{cell:i}))}static fromConfig(e,i){return new e(i)}}return t.className="ConvLSTM2D",t})();ne.registerClass(h$);var UI=(()=>{class t extends Je{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;let i=e.shape,r=[];for(let o=0;o<this.noiseShape.length;++o)r.push(this.noiseShape[o]==null?i[o]:this.noiseShape[o]);return r}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e);if(0<this.rate&&this.rate<1){let o=i.training==null?!1:i.training,s=this.getNoiseShape(r);return Kd(()=>cI(r,this.rate,s,this.seed),()=>r,o)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},i=super.getConfig();return Object.assign(e,i),e}dispose(){return super.dispose()}}return t.className="Dropout",t})();ne.registerClass(UI);var m$=(()=>{class t extends UI{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let i=e.shape;return[i[0],1,i[2]]}}return t.className="SpatialDropout1D",t})();ne.registerClass(m$);var f$=(()=>{class t extends Je{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),this.batchInputShape=[i,e.inputDim]}this.units=e.units,Wn(this.units,"units"),this.activation=oa(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=rn(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=rn(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Ln(e.kernelConstraint),this.biasConstraint=Ln(e.biasConstraint),this.kernelRegularizer=pn(e.kernelRegularizer),this.biasRegularizer=pn(e.biasRegularizer),this.activityRegularizer=pn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=ht(e);let i=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[i,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:i}}],this.built=!0}computeOutputShape(e){e=ht(e);let i=e.slice();return i[i.length-1]=this.units,i}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e),o=tI(this.activation.getClassName()),s;return o!=null?s=Ts(r,this.kernel.read(),o,this.bias?this.bias.read():null):(s=Ts(r,this.kernel.read()),this.bias!=null&&(s=Ar(s,this.bias.read())),this.activation!=null&&(s=this.activation.apply(s))),s})}getConfig(){let e={units:this.units,activation:ra(this.activation),useBias:this.useBias,kernelInitializer:gn(this.kernelInitializer),biasInitializer:gn(this.biasInitializer),kernelRegularizer:Jt(this.kernelRegularizer),biasRegularizer:Jt(this.biasRegularizer),activityRegularizer:Jt(this.activityRegularizer),kernelConstraint:Fn(this.kernelConstraint),biasConstraint:Fn(this.biasConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dense",t})();ne.registerClass(f$);var g$=(()=>{class t extends Je{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=ht(e);for(let i of e.slice(1))if(i==null)throw new z(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Cs(e,1)]}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){let o=[0];for(let s=2;s<r.rank;++s)o.push(s);o.push(1),r=gt(r,o)}return oQ(r)})}getConfig(){let e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);let i=super.getConfig();return Object.assign(e,i),e}}return t.className="Flatten",t})();ne.registerClass(g$);var y$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.activation=oa(e.activation)}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e);return this.activation.apply(r)})}getConfig(){let e={activation:ra(this.activation)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Activation",t})();ne.registerClass(y$);var b$=(()=>{class t extends Je{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,i){return W(()=>(e=We(e),iQ(e,this.n)))}getConfig(){let e={n:this.n},i=super.getConfig();return Object.assign(e,i),e}}return t.className="RepeatVector",t})();ne.registerClass(b$);var x$=(()=>{class t extends Je{constructor(e){super(e),this.targetShape=e.targetShape;for(let i=0;i<this.targetShape.length;++i)this.isUnknown(this.targetShape[i])&&(this.targetShape[i]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,i){let r="Total size of new array must be unchanged.",o=i.slice(),s=1,a=null;for(let c=0;c<o.length;++c){let u=o[c];if(this.isUnknown(u))if(a===null)a=c;else throw new z("Can only specifiy one unknown dimension.");else s*=u}let l=Cs(e);if(a!==null){if(s===0||l%s!==0)throw new z(r);o[a]=l/s}else if(l!==s)throw new z(r);return o}computeOutputShape(e){let i=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){i=!0;break}return i?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e),o=r.shape,s=o.slice(0,1).concat(this.fixUnknownDimension(o.slice(1),this.targetShape));return $(r,s)})}getConfig(){let e={targetShape:this.targetShape},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Reshape",t})();ne.registerClass(x$);var v$=(()=>{class t extends Je{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let i=Er(1,e.dims.length+1);if(!x.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new dn({ndim:this.dims.length+1})]}computeOutputShape(e){e=ht(e);let i=e.slice();return this.dims.forEach((r,o)=>{i[o+1]=e[r]}),i}call(e,i){return gt(We(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Permute",t})();ne.registerClass(v$);var _$=(()=>{class t extends Je{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={maskValue:this.maskValue};return Object.assign(i,e),i}computeMask(e,i){let r=We(e);return Oy(jd(r,this.maskValue),-1)}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e),a=Oy(jd(r,this.maskValue),-1,!0);return F(r,ce(a,r.dtype))})}}return t.className="Masking",t})();ne.registerClass(_$);var w$=(()=>{class t extends Je{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let i=null;e.batchSize!=null&&(i=e.batchSize),e.inputLength==null?this.batchInputShape=[i,null]:this.batchInputShape=[i].concat(Yt(e.inputLength))}this.inputDim=e.inputDim,Wn(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Wn(this.outputDim,"outputDim"),this.embeddingsInitializer=rn(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=pn(e.embeddingsRegularizer),this.activityRegularizer=pn(e.activityRegularizer),this.embeddingsConstraint=Ln(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,i){return W(()=>this.maskZero?(e=We(e),jd(e,He(e))):null)}computeOutputShape(e){if(e=ht(e),this.inputLength==null)return[...e,this.outputDim];let i=Yt(this.inputLength);if(i.length!==e.length-1)throw new z(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let o=0;o<i.length;++o){let s=i[o],a=e[o+1];if(s!=null&&a!=null&&s!==a)throw new z(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);s==null&&(i[r]=a),r++}}return[e[0],...i,this.outputDim]}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e);r.dtype!=="int32"&&(r=dr(r,"int32"));let o=lI(this.embeddings.read(),$(r,[r.size]));return $(o,ht(this.computeOutputShape(r.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:gn(this.embeddingsInitializer),embeddingsRegularizer:Jt(this.embeddingsRegularizer),activityRegularizer:Jt(this.activityRegularizer),embeddingsConstraint:Fn(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Embedding",t})();ne.registerClass(w$);var nu=class extends Je{constructor(n){super(n||{}),this.supportsMasking=!0}mergeFunction(n){throw new et}computeElementwiseOpOutputShape(n,e){if(n==null||e==null)return null;if(n.length<e.length)return this.computeElementwiseOpOutputShape(e,n);if(e.length===0)return n;let i=n.slice(0,n.length-e.length);for(let r=0;r<e.length;++r){let o=n[n.length-e.length+r],s=e[r];if(o==null||s==null||o<0||s<0)i.push(null);else if(o===1)i.push(s);else if(s===1)i.push(o);else{if(o!==s)throw new z("Operands could not be broadcast together with shapes "+JSON.stringify(n)+" "+JSON.stringify(e));i.push(o)}}return i}build(n){if(Array.isArray(n)&&!Array.isArray(n[0])&&(n=[ht(n)]),n=n,n.length<2)throw new z(`A merge layer should be called on an Array of at least 2 inputs. Got ${n.length} input(s).`);let e=[];for(let o of n)o!=null&&o[0]!==null&&e.push(o[0]);if(e=ws(e),e.length>1)throw new z(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(n)}.`);let i=n[0]==null?null:n[0].slice(1);for(let o=1;o<n.length;++o){let s=n[o]==null?null:n[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}let r=n.map(o=>o.length);n.indexOf(null)===-1&&ws(r).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(n,e){return W(()=>{if(n=n,this.reshapeRequired){let i=[],r=n.map(o=>o.rank);if(r.indexOf(null)===-1){let o=ia(r);for(let s of n){let a=s.rank;for(let l=0;l<o-a;++l)s=Qc(s,1);i.push(s)}return this.mergeFunction(i)}else{let o=!1;for(let l of n){let c=l.rank;if(c==null){let u=l.shape,d=u[0],p=u.slice(1).concat([d]),h=$(l,[d].concat(Cs(u.slice(1))));h=gt(h,[1,0]),h=$(h,p),i.push(h),o=!0}else if(c>1){let u=Er(1,c).concat([0]);i.push(gt(l,u)),o=!0}else i.push(l)}let s=this.mergeFunction(i),a=s.rank;if(o){if(a==null){let l=s.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));s=$(gt($(s,[-1,u]),[1,0]),d)}else if(a>1){let l=[a-1].concat(Er(0,a-1));s=gt(s,l)}}return s}}else return this.mergeFunction(n)})}computeOutputShape(n){n=n;let e;n[0]==null?e=null:e=n[0].slice(1);for(let r=1;r<n.length;++r){let o=n[r]==null?null:n[r].slice(1);e=this.computeElementwiseOpOutputShape(e,o)}let i=[];for(let r of n)r!=null&&r[0]!==null&&i.push(r[0]);return i=ws(i),i.length===1?e=i.concat(e):e=[null].concat(e),e}computeMask(n,e){return W(()=>{if(e==null)return null;if(!Array.isArray(e))throw new z("`mask` should be an Array");if(!Array.isArray(n))throw new z("`inputs` should be an Array");if(e.length!==n.length)throw new z(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${n.length} vs ${e.length})`);if(e.every(r=>r==null))return null;e=e.map(r=>r==null?r:Qn(r,0));let i=e[0];for(let r=1;r<e.length-1;++r)i=lr(i,e[r]);return i})}},C$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return W(()=>{let i=e[0].clone();for(let r=1;r<e.length;++r)i=re(i,e[r]);return i})}}return t.className="Add",t})();ne.registerClass(C$);var T$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return W(()=>{let i=e[0].clone();for(let r=1;r<e.length;++r)i=F(i,e[r]);return i})}}return t.className="Multiply",t})();ne.registerClass(T$);var S$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return W(()=>{let i=e[0].clone();for(let r=1;r<e.length;++r)i=re(i,e[r]);return F(1/e.length,i)})}}return t.className="Average",t})();ne.registerClass(S$);var k$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return W(()=>{let i=e[0];for(let r=1;r<e.length;++r)i=Co(i,e[r]);return i})}}return t.className="Maximum",t})();ne.registerClass(k$);var I$=(()=>{class t extends nu{constructor(e){super(e)}mergeFunction(e){return W(()=>{let i=e[0];for(let r=1;r<e.length;++r)i=gs(i,e[r]);return i})}}return t.className="Minimum",t})();ne.registerClass(I$);var E$=(()=>{class t extends nu{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new z("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let i=!0;for(let o of e)if(o!=null){i=!1;break}if(i)return;let r=[];for(let o=0;o<e.length;++o){let s=e[o].slice();s.splice(this.axis,1);let a=!1;for(let l of r)if(x.arraysEqual(l,s)){a=!0;break}a||r.push(s)}if(r.length>1)throw new z("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return W(()=>ib(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new z("A `Concatenate` layer should be called on a list of inputs.");let i=e,r=i[0].slice(),o=this.axis<0?r.length+this.axis:this.axis;for(let s of i.slice(1)){if(r[o]==null||s[o]==null){r[o]=null;break}r[o]+=s[o]}return r}computeMask(e,i){if(i==null)return null;if(!Array.isArray(i))throw new z("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new z("`inputs` should be an array for Concatenate");if(i.length!==e.length)throw new z(`Mismatch in the length of mask (${i.length}) and the legnth of inputs (${e.length})`);return W(()=>{let r=!0;if(i.forEach(a=>{if(a!=null){r=!1;return}}),r)return null;let o=[];for(let a=0;a<e.length;++a)i[a]==null?o.push(ce(Ci(e[a]),"bool")):i[a].rank<e[a].rank?o.push(Qn(i[a],-1)):o.push(i[a]);let s=xn(o,this.axis);return D0(s,-1,!1)})}getConfig(){let e={axis:this.axis},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Concatenate",t})();ne.registerClass(E$);function f_(t,n){for(;t<0;)t+=n;return t}function HMe(t,n,e){if(t.shape.length>3||n.shape.length>3)throw new et("batchDot is not implemented for tensors of 4D or higher rank yet");if(x.assert(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),x.assert(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${n.shape.length}`),typeof e=="number"&&(e=[e,e]),t.dtype==="complex64"||n.dtype==="complex64")throw new et("batchDot is not implemented for complex64-type Tensors yet.");let i=t.shape.length,r=n.shape.length;e==null&&(e=[i-1,r-2]);let o=e;return W(()=>{let s;if(i>r){s=i-r;let l=[];for(let c=0;c<s;++c)l.push(1);n=$(n,n.shape.concat(l))}else if(r>i){s=r-i;let l=[];for(let c=0;c<s;++c)l.push(1);t=$(t,t.shape.concat(l))}else s=0;let a;if(t.shape.length===2&&n.shape.length===2)o[0]===o[1]?a=Te(F(t,n),o[0]):a=Te(F(gt(t,[1,0]),n),o[1]);else{let l=o[0]!==t.shape.length-1,c=o[1]===n.shape.length-1;a=Wt(t,n,l,c)}if(s>0){let l;i>r?l=i+r-3:l=i-1;let c=[];for(let u=l;u<l+s;++u)c.push(u);a=Js(a,c)}return a.shape.length===1&&(a=Qn(a,1)),a})}var D$=(()=>{class t extends nu{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let i=e[0],r=e[1];if(i.length>3||r.length>3)throw new et("Dot layer does not support tensors of 4D or higher rank yet.");let o=this.interpretAxes(i,r);if(i[o[0]]!==r[o[1]])throw new z(`Dimension incompatibility: ${i[o[0]]} !== ${r[o[1]]}`)}mergeFunction(e){if(e.length!==2)throw new z(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let i=e[0],r=e[1],o;return Array.isArray(this.axes)?o=this.axes.map((s,a)=>f_(s,e[a].shape.length)):o=[f_(this.axes,i.shape.length),f_(this.axes,r.shape.length)],this.normalize&&(i=a_(i,o[0]),r=a_(r,o[1])),HMe(i,r,o)}interpretAxes(e,i){let r;return Array.isArray(this.axes)?r=this.axes:r=[f_(this.axes,e.length),f_(this.axes,i.length)],r}computeOutputShape(e){x.assert(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let i=e[0].slice(),r=e[1].slice();if(i.length>3||r.length>3)throw new et("Dot layer does not support tensors of 4D or higher rank yet.");let o=this.interpretAxes(i,r);i.splice(o[0],1),r.splice(o[1],1),r.splice(0,1);let s=i.concat(r);return s.length===1&&s.push(1),s}computeMask(e,i){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},i=super.getConfig();return Object.assign(e,i),e}}return t.className="Dot",t})();ne.registerClass(D$);var A$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={stddev:this.stddev};return Object.assign(i,e),i}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e);return Kd(()=>re(rb(r.shape,0,this.stddev),r),()=>r,i.training||!1)})}}return t.className="GaussianNoise",t})();ne.registerClass(A$);var N$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return W(()=>{this.invokeCallHook(e,i);let r=We(e);return this.rate>0&&this.rate<1?Kd(()=>{let s=Math.sqrt(this.rate/(1-this.rate));return F(r,rb(r.shape,1,s))},()=>r,i.training||!1):r})}}return t.className="GaussianDropout",t})();ne.registerClass(N$);var M$=(()=>{class t extends Je{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||We(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),i={rate:this.rate};return Object.assign(i,e),i}call(e,i){return W(()=>{if(this.rate<1&&this.rate>0){let r=this._getNoiseShape(e);return Kd(()=>{let s=We(e),c=-1.6732632423543772*1.0507009873554805,u=Qr(Zs(r),this.rate);u=dr(u,"float32");let d=((1-this.rate)*(1+this.rate*c**2))**-.5,p=-d*c*this.rate,h=re(F(s,u),F(re(u,-1),c));return re(F(h,d),p)},()=>We(e),i.training||!1)}return e})}}return t.className="AlphaDropout",t})();ne.registerClass(M$);function g_(t,n,e,i,r,o=.001){let s;if(t.rank===2)s=_L(t,n,e,i,r,o);else if(t.rank===3)s=wL(t,n,e,i,r,o);else if(t.rank===4)s=CL(t,n,e,i,r,o);else throw new et(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return s}function WMe(t,n,e,i,r=.001){return W(()=>{let o=Gy(t,i),s=o.mean,a=o.variance;return[g_(t,s,a,e,n,r),s,a]})}function jMe(t,n,e,i,r=.001){return W(()=>{let o=Gy(t,i),s=o.mean,a=o.variance,l=[];for(let m of Er(0,t.rank))i.indexOf(m)!==-1?l.push(1):l.push(t.shape[m]);let c=$(s,l),u=$(a,l),d=n==null?null:$(n,l),p=e==null?null:$(e,l);return[g_(t,c,u,p,d,r),s,a]})}function qMe(t,n,e,i,r=.001){return x.arraysEqual(i.slice().sort(),Er(0,t.rank-1))?WMe(t,n,e,i,r):jMe(t,n,e,i,r)}var R$=(()=>{class t extends Je{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=rn(e.betaInitializer||"zeros"),this.gammaInitializer=rn(e.gammaInitializer||"ones"),this.movingMeanInitializer=rn(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=rn(e.movingVarianceInitializer||"ones"),this.betaConstraint=Ln(e.betaConstraint),this.gammaConstraint=Ln(e.gammaConstraint),this.betaRegularizer=pn(e.betaRegularizer),this.gammaRegularizer=pn(e.gammaRegularizer)}build(e){e=ht(e);let i=this.axis>=0?this.axis:this.axis+e.length,r=e[i];if(r==null)throw new z(`Axis ${i} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new dn({ndim:e.length,axes:{[i]:r}})];let o=[r];this.scale&&(this.gamma=this.addWeight("gamma",o,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",o,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",o,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",o,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,i){return W(()=>{let r=i.training==null?!1:i.training,o=We(e),s=o.shape,a=s.length,l=Er(0,a),c=this.axis>=0?this.axis:this.axis+a;l.splice(c,1);let u=vs(1,a);u[c]=s[c];let d=l.slice();d.sort();let p=!x.arraysEqual(d,Er(0,a).slice(0,a-1)),h=()=>{if(p){let v=$(this.movingMean.read(),u),_=$(this.movingVariance.read(),u),w=this.center?$(this.beta.read(),u):null,T=this.scale?$(this.gamma.read(),u):null;return g_(o,v,_,w,T,this.epsilon)}else return g_(o,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();let[m,g,f]=qMe(o,this.gamma.read(),this.beta.read(),l,this.epsilon),y=(v,_,w)=>{W(()=>{let T=1-w,D=v.read(),N=F(Ee(D,_),T);v.write(Ee(D,N))})};return(()=>{y(this.movingMean,g,this.momentum),y(this.movingVariance,f,this.momentum)})(),m})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gn(this.betaInitializer),gammaInitializer:gn(this.gammaInitializer),movingMeanInitializer:gn(this.movingMeanInitializer),movingVarianceInitializer:gn(this.movingVarianceInitializer),betaRegularizer:Jt(this.betaRegularizer),gammaRegularizer:Jt(this.gammaRegularizer),betaConstraint:Fn(this.betaConstraint),gammaConstraint:Fn(this.gammaConstraint)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BatchNormalization",t})();ne.registerClass(R$);var O$=(()=>{class t extends Je{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(let i of this.axis)if(!Number.isInteger(i))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=rn(e.betaInitializer||"zeros"),this.gammaInitializer=rn(e.gammaInitializer||"ones"),this.betaRegularizer=pn(e.betaRegularizer),this.gammaRegularizer=pn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=ht(e);let i=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let s=0;s<this.axis.length;++s)this.axis[s]<0&&(this.axis[s]+=i);for(let s of this.axis)if(s<0||s>=i)throw new Error(`Invalid axis: ${s}`);if(this.axis.length!==ws(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);let r=this.axis.map(s=>e[s]),o=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,o):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,o):this.beta=null,this.built=!0}call(e,i){let r=We(e),o=r.shape,s=o.length;return W(()=>{let{mean:l,variance:c}=Gy(r,this.axis,!0),u=vs(1,s);for(let f of this.axis)u[f]=o[f];let d=f=>f!=null&&f.shape.length!==s?$(f,u):f,p=this.scale?d(this.gamma.read()):null,h=this.center?d(this.beta.read()):null,m=[],g=[];for(let f=0;f<s;++f)this.axis.indexOf(f)!==-1?(m.push(o[f]),g.push(1)):(m.push(1),g.push(o[f]));return l=Qi(l,m),c=Qi(c,m),p!=null&&(p=Qi(p,g)),h!=null&&(h=Qi(h,g)),g_(r,l,c,h,p,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:gn(this.betaInitializer),gammaInitializer:gn(this.gammaInitializer),betaRegularizer:Jt(this.betaRegularizer),gammaRegularizer:Jt(this.gammaRegularizer)},i=super.getConfig();return Object.assign(e,i),e}}return t.className="LayerNormalization",t})();ne.registerClass(O$);function XMe(t,n,e){return W(()=>{if(t.rank!==4)throw new z(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(n==null&&(n=[[1,1],[1,1]]),n.length!==2||n[0].length!==2||n[1].length!==2)throw new z("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(e==null&&(e=Dr()),e!=="channelsLast"&&e!=="channelsFirst")throw new z(`Unknown data format: ${e}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let i;return e==="channelsFirst"?i=[[0,0],[0,0],n[0],n[1]]:i=[[0,0],n[0],n[1],[0,0]],nm(t,i)})}var F$=(()=>{class t extends Je{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?Dr():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new z(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let i,r;if(typeof e.padding[0]=="number")i=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new z(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(i=e.padding[0],e.padding[1].length!==2)throw new z(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[i,r]}this.inputSpec=[new dn({ndim:4})]}computeOutputShape(e){e=ht(e);let i,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?i=e[2]+this.padding[0][0]+this.padding[0][1]:i=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],i,r]):(e[1]!=null&&e[1]>=0?i=e[1]+this.padding[0][0]+this.padding[0][1]:i=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],i,r,e[3]])}call(e,i){return W(()=>XMe(We(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},i=super.getConfig();return Object.assign(e,i),e}}return t.className="ZeroPadding2D",t})();ne.registerClass(F$);function KI(t,n,e,i,r,o){return W(()=>{En(r),TP(o),Ir(i),e==null&&(e=[1,1]),i==null&&(i="valid"),r==null&&(r=Dr()),o==null&&(o="max"),t=m_(t,r);let s,a=i==="same"?"same":"valid";return o==="max"?s=tm(t,n,e,a):s=Yh(t,n,e,a),r==="channelsFirst"&&(s=gt(s,[0,3,1,2])),s})}function QQ(t,n,e,i,r,o){return W(()=>{En(r),TP(o),Ir(i),e==null&&(e=[1,1,1]),i==null&&(i="valid"),r==null&&(r=Dr()),o==null&&(o="max"),t=e$(t,r);let s,a=i==="same"?"same":"valid";return o==="max"?s=zL(t,n,e,a):s=vL(t,n,e,a),r==="channelsFirst"&&(s=gt(s,[0,4,1,2,3])),s})}var HI=class extends Je{constructor(n){if(n.poolSize==null&&(n.poolSize=2),super(n),typeof n.poolSize=="number")this.poolSize=[n.poolSize];else if(Array.isArray(n.poolSize)&&n.poolSize.length===1&&typeof n.poolSize[0]=="number")this.poolSize=n.poolSize;else throw new z(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.poolSize)}`);if(Wn(this.poolSize,"poolSize"),n.strides==null)this.strides=this.poolSize;else if(typeof n.strides=="number")this.strides=[n.strides];else if(Array.isArray(n.strides)&&n.strides.length===1&&typeof n.strides[0]=="number")this.strides=n.strides;else throw new z(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(n.strides)}`);Wn(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,Ir(this.padding),this.inputSpec=[new dn({ndim:3})]}computeOutputShape(n){n=ht(n);let e=Jr(n[1],this.poolSize[0],this.padding,this.strides[0]);return[n[0],e,n[2]]}call(n,e){return W(()=>{this.invokeCallHook(n,e),n=Qc(We(n),2);let i=this.poolingFunction(We(n),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Js(i,[2])})}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides},e=super.getConfig();return Object.assign(n,e),n}},L$=(()=>{class t extends HI{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return En(s),Ir(o),KI(e,i,r,o,s,"max")}}return t.className="MaxPooling1D",t})();ne.registerClass(L$);var P$=(()=>{class t extends HI{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return En(s),Ir(o),KI(e,i,r,o,s,"avg")}}return t.className="AveragePooling1D",t})();ne.registerClass(P$);var WI=class extends Je{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==2)throw new z(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides];Wn(this.poolSize,"poolSize"),Wn(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,En(this.dataFormat),Ir(this.padding),this.inputSpec=[new dn({ndim:4})]}computeOutputShape(n){n=ht(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2];return e=Jr(e,this.poolSize[0],this.padding,this.strides[0]),i=Jr(i,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,i]:[n[0],e,i,n[3]]}call(n,e){return W(()=>(this.invokeCallHook(n,e),this.poolingFunction(We(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},$$=(()=>{class t extends WI{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return En(s),Ir(o),KI(e,i,r,o,s,"max")}}return t.className="MaxPooling2D",t})();ne.registerClass($$);var V$=(()=>{class t extends WI{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return En(s),Ir(o),KI(e,i,r,o,s,"avg")}}return t.className="AveragePooling2D",t})();ne.registerClass(V$);var jI=class extends Je{constructor(n){if(n.poolSize==null&&(n.poolSize=[2,2,2]),super(n),this.poolSize=Array.isArray(n.poolSize)?n.poolSize:[n.poolSize,n.poolSize,n.poolSize],n.strides==null)this.strides=this.poolSize;else if(Array.isArray(n.strides)){if(n.strides.length!==3)throw new z(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${n.strides.length}.`);this.strides=n.strides}else this.strides=[n.strides,n.strides,n.strides];Wn(this.poolSize,"poolSize"),Wn(this.strides,"strides"),this.padding=n.padding==null?"valid":n.padding,this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,En(this.dataFormat),Ir(this.padding),this.inputSpec=[new dn({ndim:5})]}computeOutputShape(n){n=ht(n);let e=this.dataFormat==="channelsFirst"?n[2]:n[1],i=this.dataFormat==="channelsFirst"?n[3]:n[2],r=this.dataFormat==="channelsFirst"?n[4]:n[3];return e=Jr(e,this.poolSize[0],this.padding,this.strides[0]),i=Jr(i,this.poolSize[1],this.padding,this.strides[1]),r=Jr(r,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[n[0],n[1],e,i,r]:[n[0],e,i,r,n[4]]}call(n,e){return W(()=>(this.invokeCallHook(n,e),this.poolingFunction(We(n),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let n={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},B$=(()=>{class t extends jI{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return En(s),Ir(o),QQ(e,i,r,o,s,"max")}}return t.className="MaxPooling3D",t})();ne.registerClass(B$);var z$=(()=>{class t extends jI{constructor(e){super(e)}poolingFunction(e,i,r,o,s){return En(s),Ir(o),QQ(e,i,r,o,s,"avg")}}return t.className="AveragePooling3D",t})();ne.registerClass(z$);var qI=class extends Je{constructor(n){super(n),this.inputSpec=[new dn({ndim:3})]}computeOutputShape(n){return[n[0],n[2]]}call(n,e){throw new et}},G$=(()=>{class t extends qI{constructor(e){super(e||{})}call(e,i){return W(()=>{let r=We(e);return fn(r,1)})}}return t.className="GlobalAveragePooling1D",t})();ne.registerClass(G$);var U$=(()=>{class t extends qI{constructor(e){super(e||{})}call(e,i){return W(()=>{let r=We(e);return Bi(r,1)})}}return t.className="GlobalMaxPooling1D",t})();ne.registerClass(U$);var XI=class extends Je{constructor(n){super(n),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,En(this.dataFormat),this.inputSpec=[new dn({ndim:4})]}computeOutputShape(n){return n=n,this.dataFormat==="channelsLast"?[n[0],n[3]]:[n[0],n[1]]}call(n,e){throw new et}getConfig(){let n={dataFormat:this.dataFormat},e=super.getConfig();return Object.assign(n,e),n}},H$=(()=>{class t extends XI{call(e,i){return W(()=>{let r=We(e);return this.dataFormat==="channelsLast"?fn(r,[1,2]):fn(r,[2,3])})}}return t.className="GlobalAveragePooling2D",t})();ne.registerClass(H$);var W$=(()=>{class t extends XI{call(e,i){return W(()=>{let r=We(e);return this.dataFormat==="channelsLast"?Bi(r,[1,2]):Bi(r,[2,3])})}}return t.className="GlobalMaxPooling2D",t})();ne.registerClass(W$);var YI=class extends Je{constructor(n){super(n),this.layer=n.layer}build(n){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(n){this.layer!=null&&(this.layer.trainable=n)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(n){this.layer.setWeights(n)}getConfig(){let n={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},e=super.getConfig();return Object.assign(n,e),n}setFastWeightInitDuringBuild(n){super.setFastWeightInitDuringBuild(n),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(n)}static fromConfig(n,e,i={}){let r=e.layer,o=Zr(r,i);delete e.layer;let s={layer:o};return Object.assign(s,e),new n(s)}},j$=(()=>{class t extends YI{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=ht(e),e.length<3)throw new z(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];let i=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(i),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=ht(e);let i=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(i),o=e[1];return[r[0],o].concat(r.slice(1))}call(e,i){return W(()=>(e=We(e),c$((a,l)=>[We(this.layer.call(a,i)),[]],e,[],!1,null,null,!1,!0)[1]))}}return t.className="TimeDistributed",t})();ne.registerClass(j$);function KMe(t){Qa(Z9,"BidirectionalMergeMode",t)}var YMe="concat",q$=(()=>{class t extends YI{constructor(e){super(e);let i=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=i,this.forwardLayer=Zr(r),i.goBackwards=i.goBackwards!==!0;let o={};if(o.className=e.layer.getClassName(),o.config=i,this.backwardLayer=Zr(o),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?YMe:e.mergeMode,KMe(this.mergeMode),e.weights)throw new et("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let i=e.length,r=Math.floor(i/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let i=this.forwardLayer.computeOutputShape(e);Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i;let r,o,s;return this.returnState&&(s=i.slice(1)),r=i[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,o=[r]):this.mergeMode==null?o=[r,r.slice()]:o=[r],this.returnState?this.mergeMode==null?o.concat(s).concat(s.slice()):[r].concat(s).concat(s.slice()):Si(o)}apply(e,i){let r=i==null?null:i.initialState,o=i==null?null:i.constants;i==null&&(i={});let s=l$(e,r,o,this.numConstants);if(e=s.inputs,r=s.initialState,o=s.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&o==null)return super.apply(e,i);let a=[],l=[];if(r!=null){let u=r.length;if(u%2>0)throw new z("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");i.initialState=r,a.push(...r);let d=r.map(p=>new dn({shape:p.shape}));this.forwardLayer.stateSpec=d.slice(0,u/2),this.backwardLayer.stateSpec=d.slice(u/2),l.push(...d)}if(o!=null)throw new et("Support for constants in Bidirectional layers is not implemented yet.");let c=a[0]instanceof pr;for(let u of a)if(u instanceof pr!==c)throw new z("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){let u=[e].concat(a),d=this.inputSpec.concat(l),p=this.inputSpec;this.inputSpec=d;let h=super.apply(u,i);return this.inputSpec=p,h}else return super.apply(e,i)}call(e,i){return W(()=>{let r=i.initialState,o,s;if(r==null)o=this.forwardLayer.call(e,i),s=this.backwardLayer.call(e,i);else{let c=r.slice(0,r.length/2),u=r.slice(r.length/2);o=this.forwardLayer.call(e,Object.assign(i,{initialState:c})),s=this.backwardLayer.call(e,Object.assign(i,{initialState:u}))}let a;this.returnState&&(Array.isArray(o)&&(a=o.slice(1).concat(s.slice(1))),o=o[0],s=s[0]),this.returnSequences&&(s=Uo(s,1));let l;return this.mergeMode==="concat"?l=ib([o,s]):this.mergeMode==="sum"?l=re(o,s):this.mergeMode==="ave"?l=F(.5,re(o,s)):this.mergeMode==="mul"?l=F(o,s):this.mergeMode==null&&(l=[o,s]),this.returnState?this.mergeMode==null?l.concat(a):[l].concat(a):l})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){na(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),na(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,i){Array.isArray(i)&&(i=i[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[i,i]:r=i:this.mergeMode==null?r=[null,null]:r=null,this.returnState){let s=this.forwardLayer.states.map(a=>null);return Array.isArray(r)?r.concat(s).concat(s):[r].concat(s).concat(s)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},i=super.getConfig();return Object.assign(e,i),e}static fromConfig(e,i){let r=Zr(i.layer);if(delete i.layer,i.numConstants!=null)throw new et("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let o=i;return o.layer=r,new e(o)}}return t.className="Bidirectional",t})();ne.registerClass(q$);var X$=(()=>{class t extends Je{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return W(()=>(e=We(e),e.dtype!=="float32"&&(e=dr(e,"float32")),re(F(e,this.scale),this.offset)))}}return t.className="Rescaling",t})();ne.registerClass(X$);var{resizeBilinear:QMe,cropAndResize:ZMe}=So,K$=(()=>{class t extends Je{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,i,r,o,s,a,l,c){return W(()=>{let u,d=!1,p=i/a,h=r/l,m=(o+i)/a,g=(s+r)/l,f=[p,h,m,g],y=[];e.rank===3?(d=!0,u=li([e])):u=e;for(let T=0;T<u.shape[0];T++)y.push(f);let b=$i(y,[y.length,4]),v=qc(0,y.length,1,"int32"),w=ZMe(u,b,v,[o,s],"nearest");return d?dr(We(ur(w)),c):dr(w,c)})}upsize(e,i,r,o){return W(()=>{let s=QMe(e,[i,r]);return dr(s,o)})}call(e,i){return W(()=>{let r=We(e),o=r.dtype,s=r.shape,a=s[s.length-3],l=s[s.length-2],c=0;a!==this.height&&(c=Math.floor((a-this.height)/2));let u=0;return l!==this.width&&(u=Math.floor((l-this.width)/2),u===0&&(u=1)),c>=0&&u>=0?this.centerCrop(r,c,u,this.height,this.width,a,l,o):this.upsize(e,this.height,this.width,o)})}getConfig(){let e={height:this.height,width:this.width},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){e=ht(e);let i=e.length-3,r=e.length-2;return e[i]=this.height,e[r]=this.width,e}}return t.className="CenterCrop",t})();ne.registerClass(K$);function ZQ(t,n,e,i){let r=We(t);if(r.dtype!=="int32"&&(r=dr(r,"int32")),n==="int")return r;let o=r.shape;if(r.rank===0&&(r=Qn(r,-1)),n==="oneHot"&&r.shape[r.shape.length-1]!==1&&(r=Qn(r,-1)),r.rank>2)throw new z(`When outputMode is not int, maximum output rank is 2 Received outputMode ${n} and input shape ${o} which would result in output rank ${r.rank}.`);let s=["multiHot","oneHot"].includes(n),a=r,l;if(typeof i<"u"&&n==="count"?l=Ak(a,i,e,s):l=Ak(a,[],e,s),n!=="tfIdf")return l;if(i)return F(l,i);throw new z("When outputMode is 'tfIdf', weights must be provided.")}var Y$=(()=>{class t extends Je{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){return e=ht(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,i){return W(()=>{e=We(e),e.dtype!=="int32"&&(e=dr(e,"int32"));let r;if(typeof i.countWeights<"u"){if(this.outputMode!=="count")throw new z(`countWeights is not used when outputMode !== count.
              Received countWeights=${i.countWeights}`);r=We(i.countWeights)}let o=Bi(e),s=Hd(e),a=Un(this.numTokens,o).bufferSync().get(0),l=Qr(s,0).bufferSync().get(0);if(!(a&&l))throw new z(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return ZQ(e,this.outputMode,this.numTokens,r)})}}return t.className="CategoryEncoding",t})();ne.registerClass(Y$);var eRe=["bilinear","nearest"],JQ=new Set(eRe),Q$=(()=>{class t extends Je{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(JQ.has(e.interpolation))this.interpolation=e.interpolation;else throw new z(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=ht(e);let i=e[2];return[this.height,this.width,i]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},i=super.getConfig();return Object.assign(e,i),e}call(e,i){return W(()=>{let r=[this.height,this.width];if(this.interpolation==="bilinear")return So.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return So.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...JQ]} are supported`)})}}return t.className="Resizing",t})();ne.registerClass(Q$);var eZ=(()=>{class t{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}return t.className="RandomSeed",t})();var tZ=(()=>{class t extends Je{constructor(e){super(e),this.randomGenerator=new eZ(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},i=super.getConfig();return Object.assign(e,i),e}}return t.className="BaseRandomLayer",t})();var tRe=["bilinear","nearest"],nZ=new Set(tRe),Z$=(()=>{class t extends tZ{constructor(e){super(e);let{factor:i,interpolation:r="bilinear"}=e;if(this.factor=i,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new z(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new z(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new z(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(nZ.has(r))this.interpolation=r;else throw new z(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},i=super.getConfig();return Object.assign(e,i),e}computeOutputShape(e){e=ht(e);let i=e[2];return[this.imgHeight,-1,i]}call(e,i){return W(()=>{let r=We(e);this.imgHeight=r.shape[r.shape.length-3];let o=r.shape[r.shape.length-2];this.widthFactor=Zs([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let s=this.widthFactor.dataSync()[0]*o;s=Math.round(s);let a=[this.imgHeight,s];switch(this.interpolation){case"bilinear":return So.resizeBilinear(e,a);case"nearest":return So.resizeNearestNeighbor(e,a);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...nZ]} are supported`)}})}}return t.className="RandomWidth",t})();ne.registerClass(Z$);function nRe(t){return new Yd(t)}function iRe(t){return new QP(t)}function rRe(t){return new XP(t)}function oRe(t){return new KP(t)}function sRe(t){return new YP(t)}function aRe(t){return new JP(t)}function lRe(t){return new ZP(t)}function cRe(t){return new r$(t)}function uRe(t){return new PI(t)}function dRe(t){return new t$(t)}function pRe(t){return new $I(t)}function hRe(t){return new n$(t)}function mRe(t){return new i$(t)}function fRe(t){return new o$(t)}function gRe(t){return new s$(t)}function yRe(t){return new a$(t)}function bRe(t){return new y$(t)}function xRe(t){return new f$(t)}function vRe(t){return new UI(t)}function _Re(t){return new m$(t)}function wRe(t){return new g$(t)}function CRe(t){return new b$(t)}function TRe(t){return new x$(t)}function SRe(t){return new v$(t)}function kRe(t){return new w$(t)}function IRe(t){return new C$(t)}function ERe(t){return new S$(t)}function DRe(t){return new E$(t)}function ARe(t){return new k$(t)}function NRe(t){return new I$(t)}function MRe(t){return new T$(t)}function RRe(t){return new D$(t)}function ORe(t){return new R$(t)}function FRe(t){return new O$(t)}function LRe(t){return new F$(t)}function J$(t){return new P$(t)}function PRe(t){return J$(t)}function $Re(t){return J$(t)}function eV(t){return new V$(t)}function VRe(t){return eV(t)}function BRe(t){return eV(t)}function tV(t){return new z$(t)}function zRe(t){return tV(t)}function GRe(t){return tV(t)}function URe(t){return new G$(t)}function HRe(t){return new H$(t)}function iZ(t){return new U$(t)}function rZ(t){return new W$(t)}function oZ(t){return new L$(t)}function sZ(t){return new $$(t)}function WRe(t){return new B$(t)}function jRe(t){return new d$(t)}function qRe(t){return new BI(t)}function XRe(t){return new p$(t)}function KRe(t){return new fb(t)}function YRe(t){return new u$(t)}function QRe(t){return new VI(t)}function ZRe(t){return new h$(t)}function JRe(t){return new GI(t)}function eOe(t){return new el(t)}function tOe(t){return new zI(t)}function nOe(t){return new q$(t)}function iOe(t){return new j$(t)}var rOe=iZ,oOe=rZ,sOe=oZ,aOe=sZ;function lOe(t){return new A$(t)}function cOe(t){return new N$(t)}function uOe(t){return new M$(t)}function dOe(t){return new _$(t)}function pOe(t){return new X$(t)}function hOe(t){return new K$(t)}function mOe(t){return new Q$(t)}function fOe(t){return new Y$(t)}function gOe(t){return new Z$(t)}var vOe=G();vOe.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});var aZ;(function(t){let n;(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(n=t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(aZ||(aZ={}));var bFe=Gb(z0());var gFe=Gb(z0());var kcn=Symbol("out"),Icn=Symbol("field"),Ecn=Symbol("quote"),Dcn=Symbol("quoteafterquote"),Acn=Symbol("quoteinquote");function le(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the CPU backend.`)})}var DFe=Ji.whereImpl,cZ=(()=>{class t extends Ul{nextDataId(){return t.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Ch(this,hs())}write(e,i,r){this.firstUse&&(this.firstUse=!1,G().get("IS_NODE")&&C.warn(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));let o={id:this.nextDataId()};return this.data.set(o,{values:e,dtype:r,refCount:1}),o}makeTensorInfo(e,i,r){let o;if(i==="string"&&r!=null&&r.length>0&&x.isString(r[0])){let s=r.map(a=>x.encodeString(a));o=this.write(s,e,i)}else o=this.write(r,e,i);return{dataId:o,shape:e,dtype:i}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){let i=this.data.get(e);i.refCount++}decRef(e){if(this.data.has(e)){let i=this.data.get(e);i.refCount--}}move(e,i,r,o,s){this.data.set(e,{values:i,dtype:o,refCount:s})}numDataIds(){return this.data.numDataIds()}read(e){return H(this,null,function*(){return this.readSync(e)})}readSync(e){let{dtype:i,complexTensorInfos:r}=this.data.get(e);if(i==="complex64"){let o=this.readSync(r.real.dataId),s=this.readSync(r.imag.dataId);return C.mergeRealAndImagArrays(o,s)}return x.convertBackendValuesAndArrayBuffer(this.data.get(e).values,i)}bufferSync(e){let i=this.readSync(e.dataId);if(e.dtype==="string")try{let r=i.map(o=>x.decodeString(o));return Ge(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ge(e.shape,e.dtype,i)}makeOutput(e,i,r){return hs().makeTensorFromTensorInfo(this.makeTensorInfo(i,r,e),this)}disposeData(e,i=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!i&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}time(e){return H(this,null,function*(){let i=x.now();return e(),{kernelMs:x.now()-i}})}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){le([e],"where");let i=this.readSync(e.dataId);return DFe(e.shape,i)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}return t.nextDataId=0,t})();var RV={};Ko(RV,{addImpl:()=>oV,bincountImpl:()=>bb,bincountReduceImpl:()=>ZI,bitwiseAndImpl:()=>sV,castImpl:()=>rV,ceilImpl:()=>aV,concatImpl:()=>JI,equalImpl:()=>lV,expImpl:()=>uV,expm1Impl:()=>pV,floorDivImpl:()=>mV,floorImpl:()=>hV,gatherNdImpl:()=>eE,gatherV2Impl:()=>tE,greaterEqualImpl:()=>gV,greaterImpl:()=>fV,lessEqualImpl:()=>bV,lessImpl:()=>yV,linSpaceImpl:()=>nE,logImpl:()=>xV,maxImpl:()=>iE,maximumImpl:()=>vV,minimumImpl:()=>_V,multiplyImpl:()=>y_,negImpl:()=>wV,notEqualImpl:()=>CV,prodImpl:()=>TV,raggedGatherImpl:()=>rE,raggedRangeImpl:()=>oE,raggedTensorToTensorImpl:()=>sE,rangeImpl:()=>aE,rsqrtImpl:()=>kV,scatterImpl:()=>aa,sigmoidImpl:()=>BZ,simpleAbsImpl:()=>iV,sliceImpl:()=>EV,sparseFillEmptyRowsImpl:()=>lE,sparseReshapeImpl:()=>cE,sparseSegmentReductionImpl:()=>vb,sqrtImpl:()=>UZ,squaredDifferenceImpl:()=>DV,staticRegexReplaceImpl:()=>AV,stridedSliceImpl:()=>uE,stringNGramsImpl:()=>dE,stringSplitImpl:()=>pE,stringToHashBucketFastImpl:()=>hE,subImpl:()=>MV,tileImpl:()=>mE,topKImpl:()=>fE,transposeImpl:()=>xb,uniqueImpl:()=>gE});function iV(t){let n=new Float32Array(t.length);for(let e=0;e<t.length;++e)n[e]=Math.abs(t[e]);return n}var AFe=t=>{let{x:n}=t.inputs,e=t.backend;le(n,"abs");let i=new Float32Array(x.sizeFromShape(n.shape)),r=e.data.get(n.dataId).values;return i=iV(r),e.makeOutput(i,n.shape,n.dtype)},uZ={kernelName:Wu,backendName:"cpu",kernelFunc:AFe};function It(t){return(n,e,i,r,o)=>{let s=C.assertAndGetBroadcastShape(n,e),a=s.length,l=x.computeStrides(s),c=x.sizeFromShape(s),u=x.getTypedArrayFromDType(o,c),d=n.length,p=e.length,h=x.computeStrides(n),m=x.computeStrides(e),g=C.getBroadcastDims(n,s),f=C.getBroadcastDims(e,s);if(g.length+f.length===0)for(let y=0;y<u.length;++y)u[y]=t(i[y%i.length],r[y%r.length]);else for(let y=0;y<u.length;++y){let b=x.indexToLoc(y,a,l),v=b.slice(-d);g.forEach(D=>v[D]=0);let _=x.locToIndex(v,d,h),w=b.slice(-p);f.forEach(D=>w[D]=0);let T=x.locToIndex(w,p,m);u[y]=t(i[_],r[T])}return[u,s]}}function gi(t){let{inputs:n,backend:e}=t,{real:i,imag:r}=n,o=e.data.get(i.dataId).values,s=e.data.get(r.dataId).values,a=e.makeTensorInfo(i.shape,"complex64"),l=e.data.get(a.dataId);return l.complexTensorInfos={real:e.makeTensorInfo(i.shape,"float32",o),imag:e.makeTensorInfo(r.shape,"float32",s)},a}var dZ={kernelName:Wg,backendName:"cpu",kernelFunc:gi};function gb(t,n,e="float32"){if(e==="complex64"){let r=gb(t,n,"float32"),o=gb(t,n,"float32");return gi({inputs:{real:r,imag:o},backend:t})}let i=x.makeZerosTypedArray(x.sizeFromShape(n),e);return t.makeTensorInfo(n,e,i)}function er(t){let{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}var pZ={kernelName:Ga,backendName:"cpu",kernelFunc:er};function ks(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.data.get(i.dataId).complexTensorInfos.real,o=e.data.get(r.dataId).values;return e.makeTensorInfo(r.shape,r.dtype,o)}var hZ={kernelName:fy,backendName:"cpu",kernelFunc:ks};function rV(t,n,e,i){if(i==="int32"){let r=Int32Array.from(t);return[n,"int32",r]}if(i==="bool"){let r=x.toTypedArray([0],e),[o,s]=It((a,l)=>a!==l?1:0)(n,[],t,r,"bool");return[s,"bool",o]}throw new Error(`Error in Cast: failed to cast ${e} to ${i}`)}function Is(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dtype:o}=i;if(o==="complex64"){if(r.dtype==="complex64")return er({inputs:{x:r},backend:e});let u=gb(e,r.shape,r.dtype),d=Is({inputs:{x:r},backend:e,attrs:{dtype:"float32"}}),p=gi({inputs:{real:d,imag:u},backend:e});return e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),p}if(r.dtype==="complex64"){let u=ks({inputs:{input:r},backend:e}),d=Is({inputs:{x:u},backend:e,attrs:{dtype:o}});return e.disposeIntermediateTensorInfo(u),d}if(!x.hasEncodingLoss(r.dtype,o)){let u=er({inputs:{x:r},backend:e});return{dataId:u.dataId,shape:u.shape,dtype:o}}let s=e.data.get(r.dataId).values,[a,l,c]=rV(s,r.shape,r.dtype,o);return e.makeTensorInfo(a,l,c)}var mZ={kernelName:za,backendName:"cpu",kernelFunc:Is};function zt(t,n,e,i){return e==null?({inputs:r,backend:o})=>{let{a:s,b:a}=r,l=o;le([s,a],t);let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=s.dtype==="string"?C.fromUint8ToStringArray(c):c,p=s.dtype==="string"?C.fromUint8ToStringArray(u):u,h=i||s.dtype,[m,g]=n(s.shape,a.shape,d,p,h);return l.makeTensorInfo(g,h,m)}:({inputs:r,backend:o})=>{let{a:s,b:a}=r,l=o;if(s.dtype==="complex64"||a.dtype==="complex64"){let c=Is({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,p=u.complexTensorInfos.imag,h=l.data.get(d.dataId).values,m=l.data.get(p.dataId).values,g=Is({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),f=l.data.get(g.dataId),y=f.complexTensorInfos.real,b=f.complexTensorInfos.imag,v=l.data.get(y.dataId).values,_=l.data.get(b.dataId).values,[w,T,D]=e(s.shape,a.shape,h,m,v,_),N=l.makeTensorInfo(D,"float32",w),O=l.makeTensorInfo(D,"float32",T),P=gi({inputs:{real:N,imag:O},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(N),l.disposeIntermediateTensorInfo(O),P}else{let c=l.data.get(s.dataId).values,u=l.data.get(a.dataId).values,d=i||s.dtype,[p,h]=n(s.shape,a.shape,c,u,d);return l.makeTensorInfo(h,d,p)}}}function yb(t){return(n,e,i,r,o,s)=>{let a=C.assertAndGetBroadcastShape(n,e),l=x.sizeFromShape(a),c=a.length,u=x.computeStrides(a),d=x.getTypedArrayFromDType("float32",l),p=x.getTypedArrayFromDType("float32",l),h=C.getBroadcastDims(n,a),m=C.getBroadcastDims(e,a),g=C.mergeRealAndImagArrays(i,r),f=C.mergeRealAndImagArrays(o,s),y=n.length,b=x.computeStrides(n),v=e.length,_=x.computeStrides(e);if(h.length+m.length===0)for(let w=0;w<d.length;w++){let T=w%g.length,D=w%f.length,N=t(g[T*2],g[T*2+1],f[D*2],f[D*2+1]);d[w]=N.real,p[w]=N.imag}else for(let w=0;w<d.length;w++){let T=x.indexToLoc(w,c,u),D=T.slice(-y);h.forEach(K=>D[K]=0);let N=x.locToIndex(D,y,b),O=T.slice(-v);m.forEach(K=>O[K]=0);let P=x.locToIndex(O,v,_),B=t(g[N*2],g[N*2+1],f[P*2],f[P*2+1]);d[w]=B.real,p[w]=B.imag}return[d,p,a]}}var oV=It((t,n)=>t+n),NFe=yb((t,n,e,i)=>({real:t+e,imag:n+i})),tl=zt(Xs,oV,NFe),fZ={kernelName:Xs,backendName:"cpu",kernelFunc:tl};function bb(t,n,e,i,r){let o=x.sizeFromShape(i),s=x.makeZerosTypedArray(r,e);for(let a=0;a<t.length;a++){let l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=r||(o>0?s[l]+=n[a]:s[l]+=1)}return s}function ZI(t,n,e,i=!1){let r=t.shape[0],o=t.shape[1],s=Ge([r,e],n.dtype);for(let a=0;a<r;a++)for(let l=0;l<o;l++){let c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=e||(i?s.set(1,a,c):n.size>0?s.set(s.get(a,c)+n.get(a,l),a,c):s.set(s.get(a,c)+1,a,c))}return s}var sV=It((t,n)=>t&n),MFe=zt(x0,sV),gZ={kernelName:x0,backendName:"cpu",kernelFunc:MFe};function Ei(t){return(n,e,i)=>{let r=x.getArrayFromDType(e,n.length);for(let o=0;o<n.length;++o)r[o]=t(n[o],i);return r}}function tt(t,n,e){let i=Ei(n);return eo(t,i,e)}function eo(t,n,e){return({inputs:i,attrs:r,backend:o})=>{let{x:s}=i;le(s,t);let a=o,l=a.data.get(s.dataId).values,c;if(s.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=C.fromUint8ToStringArray(l)}else c=l;let u=e||s.dtype,d=n(c,u,r);return a.makeTensorInfo(s.shape,u,d)}}var aV=Ei(t=>Math.ceil(t)),RFe=eo(Zl,aV),yZ={kernelName:Zl,backendName:"cpu",kernelFunc:RFe};function JI(t,n,e,i){let r=x.getArrayFromDType(e,x.sizeFromShape(n));if(i&&e!=="string"){let o=0;t.forEach(s=>{let a=x.sizeFromShape(s.shape);r.set(s.vals,o),o+=a})}else{let o=0;t.forEach(s=>{let a=e==="string"?C.fromUint8ToStringArray(s.vals):s.vals,l=0;for(let c=0;c<s.shape[0];++c){let u=c*n[1]+o;for(let d=0;d<s.shape[1];++d)r[u+d]=a[l++]}o+=s.shape[1]})}return r}var lV=It((t,n)=>t===n?1:0),cV=zt(Ih,lV,null,"bool"),bZ={kernelName:Ih,backendName:"cpu",kernelFunc:cV};var uV=Ei(t=>Math.exp(t)),dV=eo(oc,uV,"float32"),xZ={kernelName:oc,backendName:"cpu",kernelFunc:dV};var pV=Ei(t=>Math.expm1(t)),OFe=eo(sc,pV),vZ={kernelName:sc,backendName:"cpu",kernelFunc:OFe};var hV=Ei(t=>Math.floor(t)),FFe=eo(ac,hV),_Z={kernelName:ac,backendName:"cpu",kernelFunc:FFe};var mV=It((t,n)=>Math.floor(t/n)),LFe=zt(lc,mV,null,"int32"),wZ={kernelName:lc,backendName:"cpu",kernelFunc:LFe};function eE(t,n,e,i,r,o,s,a,l){let c=Ge([i,o],e);for(let u=0;u<i;u++){let d=[],p=0;for(let h=0;h<r;h++){let m=t[u*r+h];p+=m*s[h],d.push(m)}if(p<0||p>=l/o)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let h=0;h<o;h++)c.values[u*o+h]=n.get(...n.indexToLoc(p*o+h))}return c}function tE(t,n,e){let i=Ge(e,t.dtype);for(let r=0;r<i.size;++r){let s=i.indexToLoc(r).slice(),a=s[0],l=s[2],c=n.locToIndex([a,l]);s[2]=n.values[c];let u=t.locToIndex(s);0<=u&&u<t.values.length&&(i.values[r]=t.values[u])}return i}var fV=It((t,n)=>t>n?1:0),PFe=zt(Eh,fV,null,"bool"),CZ={kernelName:Eh,backendName:"cpu",kernelFunc:PFe};var gV=It((t,n)=>t>=n?1:0),$Fe=zt(cc,gV,null,"bool"),TZ={kernelName:cc,backendName:"cpu",kernelFunc:$Fe};var yV=It((t,n)=>t<n?1:0),VFe=zt(Dh,yV,null,"bool"),SZ={kernelName:Dh,backendName:"cpu",kernelFunc:VFe};var bV=It((t,n)=>t<=n?1:0),BFe=zt(Ah,bV,null,"bool"),kZ={kernelName:Ah,backendName:"cpu",kernelFunc:BFe};function nE(t,n,e){let i=(n-t)/(e-1),r=x.makeZerosTypedArray(e,"float32");r[0]=t;for(let o=1;o<r.length;o++)r[o]=r[o-1]+i;return r}var xV=Ei(t=>Math.log(t)),zFe=eo(hc,xV),IZ={kernelName:hc,backendName:"cpu",kernelFunc:zFe};function iE(t,n,e,i){let r=x.getTypedArrayFromDType(i,x.sizeFromShape(e));for(let o=0;o<r.length;++o){let s=o*n,a=t[s];for(let l=0;l<n;++l){let c=t[s+l];(Number.isNaN(c)||c>a)&&(a=c)}r[o]=a}return r}var vV=It((t,n)=>Math.max(t,n)),GFe=zt(fc,vV),EZ={kernelName:fc,backendName:"cpu",kernelFunc:GFe};var _V=It((t,n)=>Math.min(t,n)),UFe=zt(gc,_V),DZ={kernelName:gc,backendName:"cpu",kernelFunc:UFe};var y_=It((t,n)=>t*n),HFe=yb((t,n,e,i)=>({real:t*e-n*i,imag:t*i+n*e})),bm=zt(bc,y_,HFe),AZ={kernelName:bc,backendName:"cpu",kernelFunc:bm};function wV(t,n,e){let i=x.createScalarValue(-1,e);return y_([],n,i,t,e)}function WFe(t){let{inputs:n,backend:e}=t,{x:i}=n;le(i,"neg");let r=e.data.get(i.dataId).values,[o,s]=wV(r,i.shape,i.dtype);return e.makeTensorInfo(s,i.dtype,o)}var NZ={kernelName:yd,backendName:"cpu",kernelFunc:WFe};var CV=It((t,n)=>t!==n?1:0),jFe=zt(Oh,CV,null,"bool"),MZ={kernelName:Oh,backendName:"cpu",kernelFunc:jFe};function xb(t,n,e,i,r){let o=n.length,s=x.sizeFromShape(n),a=x.computeStrides(n),l=x.computeStrides(r),c=x.getTypedArrayFromDType(e,x.sizeFromShape(r));for(let u=0;u<s;++u){let d=x.indexToLoc(u,o,a),p=new Array(d.length);for(let m=0;m<p.length;m++)p[m]=d[i[m]];let h=x.locToIndex(p,o,l);c[h]=t[u]}return c}function Pn(t){let{inputs:n,attrs:e,backend:i}=t,{x:r}=n,{perm:o}=e;le(r,"transpose");let s=r.shape.length,a=new Array(s);for(let d=0;d<a.length;d++)a[d]=r.shape[o[d]];let l=i.data.get(r.dataId).values,c=xb(l,r.shape,r.dtype,o,a);return{dataId:i.write(c,a,r.dtype),shape:a,dtype:r.dtype}}var RZ={kernelName:Ha,backendName:"cpu",kernelFunc:Pn};function TV(t,n,e,i){let[r,o]=C.computeOutAndReduceShapes(t,i),s=ni(n,"int32"),a=x.makeZerosTypedArray(x.sizeFromShape(r),s),l=x.sizeFromShape(o);for(let c=0;c<a.length;++c){let u=c*l,d=1;for(let p=0;p<l;++p)d*=e[u+p];a[c]=d}return{outVals:a,outShape:r,outDtype:s}}function qFe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;le(r,"prod");let a=r.shape.length,l=x.parseAxisParam(o,r.shape),c=C.getAxesPermutation(l,a),u=l,d=r,p=[];c!=null&&(d=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),p.push(d),u=C.getInnerMostAxes(u.length,a));let h=e.data.get(d.dataId).values,{outVals:m,outShape:g,outDtype:f}=TV(d.shape,d.dtype,h,u),y=g;return s&&(y=C.expandShapeToKeepDim(g,l)),p.forEach(b=>e.disposeIntermediateTensorInfo(b)),e.makeTensorInfo(y,f,m)}var OZ={kernelName:Cd,backendName:"cpu",kernelFunc:qFe};function XFe(t,n,e){t.forEach((i,r)=>{if(i<0||i>=e){let o=x.indexToLoc(r,n.length,x.computeStrides(n)).join(",");throw new Error(`indices[${o}] = ${i} is not in [0, ${e})`)}})}function KFe(t,n){for(let e=0;e<t.length;++e){let i=t[e],r=e===t.length-1?n:t[e+1].length;if(i.length===0)throw new Error("Ragged splits may not be empty");if(i[0]<0)throw new Error("Ragged splits must be non-negative");if(i[i.length-1]>r)throw new Error("Ragged splits must not point past values");for(let o=1;o<i.length;++o)if(i[o-1]>i[o])throw new Error("Ragged splits must be sorted in ascending order")}}function YFe(t,n,e,i){let r=[],o=0,s=n.length-1+e.length,a=new Array(s).fill(null).map(()=>[0]);KFe(e,i);let l=1;for(let c=0;c<n.length-1;++c){l*=n[c];let u=n[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let p=0;p<e.length;++p){let h=e[p],m=p+n.length-1;if(m>=0){let g=a[m],f=g[g.length-1]-h[u];for(let y=u;y<d;++y)a[m].push(h[y+1]+f)}u=h[u],d=h[d]}d!==u&&(r.push([u,d]),o+=d-u)}return{outSplits:a,valueSlices:r,numValues:o}}function QFe(t){let n=[];for(let e=0;e<t.length;++e){let i=t[e].length,r=x.getArrayFromDType("int32",i);n.push(r),t[e].forEach((o,s)=>r[s]=o)}return n}function FZ(t,n){let e=t.slice(0,n);for(;e.length<n;)e.push(1);for(let i=n;i<t.length;i++)e[n-1]*=t[i];return e}function ZFe(t,n,e,i,r,o){let s=FZ(n,2)[1],a=FZ(o,2)[1],l=0;for(let c of e)for(let u=c[0];u<c[1];++u){for(let d=0;d<i;++d)r[l*a+d]=t[u*s+d];++l}}function JFe(t,n,e,i,r){let o=n.slice();o[0]=r;let s=x.getArrayFromDType(e,x.sizeFromShape(o)),a=t.length,l=a===0?0:a/n[0];return ZFe(t,n,i,l,s,o),[s,o]}function rE(t,n,e,i,r,o,s,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(n[0].length===0)throw new Error("Split tensors must not be scalars");let l=n[0][0]-1;if(XFe(o,s,l),i.length===0)throw new Error("params.rank must be nonzero");let c=i[0],{outSplits:u,valueSlices:d,numValues:p}=YFe(o,s,t,c),h=QFe(u),m=JFe(e,i,r,d,p);return[h,m[0],m[1]]}var LZ=2147483647;function oE(t,n,e,i,r,o,s){if(n.length>1)throw new Error("starts must be a scalar or vector");if(r.length>1)throw new Error("limits must be a scalar or vector");if(s.length>1)throw new Error("deltas must be a scalar or vector");let a=n.length===0,l=r.length===0,c=s.length===0,u=[];a||u.push(n[0]),l||u.push(r[0]),c||u.push(s[0]);for(let f=1;f<u.length;++f)if(u[f]!==u[f-1])throw new Error("starts, limits, and deltas must have the same shape");let d=u.length===0?1:u[0],p=x.getArrayFromDType("int32",d+1);p[0]=0;for(let f=0;f<d;++f){let y=a?t[0]:t[f],b=l?i[0]:i[f],v=c?o[0]:o[f];if(v===0)throw new Error("Requires delta != 0");let _;if(v>0&&b<y||v<0&&b>y)_=0;else if(_=Math.ceil(Math.abs((b-y)/v)),_>LZ)throw new Error(`Requires ((limit - start) / delta) <= ${LZ}`);p[f+1]=p[f]+_}let h=p[d],m=x.getArrayFromDType(e,h),g=0;for(let f=0;f<d;++f){let y=p[f+1]-p[f],b=a?t[0]:t[f],v=c?o[0]:o[f];for(let _=0;_<y;++_)m[g++]=b,b+=v}return[p,m]}var Es=C.RowPartitionType,SV=class t{constructor(n,e,i,r,o,s,a,l,c,u){this.shape=n,this.shapeShape=e,this.values=i,this.valuesShape=r,this.valuesDType=o,this.defaultValue=s,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=C.getRowPartitionTypesHelper(u),this.raggedRank=C.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(n){return this.rowPartitionTypes[0]===Es.FIRST_DIM_SIZE?this.rowPartitionTypes[n+1]:this.rowPartitionTypes[n]}getRowPartitionTensor(n){return this.rowPartitionTypes[0]===Es.FIRST_DIM_SIZE?this.rowPartitionValues[n+1]:this.rowPartitionValues[n]}getMaxWidth(n){let e=this.getRowPartitionTensor(n-1);switch(this.getRowPartitionTypeByDimension(n-1)){case Es.VALUE_ROWIDS:return t.getMaxWidthValueRowID(e);case Es.ROW_SPLITS:return t.getMaxWidthRowSplit(e);default:throw new Error(`Cannot handle partition type ${Es[this.getRowPartitionTypeByDimension(n-1)]}`)}}static getMaxWidthRowSplit(n){let e=n.length;if(e===0||e===1)return 0;let i=0;for(let r=0;r<e-1;++r){let o=n[r+1]-n[r];o>i&&(i=o)}return i}static getMaxWidthValueRowID(n){let e=n.length;if(e===0)return 0;let i=0,r=n[0],o=0;for(let s=1;s<e;++s){let a=n[s];a!==r&&(r=a,o=Math.max(s-i,o),i=s)}return Math.max(e-i,o)}tensorShapeFromTensor(n,e,i=!0){if(e.length===0){if(n[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return $Z(n,i)}calculateOutputSize(n){let e=this.valuesShape,i=this.defaultValueShape;C.validateDefaultValueShape(i,e);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),s=C.combineRaggedTensorToTensorShapes(this.raggedRank,r,e);s[0]<0&&(s[0]=n);for(let a=1;a<=this.raggedRank;++a)s[a]<0&&(s[a]=this.getMaxWidth(a));return s}calculateFirstParentOutputIndex(n,e,i){let r=Math.min(n,i),o=[],s=0;for(let a=0;a<r;++a,s+=e)o.push(s);for(let a=r;a<n;++a)o.push(-1);return x.assert(o.length===n,()=>"Final length of result must be equal to firstDimension."),o}calculateOutputIndexRowSplit(n,e,i,r){let o=n.length,s=[];for(let a=0;a<o-1;++a){let l=n[a+1]-n[a],c=Math.min(r,l),u=e[a];u===-1&&(c=0);for(let d=0;d<c;++d)s.push(u),u+=i;for(let d=0;d<l-c;++d)s.push(-1)}if(o>0&&s.length!==n[o-1])throw new Error("Invalid row split size.");return s}calculateOutputIndexValueRowID(n,e,i,r){let o=n.length,s=[];if(o===0)return[];let a=0,l=n[0];if(l>=e.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${e.length}`);let c=e[l];s.push(c);for(let u=1;u<o;++u){let d=n[u];if(d===l)c>=0&&(++a,a<r?c+=i:c=-1);else{if(a=0,l=d,d>=e.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${e.length}`);c=e[d]}s.push(c)}if(s.length!==n.length)throw new Error("Invalid row ids.");return s}calculateOutputIndex(n,e,i,r){let o=this.getRowPartitionTensor(n),s=this.getRowPartitionTypeByDimension(n);switch(s){case Es.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(o,e,i,r);case Es.ROW_SPLITS:if(o.length-1>e.length)throw new Error(`Row partition size is greater than output size: ${o.length-1} > ${e.length}`);return this.calculateOutputIndexRowSplit(o,e,i,r);default:throw new Error(`Unsupported partition type: ${Es[s]}`)}}getFirstDimensionSize(){let n=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");let e=this.rowPartitionTypes[0];switch(e){case Es.FIRST_DIM_SIZE:return n[0];case Es.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case Es.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${Es[e]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),i=this.calculateOutputSize(e),r=new Array(this.raggedRank+1);r[r.length-1]=1;for(let l=r.length-2;l>=0;--l)r[l]=r[l+1]*i[l+1];let o=$Z(i,!1),s=x.getArrayFromDType(this.valuesDType,x.sizeFromShape(o));if(r[0]*i[0]>0){let l=this.calculateFirstParentOutputIndex(e,r[0],i[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,r[c],i[c]);this.setOutput(this.raggedRank,l,s,o)}return[o,s]}setOutput(n,e,i,r){if(i.length===0)return;let o=this.values,s=i,a=r.slice();a=a.slice(n+1);let l=x.sizeFromShape(a),c=e.length,u=this.defaultValue;if(u.length!==l&&u.length!==1){let m=this.defaultValueShape;W(()=>{let g=$(u,m);u=zc(g,a).dataSync()})}let d=0,p=0,h=0;for(let m=0;m<=c;++m){let g=m<c?e[m]:-1;if(g===h){++h;continue}if(p<h){let f=o.subarray(d*l),y=s.subarray(p*l),b=(h-p)*l;PZ(y,f,b)}if(m>=c){let f=i.length;g=Math.floor(f/l)}if(g>h)if(this.defaultValue.length===1)s.subarray(h*l,g*l).fill(this.defaultValue[0]),h=g;else for(;g>h;){let f=s.slice(h*l);PZ(f,u,l),++h}g<0?(d=m+1,p=h):(d=m,p=h,h=p+1)}}};function PZ(t,n,e){for(let i=0;i<e;i++)t[i]=n[i]}function $Z(t,n){let e=[];for(let i of t){if(i<0){if(!n)throw new Error(`Dimension ${i} must be >= 0`);if(i<-1)throw new Error(`Dimension ${i} must be >= -1`);i=-1}e.push(i)}return e}function sE(t,n,e,i,r,o,s,a,l,c){return new SV(t,n,e,i,r,o,s,a,l,c).compute()}function aE(t,n,e,i){let r=t===n,o=t<n&&e<0,s=n<t&&e>1;if(r||o||s)return x.makeZerosTypedArray(0,i);let a=Math.abs(Math.ceil((n-t)/e)),l=x.makeZerosTypedArray(a,i);n<t&&e===1&&(e=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+e;return l}var kV=Ei(t=>1/Math.sqrt(t)),e2e=eo(Tc,kV),VZ={kernelName:Tc,backendName:"cpu",kernelFunc:e2e};function aa(t,n,e,i,r,o,s,a,l,c){let u=[i/r,r],d=t.values,p=n.values;if(i===0)return Ge(e,n.dtype);let h=l instanceof tn?l:Ge(u,n.dtype);typeof l=="string"||typeof l=="number"?h.values.fill(l):typeof l=="boolean"&&h.values.fill(+l);for(let m=0;m<o;m++){let g=[],f=0;for(let y=0;y<s;y++){let b=d[m*s+y];g.push(b),f+=b*a[y]}if(f<0||f>=i/r)throw new Error(`Invalid indices: ${g} does not index into ${e}`);for(let y=0;y<r;y++)c?h.values[f*r+y]+=p[m*r+y]:h.values[f*r+y]=n.rank===0?p[0]:p[m*r+y]}return h}var BZ=Ei(t=>1/(1+Math.exp(-t))),IV=tt(Dc,t=>1/(1+Math.exp(-t))),zZ={kernelName:Dc,backendName:"cpu",kernelFunc:IV};function EV(t,n,e,i,r){let o=Ti.isSliceContinous(i,n,e),s=x.sizeFromShape(e),a=x.computeStrides(i);if(o){let d=Ti.computeFlatOffset(n,a);return r==="string"?t.slice(d,d+s):t.subarray(d,d+s)}let l=r==="string"?C.fromUint8ToStringArray(t):t,c=Ge(i,r,l),u=Ge(e,r);for(let d=0;d<u.size;++d){let p=u.indexToLoc(d),h=p.map((m,g)=>m+n[g]);u.set(c.get(...h),...p)}return r==="string"?C.fromStringArrayToUint8(u.values):u.values}function Ds(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,size:s}=i;le(r,"slice");let[a,l]=Ti.parseSliceParams(r,o,s);Ti.assertParamsValid(r,a,l);let c=e.data.get(r.dataId).values,u=EV(c,a,l,r.shape,r.dtype);return e.makeTensorInfo(l,r.dtype,u)}var GZ={kernelName:Dd,backendName:"cpu",kernelFunc:Ds};function lE(t,n,e,i,r,o,s){let a=n[0],l=o[0],c=new Array(l),u=new Array(a),d=n[1];if(l===0){if(a!==0)throw new Error(C.getSparseFillEmptyRowsIndicesDenseShapeMismatch(a));let f=x.getArrayFromDType(e,0),y=x.getArrayFromDType(r,0);return[f,[0,d],y,c,u]}let p=!0,h=0,m=new Array(l).fill(0);for(let f=0;f<a;++f){let y=t[f*d];if(y<0)throw new Error(C.getSparseFillEmptyRowsNegativeIndexErrorMessage(f,y));if(y>=l)throw new Error(C.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(f,y,l));++m[y],p=p&&y>=h,h=y}let g=!0;for(let f=0;f<l;++f){let y=m[f]===0;c[f]=y,g=g&&!y,m[f]=Math.max(m[f],1),f>0&&(m[f]+=m[f-1])}if(g&&p){let f=t,y=i;for(let b=0;b<a;++b)u[b]=b;return[f,[a,d],y,c,u]}else{let f=m[l-1],y=x.getArrayFromDType(e,f*d),b=x.getArrayFromDType(r,f),v=new Array(l).fill(0);for(let _=0;_<a;++_){let w=t[_*d],T=v[w],D=(w===0?0:m[w-1])+T;v[w]++;for(let N=0;N<d;++N)y[D*d+N]=t[_*d+N];b[D]=i[_],u[_]=D}for(let _=0;_<l;++_)if(v[_]===0){let T=_===0?0:m[_-1];y[T*d+0]=_;for(let D=1;D<d;++D)y[T*d+D]=0;b[T]=s}return[y,[f,d],b,c,u]}}function cE(t,n,e,i,r){let o=x.sizeFromShape(i),s=n[0],a=r.length,l=[],c=1,u=-1;for(let f=0;f<a;++f){let y=r[f];if(y===-1){if(u!==-1)throw new Error(C.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(u,f));u=f,l.push(1)}else{if(y<0)throw new Error(C.getSparseReshapeNegativeOutputDimErrorMessage(f,y));c*=y,l.push(y)}}if(u!==-1){if(c<=0)throw new Error(C.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let f=Math.trunc(o/c);if(c*f!==o)throw new Error(C.getSparseReshapeInputOutputMultipleErrorMessage(i,l));l[u]=f}if(x.sizeFromShape(l)!==o)throw new Error(C.getSparseReshapeInputOutputMismatchErrorMessage(i,l));let p=i.length,h=[];if(p>0){h[p-1]=1;for(let f=p-2;f>=0;--f)h[f]=h[f+1]*i[f+1]}let m=[];if(a>0){m[a-1]=1;for(let f=a-2;f>=0;--f)m[f]=m[f+1]*l[f+1]}let g=x.getArrayFromDType(e,s*a);for(let f=0;f<s;++f){let y=0;for(let b=0;b<p;++b)y+=t[f*p+b]*h[b];for(let b=0;b<a;++b)g[f*a+b]=Math.trunc(y/m[b]),y%=m[b]}return[g,[s,a],l]}function vb(t,n,e,i,r,o=!1,s=0){let a=i.length,l=[n[0],t.length/n[0]],c=l[1],d=a>0?r[a-1]+1:0;if(d<0)throw new Error(C.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=n.slice();p[0]=d;let h=p.reduce((v,_)=>v*_,1),m=x.getArrayFromDType(e,h);if(a===0)return d>0&&m.fill(s),[m,p];if(d<=0)throw new Error(C.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let g=0,f=1,y=0,b=r[g];for(;;){let v=0;if(f<a){if(v=r[f],b===v){++f;continue}if(b>=v)throw new Error(C.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(b<0||b>=d)throw new Error(C.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b,d));b>y&&m.fill(s,y*c,b*c);for(let _=g;_<f;++_){let w=i[_];if(w<0||w>=l[0])throw new Error(C.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_,i[_],l[0]));for(let T=0;T<c;T++)m[b*c+T]+=t[w*c+T]}if(o)for(let _=0;_<c;_++)m[b*c+_]/=f-g;if(g=f,++f,y=b+1,b=v,f>a)break}return y<d&&m.fill(s,y*c,d*c),[m,p]}var UZ=Ei(t=>Math.sqrt(t)),t2e=tt(Nc,t=>Math.sqrt(t)),HZ={kernelName:Nc,backendName:"cpu",kernelFunc:t2e};var DV=It((t,n)=>{let e=t-n;return e*e}),n2e=zt(Mc,DV),WZ={kernelName:Mc,backendName:"cpu",kernelFunc:n2e};var AV=Ei((t,n)=>{let{pattern:e,replaceGlobal:i,rewrite:r}=n;return t.replace(new RegExp(e,i?"g":""),r)}),i2e=eo(w0,AV),jZ={kernelName:w0,backendName:"cpu",kernelFunc:i2e};function uE(t,n,e,i){let r=Ge(t,n.dtype);for(let o=0;o<r.size;o++){let s=r.indexToLoc(o),a=new Array(s.length);for(let l=0;l<a.length;l++)a[l]=s[l]*e[l]+i[l];r.set(n.get(...a),...s)}return r}var NV=class{constructor(n,e,i,r,o,s){this.separator=x.encodeString(n),this.nGramWidths=e,this.leftPad=x.encodeString(i),this.rightPad=x.encodeString(r),this.padWidth=o,this.preserveShort=s}getPadWidth(n){return Math.min(this.padWidth<0?n-1:this.padWidth,n-1)}getNumNGrams(n,e){let i=this.getPadWidth(e);return Math.max(0,n+2*i-e+1)}createNGrams(n,e,i,r,o,s){for(let a=0;a<o;++a){let l=this.getPadWidth(s),c=Math.max(0,l-a),u=Math.max(0,l-(o-(a+1))),d=s-(c+u),p=e+(c>0?0:a-l),h=0;h+=c*this.leftPad.length;for(let b=0;b<d;++b)h+=n[p+b].length;h+=u*this.rightPad.length;let m=c+u+d-1;h+=m*this.separator.length,i[r+a]=new Uint8Array(h);let g=i[r+a],f=0,y=b=>b.forEach(v=>g[f++]=v);for(let b=0;b<c;++b)y(this.leftPad),y(this.separator);for(let b=0;b<d-1;++b)y(n[p+b]),y(this.separator);if(d>0){y(n[p+d-1]);for(let b=0;b<u;++b)y(this.separator),y(this.rightPad)}else{for(let b=0;b<u-1;++b)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(n,e){let i=n.length,r=e.length;if(r>0){let l=e[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<r;++c){let u=e[c]>=l;if(u=u&&e[c]<=i,!u)throw new Error(`Invalid split value ${e[c]}, must be in [${l}, ${i}]`);l=e[c]}if(l!==i)throw new Error(`Last split value must be data size. Expected ${i}, got ${l}`)}let o=r-1,s=x.getArrayFromDType("int32",r);if(i===0||r===0){let l=new Array(i);for(let c=0;c<=o;++c)s[c]=0;return[l,s]}s[0]=0;for(let l=1;l<=o;++l){let c=e[l]-e[l-1],u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),s[l]=s[l-1]+u}let a=new Array(s[o]);for(let l=0;l<o;++l){let c=e[l],u=s[l];if(this.nGramWidths.forEach(d=>{let p=e[l+1]-e[l],h=this.getNumNGrams(p,d);this.createNGrams(n,c,a,u,h,d),u+=h}),this.preserveShort&&u===s[l]){let d=e[l+1]-e[l];if(d===0)continue;let p=d+2*this.padWidth;this.createNGrams(n,c,a,u,1,p)}}return[a,s]}};function dE(t,n,e,i,r,o,s,a){return new NV(e,i,r,o,s,a).compute(t,n)}function r2e(t,n,e,i){if(!t.length)return;if(n.length===0){for(let o=0;o<t.length;++o)i.push(t.subarray(o,o+1));return}if(n.length===1){let o=n[0],s=t.indexOf(o);for(;s!==-1;){let a=t.subarray(0,s);(!e||a.length!==0)&&i.push(a),t=t.subarray(s+1),s=t.indexOf(o)}(!e||t.length!==0)&&i.push(t);return}let r=0;for(let o=0;o<t.length+1;o++)if(o===t.length||n.indexOf(t[o])!==-1){let s=t.subarray(r,o);(!e||s.length!==0)&&i.push(s),r=o+1}}function pE(t,n,e){let i=t.length,r=[],o=0,s=0,a=new Array(i);for(let p=0;p<i;++p){let h=r.length;r2e(t[p],n,e,r);let m=r.length-h;a[p]=m,o+=m,s=Math.max(s,m)}let l=x.getArrayFromDType("int32",o*2),c=new Array(o),u=[i,s],d=0;for(let p=0;p<i;++p)for(let h=0;h<a[p];++h)l[d*2]=p,l[d*2+1]=h,c[d]=r[d],++d;return[l,c,u]}function hE(t,n){let e=x.getArrayFromDType("int32",t.length);for(let i=0;i<t.length;++i)e[i]=x.fingerPrint64(t[i]).modulo(n).getLowBitsUnsigned();return e}var MV=It((t,n)=>t-n),o2e=yb((t,n,e,i)=>({real:t-e,imag:n-i})),b_=zt(Rc,MV,o2e),qZ={kernelName:Rc,backendName:"cpu",kernelFunc:b_};function mE(t,n){let e=new Array(t.rank);for(let r=0;r<e.length;r++)e[r]=t.shape[r]*n[r];let i=Ge(e,t.dtype);for(let r=0;r<i.values.length;++r){let o=i.indexToLoc(r),s=new Array(t.rank);for(let l=0;l<s.length;l++)s[l]=o[l]%t.shape[l];let a=t.locToIndex(s);i.values[r]=t.values[a]}return i}var x_=(t,n)=>{let e=n.value-t.value;return e===0?t.index-n.index:e};function XZ(t,n,e=0,i=t.length-1){for(;i>e;){if(i-e>600){let a=i-e+1,l=n-e+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),p=Math.max(e,Math.floor(n-l*u/a+d)),h=Math.min(i,Math.floor(n+(a-l)*u/a+d));XZ(t,n,p,h)}let r=t[n],o=e,s=i;for(x.swap(t,e,n),x_(t[i],r)>0&&x.swap(t,e,i);o<s;){for(x.swap(t,o,s),o++,s--;x_(t[o],r)<0;)o=o+1;for(;x_(t[s],r)>0;)s=s-1}x_(t[e],r)===0?x.swap(t,e,s):(s=s+1,x.swap(t,s,i)),s<=n&&(e=s+1),n<=s&&(i=s-1)}}function fE(t,n,e,i,r){let o=n[n.length-1],[s,a]=[t.length/o,o],l=x.getTypedArrayFromDType(e,s*i),c=x.getTypedArrayFromDType("int32",s*i);for(let d=0;d<s;d++){let p=d*a,h=t.subarray(p,p+a),m=new Array(h.length);h.forEach((b,v)=>m[v]={value:b,index:v}),i<m.length&&(XZ(m,i),m=m.slice(0,i)),r&&m.sort(x_);let g=d*i,f=l.subarray(g,g+i),y=c.subarray(g,g+i);for(let b=0;b<i;b++)f[b]=m[b].value,y[b]=m[b].index}let u=n.slice();return u[u.length-1]=i,[Ge(u,e,l),Ge(u,"int32",c)]}function gE(t,n,e,i){let r=x.parseAxisParam(n,e)[0],o=[1,e[0],1];for(let m=0;m<r;m++)o[0]*=e[m];o[1]=e[r];for(let m=r+1;m<e.length;m++)o[2]*=e[m];let s=new Map,a=new Int32Array(e[r]),l=new tn(o,i,t),c=[],u=o[0]===1&&o[2]===1;for(let m=0;m<e[r];m++){let g;if(u)g=t[m].toString();else{let y=[];for(let b=0;b<o[0];b++)for(let v=0;v<o[2];v++)y.push(l.get(b,m,v));g=y.join(",")}let f=s.get(g);if(f!=null)a[m]=f;else{let y=s.size;s.set(g,y),a[m]=y,c.push(m)}}let d=o.slice();d[1]=s.size;let p=new tn(d,i);c.forEach((m,g)=>{for(let f=0;f<o[0];f++)for(let y=0;y<o[2];y++)p.set(l.get(f,m,y),f,g,y)});let h=e.slice();return h[r]=d[1],{outputValues:p.values,outputShape:h,indices:a}}vk("cpu",()=>new cZ,1);var OV=tt(ic,t=>t>=0?t:Math.exp(t)-1),KZ={kernelName:ic,backendName:"cpu",kernelFunc:OV};function FV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{alpha:o}=i;le([r],"leakyRelu");let s=x.sizeFromShape(r.shape),a=e.data.get(r.dataId).values,l=x.getTypedArrayFromDType("float32",s);for(let c=0;c<a.length;c++)l[c]=a[c]<0?o*a[c]:a[c];return e.makeTensorInfo(r.shape,"float32",l)}var YZ={kernelName:cd,backendName:"cpu",kernelFunc:FV};var s2e=It((t,n)=>t<0?n*t:t);function LV(t){let{inputs:n,backend:e}=t,{x:i,alpha:r}=n;le([i,r],"prelu");let o=e.data.get(i.dataId).values,s=e.data.get(r.dataId).values,[a,l]=s2e(i.shape,r.shape,o,s,"float32");return e.makeTensorInfo(l,"float32",a)}var QZ={kernelName:wd,backendName:"cpu",kernelFunc:LV};var PV=tt(_c,t=>Math.max(0,t)),ZZ={kernelName:_c,backendName:"cpu",kernelFunc:PV};var $V=tt(wc,t=>Math.min(Math.max(0,t),6)),JZ={kernelName:wc,backendName:"cpu",kernelFunc:$V};function xm(t,n,e,i,r){if(e==="linear")return er({inputs:{x:n},backend:t});if(e==="relu")return PV({inputs:{x:n},backend:t});if(e==="elu")return OV({inputs:{x:n},backend:t});if(e==="relu6")return $V({inputs:{x:n},backend:t});if(e==="prelu")return LV({inputs:{x:n,alpha:i},backend:t});if(e==="leakyrelu")return FV({inputs:{x:n},backend:t,attrs:{alpha:r}});if(e==="sigmoid")return IV({inputs:{x:n},backend:t});throw new Error(`Activation ${e} has not been implemented for the CPU backend.`)}function Et(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{shape:o}=i,s=x.sizeFromShape(r.shape),a=x.inferFromImplicitShape(o,s),l=x.sizeFromShape(a);x.assert(s===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${r.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`),e.incRef(r.dataId);let c=e.data.get(r.dataId);if(c.complexTensorInfos!=null){let u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:r.dataId,shape:a,dtype:r.dtype}}var eJ={kernelName:Td,backendName:"cpu",kernelFunc:Et};function VV(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o}=n,{transposeA:s,transposeB:a}=i;le([r,o],"matMul");let l=r.shape.length,c=o.shape.length,u=s?r.shape[l-2]:r.shape[l-1],d=a?o.shape[c-1]:o.shape[c-2],p=s?r.shape[l-1]:r.shape[l-2],h=a?o.shape[c-2]:o.shape[c-1],m=r.shape.slice(0,-2),g=o.shape.slice(0,-2),f=x.sizeFromShape(m),y=x.sizeFromShape(g),v=wo.assertAndGetBroadcastShape(r.shape.slice(0,-2),o.shape.slice(0,-2)).concat([p,h]);x.assert(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${r.shape} and ${o.shape} and transposeA=${s} and transposeB=${a} must match.`);let _=s?[f,u,p]:[f,p,u],w=a?[y,h,d]:[y,d,h],T=Et({inputs:{x:r},backend:e,attrs:{shape:_}}),D=Et({inputs:{x:o},backend:e,attrs:{shape:w}}),N=s?T.shape[1]:T.shape[2],O=s?T.shape[2]:T.shape[1],P=a?D.shape[1]:D.shape[2],B=Math.max(f,y),K=e.data.get(T.dataId).values,X=e.data.get(D.dataId).values,Z=x.computeStrides(T.shape),te=x.computeStrides(D.shape),[U,j,q]=s?[Z[0],1,Z[1]]:[Z[0],Z[1],1],[Q,oe,ae]=a?[1,te[1],te[0]]:[te[1],1,te[0]],de=O*P,fe=Ge([B,O,P],T.dtype),ge=fe.values,xe=e.blockSize;for(let Ne=0;Ne<B;Ne++){let ve=Ne%f,Ue=Ne%y;for(let se=0;se<O;se+=xe){let we=Math.min(se+xe,O);for(let Ie=0;Ie<P;Ie+=xe){let ue=Math.min(Ie+xe,P);for(let mt=0;mt<N;mt+=xe){let lt=Math.min(mt+xe,N);for(let Dt=se;Dt<we;Dt++)for(let xt=Ie;xt<ue;xt++){let Fe=0;for(let ft=mt;ft<lt;ft++){let Mr=K[ve*U+Dt*j+ft*q],An=X[ft*Q+xt*oe+Ue*ae];Fe+=Mr*An}ge[Ne*de+(Dt*P+xt)]+=Fe}}}}}return e.disposeIntermediateTensorInfo(T),e.disposeIntermediateTensorInfo(D),e.makeTensorInfo(v,fe.dtype,fe.values)}var tJ={kernelName:Yu,backendName:"cpu",kernelFunc:VV};function a2e(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i,p,h,m,g=[];p=VV({inputs:{a:r,b:o},attrs:{transposeA:l,transposeB:c},backend:e}),s&&(h=tl({inputs:{a:p,b:s},backend:e}),g.push(p),p=h),u&&(m=xm(e,p,u,a,d),g.push(p),p=m);for(let y of g)e.disposeIntermediateTensorInfo(y);return p}var nJ={kernelName:Fh,backendName:"cpu",kernelFunc:a2e};var l2e=tt(Wl,t=>Math.acos(t)),iJ={kernelName:Wl,backendName:"cpu",kernelFunc:l2e};var c2e=tt(jl,t=>Math.acosh(t)),rJ={kernelName:jl,backendName:"cpu",kernelFunc:c2e};function u2e(t){let{inputs:n,backend:e}=t,i=n;le(n,"addN");let r=i.map(a=>e.data.get(a.dataId).values),o=Ge(i[0].shape,i[0].dtype),s=o.values;for(let a=0;a<i.length;a++){let l=r[a];for(let c=0;c<s.length;c++)s[c]+=l[c]}return e.makeTensorInfo(o.shape,o.dtype,o.values)}var oJ={kernelName:Vg,backendName:"cpu",kernelFunc:u2e};function d2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;le(r,"all");let a=x.parseAxisParam(o,r.shape),l=a,c=C.getAxesPermutation(l,r.shape.length),u=r;c!=null&&(u=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),l=C.getInnerMostAxes(l.length,r.shape.length)),C.assertAxesAreInnerMostDims("all",l,u.shape.length);let[d,p]=C.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),m=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,v=g[b];for(let _=0;_<h;++_){let w=g[b+_];v=v&&w}m[y]=v}c!=null&&e.disposeIntermediateTensorInfo(u);let f=e.makeTensorInfo(d,u.dtype,m);if(s){let y=C.expandShapeToKeepDim(d,a),b=Et({inputs:{x:f},backend:e,attrs:{shape:y}});return e.disposeIntermediateTensorInfo(f),b}return f}var sJ={kernelName:Bg,backendName:"cpu",kernelFunc:d2e};function p2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;le(r,"any");let a=x.parseAxisParam(o,r.shape),l=a,c=C.getAxesPermutation(l,r.shape.length),u=r;c!=null&&(u=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),l=C.getInnerMostAxes(l.length,r.shape.length)),C.assertAxesAreInnerMostDims("any",l,u.shape.length);let[d,p]=C.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),m=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,v=g[b];for(let _=0;_<h;++_){let w=g[b+_];v=v||w}m[y]=v}c!=null&&e.disposeIntermediateTensorInfo(u);let f=e.makeTensorInfo(d,u.dtype,m);if(s){let y=C.expandShapeToKeepDim(d,a),b=Et({inputs:{x:f},backend:e,attrs:{shape:y}});return e.disposeIntermediateTensorInfo(f),b}return f}var aJ={kernelName:zg,backendName:"cpu",kernelFunc:p2e};function h2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i;le(r,"argMax");let s=x.parseAxisParam(o,r.shape),a=C.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Pn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=C.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],C.assertAxesAreInnerMostDims("argMax",s,l.shape.length);let[u,d]=C.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),m=x.sizeFromShape(d),g=e.data.get(l.dataId).values;for(let f=0;f<h.length;++f){let y=f*m,b=g[y],v=0;for(let _=0;_<m;++_){let w=g[y+_];w>b&&(b=w,v=_)}h[f]=v}return c.forEach(f=>e.disposeIntermediateTensorInfo(f)),e.makeTensorInfo(u,"int32",h)}var lJ={kernelName:ju,backendName:"cpu",kernelFunc:h2e};function m2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i;le(r,"argMin");let s=x.parseAxisParam(o,r.shape),a=C.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Pn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=C.getInnerMostAxes(s.length,l.shape.length)),s=[s[0]],C.assertAxesAreInnerMostDims("argMin",s,l.shape.length);let[u,d]=C.computeOutAndReduceShapes(l.shape,s),p=x.sizeFromShape(u),h=x.makeZerosTypedArray(p,"int32"),m=x.sizeFromShape(d),g=e.data.get(l.dataId).values;for(let f=0;f<h.length;++f){let y=f*m,b=g[y],v=0;for(let _=0;_<m;++_){let w=g[y+_];w<b&&(b=w,v=_)}h[f]=v}return c.forEach(f=>e.disposeIntermediateTensorInfo(f)),e.makeTensorInfo(u,"int32",h)}var cJ={kernelName:qu,backendName:"cpu",kernelFunc:m2e};var f2e=tt(ql,t=>Math.asin(t)),uJ={kernelName:ql,backendName:"cpu",kernelFunc:f2e};var g2e=tt(Xl,t=>Math.asinh(t)),dJ={kernelName:Xl,backendName:"cpu",kernelFunc:g2e};var y2e=tt(Kl,t=>Math.atan(t)),pJ={kernelName:Kl,backendName:"cpu",kernelFunc:y2e};var b2e=It((t,n)=>Math.atan2(t,n)),x2e=zt(Ql,b2e),hJ={kernelName:Ql,backendName:"cpu",kernelFunc:x2e};var v2e=tt(Yl,t=>Math.atanh(t)),mJ={kernelName:Yl,backendName:"cpu",kernelFunc:v2e};function _b(t,n,e,i,r,o){let s=r.strideHeight,a=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,u=r.effectiveFilterHeight,d=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=Ge(r.outShape,e),f=g.values,y=r.outShape[1]*r.outShape[2]*r.outShape[3],b=r.outShape[2]*r.outShape[3],v=r.outShape[3];for(let _=0;_<r.batchSize;++_){let w=_*y,T=_*i[0];for(let D=0;D<r.inChannels;++D)for(let N=0;N<r.outHeight;++N){let O=N*s-p,P=Math.max(0,O),B=Math.min(r.inHeight,u+O),K=w+N*b;for(let X=0;X<r.outWidth;++X){let Z=X*a-h,te=Math.max(0,Z),U=Math.min(r.inWidth,d+Z),j=m,q=0,Q=0;for(let ae=P;ae<B;ae+=l){let de=T+ae*i[1];for(let fe=te;fe<U;fe+=c){let ge=de+fe*i[2],xe=t[ge+D];o==="max"&&xe>j?j=xe:o==="avg"&&(q+=xe,Q++)}if(isNaN(j))break}let oe=K+X*v+D;f[oe]=o==="avg"?q/Q:j}}}return g}function yE(t,n,e,i,r=!1,o=!1){let s=Ge(i.outShape,"int32"),a=i.strideHeight,l=i.strideWidth,c=i.dilationHeight,u=i.dilationWidth,d=i.effectiveFilterHeight,p=i.effectiveFilterWidth,h=i.padInfo.top,m=i.padInfo.left,g=Ge(n,e,t);for(let f=0;f<i.batchSize;++f)for(let y=0;y<i.inChannels;++y)for(let b=0;b<i.outHeight;++b){let v=b*a-h,_=v;for(;_<0;)_+=c;let w=Math.min(i.inHeight,d+v);for(let T=0;T<i.outWidth;++T){let D=T*l-m,N=D;for(;N<0;)N+=u;let O=Math.min(i.inWidth,p+D),P=Number.NEGATIVE_INFINITY,B=-1;for(let K=_;K<w;K+=c){let X=K-v;for(let Z=N;Z<O;Z+=u){let te=Z-D,U=g.get(f,K,Z,y);U>P&&(P=U,r?B=o?((f*i.inHeight+K)*i.inWidth+Z)*i.inChannels+y:(K*i.inWidth+Z)*i.inChannels+y:B=X*p+te)}}s.set(B,f,b,T,y)}}return s}function bE(t,n,e,i,r,o){let s=r.strideDepth,a=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,u=r.dilationHeight,d=r.dilationWidth,p=r.effectiveFilterDepth,h=r.effectiveFilterHeight,m=r.effectiveFilterWidth,g=r.padInfo.front,f=r.padInfo.top,y=r.padInfo.left,b=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=Ge(r.outShape,e),_=v.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],T=r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[3]*r.outShape[4],N=r.outShape[4];for(let O=0;O<r.batchSize;++O){let P=O*w,B=O*i[0];for(let K=0;K<r.inChannels;++K)for(let X=0;X<r.outDepth;++X){let Z=X*s-g,te=Z;for(;te<0;)te+=c;let U=Math.min(r.inDepth,p+Z),j=P+X*T;for(let q=0;q<r.outHeight;++q){let Q=q*a-f,oe=Q;for(;oe<0;)oe+=u;let ae=Math.min(r.inHeight,h+Q),de=j+q*D;for(let fe=0;fe<r.outWidth;++fe){let ge=fe*l-y,xe=ge;for(;xe<0;)xe+=d;let Ne=Math.min(r.inWidth,m+ge),ve=de+fe*N,Ue=b,se=0,we=0;for(let ue=te;ue<U;ue+=c){let mt=B+ue*i[1];for(let lt=oe;lt<ae;lt+=u){let Dt=mt+lt*i[2];for(let xt=xe;xt<Ne;xt+=d){let Fe=Dt+xt*i[3],ft=t[Fe+K];if(o==="max"&&ft>Ue?Ue=ft:o==="avg"&&(se+=ft,we++),isNaN(Ue))break}if(isNaN(Ue))break}if(isNaN(Ue))break}let Ie=ve+K;_[Ie]=o==="avg"?se/Math.max(we,1):Ue}}}}return v}function fJ(t,n){let e=Ge(n.outShape,"int32"),i=n.strideDepth,r=n.strideHeight,o=n.strideWidth,s=n.dilationDepth,a=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,u=n.effectiveFilterHeight,d=n.effectiveFilterWidth,p=n.padInfo.front,h=n.padInfo.top,m=n.padInfo.left;for(let g=0;g<n.batchSize;++g)for(let f=0;f<n.inChannels;++f)for(let y=0;y<n.outDepth;++y){let b=y*i-p,v=b;for(;v<0;)v+=s;let _=Math.min(n.inDepth,c+b);for(let w=0;w<n.outHeight;++w){let T=w*r-h,D=T;for(;D<0;)D+=a;let N=Math.min(n.inHeight,u+T);for(let O=0;O<n.outWidth;++O){let P=O*o-m,B=P;for(;B<0;)B+=l;let K=Math.min(n.inWidth,d+P),X=Number.NEGATIVE_INFINITY,Z=-1;for(let te=v;te<_;te+=s){let U=te-b;for(let j=D;j<N;j+=a){let q=j-T;for(let Q=B;Q<K;Q+=l){let oe=Q-P,ae=t.get(g,te,j,Q,f);ae>=X&&(X=ae,Z=U*u*d+q*u+oe)}}}e.set(Z,g,y,w,O,f)}}}return e}function _2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;le(r,"avgPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;x.assert(C.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=C.computePool2DInfo(r.shape,o,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=er({inputs:{x:r},backend:e});else{let p=e.data.get(r.dataId).values,h=x.computeStrides(r.shape),m=_b(p,r.shape,r.dtype,h,u,"avg");d=e.makeTensorInfo(u.outShape,r.dtype,m.values)}return d}var gJ={kernelName:Xu,backendName:"cpu",kernelFunc:_2e};function w2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=i;le(r,"avgPool3d");let u=C.computePool3DInfo(r.shape,o,s,1,a,l,c),d=e.data.get(r.dataId).values,p=bE(d,r.shape,r.dtype,x.computeStrides(r.shape),u,"avg");return e.makeTensorInfo(p.shape,"float32",p.values)}var yJ={kernelName:Ku,backendName:"cpu",kernelFunc:w2e};function C2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=i;le([r,o],"avgPool3DGrad");let u=C.computePool3DInfo(o.shape,s,a,1,l,c),d=u.strideDepth,p=u.strideHeight,h=u.strideWidth,m=u.filterDepth,g=u.filterHeight,f=u.filterWidth,y=u.dilationDepth,b=u.dilationHeight,v=u.dilationWidth,_=u.effectiveFilterDepth,w=u.effectiveFilterHeight,T=u.effectiveFilterWidth,D=_-1-u.padInfo.front,N=T-1-u.padInfo.left,O=w-1-u.padInfo.top,P=Ge(o.shape,"float32"),B=1/(m*g*f),K=e.bufferSync(r);for(let X=0;X<u.batchSize;++X)for(let Z=0;Z<u.inChannels;++Z)for(let te=0;te<u.inDepth;++te)for(let U=0;U<u.inHeight;++U)for(let j=0;j<u.inWidth;++j){let q=te-D,Q=U-O,oe=j-N,ae=0;for(let de=0;de<_;de+=y){let fe=(q+de)/d;if(!(fe<0||fe>=u.outDepth||Math.floor(fe)!==fe))for(let ge=0;ge<w;ge+=b){let xe=(Q+ge)/p;if(!(xe<0||xe>=u.outHeight||Math.floor(xe)!==xe))for(let Ne=0;Ne<T;Ne+=v){let ve=(oe+Ne)/h;if(ve<0||ve>=u.outWidth||Math.floor(ve)!==ve)continue;let Ue=K.get(X,fe,xe,ve,Z);ae+=Ue}}}P.set(ae*B,X,te,U,j,Z)}return e.makeTensorInfo(P.shape,P.dtype,P.values)}var bJ={kernelName:Ug,backendName:"cpu",kernelFunc:C2e};function T2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o;le([r,o],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=i,u=C.computePool2DInfo(s.shape,a,l,1,c),d=u.strideHeight,p=u.strideWidth,h=u.filterHeight,m=u.filterWidth,g=u.dilationHeight,f=u.dilationWidth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,v=b-1-u.padInfo.left,_=y-1-u.padInfo.top,w=Ge(s.shape,"float32"),T=1/(h*m),D=e.data.get(r.dataId).values,N=Ge(r.shape,"float32",D);for(let O=0;O<u.batchSize;++O)for(let P=0;P<u.inChannels;++P)for(let B=0;B<u.inHeight;++B)for(let K=0;K<u.inWidth;++K){let X=B-_,Z=K-v,te=0;for(let U=0;U<y;U+=g){let j=(X+U)/d;if(!(j<0||j>=u.outHeight||Math.floor(j)!==j))for(let q=0;q<b;q+=f){let Q=(Z+q)/p;if(Q<0||Q>=u.outWidth||Math.floor(Q)!==Q)continue;let oe=N.get(O,j,Q,P);te+=oe}}w.set(te*T,O,B,K,P)}return e.makeTensorInfo(w.shape,w.dtype,w.values)}var xJ={kernelName:Gg,backendName:"cpu",kernelFunc:T2e};function S2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,scale:o,offset:s,mean:a,variance:l}=n;x.assert(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||a.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),le([r,a,l,o,s],"batchNorm");let{varianceEpsilon:c}=i;c==null&&(c=.001);let u=e.data.get(r.dataId).values,d=e.data.get(a.dataId).values,p=e.data.get(l.dataId).values,h=o?e.data.get(o.dataId).values:new Float32Array([1]),m=s?e.data.get(s.dataId).values:new Float32Array([0]),g=new Float32Array(u.length),f=m.length,y=h.length,b=p.length,v=d.length,_=0,w=0,T=0,D=0;for(let N=0;N<u.length;++N)g[N]=m[_++]+(u[N]-d[w++])*h[T++]/Math.sqrt(p[D++]+c),_>=f&&(_=0),w>=v&&(w=0),T>=y&&(T=0),D>=b&&(D=0);return e.makeTensorInfo(r.shape,r.dtype,g)}var vJ={kernelName:ad,backendName:"cpu",kernelFunc:S2e};function k2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,crops:s}=i;le([r],"batchToSpaceND");let a=o.reduce((y,b)=>y*b),l=C.getReshaped(r.shape,o,a),c=C.getPermuted(l.length,o.length),u=C.getReshapedPermuted(r.shape,o,a),d=C.getSliceBeginCoords(s,o.length),p=C.getSliceSize(u,s,o.length),h=Et({inputs:{x:r},backend:e,attrs:{shape:l}}),m=Pn({inputs:{x:h},backend:e,attrs:{perm:c}}),g=Et({inputs:{x:m},backend:e,attrs:{shape:u}}),f=Ds({inputs:{x:g},backend:e,attrs:{begin:d,size:p}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),f}var _J={kernelName:Qu,backendName:"cpu",kernelFunc:k2e};function I2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s}=i,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=bb(a,l,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,c)}var wJ={kernelName:Hg,backendName:"cpu",kernelFunc:I2e};function E2e(t){let{inputs:n,backend:e}=t,{s0:i,s1:r}=n,o=e.data.get(i.dataId).values,s=e.data.get(r.dataId).values,a=C.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var CJ={kernelName:G1,backendName:"cpu",kernelFunc:E2e};var D2e=tt(Jl,(t,n)=>{let e=n;return t>e.clipValueMax?e.clipValueMax:t<e.clipValueMin?e.clipValueMin:t}),TJ={kernelName:Jl,backendName:"cpu",kernelFunc:D2e};var A2e=t=>{let{x:n}=t.inputs,e=t.backend,i=new Float32Array(x.sizeFromShape(n.shape)),r=e.data.get(n.dataId),o=r.complexTensorInfos.real,s=r.complexTensorInfos.imag,a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values;for(let c=0;c<a.length;c++){let u=a[c],d=l[c];i[c]=Math.hypot(u,d)}return e.makeOutput(i,n.shape,"float32")},SJ={kernelName:Zu,backendName:"cpu",kernelFunc:A2e};function nl(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.data.get(i.dataId).complexTensorInfos.imag,o=e.data.get(r.dataId).values;return e.makeTensorInfo(r.shape,r.dtype,o)}var kJ={kernelName:ay,backendName:"cpu",kernelFunc:nl};function ep(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i,o=x.parseAxisParam(r,n[0].shape)[0],s=n.map(g=>g.shape);C.assertParamsConsistent(s,o);let a=C.computeOutShape(n.map(g=>g.shape),o);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(g=>x.sizeFromShape(g.shape)>0);if(l.length===1)return er({inputs:{x:l[0]},backend:e});if(l[0].dtype==="complex64"){let g=l.map(_=>ks({inputs:{input:_},backend:e})),f=l.map(_=>nl({inputs:{input:_},backend:e})),y=ep({inputs:g,backend:e,attrs:{axis:o}}),b=ep({inputs:f,backend:e,attrs:{axis:o}}),v=gi({inputs:{real:y,imag:b},backend:e});return g.forEach(_=>e.disposeIntermediateTensorInfo(_)),f.forEach(_=>e.disposeIntermediateTensorInfo(_)),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(b),v}let c=l.map(g=>{let y=[-1,x.sizeFromShape(g.shape.slice(o))];return Et({inputs:{x:g},backend:e,attrs:{shape:y}})}),u=c.map(g=>({vals:e.data.get(g.dataId).values,shape:g.shape}));a=C.computeOutShape(c.map(g=>g.shape),1);let d=c[0].shape[0]===1,p=JI(u,a,n[0].dtype,d),h=C.computeOutShape(l.map(g=>g.shape),o),m=e.makeTensorInfo(h,n[0].dtype,p);return c.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var IJ={kernelName:Ju,backendName:"cpu",kernelFunc:ep};function BV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i;le([r,o],"conv2d");let d=C.convertConv2DDataFormat(l),p=C.computeConv2DInfo(r.shape,o.shape,s,c,a,u,!1,d),h=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,f=p.dilationWidth,y=p.padInfo.left,b=p.padInfo.top,v=p.dataFormat==="channelsLast",_=new tn(p.outShape,r.dtype),w=x.computeStrides(r.shape),T=x.computeStrides(o.shape),D=w[0],N=v?w[1]:w[2],O=v?w[2]:1,P=v?1:w[1],B=_.strides[0],K=v?_.strides[1]:_.strides[2],X=v?_.strides[2]:1,Z=v?1:_.strides[1],te=e.data.get(r.dataId).values,U=e.data.get(o.dataId).values,j=_.values;for(let q=0;q<p.batchSize;++q){let Q=q*D,oe=q*B;for(let ae=0;ae<p.outHeight;++ae){let de=oe+ae*K,fe=ae*p.strideHeight-b;for(let ge=0;ge<h;++ge){let xe=fe+ge*g;if(xe<0||xe>=p.inHeight)continue;let Ne=ge*T[0],ve=Q+xe*N;for(let Ue=0;Ue<p.outWidth;++Ue){let se=de+Ue*X,we=Ue*p.strideWidth-y;for(let Ie=0;Ie<m;++Ie){let ue=we+Ie*f;if(ue<0||ue>=p.inWidth)continue;let mt=Ne+Ie*T[1],lt=ve+ue*O,Dt=mt;for(let xt=0;xt<p.inChannels;++xt){let Fe=te[lt+xt*P];for(let ft=0;ft<p.outChannels;++ft)j[se+ft*Z]+=Fe*U[Dt+ft];Dt+=p.outChannels}}}}}}return e.makeTensorInfo(_.shape,_.dtype,j)}var EJ={kernelName:ed,backendName:"cpu",kernelFunc:BV};function N2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i;le([r,o],"conv2dBackpropFilter");let d=C.convertConv2DDataFormat(l),p=C.computeConv2DInfo(r.shape,u,s,1,a,c,!1,d),{strideHeight:h,strideWidth:m,filterHeight:g,filterWidth:f}=p,y=p.dataFormat==="channelsLast",b=new tn(p.filterShape,"float32"),v=p.padInfo.left,_=p.padInfo.top,w=e.data.get(r.dataId).values,T=e.data.get(o.dataId).values,D=new tn(r.shape,r.dtype,w),N=new tn(o.shape,o.dtype,T);for(let O=0;O<g;++O){let P=Math.max(0,Math.ceil((_-O)/h)),B=Math.min(p.outHeight,(p.inHeight+_-O)/h);for(let K=0;K<f;++K){let X=Math.max(0,Math.ceil((v-K)/m)),Z=Math.min(p.outWidth,(p.inWidth+v-K)/m);for(let te=0;te<p.inChannels;++te)for(let U=0;U<p.outChannels;++U){let j=0;for(let q=0;q<p.batchSize;++q)for(let Q=P;Q<B;++Q){let oe=O+Q*h-_;for(let ae=X;ae<Z;++ae){let de=K+ae*m-v;y?j+=D.get(q,oe,de,te)*N.get(q,Q,ae,U):j+=D.get(q,te,oe,de)*N.get(q,U,Q,ae)}}b.set(j,O,K,te,U)}}}return e.makeTensorInfo(b.shape,b.dtype,b.values)}var DJ={kernelName:jg,backendName:"cpu",kernelFunc:N2e};function M2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i;le([r,o],"conv2dBackpropInput");let d=x.computeStrides(o.shape),p=x.computeStrides(r.shape),h=C.convertConv2DDataFormat(c),m=C.computeConv2DInfo(s,o.shape,a,1,l,u,!1,h),g=new tn(m.inShape,"float32"),f=g.values,y=e.data.get(r.dataId).values,b=e.data.get(o.dataId).values,[v,_,w]=d,{batchSize:T,filterHeight:D,filterWidth:N,inChannels:O,inHeight:P,inWidth:B,outChannels:K,outHeight:X,outWidth:Z,strideHeight:te,strideWidth:U}=m;h=m.dataFormat;let j=D-1-m.padInfo.top,q=N-1-m.padInfo.left,Q=h==="channelsLast",oe=g.strides[0],ae=Q?g.strides[1]:g.strides[2],de=Q?g.strides[2]:1,fe=Q?1:g.strides[1],ge=p[0],xe=Q?p[1]:p[2],Ne=Q?p[2]:1,ve=Q?1:p[1];for(let Ue=0;Ue<T;++Ue)for(let se=0;se<O;++se)for(let we=0;we<P;++we){let Ie=we-j,ue=Math.max(0,Math.ceil(Ie/te)),mt=Math.min(X,(D+Ie)/te);for(let lt=0;lt<B;++lt){let Dt=lt-q,xt=Math.max(0,Math.ceil(Dt/U)),Fe=Math.min(Z,(N+Dt)/U),ft=0;for(let An=ue;An<mt;++An){let lu=An*te-Ie;for(let No=xt;No<Fe;++No){let sp=No*U-Dt,Ns=ge*Ue+xe*An+Ne*No,sl=v*(D-1-lu)+_*(N-1-sp)+w*se;for(let cu=0;cu<K;++cu){let uu=y[Ns+ve*cu],du=b[sl+cu];ft+=uu*du}}}let Mr=oe*Ue+ae*we+de*lt+fe*se;f[Mr]=ft}}return e.makeTensorInfo(g.shape,g.dtype,g.values)}var AJ={kernelName:td,backendName:"cpu",kernelFunc:M2e};function R2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l}=i;le([r,o],"conv3d");let c=C.computeConv3DInfo(r.shape,o.shape,s,l,a),{filterDepth:u,filterHeight:d,filterWidth:p,dilationDepth:h,dilationHeight:m,dilationWidth:g,padInfo:f}=c,y=f.front,b=f.left,v=f.top,_=new tn(c.outShape,r.dtype),w=e.data.get(r.dataId).values,T=e.data.get(o.dataId).values,D=_.values,N=x.computeStrides(r.shape),O=x.computeStrides(o.shape);for(let P=0;P<c.batchSize;++P){let B=P*N[0],K=P*_.strides[0];for(let X=0;X<c.outDepth;++X){let Z=K+X*_.strides[1],te=X*c.strideDepth-y;for(let U=0;U<u;++U){let j=te+U*h;if(j<0||j>=c.inDepth)continue;let q=U*O[0],Q=B+j*N[1];for(let oe=0;oe<c.outHeight;++oe){let ae=Z+oe*_.strides[2],de=oe*c.strideHeight-v;for(let fe=0;fe<d;++fe){let ge=de+fe*m;if(ge<0||ge>=c.inHeight)continue;let xe=q+fe*O[1],Ne=Q+ge*N[2];for(let ve=0;ve<c.outWidth;++ve){let Ue=ae+ve*c.outChannels,se=ve*c.strideWidth-b;for(let we=0;we<p;++we){let Ie=se+we*g;if(Ie<0||Ie>=c.inWidth)continue;let ue=xe+we*O[2],mt=Ne+Ie*c.inChannels,lt=ue;for(let Dt=0;Dt<c.inChannels;++Dt){let xt=w[mt+Dt];for(let Fe=0;Fe<c.outChannels;++Fe)D[Ue+Fe]+=xt*T[lt+Fe];lt+=c.outChannels}}}}}}}}return e.makeTensorInfo(_.shape,_.dtype,_.values)}var NJ={kernelName:nd,backendName:"cpu",kernelFunc:R2e};function O2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,filterShape:l}=i;le([r,o],"conv3dBackpropFilterV2");let c=x.computeStrides(r.shape),u=x.computeStrides(o.shape),d=C.computeConv3DInfo(r.shape,l,s,1,a),p=d.strideDepth,h=d.strideHeight,m=d.strideWidth,g=d.filterDepth,f=d.filterHeight,y=d.filterWidth,b=new tn(d.filterShape,"float32"),v=b.values,[_,w,T,D]=b.strides,N=e.data.get(o.dataId).values,[O,P,B,K]=u,X=e.data.get(r.dataId).values,[Z,te,U,j]=c,q=d.padInfo.front,Q=d.padInfo.left,oe=d.padInfo.top;for(let ae=0;ae<g;++ae){let de=Math.max(0,Math.ceil((q-ae)/p)),fe=Math.min(d.outDepth,(d.inDepth+q-ae)/p),ge=ae*_;for(let xe=0;xe<f;++xe){let Ne=Math.max(0,Math.ceil((oe-xe)/h)),ve=Math.min(d.outHeight,(d.inHeight+oe-xe)/h),Ue=xe*w+ge;for(let se=0;se<y;++se){let we=Math.max(0,Math.ceil((Q-se)/m)),Ie=Math.min(d.outWidth,(d.inWidth+Q-se)/m),ue=se*T+Ue;for(let mt=0;mt<d.inChannels;++mt){let lt=mt*D+ue;for(let Dt=0;Dt<d.outChannels;++Dt){let xt=0;for(let Fe=0;Fe<d.batchSize;++Fe){let ft=Fe*Z,Mr=Fe*O;for(let An=de;An<fe;++An){let No=(ae+An*p-q)*te+ft,sp=An*P+Mr;for(let Ns=Ne;Ns<ve;++Ns){let cu=(xe+Ns*h-oe)*U+No,uu=Ns*B+sp;for(let du=we;du<Ie;++du){let dA=(se+du*m-Q)*j+cu,pA=du*K+uu;xt+=X[dA+mt]*N[pA+Dt]}}}}v[lt+Dt]=xt}}}}}return e.makeTensorInfo(b.shape,b.dtype,b.values)}var MJ={kernelName:qg,backendName:"cpu",kernelFunc:O2e};function F2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{pad:s,strides:a,inputShape:l}=i;le([r],"conv3dBackpropInputV2");let c=x.computeStrides(r.shape),u=x.computeStrides(o.shape),d=C.computeConv3DInfo(l,o.shape,a,1,s),p=new tn(d.inShape,"float32"),h=p.values,[m,g,f,y]=p.strides,b=e.data.get(r.dataId).values,[v,_,w,T]=c,D=e.data.get(o.dataId).values,[N,O,P,B]=u,{batchSize:K,filterDepth:X,filterHeight:Z,filterWidth:te,inChannels:U,inDepth:j,inHeight:q,inWidth:Q,outChannels:oe,outDepth:ae,outHeight:de,outWidth:fe,strideDepth:ge,strideHeight:xe,strideWidth:Ne}=d,ve=X-1-d.padInfo.front,Ue=Z-1-d.padInfo.top,se=te-1-d.padInfo.left;for(let we=0;we<K;++we)for(let Ie=0;Ie<U;++Ie)for(let ue=0;ue<j;++ue){let mt=ue-ve,lt=Math.max(0,Math.ceil(mt/ge)),Dt=Math.min(ae,(X+mt)/ge);for(let xt=0;xt<q;++xt){let Fe=xt-Ue,ft=Math.max(0,Math.ceil(Fe/xe)),Mr=Math.min(de,(Z+Fe)/xe);for(let An=0;An<Q;++An){let lu=An-se,No=Math.max(0,Math.ceil(lu/Ne)),sp=Math.min(fe,(te+lu)/Ne),Ns=0;for(let sl=lt;sl<Dt;++sl){let cu=sl*ge-mt;for(let uu=ft;uu<Mr;++uu){let du=uu*xe-Fe;for(let zb=No;zb<sp;++zb){let dA=zb*Ne-lu,pA=v*we+_*sl+w*uu+T*zb,hae=N*(X-1-cu)+O*(Z-1-du)+P*(te-1-dA)+B*Ie;for(let $_=0;$_<oe;++$_){let mae=b[pA+$_],fae=D[hae+$_];Ns+=mae*fae}}}}h[m*we+g*ue+f*xt+y*An+Ie]=Ns}}}return e.makeTensorInfo(p.shape,p.dtype,p.values)}var RJ={kernelName:Xg,backendName:"cpu",kernelFunc:F2e};var L2e=tt(ec,t=>Math.cos(t)),OJ={kernelName:ec,backendName:"cpu",kernelFunc:L2e};var P2e=tt(tc,t=>Math.cosh(t)),FJ={kernelName:tc,backendName:"cpu",kernelFunc:P2e};function $2e(t){let{inputs:n,backend:e,attrs:i}=t,{image:r,boxes:o,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=i,[u,d,p,h]=r.shape,m=o.shape[0],[g,f]=a,y=Ge([m,g,f,h],"float32"),b=e.data.get(o.dataId).values,v=e.data.get(s.dataId).values,_=e.data.get(r.dataId).values,w=x.computeStrides(r.shape),T=x.computeStrides(y.shape);for(let D=0;D<m;D++){let N=D*4,O=b[N],P=b[N+1],B=b[N+2],K=b[N+3],X=v[D];if(X>=u)continue;let Z=g>1?(B-O)*(d-1)/(g-1):0,te=f>1?(K-P)*(p-1)/(f-1):0;for(let U=0;U<g;U++){let j=g>1?O*(d-1)+U*Z:.5*(O+B)*(d-1);if(j<0||j>d-1){for(let q=0;q<f;q++)for(let Q=0;Q<h;Q++){let oe=Q+q*T[2]+U*T[1]+D*T[0];y.values[oe]=c}continue}if(l==="bilinear"){let q=Math.floor(j),Q=Math.ceil(j),oe=j-q;for(let ae=0;ae<f;ae++){let de=f>1?P*(p-1)+ae*te:.5*(P+K)*(p-1);if(de<0||de>p-1){for(let Ne=0;Ne<h;Ne++){let ve=Ne+ae*T[2]+U*T[1]+D*T[0];y.values[ve]=c}continue}let fe=Math.floor(de),ge=Math.ceil(de),xe=de-fe;for(let Ne=0;Ne<h;Ne++){let ve=Ne+fe*w[2]+q*w[1]+X*w[0],Ue=_[ve];ve=Ne+ge*w[2]+q*w[1]+X*w[0];let se=_[ve];ve=Ne+fe*w[2]+Q*w[1]+X*w[0];let we=_[ve];ve=Ne+ge*w[2]+Q*w[1]+X*w[0];let Ie=_[ve],ue=Ue+(se-Ue)*xe,mt=we+(Ie-we)*xe;ve=Ne+ae*T[2]+U*T[1]+D*T[0],y.values[ve]=ue+(mt-ue)*oe}}}else for(let q=0;q<f;++q){let Q=f>1?P*(p-1)+q*te:.5*(P+K)*(p-1);if(Q<0||Q>p-1){for(let de=0;de<h;de++){let fe=de+q*T[2]+U*T[1]+D*T[0];y.values[fe]=c}continue}let oe=Math.round(Q),ae=Math.round(j);for(let de=0;de<h;de++){let fe=de+oe*w[2]+ae*w[1]+X*w[0],ge=de+q*T[2]+U*T[1]+D*T[0];y.values[ge]=_[fe]}}}}return e.makeTensorInfo(y.shape,y.dtype,y.values)}var LJ={kernelName:Yg,backendName:"cpu",kernelFunc:$2e};function V2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;le(r,"cumprod");let l=C.getAxesPermutation([o],r.shape.length),c=r;l!=null&&(c=Pn({inputs:{x:r},backend:e,attrs:{perm:l}}));let u=C.getInnerMostAxes(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=ni(c.dtype,"int32"),p=x.makeOnesTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(y,b)=>y+m-b-1:(y,b)=>y+b;for(let y=0;y<h.length;y+=m)for(let b=0;b<m;b++){let v=g(y,b);if(b===0)p[v]=s?1:h[v];else{let _=g(y,b-1);p[v]=s?h[_]*p[_]:h[v]*p[_]}}let f=e.makeTensorInfo(c.shape,d,p);if(l!=null){let y=C.getUndoAxesPermutation(l),b=Pn({inputs:{x:f},backend:e,attrs:{perm:y}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(c),b}return f}var PJ={kernelName:Kg,backendName:"cpu",kernelFunc:V2e};function B2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;le(r,"cumsum");let l=C.getAxesPermutation([o],r.shape.length),c=r;l!=null&&(c=Pn({inputs:{x:r},backend:e,attrs:{perm:l}}));let u=C.getInnerMostAxes(1,r.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);let d=ni(c.dtype,"int32"),p=x.makeZerosTypedArray(x.sizeFromShape(c.shape),d),h=e.data.get(c.dataId).values,m=c.shape[c.shape.length-1],g=a?(y,b)=>y+m-b-1:(y,b)=>y+b;for(let y=0;y<h.length;y+=m)for(let b=0;b<m;b++){let v=g(y,b);if(b===0)p[v]=s?0:h[v];else{let _=g(y,b-1);p[v]=s?h[_]+p[_]:h[v]+p[_]}}let f=e.makeTensorInfo(c.shape,d,p);if(l!=null){let y=C.getUndoAxesPermutation(l),b=Pn({inputs:{x:f},backend:e,attrs:{perm:y}});return e.disposeIntermediateTensorInfo(f),e.disposeIntermediateTensorInfo(c),b}return f}var $J={kernelName:id,backendName:"cpu",kernelFunc:B2e};function z2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s,binaryOutput:a}=i;if(r.shape.length===1){let l=e.data.get(r.dataId).values,c=e.data.get(o.dataId).values,u=bb(l,c,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,u)}else if(r.shape.length===2){let l=e.bufferSync(r),c=e.bufferSync(o),u=ZI(l,c,s,a);return e.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}var VJ={kernelName:Qg,backendName:"cpu",kernelFunc:z2e};function G2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockSize:o,dataFormat:s}=i;x.assert(s==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`);let a=r.shape[0],l=r.shape[1],c=r.shape[2],u=r.shape[3],d=l*o,p=c*o,h=u/(o*o),m=e.data.get(r.dataId).values,g=new Float32Array(a*d*p*h),f=0;for(let y=0;y<a;++y)for(let b=0;b<d;++b){let v=Math.floor(b/o),_=b%o;for(let w=0;w<p;++w){let T=Math.floor(w/o),D=w%o,N=(_*o+D)*h;for(let O=0;O<h;++O){let B=O+N+u*(T+c*(v+l*y));g[f++]=m[B]}}}return e.makeTensorInfo([a,d,p,h],r.dtype,g)}var BJ={kernelName:Zg,backendName:"cpu",kernelFunc:G2e};function zV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=i;le([r,o],"depthwiseConv2DNative");let u=x.computeStrides(r.shape),d=x.computeStrides(o.shape),p=l;p==null&&(p=[1,1]),x.assert(C.eitherStridesOrDilationsAreOne(s,p),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${p}'`);let h=C.computeConv2DInfo(r.shape,o.shape,s,p,a,c,!0),{filterHeight:m,filterWidth:g,dilationHeight:f,dilationWidth:y,padInfo:b}=h,v=b.left,_=b.top,w=h.outChannels/h.inChannels,T=new tn(h.outShape,r.dtype),D=e.data.get(r.dataId).values,N=e.data.get(o.dataId).values,O=T.values;for(let P=0;P<h.batchSize;++P){let B=P*u[0],K=P*T.strides[0];for(let X=0;X<h.outHeight;++X){let Z=K+X*T.strides[1],te=X*h.strideHeight-_;for(let U=0;U<m;++U){let j=te+U*f;if(j<0||j>=h.inHeight)continue;let q=U*d[0],Q=B+j*u[1];for(let oe=0;oe<h.outWidth;++oe){let ae=Z+oe*T.strides[2],de=oe*h.strideWidth-v;for(let fe=0;fe<g;++fe){let ge=de+fe*y;if(ge<0||ge>=h.inWidth)continue;let xe=q+fe*d[1],Ne=Q+ge*h.inChannels,ve=ae,Ue=xe;for(let se=0;se<h.inChannels;++se){let we=D[Ne+se];for(let Ie=0;Ie<w;++Ie)O[ve+Ie]+=we*N[Ue+Ie];ve+=w,Ue+=w}}}}}}return e.makeTensorInfo(T.shape,T.dtype,T.values)}var zJ={kernelName:rd,backendName:"cpu",kernelFunc:zV};function U2e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i;le([r,o],"depthwiseConv2dNativeBackpropFilter");let d=C.computeConv2DInfo(r.shape,u,s,a,l,c,!0),{strideHeight:p,strideWidth:h,filterHeight:m,filterWidth:g}=d,f=new tn(d.filterShape,"float32"),y=d.padInfo.left,b=d.padInfo.top,v=d.outChannels/d.inChannels,_=e.data.get(r.dataId).values,w=new tn(r.shape,r.dtype,_),T=e.data.get(o.dataId).values,D=new tn(o.shape,o.dtype,T);for(let N=0;N<m;++N){let O=Math.max(0,Math.ceil((b-N)/p)),P=Math.min(d.outHeight,(d.inHeight+b-N)/p);for(let B=0;B<g;++B){let K=Math.max(0,Math.ceil((y-B)/h)),X=Math.min(d.outWidth,(d.inWidth+y-B)/h);for(let Z=0;Z<d.outChannels;++Z){let te=Math.trunc(Z/v),U=Z%v,j=0;for(let q=0;q<d.batchSize;++q)for(let Q=O;Q<P;++Q){let oe=N+Q*p-b;for(let ae=K;ae<X;++ae){let de=B+ae*h-y;j+=w.get(q,oe,de,te)*D.get(q,Q,ae,Z)}}f.set(j,N,B,te,U)}}}return e.makeTensorInfo(f.shape,f.dtype,f.values)}var GJ={kernelName:Jg,backendName:"cpu",kernelFunc:U2e};function H2e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i;le([r,o],"depthwiseConv2DNativeBackpropInput");let d=x.computeStrides(r.shape),p=x.computeStrides(o.shape),h=C.computeConv2DInfo(u,o.shape,s,a,l,c,!0),m=new tn(h.inShape,"float32"),g=m.values,[f,y,b]=m.strides,v=e.data.get(r.dataId).values,[_,w,T]=d,D=e.data.get(o.dataId).values,[N,O,P]=p,{batchSize:B,filterHeight:K,filterWidth:X,inChannels:Z,inHeight:te,inWidth:U,outChannels:j,outHeight:q,outWidth:Q,strideHeight:oe,strideWidth:ae}=h,de=K-1-h.padInfo.top,fe=X-1-h.padInfo.left,ge=j/Z;for(let xe=0;xe<B;++xe)for(let Ne=0;Ne<Z;++Ne)for(let ve=0;ve<te;++ve){let Ue=ve-de,se=Math.max(0,Math.ceil(Ue/oe)),we=Math.min(q,(K+Ue)/oe);for(let Ie=0;Ie<U;++Ie){let ue=Ie-fe,mt=Math.max(0,Math.ceil(ue/ae)),lt=Math.min(Q,(X+ue)/ae),Dt=0;for(let xt=se;xt<we;++xt){let Fe=xt*oe-Ue;for(let ft=mt;ft<lt;++ft){let Mr=ft*ae-ue,An=_*xe+w*xt+T*ft,lu=N*(K-1-Fe)+O*(X-1-Mr)+P*Ne;for(let No=0;No<ge;++No){let sp=Ne*ge+No,Ns=v[An+sp],sl=D[lu+No];Dt+=Ns*sl}}}g[f*xe+y*ve+b*Ie+Ne]=Dt}}return e.makeTensorInfo(m.shape,m.dtype,m.values)}var UJ={kernelName:ey,backendName:"cpu",kernelFunc:H2e};function W2e(t){let{inputs:n,backend:e}=t,{x:i}=n,r=x.sizeFromShape(i.shape),o=e.data.get(i.dataId).values,s=Ge([r,r],i.dtype),a=s.values;for(let c=0;c<o.length;c++)a[c*r+c]=o[c];let l=[...i.shape,...i.shape];return e.makeTensorInfo(l,s.dtype,s.values)}var HJ={kernelName:U1,backendName:"cpu",kernelFunc:W2e};var WJ={kernelName:od,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:i,filter:r}=t,{strides:o,pad:s,dilations:a}=e,l=n,c=l.data.get(i.dataId).values,u=i.shape.length,d=l.data.get(r.dataId).values,p=r.shape.length,{batchSize:h,inHeight:m,inWidth:g,inChannels:f,outHeight:y,outWidth:b,padInfo:v,strideHeight:_,strideWidth:w,filterHeight:T,filterWidth:D,dilationHeight:N,dilationWidth:O,outShape:P}=C.computeDilation2DInfo(i.shape,r.shape,o,s,"NHWC",a),B=x.sizeFromShape(P),K=P.length,X=x.getArrayFromDType(i.dtype,B);for(let te=0;te<h;++te)for(let U=0;U<y;++U){let j=U*_-v.top;for(let q=0;q<b;++q){let Q=q*w-v.left;for(let oe=0;oe<f;++oe){let ae=Number.MIN_SAFE_INTEGER;for(let fe=0;fe<T;++fe){let ge=j+fe*N;if(ge>=0&&ge<m)for(let xe=0;xe<D;++xe){let Ne=Q+xe*O;if(Ne>=0&&Ne<g){let ve=x.locToIndex([te,ge,Ne,oe],u,x.computeStrides(i.shape)),Ue=x.locToIndex([fe,xe,oe],p,x.computeStrides(r.shape)),se=c[ve]+d[Ue];se>ae&&(ae=se)}}}let de=x.locToIndex([te,U,q,oe],K,x.computeStrides(P));X[de]=ae}}}return{dataId:l.write(x.toTypedArray(X,i.dtype),P,i.dtype),shape:P,dtype:i.dtype}}};var jJ={kernelName:_0,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:i,filter:r,dy:o}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(i.shape,c.data.get(i.dataId).values),d=x.toNestedArray(r.shape,c.data.get(r.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:f,outWidth:y,padInfo:b,strideHeight:v,strideWidth:_,filterHeight:w,filterWidth:T,dilationHeight:D,dilationWidth:N,outShape:O}=C.computeDilation2DInfo(i.shape,r.shape,s,a,"NHWC",l);x.assert(o.rank===O.length,()=>`Error in ${_0}, dy must have the same rank as output ${O.length}, but got ${o.rank}`);let P=x.toNestedArray(O,c.data.get(o.dataId).values),B=x.makeZerosNestedTypedArray(r.shape,r.dtype);for(let X=0;X<p;++X)for(let Z=0;Z<f;++Z){let te=Z*v-b.top;for(let U=0;U<y;++U){let j=U*_-b.left;for(let q=0;q<g;++q){let Q=Number.MIN_SAFE_INTEGER,oe=0,ae=0;for(let de=0;de<w;++de){let fe=te+de*D;if(fe>=0&&fe<h)for(let ge=0;ge<T;++ge){let xe=j+ge*N;if(xe>=0&&xe<m){let Ne=u[X][fe][xe][q]+d[de][ge][q];Ne>Q&&(Q=Ne,oe=de,ae=ge)}}}B[oe][ae][q]+=P[X][Z][U][q]}}}return{dataId:c.write(x.toTypedArray(B,i.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var qJ={kernelName:v0,backendName:"cpu",kernelFunc:({inputs:t,backend:n,attrs:e})=>{let{x:i,filter:r,dy:o}=t,{strides:s,pad:a,dilations:l}=e,c=n,u=x.toNestedArray(i.shape,c.data.get(i.dataId).values),d=x.toNestedArray(r.shape,c.data.get(r.dataId).values),{batchSize:p,inHeight:h,inWidth:m,inChannels:g,outHeight:f,outWidth:y,padInfo:b,strideHeight:v,strideWidth:_,filterHeight:w,filterWidth:T,dilationHeight:D,dilationWidth:N,outShape:O}=C.computeDilation2DInfo(i.shape,r.shape,s,a,"NHWC",l);x.assert(o.rank===O.length,()=>`Error in ${v0}, dy must have the same rank as output ${O.length}, but got ${o.rank}`);let P=x.toNestedArray(O,c.data.get(o.dataId).values),B=x.makeZerosNestedTypedArray(i.shape,i.dtype);for(let X=0;X<p;++X)for(let Z=0;Z<f;++Z){let te=Z*v-b.top;for(let U=0;U<y;++U){let j=U*_-b.left;for(let q=0;q<g;++q){let Q=Number.MIN_SAFE_INTEGER,oe=te<0?0:te,ae=j<0?0:j;for(let de=0;de<w;++de){let fe=te+de*D;if(fe>=0&&fe<h)for(let ge=0;ge<T;++ge){let xe=j+ge*N;if(xe>=0&&xe<m){let Ne=u[X][fe][xe][q]+d[de][ge][q];Ne>Q&&(Q=Ne,oe=fe,ae=xe)}}}B[X][oe][ae][q]+=P[X][Z][U][q]}}}return{dataId:c.write(x.toTypedArray(B,i.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};function j2e(t){let{inputs:n,backend:e,attrs:i}=t,{image:r}=n,{canvas:o,options:s}=i,{contextOptions:a,imageOptions:l}=s||{},c=l?.alpha||1,u=a?.contextType||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);let d=o.getContext(u,a?.contextAttributes||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);let[p,h]=r.shape.slice(0,2),m=r.shape.length===2?1:r.shape[2],g=e.data.get(r.dataId).values,f=r.dtype==="float32"?255:1,y=new Uint8ClampedArray(h*p*4);for(let v=0;v<p*h;++v){let _=[0,0,0,255*c];for(let T=0;T<m;T++){let D=g[v*m+T];if(r.dtype==="float32"){if(D<0||D>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${D}.`)}else if(r.dtype==="int32"&&(D<0||D>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${D}.`);m===1?(_[0]=D*f,_[1]=D*f,_[2]=D*f):_[T]=D*f}let w=v*4;y[w+0]=Math.round(_[0]),y[w+1]=Math.round(_[1]),y[w+2]=Math.round(_[2]),y[w+3]=Math.round(_[3])}o.width=h,o.height=p;let b=new ImageData(y,h,p);return d.putImageData(b,0,0),r}var XJ={kernelName:aX,backendName:"cpu",kernelFunc:j2e};function iu(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;le(r,"sum");let a;r.dtype==="bool"?a=Is({inputs:{x:r},backend:e,attrs:{dtype:"int32"}}):a=er({inputs:{x:r},backend:e});let l=a.shape.length,c=x.parseAxisParam(o,a.shape),u=C.getAxesPermutation(c,l),d=c,p=a;u!=null&&(p=Pn({inputs:{x:a},backend:e,attrs:{perm:u}}),d=C.getInnerMostAxes(d.length,l)),C.assertAxesAreInnerMostDims("sum",d,p.shape.length);let[h,m]=C.computeOutAndReduceShapes(p.shape,d),g=C.upcastType(p.dtype,"int32"),f=gb(e,h,g),y=x.sizeFromShape(m),b=e.data.get(f.dataId).values,v=e.data.get(p.dataId).values;for(let _=0;_<b.length;++_){let w=_*y,T=0;for(let D=0;D<y;++D)T+=v[w+D];b[_]=T}if(s){let _=C.expandShapeToKeepDim(f.shape,c),w=f;f=Et({inputs:{x:f},backend:e,attrs:{shape:_}}),e.disposeIntermediateTensorInfo(w)}return e.disposeIntermediateTensorInfo(a),u!=null&&e.disposeIntermediateTensorInfo(p),f}var KJ={kernelName:Ad,backendName:"cpu",kernelFunc:iu};function q2e(t){let{inputs:n,backend:e,attrs:i}=t,{equation:r}=i,o=n,{allDims:s,summedDims:a,idDims:l}=C.decodeEinsumEquation(r,o.length);C.checkEinsumDimSizes(s.length,l,o);let{path:c,steps:u}=C.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,m=[];for(let g=0;g<d;++g){for(let f of u[g]){let{permutationIndices:y,expandDims:b}=C.getEinsumPermutation(h,l[f]),v;C.isIdentityPermutation(y)?v=o[f]:(v=Pn({inputs:{x:o[f]},backend:e,attrs:{perm:y}}),m.push(v));let _=v.shape.slice();for(let w=0;w<b.length;++w)_.splice(b[w],0,1);x.arraysEqual(v.shape,_)||(v=Et({inputs:{x:v},backend:e,attrs:{shape:_}}),m.push(v)),p===null?p=v:(p=bm({inputs:{a:v,b:p},backend:e}),m.push(p))}g<d-1&&(c[g]>=0&&(p=iu({inputs:{x:p},backend:e,attrs:{axis:c[g]-(s.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&e.disposeIntermediateTensorInfo(g);return p}var YJ={kernelName:ty,backendName:"cpu",kernelFunc:q2e};function X2e(t){let{inputs:n,backend:e}=t,{dy:i,y:r}=n;le([i,r],"eluGrad");let o=new Float32Array(x.sizeFromShape(r.shape)),s=e.data.get(r.dataId).values,a=e.data.get(i.dataId).values;for(let l=0;l<s.length;++l){let c=s[l];c>=0?o[l]=a[l]:o[l]=a[l]*(c+1)}return e.makeTensorInfo(r.shape,"float32",o)}var QJ={kernelName:ny,backendName:"cpu",kernelFunc:X2e};var K2e=C.ERF_P,Y2e=C.ERF_A1,Q2e=C.ERF_A2,Z2e=C.ERF_A3,J2e=C.ERF_A4,eLe=C.ERF_A5,tLe=tt(rc,t=>{let n=Math.sign(t),e=Math.abs(t),i=1/(1+K2e*e);return n*(1-((((eLe*i+J2e)*i+Z2e)*i+Q2e)*i+Y2e)*i*Math.exp(-e*e))}),ZJ={kernelName:rc,backendName:"cpu",kernelFunc:tLe};function wb(t){let{inputs:n,backend:e,attrs:i}=t,{input:r}=n,{dim:o}=i,s=r.shape.length,a=r.shape.slice(),l=o;return o<0&&(x.assert(-(s+1)<=o,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+o+1),a.splice(l,0,1),Et({inputs:{x:r},backend:e,attrs:{shape:a}})}var JJ={kernelName:sd,backendName:"cpu",kernelFunc:wb};var nLe=It((t,n)=>t/n),v_=zt(nc,nLe),__={kernelName:nc,backendName:"cpu",kernelFunc:v_};function xE(t,n,e){let i=t.shape,r=i[0],o=i[1],s=e.data.get(t.dataId),a=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,c=[r,o],u=x.sizeFromShape(c),d=x.getTypedArrayFromDType("float32",u),p=x.getTypedArrayFromDType("float32",u);for(let f=0;f<r;f++){let y=Ds({inputs:{x:a},backend:e,attrs:{begin:[f,0],size:[1,o]}}),b=Ds({inputs:{x:l},backend:e,attrs:{begin:[f,0],size:[1,o]}}),v=gi({inputs:{real:y,imag:b},backend:e}),{real:_,imag:w}=iLe(v,n,e),T=C.mergeRealAndImagArrays(_,w);for(let D=0;D<o;D++){let N=C.getComplexWithIndex(T,D);d[f*o+D]=N.real,p[f*o+D]=N.imag}e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(b),e.disposeIntermediateTensorInfo(v)}let h=e.makeTensorInfo(c,"float32",d),m=e.makeTensorInfo(c,"float32",p),g=gi({inputs:{real:h,imag:m},backend:e});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),g}function iLe(t,n,e){let i=x.sizeFromShape(t.shape),r=e.data.get(t.dataId),o=e.data.get(r.complexTensorInfos.real.dataId).values,s=e.data.get(r.complexTensorInfos.imag.dataId).values;if(rLe(i)){let a=GV(o,s,i,n,e),l=[t.shape[0],t.shape[1]];if(n){let c=e.makeTensorInfo(l,"float32",a.real),u=e.makeTensorInfo(l,"float32",a.imag),d=e.makeTensorInfo([],"float32",x.createScalarValue(i,"float32")),p=er({inputs:{x:d},backend:e}),h=__.kernelFunc({inputs:{a:c,b:d},backend:e}),m=__.kernelFunc({inputs:{a:u,b:p},backend:e}),g=e.data.get(h.dataId).values,f=e.data.get(m.dataId).values;return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),{real:g,imag:f}}return a}else{let a=C.mergeRealAndImagArrays(o,s),l=oLe(a,i,n);return C.splitRealAndImagArrays(l)}}function rLe(t){return(t&t-1)===0}function GV(t,n,e,i,r){if(e===1)return{real:t,imag:n};let o=C.mergeRealAndImagArrays(t,n),s=e/2,a=C.complexWithEvenIndex(o),l=a.real,c=a.imag,u=[l.length],d=r.makeTensorInfo(u,"float32",l),p=r.makeTensorInfo(u,"float32",c),h=gi({inputs:{real:d,imag:p},backend:r}),m=C.complexWithOddIndex(o),g=m.real,f=m.imag,y=[g.length],b=r.makeTensorInfo(y,"float32",g),v=r.makeTensorInfo(y,"float32",f),_=gi({inputs:{real:b,imag:v},backend:r}),w=GV(l,c,s,i,r),T=w.real,D=w.imag,N=[T.length],O=r.makeTensorInfo(N,"float32",T),P=r.makeTensorInfo(N,"float32",D),B=gi({inputs:{real:O,imag:P},backend:r}),K=GV(g,f,s,i,r),X=K.real,Z=K.imag,te=[X.length],U=r.makeTensorInfo(te,"float32",X),j=r.makeTensorInfo(te,"float32",Z),q=gi({inputs:{real:U,imag:j},backend:r}),Q=C.exponents(e,i),oe=[Q.real.length],ae=r.makeTensorInfo(oe,"float32",Q.real),de=r.makeTensorInfo(oe,"float32",Q.imag),fe=gi({inputs:{real:ae,imag:de},backend:r}),ge=bm({inputs:{a:fe,b:q},backend:r}),xe=tl({inputs:{a:B,b:ge},backend:r}),Ne=b_({inputs:{a:B,b:ge},backend:r}),ve=ks({inputs:{input:xe},backend:r}),Ue=ks({inputs:{input:Ne},backend:r}),se=nl({inputs:{input:xe},backend:r}),we=nl({inputs:{input:Ne},backend:r}),Ie=ep({inputs:[ve,Ue],backend:r,attrs:{axis:0}}),ue=ep({inputs:[se,we],backend:r,attrs:{axis:0}}),mt=r.data.get(Ie.dataId).values,lt=r.data.get(ue.dataId).values;return r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(_),r.disposeIntermediateTensorInfo(O),r.disposeIntermediateTensorInfo(P),r.disposeIntermediateTensorInfo(B),r.disposeIntermediateTensorInfo(U),r.disposeIntermediateTensorInfo(j),r.disposeIntermediateTensorInfo(q),r.disposeIntermediateTensorInfo(ae),r.disposeIntermediateTensorInfo(de),r.disposeIntermediateTensorInfo(fe),r.disposeIntermediateTensorInfo(ge),r.disposeIntermediateTensorInfo(xe),r.disposeIntermediateTensorInfo(Ne),r.disposeIntermediateTensorInfo(ve),r.disposeIntermediateTensorInfo(se),r.disposeIntermediateTensorInfo(Ue),r.disposeIntermediateTensorInfo(we),r.disposeIntermediateTensorInfo(Ie),r.disposeIntermediateTensorInfo(ue),{real:mt,imag:lt}}function oLe(t,n,e){let i=new Float32Array(n*2);for(let r=0;r<n;r++){let o=0,s=0;for(let a=0;a<n;a++){let l=C.exponent(r*a,n,e),c=C.getComplexWithIndex(t,a);o+=c.real*l.real-c.imag*l.imag,s+=c.real*l.imag+c.imag*l.real}e&&(o/=n,s/=n),C.assignToTypedArray(i,o,s,r)}return i}function sLe(t){let{inputs:n,backend:e}=t,{input:i}=n,r=x.sizeFromShape(i.shape),o=i.shape[i.shape.length-1],s=r/o,a=Et({inputs:{x:i},backend:e,attrs:{shape:[s,o]}}),l=xE(a,!1,e),c=Et({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var eee={kernelName:iy,backendName:"cpu",kernelFunc:sLe};function w_(t){let{backend:n,attrs:e}=t,{shape:i,value:r,dtype:o}=e,s=o||x.inferDtype(r),a=x.getArrayFromDType(s,x.sizeFromShape(i));return aLe(a,r,s),n.makeTensorInfo(i,s,a)}var tee={kernelName:ry,backendName:"cpu",kernelFunc:w_};function aLe(t,n,e){t.fill(n)}var nee={kernelName:oy,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:i}=t,r=e,o=x.getTypedArrayFromDType(i.dtype,x.sizeFromShape(i.shape)),[s,a,l,c]=i.shape,u=r.data.get(i.dataId).values;for(let p=0;p<s;p++){let h=p*l*a*c;for(let m=0;m<a;m++){let g=m*(l*c);for(let f=0;f<l;f++){let y=f*c;for(let b=0;b<c;b++){let v=Math.round(l-f-1),_=h+g+y+b,w=u[_];if(v>=0&&v<l){let T=v*c,D=h+g+T+b;w=u[D]}o[_]=w}}}}return{dataId:r.write(o,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};function lLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=i,g=BV({inputs:{x:r,filter:o},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let f=g;if(u==="NCHW"&&s.shape.length===1&&s.shape[0]!==1){let y=Et({inputs:{x:s},backend:e,attrs:{shape:[s.shape[0],1,1]}});g=tl({inputs:{a:g,b:y},backend:e}),e.disposeIntermediateTensorInfo(y)}else g=tl({inputs:{a:g,b:s},backend:e});e.disposeIntermediateTensorInfo(f)}if(h){let f=g;if(u==="NCHW"&&h==="prelu"&&a.shape.length===1&&a.shape[0]!==1){let y=Et({inputs:{x:a},backend:e,attrs:{shape:[a.shape[0],1,1]}});g=xm(e,g,h,y,m),e.disposeIntermediateTensorInfo(y)}else g=xm(e,g,h,a,m);e.disposeIntermediateTensorInfo(f)}return g}var iee={kernelName:Lh,backendName:"cpu",kernelFunc:lLe};function cLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=i,g=zV({inputs:{x:r,filter:o},backend:e,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p}});if(s){let f=g;g=tl({inputs:{a:g,b:s},backend:e}),e.disposeIntermediateTensorInfo(f)}if(h){let f=g;g=xm(e,g,h,a,m),e.disposeIntermediateTensorInfo(f)}return g}var ree={kernelName:Ph,backendName:"cpu",kernelFunc:cLe};function uLe(t){let{inputs:n,backend:e}=t,{params:i,indices:r}=n,o=x.sizeFromShape(i.shape),s=r.shape,a=s[s.length-1],[l,c,u,d]=C.prepareAndValidate(i,r);if(c===0)return e.makeTensorInfo(l,i.dtype,[]);let p=e.data.get(r.dataId).values,h=e.bufferSync(i),m=eE(p,h,i.dtype,c,a,u,d,i.shape,o);return e.makeTensorInfo(l,i.dtype,m.values)}var oee={kernelName:H1,backendName:"cpu",kernelFunc:uLe};function dLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,indices:o}=n,{axis:s,batchDims:a}=i;le([r,o],"gatherV2");let l=x.parseAxisParam(s,r.shape)[0],c=e.data.get(o.dataId).values,u=r.shape[l];for(let _=0;_<c.length;++_){let w=c[_];x.assert(w<=u-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);let p=x.sizeFromShape(o.shape),h=C.segment_util.collectGatherOpShapeInfo(r,o,l,d),m=Et({inputs:{x:r},backend:e,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),g=Et({inputs:{x:o},backend:e,attrs:{shape:[h.batchSize,p/h.batchSize]}}),f=[h.batchSize,h.outerSize,p/h.batchSize,h.sliceSize],y=e.bufferSync(g),b=e.bufferSync(m),v=tE(b,y,f);return e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),e.makeTensorInfo(h.outputShape,v.dtype,v.values)}var see={kernelName:ld,backendName:"cpu",kernelFunc:dLe};function pLe(t){let{inputs:n,backend:e}=t,{input:i}=n,r=x.sizeFromShape(i.shape),o=i.shape[i.shape.length-1],s=r/o,a=Et({inputs:{x:i},backend:e,attrs:{shape:[s,o]}}),l=xE(a,!0,e),c=Et({inputs:{x:l},backend:e,attrs:{shape:i.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(l),c}var aee={kernelName:sy,backendName:"cpu",kernelFunc:pLe};var hLe=tt(uc,t=>Number.isFinite(t)?1:0,"bool"),lee={kernelName:uc,backendName:"cpu",kernelFunc:hLe};var mLe=tt(dc,t=>Math.abs(t)===1/0?1:0,"bool"),cee={kernelName:dc,backendName:"cpu",kernelFunc:mLe};var fLe=tt(pc,t=>Number.isNaN(t)?1:0,"bool"),uee={kernelName:pc,backendName:"cpu",kernelFunc:fLe};function gLe(t){let{backend:n,attrs:e}=t,{start:i,stop:r,num:o}=e,s=nE(i,r,o);return n.makeTensorInfo([s.length],"float32",s)}var dee={kernelName:W1,backendName:"cpu",kernelFunc:gLe};var yLe=tt(mc,t=>Math.log1p(t)),pee={kernelName:mc,backendName:"cpu",kernelFunc:yLe};var bLe=It((t,n)=>t&&n),xLe=zt(Nh,bLe,null,"bool"),hee={kernelName:Nh,backendName:"cpu",kernelFunc:xLe};var vLe=tt(Mh,t=>t?0:1,"bool"),mee={kernelName:Mh,backendName:"cpu",kernelFunc:vLe};var _Le=It((t,n)=>t||n),wLe=zt(Rh,_Le,null,"bool"),fee={kernelName:Rh,backendName:"cpu",kernelFunc:wLe};function CLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{depthRadius:o,bias:s,alpha:a,beta:l}=i;le(r,"LRN");let c=r.shape[3],u=c-1,d=e.data.get(r.dataId).values,p=x.sizeFromShape(r.shape),h=new Float32Array(p);function m(g){let f=g%c,y=g-f+Math.max(0,f-o),b=g-f+Math.min(f+o,u),v=0;for(;y<=b;y++){let _=d[y];v+=_*_}return v}for(let g=0;g<p;g++){let f=m(g),y=d[g]*Math.pow(s+a*f,-l);h[g]=y}return e.makeTensorInfo(r.shape,r.dtype,h)}var gee={kernelName:ud,backendName:"cpu",kernelFunc:CLe};function TLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,y:o,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i;le(s,"LRNGrad");let d=x.sizeFromShape(s.shape),p=s.shape[3],h=e.data.get(s.dataId).values,m=e.data.get(r.dataId).values,g=e.data.get(o.dataId).values,f=new Float32Array(d),y=d;for(let b=0;b<y;b++){let v=b%p,_=b-v+Math.max(0,v-a),w=b-v+Math.min(p,v+a+1),T=0;for(let D=_;D<w;D++)T+=Math.pow(m[D],2);T=c*T+l;for(let D=_;D<w;D++){let N=-2*c*u*m[D]*g[b]/T;b===D&&(N+=Math.pow(T,-u)),N*=h[b],f[D]+=N}}return e.makeTensorInfo(s.shape,r.dtype,f)}var yee={kernelName:ly,backendName:"cpu",kernelFunc:TLe};function UV(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reductionIndices:o,keepDims:s}=i,a=e,l=r.shape,c=l.length,u=x.parseAxisParam(o,l),d=u,p=C.getAxesPermutation(d,c),h=a.data.get(r.dataId).values;if(p!=null){let _=new Array(c);for(let w=0;w<_.length;w++)_[w]=l[p[w]];h=xb(h,l,r.dtype,p,_),d=C.getInnerMostAxes(d.length,c),l=_}le(r,"max"),C.assertAxesAreInnerMostDims("max",d,c);let[m,g]=C.computeOutAndReduceShapes(l,d),f=x.sizeFromShape(g),y=iE(h,f,m,r.dtype),b=a.write(y,m,r.dtype),v=m;return s&&(v=C.expandShapeToKeepDim(m,u)),{dataId:b,shape:v,dtype:r.dtype}}var bee={kernelName:dd,backendName:"cpu",kernelFunc:UV};function SLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;le(r,"maxPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;x.assert(C.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=C.computePool2DInfo(r.shape,o,s,c,a,l),d;if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))d=er({inputs:{x:r},backend:e});else{let p=e.data.get(r.dataId).values,h=x.computeStrides(r.shape),m=_b(p,r.shape,r.dtype,h,u,"max");d=e.makeTensorInfo(u.outShape,r.dtype,m.values)}return d}var xee={kernelName:pd,backendName:"cpu",kernelFunc:SLe};function kLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=i;le(r,"maxPool3d");let u=C.computePool3DInfo(r.shape,o,s,1,a,l,c),d=e.data.get(r.dataId).values,p=bE(d,r.shape,r.dtype,x.computeStrides(r.shape),u,"max");return e.makeTensorInfo(p.shape,"float32",p.values)}var vee={kernelName:hd,backendName:"cpu",kernelFunc:kLe};function ILe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,{filterSize:s,strides:a,pad:l,dimRoundingMode:c}=i;le([r,o],"maxPool3DGrad");let u=C.computePool3DInfo(o.shape,s,a,1,l,c),d=e.bufferSync(o),p=fJ(d,u),h=u.strideDepth,m=u.strideHeight,g=u.strideWidth,f=u.dilationDepth,y=u.dilationHeight,b=u.dilationWidth,v=u.effectiveFilterDepth,_=u.effectiveFilterHeight,w=u.effectiveFilterWidth,T=v-1-u.padInfo.front,D=w-1-u.padInfo.left,N=_-1-u.padInfo.top,O=Ge(o.shape,"float32"),P=e.bufferSync(r);for(let B=0;B<u.batchSize;++B)for(let K=0;K<u.inChannels;++K)for(let X=0;X<u.inDepth;++X)for(let Z=0;Z<u.inHeight;++Z)for(let te=0;te<u.inWidth;++te){let U=X-T,j=Z-N,q=te-D,Q=0;for(let oe=0;oe<v;oe+=f){let ae=(U+oe)/h;if(!(ae<0||ae>=u.outDepth||Math.floor(ae)!==ae))for(let de=0;de<_;de+=y){let fe=(j+de)/m;if(!(fe<0||fe>=u.outHeight||Math.floor(fe)!==fe))for(let ge=0;ge<w;ge+=b){let xe=(q+ge)/g;if(xe<0||xe>=u.outWidth||Math.floor(xe)!==xe)continue;let Ne=v*_*w-1-p.get(B,ae,fe,xe,K),ve=oe*_*w+de*w+ge,Ue=Ne===ve?1:0;if(Ue===0)continue;let se=P.get(B,ae,fe,xe,K);Q+=se*Ue}}}O.set(Q,B,X,Z,te,K)}return e.makeTensorInfo(O.shape,O.dtype,O.values)}var _ee={kernelName:uy,backendName:"cpu",kernelFunc:ILe};function ELe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o,output:s}=n,a=o;le([o,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,p=C.computePool2DInfo(a.shape,l,c,1,u,d),h=e.data.get(a.dataId).values,m=Ge(p.outShape,a.dtype,yE(h,a.shape,a.dtype,p).values),g=p.strideHeight,f=p.strideWidth,y=p.dilationHeight,b=p.dilationWidth,v=p.effectiveFilterHeight,_=p.effectiveFilterWidth,w=_-1-p.padInfo.left,T=v-1-p.padInfo.top,D=Ge(a.shape,"float32"),N=e.data.get(r.dataId).values,O=Ge(r.shape,"float32",N);for(let P=0;P<p.batchSize;++P)for(let B=0;B<p.inChannels;++B)for(let K=0;K<p.inHeight;++K)for(let X=0;X<p.inWidth;++X){let Z=K-T,te=X-w,U=0;for(let j=0;j<v;j+=y){let q=(Z+j)/g;if(!(q<0||q>=p.outHeight||Math.floor(q)!==q))for(let Q=0;Q<_;Q+=b){let oe=(te+Q)/f;if(oe<0||oe>=p.outWidth||Math.floor(oe)!==oe)continue;let ae=v*_-1-m.get(P,q,oe,B),de=j*_+Q,fe=ae===de?1:0;if(fe===0)continue;let ge=O.get(P,q,oe,B);U+=ge*fe}}D.set(U,P,K,X,B)}return e.makeTensorInfo(D.shape,D.dtype,D.values)}var wee={kernelName:cy,backendName:"cpu",kernelFunc:ELe};function Cee(t,n,e,i,r){let o=x.computeStrides(n),s=_b(t,n,e,o,r,"max"),a=yE(t,n,e,r,!0,i);return[s.values,a.values]}var Tee={kernelName:j1,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:i}=t,{filterSize:r,strides:o,pad:s,includeBatchInIndex:a}=n,l=e;le(i,"MaxPoolWithArgmax");let c=l.data.get(i.dataId).values,u=C.computePool2DInfo(i.shape,r,o,[1,1],s),[d,p]=Cee(c,i.shape,i.dtype,a,u),h=l.write(d,u.outShape,i.dtype),m=l.write(p,u.outShape,i.dtype);return[{dataId:h,shape:u.outShape,dtype:i.dtype},{dataId:m,shape:u.outShape,dtype:"int32"}]}};function DLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=x.parseAxisParam(o,r.shape),c=C.computeOutAndReduceShapes(r.shape,a)[1],u=x.sizeFromShape(c),d=[],p=e.makeTensorInfo([],"float32",new Float32Array([u]));d.push(p);let h=Is({inputs:{x:r},backend:e,attrs:{dtype:"float32"}});d.push(h);let m=v_({inputs:{a:h,b:p},backend:e});d.push(m);let g=iu({inputs:{x:m},backend:e,attrs:{axis:o,keepDims:s}});return d.forEach(f=>e.disposeIntermediateTensorInfo(f)),g}var See={kernelName:md,backendName:"cpu",kernelFunc:DLe};function ALe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;le(r,"min");let a=x.parseAxisParam(o,r.shape),l=a,c=C.getAxesPermutation(l,r.shape.length),u=r;c!=null&&(u=Pn({inputs:{x:r},backend:e,attrs:{perm:c}}),l=C.getInnerMostAxes(l.length,r.shape.length)),C.assertAxesAreInnerMostDims("min",l,u.shape.length);let[d,p]=C.computeOutAndReduceShapes(u.shape,l),h=x.sizeFromShape(p),m=x.makeZerosTypedArray(x.sizeFromShape(d),u.dtype),g=e.data.get(u.dataId).values;for(let y=0;y<m.length;++y){let b=y*h,v=g[b];for(let _=0;_<h;++_){let w=g[b+_];(Number.isNaN(w)||w<v)&&(v=w)}m[y]=v}c!=null&&e.disposeIntermediateTensorInfo(u);let f=e.makeTensorInfo(d,u.dtype,m);if(s){let y=C.expandShapeToKeepDim(d,a),b=Et({inputs:{x:f},backend:e,attrs:{shape:y}});return e.disposeIntermediateTensorInfo(f),b}return f}var kee={kernelName:fd,backendName:"cpu",kernelFunc:ALe};function NLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{paddings:o,mode:s}=i;le(r,"mirrorPad");let a=o.map((v,_)=>v[0]+r.shape[_]+v[1]),l=o.map(v=>v[0]),c=o.map((v,_)=>v[0]+r.shape[_]),u=s==="reflect"?0:1,d=e.data.get(r.dataId).values,p=r.shape.length,h=x.computeStrides(r.shape),m=x.sizeFromShape(a),g=a.length,f=x.computeStrides(a),y=x.getTypedArrayFromDType(r.dtype,m);for(let v=0;v<m;v++){let _=x.indexToLoc(v,g,f);for(let T=0;T<g;T++)_[T]<l[T]?_[T]=l[T]*2-_[T]-u:_[T]>=c[T]&&(_[T]=(c[T]-1)*2-_[T]+u);_=_.map((T,D)=>T-l[D]);let w=x.locToIndex(_,p,h);y[v]=d[w]}return{dataId:e.write(y,a,r.dtype),shape:a,dtype:r.dtype}}var Iee={kernelName:gd,backendName:"cpu",kernelFunc:NLe};var MLe=It((t,n)=>{let e=t%n;return t<0&&n<0||t>=0&&n>=0?e:(e+n)%n}),RLe=zt(yc,MLe),Eee={kernelName:yc,backendName:"cpu",kernelFunc:RLe};var Aee=Gb(z0());function HV(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{dim:o}=i,s=r.shape.length,a=o;if(a===-1&&(a=s-1),a!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${a}`);let l=x.parseAxisParam([a],r.shape),c=UV({inputs:{x:r},backend:e,attrs:{reductionIndices:l,keepDims:!1}}),u=C.expandShapeToKeepDim(c.shape,l),d=Et({inputs:{x:c},backend:e,attrs:{shape:u}}),p=b_({inputs:{a:r,b:d},backend:e}),h=dV({inputs:{x:p},backend:e}),m=iu({inputs:{x:h},backend:e,attrs:{axis:l,keepDims:!1}}),g=Et({inputs:{x:m},backend:e,attrs:{shape:u}}),f=v_({inputs:{a:h,b:g},backend:e});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),f}var Dee={kernelName:Rd,backendName:"cpu",kernelFunc:HV};function OLe(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{numSamples:o,seed:s,normalized:a}=i;le(r,"multinomial");let l=a?r:HV({inputs:{logits:r},backend:e,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=e.data.get(l.dataId).values,p=[c,o],h=x.makeZerosTypedArray(x.sizeFromShape(p),"int32");for(let m=0;m<c;++m){let g=m*u,f=new Float32Array(u-1);f[0]=d[g];for(let v=1;v<f.length;++v)f[v]=f[v-1]+d[g+v];let y=Aee.alea(s.toString()),b=m*o;for(let v=0;v<o;++v){let _=y();h[b+v]=f.length;for(let w=0;w<f.length;w++)if(_<f[w]){h[b+v]=w;break}}}return a||e.disposeIntermediateTensorInfo(l),e.makeTensorInfo(p,"int32",h)}var Nee={kernelName:q1,backendName:"cpu",kernelFunc:OLe};var FLe=Ji.nonMaxSuppressionV3Impl;function LLe(t){let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=i;le(r,"NonMaxSuppression");let c=e.data.get(r.dataId).values,u=e.data.get(o.dataId).values,{selectedIndices:d}=FLe(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var Mee={kernelName:dy,backendName:"cpu",kernelFunc:LLe};var PLe=Ji.nonMaxSuppressionV4Impl;function $Le(t){let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i;le(r,"NonMaxSuppressionPadded");let u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,{selectedIndices:p,validOutputs:h}=PLe(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var Ree={kernelName:py,backendName:"cpu",kernelFunc:$Le};var VLe=Ji.nonMaxSuppressionV5Impl;function BLe(t){let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i;le(r,"NonMaxSuppressionWithScore");let u=e.data.get(r.dataId).values,d=e.data.get(o.dataId).values,p=s,h=a,m=l,g=c,{selectedIndices:f,selectedScores:y}=VLe(u,d,p,h,m,g);return[e.makeTensorInfo([f.length],"int32",new Int32Array(f)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}var Oee={kernelName:hy,backendName:"cpu",kernelFunc:BLe};function zLe(t){let{inputs:n,backend:e,attrs:i}=t,{indices:r}=n,{dtype:o,depth:s,onValue:a,offValue:l}=i;le(r,"oneHot");let c=x.sizeFromShape(r.shape),u=new Float32Array(c*s);u.fill(l);let d=e.data.get(r.dataId).values;for(let p=0;p<c;++p)d[p]>=0&&d[p]<s&&(u[p*s+d[p]]=a);return e.makeTensorInfo([...r.shape,s],o,u)}var Fee={kernelName:xd,backendName:"cpu",kernelFunc:zLe};function C_(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(i.dtype==="complex64"){let r=ks({inputs:{input:i},backend:e}),o=C_({inputs:{x:r},backend:e}),s=nl({inputs:{input:i},backend:e}),a=C_({inputs:{x:s},backend:e}),l=gi({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return w_({backend:e,attrs:{shape:i.shape,value:0,dtype:i.dtype}})}var Lee={kernelName:Ld,backendName:"cpu",kernelFunc:C_};function Pee(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(i.dtype==="complex64"){let r=ks({inputs:{input:i},backend:e}),o=Pee({inputs:{x:r},backend:e}),s=nl({inputs:{input:i},backend:e}),a=C_({inputs:{x:s},backend:e}),l=gi({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return w_({backend:e,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}var $ee={kernelName:bd,backendName:"cpu",kernelFunc:Pee};function WV(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i;if(n.length===1)return wb({inputs:{input:n[0]},backend:e,attrs:{dim:r}});let o=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(o,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=wb({inputs:{input:u},backend:e,attrs:{dim:r}});return a.push(d),d}),c=ep({inputs:l,backend:e,attrs:{axis:r}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var Vee={kernelName:vd,backendName:"cpu",kernelFunc:WV};function GLe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{paddings:o,constantValue:s}=i;le(r,"pad");let a=o.map((b,v)=>b[0]+r.shape[v]+b[1]),l=o.map(b=>b[0]),c=e.data.get(r.dataId).values,u=x.sizeFromShape(r.shape),d=r.shape.length,p=x.computeStrides(r.shape),h=x.sizeFromShape(a),m=a.length,g=x.computeStrides(a),f=x.getTypedArrayFromDType(r.dtype,h);s!==0&&f.fill(s);for(let b=0;b<u;b++){let _=x.indexToLoc(b,d,p).map((T,D)=>T+l[D]),w=x.locToIndex(_,m,g);f[w]=c[b]}return{dataId:e.write(f,a,r.dtype),shape:a,dtype:r.dtype}}var vE={kernelName:_d,backendName:"cpu",kernelFunc:GLe};var ULe=It((t,n)=>Math.pow(t,n)),HLe=zt(xc,ULe),Bee={kernelName:xc,backendName:"cpu",kernelFunc:HLe};function WLe(t){let{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:r,paramsDenseValues:o,indices:s}=n,{outputRaggedRank:a}=i,l=r.map(y=>e.data.get(y.dataId).values),c=r.map(y=>y.shape),u=e.data.get(o.dataId).values,d=e.data.get(s.dataId).values,[p,h,m]=rE(l,c,u,o.shape,o.dtype,d,s.shape,a),g=p.map(y=>e.makeTensorInfo([y.length],"int32",y)),f=e.makeTensorInfo(m,o.dtype,h);return g.concat([f])}var zee={kernelName:X1,backendName:"cpu",kernelFunc:WLe};function jLe(t){let{inputs:n,backend:e}=t,{starts:i,limits:r,deltas:o}=n,s=e.data.get(i.dataId).values,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,[c,u]=oE(s,i.shape,i.dtype,a,r.shape,l,o.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],i.dtype,u);return[d,p]}var Gee={kernelName:K1,backendName:"cpu",kernelFunc:jLe};function qLe(t){let{inputs:n,backend:e,attrs:i}=t,{shape:r,values:o,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.data.get(r.dataId).values,u=e.data.get(o.dataId).values,d=e.data.get(s.dataId).values,p=a.map(f=>e.data.get(f.dataId).values),h=a.map(f=>f.shape),[m,g]=sE(c,r.shape,u,o.shape,o.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(m,o.dtype,g)}var Uee={kernelName:Y1,backendName:"cpu",kernelFunc:qLe};function XLe(t){let{backend:n,attrs:e}=t,{start:i,stop:r,dtype:o,step:s}=e,a=aE(i,r,s,o);return n.makeTensorInfo([a.length],o,a)}var Hee={kernelName:my,backendName:"cpu",kernelFunc:XLe};var KLe=tt(vc,t=>1/t),Wee={kernelName:vc,backendName:"cpu",kernelFunc:KLe};function YLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i;le(r,"resizeBilinear");let l=x.computeStrides(r.shape),[c,u]=a,[d,p,h,m]=r.shape,g=e.data.get(r.dataId).values,f=new Float32Array(x.sizeFromShape([d,c,u,m])),y=[o&&c>1?p-1:p,o&&u>1?h-1:h],b=[o&&c>1?c-1:c,o&&u>1?u-1:u],v=0,_=y[0]/b[0],w=y[1]/b[1];for(let T=0;T<d;T++)for(let D=0;D<c;D++){let N;s?N=_*(D+.5)-.5:N=_*D;let O=Math.max(0,Math.floor(N)),P=N-O,B=Math.min(p-1,Math.ceil(N)),K=T*l[0]+O*l[1],X=T*l[0]+B*l[1];for(let Z=0;Z<u;Z++){let te;s?te=w*(Z+.5)-.5:te=w*Z;let U=Math.max(0,Math.floor(te)),j=te-U,q=Math.min(h-1,Math.ceil(te)),Q=K+U*l[2],oe=X+U*l[2],ae=K+q*l[2],de=X+q*l[2];for(let fe=0;fe<m;fe++){let ge=g[Q+fe],xe=g[oe+fe],Ne=g[ae+fe],ve=g[de+fe],Ue=ge+(Ne-ge)*j,se=xe+(ve-xe)*j,we=Ue+(se-Ue)*P;f[v++]=we}}}return e.makeTensorInfo([d,c,u,m],"float32",f)}var jee={kernelName:kd,backendName:"cpu",kernelFunc:YLe};function QLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i;le([o,r],"resizeBilinearGrad");let a=x.computeStrides(r.shape),[l,c,u,d]=r.shape,[,p,h]=o.shape,m=new Float32Array(l*c*u*d),g=[s&&p>1?c-1:c,s&&h>1?u-1:u],f=[s&&p>1?p-1:p,s&&h>1?h-1:h],y=g[0]/f[0],b=g[1]/f[1],v=e.data.get(o.dataId).values,_=0;for(let w=0;w<l;w++){let T=w*a[0];for(let D=0;D<p;D++){let N=D*y,O=Math.floor(N),P=Math.min(Math.ceil(N),c-1),B=T+O*a[1],K=T+P*a[1],X=N-O,Z=1-X;for(let te=0;te<h;te++){let U=te*b,j=Math.floor(U),q=Math.min(Math.ceil(U),u-1),Q=U-j,oe=1-Q,ae=B+j*a[2],de=B+q*a[2],fe=K+j*a[2],ge=K+q*a[2],xe=Z*oe,Ne=Z*Q,ve=X*oe,Ue=X*Q;for(let se=0;se<d;se++){let we=v[_++];m[ae+se]+=we*xe,m[de+se]+=we*Ne,m[fe+se]+=we*ve,m[ge+se]+=we*Ue}}}}return e.makeTensorInfo([l,u,c,d],"float32",m)}var qee={kernelName:yy,backendName:"cpu",kernelFunc:QLe};function ZLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i;le(r,"resizeNearestNeighbor");let l=x.computeStrides(r.shape),[c,u]=a,[d,p,h,m]=r.shape,g=e.data.get(r.dataId).values,f=new Float32Array(d*c*u*m),y=[o&&c>1?p-1:p,o&&u>1?h-1:h],b=[o&&c>1?c-1:c,o&&u>1?u-1:u],v=y[0]/b[0],_=y[1]/b[1],w=0;for(let T=0;T<d;T++){let D=T*l[0];for(let N=0;N<c;N++){let O=s?v*(N+.5):v*N,P=Math.min(p-1,o?Math.round(O):Math.floor(O));s&&(P=Math.max(0,P));let B=D+P*l[1];for(let K=0;K<u;K++){let X=s?_*(K+.5):_*K,Z=Math.min(h-1,o?Math.round(X):Math.floor(X));s&&(Z=Math.max(0,Z));let te=B+Z*l[2];for(let U=0;U<m;U++){let j=g[te+U];f[w++]=j}}}}return e.makeTensorInfo([d,c,u,m],r.dtype,f)}var Xee={kernelName:Sd,backendName:"cpu",kernelFunc:ZLe};function JLe(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i;le([o,r],"resizeNearestNeighborGrad");let a=x.computeStrides(r.shape),l=x.computeStrides(o.shape),[c,u,d,p]=r.shape,[,h,m]=o.shape,g=new Float32Array(c*u*d*p),f=e.data.get(o.dataId).values,y=[s&&h>1?u-1:u,s&&m>1?d-1:d],b=[s&&h>1?h-1:h,s&&m>1?m-1:m],v=y[0]/b[0],_=y[1]/b[1],w=1/v,T=1/_,D=Math.ceil(w)*2+2,N=Math.ceil(T)*2+2;for(let O=0;O<c;O++){let P=O*a[0];for(let B=0;B<u;B++){let K=P+B*a[1],X=Math.floor(B*w),Z=Math.floor(X-D/2);for(let te=0;te<d;te++){let U=K+te*a[2],j=Math.floor(te*T),q=Math.floor(j-N/2);for(let Q=0;Q<p;Q++){let oe=0;for(let ae=0;ae<D;ae++){let de=ae+Z;if(de<0||de>=h)continue;let fe=P+de*l[1],ge=de*v,xe=Math.min(u-1,s?Math.round(ge):Math.floor(ge));if(B===xe)for(let Ne=0;Ne<N;Ne++){let ve=Ne+q;if(ve<0||ve>=m)continue;let Ue=fe+ve*l[2],se=ve*_,we=Math.min(d-1,s?Math.round(se):Math.floor(se));te===we&&(oe+=f[Ue+Q])}}g[U+Q]=oe}}}}return e.makeTensorInfo(r.shape,r.dtype,g)}var Kee={kernelName:gy,backendName:"cpu",kernelFunc:JLe};function ePe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dims:o}=i;le(r,"reverse");let s=r.shape.length,a=x.parseAxisParam(o,r.shape);if(s===0)return er({inputs:{x:r},backend:e});let l=new tn(r.shape,r.dtype),c=e.bufferSync(r);for(let u=0;u<l.size;u++){let d=l.indexToLoc(u),p=d.slice();a.forEach(h=>p[h]=r.shape[h]-1-p[h]),l.set(c.get(...p),...d)}return e.makeTensorInfo(l.shape,l.dtype,l.values)}var Yee={kernelName:Id,backendName:"cpu",kernelFunc:ePe};var Qee={kernelName:Cy,backendName:"cpu",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:i}=t,{radians:r,fillValue:o,center:s}=n,a=e,l=x.getTypedArrayFromDType(i.dtype,x.sizeFromShape(i.shape)),[c,u,d,p]=i.shape,[h,m]=C.getImageCenter(s,u,d),g=255,f=Math.sin(r),y=Math.cos(r),b=a.data.get(i.dataId).values;for(let _=0;_<c;_++){let w=_*d*u*p;for(let T=0;T<u;T++){let D=T*(d*p);for(let N=0;N<d;N++){let O=N*p;for(let P=0;P<p;P++){let B=[c,T,N,P],K=B[2],X=B[1],Z=(K-h)*y-(X-m)*f,te=(K-h)*f+(X-m)*y;Z=Math.round(Z+h),te=Math.round(te+m);let U=o;if(typeof o!="number"&&(P===3?U=g:U=o[P]),Z>=0&&Z<d&&te>=0&&te<u){let q=te*(d*p),Q=Z*p,oe=w+q+Q+P;U=b[oe]}let j=w+D+O+P;l[j]=U}}}}return{dataId:a.write(l,i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}};var tPe=tt(Cc,t=>{let n=Math.floor(t);return t-n<.5?Math.floor(t):t-n>.5?Math.ceil(t):n%2===0?n:n+1}),Zee={kernelName:Cc,backendName:"cpu",kernelFunc:tPe};function nPe(t){let{inputs:n,backend:e,attrs:i}=t,{indices:r,updates:o}=n,{shape:s}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=C.calculateShapes(o,r,s),p=!0,h=e.bufferSync(r),m=e.bufferSync(o),g=aa(h,m,s,d,c,l,a,u,0,p);return e.makeTensorInfo(s,g.dtype,g.values)}var Jee={kernelName:Q1,backendName:"cpu",kernelFunc:nPe};function iPe(t,n){let e=0,i=t.length,r=0;for(;e<i;)r=Math.floor((e+i)/2),t[r]<n?e=r+1:i=r;return i}function rPe(t,n){let e=0,i=t.length,r=0;for(;e<i;)r=Math.floor((e+i)/2),t[r]<=n?e=r+1:i=r;return i}function ete(t,n,e,i,r,o){let s=x.getArrayFromDType("int32",e*r);for(let a=0;a<e;++a){let l=t.slice(a*i,(a+1)*i),c=a*r;for(let u=0;u<r;++u)s[c+u]=o==="left"?iPe(l,n[u+c]):rPe(l,n[u+c])}return s}function oPe(t){let{inputs:n,backend:e,attrs:i}=t,{sortedSequence:r,values:o}=n,{side:s}=i,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,c=ete(a,l,r.shape[0],r.shape[1],o.shape[1],s);return e.makeTensorInfo(o.shape,"int32",c)}var tte={kernelName:J1,backendName:"cpu",kernelFunc:oPe};function sPe(t){let{inputs:n,backend:e}=t,{condition:i,t:r,e:o}=n;le([i,r,o],"select");let s=i.shape.length,a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,c=e.data.get(o.dataId).values,u=ni(r.dtype,o.dtype),d=x.makeZerosTypedArray(x.sizeFromShape(r.shape),u),p=0,h=s===0||s>1||r.shape.length===1?1:x.sizeFromShape(r.shape.slice(1));for(let m=0;m<a.length;m++)for(let g=0;g<h;g++)a[m]===1?d[p++]=l[m]:d[p++]=c[m];return e.makeTensorInfo(r.shape,u,d)}var nte={kernelName:Ed,backendName:"cpu",kernelFunc:sPe};var aPe=C.SELU_SCALEALPHA,lPe=C.SELU_SCALE,cPe=tt(Sc,t=>t>=0?lPe*t:aPe*(Math.exp(t)-1)),ite={kernelName:Sc,backendName:"cpu",kernelFunc:cPe};var uPe=tt(Ec,t=>t<0?-1:t>0?1:0),rte={kernelName:Ec,backendName:"cpu",kernelFunc:uPe};var dPe=tt(kc,t=>Math.sin(t)),ote={kernelName:kc,backendName:"cpu",kernelFunc:dPe};var pPe=tt(Ic,t=>Math.sinh(t)),ste={kernelName:Ic,backendName:"cpu",kernelFunc:pPe};var hPe=11920928955078125e-23,ate=Math.log(hPe)+2,mPe=tt(Ac,t=>{let n=t>-ate,e=t<ate,i=Math.exp(t),r;return e?r=i:n?r=t:r=Math.log(1+i),r}),lte={kernelName:Ac,backendName:"cpu",kernelFunc:mPe};function fPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,paddings:s}=i;le([r],"spaceToBatchND");let a=x.sizeFromShape(o),l=[[0,0]];l.push(...s);for(let T=1+o.length;T<r.shape.length;++T)l.push([0,0]);let c=vE.kernelFunc({inputs:{x:r},backend:e,attrs:{paddings:l,constantValue:0}}),u=C.getReshaped(c.shape,o,a,!1),d=C.getPermuted(u.length,o.length,!1),p=C.getReshapedPermuted(c.shape,o,a,!1),g=Et({inputs:{x:c},backend:e,attrs:{shape:u}}),b=Pn({inputs:{x:g},backend:e,attrs:{perm:d}}),w=Et({inputs:{x:b},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(b),w}var cte={kernelName:Nd,backendName:"cpu",kernelFunc:fPe};function gPe(t){let{inputs:n,backend:e}=t,{indices:i,values:r,denseShape:o,defaultValue:s}=n;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${o.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${i.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${r.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.data.get(i.dataId).values,l=e.data.get(r.dataId).values,c=e.data.get(o.dataId).values,u=e.data.get(s.dataId).values[0],[d,p,h,m,g]=lE(a,i.shape,i.dtype,l,r.dtype,c,u);return[e.makeTensorInfo(p,i.dtype,d),e.makeTensorInfo([p[0]],r.dtype,h),e.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(f=>Number(f)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}var ute={kernelName:ek,backendName:"cpu",kernelFunc:gPe};function yPe(t){let{inputs:n,backend:e}=t,{inputIndices:i,inputShape:r,newShape:o}=n;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${i.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${r.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);let s=Array.from(e.data.get(r.dataId).values),a=e.data.get(i.dataId).values,l=Array.from(e.data.get(o.dataId).values),[c,u,d]=cE(a,i.shape,i.dtype,s,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}var dte={kernelName:tk,backendName:"cpu",kernelFunc:yPe};function bPe(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(i.dataId).values,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,[c,u]=vb(s,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}var pte={kernelName:nk,backendName:"cpu",kernelFunc:bPe};function xPe(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");let s=e.data.get(i.dataId).values,a=e.data.get(r.dataId).values,l=e.data.get(o.dataId).values,[c,u]=vb(s,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}var hte={kernelName:ik,backendName:"cpu",kernelFunc:xPe};function vPe(t){let{inputs:n,backend:e,attrs:i}=t,{sparseIndices:r,sparseValues:o,defaultValue:s}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=C.calculateShapes(o,r,a),h=!1,m=e.bufferSync(r),g;switch(o.dtype){case"bool":{let f=e.bufferSync(o),y=!!e.data.get(s.dataId).values[0];g=aa(m,f,a,p,u,c,l,d,y,h);break}case"float32":{let f=e.bufferSync(o),y=e.data.get(s.dataId).values[0];g=aa(m,f,a,p,u,c,l,d,y,h);break}case"int32":{let f=e.bufferSync(o),y=e.data.get(s.dataId).values[0];g=aa(m,f,a,p,u,c,l,d,y,h);break}case"string":{let f=e.bufferSync(o),y=x.decodeString(e.data.get(s.dataId).values[0]);g=aa(m,f,a,p,u,c,l,d,y,h);break}default:throw new Error(`Unsupported type ${o.dtype}`)}return e.makeTensorInfo(a,g.dtype,g.values)}var mte={kernelName:rk,backendName:"cpu",kernelFunc:vPe};function _Pe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{numOrSizeSplits:o,axis:s}=i,a=x.parseAxisParam(s,r.shape)[0],l=C.prepareSplitSize(r,o,a),c=new Array(r.shape.length).fill(0),u=r.shape.slice();return l.map(d=>{let p=[...u];p[a]=d;let h=Ds({inputs:{x:r},backend:e,attrs:{begin:c,size:p}});return c[a]+=d,h})}var fte={kernelName:Md,backendName:"cpu",kernelFunc:_Pe};var gte={kernelName:by,backendName:"cpu",kernelFunc:({inputs:t,backend:n})=>{let{x:e}=t,i=n;le(e,"square");let r=i.data.get(e.dataId).values,o=new Float32Array(r.length);for(let a=0;a<r.length;++a){let l=r[a];o[a]=l*l}return{dataId:i.write(o,e.shape,e.dtype),shape:e.shape,dtype:e.dtype}}};var wPe=tt(Lc,(t,n)=>{let e=n;return isNaN(t)?NaN:t>0?1:e.alpha}),yte={kernelName:Lc,backendName:"cpu",kernelFunc:wPe};function CPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=i;le(r,"stridedSlice");let{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:f,isSimpleSlice:y,begin:b,end:v,strides:_}=Ti.sliceInfo(r.shape,o,s,a,l,c,u,d,p),w;if(g)w=Et({inputs:{x:r},backend:e,attrs:{shape:m}});else if(f||y){x.assert(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);let T=Ti.computeOutShape(b,v,_),D=Ds({inputs:{x:r},backend:e,attrs:{begin:b,size:T}});w=Et({inputs:{x:D},backend:e,attrs:{shape:m}}),e.disposeIntermediateTensorInfo(D)}else{let T=e.bufferSync(r),D=uE(h,T,_,b);w=e.makeTensorInfo(m,D.dtype,D.values)}return w}var bte={kernelName:xy,backendName:"cpu",kernelFunc:CPe};function TPe(t){let{inputs:n,backend:e,attrs:i}=t,{separator:r,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,p=e.data.get(u.dataId).values,h=e.data.get(d.dataId).values,[m,g]=dE(p,h,r,o,s,a,l,c);return[e.makeTensorInfo([m.length],"string",m),e.makeTensorInfo(d.shape,"int32",g)]}var xte={kernelName:ok,backendName:"cpu",kernelFunc:TPe};function SPe(t){let{inputs:n,backend:e,attrs:i}=t,{skipEmpty:r}=i,{input:o,delimiter:s}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.data.get(o.dataId).values,l=e.data.get(s.dataId).values[0],[c,u,d]=pE(a,l,r),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var vte={kernelName:sk,backendName:"cpu",kernelFunc:SPe};function kPe(t){let{inputs:n,backend:e,attrs:i}=t,{numBuckets:r}=i,{input:o}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");let s=e.data.get(o.dataId).values,a=hE(s,r);return e.makeTensorInfo(o.shape,"int32",a)}var _te={kernelName:ak,backendName:"cpu",kernelFunc:kPe};var IPe=tt(Oc,t=>Math.tan(t)),wte={kernelName:Oc,backendName:"cpu",kernelFunc:IPe};var EPe=tt(Fc,t=>Math.tanh(t)),Cte={kernelName:Fc,backendName:"cpu",kernelFunc:EPe};function DPe(t){let{inputs:n,backend:e}=t,{tensor:i,indices:r,updates:o}=n,{sliceRank:s,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=C.calculateShapes(o,r,i.shape),d=!1,p=e.bufferSync(r),h=e.bufferSync(o),m=e.bufferSync(i),g=aa(p,h,i.shape,u,l,a,s,c,m,d);return e.makeTensorInfo(i.shape,g.dtype,g.values)}var Tte={kernelName:Z1,backendName:"cpu",kernelFunc:DPe};function APe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reps:o}=i;le(r,"tile");let s=mE(e.bufferSync(r),o);return e.makeTensorInfo(s.shape,s.dtype,s.values)}var Ste={kernelName:Ua,backendName:"cpu",kernelFunc:APe};function NPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{k:o,sorted:s}=i;le(r,"topk");let a=e.data.get(r.dataId).values,[l,c]=fE(a,r.shape,r.dtype,o,s);return[e.makeTensorInfo(l.shape,l.dtype,l.values),e.makeTensorInfo(c.shape,c.dtype,c.values)]}var kte={kernelName:vy,backendName:"cpu",kernelFunc:NPe};function MPe(t){let{inputs:n,attrs:e,backend:i}=t,{image:r,transforms:o}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=e,[u,d,p,h]=r.shape,[m,g]=c??[d,p],f=[u,m,g,h],y=x.computeStrides(r.shape),b=y[0],v=y[1],_=y[2],w=x.computeStrides(f),T=w[0],D=w[1],N=w[2],O=x.getTypedArrayFromDType(r.dtype,x.sizeFromShape(f));O.fill(l);let P=i.data.get(r.dataId).values,B=i.data.get(o.dataId).values;for(let X=0;X<u;++X){let Z=o.shape[0]===1?B:B.subarray(X*8,X*8+8);for(let te=0;te<m;++te)for(let U=0;U<g;++U)for(let j=0;j<h;++j){let q,Q=Z[6]*U+Z[7]*te+1;if(Q===0)continue;let oe=(Z[0]*U+Z[1]*te+Z[2])/Q,ae=(Z[3]*U+Z[4]*te+Z[5])/Q,de=Ite(oe,p,a),fe=Ite(ae,d,a);switch(s){case"nearest":q=PPe(P,d,p,b,v,_,X,fe,de,j,l);break;case"bilinear":q=$Pe(P,d,p,b,v,_,X,fe,de,j,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}let ge=X*T+te*D+U*N+j;O[ge]=q}return i.makeTensorInfo(f,r.dtype,O)}return{dataId:i.write(O,f,r.dtype),shape:r.shape,dtype:r.dtype}}var Ete={kernelName:_y,backendName:"cpu",kernelFunc:MPe};function Ite(t,n,e){switch(e){case"reflect":return RPe(t,n);case"wrap":return OPe(t,n);case"nearest":return LPe(t,n);case"constant":default:return FPe(t,n)}}function RPe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let i=2*n;e<i&&(e=i*Math.trunc(-e/i)+e),e=e<-n?e+i:-e-1}else if(e>n-1)if(n<=1)e=0;else{let i=2*n;e-=i*Math.trunc(e/i),e>=n&&(e=i-e-1)}return x.clamp(0,e,n-1)}function OPe(t,n){let e=t;if(e<0)if(n<=1)e=0;else{let i=n-1;e+=n*(Math.trunc(-e/i)+1)}else if(e>n-1)if(n<=1)e=0;else{let i=n-1;e-=n*Math.trunc(e/i)}return x.clamp(0,e,n-1)}function FPe(t,n){return t}function LPe(t,n){return x.clamp(0,t,n-1)}function T_(t,n,e,i,r,o,s,a,l,c,u){let d=s*i+a*r+l*o+c;return 0<=a&&a<n&&0<=l&&l<e?t[d]:u}function PPe(t,n,e,i,r,o,s,a,l,c,u){let d=Math.round(a),p=Math.round(l);return T_(t,n,e,i,r,o,s,d,p,c,u)}function $Pe(t,n,e,i,r,o,s,a,l,c,u){let d=Math.floor(a),p=Math.floor(l),h=d+1,m=p+1,g=(m-l)*T_(t,n,e,i,r,o,s,d,p,c,u)+(l-p)*T_(t,n,e,i,r,o,s,d,m,c,u),f=(m-l)*T_(t,n,e,i,r,o,s,h,p,c,u)+(l-p)*T_(t,n,e,i,r,o,s,h,m,c,u);return(h-a)*g+(a-d)*f}function VPe(t){let{inputs:n,attrs:e,backend:i}=t,{axis:r}=e,{x:o}=n;le(o,"unique");let s=i.data.get(o.dataId).values,{outputValues:a,outputShape:l,indices:c}=gE(s,r,o.shape,o.dtype);return[i.makeTensorInfo(l,o.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}var Dte={kernelName:wy,backendName:"cpu",kernelFunc:VPe};function BPe(t){let{inputs:n,backend:e,attrs:i}=t,{value:r}=n,{axis:o}=i;o<0&&(o+=r.shape.length);let s=r.shape.length,a=r.shape[o],l=new Array(s-1),c=0;for(let h=0;h<s;h++)h!==o&&(l[c++]=r.shape[h]);let u=new Array(s).fill(0),d=r.shape.slice();d[o]=1;let p=new Array(a);for(let h=0;h<p.length;h++){u[o]=h;let m=Ds({inputs:{x:r},backend:e,attrs:{begin:u,size:d}});p[h]=Et({inputs:{x:m},backend:e,attrs:{shape:l}}),e.disposeIntermediateTensorInfo(m)}return p}var Ate={kernelName:Od,backendName:"cpu",kernelFunc:BPe};function zPe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,segmentIds:o}=n,{numSegments:s}=i;le(r,"unsortedSegmentSum");let a=r.shape.length,l=o.shape.length,c=[],u=[],d=a-l,p=o;for(let m=0;m<d;++m){let g=wb({inputs:{input:p},backend:e,attrs:{dim:m+1}});p=g,u.push(g)}for(let m=0;m<s;++m){let g=x.createScalarValue(m,"int32"),f=e.makeTensorInfo([],"int32",g),y=cV({inputs:{a:f,b:p},backend:e}),b=Is({inputs:{x:y},backend:e,attrs:{dtype:"float32"}}),v=bm({inputs:{a:b,b:r},backend:e}),_=iu({inputs:{x:v},backend:e,attrs:{axis:0,keepDims:!1}});c.push(_),u.push(f),u.push(y),u.push(b),u.push(v),u.push(_)}let h=WV({inputs:c,backend:e,attrs:{axis:0}});return u.forEach(m=>e.disposeIntermediateTensorInfo(m)),h}var Nte={kernelName:Fd,backendName:"cpu",kernelFunc:zPe};var GPe=[nJ,uZ,iJ,rJ,fZ,oJ,sJ,aJ,lJ,cJ,uJ,dJ,pJ,hJ,mJ,gJ,yJ,bJ,xJ,tJ,vJ,_J,wJ,gZ,CJ,mZ,yZ,TJ,dZ,SJ,IJ,EJ,DJ,AJ,NJ,MJ,RJ,OJ,FJ,LJ,PJ,$J,VJ,BJ,zJ,GJ,UJ,HJ,WJ,jJ,qJ,XJ,YJ,KZ,QJ,bZ,ZJ,xZ,JJ,vZ,eee,tee,nee,_Z,wZ,iee,ree,oee,see,CZ,TZ,pZ,aee,kJ,lee,cee,uee,YZ,SZ,kZ,dee,IZ,pee,hee,mee,fee,gee,yee,bee,EZ,xee,vee,_ee,wee,Tee,See,kee,DZ,Iee,Eee,Nee,AZ,NZ,Mee,Ree,Oee,MZ,Fee,$ee,Vee,vE,Bee,QZ,OZ,zee,Gee,Uee,Hee,hZ,__,Wee,ZZ,JZ,eJ,jee,qee,Xee,Kee,Yee,Qee,Zee,VZ,Jee,tte,nte,ite,zZ,rte,ote,ste,GZ,Dee,lte,cte,ute,dte,pte,hte,mte,fte,HZ,gte,WZ,jZ,yte,bte,xte,vte,_te,qZ,KJ,wte,Cte,Tte,Ste,kte,Ete,RZ,Dte,Ate,Nte,Lee];for(let t of GPe)ck(t);var vm={},_E={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Mte(t,n){vm[t]=n}function Io(t,n){if(!(t in vm)||n!=null){let i=HPe(t,n);if(i!==null)vm[t]=i;else return console.log("Could not get context for WebGL version",t),null}let e=vm[t];return e==null||e.isContextLost()?(delete vm[t],Io(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),vm[t])}function UPe(t){if(!G().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function HPe(t,n){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let e=n??UPe(t);return e.addEventListener("webglcontextlost",i=>{i.preventDefault(),delete vm[t]},!1),G().getBool("SOFTWARE_WEBGL_ENABLED")&&(_E.failIfMajorPerformanceCaveat=!1),t===1?e.getContext("webgl",_E)||e.getContext("experimental-webgl",_E):e.getContext("webgl2",_E)}var _m=function(t){return t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH",t}(_m||{}),hr=function(t){return t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t}(hr||{}),tr=function(t){return t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16",t}(tr||{});function wm(t,n){return[n,t]}function Rte(t,n){return t*n}function S_(t){let n=x.sizeFromShape(t),e=Math.ceil(n/4);return x.sizeToSquarishShape(e)}function il(t,n){return[Math.max(1,Math.ceil(n/2)),Math.max(1,Math.ceil(t/2))]}function Ote(t,n){let[e,i]=il(t,n);return e*i*4}function k_(t,n){let e=t,i,r,o,s,a,l,c,u,d,p;return G().getNumber("WEBGL_VERSION")===2?(i=e.R32F,r=e.R16F,o=e.RGBA16F,s=e.RGBA32F,a=e.RED,c=4,u=1,d=e.HALF_FLOAT,p=e.FLOAT,l=e.RGBA8):(i=t.RGBA,r=t.RGBA,o=t.RGBA,s=e.RGBA,a=t.RGBA,c=4,u=4,d=n!=null?n.HALF_FLOAT_OES:null,p=t.FLOAT,l=t.RGBA),{internalFormatFloat:i,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:p}}function Oe(t,n){let e=n();return G().getBool("DEBUG")&&WPe(t),e}function WPe(t){let n=t.getError();if(n!==t.NO_ERROR)throw new Error("WebGL Error: "+XPe(t,n))}var jPe=596e-10,qPe=65504;function Fte(t){return!!(G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||jPe<Math.abs(t)&&Math.abs(t)<qPe)}function XPe(t,n){switch(n){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${n}`}}function I_(t,n){return ru(t,()=>t.getExtension(n),'Extension "'+n+'" not supported on this browser.')}function Lte(t,n){let e=ru(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Oe(t,()=>t.shaderSource(e,n)),Oe(t,()=>t.compileShader(e)),t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(e)),new Error("Failed to compile vertex shader.");return e}function Pte(t,n){let e=ru(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Oe(t,()=>t.shaderSource(e,n)),Oe(t,()=>t.compileShader(e)),G().get("ENGINE_COMPILE_ONLY"))return e;if(t.getShaderParameter(e,t.COMPILE_STATUS)===!1)throw YV(n,t.getShaderInfoLog(e)),new Error("Failed to compile fragment shader.");return e}var KPe=/ERROR: [0-9]+:([0-9]+):/g;function YV(t,n){let e=KPe.exec(n);if(e==null){console.log(`Couldn't parse line number in error: ${n}`),console.log(t);return}let i=+e[1],r=t.split(`
`),o=r.length.toString().length+2,s=r.map((d,p)=>x.rightPad((p+1).toString(),o)+d),a=0;for(let d=0;d<s.length;d++)a=Math.max(s[d].length,a);let l=s.slice(0,i-1),c=s.slice(i-1,i),u=s.slice(i);console.log(l.join(`
`)),console.log(n.split(`
`)[0]),console.log(`%c ${x.rightPad(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function $te(t){return ru(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function Vte(t,n){if(Oe(t,()=>t.linkProgram(n)),!G().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function CE(t,n){if(Oe(t,()=>t.validateProgram(n)),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function Bte(t,n){let e=ru(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Oe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),Oe(t,()=>t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function zte(t,n){let e=ru(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Oe(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e)),Oe(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)),e}function Gte(t){return ru(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function Ute(t,n){let e=G().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||n<=0){let i=`[${t}x${n}]`;throw new Error("Requested texture size "+i+" is invalid.")}if(t>e||n>e){let i=`[${t}x${n}]`,r=`[${e}x${e}]`;throw new Error("Requested texture size "+i+" greater than WebGL maximum on this browser / GPU "+r+".")}}function Hte(t){return ru(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function QV(t,n,e,i,r,o,s){let a=t.getAttribLocation(n,e);return a===-1?!1:(Oe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,i)),Oe(t,()=>t.vertexAttribPointer(a,r,t.FLOAT,!1,o,s)),Oe(t,()=>t.enableVertexAttribArray(a)),!0)}function YPe(t,n,e){ZPe(t,e),Oe(t,()=>t.activeTexture(t.TEXTURE0+e)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,n))}function Wte(t,n,e){return ru(t,()=>t.getUniformLocation(n,e),'uniform "'+e+'" not present in program.')}function jte(t,n,e){return t.getUniformLocation(n,e)}function qte(t,n,e,i){Oe(t,()=>YPe(t,n,i)),Oe(t,()=>t.uniform1i(e,i))}function TE(t,n,e){Oe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Oe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0))}function ZV(t,n){Oe(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Oe(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function E_(t){let n=t.checkFramebufferStatus(t.FRAMEBUFFER);if(n!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+QPe(t,n))}function QPe(t,n){switch(n){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${n}`}}function ru(t,n,e){let i=Oe(t,()=>n());if(i==null)throw new Error(e);return i}function ZPe(t,n){let e=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,i=n+t.TEXTURE0;if(i<t.TEXTURE0||i>e){let r=`[gl.TEXTURE0, gl.TEXTURE${e}]`;throw new Error(`textureUnit must be in ${r}.`)}}function tp(t,n=2){return x.sizeFromShape(t.slice(0,t.length-n))}function np(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function D_(t){let n=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(n=[tp(t),...np(t)]),n}function Xte(t,n=!1){let e=G().getNumber("WEBGL_MAX_TEXTURE_SIZE"),i=G().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");i===1/0&&G().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(i=e/2),n&&(e=e*2,i=i*2,t=t.map((a,l)=>l>=t.length-2?x.nearestLargerEven(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=x.squeezeShape(t).newShape);let r=x.sizeFromShape(t),o=null;t.length<=1&&r<=e?o=[1,r]:t.length===2&&t[0]<=e&&t[1]<=e?o=t:t.length===3&&t[0]*t[1]<=e&&t[2]<=e?o=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=e&&t[1]*t[2]<=e?o=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=e&&t[3]<=e?o=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=e&&t[1]*t[2]*t[3]<=e&&(o=[t[0],t[1]*t[2]*t[3]]);let s=o!=null&&Math.max(...o)>i&&Math.min(...o)<=(n?2:1)&&Math.min(...o)>0;if(o==null||s)if(n){let a=tp(t),l=2,c=2;t.length&&([l,c]=np(t)),r=a*(l/2)*(c/2),o=x.sizeToSquarishShape(r).map(u=>u*2)}else o=x.sizeToSquarishShape(r);return o}function wE(t){return t%2===0}function Cm(t,n){if(t=t.slice(-2),n=n.slice(-2),x.arraysEqual(t,n)||!t.length||!n.length||t[0]===0||t[1]===0||n[0]===0||n[1]===0)return!0;if(t.length!==n.length){let e=t[t.length-1],i=n[n.length-1];if(e===i||wE(e)&&wE(i)&&(t[0]===1||n[0]===1))return!0}return t[1]===n[1]&&wE(t[0])&&wE(n[0])}var qV,XV;function Kte(t){if(qV==null){let n=Io(t);qV=n.getParameter(n.MAX_TEXTURE_SIZE)}return qV}function Yte(t){if(XV==null){let n=Io(t);XV=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,XV)}function Qte(t){if(t===0)return 0;let n,e=Io(t);return qo(e,"EXT_disjoint_timer_query_webgl2")&&t===2?n=2:qo(e,"EXT_disjoint_timer_query")?n=1:n=0,n}function qo(t,n){return t.getExtension(n)!=null}function JV(t){try{if(Io(t)!=null)return!0}catch(n){return console.log("Error when getting WebGL context: ",n),!1}return!1}function Zte(t){if(t===0)return!1;let n=Io(t);if(t===1){if(!qo(n,"OES_texture_float"))return!1}else if(!qo(n,"EXT_color_buffer_float"))return!1;return KV(n)}function Jte(t){if(t===0)return!1;let n=Io(t);if(t===1){if(!qo(n,"OES_texture_float")||!qo(n,"WEBGL_color_buffer_float"))return!1}else{if(qo(n,"EXT_color_buffer_float"))return KV(n);let i="EXT_color_buffer_half_float";if(qo(n,i)){let r=n.getExtension(i);return JPe(n,r)}return!1}return KV(n)}function KV(t){let n=k_(t),e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatFloat,1,1,0,n.textureFormatFloat,n.textureTypeFloat,null);let o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let s=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(o),s}function JPe(t,n){let e=k_(t,n),i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatHalfFloat,1,1,0,e.textureFormatFloat,e.textureTypeHalfFloat,null);let s=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,s),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0);let a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(i),t.deleteFramebuffer(s),a}function ene(t){return t!==2?!1:Io(t).fenceSync!=null}function rl(t,n){Array.isArray(t)||(t=[t]),t.forEach(e=>{e!=null&&x.assert(e.dtype!=="complex64",()=>`${n} does not support complex64 tensors in the WebGL backend.`)})}var Ye=G();Ye.registerFlag("HAS_WEBGL",()=>Ye.getNumber("WEBGL_VERSION")>0);Ye.registerFlag("WEBGL_VERSION",()=>JV(2)?2:JV(1)?1:0);Ye.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Ye.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Ye.get("WEBGL_VERSION")===2);Ye.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Ye.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Ye.registerFlag("WEBGL_PACK",()=>Ye.getBool("HAS_WEBGL"));Ye.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_CLIP",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_REDUCE",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_LAZILY_UNPACK",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_CONV_IM2COL",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Ye.getBool("WEBGL_PACK"));Ye.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>Kte(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>Yte(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let t=Ye.getNumber("WEBGL_VERSION");return t===0?0:Qte(t)});Ye.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Ye.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Vd.isMobile());Ye.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>Zte(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Ye.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Ye.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Ye.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>Jte(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_FENCE_API_ENABLED",()=>ene(Ye.getNumber("WEBGL_VERSION")));Ye.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Ye.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Ye.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Ye.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Vd.isMobile()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Ye.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Ye.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Ye.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Ye.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Ye.registerFlag("WEBGL_EXP_CONV",()=>!1);Ye.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Ye.getBool("IS_TEST"));Ye.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Ye.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Ye.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Ye.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);function $n(){let t,n,e,i,r,o,s,a,l,c;return G().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",n="in",e="out",i="in",r="texture",o="outputColor",s="out vec4 outputColor;",a=G().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",n="attribute",e="varying",i="varying",r="texture2D",o="gl_FragColor",s="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:n,varyingVs:e,varyingFs:i,texture2D:r,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}function la(t,n,e="index"){let i=x.computeStrides(n);return i.map((r,o)=>{let s=`int ${t[o]} = ${e} / ${r}`,a=o===i.length-1?`int ${t[o+1]} = ${e} - ${t[o]} * ${r}`:`index -= ${t[o]} * ${r}`;return`${s}; ${a};`}).join("")}function Tm(t,n,e="index"){let i=x.computeStrides(n);return i.map((r,o)=>{let s=`int ${t[o]} = ${e} / outShapeStrides[${o}]`,a=o===i.length-1?`int ${t[o+1]} = ${e} - ${t[o]} * outShapeStrides[${o}]`:`index -= ${t[o]} * outShapeStrides[${o}]`;return`${s}; ${a};`}).join("")}function e$e(t,n){let e=t.length,i=t.map(o=>`${n}[${o}]`),r=new Array(e-1);r[e-2]=i[e-1];for(let o=e-3;o>=0;--o)r[o]=`(${r[o+1]} * ${i[o+1]})`;return r}function tne(t,n,e="index"){let i=t.map((o,s)=>s),r=e$e(i,n);return r.map((o,s)=>{let a=`int ${t[s]} = ${e} / ${r[s]}`,l=s===r.length-1?`int ${t[s+1]} = ${e} - ${t[s]} * ${r[s]}`:`index -= ${t[s]} * ${r[s]}`;return`${a}; ${l};`}).join("")}function Cb(t){let n=x.computeStrides(t).map(e=>e.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${n[0]} + coords.y * ${n[1]} + coords.z;
  }
`}function Tb(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}var kE=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;var{getBroadcastDims:nne}=C;function ine(t,n,e){let i=[];if(t.forEach(h=>{let m=x.sizeFromShape(h.shapeInfo.logicalShape);if(h.shapeInfo.isUniform?i.push(`uniform float ${h.name}${m>1?`[${m}]`:""};`):(i.push(`uniform sampler2D ${h.name};`),i.push(`uniform int offset${h.name};`)),e.enableShapeUniforms){let{uniformShape:g}=IE(e.packedInputs,h.shapeInfo.logicalShape,h.shapeInfo.texShape);switch(g.length){case 1:i.push(`uniform int ${h.name}Shape;`);break;case 2:i.push(`uniform ivec2 ${h.name}Shape;`);break;case 3:i.push(`uniform ivec3 ${h.name}Shape;`);break;case 4:i.push(`uniform ivec4 ${h.name}Shape;`);break;default:break}i.push(`uniform ivec2 ${h.name}TexShape;`)}}),e.enableShapeUniforms){switch(n.logicalShape.length){case 1:i.push("uniform int outShape;");break;case 2:i.push("uniform ivec2 outShape;"),i.push("uniform int outShapeStrides;");break;case 3:i.push("uniform ivec3 outShape;"),i.push("uniform ivec2 outShapeStrides;");break;case 4:i.push("uniform ivec4 outShape;"),i.push("uniform ivec3 outShapeStrides;");break;default:break}i.push("uniform ivec2 outTexShape;")}e.customUniforms&&e.customUniforms.forEach(h=>{i.push(`uniform ${h.type} ${h.name}${h.arrayIndex?`[${h.arrayIndex}]`:""};`)});let r=i.join(`
`),o=t.map(h=>t$e(h,n,e.packedInputs,e.enableShapeUniforms)).join(`
`),s=n.texShape,a=$n(),l=r$e(a),c,u,d=a$e(a);return n.isPacked?(c=n$e(n.logicalShape,s,e.enableShapeUniforms),u=s$e(a)):(c=i$e(n.logicalShape,s,e.enableShapeUniforms),u=o$e(a)),e.packedInputs&&(d+=d$e),[d,l,u,r,c,o,e.userCode].join(`
`)}function kb(t,n=!1){let e=t.shapeInfo.logicalShape;switch(e.length){case 0:return C$e(t,n);case 1:return S$e(t,n);case 2:return I$e(t,n);case 3:return D$e(t,n);case 4:return N$e(t,n);case 5:return M$e(t);case 6:return R$e(t);default:throw new Error(`${e.length}-D input sampling is not yet supported`)}}function rne(t,n){switch(t.shapeInfo.logicalShape.length){case 0:return w$e(t);case 1:return T$e(t,n);case 2:return k$e(t,n);case 3:return E$e(t,n);default:return A$e(t,n)}}function t$e(t,n,e=!1,i){let r="";e?r+=rne(t,i):r+=kb(t,i);let o=t.shapeInfo.logicalShape,s=n.logicalShape;return o.length<=s.length&&(e?r+=O$e(t,n):r+=F$e(t,n)),r}function n$e(t,n,e){switch(t.length){case 0:return one();case 1:return p$e(t,n,e);case 2:return v$e(t,n,e);case 3:return m$e(t,n,e);default:return g$e(t,n,e)}}function i$e(t,n,e){switch(t.length){case 0:return one();case 1:return h$e(t,n,e);case 2:return _$e(t,n,e);case 3:return f$e(t,n,e);case 4:return y$e(t,n,e);case 5:return b$e(t,n);case 6:return x$e(t,n);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function r$e(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function o$e(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function s$e(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function a$e(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${l$e}
    ${c$e}
    ${u$e}
  `}var l$e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,c$e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,u$e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,d$e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function one(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function p$e(t,n,e){let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];return i[0]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${i[1]}.0);
      }
    `:i[1]===1?e?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${i[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      return 2 * (resTexRC.x * ${i[1]} + resTexRC.y);
    }
  `}function h$e(t,n,e){return n[0]===1?e?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${n[1]}.0);
      }
    `:n[1]===1?e?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${n[0]}.0);
      }
    `:e?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      return resTexRC.x * ${n[1]} + resTexRC.y;
    }
  `}function m$e(t,n,e){if(e)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec3(b, r, c);
    }
  `}function f$e(t,n,e){if(e)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${Tm(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;let i=la(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${i}
      return ivec3(r, c, d);
    }
  `}function g$e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),s=o,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)s*=t[t.length-c-1],a=`
      int b${c} = index / ${s};
      index -= b${c} * ${s};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));
      int index = resTexRC.x * ${i[1]} + resTexRC.y;

      ${a}

      int b = index / ${o};
      index -= b * ${o};

      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec${t.length}(${l});
    }
  `}function y$e(t,n,e){if(e)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${Tm(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;let i=la(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      ${i}
      return ivec4(r, c, d, d2);
    }
  `}function b$e(t,n){let e=la(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${n[0]},
                             ${n[1]}));

      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function x$e(t,n){let e=la(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;

      ${e}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function v$e(t,n,e){let i=[Math.ceil(n[0]/2),Math.ceil(n[1]/2)];if(x.arraysEqual(t,n))return e?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${i[0]}, ${i[1]}));
      }
    `;let r=Math.ceil(t[1]/2);return e?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${i[0]}, ${i[1]}));

      int index = resTexRC.x * ${i[1]} + resTexRC.y;
      int r = 2 * (index / ${r});
      int c = imod(index, ${r}) * 2;

      return ivec2(r, c);
    }
  `}function _$e(t,n,e){return x.arraysEqual(t,n)?e?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${n[0]}, ${n[1]}));
      }
    `:t[1]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?e?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${n[0]}, ${n[1]}));
        int index = resTexRC.x * ${n[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:e?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${n[0]}, ${n[1]}));
      int index = resTexRC.x * ${n[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Sm(t){return`offset${t}`}function w$e(t){let n=t.name,e="get"+n.charAt(0).toUpperCase()+n.slice(1),i=$n();return`
    vec4 ${e}() {
      return ${i.texture2D}(${n}, halfCR);
    }
  `}function C$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`float ${i}() {return ${e};}`;let[r,o]=t.shapeInfo.texShape;if(r===1&&o===1)return`
      float ${i}() {
        return sampleTexture(${e}, halfCR);
      }
    `;let s=Sm(e);if(n)return`
    float ${i}() {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], ${s});
      return sampleTexture(${e}, uv);
    }
  `;let[a,l]=t.shapeInfo.texShape;return`
    float ${i}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${s});
      return sampleTexture(${e}, uv);
    }
  `}function T$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),r=t.shapeInfo.texShape,o=$n();if(n)return`
    vec4 ${i}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${o.texture2D}(${e}, uv);
    }
  `;let s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`
    vec4 ${i}(int index) {
      vec2 uv = packedUVfrom1D(
        ${s[0]}, ${s[1]}, index);
      return ${o.texture2D}(${e}, uv);
    }
  `}function S$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1);if(t.shapeInfo.isUniform)return`
      float ${i}(int index) {
        ${Ib(t)}
      }
    `;let r=t.shapeInfo.texShape,o=r[0],s=r[1];if(s===1&&o===1)return`
      float ${i}(int index) {
        return sampleTexture(${e}, halfCR);
      }
    `;let a=Sm(e);return s===1?n?`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${e}TexShape[0]));
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${o}.0);
        return sampleTexture(${e}, uv);
      }
    `:o===1?n?`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${e}TexShape[1]), 0.5);
        return sampleTexture(${e}, uv);
      }
    `:`
      float ${i}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${s}.0, 0.5);
        return sampleTexture(${e}, uv);
      }
    `:n?`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${e}TexShape[0], ${e}TexShape[1], index + ${a});
      return sampleTexture(${e}, uv);
    }
  `:`
    float ${i}(int index) {
      vec2 uv = uvFromFlat(${o}, ${s}, index + ${a});
      return sampleTexture(${e}, uv);
    }
  `}function k$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape,s=o[0],a=o[1],l=$n();if(o!=null&&x.arraysEqual(e,o))return n?`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);

        return ${l.texture2D}(${i}, uv);
      }
    `:`
      vec4 ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${s}.0);

        return ${l.texture2D}(${i}, uv);
      }
    `;if(n)return`
    vec4 ${r}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${i}, uv);
    }
  `;let c=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],u=Math.ceil(e[1]/2);return`
    vec4 ${r}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${i}, uv);
    }
  `}function I$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape;if(o!=null&&x.arraysEqual(e,o)){if(n)return`
      float ${r}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `;let p=o[0],h=o[1];return`
    float ${r}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${h}.0, ${p}.0);
      return sampleTexture(${i}, uv);
    }
  `}let{newShape:s,keptDims:a}=x.squeezeShape(e),l=s;if(l.length<e.length){let p=Eb(t,l),h=["row","col"];return`
      ${kb(p,n)}
      float ${r}(int row, int col) {
        return ${r}(${Db(h,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${e[1]}, 1)));
        ${Ib(t)}
      }
    `;let c=o[0],u=o[1],d=Sm(i);return u===1?n?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${i}TexShape[0]));
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${i}, uv);
    }
  `:c===1?n?`
      float ${r}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${i}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${i}TexShape[1]), 0.5);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${r}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${e[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${i}, uv);
    }
  `:n?`
      float ${r}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
        return sampleTexture(${i}, uv);
      }
    `:`
  float ${r}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${e[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${i}, uv);
  }
`}function E$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=t.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(e[0]===1){let p=e.slice(1),h=[1,2],m=Eb(t,p),g=["b","row","col"];return`
        ${rne(m,n)}
        vec4 ${r}(int b, int row, int col) {
          return ${r}(${Db(g,h)});
        }
      `}let a=$n();if(n)return`
    vec4 ${r}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${i}TexShape[0]) / 2.0), ceil(float(${i}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${i}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${i}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${i}, uv);
    }
  `;let l=s[0],c=s[1],u=Math.ceil(e[2]/2),d=u*Math.ceil(e[1]/2);return`
    vec4 ${r}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${i}, uv);
    }
  `}function D$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=e[1]*e[2],s=e[2],{newShape:a,keptDims:l}=x.squeezeShape(e),c=a;if(c.length<e.length){let g=Eb(t,c),f=["row","col","depth"];return`
        ${kb(g,n)}
        float ${r}(int row, int col, int depth) {
          return ${r}(${Db(f,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${o}, ${s}, 1)));
        ${Ib(t)}
      }
    `;let u=t.shapeInfo.texShape,d=u[0],p=u[1],h=t.shapeInfo.flatOffset;if(p===o&&h==null)return n?`
      float ${r}(int row, int col, int depth) {
        int stride1 = ${i}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
        float ${r}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${s}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${p}.0, ${d}.0);
          return sampleTexture(${i}, uv);
        }
      `;if(p===s&&h==null)return n?`
      float ${r}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${i}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
    float ${r}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${e[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${p}.0, ${d}.0);
      return sampleTexture(${i}, uv);
    }
  `;let m=Sm(i);return n?`
    float ${r}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${i}Shape[1] * ${i}Shape[2];
      int stride1 = ${i}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${m};
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index);
      return sampleTexture(${i}, uv);
    }
    `:`
      float ${r}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${o} + col * ${s} + depth + ${m};
        vec2 uv = uvFromFlat(${d}, ${p}, index);
        return sampleTexture(${i}, uv);
      }
  `}function A$e(t,n){let e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),r=$n();if(n)return`
    vec4 ${i}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${e}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${e}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${e}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${e}TexShape[0]) / 2.0), ceil(float(${e}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${r.texture2D}(${e}, uv);
    }
  `;let o=t.shapeInfo.logicalShape,s=o.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(o[s-1]/2),p=d*Math.ceil(o[s-2]/2),h="int b, int row, int col",m=`b * ${p} + (row / 2) * ${d} + (col / 2)`;for(let g=2;g<s-1;g++)h=`int b${g}, `+h,p*=o[s-g-1],m=`b${g} * ${p} + `+m;return`
    vec4 ${i}(${h}) {
      int index = ${m};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${r.texture2D}(${e}, uv);
    }
  `}function N$e(t,n){let e=t.shapeInfo.logicalShape,i=t.name,r="get"+i.charAt(0).toUpperCase()+i.slice(1),o=e[3],s=e[2]*o,a=e[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(e);if(l.length<e.length){let b=Eb(t,l),v=["row","col","depth","depth2"];return`
      ${kb(b,n)}
      float ${r}(int row, int col, int depth, int depth2) {
        return ${r}(${Db(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${s}, ${o}, 1)));
        ${Ib(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1],m=`int stride2 = ${i}Shape[3];`,g=`int stride1 = ${i}Shape[2] * stride2;`,f=`int stride0 = ${i}Shape[1] * stride1;`;if(h===a&&u==null)return n?`
      float ${r}(int row, int col, int depth, int depth2) {
        ${m}
        ${g}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${s}, ${o}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${i}, uv);
      }
    `;if(h===o&&u==null)return n?`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${i}Shape[1] * ${i}Shape[2], ${i}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${i}TexShape[1], ${i}TexShape[0]);
        return sampleTexture(${i}, uv);
      }
    `:`
      float ${r}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${e[1]*e[2]}, ${e[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${i}, uv);
      }
    `;let y=Sm(i);return n?`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${m}
      ${g}
      ${f}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${i}TexShape[0], ${i}TexShape[1], index + ${y});
      return sampleTexture(${i}, uv);
    }
  `:`
    float ${r}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} +
          depth * ${o} + depth2;
      vec2 uv = uvFromFlat(${p}, ${h}, index + ${y});
      return sampleTexture(${i}, uv);
    }
  `}function M$e(t){let n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),r=n[4],o=n[3]*r,s=n[2]*o,a=n[1]*s,{newShape:l,keptDims:c}=x.squeezeShape(n);if(l.length<n.length){let g=Eb(t,l),f=["row","col","depth","depth2","depth3"];return`
      ${kb(g)}
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        return ${i}(${Db(f,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${s}, ${o}, ${r})) +
          depth3;
        ${Ib(t)}
      }
    `;let u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,p=d[0],h=d[1];if(h===a&&u==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${s}, ${o}, ${r}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(h===r&&u==null)return`
      float ${i}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]},
               ${n[2]*n[3]}, ${n[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${h}.0, ${p}.0);
        return sampleTexture(${e}, uv);
      }
    `;let m=Sm(e);return`
    float ${i}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${s} + depth * ${o} +
          depth2 * ${r} + depth3 + ${m};
      vec2 uv = uvFromFlat(${p}, ${h}, index);
      return sampleTexture(${e}, uv);
    }
  `}function R$e(t){let n=t.shapeInfo.logicalShape,e=t.name,i="get"+e.charAt(0).toUpperCase()+e.slice(1),{newShape:r,keptDims:o}=x.squeezeShape(n);if(r.length<n.length){let f=Eb(t,r),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${kb(f)}
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${i}(${Db(y,o)});
      }
    `}let s=n[5],a=n[4]*s,l=n[3]*a,c=n[2]*l,u=n[1]*c;if(t.shapeInfo.isUniform)return`
      float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${s}, 1)));
        ${Ib(t)}
      }
    `;let d=t.shapeInfo.flatOffset,p=t.shapeInfo.texShape,h=p[0],m=p[1];if(m===u&&d==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${s})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${m}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;if(m===s&&d==null)return`
      float ${i}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${n[1]*n[2]*n[3]*n[4]},
               ${n[2]*n[3]*n[4]},
               ${n[3]*n[4]},
               ${n[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${m}.0, ${h}.0);
        return sampleTexture(${e}, uv);
      }
    `;let g=Sm(e);return`
    float ${i}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${s} + depth4 + ${g};
      vec2 uv = uvFromFlat(${h}, ${m}, index);
      return sampleTexture(${e}, uv);
    }
  `}function Ib(t){let n=t.name,e=x.sizeFromShape(t.shapeInfo.logicalShape);return e<2?`return ${n};`:`
    for (int i = 0; i < ${e}; i++) {
      if (i == index) {
        return ${n}[i];
      }
    }
  `}function O$e(t,n){let e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),r="get"+i+"AtOutCoords",o=t.shapeInfo.logicalShape.length,s=n.logicalShape.length,a=nne(t.shapeInfo.logicalShape,n.logicalShape),l=dt(s),c=s-o,u,d=["x","y","z","w","u","v"];o===0?u="":s<2&&a.length>=1?u="coords = 0;":u=a.map(b=>`coords.${d[b+c]} = 0;`).join(`
`);let p="";s<2&&o>0?p="coords":p=t.shapeInfo.logicalShape.map((b,v)=>`coords.${d[v+c]}`).join(", ");let h="return outputValue;",g=x.sizeFromShape(t.shapeInfo.logicalShape)===1,y=x.sizeFromShape(n.logicalShape)===1;if(o===1&&!g&&!y)h=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(g&&!y)s===1?h=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:h=`
        return vec4(outputValue.x);
      `;else if(a.length){let b=o-2,v=o-1;a.indexOf(b)>-1&&a.indexOf(v)>-1?h="return vec4(outputValue.x);":a.indexOf(b)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(v)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${r}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${i}(${p});
      ${h}
    }
  `}function F$e(t,n){let e=t.name,i=e.charAt(0).toUpperCase()+e.slice(1),r="get"+i+"AtOutCoords",o=n.texShape,s=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=n.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&x.arraysEqual(s,o))return`
      float ${r}() {
        return sampleTexture(${e}, resultUV);
      }
    `;let c=dt(l),u=nne(t.shapeInfo.logicalShape,n.logicalShape),d=l-a,p,h=["x","y","z","w","u","v"];a===0?p="":l<2&&u.length>=1?p="coords = 0;":p=u.map(g=>`coords.${h[g+d]} = 0;`).join(`
`);let m="";return l<2&&a>0?m="coords":m=t.shapeInfo.logicalShape.map((g,f)=>`coords.${h[f+d]}`).join(", "),`
    float ${r}() {
      ${c} coords = getOutputCoords();
      ${p}
      return get${i}(${m});
    }
  `}function dt(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function IE(t,n,e){let{newShape:i,keptDims:r}=x.squeezeShape(n),o=n.length,s=t&&o===3&&n[0]===1,a=s?n.slice(1):i,l=!t&&o>1&&!x.arraysEqual(n,e)&&i.length<o||s;return{useSqueezeShape:l,uniformShape:l?a:n,keptDims:r}}function Eb(t,n){let e=JSON.parse(JSON.stringify(t));return e.shapeInfo.logicalShape=n,e}function Db(t,n){return n.map(e=>t[e]).join(", ")}function ane(t,n,e,i){let r=e.map((u,d)=>{let p={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(p.flatOffset=u.texData.slice.flatOffset),{name:n.variableNames[d],shapeInfo:p}}),o=r.map(u=>u.shapeInfo),s={logicalShape:i.shape,texShape:i.texData.texShape,isUniform:!1,isPacked:i.texData.isPacked,flatOffset:null},a=ine(r,s,n),l=Pte(t.gl,a),c=t.createProgram(l);return G().get("ENGINE_COMPILE_ONLY")?{program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:n,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:o,outShapeInfo:s},eB(t,n,c)))}function eB(t,n,e){let i=[],r=[],o,s,a,l=null,c=null;c=t.getUniformLocation(e,"NAN",!1),G().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(e,"INFINITY",!1));let u=!1;for(let d of n.variableNames){let p={name:d,uniform:t.getUniformLocation(e,d,u),offset:t.getUniformLocation(e,`offset${d}`,u)};n.enableShapeUniforms&&(p.shape=t.getUniformLocation(e,`${d}Shape`,u),p.texShape=t.getUniformLocation(e,`${d}TexShape`,u)),i.push(p)}if(n.enableShapeUniforms&&(o=t.getUniformLocation(e,"outShape",u),a=t.getUniformLocation(e,"outShapeStrides",u),s=t.getUniformLocation(e,"outTexShape",u)),n.customUniforms)for(let d of n.customUniforms)r.push(t.getUniformLocation(e,d.name,u));return{variablesLocations:i,customUniformLocations:r,infLoc:l,nanLoc:c,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}}function sne(t,n){if(t.length!==n.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${n.length} inputs`);t.forEach((e,i)=>{let r=e.logicalShape,o=n[i],s=o.shape;if(!x.arraysEqual(r,s))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${s} must match`);if(e.isUniform&&o.isUniform)return;let a=e.texShape,l=o.isUniform?null:o.texData.texShape;if(!x.arraysEqual(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function lne(t,n,e,i,r){n.program.enableShapeUniforms||(sne(n.inShapeInfos,e),sne([n.outShapeInfo],[i]));let o=i.texData.texture,s=i.texData.texShape;i.texData.isPacked?t.setOutputPackedMatrixTexture(o.texture,s[0],s[1]):t.setOutputMatrixTexture(o.texture,s[0],s[1]),t.setProgram(n.webGLProgram),t.bindVertexArray(n.webGLProgram.vao),G().getNumber("WEBGL_VERSION")===1&&n.infLoc!==null&&t.gl.uniform1f(n.infLoc,1/0),n.nanLoc!==null&&t.gl.uniform1f(n.nanLoc,NaN);for(let l=0;l<e.length;++l){let c=e[l],{uniform:u,offset:d,shape:p,texShape:h}=n.variablesLocations[l];if(p){let{uniformShape:m}=IE(n.program.packedInputs,c.shape,c.texData.texShape);switch(m.length){case 1:t.gl.uniform1iv(p,new Int32Array(m));break;case 2:t.gl.uniform2iv(p,new Int32Array(m));break;case 3:t.gl.uniform3iv(p,new Int32Array(m));break;case 4:t.gl.uniform4iv(p,new Int32Array(m));break;default:break}}if(h&&t.gl.uniform2i(h,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(x.sizeFromShape(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let m=c.uniformValues;m instanceof Float32Array||(m=new Float32Array(m)),t.gl.uniform1fv(u,m)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}let a=n.outShapeLocation;if(a)switch(i.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(i.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(i.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(i.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(i.shape));break;default:break}if(n.outShapeStridesLocation){let l=x.computeStrides(i.shape);switch(i.shape.length){case 2:t.gl.uniform1iv(n.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(n.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(n.outShapeStridesLocation,new Int32Array(l));break;default:break}}if(n.outTexShapeLocation&&t.gl.uniform2i(n.outTexShapeLocation,i.texData.texShape[0],i.texData.texShape[1]),n.program.customUniforms&&r)for(let l=0;l<n.program.customUniforms.length;++l){let c=n.program.customUniforms[l],u=n.customUniformLocations[l],d=r[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function cne(t,n,e){let i="";n.concat(e).forEach(s=>{let a=s.texData!=null&&s.texData.slice!=null&&s.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!s.isUniform){let l=s.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=IE(t.packedInputs,s.shape,l),p="",h="",m="";if(u.length===1&&t.packedInputs){let w=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];p=`${w[0]>1}_${w[1]>1}`}else if(u.length===2&&!t.packedInputs)h=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){let w=x.computeStrides(u);m=`${w[0]===l[1]}_${w[w.length-1]===l[1]}`}let g=s.shape.length,f=u.length===2&&x.arraysEqual(s.shape,l),y=x.sizeFromShape(s.shape)===1,b=C.getBroadcastDims(s.shape,e.shape),v=!t.packedInputs&&g===e.shape.length&&x.arraysEqual(l,e.texData.texShape),_=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;i+=`${g}_${v}_${c?d:""}_${u.length}_${y}_${b}_${f}_${p}_${h}_${m}_${_}_${a}`}else{let l=s.isUniform?"uniform":s.texData.texShape;i+=`${s.shape}_${l}_${a}`}});let r=t.userCode,o=t.constructor.name;return o+="_"+i+"_"+r+`${G().getNumber("WEBGL_VERSION")}`,o}function nn(t){return G().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}var EE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=_m.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=$n();this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Tm(["r","c","d"],n):la(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${e.output} = result;
      }
    `}};var DE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=_m.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let e=$n();this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?Tm(["r","c","d"],n):la(["r","c","d"],n)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${e.output} = result;
      }
    `}};var AE=class{constructor(n){this.variableNames=["A"],this.outTexUsage=hr.DOWNLOAD;let e=$n();this.outputShape=n,this.userCode=`
      ${kE}

      void main() {
        float x = getAAtOutCoords();
        ${e.output} = encode_float(x);
      }
    `}};var NE=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=hr.DOWNLOAD;let e=$n();this.outputShape=n,this.userCode=`
      ${kE}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${e.output} = encode_float(x);
      }
    `}};var $$e={R:0,G:1,B:2,A:3},A_=class{constructor(n,e=!1,i="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=$n();this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length);let o="result";e&&(o="floor(result * 255. + 0.5)");let s="";for(let a=0;a<i.length;a++){let l=i[a];s+=`
          if(offset == ${a}) {
            result = values[${$$e[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?Tb():Cb(n)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${i.length});

        flatIndex = idiv(flatIndex, ${i.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${r.texture2D}(A, uv);
          ${s}
        }
        ${r.output} = vec4(${o}, 0., 0., 0.);
      }
    `}};var ME=class{constructor(n,e=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let i=$n();this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length);let r="",o="result";e&&(o="floor(result * 255. + 0.5)");for(let s=0;s<=1;s++)for(let a=0;a<=1;a++){let l=s*2+a;r+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${n[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${s} < ${this.enableShapeUniforms?"outShape[1]":`${n[1]}`}) {
            localCoords[1] += ${s};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${i.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?Tb():Cb(n)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${r}

          ${i.output} = ${o};
        }
    `}};function une(t){let n=$n(),e=`${n.version}
    precision highp float;
    ${n.attribute} vec3 clipSpacePos;
    ${n.attribute} vec2 uv;
    ${n.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return Lte(t,e)}function dne(t){let n=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Bte(t,n)}function pne(t){let n=new Uint16Array([0,1,2,2,1,3]);return zte(t,n)}function N_(t,n,e,i,r,o){Ute(n,e);let s=Gte(t),a=t.TEXTURE_2D;return Oe(t,()=>t.bindTexture(a,s)),Oe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Oe(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Oe(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Oe(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),G().getNumber("WEBGL_VERSION")===1?Oe(t,()=>t.texImage2D(a,0,i,n,e,0,r,o,null)):Oe(t,()=>t.texStorage2D(a,1,i,n,e)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:s,texShape:[e,n]}}function tB(t){return t.internalFormatFloat}function hne(t,n,e,i){let[r,o]=wm(n,e);return N_(t,r,o,tB(i),i.textureFormatFloat,t.FLOAT)}function nB(t){return t.internalFormatHalfFloat}function mne(t,n,e,i){let[r,o]=wm(n,e);return N_(t,r,o,nB(i),i.textureFormatFloat,i.textureTypeHalfFloat)}function iB(t){return t.downloadTextureFormat}function fne(t,n,e,i){let[r,o]=wm(n,e);return N_(t,r,o,iB(i),t.RGBA,t.UNSIGNED_BYTE)}function rB(t){return t.internalFormatPackedFloat}function gne(t,n,e,i){let[r,o]=il(n,e);return N_(t,r,o,rB(i),t.RGBA,t.FLOAT)}function oB(t){return t.internalFormatPackedHalfFloat}function yne(t,n,e,i){let[r,o]=il(n,e);return N_(t,r,o,oB(i),t.RGBA,i.textureTypeHalfFloat)}function bne(t,n,e){return Oe(t,()=>t.bindBuffer(t.ARRAY_BUFFER,e)),QV(t,n,"clipSpacePos",e,3,20,0)&&QV(t,n,"uv",e,2,20,12)}function xne(t,n,e,i,r,o){Oe(t,()=>t.bindTexture(t.TEXTURE_2D,n));let s,a,l;r instanceof Uint8Array?(s=new Uint8Array(e*i*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(s=new Float32Array(e*i*4),a=t.FLOAT,l=o.internalFormatPackedFloat),s.set(r),G().getNumber("WEBGL_VERSION")===2?Oe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e,i,t.RGBA,a,s)):Oe(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,e,i,0,t.RGBA,a,s)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function vne(t,n,e){Oe(t,()=>t.bindTexture(t.TEXTURE_2D,n)),e.data instanceof Uint8Array?G().getNumber("WEBGL_VERSION")===2?Oe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,e.data)):Oe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,e.data)):G().getNumber("WEBGL_VERSION")===2?Oe(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e)):Oe(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)),Oe(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function _ne(t,n,e,i){let r=t.createBuffer();Oe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,r));let a=4*4*n*e;return Oe(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Oe(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,0)),Oe(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),r}function wne(t,n,e){let i=t,r=new Float32Array(e);return i.bindBuffer(i.PIXEL_PACK_BUFFER,n),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,r),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),r}function Cne(t,n,e,i){let[r,o]=wm(n,e),s=4,a=new Uint8Array(Rte(n*e,s));return Oe(t,()=>t.readPixels(0,0,r,o,i.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function Tne(t,n,e,i,r,o,s,a){let l=t,c=new Float32Array(Ote(o,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,n),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function Sne(t,n,e){let i=new Float32Array(n*e*4);return Oe(t,()=>t.readPixels(0,0,e,n,t.RGBA,t.FLOAT,i)),i}var Ab=class{constructor(n){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let e=G().getNumber("WEBGL_VERSION");if(n!=null?(this.gl=n,Mte(e,n)):this.gl=Io(e),n=this.gl,G().getNumber("WEBGL_VERSION")===2){let o=n;this.createVertexArray=()=>Oe(o,()=>o.createVertexArray()),this.bindVertexArray=s=>Oe(o,()=>o.bindVertexArray(s)),this.deleteVertexArray=s=>Oe(o,()=>o.deleteVertexArray(s)),this.getVertexArray=()=>Oe(o,()=>o.getParameter(o.VERTEX_ARRAY_BINDING))}else if(n!=null){let o=n.getExtension("OES_vertex_array_object");if(o==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Oe(n,()=>o.createVertexArrayOES()),this.bindVertexArray=s=>Oe(n,()=>o.bindVertexArrayOES(s)),this.deleteVertexArray=s=>Oe(n,()=>o.deleteVertexArrayOES(s)),this.getVertexArray=()=>Oe(n,()=>n.getParameter(o.VERTEX_ARRAY_BINDING_OES))}let i="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),G().getNumber("WEBGL_VERSION")===1){let o="OES_texture_float",s="OES_texture_half_float";if(this.textureFloatExtension=I_(this.gl,o),qo(this.gl,s))this.textureHalfFloatExtension=I_(this.gl,s);else if(G().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(i),qo(this.gl,r))this.colorBufferHalfFloatExtension=I_(this.gl,r);else if(G().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(i="EXT_color_buffer_float",qo(this.gl,i))this.colorBufferFloatExtension=this.gl.getExtension(i);else if(qo(this.gl,r))this.colorBufferHalfFloatExtension=this.gl.getExtension(r);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=dne(this.gl),this.indexBuffer=pne(this.gl),this.framebuffer=Hte(this.gl),this.textureConfig=k_(this.gl,this.textureHalfFloatExtension)}get debug(){return G().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let n=this.gl;Oe(n,()=>n.finish()),Oe(n,()=>n.bindFramebuffer(n.FRAMEBUFFER,null)),Oe(n,()=>n.deleteFramebuffer(this.framebuffer)),Oe(n,()=>n.bindBuffer(n.ARRAY_BUFFER,null)),Oe(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)),Oe(n,()=>n.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(n,e){return this.throwIfDisposed(),hne(this.gl,n,e,this.textureConfig)}createFloat16MatrixTexture(n,e){return this.throwIfDisposed(),mne(this.gl,n,e,this.textureConfig)}createUnsignedBytesMatrixTexture(n,e){return this.throwIfDisposed(),fne(this.gl,n,e,this.textureConfig)}uploadPixelDataToTexture(n,e){this.throwIfDisposed(),vne(this.gl,n,e)}uploadDenseMatrixToTexture(n,e,i,r){this.throwIfDisposed(),xne(this.gl,n,e,i,r,this.textureConfig)}createFloat16PackedMatrixTexture(n,e){return this.throwIfDisposed(),yne(this.gl,n,e,this.textureConfig)}createPackedMatrixTexture(n,e){return this.throwIfDisposed(),gne(this.gl,n,e,this.textureConfig)}deleteMatrixTexture(n){this.throwIfDisposed(),this.outputTexture===n&&(ZV(this.gl,this.framebuffer),this.outputTexture=null),Oe(this.gl,()=>this.gl.deleteTexture(n))}downloadByteEncodedFloatMatrixFromOutputTexture(n,e,i){return this.downloadMatrixDriver(n,()=>Cne(this.gl,e,i,this.textureConfig))}downloadPackedMatrixFromBuffer(n,e,i,r,o,s){return Tne(this.gl,n,e,i,r,o,s,this.textureConfig)}downloadFloat32MatrixFromBuffer(n,e){return wne(this.gl,n,e)}createBufferFromTexture(n,e,i){this.bindTextureToFrameBuffer(n);let r=_ne(this.gl,e,i,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let n=this.createFence(this.gl);return this.pollFence(n)}createFence(n){let e,i;if(G().getBool("WEBGL_FENCE_API_ENABLED")){let r=n,o=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);n.flush(),i=()=>{let s=r.clientWaitSync(o,0,0);return s===r.ALREADY_SIGNALED||s===r.CONDITION_SATISFIED},e=o}else G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),i=()=>this.isQueryAvailable(e,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):i=()=>!0;return{query:e,isFencePassed:i}}downloadMatrixFromPackedTexture(n,e,i){return this.downloadMatrixDriver(n,()=>Sne(this.gl,e,i))}createProgram(n){this.throwIfDisposed();let e=this.gl;this.vertexShader==null&&(this.vertexShader=une(e));let i=$te(e);Oe(e,()=>e.attachShader(i,this.vertexShader)),Oe(e,()=>e.attachShader(i,n)),Vte(e,i);let r=Object.assign(i,{vao:this.createVertexArray()});return this.debug&&CE(e,r),r}buildVao(n){this.setProgram(n),this.bindVertexArray(n.vao);let e=this.gl;Oe(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),bne(e,n,this.vertexBuffer)}deleteProgram(n){this.throwIfDisposed(),n===this.program&&(this.program=null),n!=null&&(Oe(this.gl,()=>this.gl.deleteProgram(n)),this.deleteVertexArray(n.vao))}setProgram(n){this.throwIfDisposed(),this.program=n,this.program!=null&&this.debug&&CE(this.gl,this.program),Oe(this.gl,()=>this.gl.useProgram(n))}getUniformLocation(n,e,i=!0){return this.throwIfDisposed(),i?Wte(this.gl,n,e):jte(this.gl,n,e)}getAttributeLocation(n,e){return this.throwIfDisposed(),Oe(this.gl,()=>this.gl.getAttribLocation(n,e))}getUniformLocationNoThrow(n,e){return this.throwIfDisposed(),this.gl.getUniformLocation(n,e)}setInputMatrixTexture(n,e,i){this.throwIfDisposed(),this.throwIfNoProgram(),qte(this.gl,n,e,i)}setOutputMatrixTexture(n,e,i){this.setOutputMatrixTextureDriver(n,i,e)}setOutputPackedMatrixTexture(n,e,i){this.throwIfDisposed();let[r,o]=il(e,i);this.setOutputMatrixTextureDriver(n,r,o)}setOutputMatrixWriteRegion(n,e,i,r){this.setOutputMatrixWriteRegionDriver(i,n,r,e)}setOutputPackedMatrixWriteRegion(n,e,i,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&CE(this.gl,this.program),E_(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let n=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Oe(n,()=>n.drawElements(n.TRIANGLES,6,n.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Oe(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=I_(this.gl,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let i=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=i.createQuery();return i.beginQuery(r.TIME_ELAPSED_EXT,o),o}let n=this.getQueryTimerExtensionWebGL1(),e=n.createQueryEXT();return n.beginQueryEXT(n.TIME_ELAPSED_EXT,e),e}endQuery(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){let e=this.gl,i=this.getQueryTimerExtensionWebGL2();e.endQuery(i.TIME_ELAPSED_EXT);return}let n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)}waitForQueryAndGetTime(n){return H(this,null,function*(){return yield x.repeatedTry(()=>this.disposed||this.isQueryAvailable(n,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(n,G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})}getQueryTime(n,e){if(e===0)return null;if(e===2){let i=this.gl;return i.getQueryParameter(n,i.QUERY_RESULT)/1e6}else{let i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(n,e){if(e===0)return!0;if(e===2){let i=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=i.getQueryParameter(n,i.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}else{let i=this.getQueryTimerExtensionWebGL1(),r=i.getQueryObjectEXT(n,i.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),r&&!this.disjoint}}pollFence(n){return new Promise(e=>{this.addItemToPoll(()=>n.isFencePassed(),()=>e())})}pollItems(){let n=B$e(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=n;++e){let{resolveFn:i}=this.itemsToPoll[e];i()}this.itemsToPoll=this.itemsToPoll.slice(n+1)}addItemToPoll(n,e){if(this.itemsToPoll.push({isDoneFn:n,resolveFn:e}),this.itemsToPoll.length>1)return;let i;"setTimeoutCustom"in G().platform&&(i=G().platform.setTimeoutCustom.bind(G().platform)),x.repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,i)}bindTextureToFrameBuffer(n){this.throwIfDisposed(),TE(this.gl,n,this.framebuffer),this.debug&&E_(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(TE(this.gl,this.outputTexture,this.framebuffer),this.debug&&E_(this.gl)):ZV(this.gl,this.framebuffer)}downloadMatrixDriver(n,e){this.bindTextureToFrameBuffer(n);let i=e();return this.unbindTextureToFrameBuffer(),i}setOutputMatrixTextureDriver(n,e,i){this.throwIfDisposed();let r=this.gl;TE(r,n,this.framebuffer),this.debug&&E_(r),this.outputTexture=n,Oe(r,()=>r.viewport(0,0,e,i)),Oe(r,()=>r.scissor(0,0,e,i))}setOutputMatrixWriteRegionDriver(n,e,i,r){this.throwIfDisposed(),Oe(this.gl,()=>this.gl.scissor(n,e,i,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}};function B$e(t){let n=0;for(;n<t.length&&t[n]();++n);return n-1}var{addImpl:kne,bincountImpl:RE,bincountReduceImpl:Ine,bitwiseAndImpl:Ene,castImpl:Dne,ceilImpl:Ane,concatImpl:Nne,equalImpl:Mne,expImpl:Rne,expm1Impl:One,floorImpl:Fne,gatherNdImpl:Lne,gatherV2Impl:Pne,greaterImpl:$ne,greaterEqualImpl:Vne,lessImpl:Bne,lessEqualImpl:zne,linSpaceImpl:Gne,logImpl:Une,maxImpl:Hne,maximumImpl:Wne,minimumImpl:jne,multiplyImpl:qne,negImpl:Xne,notEqualImpl:Kne,prodImpl:Yne,raggedGatherImpl:Qne,raggedRangeImpl:Zne,raggedTensorToTensorImpl:Jne,rangeImpl:eie,rsqrtImpl:tie,scatterImpl:nie,sigmoidImpl:iie,simpleAbsImpl:OE,sliceImpl:rie,sparseFillEmptyRowsImpl:oie,sparseReshapeImpl:sie,sparseSegmentReductionImpl:FE,sqrtImpl:aie,staticRegexReplaceImpl:lie,stridedSliceImpl:cie,stringNGramsImpl:uie,stringSplitImpl:die,stringToHashBucketFastImpl:pie,subImpl:hie,tileImpl:mie,topKImpl:fie,transposeImpl:km,uniqueImpl:gie}=RV;function sB(t,n){return["x","y","z","w","u","v"].slice(0,n).map(e=>`${t}.${e}`)}function jn(t,n){return n===1?[t]:sB(t,n)}function yie(t,n){if(t===1)return"rc";let e="";for(let i=0;i<t;i++)e+=n[i],i<t-1&&(e+=",");return e}var LE=class{constructor(n){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.enableShapeUniforms=nn(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{let e=jn("rc",this.rank),i=dt(this.rank),r=this.getOutOfBoundsCondition(e),o=this.getSetup(e),s=this.getOutput(e);this.userCode=`
        void main() {
          ${i} rc = getOutputCoords();

          if(${r}) {
            setOutput(vec4(0));
          } else {
            ${o}

            setOutput(vec4(${s}));
          }
        }
      `}}getSourceCoordsArr(n){let e=[];for(let i=0;i<=1;i++)for(let r=0;r<=1;r++){let o=`${i===0?"r":"rp1"}, ${r===0?"c":"cp1"}`;for(let s=2;s<this.rank;s++)o=`${n[n.length-1-s]},`+o;e.push(o)}return e}getOutOfBoundsCondition(n){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let e="";for(let i=this.rank-2;i<this.rank;i++)e+=`${n[i]} >= ${this.enableShapeUniforms?`outShape[${i}]`:this.outputShape[i]}`,i<this.rank-1&&(e+="||");return e}getSetup(n){if(this.rank===1)return"";let e=n.slice(-2),i=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${e[0]};
      int c = ${e[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${i};
      bool rEdge = rp1 >= ${r};
    `}getOutput(n){let e=this.getSourceCoordsArr(n);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${e[0]}),
            cEdge ? 0. : getA(${e[1]}),
            rEdge ? 0. : getA(${e[2]}),
            rEdge || cEdge ? 0. : getA(${e[3]})`}};var Nb=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length);let i="";for(let r=0;r<4;r++){let o="thisRC = rc;";r%2===1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),i+=`
        ${o}
        ${r>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${r}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${r>0?"}":""}
      `}this.userCode=`
      ${z$e(e,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?Tb():Cb(n)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":n[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":n[2]};

        ${i}

        setOutput(result);
      }
    `}};function z$e(t,n){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${n?tne(["r","c","d"],"inputShape"):la(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}var PE=class{constructor(n){this.gpgpu=n,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(n,e,i){let r=xie(e,i),o=vie(n,r,i);o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]);let s=bie(n,r,this.gpgpu.gl,this.gpgpu.textureConfig,i);if(this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=s,this.log();let l=this.freeTextures[o].pop();return this.usedTextures[o].push(l),l}let a;return r===tr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(n[0],n[1]):r===tr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(n[0],n[1]):r===tr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(n[0],n[1]):r===tr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(n[0],n[1]):r===tr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(n[0],n[1])),this.usedTextures[o].push(a),this.numUsedTextures++,this._numBytesAllocated+=s,this.log(),a}releaseTexture(n,e,i,r){if(this.freeTextures==null)return;let o=xie(i,r),s=vie(e,o,r);s in this.freeTextures||(this.freeTextures[s]=[]);let a=bie(e,o,this.gpgpu.gl,this.gpgpu.textureConfig,r),l=G().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(n.texture),this._numBytesAllocated-=a):(this.freeTextures[s].push(n),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let c=this.usedTextures[s],u=c&&c.indexOf(n);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;let n=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${n})`);let e=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*e)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(let n in this.freeTextures)this.freeTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let n in this.usedTextures)this.usedTextures[n].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}};function G$e(t,n){let e=t;if(n===e.R32F)return 4;if(n===e.R16F)return 2;if(n===e.RGBA32F)return 16;if(n===t.RGBA)return 16;if(n===e.RGBA16F)return 8;if(n===e.RGBA8)return 4;throw new Error(`Unknown internal format ${n}`)}function bie(t,n,e,i,r){let o=U$e(n,i),s;if(r){let[l,c]=il(t[0],t[1]);s=l*c}else{let[l,c]=wm(t[0],t[1]);s=l*c}let a=G$e(e,o);return s*a}function U$e(t,n){switch(t){case tr.PACKED_2X2_FLOAT32:return rB(n);case tr.PACKED_2X2_FLOAT16:return oB(n);case tr.UNPACKED_FLOAT32:return tB(n);case tr.UNPACKED_FLOAT16:return nB(n);case tr.PACKED_4X1_UNSIGNED_BYTE:return iB(n);default:throw new Error(`Unknown physical texture type ${t}`)}}function H$e(t){return G().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?tr.PACKED_2X2_FLOAT32:tr.UNPACKED_FLOAT32:t?tr.PACKED_2X2_FLOAT16:tr.UNPACKED_FLOAT16}function xie(t,n){if(t===hr.UPLOAD)return tr.PACKED_2X2_FLOAT32;if(t===hr.RENDER||t==null)return H$e(n);if(t===hr.DOWNLOAD||t===hr.PIXELS)return tr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function vie(t,n,e){return`${t[0]}_${t[1]}_${n}_${e}`}var Ui=class{constructor(n,e){this.variableNames=["A"],this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${e}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}},ci="if (isnan(x)) return x;",_ie="return x;",aB="return abs(x);";var wie="return (x >= 0.0) ? x : (exp(x) - 1.0);",Cie=ci+`
  return (x < 0.0) ? 0.0 : x;
`,Tie=ci+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,ol="return x;",Sie="return 1.0 / (1.0 + exp(-1.0 * x));";var Iie="return x;",Eie=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Die=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Aie=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Nie="return 1.0 / (1.0 + exp(-1.0 * x));",to=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${e}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}};var $E=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length);let e=n.length,i=jn("rc",e),r=dt(e),o=yie(e,i),s=i.slice(-2),a=e<=1?"rc":`vec2(${s.join(",")})`;this.userCode=`
      void main() {
        ${r} rc = getOutputCoords();
        vec4 packedInput = getA(${o});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}};var j$e=Ji.whereImpl,q$e=1e-7,X$e=1e-4,VE={};function K$e(t){return t in VE||(VE[t]={}),VE[t]}var Y$e=G().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),Q$e=600;function Z$e(){return G().global.screen==null?1024:G().global.screen.height*G().global.screen.width*window.devicePixelRatio*Q$e/1024/1024}var Mie=(()=>{class t extends Ul{nextDataId(){return t.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!G().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let i;if(e!=null){if(e instanceof Ab)i=e;else{let r=Io(G().getNumber("WEBGL_VERSION"),e);i=new Ab(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let r=Io(G().getNumber("WEBGL_VERSION"));i=new Ab(r),this.binaryCache=K$e(G().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=i,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new PE(this.gpgpu),this.numMBBeforeWarning=Z$e(),this.texData=new Ch(this,hs())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,i,r,o,s,a){let l=this.makeTensorInfo(i,r),c=this.texData.get(l.dataId);c.isPacked=!1,c.texture={texture:e,texShape:[o,s]},c.texShape=[o,s];let u=D_(i),d=new A_(u,!1,a),p=this.runWebGLProgram(d,[l],r,[[o,s]]);return p.shape=i,c.texture=null,this.disposeIntermediateTensorInfo(l),p.dataId}write(e,i,r){if((G().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||G().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let o={id:this.nextDataId()};return this.texData.set(o,{shape:i,dtype:r,values:e,usage:hr.UPLOAD,refCount:1}),o}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){let i=this.texData.get(e);i.refCount++}decRef(e){if(this.texData.has(e)){let i=this.texData.get(e);i.refCount--}}move(e,i,r,o,s){if(G().getBool("DEBUG")&&this.checkNumericalProblems(i),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:o,values:i,usage:hr.UPLOAD,refCount:s})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let i=this.texData.get(e),{values:r,dtype:o,complexTensorInfos:s,slice:a,shape:l,isPacked:c}=i;if(a!=null){let h;c?h=new to(l,ol):h=new Ui(l,ol);let m=this.runWebGLProgram(h,[{dataId:e,shape:l,dtype:o}],o),g=this.readSync(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(o==="string")return r;let u=this.activeTimers!=null,d;u&&(d=x.now());let p;if(o==="complex64"){let h=this.readSync(s.real.dataId),m=this.readSync(s.imag.dataId);p=C.mergeRealAndImagArrays(h,m)}else p=this.getValuesFromTexture(e);return u&&(this.downloadWaitMs+=x.now()-d),this.convertAndCacheOnCPU(e,p)}read(e){return H(this,null,function*(){if(this.pendingRead.has(e)){let g=this.pendingRead.get(e);return new Promise(f=>g.push(f))}let i=this.texData.get(e),{values:r,shape:o,slice:s,dtype:a,complexTensorInfos:l,isPacked:c}=i;if(s!=null){let g;c?g=new to(o,ol):g=new Ui(o,ol);let f=this.runWebGLProgram(g,[{dataId:e,shape:o,dtype:a}],a),y=this.read(f.dataId);return this.disposeIntermediateTensorInfo(f),y}if(r!=null)return this.convertAndCacheOnCPU(e);if(G().getBool("DEBUG")&&!G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&G().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let u=null,d;if(a!=="complex64"&&G().get("WEBGL_BUFFER_SUPPORTED")){d=this.decode(e);let g=this.texData.get(d.dataId);u=this.gpgpu.createBufferFromTexture(g.texture.texture,...S_(o))}this.pendingRead.set(e,[]),a!=="complex64"&&(yield this.gpgpu.createAndWaitForFence());let p;if(a==="complex64"){let g=yield Promise.all([this.read(l.real.dataId),this.read(l.imag.dataId)]),f=g[0],y=g[1];p=C.mergeRealAndImagArrays(f,y)}else if(u==null)p=this.getValuesFromTexture(e);else{let g=x.sizeFromShape(o);p=this.gpgpu.downloadFloat32MatrixFromBuffer(u,g)}if(d!=null&&this.disposeIntermediateTensorInfo(d),u!=null){let g=this.gpgpu.gl;Oe(g,()=>g.deleteBuffer(u))}let h=this.convertAndCacheOnCPU(e,p),m=this.pendingRead.get(e);return this.pendingRead.delete(e),m.forEach(g=>g(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&hs().removeDataId(e,this),this.pendingDeletes--),h})}readToGPU(e,i={}){let r=this.texData.get(e),{values:o,shape:s,slice:a,dtype:l,isPacked:c,texture:u}=r;if(l==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(a!=null){let m;c?m=new to(s,ol):m=new Ui(s,ol);let g=this.runWebGLProgram(m,[{dataId:e,shape:s,dtype:l}],l),f=this.readToGPU(g,i);return this.disposeIntermediateTensorInfo(g),f}if(u==null)throw o!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let d=this.decode(e,i.customTexShape),p=hs().makeTensorFromTensorInfo(d),h=this.texData.get(d.dataId);return Object.assign({tensorRef:p},h.texture)}bufferSync(e){let i=this.readSync(e.dataId);if(e.dtype==="string")try{let r=i.map(o=>x.decodeString(o));return Ge(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ge(e.shape,e.dtype,i)}checkNumericalProblems(e){if(e!=null)for(let i=0;i<e.length;i++){let r=e[i];if(!Fte(r))throw G().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:i,dtype:r,isPacked:o}=this.texData.get(e),s=x.sizeFromShape(i);if(G().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let h=this.decode(e),m=this.texData.get(h.dataId),g=this.gpgpu.downloadMatrixFromPackedTexture(m.texture.texture,...S_(i)).subarray(0,s);return this.disposeIntermediateTensorInfo(h),g}let a=G().getBool("WEBGL_PACK")&&o===!0,l=a?D_(i):i,c=a?new NE(l):new AE(l),u=this.runWebGLProgram(c,[{shape:l,dtype:r,dataId:e}],"float32"),d=this.texData.get(u.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture.texture,d.texShape[0],d.texShape[1]).subarray(0,s);return this.disposeIntermediateTensorInfo(u),p}timerAvailable(){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let i=this.activeTimers,r=[],o=!1;this.programTimersStack==null?(this.programTimersStack=r,o=!0):this.activeTimers.push(r),this.activeTimers=r,e();let s=x.flatten(this.activeTimers.map(c=>c.query)).filter(c=>c!=null),a=x.flatten(this.activeTimers.map(c=>c.name)).filter(c=>c!=null);this.activeTimers=i,o&&(this.programTimersStack=null);let l={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return H(this,null,function*(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let c=yield Promise.all(s);l.kernelMs=x.sum(c),l.getExtraProfileInfo=()=>c.map((u,d)=>({name:a[d],ms:u})).map(u=>`${u.name}: ${u.ms}`).join(", ")}else l.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,l})}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:x.now(),endMs:null}}endTimer(e){return G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=x.now(),e)}getQueryTime(e){return H(this,null,function*(){if(G().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let i=e;return i.endMs-i.startMs})}disposeData(e,i=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(i?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!i&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,i),this.disposeData(r.imag.dataId,i)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:i,dtype:r,texShape:o,usage:s,isPacked:a,slice:l}=this.texData.get(e),c=l&&l.origDataId||e,u=this.dataRefCount.get(c);u>1?this.dataRefCount.set(c,u-1):(this.dataRefCount.delete(c),i!=null&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(i,o,s,a)));let d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,i=Y$e){return G().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&x.sizeFromShape(r.shape)<i)}getGPGPUContext(){return this.gpgpu}where(e){C.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let i=e.dataSync();return j$e(e.shape,i)}packedUnaryOp(e,i,r){let o=new to(e.shape,i),s=this.compileAndRun(o,[e],r);return hs().makeTensorFromTensorInfo(s)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){let o=OE(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,o)}if(G().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,aB,e.dtype);let i=new Ui(e.shape,aB),r=this.compileAndRun(i,[e]);return hs().makeTensorFromTensorInfo(r)}makeTensorInfo(e,i,r){let o;if(i==="string"&&r!=null&&r.length>0&&x.isString(r[0])){let s=r.map(a=>x.encodeString(a));o=this.write(s,e,i)}else o=this.write(r,e,i);return this.texData.get(o).usage=null,{dataId:o,shape:e,dtype:i}}makeOutput(e,i,r){return hs().makeTensorFromTensorInfo(this.makeTensorInfo(e,i,r),this)}unpackTensor(e){let i=new $E(e.shape);return this.runWebGLProgram(i,[e],e.dtype)}packTensor(e){let i=new LE(e.shape);return this.runWebGLProgram(i,[e],e.dtype,null,!0)}packedReshape(e,i){let r=[tp(e.shape),...np(e.shape)],o={dtype:e.dtype,shape:r,dataId:e.dataId},s=[tp(i),...np(i)],a=new Nb(s,r),l=!0,c=[r],u=this.runWebGLProgram(a,[o],e.dtype,c,l);return{dataId:u.dataId,shape:i,dtype:u.dtype}}decode(e,i){let r=this.texData.get(e),{isPacked:o,shape:s,dtype:a}=r;if(i!=null){let h=x.sizeFromShape(s),m=i[0]*i[1]*4;x.assert(h<=m,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let l=D_(s),c;o?c=new DE(l):c=new EE(l);let u=!0,d=[i??S_(l)],p=this.runWebGLProgram(c,[{shape:l,dtype:a,dataId:e}],a,d,u,i);return{dtype:a,shape:s,dataId:p.dataId}}runWebGLProgram(e,i,r,o,s=!1,a){let l=this.makeTensorInfo(e.outputShape,r),c=this.texData.get(l.dataId);if(e.packedOutput&&(c.isPacked=!0),e.outPackingScheme===_m.DENSE){let b=a??S_(e.outputShape);c.texShape=b.map(v=>v*2)}if(e.outTexUsage!=null&&(c.usage=e.outTexUsage),x.sizeFromShape(l.shape)===0)return c.values=x.getTypedArrayFromDType(l.dtype,0),l;let u=[],d=i.map(b=>{if(b.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let v=this.texData.get(b.dataId);if(v.texture==null){if(!e.packedInputs&&x.sizeFromShape(b.shape)<=G().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:b.shape,texData:null,isUniform:!0,uniformValues:v.values};e.packedInputs&&(v.isPacked=!0,v.shape=b.shape)}if(this.uploadToGPU(b.dataId),!!v.isPacked!=!!e.packedInputs)b=v.isPacked?this.unpackTensor(b):this.packTensor(b),u.push(b),v=this.texData.get(b.dataId);else if(v.isPacked&&!Cm(v.shape,b.shape)){let _=b,w=b.shape;b.shape=v.shape,b=this.packedReshape(b,w),u.push(b),v=this.texData.get(b.dataId),_.shape=w}return{shape:b.shape,texData:v,isUniform:!1}});this.uploadToGPU(l.dataId);let p={shape:l.shape,texData:c,isUniform:!1},h=cne(e,d,p),m=this.getAndSaveBinary(h,()=>ane(this.gpgpu,e,d,p)),g=this.activeTimers!=null,f;g&&(f=this.startTimer()),G().get("ENGINE_COMPILE_ONLY")||lne(this.gpgpu,m,d,p,o),u.forEach(b=>this.disposeIntermediateTensorInfo(b)),g&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));let y=G().getNumber("WEBGL_FLUSH_THRESHOLD");if(y>0){let b=x.now();b-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=b)}if(!G().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&s===!1){let b=this.unpackTensor(l);return this.disposeIntermediateTensorInfo(l),b}return l}compileAndRun(e,i,r,o,s=!1){return r=r||i[0].dtype,this.runWebGLProgram(e,i,r,o,s)}getAndSaveBinary(e,i){return e in this.binaryCache||(this.binaryCache[e]=i()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(G().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(i=>{this.gpgpu.deleteProgram(this.binaryCache[i].webGLProgram),delete this.binaryCache[i]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=W(()=>{if(!G().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=G().getBool("DEBUG");G().set("DEBUG",!1);let i=this.abs(je(1e-8)).dataSync()[0];if(G().set("DEBUG",e),i>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?q$e:X$e}uploadToGPU(e){let i=this.texData.get(e),{shape:r,dtype:o,values:s,texture:a,usage:l,isPacked:c}=i;if(a!=null)return;let u=this.activeTimers!=null,d;u&&(d=x.now());let p=i.texShape;if(p==null&&(p=Xte(r,c),i.texShape=p),s!=null){let h=D_(r),m,g=p[1],f=p[0],y=s instanceof Uint8Array||s instanceof Uint8ClampedArray;(c||!y)&&([g,f]=il(p[0],p[1])),c?m=new ME(h,y):m=new A_(h,y);let b=y?[f,g]:p,v=this.makeTensorInfo(b,o),_=this.texData.get(v.dataId);y?_.usage=hr.PIXELS:_.usage=hr.UPLOAD,_.texShape=b,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),g,f,s);let w=[[f,g]],D=this.runWebGLProgram(m,[v],o,w,!0),N=this.texData.get(D.dataId);i.texShape=N.texShape,i.isPacked=N.isPacked,i.usage=N.usage,G().get("ENGINE_COMPILE_ONLY")?this.disposeData(D.dataId):(i.texture=N.texture,i.values=null,this.texData.delete(D.dataId)),this.disposeIntermediateTensorInfo(v),u&&(this.uploadWaitMs+=x.now()-d)}else{let h=this.acquireTexture(p,l,o,c);i.texture=h}}convertAndCacheOnCPU(e,i){let r=this.texData.get(e),{dtype:o}=r;return i!=null&&(r.values=J$e(i,o)),r.values}acquireTexture(e,i,r,o){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){let s=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${s} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,i,o)}computeBytes(e,i){return e[0]*e[1]*x.bytesPerElement(i)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}checkCompileCompletionAsync(){return H(this,null,function*(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,i]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(i));return Promise.all(e)}else{for(let[,i]of Object.entries(this.binaryCache)){let r=new Promise(o=>{try{this.checkCompletion_(i),o(!0)}catch(s){throw s}});e.push(r)}return Promise.all(e)}})}checkCompletionAsync_(e){return H(this,null,function*(){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(yield e_(),this.checkCompletionAsync_(e))})}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(YV(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:i,customUniformLocations:r,infLoc:o,nanLoc:s,outShapeLocation:a,outShapeStridesLocation:l,outTexShapeLocation:c}=eB(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=i,e.customUniformLocations=r,e.infLoc=o,e.nanLoc=s,e.outShapeLocation=a,e.outShapeStridesLocation=l,e.outTexShapeLocation=c}}createTensorFromGPUData(e,i,r){e.channels=e.channels||"RGBA";let{texture:o,height:s,width:a,channels:l}=e,c=hs().backend;if(!c.gpgpu.gl.isTexture(o))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let u=c.writeTexture(o,i,r,s,a,l);return hs().makeTensorFromDataId(u,i,r,c)}}return t.nextDataId=0,t})();function J$e(t,n){if(n==="float32"||n==="complex64")return t;if(n==="int32"||n==="bool"){let e=n==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let i=0;i<e.length;++i)e[i]=Math.round(t[i]);return e}else throw new Error(`Unknown dtype ${n}`)}Vd.isBrowser()&&vk("webgl",()=>new Mie,2);var Mb=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;var no=class{constructor(n,e,i){this.variableNames=["A","B"],this.outputShape=C.assertAndGetBroadcastShape(e,i),this.enableShapeUniforms=nn(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${n}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}};var Do=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;var Eo=class{constructor(n,e,i,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=C.assertAndGetBroadcastShape(e,i);let o=this.outputShape.length;this.enableShapeUniforms=nn(o);let s="";if(r)if(o===0||x.sizeFromShape(this.outputShape)===1)s=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(s=`
          ${dt(o)} coords = getOutputCoords();
        `,o===1)this.enableShapeUniforms?s+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:s+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{let l=jn("coords",o);this.enableShapeUniforms?s+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= outShape[${o} - 2];
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= outShape[${o} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:s+=`
            bool nextRowOutOfBounds =
              (${l[o-2]} + 1) >= ${this.outputShape[o-2]};
            bool nextColOutOfBounds =
              (${l[o-1]} + 1) >= ${this.outputShape[o-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${n}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${s}

        setOutput(result);
      }
    `}};function qn(t){let{inputs:n,backend:e}=t,{x:i}=n;return e.incRef(i.dataId),{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}var Rie={kernelName:Ga,backendName:"webgl",kernelFunc:qn};function io(t){let{inputs:n,backend:e}=t,{real:i,imag:r}=n,o=e.makeTensorInfo(i.shape,"complex64"),s=e.texData.get(o.dataId),a=qn({inputs:{x:i},backend:e}),l=qn({inputs:{x:r},backend:e});return s.complexTensorInfos={real:a,imag:l},o}var Oie={kernelName:Wg,backendName:"webgl",kernelFunc:io};var lB="return (a < 0.) ? b * a : a;",cB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function eVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{alpha:o}=i,s=e.makeTensorInfo([],"float32",x.createScalarValue(o,"float32")),a=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eo(cB,r.shape,s.shape):new no(lB,r.shape,s.shape),l=e.runWebGLProgram(a,[r,s],"float32");return e.disposeIntermediateTensorInfo(s),l}var Fie={kernelName:cd,backendName:"webgl",kernelFunc:eVe};var uB="return (a < 0.) ? b * a : a;",dB=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function tVe(t){let{inputs:n,backend:e}=t,{x:i,alpha:r}=n,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eo(dB,i.shape,r.shape):new no(uB,i.shape,r.shape);return e.runWebGLProgram(o,[i,r],"float32")}var Lie={kernelName:wd,backendName:"webgl",kernelFunc:tVe};var As="if (isnan(x)) return x;";function ze({opSnippet:t,packedOpSnippet:n,cpuKernelImpl:e,dtype:i}){return({inputs:r,backend:o})=>{let{x:s}=r,a=o,l=i||s.dtype;if(a.shouldExecuteOnCPU([s])&&e!=null){let d=a.texData.get(s.dataId),p=e(d.values,l);return a.makeTensorInfo(s.shape,l,p)}let c=G().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&n!=null,u;return c?u=new to(s.shape,n):u=new Ui(s.shape,t),a.runWebGLProgram(u,[s],l)}}function Qt({opSnippet:t,packedOpSnippet:n,checkOutOfBounds:e=!1,supportsComplex:i=!1,cpuKernelImpl:r,dtype:o}){return({inputs:s,backend:a})=>{let{a:l,b:c}=s,u=a;if(i&&l.dtype==="complex64"){let m=u.texData.get(l.dataId),g=u.texData.get(c.dataId),[f,y]=[[m.complexTensorInfos.real,g.complexTensorInfos.real],[m.complexTensorInfos.imag,g.complexTensorInfos.imag]].map(v=>{let[_,w]=v,T={dataId:_.dataId,dtype:_.dtype,shape:l.shape},D={dataId:w.dataId,dtype:w.dtype,shape:c.shape},N=new no(t,l.shape,c.shape);return u.runWebGLProgram(N,[T,D],ni(_.dtype,w.dtype))}),b=io({inputs:{real:f,imag:y},backend:u});return u.disposeIntermediateTensorInfo(f),u.disposeIntermediateTensorInfo(y),b}let d=o||ni(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&r!=null){let m=u.texData.get(l.dataId).values,g=u.texData.get(c.dataId).values,f=l.dtype==="string"?C.fromUint8ToStringArray(m):m,y=l.dtype==="string"?C.fromUint8ToStringArray(g):g,[b,v]=r(l.shape,c.shape,f,y,d),_=u.makeTensorInfo(v,d),w=u.texData.get(_.dataId);return w.values=b,_}let p=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&n!=null,h;return p?h=new Eo(n,l.shape,c.shape,e):h=new no(t,l.shape,c.shape),u.runWebGLProgram(h,[l,c],d)}}function ou(t,n=!1){if(t==="linear")return n?Iie:_ie;if(t==="relu")return n?Die:Cie;if(t==="elu")return n?Eie:wie;if(t==="relu6")return n?Aie:Tie;if(t==="prelu")return n?dB:uB;if(t==="leakyrelu")return n?cB:lB;if(t==="sigmoid")return n?Nie:Sie;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}var Rb=class{constructor(n,e,i,r=!1,o=!1,s=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=i,this.enableShapeUniforms=nn(this.outputShape.length);let u=r?n[1]:n[2],d=Math.ceil(u/2),p=r?"i * 2, rc.y":"rc.y, i * 2",h=o?"rc.z, i * 2":"i * 2, rc.z",m=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],g=o?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",y="";a&&(l?f=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?f=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:f=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");let b=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",_="rc.x";n[0]<e[0]?v=`imod(rc.x, ${n[0]})`:e[0]<n[0]&&(_=`imod(rc.x, ${e[0]})`),this.userCode=`
      ${f}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${_};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${p});
          vec4 b = getMatrixB(batchB, ${h});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${m[0]} * ${g[0]});
          result += (${m[1]} * ${g[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${y}

        setOutput(result);
      }
    `}};var pB={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},M_=class{constructor(n,e,i){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=C.assertAndGetBroadcastShape(e,i),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${n}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}};var Pie="return a * b;";function R_(t){let{inputs:n,backend:e}=t,{a:i,b:r}=n,o=C.upcastType(i.dtype,r.dtype);if(i.dtype==="complex64"){let a=e.texData.get(i.dataId),l=e.texData.get(r.dataId),c=new M_(pB.REAL,i.shape,r.shape),u=new M_(pB.IMAG,i.shape,r.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:i.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:r.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:r.shape}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),m=io({inputs:{real:p,imag:h},backend:e});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),m}if(e.shouldExecuteOnCPU([i,r])){let a=e.texData.get(i.dataId),l=e.texData.get(r.dataId),[c,u]=qne(i.shape,r.shape,a.values,l.values,o),d=e.makeTensorInfo(u,o),p=e.texData.get(d.dataId);return p.values=c,d}let s;return G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?s=new Eo(Pie,i.shape,r.shape):s=new no(Pie,i.shape,r.shape),e.runWebGLProgram(s,[i,r],o)}var $ie={kernelName:bc,backendName:"webgl",kernelFunc:R_};function Vie(t,n,e){let i=[tp(t.shape),...np(t.shape)],r={dtype:t.dtype,shape:i,dataId:t.dataId},o=[tp(n),...np(n)],s=new Nb(o,i),a=!0,l=[i],c=e.runWebGLProgram(s,[r],t.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}function me(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{shape:o}=i,s=e,a=x.sizeFromShape(r.shape),l=x.inferFromImplicitShape(o,a),c=x.sizeFromShape(l);x.assert(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${r.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);let u=s.texData.get(r.dataId);return u.isPacked&&!Cm(r.shape,l)&&!(u.texture!==null&&Cm(u.shape,l))?Vie(r,l,s):(s.incRef(r.dataId),{dataId:r.dataId,shape:l,dtype:r.dtype})}var Bie={kernelName:Td,backendName:"webgl",kernelFunc:me};var O_=class{constructor(n,e){this.variableNames=["x"];let{windowSize:i,batchSize:r,inSize:o,outSize:s}=n;this.outputShape=[r,s];let a=Math.floor(i/4)*4,l=i%4,c="sumValue += dot(values, ones);";if(e!=null){let d=1/e;c=`sumValue += dot(values * ${x.isInt(d)?d.toPrecision(2):d}, ones);`}let u="";o%i>0&&(u=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}};var BE=class{constructor(n,e){this.variableNames=["x"];let{windowSize:i,batchSize:r,inSize:o,outSize:s}=n;this.outputShape=[r,s];let a="0.0",l="";e==="prod"?a="1.0":e==="min"?(a="1.0 / 1e-20",l="min"):e==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");let u=Math.floor(i/4)*4,d=i%4,p=`
      if (${e==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${e==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${e==="min"} || ${e==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,h="vec4";e==="all"?(a="1.0",p=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,h="bvec4"):e==="any"&&(a="0.0",p=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,h="bvec4");let m="";o%i>0&&(m=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${m}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${i};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===2}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${p}
        } else if (${d===3}) {
          ${h} values = ${h}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function iVe(t){let n=[];for(;n.length===0||n[n.length-1].outSize!==1;){let e=n.length?n[n.length-1].outSize:t[1],i=C.computeOptimalWindowSize(e);n.push({inSize:e,windowSize:i,outSize:Math.ceil(e/i)})}return n}function Ao(t,n,e,i){let r=iVe(t.shape),o=t;for(let s=0;s<r.length;s++){let{inSize:a,windowSize:l,outSize:c}=r[s],u,d;e==="mean"?u=s===0?new O_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new O_({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new BE({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},e),d=o,o=i.runWebGLProgram(u,[o],n),d.dataId!==t.dataId&&i.disposeIntermediateTensorInfo(d)}return o}var zE=class{constructor(n,e){this.variableNames=["A"];let i=new Array(n.length);for(let s=0;s<i.length;s++)i[s]=n[e[s]];this.outputShape=i,this.rank=i.length;let r=dt(this.rank),o=rVe(e);this.userCode=`
    void main() {
      ${r} resRC = getOutputCoords();
      setOutput(getA(${o}));
    }
    `}};function rVe(t){let n=t.length;if(n>6)throw Error(`Transpose for rank ${n} is not yet supported`);let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],i=new Array(n);for(let r=0;r<t.length;r++)i[t[r]]=e[r];return i.join()}var GE=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let i=new Array(n.length);for(let u=0;u<i.length;u++)i[u]=n[e[u]];if(this.outputShape=i,this.rank=i.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=dt(this.rank),o=sB("rc",this.rank),s=new Array(this.rank);for(let u=0;u<e.length;u++)s[e[u]]=o[u];let a=`vec2(${s.slice(-2).join()})`,l=`++${o[this.rank-1]} < ${i[this.rank-1]}`,c=`getChannel(getA(${s.join()}), ${a})`;this.userCode=`
    void main() {
      ${r} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${o[this.rank-1]};
      if(++${o[this.rank-2]} < ${i[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}};function ip(t,n,e){let i=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GE(t.shape,n):new zE(t.shape,n);return e.runWebGLProgram(i,[t],t.dtype)}function zie(t,n,e,i){let r=n,o=t.shape.length,s=x.parseAxisParam(r,t.shape),a=s,l=C.getAxesPermutation(a,o),c=l!=null,u=t;c&&(u=ip(t,l,i),a=C.getInnerMostAxes(a.length,o)),C.assertAxesAreInnerMostDims("sum",a,o);let[d,p]=C.computeOutAndReduceShapes(u.shape,a),h=d;e&&(h=C.expandShapeToKeepDim(d,s));let m=x.sizeFromShape(p),f=x.sizeFromShape(t.shape)/m,y=me({inputs:{x:u},attrs:{shape:[f,m]},backend:i}),b=Uh(t.dtype),v=Ao(y,b,"sum",i),_=me({inputs:{x:v},attrs:{shape:h},backend:i});return i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(v),c&&i.disposeIntermediateTensorInfo(u),_}function Im(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i;return zie(r,o,s,e)}var Gie={kernelName:Ad,backendName:"webgl",kernelFunc:Im};function Dn(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{perm:o}=i,s=e,a=r.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=r.shape[o[u]];let c;if(s.shouldExecuteOnCPU([r])){let d=s.texData.get(r.dataId).values,p=km(d,r.shape,r.dtype,o,l);c=s.makeTensorInfo(l,r.dtype);let h=s.texData.get(c.dataId);h.values=p}else c=ip(r,o,s);return c}var Uie={kernelName:Ha,backendName:"webgl",kernelFunc:Dn};var hB=1e3;function Em({a:t,b:n,transposeA:e,transposeB:i,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:a=0,activation:l=null}){let c=t.shape.length,u=n.shape.length,d=e?t.shape[c-2]:t.shape[c-1],p=i?n.shape[u-1]:n.shape[u-2],h=e?t.shape[c-1]:t.shape[c-2],m=i?n.shape[u-2]:n.shape[u-1],g=t.shape.slice(0,-2),f=n.shape.slice(0,-2),y=x.sizeFromShape(g),b=x.sizeFromShape(f),_=wo.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([h,m]);x.assert(d===p,()=>`Error in matMul: inner shapes (${d}) and (${p}) of Tensors with shapes ${t.shape} and ${n.shape} and transposeA=${e} and transposeB=${i} must match.`);let w=e?[y,d,h]:[y,h,d],T=i?[b,m,p]:[b,p,m],D=me({inputs:{x:t},backend:r,attrs:{shape:w}}),N=me({inputs:{x:n},backend:r,attrs:{shape:T}}),O=[D,N],P=Math.max(y,b),B=e?D.shape[1]:D.shape[2],K=o!=null,X=s!=null,Z=l==="leakyrelu",te=l!=null?ou(l,!0):null,U=K||X||Z||te!=null,j;if((h===1||m===1)&&B>hB&&U===!1){let Q=D,oe=N;e&&(Q=Dn({inputs:{x:D},backend:r,attrs:{perm:[0,2,1]}}),O.push(Q)),i&&(oe=Dn({inputs:{x:N},backend:r,attrs:{perm:[0,2,1]}}),O.push(oe));let ae=m!==1,de=m===1,fe=Q;ae&&(fe=me({inputs:{x:Q},backend:r,attrs:{shape:[P,B,1]}}),O.push(fe));let ge=m===1?2:1,xe=oe;de&&(xe=me({inputs:{x:oe},backend:r,attrs:{shape:[P,1,B]}}),O.push(xe));let Ne=R_({inputs:{a:fe,b:xe},backend:r});j=Im({inputs:{x:Ne},backend:r,attrs:{axis:ge,keepDims:!0}}),O.push(Ne)}else{let Q=ni(t.dtype,n.dtype),oe=new Rb(w,T,[P,h,m],e,i,K,te,X,Z),ae=[D,N];if(o!=null&&ae.push(o),X&&ae.push(s),Z){let de=r.makeTensorInfo([],"float32",x.createScalarValue(a,"float32"));ae.push(de),O.push(de)}j=r.runWebGLProgram(oe,ae,Q)}let q=me({inputs:{x:j},backend:r,attrs:{shape:_}});O.push(j);for(let Q of O)r.disposeIntermediateTensorInfo(Q);return q}function oVe(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o,bias:s,preluActivationWeights:a}=n,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=i;return Em({a:r,b:o,transposeA:l,transposeB:c,backend:e,bias:s,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}var Hie={kernelName:Fh,backendName:"webgl",kernelFunc:oVe};var Wie="return abs(x);";function sVe(t){let{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])&&i.dtype!=="complex64"){let o=e.texData.get(i.dataId),s=OE(o.values);return e.makeTensorInfo(i.shape,i.dtype,s)}let r;return G().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new to(i.shape,Wie):r=new Ui(i.shape,Wie),e.runWebGLProgram(r,[i],i.dtype)}var jie={kernelName:Wu,backendName:"webgl",kernelFunc:sVe};var aVe=ci+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,lVe=ze({opSnippet:aVe}),qie={kernelName:Wl,backendName:"webgl",kernelFunc:lVe};var cVe=ci+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,uVe=ze({opSnippet:cVe}),Xie={kernelName:jl,backendName:"webgl",kernelFunc:uVe};var Kie="return a + b;",dVe=Qt({opSnippet:Kie,packedOpSnippet:Kie,supportsComplex:!0,cpuKernelImpl:kne}),Yie={kernelName:Xs,backendName:"webgl",kernelFunc:dVe};var UE=class{constructor(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((o,s)=>`T${s}`);let i=[];this.variableNames.forEach(o=>{i.push(`float v${o} = get${o}AtOutCoords();`)});let r=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        float result = ${r};
        setOutput(result);
      }
    `}};var HE=class{constructor(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((o,s)=>`T${s}`);let i=[];this.variableNames.forEach(o=>{i.push(`vec4 v${o} = get${o}AtOutCoords();`)});let r=this.variableNames.map(o=>`v${o}`).join(" + ");this.userCode=`
      void main() {
        ${i.join(`
        `)}

        vec4 result = ${r};
        setOutput(result);
      }
    `}};function WE(t){let{inputs:n,backend:e}=t,i=n;if(i.length===1)return qn({inputs:{x:i[0]},backend:e});if(i.length>G().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){let l=Math.floor(i.length/2),c=WE({inputs:i.slice(0,l),backend:e}),u=WE({inputs:i.slice(l),backend:e});return WE({inputs:[c,u],backend:e})}let r=i.map(l=>l.dtype).reduce((l,c)=>ni(l,c)),o=i.map(l=>l.shape),a=G().getBool("WEBGL_PACK")?new HE(i[0].shape,o):new UE(i[0].shape,o);return e.runWebGLProgram(a,i,r)}var Qie={kernelName:Vg,backendName:"webgl",kernelFunc:WE};function pVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=x.parseAxisParam(o,r.shape),c=l,u=C.getAxesPermutation(c,a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),c=C.getInnerMostAxes(c.length,a)),C.assertAxesAreInnerMostDims("all",c,a);let[p,h]=C.computeOutAndReduceShapes(d.shape,c),m=x.sizeFromShape(h),g=me({inputs:{x:d},backend:e,attrs:{shape:[-1,m]}}),f=Ao(g,g.dtype,"all",e),y;if(s){let b=C.expandShapeToKeepDim(p,l);y=me({inputs:{x:f},backend:e,attrs:{shape:b}})}else y=me({inputs:{x:f},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),u!=null&&e.disposeIntermediateTensorInfo(d),y}var Zie={kernelName:Bg,backendName:"webgl",kernelFunc:pVe};function hVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=x.parseAxisParam(o,r.shape),c=l,u=C.getAxesPermutation(c,a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),c=C.getInnerMostAxes(c.length,a)),C.assertAxesAreInnerMostDims("any",c,a);let[p,h]=C.computeOutAndReduceShapes(d.shape,c),m=x.sizeFromShape(h),g=me({inputs:{x:d},backend:e,attrs:{shape:[-1,m]}}),f=Ao(g,g.dtype,"any",e),y;if(s){let b=C.expandShapeToKeepDim(p,l);y=me({inputs:{x:f},backend:e,attrs:{shape:b}})}else y=me({inputs:{x:f},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),u!=null&&e.disposeIntermediateTensorInfo(d),y}var Jie={kernelName:zg,backendName:"webgl",kernelFunc:hVe};var jE=class{constructor(n,e,i){this.variableNames=["A"];let{windowSize:r,batchSize:o,outSize:s}=n;i||this.variableNames.push("bestIndicesA"),this.outputShape=[o,s];let a=e==="max"?">":"<",l=i?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${r}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}};var qE=class{constructor(n,e,i,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,x.assert(n.length>2,()=>`Packed arg${i.charAt(0).toUpperCase()+i.slice(1)} supports only inputs with rank above 2.`);let o=n[n.length-1],s=Math.ceil(o/e);this.outputShape=n.slice(0,-1),s>1&&this.outputShape.push(s),r||this.variableNames.push("bestIndicesA");let a=this.outputShape,l=a.length,c=dt(l),u=jn("coords",l),d,p;if(s===1){p=l+1;let N=dt(p);d=`
        ${N} sourceLocR = ${N}(${u.join()}, 0);
        ++${u[l-1]};
        ${N} sourceLocG = ${N}(${u.join()}, 0);
        ++${u[l-2]};
        ${N} sourceLocA = ${N}(${u.join()}, 0);
        --${u[l-1]};
        ${N} sourceLocB = ${N}(${u.join()}, 0);
        --${u[l-2]};`}else p=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;let h=["x","y","z","w","u","v"].slice(0,p),m="."+h[p-1],g=h.map(N=>"int "+N),f=jn("sourceLocR",p-1).concat("inIdx.r"),y=jn("sourceLocG",p-1).concat("inIdx.g"),b=jn("sourceLocB",p-1).concat("inIdx.b"),v=jn("sourceLocA",p-1).concat("inIdx.a"),_=i==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${f.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${v.join()})));`,T=`vec4(
            getAChannel(${f.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,D=r?"":`
      float getBestIndicesAChannel(${g.join()}) {
        return getChannel(getBestIndicesA(${h.join()}),
                                          vec2(${h.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${g.join()}) {
        return getChannel(getA(${h.join()}),
                               vec2(${h.slice(-2).join()}));
      }
      ${D}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${m}, sourceLocG${m},
          sourceLocB${m}, sourceLocA${m}) * ${e};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${T};

        for (int i = 0; i < ${e}; i++) {
          inIdx = srcIdx;
          ${w}
          vec4 candidate = ${T};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${_}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}};function ere(t,n,e,i=null){let r=n.shape[0],o=n.shape[1];i!=null&&(r=i.shape[0],o=i.shape[1]);let s=C.computeOptimalWindowSize(o),a={windowSize:s,inSize:o,batchSize:r,outSize:Math.ceil(o/s)},l=new jE(a,e,i==null),c=[n];i!=null&&c.push(i);let u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;let d=ere(t,n,e,u);return t.disposeIntermediateTensorInfo(u),d}function tre(t,n,e,i=null){let r=i!=null?i.shape:n.shape,o=r[r.length-1],s=C.computeOptimalWindowSize(o),a=new qE(r,s,e,i==null),l=i==null?[n]:[n,i],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===n.shape.length){let u=tre(t,n,e,c);return t.disposeIntermediateTensorInfo(c),u}return c}function XE(t,n,e,i){let r=[e];if(C.assertAxesAreInnerMostDims("arg"+i.charAt(0).toUpperCase()+i.slice(1),r,n.shape.length),!G().getBool("WEBGL_PACK_REDUCE")||n.shape.length<=2){let o=[],s=t.texData.get(n.dataId),a=s!==null&&s.isPacked,l=n;a&&(l=t.unpackTensor(n),o.push(l));let[c,u]=C.computeOutAndReduceShapes(l.shape,r),d=x.sizeFromShape(u),p=me({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});o.push(p);let h=ere(t,p,i);o.push(h);let m=me({inputs:{x:h},backend:t,attrs:{shape:c}});return o.forEach(g=>t.disposeIntermediateTensorInfo(g)),m}return tre(t,n,i)}function mVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i,s=x.parseAxisParam(o,r.shape),a=C.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Dn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=C.getInnerMostAxes(s.length,l.shape.length)),C.assertAxesAreInnerMostDims("argMax",[s[0]],l.shape.length);let u=XE(e,l,s[0],"max");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var nre={kernelName:ju,backendName:"webgl",kernelFunc:mVe};function fVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o}=i,s=x.parseAxisParam(o,r.shape),a=C.getAxesPermutation(s,r.shape.length),l=r,c=[];a!=null&&(l=Dn({inputs:{x:r},backend:e,attrs:{perm:a}}),c.push(l),s=C.getInnerMostAxes(s.length,l.shape.length)),C.assertAxesAreInnerMostDims("argMin",[s[0]],l.shape.length);let u=XE(e,l,s[0],"min");return c.forEach(d=>e.disposeIntermediateTensorInfo(d)),u}var ire={kernelName:qu,backendName:"webgl",kernelFunc:fVe};var gVe=ci+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,yVe=ze({opSnippet:gVe}),rre={kernelName:ql,backendName:"webgl",kernelFunc:yVe};var bVe=ci+"return log(x + sqrt(x * x + 1.0));",xVe=ze({opSnippet:bVe}),ore={kernelName:Xl,backendName:"webgl",kernelFunc:xVe};var vVe=ci+`
  return atan(x);
`,_Ve=ze({opSnippet:vVe}),sre={kernelName:Kl,backendName:"webgl",kernelFunc:_Ve};var wVe=Mb+`
  return atan(a, b);
`,CVe=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Do+`
  return result;
`,TVe=Qt({opSnippet:wVe,packedOpSnippet:CVe}),are={kernelName:Ql,backendName:"webgl",kernelFunc:TVe};var SVe=ci+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,kVe=ze({opSnippet:SVe}),lre={kernelName:Yl,backendName:"webgl",kernelFunc:kVe};var ca=class{constructor(n,e,i,r=!1,o=!1){if(this.variableNames=["x"],e==="avg"&&i)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterHeight,p=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left;this.outputShape=n.outShape;let g=e==="avg",f=`((batch  * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + d`,y=`(xR * ${n.inWidth} + xC) * ${n.inChannels} + d`,b="0.0";if(g||(b="-1.0 / 1e-20"),i){let N=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${h}, ${m});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${p};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${N} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${r?o?f:y:`wR * ${p} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let v="max",_=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(_="avgValue / max(count, 1.0)");let w=Math.floor(s/4)*4,T=s%4,D=`
      if (${g}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${h}, ${m});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${w}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${D}
          }

          int xC = xCCorner + ${w};
          if (${T===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${D}
          } else if (${T===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${D}
          } else if (${T===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${D}
          }
        }
        setOutput(${_});
      }
    `}},rp=class{constructor(n,e,i,r=!1,o=!1){if(this.variableNames=["x"],e==="avg"&&i)throw new Error("Cannot compute positions for average pool.");let s=n.filterWidth,a=n.strideDepth,l=n.strideHeight,c=n.strideWidth,u=n.dilationDepth,d=n.dilationHeight,p=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,g=n.effectiveFilterWidth,f=n.padInfo.front,y=n.padInfo.top,b=n.padInfo.left;this.outputShape=n.outShape;let v=e==="avg",_="0.0";if(v||(_="-1.0 / 1e-20"),i){let P=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${f}, ${y}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${h};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${n.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${m};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${g};
                  wC += ${p}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${P} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${r?o?`(((batch * ${n.inDepth} + xD) * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`((xD * ${n.inHeight} + xR) * ${n.inWidth} + xC) * ${n.inChannels} + ch`:`wD * ${m} * ${g} +
                      wR * ${g} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}let w="max",T=`${e}(${e}(${e}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;e==="avg"&&(T="avgValue / max(count, 1.0)");let D=Math.floor(s/4)*4,N=s%4,O=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${w}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${f}, ${y}, ${b});
      const float initializationValue = ${_};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${n.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${_});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${h};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${m};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${D}; wC += 4) {
              int xC = xCCorner + wC * ${p};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                getValue(batch, xD, xR, xC + 3 * ${p}, ch)
              );

              ${O}
            }

            int xC = xCCorner + ${D};
            if (${N===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${N===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${N===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${p}, ch),
                getValue(batch, xD, xR, xC + 2 * ${p}, ch),
                initializationValue
              );

              ${O}
            }
          }
        }
        setOutput(${T});
      }
    `}};function IVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;rl(r,"avgPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;x.assert(C.eitherStridesOrDilationsAreOne(s,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=C.computePool2DInfo(r.shape,o,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return qn({inputs:{x:r},backend:e});let d=new ca(u,"avg",!1);return e.runWebGLProgram(d,[r],"float32")}var cre={kernelName:Xu,backendName:"webgl",kernelFunc:IVe};function EVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dimRoundingMode:l,dataFormat:c}=i,u=[1,1,1],d=C.computePool3DInfo(r.shape,o,s,u,a,l,c),p=new rp(d,"avg",!1);return e.runWebGLProgram(p,[r],"float32")}var ure={kernelName:Ku,backendName:"webgl",kernelFunc:EVe};var KE=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterHeight,i=n.filterWidth,r=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,u=l-1-n.padInfo.top,d=c-1-n.padInfo.left,p=1/(e*i);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${p});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}},YE=class{constructor(n){this.variableNames=["dy"],this.outputShape=n.inShape;let e=n.filterDepth,i=n.filterHeight,r=n.filterWidth,o=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,m=d-1-n.padInfo.front,g=p-1-n.padInfo.top,f=h-1-n.padInfo.left,y=1/(e*i*r);this.userCode=`
      const ivec3 pads = ivec3(${m}, ${g}, ${f});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${o}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${p};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function DVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,d=[1,1,1],p=C.computePool3DInfo(s.shape,a,l,d,c,u),h=new YE(p);return e.runWebGLProgram(h,[r],s.dtype)}var dre={kernelName:Ug,backendName:"webgl",kernelFunc:DVe};function AVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o;rl([r,o],"avgPoolGrad");let{filterSize:a,strides:l,pad:c}=i,u=C.computePool2DInfo(s.shape,a,l,1,c),d=new KE(u);return e.runWebGLProgram(d,[r],s.dtype)}var pre={kernelName:Gg,backendName:"webgl",kernelFunc:AVe};function NVe(t){let{inputs:n,backend:e,attrs:i}=t,{a:r,b:o}=n,{transposeA:s,transposeB:a}=i;return Em({a:r,b:o,transposeA:s,transposeB:a,backend:e})}var hre={kernelName:Yu,backendName:"webgl",kernelFunc:NVe};var QE=class{constructor(n,e,i,r,o,s){this.outputShape=[],this.variableNames=["x","mean","variance"],C.assertAndGetBroadcastShape(n,e),C.assertAndGetBroadcastShape(n,i);let a="0.0";r!=null&&(C.assertAndGetBroadcastShape(n,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";o!=null&&(C.assertAndGetBroadcastShape(n,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${s}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}};var ZE=class{constructor(n,e,i,r,o,s){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],C.assertAndGetBroadcastShape(n,e),C.assertAndGetBroadcastShape(n,i);let a="vec4(0.0)";r!=null&&(C.assertAndGetBroadcastShape(n,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";o!=null&&(C.assertAndGetBroadcastShape(n,o),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${s}));

        setOutput((x - mean) * inv + offset);
      }
    `}};var MVe=({inputs:t,backend:n,attrs:e})=>{let{x:i,mean:r,variance:o,offset:s,scale:a}=t;x.assert(r.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),x.assert(s==null||r.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),x.assert(a==null||r.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=e;l==null&&(l=.001);let c=[i,r,o],u=null;s!=null&&(u=s.shape,c.push(s));let d=null;a!=null&&(d=a.shape,c.push(a));let p=G().getBool("WEBGL_PACK_NORMALIZATION")?new ZE(i.shape,r.shape,o.shape,u,d,l):new QE(i.shape,r.shape,o.shape,u,d,l);return n.runWebGLProgram(p,c,c[0].dtype)},mre={kernelName:ad,backendName:"webgl",kernelFunc:MVe};var JE=class{constructor(n){this.variableNames=["source"],this.outputShape=n,this.rank=n.length;let e=dt(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let i=RVe(this.rank),r,o=n.map((s,a)=>`sourceLoc.${mB[a]} = start[${a}] + coords.${mB[a]};`);r=`
        ${e} sourceLoc;
        ${e} coords = getOutputCoords();
        ${o.join(`
`)}
      `,this.userCode=`
      void main() {
        ${r}
        setOutput(getSource(${i}));
      }
    `}},mB=["x","y","z","w","u","v"];function RVe(t){if(t===1)return"sourceLoc";if(t<=6)return mB.slice(0,t).map(n=>"sourceLoc."+n).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}var eD=class{constructor(n){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.rank=n.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let e=dt(this.rank),i=jn("coords",this.rank),r=jn("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":`vec2(${r.slice(-2).join()})`,s=`getChannel(getSource(${r.join()}), ${o})`,a=`
      result.x = ${s};
      if (++${i[this.rank-1]} < ${n[this.rank-1]}) {
        ++${r[this.rank-1]};
        result.y = ${s};
        --${r[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${i[this.rank-1]};
      if (++${i[this.rank-2]} < ${n[this.rank-2]}) {
        ++${r[this.rank-2]};
        result.z = ${s};
        if (++${i[this.rank-1]} < ${n[this.rank-1]}) {
          ++${r[this.rank-1]};
          result.w = ${s};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${e}(${n.map((u,d)=>`start[${d}]`).join()});`:n.map((u,d)=>`${r[d]} = ${i[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${e} coords = getOutputCoords();
        ${e} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}};function OVe(t,n,e,i){let r=i.texData.get(t.dataId),o=i.makeTensorInfo(e,t.dtype),s=i.texData.get(o.dataId);Object.assign(s,r),s.refCount=1,s.shape=e,s.dtype=t.dtype;let a=Ti.computeFlatOffset(n,x.computeStrides(t.shape));r.slice&&(a+=r.slice.flatOffset),s.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||t.dataId};let l=i.dataRefCount.get(s.slice.origDataId)||1;return i.dataRefCount.set(s.slice.origDataId,l+1),o}function ua(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,size:s}=i,[a,l]=Ti.parseSliceParams(r,o,s);if(Ti.assertParamsValid(r,a,l),x.sizeFromShape(l)===0)return e.makeTensorInfo(l,r.dtype,[]);if(e.shouldExecuteOnCPU([r])||r.dtype==="string"){let d=e.texData.get(r.dataId),p=rie(d.values,a,l,r.shape,r.dtype);return e.makeTensorInfo(l,r.dtype,p)}let{isPacked:c}=e.texData.get(r.dataId),u=Ti.isSliceContinous(r.shape,a,l);if(c||!u){let d=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new eD(l):new JE(l),p=[a];return e.runWebGLProgram(d,[r],r.dtype,p)}return e.uploadToGPU(r.dataId),OVe(r,a,l,e)}var fre={kernelName:Dd,backendName:"webgl",kernelFunc:ua};var FVe=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,crops:s}=i;x.assert(r.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let a=o.reduce((b,v)=>b*v),l=C.getReshaped(r.shape,o,a),c=C.getPermuted(l.length,o.length),u=C.getReshapedPermuted(r.shape,o,a),d=C.getSliceBeginCoords(s,o.length),p=C.getSliceSize(u,s,o.length),h=[],m=me({inputs:{x:r},backend:e,attrs:{shape:l}}),g=Dn({inputs:{x:m},backend:e,attrs:{perm:c}}),f=me({inputs:{x:g},backend:e,attrs:{shape:u}}),y=ua({inputs:{x:f},backend:e,attrs:{begin:d,size:p}});return h.push(m),h.push(g),h.push(f),h.forEach(b=>e.disposeIntermediateTensorInfo(b)),y},gre={kernelName:Qu,backendName:"webgl",kernelFunc:FVe};function LVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s}=i,a=e.readSync(r.dataId),l=e.readSync(o.dataId),c=RE(a,l,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,c)}var yre={kernelName:Hg,backendName:"webgl",kernelFunc:LVe};var PVe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,$Ve=`
  return float(int(a.r) & int(b.r));
`;function VVe(t){let{inputs:n,backend:e}=t,{a:i,b:r}=n,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=G().getNumber("WEBGL_VERSION");if(e.shouldExecuteOnCPU([i,r])||s===1){let l=e.texData.get(i.dataId).values,c=e.texData.get(r.dataId).values,[u,d]=Ene(i.shape,r.shape,l,c,i.dtype),p=e.makeTensorInfo(d,i.dtype),h=e.texData.get(p.dataId);return h.values=u,p}let a;return o?a=new Eo(PVe,i.shape,r.shape,!1):a=new no($Ve,i.shape,r.shape),e.runWebGLProgram(a,[i,r],i.dtype)}var bre={kernelName:x0,backendName:"webgl",kernelFunc:VVe};function BVe(t){let{inputs:n,backend:e}=t,{s0:i,s1:r}=n,o=e.readSync(i.dataId),s=e.readSync(r.dataId),a=C.assertAndGetBroadcastShape(Array.from(o),Array.from(s));return e.makeTensorInfo([a.length],"int32",Int32Array.from(a))}var xre={kernelName:G1,backendName:"webgl",kernelFunc:BVe};var zVe="return float(a != b);",fB=Qt({opSnippet:zVe,cpuKernelImpl:Kne,dtype:"bool"}),vre={kernelName:Oh,backendName:"webgl",kernelFunc:fB};function su(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.texData.get(i.dataId);return qn({inputs:{x:r.complexTensorInfos.real},backend:e})}var _re={kernelName:fy,backendName:"webgl",kernelFunc:su};var GVe="return float(int(x));";function wre(t,n){let e=new Ui(t.shape,GVe),i=n.runWebGLProgram(e,[t],"int32");return{dataId:i.dataId,shape:i.shape,dtype:i.dtype}}function gB(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dtype:o}=i;if(o==="complex64"){if(r.dtype==="complex64")return qn({inputs:{x:r},backend:e});let s=_n(r.shape),a=gB({inputs:{x:r},backend:e,attrs:{dtype:"float32"}}),l=io({inputs:{real:a,imag:s},backend:e});return s.dispose(),e.disposeIntermediateTensorInfo(a),l}if(r.dtype==="complex64"){let s=su({inputs:{input:r},backend:e}),a=gB({inputs:{x:s},backend:e,attrs:{dtype:o}});return e.disposeIntermediateTensorInfo(s),a}if(!x.hasEncodingLoss(r.dtype,o)){let s=qn({inputs:{x:r},backend:e});return{dataId:s.dataId,shape:s.shape,dtype:o}}if(e.shouldExecuteOnCPU([r])){let s=e.texData.get(r.dataId).values,[a,l,c]=Dne(s,r.shape,r.dtype,o);return e.makeTensorInfo(a,l,c)}if(o==="int32")return wre(r,e);if(o==="bool"){let s=e.makeTensorInfo([],"bool",x.getTypedArrayFromDType("bool",1)),l=fB({inputs:{a:r,b:s},backend:e});return e.disposeIntermediateTensorInfo(s),l}throw new Error(`Error in Cast: failed to cast ${r.dtype} to ${o}`)}var Cre={kernelName:za,backendName:"webgl",kernelFunc:gB};var Tre="return ceil(x);",UVe=ze({opSnippet:Tre,packedOpSnippet:Tre,cpuKernelImpl:Ane}),Sre={kernelName:Zl,backendName:"webgl",kernelFunc:UVe};var tD=class{constructor(n){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}};var nD=class{constructor(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=n,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}};function HVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{clipValueMin:o,clipValueMax:s}=i,a;G().getBool("WEBGL_PACK_CLIP")?a=new nD(r.shape):a=new tD(r.shape);let l=[[o],[s]];return e.runWebGLProgram(a,[r],r.dtype,l)}var kre={kernelName:Jl,backendName:"webgl",kernelFunc:HVe};var iD=class{constructor(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}};function Ire(t,n){return{dataId:n.dataId,dtype:n.dtype,shape:t.shape}}function WVe(t){let{inputs:n,backend:e}=t,{x:i}=n,r=e.texData.get(i.dataId),o=new iD(i.shape),s=[Ire(i,r.complexTensorInfos.real),Ire(i,r.complexTensorInfos.imag)];return e.runWebGLProgram(o,s,s[0].dtype)}var Ere={kernelName:Zu,backendName:"webgl",kernelFunc:WVe};var rD=class{constructor(n){this.outputShape=[],this.outputShape=C.computeOutShape(n,1),this.variableNames=n.map((s,a)=>`T${a}`);let e=new Array(n.length-1);e[0]=n[0][1];for(let s=1;s<e.length;s++)e[s]=e[s-1]+n[s][1];let i=[`if (yC < ${e[0]}) setOutput(getT0(yR, yC));`];for(let s=1;s<e.length;s++){let a=e[s-1];i.push(`else if (yC < ${e[s]}) setOutput(getT${s}(yR, yC-${a}));`)}let r=e.length,o=e[e.length-1];i.push(`else setOutput(getT${r}(yR, yC-${o}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${i.join(`
        `)}
      }
    `}};var sD=class{constructor(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=C.computeOutShape(n,e);let i=this.outputShape,r=i.length,o=dt(r),s=jn("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map((g,f)=>`T${f}`);let l=new Array(n.length-1);l[0]=n[0][e];for(let g=1;g<l.length;g++)l[g]=l[g-1]+n[g][e];let c=a[e],u=a.slice(-2),d=a.join(),p=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let g=1;g<l.length;g++){let f=l[g-1];p+=`
        if (${c} < ${l[g]}  && ${c} >= ${l[g-1]}) {
          return getChannel(
            getT${g}(${oD(a,c,f)}),
            vec2(${oD(u,c,f)}));
        }`}let h=l.length,m=l[l.length-1];p+=`
        return getChannel(
          getT${h}(${oD(a,c,m)}),
          vec2(${oD(u,c,m)}));`,this.userCode=`
      float getValue(${a.map(g=>"int "+g)}) {
        ${p}
      }

      void main() {
        ${o} coords = getOutputCoords();
        vec4 result = vec4(getValue(${s}), 0., 0., 0.);

        ${s[r-1]} = ${s[r-1]} + 1;
        if (${s[r-1]} < ${i[r-1]}) {
          result.g = getValue(${s});
        }

        ${s[r-2]} = ${s[r-2]} + 1;
        if (${s[r-2]} < ${i[r-2]}) {
          result.a = getValue(${s});
        }

        ${s[r-1]} = ${s[r-1]} - 1;
        if (${s[r-2]} < ${i[r-2]} &&
            ${s[r-1]} < ${i[r-1]}) {
          result.b = getValue(${s});
        }
        setOutput(result);
      }
    `}};function oD(t,n,e){let i=t.indexOf(n);return t.map((o,s)=>s===i?`${o} - ${e}`:o).join()}function Dm(t){let{inputs:n,backend:e}=t,{input:i}=n,r=e.texData.get(i.dataId);return qn({inputs:{x:r.complexTensorInfos.imag},backend:e})}var Dre={kernelName:ay,backendName:"webgl",kernelFunc:Dm};function Ob(t,n,e){let i=t[0].dtype;if(i==="complex64"){let h=t.map(b=>su({inputs:{input:b},backend:e})),m=t.map(b=>Dm({inputs:{input:b},backend:e})),g=Ob(h,n,e),f=Ob(m,n,e),y=io({inputs:{real:g,imag:f},backend:e});return h.forEach(b=>e.disposeIntermediateTensorInfo(b)),m.forEach(b=>e.disposeIntermediateTensorInfo(b)),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),y}let r=e.shouldExecuteOnCPU(t);if(i==="string"&&(r=!0),r){let h=t.map(_=>{let T=[-1,x.sizeFromShape(_.shape.slice(n))];return me({inputs:{x:_},backend:e,attrs:{shape:T}})}),m=h.map(_=>({vals:e.readSync(_.dataId),shape:_.shape})),g=C.computeOutShape(h.map(_=>_.shape),1),f=h[0].shape[0]===1,y=Nne(m,g,i,f),b=C.computeOutShape(t.map(_=>_.shape),n),v=e.makeTensorInfo(b,i,y);return h.forEach(_=>e.disposeIntermediateTensorInfo(_)),v}let o=t.filter(h=>x.sizeFromShape(h.shape)>0),s=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(o.length===1){let h=s?new Ui(t[0].shape,ol):new to(t[0].shape,ol);return e.runWebGLProgram(h,t,i)}let a=G().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>a){let h=[];for(let g=0;g<o.length;g+=a){let f=o.slice(g,g+a);h.push(Ob(f,n,e))}let m=Ob(h,n,e);for(let g of h)e.disposeIntermediateTensorInfo(g);return m}if(s){let h=new sD(o.map(m=>m.shape),n);return e.runWebGLProgram(h,o,i)}let{tensors2D:l,outShape:c}=jVe(o,n,e),u=new rD(l.map(h=>h.shape)),d=e.runWebGLProgram(u,l,i);l.forEach(h=>e.disposeIntermediateTensorInfo(h));let p=me({inputs:{x:d},attrs:{shape:c},backend:e});return e.disposeIntermediateTensorInfo(d),p}function jVe(t,n,e){let i=C.computeOutShape(t.map(o=>o.shape),n);return{tensors2D:t.map(o=>me({inputs:{x:o},attrs:{shape:[-1,x.sizeFromShape(o.shape.slice(n))]},backend:e})),outShape:i}}function yB(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i,o=x.parseAxisParam(r,n[0].shape)[0],s=n.map(c=>c.shape);C.assertParamsConsistent(s,o);let a=C.computeOutShape(n.map(c=>c.shape),o);if(x.sizeFromShape(a)===0)return e.makeTensorInfo(a,n[0].dtype,[]);let l=n.filter(c=>x.sizeFromShape(c.shape)>0);return l.length===1?qn({inputs:{x:l[0]},backend:e}):Ob(l,o,e)}var Are={kernelName:Ju,backendName:"webgl",kernelFunc:yB};var Fb=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.outputShape=n.outShape;let s=n.padInfo.top,a=n.padInfo.left,l=n.strideHeight,c=n.strideWidth,u=n.dilationHeight,d=n.dilationWidth,p=n.filterHeight,h=n.filterWidth,m=Math.floor(n.inChannels/4)*4,g=n.inChannels%4,f=n.dataFormat==="channelsLast",y=f?1:2,b=f?2:3,v=f?3:1,_="",w="";i&&(r?_=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:o?_=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:_=`
          float activation(float x) {
            ${i}
          }
        `,w="result = activation(result);");let T=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${_}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${p}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${n.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${h}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${n.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${m}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${f}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${g===1}) {

              if (${f}) {
                dotProd +=
                    getX(batch, xR, xC, ${m}) *
                    getW(wR, wC, ${m}, d2);
              } else {
                dotProd +=
                    getX(batch, ${m}, xR, xC) *
                    getW(wR, wC, ${m}, d2);
              }

            } else if (${g===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2)
              );

              if (${f}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${g===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${m}, d2),
                getW(wR, wC, ${m} + 1, d2),
                getW(wR, wC, ${m} + 2, d2)
              );

              if (${f}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${m}),
                  getX(batch, xR, xC, ${m} + 1),
                  getX(batch, xR, xC, ${m} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${m}, xR, xC),
                  getX(batch, ${m} + 1, xR, xC),
                  getX(batch, ${m} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${T}
        ${w}
        setOutput(result);
      }
    `}},aD=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let e=n.padInfo.front,i=n.padInfo.top,r=n.padInfo.left,o=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,u=n.dilationWidth,d=n.filterDepth,p=n.filterHeight,h=n.filterWidth,m=Math.floor(n.inChannels/4)*4,g=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${o}, ${s}, ${a});
      const ivec3 pads = ivec3(${e}, ${i}, ${r});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${n.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${m}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${g===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${m}) *
                  getW(wF, wR, wC, ${m}, d2);
              } else if (${g===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${g===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${m}),
                  getX(batch, xF, xR, xC, ${m} + 1),
                  getX(batch, xF, xR, xC, ${m} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${m}, d2),
                  getW(wF, wR, wC, ${m} + 1, d2),
                  getW(wF, wR, wC, ${m} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};var Lb=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=nn(this.outputShape.length);let s=n.padInfo.left,a=n.strideWidth,l=n.dilationWidth,c=n.filterHeight,u=n.filterWidth,d=u,p=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let f=0;f<u;f++)p+=`
           vec4 xTexelC${f*2};
           int xTexelC${f*2}Ready;
           vec4 xTexelC${f*2+1};
           int xTexelC${f*2+1}Ready;
           vec4 xC${f};`;p+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${n.inChannels}; d1 += 2) {
       `;for(let f=0;f<u;f++)p+=`
           xTexelC${f*2} = vec4(0.0);
           xTexelC${f*2}Ready = 0;
           xTexelC${f*2+1} = vec4(0.0);
           xTexelC${f*2+1}Ready = 0;
           xC${f} = vec4(0.0);`;p+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let f=0;f<(d+1)/2;f++){let y=f*2;if(p+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?p+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:p+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):p+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<u)){let b=s%2===0?x.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?p+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:p+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):b===1?p+=`
                     xC${y+1} = xTexelC${y};
                     `:p+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<u&&(s%2===1?(p+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<u&&(p+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(p+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<u&&(p+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<u&&(p+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${n.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<u&&(p+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${n.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}p+=`
     }
   `,p+=`
     }
   `,p+=`
     }
   `;let h="",m="";i&&(r?h=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${i}
         }`:o?h=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${i}
         }`:h=`vec4 activation(vec4 x) {
           ${i}
         }`,m="result = activation(result);");let g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${h}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${p}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${g}
         ${m}
         setOutput(result);
       }
     `}};var lD=class{constructor(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=n,this.enableShapeUniforms=nn(this.outputShape.length);let{dataFormat:i}=e,r=$n(),o=i==="channelsLast",s=o?1:2,a=o?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${n[2]} && pos < ${n[1]}) {`,c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${s}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${o}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${r.output} = result;
      }
    `}};function cD(t,n){let e=t.length;return e>=3?n?[...t.slice(0,-3),t[e-3]*t[e-2],t[e-1]]:[...t.slice(0,-3),t[e-3],t[e-2]*t[e-1]]:!n&&e===1&&t[0]>1?[t[0],1]:null}function uD({x:t,filter:n,convInfo:e,backend:i,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:a=null}){let l=t.shape,c=i.texData.get(t.dataId),u=e.inChannels,d=l[0]*l[1]*l[2],p=e.outChannels,h=e.dataFormat==="channelsLast",m=!1,g=!1,f,y=[];if(o!=null){let _=cD(o.shape,h);_!=null&&(o=me({inputs:{x:o},backend:i,attrs:{shape:_}}),y.push(o))}if(r!=null){let _=cD(r.shape,h);_!=null&&(r=me({inputs:{x:r},backend:i,attrs:{shape:_}}),y.push(r))}if(!((d===1||p===1)&&u>hB)&&c.isPacked&&h&&c.texture!=null&&l[2]%2!==0&&x.arraysEqual(c.shape.slice(-3),l.slice(-3))){let _=l[0]*l[1]*(l[2]+1),w={dataId:t.dataId,shape:[1,_,e.inChannels],dtype:t.dtype},T=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,x.assert(Cm(c.shape,w.shape),()=>`packed reshape ${c.shape} to ${w.shape} isn't free`);let D=me({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}});y.push(D);let N=Em({a:w,b:D,backend:i,transposeA:m,transposeB:g,bias:r,activation:a,preluActivationWeights:o,leakyreluAlpha:s}),O=i.texData.get(N.dataId);x.assert(O.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=T,O.shape=e.outShape,f=qn({inputs:{x:N},backend:i}),f.shape=e.outShape,y.push(N)}else{let _=e.outHeight*e.outWidth,w=me({inputs:{x:t},backend:i,attrs:{shape:h?[e.batchSize,_,e.inChannels]:[e.batchSize,e.inChannels,_]}}),T=me({inputs:{x:n},backend:i,attrs:{shape:[1,e.inChannels,e.outChannels]}}),D=Em({a:h?w:T,b:h?T:w,transposeA:!h,transposeB:g,backend:i,bias:r,activation:a,preluActivationWeights:o,leakyreluAlpha:s});f=me({inputs:{x:D},backend:i,attrs:{shape:e.outShape}}),y.push(w),y.push(T),y.push(D)}for(let _ of y)i.disposeIntermediateTensorInfo(_);return f}function dD({x:t,filter:n,convInfo:e,backend:i,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:a=null}){let{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:p,dataFormat:h}=e,m=h==="channelsLast",g=l*c*u,f=p*d,y=[e.batchSize,g,f],b=!0,v=!1,_=[];if(o!=null){let q=cD(o.shape,m);q!=null&&(o=me({inputs:{x:o},backend:i,attrs:{shape:q}}),_.push(o))}if(r!=null){let q=cD(r.shape,m);q!=null&&(r=me({inputs:{x:r},backend:i,attrs:{shape:q}}),_.push(r))}let w=me({inputs:{x:n},backend:i,attrs:{shape:[1,g,x.sizeFromShape(n.shape)/g]}});_.push(w);let T=new lD(y,e),D=[t.shape,[e.padInfo.top,e.padInfo.left],[e.strideHeight,e.strideWidth],[e.dilationHeight,e.dilationWidth],[e.inChannels],[e.filterWidth*e.inChannels],[e.outWidth]],N=i.runWebGLProgram(T,[t],"float32",D),O=me({inputs:{x:N},backend:i,attrs:{shape:y}});_.push(N),_.push(O);let P=r!=null,B=o!=null,K=a==="leakyrelu",X=a?ou(a,!0):null,Z=new Rb(m?O.shape:w.shape,m?w.shape:O.shape,m?[e.batchSize,f,e.outChannels]:[e.batchSize,e.outChannels,f],b,v,P,X,B,K),te=m?[O,w]:[w,O];if(r&&te.push(r),B&&te.push(o),K){let q=i.makeTensorInfo([],"float32",x.createScalarValue(s,"float32"));te.push(q),_.push(q)}let U=i.runWebGLProgram(Z,te,"float32"),j=me({inputs:{x:U},backend:i,attrs:{shape:e.outShape}});_.push(U);for(let q of _)i.disposeIntermediateTensorInfo(q);return j}function qVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=i,d=C.convertConv2DDataFormat(l),p=C.computeConv2DInfo(r.shape,o.shape,s,c,a,u,!1,d),h;if(p.filterHeight===1&&p.filterWidth===1&&p.dilationHeight===1&&p.dilationWidth===1&&p.strideHeight===1&&p.strideWidth===1&&(p.padInfo.type==="SAME"||p.padInfo.type==="VALID"))h=uD({x:r,filter:o,convInfo:p,backend:e});else if(p.strideWidth<=2&&d==="channelsLast"&&G().getBool("WEBGL_EXP_CONV")){let g=new Lb(p),f=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];h=e.runWebGLProgram(g,[r,o],"float32",f)}else if(G().getBool("WEBGL_CONV_IM2COL"))h=dD({x:r,filter:o,convInfo:p,backend:e});else{let g=new Fb(p);h=e.runWebGLProgram(g,[r,o],"float32")}let m=me({inputs:{x:h},backend:e,attrs:{shape:p.outShape}});return e.disposeIntermediateTensorInfo(h),m}var Nre={kernelName:ed,backendName:"webgl",kernelFunc:qVe};var pD=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,i=n.strideWidth,r=n.padInfo.top,o=n.padInfo.left,s=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${r};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${o};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              ${s?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}},hD=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,i=n.filterWidth,r=n.strideHeight,o=n.strideWidth,s=n.dataFormat==="channelsLast",a=e-1-n.padInfo.top,l=i-1-n.padInfo.left,c=s?1:2,u=s?2:3,d=s?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            for (int d2 = 0; d2 < ${n.outChannels}; d2++) {

              if (${s}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}},mD=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideDepth,i=n.strideHeight,r=n.strideWidth,o=n.padInfo.front,s=n.padInfo.top,a=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yF = 0; yF < ${n.outDepth}; yF++) {
            int xF = wF + yF * ${e} - ${o};

            if (xF < 0 || xF >= ${n.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${n.outHeight}; yR++) {
              int xR = wR + yR * ${i} - ${s};

              if (xR < 0 || xR >= ${n.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${n.outWidth}; yC++) {
                int xC = wC + yC * ${r} - ${a};

                if (xC < 0 || xC >= ${n.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}},fD=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterDepth,i=n.filterHeight,r=n.filterWidth,o=n.strideDepth,s=n.strideHeight,a=n.strideWidth,l=e-1-n.padInfo.front,c=i-1-n.padInfo.top,u=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${e}; wF++) {
          float dyF = float(dyFCorner + wF) / ${o}.0;

          if (dyF < 0.0 || dyF >= ${n.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${e} - 1 - wF;

          for (int wR = 0; wR < ${i}; wR++) {
            float dyR = float(dyRCorner + wR) / ${s}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${i} - 1 - wR;

            for (int wC = 0; wC < ${r}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${r} - 1 - wC;

              for (int d2 = 0; d2 < ${n.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function XVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=i,d=C.convertConv2DDataFormat(l),p=C.computeConv2DInfo(r.shape,u,s,1,a,c,!1,d),h=new pD(p);return e.runWebGLProgram(h,[r,o],"float32")}var Mre={kernelName:jg,backendName:"webgl",kernelFunc:XVe};var gD=class{constructor(n){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=n.inShape,this.enableShapeUniforms=nn(this.outputShape.length);let e=n.filterHeight,i=n.filterWidth,r=e-1-n.padInfo.top,o=i-1-n.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${r}, ${o});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            int wCPerm = ${i} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${n.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${n.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${n.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}};function KVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{inputShape:s,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=i,d=C.convertConv2DDataFormat(c),p=C.computeConv2DInfo(s,o.shape,a,1,l,u,!1,d);if(G().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){let h=[[p.strideHeight,p.strideWidth]],m=new gD(p);return e.runWebGLProgram(m,[r,o],"float32",h)}else{let h=new hD(p);return e.runWebGLProgram(h,[r,o],"float32")}}var Rre={kernelName:td,backendName:"webgl",kernelFunc:KVe};function YVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l}=i,c=C.computeConv3DInfo(r.shape,o.shape,s,l,a),u=new aD(c);return e.runWebGLProgram(u,[r,o],"float32")}var Ore={kernelName:nd,backendName:"webgl",kernelFunc:YVe};function QVe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,pad:a,filterShape:l}=i,c=C.computeConv3DInfo(r.shape,l,s,1,a),u=new mD(c);return e.runWebGLProgram(u,[r,o],"float32")}var Fre={kernelName:qg,backendName:"webgl",kernelFunc:QVe};function ZVe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{pad:s,strides:a,inputShape:l}=i,c=C.computeConv3DInfo(l,o.shape,a,1,s),u=new fD(c);return e.runWebGLProgram(u,[r,o],"float32")}var Lre={kernelName:Xg,backendName:"webgl",kernelFunc:ZVe};var JVe=As+`
  return cos(x);
`,eBe=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Do}
  return result;
`,tBe=ze({opSnippet:JVe,packedOpSnippet:eBe}),Pre={kernelName:ec,backendName:"webgl",kernelFunc:tBe};var nBe=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,iBe=ze({opSnippet:nBe}),$re={kernelName:tc,backendName:"webgl",kernelFunc:iBe};var yD=class{constructor(n,e,i,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[s,a,l,c]=n,[u]=e,[d,p]=i;this.outputShape=[u,d,p,c];let h=r==="bilinear"?1:0,[m,g]=[`${a-1}.0`,`${l-1}.0`],[f,y,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${m} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${m}`],[v,_,w]=p>1?[`${(l-1)/(p-1)}`,"(x2-x1) * width_ratio",`x1*${g} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${g}`];this.userCode=`
      const float height_ratio = float(${f});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${s}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${_};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${m} ) {
          setOutput(float(${o}));
          return;
        }
        float in_x = ${w};
        if( in_x < 0.0 || in_x > ${g} ) {
          setOutput(float(${o}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${h} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}};var rBe=t=>{let{inputs:n,backend:e,attrs:i}=t,{image:r,boxes:o,boxInd:s}=n,{cropSize:a,method:l,extrapolationValue:c}=i,u=new yD(r.shape,o.shape,a,l,c);return e.runWebGLProgram(u,[r,o,s],"float32")},Vre={kernelName:Yg,backendName:"webgl",kernelFunc:rBe};var Pb=function(t){return t.Prod="*",t.Sum="+",t}(Pb||{}),F_=class{constructor(n,e,i,r){this.op=n,this.outputShape=e,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let o=this.outputShape.length,s=this.op===Pb.Prod?"1.0":"0.0",a=i?s:`getX(${Bre(o,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1],c="",u="";i?(c=r?`end != ${l-1}`:"end != 0",u=r?"end + 1":"end - 1"):(c=r?`end + pow2 < ${l}`:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${dt(o)} coords = getOutputCoords();
        int end = ${zre(o,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${zre(o,"coords",this.op)} = idx;
          val ${this.op}= getX(${Bre(o,"coords",this.op)});
        }
        setOutput(val);
      }
    `}};function Bre(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.x, ${n}.y`;if(t===3)return`${n}.x, ${n}.y, ${n}.z`;if(t===4)return`${n}.x, ${n}.y, ${n}.z, ${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function zre(t,n,e){if(t===1)return`${n}`;if(t===2)return`${n}.y`;if(t===3)return`${n}.z`;if(t===4)return`${n}.w`;throw new Error(`Cumulative ${e} for rank ${t} is not yet supported`)}function bD(t,n,e,i,r,o){let s=n.shape.length,a=C.getAxesPermutation([i],s),l=n;a!=null&&(l=Dn({inputs:{x:n},backend:e,attrs:{perm:a}}));let c=C.getInnerMostAxes(1,s)[0];if(c!==s-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${n.shape.length-1} but got axis=${i}`);let u=l.shape[c],d=qn({inputs:{x:l},backend:e});for(let p=0;p<=Math.ceil(Math.log2(u))-1;p++){let h=new F_(t,l.shape,!1,o),m=[[p]],g=d;d=e.runWebGLProgram(h,[d],d.dtype,m),e.disposeIntermediateTensorInfo(g)}if(r){let p=new F_(t,l.shape,r,o),h=d;d=e.runWebGLProgram(p,[d],d.dtype),e.disposeIntermediateTensorInfo(h)}if(a!=null){let p=C.getUndoAxesPermutation(a),h=Dn({inputs:{x:d},backend:e,attrs:{perm:p}});return e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(l),h}return d}function oBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;return bD(Pb.Prod,r,e,o,s,a)}var Gre={kernelName:Kg,backendName:"webgl",kernelFunc:oBe};function sBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,exclusive:s,reverse:a}=i;return bD(Pb.Sum,r,e,o,s,a)}var Ure={kernelName:id,backendName:"webgl",kernelFunc:sBe};function aBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,weights:o}=n,{size:s,binaryOutput:a}=i;if(r.shape.length===1){let l=e.readSync(r.dataId),c=e.readSync(o.dataId),u=RE(l,c,o.dtype,o.shape,s);return e.makeTensorInfo([s],o.dtype,u)}else if(r.shape.length===2){let l=e.bufferSync(r),c=e.bufferSync(o),u=Ine(l,c,s,a);return e.makeTensorInfo(u.shape,o.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}var Hre={kernelName:Qg,backendName:"webgl",kernelFunc:aBe};var xD=class{constructor(n,e,i){this.variableNames=["x"],this.outputShape=[],this.outputShape=n,this.blockSize=e,this.dataFormat=i,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${e};
      int offset_h = imod(h, ${e});
      int in_w = w / ${e};
      int offset_w = imod(w, ${e});
      int offset_d = (offset_h * ${e} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}};function lBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockSize:o,dataFormat:s}=i,a=r.shape[0],l=s==="NHWC"?r.shape[1]:r.shape[2],c=s==="NHWC"?r.shape[2]:r.shape[3],u=s==="NHWC"?r.shape[3]:r.shape[1],d=l*o,p=c*o,h=u/(o*o),m=s==="NHWC"?[a,d,p,h]:[a,h,d,p],g=new xD(m,o,s);return e.runWebGLProgram(g,[r],r.dtype)}var Wre={kernelName:Zg,backendName:"webgl",kernelFunc:lBe};var $b=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=nn(this.outputShape.length);let s=n.filterHeight,a=n.filterWidth,l=n.outChannels/n.inChannels,c="",u="";i&&(r?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:o?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:c=`
          float activation(float x) {
            ${i}
          }
        `,u="result = activation(result);");let d=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${s}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}};var Vb=class{constructor(n,e=!1,i=null,r=!1,o=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=n.outShape,this.enableShapeUniforms=nn(this.outputShape.length);let s=n.outChannels/n.inChannels,a=n.padInfo.left,l=n.strideWidth,c=n.dilationWidth,u=n.filterHeight,d=n.filterWidth,p=d,h=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)h+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;h+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let y=0;y<d;y++)h+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;h+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(p+1)/2;y++){let b=y*2;if(h+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?h+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:h+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):h+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){let v=a%2===0?x.nearestLargerEven(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(h+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?h+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:h+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):v===1?h+=`
                    xC${b+1} = xTexelC${b};
                    `:h+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(h+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(h+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(h+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(h+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(h+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(h+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}h+=`
    }
  `,h+=`
      }
    `;let m="",g="";i&&(r?m=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${i}
        }`:o?m=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${i}
        }`:m=`vec4 activation(vec4 x) {
          ${i}
        }`,g="result = activation(result);");let f=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),o&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${m}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${s};
        int q = d2 - d1 * ${s};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${h}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${f}
        ${g}
        setOutput(result);
      }
    `}};function cBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l,dimRoundingMode:c}=i,u=l;u==null&&(u=[1,1]),x.assert(C.eitherStridesOrDilationsAreOne(s,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${u}'`);let d=C.computeConv2DInfo(r.shape,o.shape,s,u,a,c,!0),p;G().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?p=new Vb(d):p=new $b(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return e.runWebGLProgram(p,[r,o],"float32",h)}var jre={kernelName:rd,backendName:"webgl",kernelFunc:cBe};var vD=class{constructor(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;let e=n.strideHeight,i=n.strideWidth,r=n.padInfo.top,o=n.padInfo.left,s=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${s} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${n.batchSize}; b++) {
          for (int yR = 0; yR < ${n.outHeight}; yR++) {
            int xR = wR + yR * ${e} - ${r};

            if (xR < 0 || xR >= ${n.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${n.outWidth}; yC++) {
              int xC = wC + yC * ${i} - ${o};

              if (xC < 0 || xC >= ${n.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}},_D=class{constructor(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;let e=n.filterHeight,i=n.filterWidth,r=n.strideHeight,o=n.strideWidth,s=e-1-n.padInfo.top,a=i-1-n.padInfo.left,l=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${e}; wR++) {
          float dyR = float(dyRCorner + wR) / ${r}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${e} - 1 - wR;

          for (int wC = 0; wC < ${i}; wC++) {
            float dyC = float(dyCCorner + wC) / ${o}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${i} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function uBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,dy:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=i,d=C.computeConv2DInfo(r.shape,u,s,a,l,c,!0),p=new vD(d);return e.runWebGLProgram(p,[r,o],"float32")}var qre={kernelName:Jg,backendName:"webgl",kernelFunc:uBe};function dBe(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,filter:o}=n,{strides:s,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=i,d=C.computeConv2DInfo(u,o.shape,s,a,l,c,!0),p=new _D(d);return e.runWebGLProgram(p,[r,o],"float32")}var Xre={kernelName:ey,backendName:"webgl",kernelFunc:dBe};var wD=class{constructor(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}};function pBe(t){let{inputs:n,backend:e}=t,{x:i}=n,r=[...i.shape,...i.shape],o=x.sizeFromShape(i.shape),s=me({inputs:{x:i},backend:e,attrs:{shape:[o]}}),a=new wD(o),l=e.runWebGLProgram(a,[s],s.dtype),c=me({inputs:{x:l},backend:e,attrs:{shape:r}});return e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(l),c}var Kre={kernelName:U1,backendName:"webgl",kernelFunc:pBe};var CD=class{constructor(n){this.variableNames=["x","W"],this.outputShape=n.outShape;let{inHeight:e,inWidth:i,padInfo:r,strideHeight:o,strideWidth:s,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=n,{top:d,left:p}=r;this.userCode=`
      const ivec2 strides = ivec2(${o}, ${s});
      const ivec2 pads = ivec2(${d}, ${p});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${e}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${i}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}};function hBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o}=n,{strides:s,pad:a,dilations:l}=i,c=C.computeDilation2DInfo(r.shape,o.shape,s,a,"NHWC",l),u,d=new CD(c);u=e.runWebGLProgram(d,[r,o],"float32");let p=me({inputs:{x:u},backend:e,attrs:{shape:c.outShape}});return e.disposeIntermediateTensorInfo(u),p}var Yre={kernelName:od,backendName:"webgl",kernelFunc:hBe};function mBe(t){let{inputs:n,backend:e,attrs:i}=t,{equation:r}=i,o=n,{allDims:s,summedDims:a,idDims:l}=C.decodeEinsumEquation(r,o.length);C.checkEinsumDimSizes(s.length,l,o);let{path:c,steps:u}=C.getEinsumComputePath(a,l),d=u.length,p=null,h=s.length,m=[];for(let g=0;g<d;++g){for(let f of u[g]){let{permutationIndices:y,expandDims:b}=C.getEinsumPermutation(h,l[f]),v;C.isIdentityPermutation(y)?v=o[f]:(v=Dn({inputs:{x:o[f]},backend:e,attrs:{perm:y}}),m.push(v));let _=v.shape.slice();for(let w=0;w<b.length;++w)_.splice(b[w],0,1);x.arraysEqual(v.shape,_)||(v=me({inputs:{x:v},backend:e,attrs:{shape:_}}),m.push(v)),p===null?p=v:(p=R_({inputs:{a:v,b:p},backend:e}),m.push(p))}g<d-1&&(c[g]>=0&&(p=Im({inputs:{x:p},backend:e,attrs:{axis:c[g]-(s.length-h),keepDims:!1}}),m.push(p)),h--)}for(let g of m)g!==p&&e.disposeIntermediateTensorInfo(g);return p}var Qre={kernelName:ty,backendName:"webgl",kernelFunc:mBe};var fBe="return (x >= 0.0) ? x : (exp(x) - 1.0);",gBe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,yBe=ze({opSnippet:fBe,packedOpSnippet:gBe}),Zre={kernelName:ic,backendName:"webgl",kernelFunc:yBe};var bBe="return (b >= 0.0) ? a : a * (b + 1.0);",xBe=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,vBe=t=>{let{inputs:n,backend:e}=t,{dy:i,y:r}=n,o=G().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Eo(xBe,i.shape,r.shape):new no(bBe,i.shape,r.shape);return e.runWebGLProgram(o,[i,r],i.dtype)},Jre={kernelName:ny,backendName:"webgl",kernelFunc:vBe};var _Be=`
  return vec4(equal(a, b));
`,wBe="return float(a == b);",CBe=Qt({opSnippet:wBe,packedOpSnippet:_Be,dtype:"bool",cpuKernelImpl:Mne}),eoe={kernelName:Ih,backendName:"webgl",kernelFunc:CBe};var TBe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${C.ERF_P};
  float a1 = ${C.ERF_A1};
  float a2 = ${C.ERF_A2};
  float a3 = ${C.ERF_A3};
  float a4 = ${C.ERF_A4};
  float a5 = ${C.ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,SBe=ze({opSnippet:TBe}),toe={kernelName:rc,backendName:"webgl",kernelFunc:SBe};var kBe=As+`
  return exp(x);
`,IBe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bB=ze({opSnippet:kBe,packedOpSnippet:IBe,cpuKernelImpl:Rne,dtype:"float32"}),noe={kernelName:oc,backendName:"webgl",kernelFunc:bB};function TD(t){let{inputs:n,attrs:e,backend:i}=t,{dim:r}=e,{input:o}=n,s=o.shape.length,a=o.shape.slice(),l=r;return r<0&&(x.assert(-(s+1)<=r,()=>`Axis must be in the interval [${-(s+1)}, ${s}]`),l=s+r+1),a.splice(l,0,1),me({inputs:{x:o},backend:i,attrs:{shape:a}})}var ioe={kernelName:sd,backendName:"webgl",kernelFunc:TD};var roe="return exp(x) - 1.0;",EBe=ze({opSnippet:roe,packedOpSnippet:roe,cpuKernelImpl:One}),ooe={kernelName:sc,backendName:"webgl",kernelFunc:EBe};var L_=class{constructor(n,e,i){this.variableNames=["real","imag"];let r=e[1];this.outputShape=e;let o=i?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,s=i?`${r}.0`:"1.0",a;if(n==="real")a="return real * expR - imag * expI;";else if(n==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${n}.`);this.userCode=`
      const float exponentMultiplier = ${o};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${r});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${r}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${s};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}};function SD(t,n,e){let i=e.texData.get(t.dataId),r=x.sizeFromShape(t.shape),o=t.shape[t.shape.length-1],s=r/o,a=me({inputs:{x:t},backend:e,attrs:{shape:[s,o]}}),l=a.shape,c=new L_("real",l,n),u=new L_("imag",l,n),d=[{dataId:i.complexTensorInfos.real.dataId,dtype:i.complexTensorInfos.real.dtype,shape:l},{dataId:i.complexTensorInfos.imag.dataId,dtype:i.complexTensorInfos.imag.dtype,shape:l}],p=e.runWebGLProgram(c,d,"float32"),h=e.runWebGLProgram(u,d,"float32"),m=io({inputs:{real:p,imag:h},backend:e});e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h);let g=me({inputs:{x:m},backend:e,attrs:{shape:t.shape}});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(m),g}function DBe(t){let{inputs:n,backend:e}=t,{input:i}=n;return SD(i,!1,e)}var soe={kernelName:iy,backendName:"webgl",kernelFunc:DBe};var kD=class{constructor(n,e){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=n,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}};function au(t){let{backend:n,attrs:e}=t,{shape:i,value:r}=e,{dtype:o}=e;if(o=o||x.inferDtype(r),o==="string"){let s=x.getArrayFromDType(o,x.sizeFromShape(i));return s.fill(r),n.makeTensorInfo(i,o,s)}else{let s=new kD(i,r),a=[[r]];return n.runWebGLProgram(s,[],o,a)}}var aoe={kernelName:ry,backendName:"webgl",kernelFunc:au};var ID=class{constructor(n){this.variableNames=["Image"],this.outputShape=[];let e=n[2];this.outputShape=n,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${e} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${e}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var loe={kernelName:oy,backendName:"webgl",kernelFunc:({inputs:t,backend:n})=>{let{image:e}=t,i=n,r=new ID(e.shape);return i.runWebGLProgram(r,[e],e.dtype)}};var coe="return floor(x);",ABe=ze({opSnippet:coe,packedOpSnippet:coe,cpuKernelImpl:Fne}),uoe={kernelName:ac,backendName:"webgl",kernelFunc:ABe};var NBe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,MBe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,RBe=Qt({opSnippet:NBe,packedOpSnippet:MBe,dtype:"int32"}),doe={kernelName:lc,backendName:"webgl",kernelFunc:RBe};var ED=class{constructor(n){this.variableNames=["A"];let e=$n(),[i,r]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${i}.0);

        vec4 values = ${e.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}};var DD=class{constructor(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let e=$n(),[i,r]=n;this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${r}.0, ${i}.0);
            vec4 values = ${e.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${e.output} = result;
      }
    `}};var poe={kernelName:cX,backendName:"webgl",kernelFunc:OBe},Bb,xB=G().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function OBe(t){let{inputs:n,backend:e,attrs:i}=t,{pixels:r}=n,{numChannels:o}=i,s=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement,[l,c]=s?[r.videoWidth,r.videoHeight]:[r.width,r.height],u=[c,l],d=[c,l,o];if(a||s){let g=G().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Bb==null||g!==xB)&&(xB=g,Bb=document.createElement("canvas").getContext("2d",{willReadFrequently:xB})),Bb.canvas.width=l,Bb.canvas.height=c,Bb.drawImage(r,0,0,l,c),r=Bb.canvas}let p=e.makeTensorInfo(u,"int32");e.texData.get(p.dataId).usage=hr.PIXELS,e.gpgpu.uploadPixelDataToTexture(e.getTexture(p.dataId),r);let h=G().getBool("WEBGL_PACK")?new DD(d):new ED(d),m=e.runWebGLProgram(h,[p],"int32");return e.disposeData(p.dataId),m}function FBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:p,activation:h,leakyreluAlpha:m}=i,g=C.convertConv2DDataFormat(u),f=C.computeConv2DInfo(r.shape,o.shape,l,d,c,p,!1,g),y,b=[],v=s!=null,_=a!=null,w=h==="leakyrelu",T=()=>{let N=[r,o],O=(P,B)=>{if(B==="NCHW"&&P.shape.length===1&&P.shape[0]!==1){let K=me({inputs:{x:P},backend:e,attrs:{shape:[P.shape[0],1,1]}});return b.push(K),K}return P};if(v&&N.push(O(s,u)),_&&N.push(O(a,u)),w){let P=e.makeTensorInfo([],"float32",x.createScalarValue(m,"float32"));N.push(P),b.push(P)}return N};if(f.filterHeight===1&&f.filterWidth===1&&f.dilationHeight===1&&f.dilationWidth===1&&f.strideHeight===1&&f.strideWidth===1&&(f.padInfo.type==="SAME"||f.padInfo.type==="VALID"))y=uD({x:r,filter:o,convInfo:f,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:m});else if(f.strideWidth<=2&&g==="channelsLast"&&G().getBool("WEBGL_EXP_CONV")){let N=h?ou(h,!0):null,O=new Lb(f,v,N,_,w),P=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]],B=T();y=e.runWebGLProgram(O,B,"float32",P)}else if(G().getBool("WEBGL_CONV_IM2COL"))y=dD({x:r,filter:o,convInfo:f,backend:e,bias:s,activation:h,preluActivationWeights:a,leakyreluAlpha:m});else{let N=h?ou(h,!1):null,O=new Fb(f,v,N,_,w),P=T();y=e.runWebGLProgram(O,P,"float32")}let D=me({inputs:{x:y},backend:e,attrs:{shape:f.outShape}});return b.push(y),b.forEach(N=>e.disposeIntermediateTensorInfo(N)),D}var hoe={kernelName:Lh,backendName:"webgl",kernelFunc:FBe};function LBe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,filter:o,bias:s,preluActivationWeights:a}=n,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:p,leakyreluAlpha:h}=i,m=[],g=u;g==null&&(g=[1,1]),x.assert(C.eitherStridesOrDilationsAreOne(l,g),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${g}'`);let f=C.computeConv2DInfo(r.shape,o.shape,l,g,c,d,!0),y=G().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1,b=p?ou(p,y):null,v=[r,o],_=s!=null,w=a!=null,T=p==="leakyrelu";if(_&&v.push(s),w&&v.push(a),T){let P=e.makeTensorInfo([],"float32",x.createScalarValue(h,"float32"));v.push(P),m.push(P)}let D;y?D=new Vb(f,_,b,w,T):D=new $b(f,_,b,w,T);let N=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]],O=e.runWebGLProgram(D,v,"float32",N);return m.forEach(P=>e.disposeIntermediateTensorInfo(P)),O}var moe={kernelName:Ph,backendName:"webgl",kernelFunc:LBe};var AD=class{constructor(n,e,i,r){this.sliceDim=n,this.strides=e,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=i;let o=dt(i.length),s=`
    int index;`;for(let a=0;a<this.sliceDim;a++)s+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${o} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${s}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}};function PBe(t){let{inputs:n,backend:e}=t,{params:i,indices:r}=n,o=r.shape,s=o[o.length-1],a=x.sizeFromShape(i.shape),[l,c,u,d]=C.prepareAndValidate(i,r),p=me({inputs:{x:r},backend:e,attrs:{shape:[c,s]}}),h=me({inputs:{x:i},backend:e,attrs:{shape:[x.sizeFromShape(i.shape)/u,u]}});if(e.shouldExecuteOnCPU([i,r])||i.dtype==="string"){let y=e.readSync(r.dataId),b=e.bufferSync(i),v=Lne(y,b,i.dtype,c,s,u,d,i.shape,a);return e.makeTensorInfo(l,i.dtype,v.values)}let m=new AD(s,d,[c,u],i.shape),g=e.runWebGLProgram(m,[h,p],h.dtype),f=me({inputs:{x:g},backend:e,attrs:{shape:l}});return e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(g),f}var foe={kernelName:H1,backendName:"webgl",kernelFunc:PBe};var ND=class{constructor(n,e){this.variableNames=["A","indices"],this.outputShape=e,this.rank=e.length;let i=dt(this.rank),r=$Be(n,2);this.userCode=`
      void main() {
        ${i} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${n[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${r}));
      }
    `}};function $Be(t,n){let e=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[];for(let r=0;r<t.length;r++)r===2?i.push("index"):i.push(`${e[r]}`);return i.join()}function vB(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,indices:o}=n,{axis:s,batchDims:a}=i,l=x.parseAxisParam(s,r.shape)[0];if(G().get("DEBUG")){let b=e.readSync(o.dataId),v=r.shape[l];for(let _=0;_<b.length;++_){let w=b[_];x.assert(w<=v-1&&w>=0,()=>`GatherV2: the index value ${w} is not in [0, ${v-1}]`)}}let c=C.segment_util.collectGatherOpShapeInfo(r,o,l,a),u=x.sizeFromShape(o.shape),d=[],p=me({inputs:{x:r},backend:e,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),h=me({inputs:{x:o},backend:e,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(p),d.push(h);let m=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(e.shouldExecuteOnCPU([r,o])||r.dtype==="string"){let b=e.bufferSync(h),v=e.bufferSync(p),_=Pne(v,b,m);return d.forEach(w=>e.disposeIntermediateTensorInfo(w)),e.makeTensorInfo(c.outputShape,_.dtype,_.values)}let g=new ND(p.shape,m),f=e.runWebGLProgram(g,[p,h],p.dtype);d.push(f);let y=me({inputs:{x:f},backend:e,attrs:{shape:c.outputShape}});return d.forEach(b=>e.disposeIntermediateTensorInfo(b)),y}var goe={kernelName:ld,backendName:"webgl",kernelFunc:vB};var VBe="return float(a > b);",BBe=`
  return vec4(greaterThan(a, b));
`,zBe=Qt({opSnippet:VBe,packedOpSnippet:BBe,cpuKernelImpl:$ne,dtype:"bool"}),yoe={kernelName:Eh,backendName:"webgl",kernelFunc:zBe};var GBe="return float(a >= b);",UBe=`
  return vec4(greaterThanEqual(a, b));
`,HBe=Qt({opSnippet:GBe,packedOpSnippet:UBe,dtype:"bool",cpuKernelImpl:Vne}),boe={kernelName:cc,backendName:"webgl",kernelFunc:HBe};function WBe(t){let{inputs:n,backend:e}=t,{input:i}=n;return SD(i,!0,e)}var xoe={kernelName:sy,backendName:"webgl",kernelFunc:WBe};var jBe="return float(!isnan(x) && !isinf(x));",qBe=ze({opSnippet:jBe,dtype:"bool"}),voe={kernelName:uc,backendName:"webgl",kernelFunc:qBe};var XBe="return float(isinf(x));",KBe=ze({opSnippet:XBe,dtype:"bool"}),_oe={kernelName:dc,backendName:"webgl",kernelFunc:KBe};var YBe="return float(isnan(x));",QBe=ze({opSnippet:YBe,dtype:"bool"}),woe={kernelName:pc,backendName:"webgl",kernelFunc:QBe};var ZBe="return float(a < b);",JBe=`
  return vec4(lessThan(a, b));
`,e3e=Qt({opSnippet:ZBe,packedOpSnippet:JBe,cpuKernelImpl:Bne,dtype:"bool"}),Coe={kernelName:Dh,backendName:"webgl",kernelFunc:e3e};var t3e="return float(a <= b);",n3e=`
  return vec4(lessThanEqual(a, b));
`,i3e=Qt({opSnippet:t3e,packedOpSnippet:n3e,cpuKernelImpl:zne,dtype:"bool"}),Toe={kernelName:Ah,backendName:"webgl",kernelFunc:i3e};function r3e(t){let{backend:n,attrs:e}=t,{start:i,stop:r,num:o}=e,s=Gne(i,r,o);return n.makeTensorInfo([s.length],"float32",s)}var Soe={kernelName:W1,backendName:"webgl",kernelFunc:r3e};var o3e=As+`
  return x < 0.0 ? 0./0. : log(x);
`,s3e=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,a3e=ze({opSnippet:o3e,packedOpSnippet:s3e,cpuKernelImpl:Une}),koe={kernelName:hc,backendName:"webgl",kernelFunc:a3e};var l3e=As+`
  return log(1.0 + x);
`,c3e=ze({opSnippet:l3e}),Ioe={kernelName:mc,backendName:"webgl",kernelFunc:c3e};var u3e="return float(a >= 1.0 && b >= 1.0);",d3e=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,p3e=Qt({opSnippet:u3e,packedOpSnippet:d3e,dtype:"bool"}),Eoe={kernelName:Nh,backendName:"webgl",kernelFunc:p3e};var h3e="return float(!(x >= 1.0));",m3e=ze({opSnippet:h3e}),Doe={kernelName:Mh,backendName:"webgl",kernelFunc:m3e};var f3e="return float(a >= 1.0 || b >= 1.0);",g3e=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,y3e=Qt({opSnippet:f3e,packedOpSnippet:g3e,dtype:"bool"}),Aoe={kernelName:Rh,backendName:"webgl",kernelFunc:y3e};var MD=class{constructor(n,e,i,r,o){this.variableNames=["x"],this.outputShape=[];let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${i}) + float(${r}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${s}; j <= ${s}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}};var RD=class{constructor(n,e,i,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let s=e,a=n[3]-1;this.outputShape=n;let l,c=`float(${i}) + float(${r}) * sum`;o===.5?l=`inversesqrt(${c})`:o===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${o}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${s};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${s}; j <= ${s}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}};var b3e=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{depthRadius:o,bias:s,alpha:a,beta:l}=i,c=G().getBool("WEBGL_PACK_NORMALIZATION")?new RD(r.shape,o,s,a,l):new MD(r.shape,o,s,a,l);return e.runWebGLProgram(c,[r],r.dtype)},Noe={kernelName:ud,backendName:"webgl",kernelFunc:b3e};var OD=class{constructor(n,e,i,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=i,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${e})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${e} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${r}) * norm + float(${i});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${r})
                * float(${o})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${o});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}};var x3e=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r,y:o,dy:s}=n,{depthRadius:a,bias:l,alpha:c,beta:u}=i,d=new OD(r.shape,a,l,c,u);return e.runWebGLProgram(d,[r,o,s],r.dtype)},Moe={kernelName:ly,backendName:"webgl",kernelFunc:x3e};function Roe(t,n,e,i){let r=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/r,a=me({inputs:{x:t},attrs:{shape:[s,r]},backend:i}),l=Ao(a,t.dtype,"max",i),c=me({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}function _B(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reductionIndices:o,keepDims:s}=i,a=r.shape.length,l=x.parseAxisParam(o,r.shape),c=l,u=C.getAxesPermutation(c,a),d=u!=null,p=e.shouldExecuteOnCPU([r]),h=r;if(d){if(p){let v=e.texData.get(h.dataId).values,_=new Array(a);for(let D=0;D<_.length;D++)_[D]=r.shape[u[D]];let w=km(v,r.shape,r.dtype,u,_);h=e.makeTensorInfo(_,r.dtype);let T=e.texData.get(h.dataId);T.values=w}else h=ip(r,u,e);c=C.getInnerMostAxes(c.length,a)}C.assertAxesAreInnerMostDims("max",c,a);let[m,g]=C.computeOutAndReduceShapes(h.shape,c),f=m;s&&(f=C.expandShapeToKeepDim(m,l));let y;if(p){let v=e.texData.get(h.dataId).values,_=Hne(v,x.sizeFromShape(g),f,r.dtype);y=e.makeTensorInfo(f,r.dtype);let w=e.texData.get(y.dataId);w.values=_}else y=Roe(h,g,f,e);return d&&e.disposeIntermediateTensorInfo(h),y}var Ooe={kernelName:dd,backendName:"webgl",kernelFunc:_B};var v3e=Mb+`
  return max(a, b);
`,_3e=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Do+`
  return result;
`,w3e=Qt({opSnippet:v3e,packedOpSnippet:_3e,cpuKernelImpl:Wne}),Foe={kernelName:fc,backendName:"webgl",kernelFunc:w3e};function C3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;rl(r,"maxPool");let{filterSize:o,strides:s,pad:a,dimRoundingMode:l}=i,c=1;x.assert(C.eitherStridesOrDilationsAreOne(s,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`);let u=C.computePool2DInfo(r.shape,o,s,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&x.arraysEqual(u.inShape,u.outShape))return qn({inputs:{x:r},backend:e});let d=new ca(u,"max",!1);return e.runWebGLProgram(d,[r],r.dtype)}var Loe={kernelName:pd,backendName:"webgl",kernelFunc:C3e};function T3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{filterSize:o,strides:s,pad:a,dataFormat:l,dimRoundingMode:c}=i,u=[1,1,1],d=C.computePool3DInfo(r.shape,o,s,u,a,c,l),p=new rp(d,"max",!1);return e.runWebGLProgram(p,[r],r.dtype)}var Poe={kernelName:hd,backendName:"webgl",kernelFunc:T3e};var FD=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideHeight,i=n.strideWidth,r=n.dilationHeight,o=n.effectiveFilterHeight,s=n.effectiveFilterWidth,a=o-1-n.padInfo.top,l=s-1-n.padInfo.left,c=o*s-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${o};
          wR += ${r}) {
          float dyR = float(dyRCorner + wR) / ${e}.0;

          if (dyR < 0.0 || dyR >= ${n.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${s}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${s} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}},LD=class{constructor(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;let e=n.strideDepth,i=n.strideHeight,r=n.strideWidth,o=n.dilationDepth,s=n.dilationHeight,a=n.dilationWidth,l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,u=n.effectiveFilterWidth,d=l-1-n.padInfo.front,p=c-1-n.padInfo.top,h=u-1-n.padInfo.left,m=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${p}, ${h});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${o}) {
          float dyD = float(dyDCorner + wD) / ${e}.0;

          if (dyD < 0.0 || dyD >= ${n.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${s}) {
            float dyR = float(dyRCorner + wR) / ${i}.0;

            if (dyR < 0.0 || dyR >= ${n.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${r}.0;

              if (dyC < 0.0 || dyC >= ${n.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${m} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}};function S3e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o}=n,s=o,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=i,d=[1,1,1],p=C.computePool3DInfo(s.shape,a,l,d,c,u),h=new rp(p,"max",!0),m=e.runWebGLProgram(h,[s],s.dtype),g=new LD(p),f=e.runWebGLProgram(g,[r,m],s.dtype);return e.disposeIntermediateTensorInfo(m),f}var $oe={kernelName:uy,backendName:"webgl",kernelFunc:S3e};function k3e(t){let{inputs:n,backend:e,attrs:i}=t,{dy:r,input:o,output:s}=n,a=o;rl([o,s],"maxPoolGrad");let{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=i,p=C.computePool2DInfo(a.shape,l,c,1,u,d),h=!0,m=new ca(p,"max",h),g=e.runWebGLProgram(m,[a],a.dtype),f=new FD(p),y=e.runWebGLProgram(f,[r,g],a.dtype);return e.disposeIntermediateTensorInfo(g),y}var Voe={kernelName:cy,backendName:"webgl",kernelFunc:k3e};function Boe(t,n,e,i){let r=new ca(e,"max",!1),o=i.runWebGLProgram(r,[t],"float32");r=new ca(e,"max",!0,!0,n);let s=i.runWebGLProgram(r,[t],"float32");return[o,s]}var zoe={kernelName:j1,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:i}=t,{filterSize:r,strides:o,pad:s,includeBatchInIndex:a}=n,l=e;x.assert(i.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);let c=[1,1];x.assert(C.eitherStridesOrDilationsAreOne(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);let u=C.computePool2DInfo(i.shape,r,o,c,s),[d,p]=Boe(i,a,u,l);return[d,p]}};function Goe(t,n,e,i){let r=x.sizeFromShape(n),s=x.sizeFromShape(t.shape)/r,a=me({inputs:{x:t},attrs:{shape:[s,r]},backend:i}),l=Ao(a,"float32","mean",i),c=me({inputs:{x:l},attrs:{shape:e},backend:i});return i.disposeIntermediateTensorInfo(a),i.disposeIntermediateTensorInfo(l),c}var Uoe={kernelName:md,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{x:i}=t,{keepDims:r,axis:o}=n,s=e,a=i.shape.length,l=x.parseAxisParam(o,i.shape),c=l,u=C.getAxesPermutation(c,a),d=u!=null,p=s.shouldExecuteOnCPU([i]),h=[],m=i;if(d){if(p){let _=s.texData.get(m.dataId).values,w=new Array(a);for(let N=0;N<w.length;N++)w[N]=i.shape[u[N]];let T=km(_,i.shape,i.dtype,u,w);m=s.makeTensorInfo(w,i.dtype);let D=s.texData.get(m.dataId);D.values=T}else m=ip(i,u,s);h.push(m),c=C.getInnerMostAxes(c.length,a)}C.assertAxesAreInnerMostDims("sum",c,a);let[g,f]=C.computeOutAndReduceShapes(m.shape,c),y=g;r&&(y=C.expandShapeToKeepDim(g,l));let b=Goe(m,f,y,s);for(let v of h)s.disposeIntermediateTensorInfo(v);return b}};function I3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=x.parseAxisParam(o,r.shape),c=l,u=C.getAxesPermutation(c,a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),c=C.getInnerMostAxes(c.length,r.shape.length)),C.assertAxesAreInnerMostDims("min",c,a);let[p,h]=C.computeOutAndReduceShapes(d.shape,c),m=x.sizeFromShape(h),g=me({inputs:{x:d},backend:e,attrs:{shape:[-1,m]}}),f=Ao(g,g.dtype,"min",e),y;if(s){let b=C.expandShapeToKeepDim(p,l);y=me({inputs:{x:f},backend:e,attrs:{shape:b}})}else y=me({inputs:{x:f},backend:e,attrs:{shape:p}});return e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(f),u!=null&&e.disposeIntermediateTensorInfo(d),y}var Hoe={kernelName:fd,backendName:"webgl",kernelFunc:I3e};var E3e=Mb+`
  return min(a, b);
`,D3e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Do+`
  return result;
`,A3e=Qt({opSnippet:E3e,packedOpSnippet:D3e,cpuKernelImpl:jne}),Woe={kernelName:gc,backendName:"webgl",kernelFunc:A3e};var PD=class{constructor(n,e,i){this.variableNames=["x"],this.outputShape=e.map((u,d)=>u[0]+n[d]+u[1]);let r=n.length,o=dt(r),s=e.map(u=>u[0]).join(","),a=e.map((u,d)=>u[0]+n[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),c=i==="reflect"?0:1;if(r===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${s});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        for (int i = 0; i < ${r}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${o} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}};var $D=class{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((m,g)=>m[0]+n[g]+m[1]);let r=n.length,o=dt(r),s=e.map(m=>m[0]).join(","),a=e.map((m,g)=>m[0]+n[g]).join(","),l=jn("rc",r),c=jn("source",r),u=`${l[r-1]} < ${this.outputShape[r-1]}`,d=r===1?"source":`vec2(${c.slice(-2).join()})`,p=i==="reflect"?0:1,h="";if(r===1){let m=`
        ${o} source = rc;
        if (source < start) {
          source = start * 2 - source - ${p};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${p};
        }
        source -= start;
      `;h=`
        ${o} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[r-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{let m=`
        ${o} source = rc;
        ${o} lt = ${o}(lessThan(source, start));
        ${o} gte = ${o}(greaterThanEqual(source, end));
        ${o} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${p}) +
                gte * ((end - 1) * 2 - source + ${p});
        source -= start;
      `;h=`
        ${o} rc = outputLoc;
        ${m}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[r-1]} += 1;
        if(${u}) {
          ${m}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[r-2]} += 1;
        if(${l[r-2]} < ${this.outputShape[r-2]}) {
          ${m}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[r-1]} += 1;
          if(${u}) {
            ${m}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${o} start = ${o}(${s});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${h}
        setOutput(result);
      }
    `}};var N3e=({inputs:t,backend:n,attrs:e})=>{let{x:i}=t,{paddings:r,mode:o}=e,s=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $D(i.shape,r,o):new PD(i.shape,r,o);return n.runWebGLProgram(s,[i],i.dtype)},joe={kernelName:gd,backendName:"webgl",kernelFunc:N3e};var M3e=`if (b == 0.0) return NAN;
  return mod(a, b);`,R3e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Do+`
  return result;
`,O3e=Qt({opSnippet:M3e,packedOpSnippet:R3e}),qoe={kernelName:yc,backendName:"webgl",kernelFunc:O3e};var VD=class{constructor(n,e,i){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[n,i],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${e-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${e-1}));
      }
    `}};var F3e=`
if (a == b) {
  return 1.0;
};
return a / b;`,L3e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,wB=Qt({opSnippet:F3e,packedOpSnippet:L3e,checkOutOfBounds:!0}),Xoe={kernelName:nc,backendName:"webgl",kernelFunc:wB};var Koe="return a - b;",CB=Qt({opSnippet:Koe,packedOpSnippet:Koe,supportsComplex:!0,cpuKernelImpl:hie}),Yoe={kernelName:Rc,backendName:"webgl",kernelFunc:CB};function TB(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{dim:o}=i,s=x.parseAxisParam([o],r.shape),a=_B({inputs:{x:r},backend:e,attrs:{reductionIndices:s,keepDims:!1}}),l=C.expandShapeToKeepDim(a.shape,s),c=me({inputs:{x:a},backend:e,attrs:{shape:l}}),u=CB({inputs:{a:r,b:c},backend:e}),d=bB({inputs:{x:u},backend:e}),p=Im({inputs:{x:d},backend:e,attrs:{axis:s,keepDims:!1}}),h=me({inputs:{x:p},backend:e,attrs:{shape:l}}),m=wB({inputs:{a:d,b:h},backend:e});return e.disposeIntermediateTensorInfo(a),e.disposeIntermediateTensorInfo(c),e.disposeIntermediateTensorInfo(u),e.disposeIntermediateTensorInfo(d),e.disposeIntermediateTensorInfo(p),e.disposeIntermediateTensorInfo(h),m}var Qoe={kernelName:Rd,backendName:"webgl",kernelFunc:TB};function P3e(t){let{inputs:n,backend:e,attrs:i}=t,{logits:r}=n,{numSamples:o,seed:s,normalized:a}=i,l=a?r:TB({inputs:{logits:r},backend:e,attrs:{dim:r.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new VD(c,u,o),p=[[s]],h=e.runWebGLProgram(d,[l],"int32",p);return a||e.disposeIntermediateTensorInfo(l),h}var Zoe={kernelName:q1,backendName:"webgl",kernelFunc:P3e};var $3e=ci+`
  return -x;
`,V3e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function B3e(t){let{inputs:n,backend:e}=t,{x:i}=n;if(e.shouldExecuteOnCPU([i])){let o=e.texData.get(i.dataId),[s,a]=Xne(o.values,i.shape,i.dtype);return e.makeTensorInfo(a,i.dtype,s)}let r;return G().getBool("WEBGL_PACK_UNARY_OPERATIONS")?r=new to(i.shape,V3e):r=new Ui(i.shape,$3e),e.runWebGLProgram(r,[i],i.dtype)}var Joe={kernelName:yd,backendName:"webgl",kernelFunc:B3e};var z3e=Ji.nonMaxSuppressionV3Impl;function G3e(t){C.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l}=i,c=e.readSync(r.dataId),u=e.readSync(o.dataId),{selectedIndices:d}=z3e(c,u,s,a,l);return e.makeTensorInfo([d.length],"int32",new Int32Array(d))}var ese={kernelName:dy,backendName:"webgl",kernelFunc:G3e};var U3e=Ji.nonMaxSuppressionV4Impl;function H3e(t){C.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=i,u=e.readSync(r.dataId),d=e.readSync(o.dataId),{selectedIndices:p,validOutputs:h}=U3e(u,d,s,a,l,c);return[e.makeTensorInfo([p.length],"int32",new Int32Array(p)),e.makeTensorInfo([],"int32",new Int32Array([h]))]}var tse={kernelName:py,backendName:"webgl",kernelFunc:H3e};var W3e=Ji.nonMaxSuppressionV5Impl;function j3e(t){C.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:n,backend:e,attrs:i}=t,{boxes:r,scores:o}=n,{maxOutputSize:s,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=i,u=e.readSync(r.dataId),d=e.readSync(o.dataId),p=s,h=a,m=l,g=c,{selectedIndices:f,selectedScores:y}=W3e(u,d,p,h,m,g);return[e.makeTensorInfo([f.length],"int32",new Int32Array(f)),e.makeTensorInfo([y.length],"float32",new Float32Array(y))]}var nse={kernelName:hy,backendName:"webgl",kernelFunc:j3e};var BD=class{constructor(n,e,i,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${r}), float(${i}),
                      float(index == coords.y)));
      }
    `}};var q3e=t=>{let{inputs:n,backend:e,attrs:i}=t,{indices:r}=n,{dtype:o,depth:s,onValue:a,offValue:l}=i,c=x.sizeFromShape(r.shape),u=new BD(c,s,a,l),d=me({inputs:{x:r},backend:e,attrs:{shape:[c]}}),p=e.runWebGLProgram(u,[d],o);e.disposeIntermediateTensorInfo(d);let h=[...r.shape,s],m=me({inputs:{x:p},backend:e,attrs:{shape:h}});return e.disposeIntermediateTensorInfo(p),m},ise={kernelName:xd,backendName:"webgl",kernelFunc:q3e};function P_(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="complex64"){let r=su({inputs:{input:i},backend:e}),o=P_({inputs:{x:r},backend:e}),s=Dm({inputs:{input:i},backend:e}),a=P_({inputs:{x:s},backend:e}),l=io({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return au({attrs:{shape:i.shape,dtype:i.dtype,value:i.dtype==="string"?"":0},backend:e})}var rse={kernelName:Ld,backendName:"webgl",kernelFunc:P_};function ose(t){let{inputs:n,backend:e}=t,{x:i}=n;if(i.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(i.dtype==="complex64"){let r=su({inputs:{input:i},backend:e}),o=ose({inputs:{x:r},backend:e}),s=Dm({inputs:{input:i},backend:e}),a=P_({inputs:{x:s},backend:e}),l=io({inputs:{real:o,imag:a},backend:e});return e.disposeIntermediateTensorInfo(r),e.disposeIntermediateTensorInfo(o),e.disposeIntermediateTensorInfo(s),e.disposeIntermediateTensorInfo(a),l}else return au({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:e})}var sse={kernelName:bd,backendName:"webgl",kernelFunc:ose};function X3e(t){let{inputs:n,backend:e,attrs:i}=t,{axis:r}=i;if(n.length===1)return TD({inputs:{input:n[0]},backend:e,attrs:{dim:r}});let o=n[0].shape,s=n[0].dtype;n.forEach(u=>{x.assertShapesMatch(o,u.shape,"All tensors passed to stack must have matching shapes"),x.assert(s===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});let a=[],l=n.map(u=>{let d=TD({inputs:{input:u},backend:e,attrs:{dim:r}});return a.push(d),d}),c=yB({inputs:l,backend:e,attrs:{axis:r}});return a.forEach(u=>e.disposeIntermediateTensorInfo(u)),c}var ase={kernelName:vd,backendName:"webgl",kernelFunc:X3e};var zD=class{constructor(n,e,i){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((c,u)=>c[0]+n[u]+c[1]);let r=n.length,o=dt(r),s=e.map(c=>c[0]).join(","),a=e.map((c,u)=>c[0]+n[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);if(r===1){this.userCode=`
        int start = ${s};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${o} start = ${o}(${s});
      ${o} end = ${o}(${a});

      void main() {
        ${o} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${o} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}};var GD=class{constructor(n,e,i){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=e.map((g,f)=>g[0]+n[f]+g[1]);let r=n.length,o=dt(r),s=e.map(g=>g[0]).join(","),a=e.map((g,f)=>g[0]+n[f]).join(","),l=jn("rc",r),c=jn("source",r),u=`${l[r-1]} < ${this.outputShape[r-1]}`,d=r===1?"source":`vec2(${c.slice(-2).join()})`,p=[`${o} rc = outputLoc;`,`${l[r-1]} += 1;
       if(${u}) {
      `,r===1?"":`}
       rc = outputLoc;
       ${l[r-2]} += 1;
       if(${l[r-2]} < ${this.outputShape[r-2]}) {`,r===1?"":`  ${l[r-1]} += 1;
         if(${u}) {`],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",m="";for(let g=0,f=r===1?2:4;g<f;g++)m+=`
        ${p[g]}
        if (${h}) {
          result[${g}] = float(value);
        } else {
          ${o} source = rc - start;
          result[${g}] = getChannel(getX(${c.join()}), ${d});
        }
      `;m+=r===1?"} ":"}}",this.userCode=`
      const ${o} start = ${o}(${s});
      const ${o} end = ${o}(${a});

      void main() {
        ${o} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${m}
        setOutput(result);
      }
    `}};var SB=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{paddings:o,constantValue:s}=i;if(x.sizeFromShape(r.shape)===0){let c=o.map((u,d)=>u[0]+r.shape[d]+u[1]);return au({backend:e,attrs:{shape:c,value:s,dtype:r.dtype}})}let a=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new GD(r.shape,o,s):new zD(r.shape,o,s),l=[[s]];return e.runWebGLProgram(a,[r],r.dtype,l)},lse={kernelName:_d,backendName:"webgl",kernelFunc:SB};var K3e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Y3e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Do+`
  return result;
`,Q3e=Qt({opSnippet:K3e,packedOpSnippet:Y3e}),cse={kernelName:xc,backendName:"webgl",kernelFunc:Q3e};function Z3e(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{axis:o,keepDims:s}=i,a=r.shape.length,l=[],c=x.parseAxisParam(o,r.shape),u=c,d=C.getAxesPermutation(u,a),p=r;d!=null&&(p=Dn({inputs:{x:r},backend:e,attrs:{perm:d}}),u=C.getInnerMostAxes(u.length,a),l.push(p)),C.assertAxesAreInnerMostDims("prod",u,a);let h;if(e.shouldExecuteOnCPU([p])){let m=e.texData.get(p.dataId).values,{outVals:g,outShape:f,outDtype:y}=Yne(p.shape,p.dtype,m,u);h=e.makeTensorInfo(f,y,g)}else{let[m,g]=C.computeOutAndReduceShapes(p.shape,u),f=x.sizeFromShape(g),y=me({inputs:{x:p},backend:e,attrs:{shape:[-1,f]}}),b=Uh(r.dtype),v=Ao(y,b,"prod",e);h=me({inputs:{x:v},backend:e,attrs:{shape:m}}),l.push(y),l.push(v)}if(s){l.push(h);let m=C.expandShapeToKeepDim(h.shape,c);h=me({inputs:{x:h},backend:e,attrs:{shape:m}})}return l.forEach(m=>e.disposeIntermediateTensorInfo(m)),h}var use={kernelName:Cd,backendName:"webgl",kernelFunc:Z3e};function J3e(t){let{inputs:n,backend:e,attrs:i}=t,{paramsNestedSplits:r,paramsDenseValues:o,indices:s}=n,{outputRaggedRank:a}=i,l=r.map(y=>e.readSync(y.dataId)),c=r.map(y=>y.shape),u=e.readSync(o.dataId),d=e.readSync(s.dataId),[p,h,m]=Qne(l,c,u,o.shape,o.dtype,d,s.shape,a),g=p.map(y=>e.makeTensorInfo([y.length],"int32",y)),f=e.makeTensorInfo(m,o.dtype,h);return g.concat([f])}var dse={kernelName:X1,backendName:"webgl",kernelFunc:J3e};function eze(t){let{inputs:n,backend:e}=t,{starts:i,limits:r,deltas:o}=n,s=e.readSync(i.dataId),a=e.readSync(r.dataId),l=e.readSync(o.dataId),[c,u]=Zne(s,i.shape,i.dtype,a,r.shape,l,o.shape),d=e.makeTensorInfo([c.length],"int32",c),p=e.makeTensorInfo([u.length],i.dtype,u);return[d,p]}var pse={kernelName:K1,backendName:"webgl",kernelFunc:eze};function tze(t){let{inputs:n,backend:e,attrs:i}=t,{shape:r,values:o,defaultValue:s,rowPartitionTensors:a}=n,{rowPartitionTypes:l}=i,c=e.readSync(r.dataId),u=e.readSync(o.dataId),d=e.readSync(s.dataId),p=a.map(f=>e.readSync(f.dataId)),h=a.map(f=>f.shape),[m,g]=Jne(c,r.shape,u,o.shape,o.dtype,d,s.shape,p,h,l);return e.makeTensorInfo(m,o.dtype,g)}var hse={kernelName:Y1,backendName:"webgl",kernelFunc:tze};var kB=t=>{let{backend:n,attrs:e}=t,{start:i,stop:r,step:o,dtype:s}=e,a=eie(i,r,o,s);return n.makeTensorInfo([a.length],s,a)},mse={kernelName:my,backendName:"webgl",kernelFunc:kB};var nze="return 1.0 / x;",ize=ze({opSnippet:nze}),fse={kernelName:vc,backendName:"webgl",kernelFunc:ize};var rze=ci+`
  return (x < 0.0) ? 0.0 : x;
`,oze=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,sze=ze({opSnippet:rze,packedOpSnippet:oze}),gse={kernelName:_c,backendName:"webgl",kernelFunc:sze};var aze=ci+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,lze=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,cze=ze({opSnippet:aze,packedOpSnippet:lze}),yse={kernelName:wc,backendName:"webgl",kernelFunc:cze};var UD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p;o?p="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":p="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}};var HD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p;o?p="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":p="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${p};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${i-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}};function uze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i,[l,c]=a,u=G().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new HD(r.shape,l,c,o,s):new UD(r.shape,l,c,o,s);return e.runWebGLProgram(u,[r],"float32")}var bse={kernelName:kd,backendName:"webgl",kernelFunc:uze};var WD=class{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,r,o]=e,[,s,a]=n,l=[i&&s>1?r-1:r,i&&a>1?o-1:o],c=[i&&s>1?s-1:s,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${o-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function dze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i,a=new WD(o.shape,r.shape,s);return e.runWebGLProgram(a,[o],o.dtype)}var xse={kernelName:yy,backendName:"webgl",kernelFunc:dze};var jD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p=r?"0.5":"0.0",h;o?h="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}};var qD=class{constructor(n,e,i,r,o){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[s,a,l,c]=n;this.outputShape=[s,e,i,c];let u=[r&&e>1?a-1:a,r&&i>1?l-1:l],d=[r&&e>1?e-1:e,r&&i>1?i-1:i],p=r?"0.5":"0.0",h;o?h="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${i-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}};function pze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r}=n,{alignCorners:o,halfPixelCenters:s,size:a}=i,[l,c]=a,u=G().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new qD(r.shape,l,c,o,s):new jD(r.shape,l,c,o,s);return e.runWebGLProgram(u,[r],r.dtype)}var vse={kernelName:Sd,backendName:"webgl",kernelFunc:pze};var XD=class{constructor(n,e,i){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e;let[,r,o]=e,[,s,a]=n,l=[i&&s>1?r-1:r,i&&a>1?o-1:o],c=[i&&s>1?s-1:s,i&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],p=1/u,h=1/d,m=Math.ceil(p)*2+2,g=Math.ceil(h)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${p});
        const float invWidthScale = float(${h});

        const int winHeight = int(${m});
        const int winWidth = int(${g});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${s}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${r}) - 1),
                ${i} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${o}) - 1),
                ${i} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}};function hze(t){let{inputs:n,backend:e,attrs:i}=t,{images:r,dy:o}=n,{alignCorners:s}=i,a=new XD(o.shape,r.shape,s);return e.runWebGLProgram(a,[o],o.dtype)}var _se={kernelName:gy,backendName:"webgl",kernelFunc:hze};var KD=class{constructor(n,e){this.variableNames=["x"];let i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);if(this.outputShape=n,i===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${n[0]} - coord - 1));
        }
      `;return}let r=a=>e.indexOf(a)!==-1&&n[a]!==1?`${n[a]} - coords[${a}] - 1`:`coords[${a}]`,o=n.map((a,l)=>r(l)).join(","),s=dt(i);this.userCode=`
      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${o}));
      }
    `}};var YD=class{constructor(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let i=n.length;if(i>4)throw new Error(`WebGL backend: Reverse of rank-${i} tensor is not yet supported`);this.outputShape=n;let r=jn("rc",i),o=`${r[i-1]} + 1 < ${this.outputShape[i-1]}`,s=`${r[i-2]} + 1 < ${this.outputShape[i-2]}`,a=dt(i);i===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${n[0]} - rc - 1),
            ${n[0]} - rc - 1);
          if(${o}){
              result.g = getChannel(getX(${n[0]} - (rc  + 1) - 1),
                ${n[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(r.slice())};
          if(${o}){
            result.g = ${c(r.slice())};
          }
          if(${s}) {
            result.b = ${u(r.slice())};
            if(${o}) {
              result.a = ${d(r.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(m){return p(m)}function c(m){return m[i-1]="("+m[i-1]+" + 1)",p(m)}function u(m){return m[i-2]="("+m[i-2]+" + 1)",p(m)}function d(m){return m[i-1]="("+m[i-1]+" + 1)",m[i-2]="("+m[i-2]+" + 1)",p(m)}function p(m){let g=n.map((b,v)=>h(v,m)),f=g.join(","),y=g.slice(-2).join(",");return`getChannel(getX(${f}), vec2(${y}))`}function h(m,g){return e.indexOf(m)!==-1&&n[m]!==1?`${n[m]} - ${g[m]} - 1`:`${g[m]}`}}};function mze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{dims:o}=i,s=r.shape.length,a=x.parseAxisParam(o,r.shape);if(s===0)return qn({inputs:{x:r},backend:e});let l=G().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YD(r.shape,a):new KD(r.shape,a);return e.runWebGLProgram(l,[r],r.dtype)}var wse={kernelName:Id,backendName:"webgl",kernelFunc:mze};var QD=class{constructor(n,e){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let i=n[1],r=n[2];this.outputShape=n;let o="";typeof e=="number"?o=`float outputValue = ${e.toFixed(2)};`:o=`
        vec3 fill = vec3(${e.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${o}
          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${i}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}};var Cse={kernelName:Cy,backendName:"webgl",kernelFunc:({inputs:t,attrs:n,backend:e})=>{let{image:i}=t,{radians:r,fillValue:o,center:s}=n,a=e,l=new QD(i.shape,o),[c,u]=C.getImageCenter(s,i.shape[1],i.shape[2]),d=[[c,u,Math.sin(r),Math.cos(r)]];return a.runWebGLProgram(l,[i],i.dtype,d)}};var fze=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,gze=ze({opSnippet:fze}),Tse={kernelName:Cc,backendName:"webgl",kernelFunc:gze};var yze="return inversesqrt(x);",bze=ze({opSnippet:yze,cpuKernelImpl:tie}),Sse={kernelName:Tc,backendName:"webgl",kernelFunc:bze};var op=class{constructor(n,e,i,r,o,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=s;let c=dt(o.length),u=dt(s.length),d="";i===1?d="i":i===2&&(d="i, j");let p=`getIndices(${d})`,h="";r===1?h="i":r===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";l&&(g="coords[0], coords[1]");let f=`getDefaultValue(${g})`,y=e>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${n}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${e}; j++) {
              int index = round(${p});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${m};
              found = true;
            }
          }
          setOutput(mix(${f}, sum, float(found)));
        }
      `}};var ZD=class{constructor(n,e,i,r,o,s,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=s;let c=dt(o.length),u=dt(s.length),d="";i===1?d="i":i===2&&(d="i, j");let p=`getIndices(${d})`,h="";r===1?h="i":r===2&&(h="i, coords[1]");let m=`getUpdates(${h})`,g="";l&&(g="coords[0], coords[1]");let f=`getDefaultValue(${g})`,y=e>1?"strides[j]":"strides",b=e>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${o});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${n}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${e}; j+=2) {
              ivec4 index = round(${p});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${e}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${m};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${f}, sum, found));
        }
      `}};function xze(t){let{inputs:n,backend:e,attrs:i}=t,{indices:r,updates:o}=n,{shape:s}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=C.calculateShapes(o,r,s),p=[d/c,c];if(d===0)return e.makeTensorInfo(s,r.dtype);let h=me({inputs:{x:r},backend:e,attrs:{shape:[l,a]}}),m=me({inputs:{x:o},backend:e,attrs:{shape:[l,c]}}),g=e.makeTensorInfo([],"float32",new Float32Array([0])),f;G().getBool("WEBGL_PACK")?f=new ZD(l,a,h.shape.length,m.shape.length,u,p):f=new op(l,a,h.shape.length,m.shape.length,u,p);let y=e.runWebGLProgram(f,[m,h,g],m.dtype),b=me({inputs:{x:y},backend:e,attrs:{shape:s}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(y),e.disposeIntermediateTensorInfo(g),b}var kse={kernelName:Q1,backendName:"webgl",kernelFunc:xze};var JD=class{constructor(n,e,i,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[n,i];let o="while (left < right) {",s=`for (int i = 0; i < ${Math.ceil(Math.log2(e+1))}; ++i) { if (left >= right) break;`,a=G().getNumber("WEBGL_VERSION")===2?o:s,l=r==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}};function vze(t){let{inputs:n,backend:e,attrs:i}=t,{sortedSequence:r,values:o}=n,{side:s}=i,a=new JD(r.shape[0],r.shape[1],o.shape[1],s),l=[[r.shape[1]]];return e.runWebGLProgram(a,[r,o],"int32",l)}var Ise={kernelName:J1,backendName:"webgl",kernelFunc:vze};var eA=class{constructor(n,e,i){this.variableNames=["c","a","b"],this.outputShape=e;let r,o;if(i>4)throw Error(`Where for rank ${i} is not yet supported`);if(i===1)o="resRC",r="resRC";else{let a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<e.length;u++)c.push(`${a[u]}`),u<n&&l.push(`${a[u]}`);r=l.join(),o=c.join()}let s=dt(i);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        float cVal = getC(${r});
        if (cVal >= 1.0) {
          setOutput(getA(${o}));
        } else {
          setOutput(getB(${o}));
        }
      }
    `}};function _ze(t){let{inputs:n,backend:e}=t,{condition:i,t:r,e:o}=n,s=new eA(i.shape.length,r.shape,r.shape.length);return e.runWebGLProgram(s,[i,r,o],ni(r.dtype,o.dtype))}var Ese={kernelName:Ed,backendName:"webgl",kernelFunc:_ze};var wze=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${C.SELU_SCALEALPHA};
  float scale = ${C.SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Cze=ze({opSnippet:wze}),Dse={kernelName:Sc,backendName:"webgl",kernelFunc:Cze};var Tze=As+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,Sze=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,kze=ze({opSnippet:Tze,packedOpSnippet:Sze,cpuKernelImpl:iie}),Ase={kernelName:Dc,backendName:"webgl",kernelFunc:kze};var Ize=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,Eze=ze({opSnippet:Ize}),Nse={kernelName:Ec,backendName:"webgl",kernelFunc:Eze};var Dze=As+`
  return sin(x);
`,Aze=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Do}
  return result;
`,Nze=ze({opSnippet:Dze,packedOpSnippet:Aze}),Mse={kernelName:kc,backendName:"webgl",kernelFunc:Nze};var Mze=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,Rze=ze({opSnippet:Mze}),Rse={kernelName:Ic,backendName:"webgl",kernelFunc:Rze};var Oze=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,Fze=ze({opSnippet:Oze}),Ose={kernelName:Ac,backendName:"webgl",kernelFunc:Fze};var Lze=t=>{let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{blockShape:o,paddings:s}=i;x.assert(r.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let a=o.reduce((y,b)=>y*b),l=[[0,0]];l.push(...s);for(let y=1+o.length;y<r.shape.length;++y)l.push([0,0]);let c=[],u=SB({inputs:{x:r},backend:e,attrs:{paddings:l,constantValue:0}}),d=C.getReshaped(u.shape,o,a,!1),p=C.getPermuted(d.length,o.length,!1),h=C.getReshapedPermuted(u.shape,o,a,!1),m=me({inputs:{x:u},backend:e,attrs:{shape:d}}),g=Dn({inputs:{x:m},backend:e,attrs:{perm:p}}),f=me({inputs:{x:g},backend:e,attrs:{shape:h}});return c.push(u),c.push(m),c.push(g),c.forEach(y=>e.disposeIntermediateTensorInfo(y)),f},Fse={kernelName:Nd,backendName:"webgl",kernelFunc:Lze};function Pze(t){let{inputs:n,backend:e}=t,{indices:i,values:r,denseShape:o,defaultValue:s}=n;if(o.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${o.shape}`);if(i.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${i.shape}`);if(r.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${r.shape}`);if(s.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${s.shape}`);let a=e.readSync(i.dataId),l=e.readSync(r.dataId),c=e.readSync(o.dataId),u=e.readSync(s.dataId)[0],[d,p,h,m,g]=oie(a,i.shape,i.dtype,l,r.dtype,c,u);return[e.makeTensorInfo(p,i.dtype,d),e.makeTensorInfo([p[0]],r.dtype,h),e.makeTensorInfo([m.length],"bool",new Uint8Array(m.map(f=>Number(f)))),e.makeTensorInfo([g.length],i.dtype,new Int32Array(g))]}var Lse={kernelName:ek,backendName:"webgl",kernelFunc:Pze};function $ze(t){let{inputs:n,backend:e}=t,{inputIndices:i,inputShape:r,newShape:o}=n;if(i.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${i.shape}`);if(r.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${r.shape}`);if(o.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);let s=Array.from(e.readSync(r.dataId)),a=e.readSync(i.dataId),l=Array.from(e.readSync(o.dataId)),[c,u,d]=sie(a,i.shape,i.dtype,s,l);return[e.makeTensorInfo(u,i.dtype,c),e.makeTensorInfo([d.length],o.dtype,new Int32Array(d))]}var Pse={kernelName:tk,backendName:"webgl",kernelFunc:$ze};function Vze(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${o.shape}`);let s=e.readSync(i.dataId),a=e.readSync(r.dataId),l=e.readSync(o.dataId),[c,u]=FE(s,i.shape,i.dtype,a,l,!0);return e.makeTensorInfo(u,i.dtype,c)}var $se={kernelName:nk,backendName:"webgl",kernelFunc:Vze};function Bze(t){let{inputs:n,backend:e}=t,{data:i,indices:r,segmentIds:o}=n;if(i.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${r.shape}`);if(o.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${o.shape}`);let s=e.readSync(i.dataId),a=e.readSync(r.dataId),l=e.readSync(o.dataId),[c,u]=FE(s,i.shape,i.dtype,a,l);return e.makeTensorInfo(u,i.dtype,c)}var Vse={kernelName:ik,backendName:"webgl",kernelFunc:Bze};function zze(t){let{inputs:n,backend:e,attrs:i}=t,{sparseIndices:r,sparseValues:o,defaultValue:s}=n,{outputShape:a}=i,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:p}=C.calculateShapes(o,r,a),h=!1;if(o.dtype==="string"){let y=e.bufferSync(r),b=e.bufferSync(o),v=x.decodeString(e.readSync(s.dataId)[0]),_=nie(y,b,a,p,u,c,l,d,v,h);return e.makeTensorInfo(a,_.dtype,_.values)}let m=new op(c,l,r.shape.length,o.shape.length,d,[p,1],h),g=e.runWebGLProgram(m,[o,r,s],o.dtype),f=me({inputs:{x:g},backend:e,attrs:{shape:a}});return e.disposeIntermediateTensorInfo(g),f}var Bse={kernelName:rk,backendName:"webgl",kernelFunc:zze};function Gze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{numOrSizeSplits:o,axis:s}=i,a=x.parseAxisParam(s,r.shape)[0],l=C.prepareSplitSize(r,o,a),c=r.shape.length,u=new Array(c).fill(0),d=r.shape.slice();return l.map(p=>{let h=[...d];h[a]=p;let m=ua({inputs:{x:r},backend:e,attrs:{begin:u,size:h}});return u[a]+=p,m})}var zse={kernelName:Md,backendName:"webgl",kernelFunc:Gze};var Gse="return sqrt(x);",Uze=ze({opSnippet:Gse,packedOpSnippet:Gse,cpuKernelImpl:aie}),Use={kernelName:Nc,backendName:"webgl",kernelFunc:Uze};var Hze="return x * x;",Wze=ze({opSnippet:Hze}),Hse={kernelName:by,backendName:"webgl",kernelFunc:Wze};var Wse="return (a - b) * (a - b);",jze=Qt({opSnippet:Wse,packedOpSnippet:Wse}),jse={kernelName:Mc,backendName:"webgl",kernelFunc:jze};function qze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n;if(r.dtype!=="string")throw new Error("Input must be of datatype string");let o=e.readSync(r.dataId),s=C.fromUint8ToStringArray(o),a=lie(s,"string",i);return e.makeTensorInfo(r.shape,"string",a)}var qse={kernelName:w0,backendName:"webgl",kernelFunc:qze};function Xze({inputs:t,attrs:n,backend:e}){let{x:i}=t,r=ci+`
    return x > 0.0 ? 1.0 : float(${n.alpha});
  `,o=new Ui(i.shape,r);return e.runWebGLProgram(o,[i],i.dtype)}var Xse={kernelName:Lc,backendName:"webgl",kernelFunc:Xze};var tA=class{constructor(n,e,i){this.variableNames=["x"],this.outputShape=i;let r=i.length,o=dt(i.length),s=dt(i.length),a="";if(r===1)a="coords * strides + begin";else{let l=0;a=i.map((c,u)=>(l++,i.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${o} begin = ${o}(${n});
      ${o} strides = ${o}(${e});

      void main() {
        ${s} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}};function Kze(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{begin:o,end:s,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:p}=i,{finalShapeSparse:h,finalShape:m,isIdentity:g,sliceDim0:f,isSimpleSlice:y,begin:b,end:v,strides:_}=Ti.sliceInfo(r.shape,o,s,a,l,c,u,d,p),w;if(g)w=me({inputs:{x:r},backend:e,attrs:{shape:m}});else if(f||y){x.assert(r.shape.length>=1,()=>`Input must have rank at least 1, got: ${r.shape.length}`);let D=Ti.computeOutShape(b,v,_),N=ua({inputs:{x:r},backend:e,attrs:{begin:b,size:D}});w=me({inputs:{x:N},backend:e,attrs:{shape:m}}),e.disposeIntermediateTensorInfo(N)}else if(e.shouldExecuteOnCPU([r])){let N=e.readSync(r.dataId),O=Ge(r.shape,r.dtype,N),P=cie(h,O,_,b);w=e.makeTensorInfo(m,r.dtype,P.values)}else{let N=new tA(b,_,h);w=e.runWebGLProgram(N,[r],r.dtype)}let T=me({inputs:{x:w},backend:e,attrs:{shape:m}});return e.disposeIntermediateTensorInfo(w),T}var Kse={kernelName:xy,backendName:"webgl",kernelFunc:Kze};function Yze(t){let{inputs:n,backend:e,attrs:i}=t,{separator:r,nGramWidths:o,leftPad:s,rightPad:a,padWidth:l,preserveShortSequences:c}=i,{data:u,dataSplits:d}=n,p=e.readSync(u.dataId),h=e.readSync(d.dataId),[m,g]=uie(p,h,r,o,s,a,l,c);return[e.makeTensorInfo([m.length],"string",m),e.makeTensorInfo(d.shape,"int32",g)]}var Yse={kernelName:ok,backendName:"webgl",kernelFunc:Yze};function Qze(t){let{inputs:n,backend:e,attrs:i}=t,{skipEmpty:r}=i,{input:o,delimiter:s}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(o.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(s.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);let a=e.readSync(o.dataId),l=e.readSync(s.dataId)[0],[c,u,d]=die(a,l,r),p=u.length;return[e.makeTensorInfo([p,2],"int32",c),e.makeTensorInfo([p],"string",u),e.makeTensorInfo([2],"int32",new Int32Array(d))]}var Qse={kernelName:sk,backendName:"webgl",kernelFunc:Qze};function Zze(t){let{inputs:n,backend:e,attrs:i}=t,{numBuckets:r}=i,{input:o}=n;if(o.dtype!=="string")throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");let s=e.readSync(o.dataId),a=pie(s,r);return e.makeTensorInfo(o.shape,"int32",a)}var Zse={kernelName:ak,backendName:"webgl",kernelFunc:Zze};var Jze="return tan(x);",eGe=ze({opSnippet:Jze}),Jse={kernelName:Oc,backendName:"webgl",kernelFunc:eGe};var tGe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,nGe=ze({opSnippet:tGe}),eae={kernelName:Fc,backendName:"webgl",kernelFunc:nGe};function iGe(t){let{inputs:n,backend:e,attrs:i}=t,{tensor:r,indices:o,updates:s}=n,{}=i,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=C.calculateShapes(s,o,r.shape),p=[d/c,c];if(d===0)return e.makeTensorInfo(r.shape,o.dtype);let h=me({inputs:{x:o},backend:e,attrs:{shape:[l,a]}}),m=me({inputs:{x:s},backend:e,attrs:{shape:[l,c]}}),g=me({inputs:{x:r},backend:e,attrs:{shape:p}}),f=new op(l,a,h.shape.length,m.shape.length,u,p,!1,!0),y=e.runWebGLProgram(f,[m,h,g],g.dtype),b=me({inputs:{x:y},backend:e,attrs:{shape:r.shape}});return e.disposeIntermediateTensorInfo(h),e.disposeIntermediateTensorInfo(m),e.disposeIntermediateTensorInfo(g),e.disposeIntermediateTensorInfo(y),b}var tae={kernelName:Z1,backendName:"webgl",kernelFunc:iGe};var nA=class{constructor(n,e){this.variableNames=["A"];let i=new Array(n.length);for(let s=0;s<i.length;s++)i[s]=n[s]*e[s];this.outputShape=i,this.rank=i.length;let r=dt(this.rank),o=rGe(n);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        setOutput(getA(${o}));
      }
    `}};function rGe(t){let n=t.length;if(n>5)throw Error(`Tile for rank ${n} is not yet supported`);if(n===1)return`imod(resRC, ${t[0]})`;let e=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],i=[];for(let r=0;r<t.length;r++)i.push(`imod(${e[r]}, ${t[r]})`);return i.join()}function IB(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{reps:o}=i;if(r.dtype==="string"||r.shape.length>5){let l=e.readSync(r.dataId),c=r.dtype==="string"?l.map(p=>x.decodeString(p)):l,u=Ge(r.shape,r.dtype,c),d=mie(u,o);return e.makeTensorInfo(d.shape,d.dtype,d.values)}let s=new nA(r.shape,o);return e.runWebGLProgram(s,[r],r.dtype)}var nae={kernelName:Ua,backendName:"webgl",kernelFunc:IB};var iA=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=n,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}},rA=class{constructor(n){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=n,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}};function Am(t,n){n!==null&&t.disposeIntermediateTensorInfo(n)}function iae(t){let n=1;for(;n<t;)n*=2;return n}function oGe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r}=n,{k:o,sorted:s}=i,a=G().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=G().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=r.shape,u=c[c.length-1];if(e.shouldExecuteOnCPU([r])||u<a||o>l){let P=e.readSync(r.dataId),[B,K]=fie(P,c,r.dtype,o,s);return[e.makeTensorInfo(B.shape,B.dtype,B.values),e.makeTensorInfo(K.shape,K.dtype,K.values)]}if(o===0)return c[c.length-1]=0,[e.makeTensorInfo(c,r.dtype,[]),e.makeTensorInfo(c,"int32",[])];if(u===1)return[r,au({attrs:{shape:c,dtype:"int32",value:0},backend:e})];let d=e.texData.get(r.dataId),p=d!==null&&d.isPacked,h=p?e.unpackTensor(r):r,g=x.sizeFromShape(c)/u,f=me({inputs:{x:h},attrs:{shape:[g,u]},backend:e});p&&Am(e,h);let y=iae(o),b=iae(u),v=null,_=()=>v===null?[f,f]:[f,v],w=(P,B,K)=>{let X=_(),Z=new iA(K),U=[[u],[v===null?1:0],[Number.NEGATIVE_INFINITY],[P],[B]],j=v;v=e.runWebGLProgram(Z,X,"int32",U),Am(e,j)};for(let P=1;P<y;P*=2){let B=P*2;for(let K=P;K>=1;K/=2)w(B,K,[g,b])}for(let P=b;P>y;P/=2){let B=_(),K=new rA([g,P/2]),Z=[[u],[v===null?1:0],[y]],te=v;v=e.runWebGLProgram(K,B,"int32",Z),Am(e,te);let U=y/2,j=U*2;for(let q=U;q>=1;q/=2)w(j,q,v.shape)}let T=v;v=ua({inputs:{x:v},backend:e,attrs:{begin:0,size:[g,o]}}),Am(e,T);let D=vB({inputs:{x:f,indices:v},backend:e,attrs:{axis:1,batchDims:1}});Am(e,f);let N=c.slice(0,-1);N.push(o),T=v,v=me({inputs:{x:v},attrs:{shape:N},backend:e}),Am(e,T);let O=D;return D=me({inputs:{x:D},attrs:{shape:N},backend:e}),Am(e,O),[D,v]}var rae={kernelName:vy,backendName:"webgl",kernelFunc:oGe};var oA=class{constructor(n,e,i,r,o,s){this.variableNames=["Image","Transforms"],this.outputShape=s;let a=i==="nearest"?1:2,l;switch(r){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${n} && 0 <= coordX && coordX < ${e}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${o});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${o});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${e}));
                float mapY = mapCoord(inY, float(${n}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}};function sGe(t){let{inputs:n,backend:e,attrs:i}=t,{image:r,transforms:o}=n,{interpolation:s,fillMode:a,fillValue:l,outputShape:c}=i,[u,d,p,h]=r.shape,[m,g]=c??[d,p],f=[u,m,g,h],y=new oA(d,p,s,a,l,f);return e.runWebGLProgram(y,[r,o],"float32")}var oae={kernelName:_y,backendName:"webgl",kernelFunc:sGe};function aGe(t){let{inputs:n,attrs:e,backend:i}=t,{axis:r}=e,{x:o}=n;rl(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let s=i.readSync(o.dataId),{outputValues:a,outputShape:l,indices:c}=gie(s,r,o.shape,o.dtype);return[i.makeTensorInfo(l,o.dtype,a),i.makeTensorInfo([c.length],"int32",c)]}var sae={kernelName:wy,backendName:"webgl",kernelFunc:aGe};function lGe(t){let{inputs:n,backend:e,attrs:i}=t,{value:r}=n,{axis:o}=i;o<0&&(o+=r.shape.length);let s=r,a=s.shape.length,l=r.shape[o],c=new Array(a-1),u=0;for(let g=0;g<a;g++)g!==o&&(c[u++]=s.shape[g]);let d=[],p=new Array(a).fill(0),h=s.shape.slice();h[o]=1;let m=new Array(l);for(let g=0;g<m.length;g++){p[o]=g;let f=ua({inputs:{x:s},backend:e,attrs:{begin:p,size:h}}),y=me({inputs:{x:f},backend:e,attrs:{shape:c}});m[g]=y,d.push(f)}return d.forEach(g=>e.disposeIntermediateTensorInfo(g)),m}var aae={kernelName:Od,backendName:"webgl",kernelFunc:lGe};var sA=class{constructor(n,e){this.variableNames=["x","segmentIds"];let i=n.windowSize,r=n.batchSize,o=n.inSize,s=n.numSegments,a=s*Math.ceil(o/i);this.outputShape=[r,a];let l="0.0",c="sumValue",u=Math.floor(i/4)*4,d=i%4,p=`
        sumValue += dot(values, segFilter);
    `,h="";o%i>0&&(h=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return initializationValue;
        }
      `);let m="";o%i>0&&(m=`
        if (inIdx < 0 || inIdx >= ${o}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${h}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${m}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${s})) * float(${i}));
        int currentSeg = int(mod(float(outIdx), float(${s})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${p}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${p}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${p}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${p}
        }
        setOutput(${c});
      }
    `}};function cGe(t){let{inputs:n,backend:e,attrs:i}=t,{x:r,segmentIds:o}=n,{numSegments:s}=i,a=r.shape.length,l=[],c=0,u=C.getAxesPermutation([c],a),d=r;u!=null&&(d=Dn({inputs:{x:r},backend:e,attrs:{perm:u}}),l.push(d),c=C.getInnerMostAxes(1,a)[0]);let p=C.segment_util.computeOutShape(d.shape,c,s),h=x.sizeFromShape([d.shape[c]]),m=me({inputs:{x:d},backend:e,attrs:{shape:[-1,h]}});l.push(m);let g=Uh(r.dtype),f=(_,w,T,D,N)=>{let O=_.shape[0],P=_.shape[1],B=C.segment_util.segOpComputeOptimalWindowSize(P,N),K={windowSize:B,inSize:P,batchSize:O,numSegments:N},X=new sA(K,w),Z=e.compileAndRun(X,[_,T],D);if(l.push(Z),Z.shape[1]===N)return Z;let te=kB({backend:e,attrs:{start:0,stop:N,step:1,dtype:"float32"}}),U=IB({inputs:{x:te},backend:e,attrs:{reps:[P/B]}});return l.push(te),l.push(U),f(Z,w,U,D,N)},y=f(m,"unsortedSegmentSum",o,g,s),b=me({inputs:{x:y},backend:e,attrs:{shape:p}}),v=b;if(u!=null){l.push(b);let _=C.getUndoAxesPermutation(u);v=Dn({inputs:{x:v},backend:e,attrs:{perm:_}})}return l.forEach(_=>e.disposeIntermediateTensorInfo(_)),v}var lae={kernelName:Fd,backendName:"webgl",kernelFunc:cGe};var uGe=[Hie,jie,qie,Xie,Yie,Qie,Zie,Jie,nre,ire,rre,ore,sre,are,lre,cre,ure,dre,pre,hre,mre,gre,yre,bre,xre,Cre,Sre,kre,Oie,Ere,Are,Nre,Mre,Rre,Ore,Fre,Lre,Pre,$re,Vre,Gre,Ure,Hre,Wre,jre,qre,Xre,Kre,Yre,Qre,Zre,Jre,eoe,toe,noe,ioe,ooe,soe,aoe,loe,uoe,doe,poe,hoe,moe,foe,goe,yoe,boe,Rie,xoe,Dre,voe,_oe,woe,Fie,Coe,Toe,Soe,koe,Ioe,Eoe,Doe,Aoe,Noe,Moe,Ooe,Foe,Loe,Poe,$oe,Voe,zoe,Uoe,Hoe,Woe,joe,qoe,Zoe,$ie,Joe,ese,tse,nse,vre,ise,sse,ase,lse,cse,Lie,use,dse,pse,hse,mse,_re,Xoe,fse,gse,yse,Bie,bse,xse,vse,_se,wse,Cse,Tse,Sse,kse,Ise,Ese,Dse,Ase,Nse,Mse,Rse,fre,Qoe,Ose,Fse,Lse,Pse,$se,Vse,Bse,zse,Use,Hse,jse,qse,Xse,Kse,Yse,Qse,Zse,Yoe,Gie,Jse,eae,tae,nae,rae,oae,Uie,sae,aae,lae,rse];for(let t of uGe)ck(t);var aA=class t{actor=null;critic=null;config;trainingBuffer=[];totalSteps=0;isTraining=!1;constructor(){this.config={learningRate:3e-4,gamma:.99,lambdaGAE:.95,clipEpsilon:.2,entropyCoef:.01,valueCoef:.5,batchSize:64,epochs:4}}initialize(n){return H(this,null,function*(){n&&(this.config=ie(ie({},this.config),n)),this.actor=hb({layers:[on.dense({inputShape:[81],units:256,activation:"relu"}),on.dropout({rate:.2}),on.dense({units:128,activation:"relu"}),on.dropout({rate:.2}),on.dense({units:64,activation:"relu"}),on.dense({units:729,activation:"softmax"})]}),this.critic=hb({layers:[on.dense({inputShape:[81],units:256,activation:"relu"}),on.dropout({rate:.2}),on.dense({units:128,activation:"relu"}),on.dropout({rate:.2}),on.dense({units:64,activation:"relu"}),on.dense({units:1,activation:"linear"})]}),this.actor.compile({optimizer:Ho.adam(this.config.learningRate),loss:"categoricalCrossentropy"}),this.critic.compile({optimizer:Ho.adam(this.config.learningRate),loss:"meanSquaredError"}),console.log("PPO Agent initialized successfully")})}boardToState(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)e.push(n[i][r]/9);return e}getValidActions(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0){for(let o=1;o<=9;o++)if(this.isValidMove(n,i,r,o)){let s=i*81+r*9+(o-1);e.push(s)}}return e}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=o;a<o+3;a++)for(let l=s;l<s+3;l++)if(n[a][l]===r)return!1;return!0}selectAction(n){return H(this,null,function*(){if(!this.actor||!this.critic)throw new Error("PPO Agent not initialized");let e=this.boardToState(n),i=this.getValidActions(n);if(i.length===0)throw new Error("No valid actions available");let r=cr([e]),o=this.actor.predict(r),s=this.critic.predict(r),a=yield o.data(),l=yield s.data(),c=new Float32Array(729),u=0;for(let m of i)c[m]=a[m],u+=a[m];if(u>0)for(let m of i)c[m]/=u;else{let m=1/i.length;for(let g of i)c[g]=m}let d=Math.random(),p=i[0],h=Math.log(c[p]+1e-8);for(let m of i){if(d<=c[m]){p=m,h=Math.log(c[m]+1e-8);break}d-=c[m]}return r.dispose(),o.dispose(),s.dispose(),{action:p,logProb:h,value:l[0]}})}applyAction(n,e){let i=Math.floor(e/81),r=Math.floor(e%81/9),o=e%9+1,s=n.map(u=>[...u]);s[i][r]=o;let a=0;a+=1;let l=this.countEliminatedPossibilities(n,s,i,r,o);a+=l*.1;let c=this.isPuzzleSolved(s);return c&&(a+=10),a-=.01,{newBoard:s,reward:a,done:c}}countEliminatedPossibilities(n,e,i,r,o){let s=0;for(let c=0;c<9;c++)c!==r&&n[i][c]===0&&s++;for(let c=0;c<9;c++)c!==i&&n[c][r]===0&&s++;let a=Math.floor(i/3)*3,l=Math.floor(r/3)*3;for(let c=a;c<a+3;c++)for(let u=l;u<l+3;u++)(c!==i||u!==r)&&n[c][u]===0&&s++;return s}isPuzzleSolved(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0)return!1;return!0}storeStep(n){this.trainingBuffer.push(n),this.totalSteps++}calculateAdvantages(n){let e=[],i=[],r=0,o=0;for(let s=n.length-1;s>=0;s--){let a=n[s];o=a.reward+this.config.gamma*r*(1-(a.done?1:0))-a.value+this.config.gamma*this.config.lambdaGAE*o*(1-(a.done?1:0)),e.unshift(o);let c=o+a.value;i.unshift(c),r=a.value}return{advantages:e,returns:i}}train(){return H(this,null,function*(){if(!this.actor||!this.critic)throw new Error("PPO Agent not initialized");if(this.trainingBuffer.length<this.config.batchSize)return{actorLoss:0,criticLoss:0,avgAdvantage:0};this.isTraining=!0;let n=[...this.trainingBuffer];this.trainingBuffer=[];let{advantages:e,returns:i}=this.calculateAdvantages(n),r=e.reduce((h,m)=>h+m)/e.length,o=Math.sqrt(e.reduce((h,m)=>h+Math.pow(m-r,2),0)/e.length),s=e.map(h=>(h-r)/(o+1e-8)),a=n.map(h=>h.state),l=n.map(h=>h.action),c=n.map(h=>h.logProb),u=0,d=0;for(let h=0;h<this.config.epochs;h++){let m=Array.from({length:n.length},(g,f)=>f);for(let g=m.length-1;g>0;g--){let f=Math.floor(Math.random()*(g+1));[m[g],m[f]]=[m[f],m[g]]}for(let g=0;g<a.length;g+=this.config.batchSize){let f=Math.min(g+this.config.batchSize,a.length),y=m.slice(g,f),b=y.map(O=>a[O]),v=y.map(O=>l[O]),_=y.map(O=>s[O]),w=y.map(O=>i[O]),T=y.map(O=>c[O]),D=yield this.trainCritic(b,w);d+=D;let N=yield this.trainActor(b,v,_,T);u+=N}}this.isTraining=!1;let p=Math.ceil(a.length/this.config.batchSize)*this.config.epochs;return{actorLoss:u/p,criticLoss:d/p,avgAdvantage:r}})}trainCritic(n,e){return H(this,null,function*(){let i=cr(n),r=cr(e,[e.length,1]),s=(yield this.critic.fit(i,r,{epochs:1,verbose:0})).history.loss[0];return i.dispose(),r.dispose(),s})}trainActor(n,e,i,r){return H(this,null,function*(){return W(()=>{let o=cr(n),s=this.actor.predict(o),a=In(e,"int32"),l=zi(re(jc(s,a,1),1e-8)),c=In(r),u=ai(Ee(l,c)),d=In(i),p=mi(u,1-this.config.clipEpsilon,1+this.config.clipEpsilon),h=F(u,d),m=F(p,d),g=Tt(fn(gs(h,m))),f=Tt(Te(F(s,zi(re(s,1e-8))),1)),y=F(je(this.config.entropyCoef),fn(f));return re(g,Tt(y)).dataSync()[0]})})}getTrainingStats(){return{totalSteps:this.totalSteps,bufferSize:this.trainingBuffer.length,isTraining:this.isTraining}}saveModel(n){return H(this,null,function*(){if(!this.actor||!this.critic)throw new Error("Models not initialized");yield this.actor.save(`${n}/actor`),yield this.critic.save(`${n}/critic`)})}loadModel(n){return H(this,null,function*(){this.actor=yield Zd(`${n}/actor`),this.critic=yield Zd(`${n}/critic`)})}exportWeights(){return H(this,null,function*(){if(!this.actor||!this.critic)throw new Error("Models not initialized");let n=this.actor.getWeights().map(i=>i.arraySync()),e=this.critic.getWeights().map(i=>i.arraySync());return{actor:n,critic:e}})}importWeights(n){return H(this,null,function*(){if(!this.actor||!this.critic)throw new Error("Models not initialized");let e=n.actor.map(r=>$i(r)),i=n.critic.map(r=>$i(r));this.actor.setWeights(e),this.critic.setWeights(i),e.forEach(r=>r.dispose()),i.forEach(r=>r.dispose())})}updateConfig(n){this.config=ie(ie({},this.config),n)}getConfig(){return ie({},this.config)}dispose(){this.actor&&(this.actor.dispose(),this.actor=null),this.critic&&(this.critic.dispose(),this.critic=null)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var lA=class t{mainNetwork=null;targetNetwork=null;config;replayBuffer=[];totalSteps=0;isTraining=!1;updateCounter=0;constructor(){this.config={learningRate:5e-4,gamma:.99,epsilon:1,epsilonMin:.01,epsilonDecay:.995,batchSize:32,memorySize:1e4,targetUpdateFreq:100,doubleDQN:!0,duelingDQN:!0}}initialize(n){return H(this,null,function*(){n&&(this.config=ie(ie({},this.config),n)),this.mainNetwork=this.buildNetwork(),this.targetNetwork=this.buildNetwork(),yield this.updateTargetNetwork(),console.log("DQN Agent initialized with dueling architecture")})}buildNetwork(){return this.config.duelingDQN?this.buildDuelingNetwork():this.buildStandardNetwork()}buildDuelingNetwork(){let n=p_({shape:[81]}),e=on.dense({units:512,activation:"relu"}).apply(n),i=on.dropout({rate:.3}).apply(e),r=on.dense({units:256,activation:"relu"}).apply(i),o=on.dropout({rate:.3}).apply(r),s=on.dense({units:128,activation:"relu"}).apply(o),a=on.dense({units:64,activation:"relu"}).apply(s),l=on.dense({units:1,activation:"linear",name:"state_value"}).apply(a),c=on.dense({units:64,activation:"relu"}).apply(s),u=on.dense({units:729,activation:"linear",name:"action_advantages"}).apply(c),d=on.add().apply([l,u]),p=WP({inputs:n,outputs:d});return p.compile({optimizer:Ho.adam(this.config.learningRate),loss:"meanSquaredError",metrics:["mae"]}),p}buildStandardNetwork(){let n=hb({layers:[on.dense({inputShape:[81],units:512,activation:"relu"}),on.dropout({rate:.3}),on.dense({units:256,activation:"relu"}),on.dropout({rate:.3}),on.dense({units:128,activation:"relu"}),on.dense({units:64,activation:"relu"}),on.dense({units:729,activation:"linear"})]});return n.compile({optimizer:Ho.adam(this.config.learningRate),loss:"meanSquaredError",metrics:["mae"]}),n}boardToState(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)e.push(n[i][r]/9);return e}getValidActions(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0){for(let o=1;o<=9;o++)if(this.isValidMove(n,i,r,o)){let s=i*81+r*9+(o-1);e.push(s)}}return e}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=o;a<o+3;a++)for(let l=s;l<s+3;l++)if(n[a][l]===r)return!1;return!0}selectAction(n){return H(this,null,function*(){if(!this.mainNetwork)throw new Error("DQN Agent not initialized");let e=this.boardToState(n),i=this.getValidActions(n);if(i.length===0)throw new Error("No valid actions available");let r,o,s=!1;if(Math.random()<this.config.epsilon){r=i[Math.floor(Math.random()*i.length)],s=!0;let a=cr([e]),l=this.mainNetwork.predict(a);o=(yield l.data())[r],a.dispose(),l.dispose()}else{let a=cr([e]),l=this.mainNetwork.predict(a),c=yield l.data(),u=-1/0;r=i[0];for(let d of i)c[d]>u&&(u=c[d],r=d);o=u,a.dispose(),l.dispose()}return{action:r,qValue:o,isExploration:s}})}applyAction(n,e){let i=Math.floor(e/81),r=Math.floor(e%81/9),o=e%9+1,s=n.map(u=>[...u]);s[i][r]=o;let a=0;a+=1;let l=this.countEliminatedPossibilities(n,s,i,r,o);a+=l*.1;let c=this.isPuzzleSolved(s);return c&&(a+=50),{newBoard:s,reward:a,done:c}}countEliminatedPossibilities(n,e,i,r,o){let s=0;for(let c=0;c<9;c++)c!==r&&n[i][c]===0&&s++;for(let c=0;c<9;c++)c!==i&&n[c][r]===0&&s++;let a=Math.floor(i/3)*3,l=Math.floor(r/3)*3;for(let c=a;c<a+3;c++)for(let u=l;u<l+3;u++)(c!==i||u!==r)&&n[c][u]===0&&s++;return s}isPuzzleSolved(n){for(let e=0;e<9;e++)for(let i=0;i<9;i++)if(n[e][i]===0)return!1;return!0}storeExperience(n){this.replayBuffer.push(n),this.replayBuffer.length>this.config.memorySize&&this.replayBuffer.shift()}train(){return H(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)throw new Error("DQN Agent not initialized");if(this.replayBuffer.length<this.config.batchSize)return{qValue:0,epsilon:this.config.epsilon};this.isTraining=!0;let n=this.sampleBatch(),e=n.map(_=>_.state),i=n.map(_=>_.nextState),r=n.map(_=>_.action),o=n.map(_=>_.reward),s=n.map(_=>_.done?1:0),a=cr(e),l=cr(i),c=this.mainNetwork.predict(a),u=this.targetNetwork.predict(l),d=this.mainNetwork.predict(l),p=yield c.data(),h=yield u.data(),m=yield d.data(),g=new Float32Array(p.length);for(let _=0;_<g.length;_++)g[_]=p[_];let f=0;for(let _=0;_<n.length;_++){let w=r[_],T=o[_],D=s[_],N=0;if(!D){let P=0,B=-1/0;for(let K=0;K<729;K++){let X=m[_*729+K];X>B&&(B=X,P=K)}N=h[_*729+P]}let O=T+this.config.gamma*N;g[_*729+w]=O,f+=O}let y=f/n.length,b=cr(Array.from(g),[n.length,729]),v=yield this.mainNetwork.fit(a,b,{epochs:1,verbose:0});return this.totalSteps%this.config.targetUpdateFreq===0&&(yield this.updateTargetNetwork()),this.config.epsilon=Math.max(this.config.epsilonMin,this.config.epsilon*this.config.epsilonDecay),this.totalSteps++,this.isTraining=!1,a.dispose(),l.dispose(),c.dispose(),u.dispose(),d.dispose(),b.dispose(),{qValue:y,epsilon:this.config.epsilon}})}getValidActionsFromState(n){let e=[];for(let i=0;i<9;i++){e[i]=[];for(let r=0;r<9;r++)e[i][r]=Math.round(n[i*9+r]*9)}return this.getValidActions(e)}sampleBatch(){let n=[],e=Math.min(this.config.batchSize,this.replayBuffer.length);for(let i=0;i<e;i++){let r=Math.floor(Math.random()*this.replayBuffer.length);n.push(this.replayBuffer[r])}return n}updateTargetNetwork(){return H(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)return;let n=this.mainNetwork.getWeights();this.targetNetwork.setWeights(n)})}getTrainingStats(){return{totalSteps:this.totalSteps,bufferSize:this.replayBuffer.length,isTraining:this.isTraining,epsilon:this.config.epsilon}}exportWeights(){return H(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)throw new Error("Models not initialized");let n=this.mainNetwork.getWeights().map(i=>i.arraySync()),e=this.targetNetwork.getWeights().map(i=>i.arraySync());return{main:n,target:e}})}importWeights(n){return H(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)throw new Error("Models not initialized");let e=n.main.map(r=>$i(r)),i=n.target.map(r=>$i(r));this.mainNetwork.setWeights(e),this.targetNetwork.setWeights(i),e.forEach(r=>r.dispose()),i.forEach(r=>r.dispose())})}updateConfig(n){this.config=ie(ie({},this.config),n)}getConfig(){return ie({},this.config)}saveModel(n){return H(this,null,function*(){if(!this.mainNetwork||!this.targetNetwork)throw new Error("Models not initialized");yield this.mainNetwork.save(`${n}/main`),yield this.targetNetwork.save(`${n}/target`)})}loadModel(n){return H(this,null,function*(){this.mainNetwork=yield Zd(`${n}/main`),this.targetNetwork=yield Zd(`${n}/target`)})}dispose(){this.mainNetwork&&(this.mainNetwork.dispose(),this.mainNetwork=null),this.targetNetwork&&(this.targetNetwork.dispose(),this.targetNetwork=null)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=pe({token:t,factory:t.\u0275fac,providedIn:"root"})};var hGe=["fileInput"],uae=()=>[340,200],mGe=(t,n)=>({small:t,medium:n});function fGe(t,n){t&1&&(R(0,"div",8),ke(1,"div",9),R(2,"p"),Y(3,"Preparing AI playground..."),M()())}function gGe(t,n){if(t&1){let e=Xt();R(0,"div",40)(1,"span"),Y(2,"Entropy Coefficient:"),M(),R(3,"div",41)(4,"mat-slider",45)(5,"input",21),Gr("ngModelChange",function(r){Ve(e);let o=ee(3);return co(o.entropyCoef,r)||(o.entropyCoef=r),Be(r)}),Ce("ngModelChange",function(){Ve(e);let r=ee(3);return Be(r.updatePPOConfig())}),M()(),R(6,"span"),Y(7),M()()()}if(t&2){let e=ee(3);V(4),J("disabled",e.isTraining),V(),zr("ngModel",e.entropyCoef),V(2),kt(e.entropyCoef.toFixed(3))}}function yGe(t,n){if(t&1){let e=Xt();R(0,"div",40)(1,"span"),Y(2,"Discount Factor:"),M(),R(3,"div",41)(4,"mat-slider",46)(5,"input",21),Gr("ngModelChange",function(r){Ve(e);let o=ee(3);return co(o.gamma,r)||(o.gamma=r),Be(r)}),M()(),R(6,"span"),Y(7),M()()()}if(t&2){let e=ee(3);V(4),J("disabled",e.isTraining),V(),zr("ngModel",e.gamma),V(2),kt(e.gamma.toFixed(2))}}function bGe(t,n){if(t&1){let e=Xt();R(0,"div",39)(1,"div",40)(2,"span"),Y(3,"Learning Rate:"),M(),R(4,"div",41)(5,"mat-slider",42)(6,"input",21),Gr("ngModelChange",function(r){Ve(e);let o=ee(2);return co(o.learningRate,r)||(o.learningRate=r),Be(r)}),Ce("ngModelChange",function(){Ve(e);let r=ee(2);return Be(r.updatePPOConfig())}),M()(),R(7,"span"),Y(8),M()()(),R(9,"div",40)(10,"span"),Y(11,"Batch Size:"),M(),R(12,"div",41)(13,"mat-slider",43)(14,"input",21),Gr("ngModelChange",function(r){Ve(e);let o=ee(2);return co(o.batchSize,r)||(o.batchSize=r),Be(r)}),Ce("ngModelChange",function(){Ve(e);let r=ee(2);return Be(r.updatePPOConfig())}),M()(),R(15,"span"),Y(16),M()()(),be(17,gGe,8,3,"div",44)(18,yGe,8,3,"div",44),M()}if(t&2){let e=ee(2);V(5),J("disabled",e.isTraining),V(),zr("ngModel",e.learningRate),V(2),kt(e.learningRate.toFixed(4)),V(5),J("disabled",e.isTraining),V(),zr("ngModel",e.batchSize),V(2),kt(e.batchSize),V(),J("ngIf",e.selectedAlgorithm==="ppo"),V(),J("ngIf",e.selectedAlgorithm==="dqn")}}function xGe(t,n){t&1&&(Ls(0),R(1,"h4"),Y(2,"Policy Gradient Method"),M(),R(3,"p"),Y(4,"PPO handles large discrete action spaces via categorical policies, with built-in stability through a clipped objective function."),M(),Ps())}function vGe(t,n){t&1&&(Ls(0),R(1,"h4"),Y(2,"Value-Based Method"),M(),R(3,"p"),Y(4,"Dueling Double DQN separates state-value from action-advantage, reducing overestimation bias with prioritized replay."),M(),Ps())}function _Ge(t,n){if(t&1&&(R(0,"div",51)(1,"span",52),Y(2,"Actor Loss"),M(),R(3,"span",53),Y(4),M()()),t&2){let e=ee(3);V(4),kt(e.actorLoss.toFixed(4))}}function wGe(t,n){if(t&1&&(R(0,"div",51)(1,"span",52),Y(2,"Critic Loss"),M(),R(3,"span",53),Y(4),M()()),t&2){let e=ee(3);V(4),kt(e.criticLoss.toFixed(4))}}function CGe(t,n){if(t&1&&(R(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),Y(3,"Training Progress"),M()(),R(4,"mat-card-content")(5,"div",47)(6,"div",48)(7,"span"),Y(8),M(),R(9,"span"),Y(10),M()(),ke(11,"mat-progress-bar",49),M(),R(12,"div",50)(13,"div",51)(14,"span",52),Y(15,"Accuracy"),M(),R(16,"span",53),Y(17),M()(),R(18,"div",51)(19,"span",52),Y(20,"Avg Reward"),M(),R(21,"span",53),Y(22),M()(),be(23,_Ge,5,1,"div",54)(24,wGe,5,1,"div",54),R(25,"div",51)(26,"span",52),Y(27,"Total Steps"),M(),R(28,"span",53),Y(29),M()()()()()),t&2){let e=ee(2);V(8),bn("Episode ",e.episodes,""),V(2),bn("",e.progress.toFixed(1),"%"),V(),J("value",e.progress),V(6),bn("",e.accuracy.toFixed(1),"%"),V(5),kt(e.averageReward.toFixed(2)),V(),J("ngIf",e.selectedAlgorithm==="ppo"),V(),J("ngIf",e.selectedAlgorithm==="ppo"),V(5),kt(e.totalSteps)}}function TGe(t,n){if(t&1){let e=Xt();R(0,"app-cell",57),Ce("cellClick",function(){let r=Ve(e).$implicit,o=ee(3);return Be(o.onCellClick(r.row,r.col))}),M()}if(t&2){let e=n.$implicit;J("value",e.value)("notes",e.notes)("isOriginal",e.isOriginal)("isSelected",e.isSelected)("isSameNumber",e.isSameNumber)("isHighlighted",e.isHighlighted)("isCoachHighlighted",e.isHighlighted)}}function SGe(t,n){if(t&1&&(R(0,"div",55),be(1,TGe,1,7,"app-cell",56),M()),t&2){let e=n.$implicit;V(),J("ngForOf",e)}}function kGe(t,n){if(t&1&&(R(0,"p"),Y(1),M()),t&2){let e=ee(),i=e.$implicit,r=e.index,o=ee(3);V(),Tl(" Policy predicts ",i.value," (probability: ",o.getThinkingProbability(r).toFixed(2),") ")}}function IGe(t,n){if(t&1&&(R(0,"p"),Y(1),M()),t&2){let e=ee(),i=e.$implicit,r=e.index,o=ee(3);V(),sR(" Q-value for (",i.row+1,",",i.col+1,",",i.value,"): ",o.getThinkingQValue(r).toFixed(2)," ")}}function EGe(t,n){if(t&1&&(R(0,"div",60)(1,"div",61)(2,"div",62),Y(3),M(),R(4,"div",63),Y(5),M()(),R(6,"div",64),be(7,kGe,2,2,"p",19)(8,IGe,2,4,"p",19),M()()),t&2){let e=n.$implicit,i=ee(3);V(3),Tl("R",e.row+1,"C",e.col+1,""),V(2),kt(e.value),V(2),J("ngIf",i.selectedAlgorithm==="ppo"),V(),J("ngIf",i.selectedAlgorithm==="dqn")}}function DGe(t,n){if(t&1&&(R(0,"div",58)(1,"h4"),Y(2,"AI Decision"),M(),be(3,EGe,9,5,"div",59),M()),t&2){let e=ee(2);V(3),J("ngForOf",e.cellHighlights)}}function AGe(t,n){if(t&1){let e=Xt();R(0,"div",65)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),Y(4,"Model Performance"),M()(),R(5,"mat-card-content")(6,"div",66)(7,"div",67)(8,"span",68),Y(9,"Test Accuracy"),M(),R(10,"span",69),Y(11),M()(),R(12,"div",67)(13,"span",68),Y(14,"Correct Cells"),M(),R(15,"span",69),Y(16),M()(),R(17,"div",67)(18,"span",68),Y(19,"Test Time"),M(),R(20,"span",69),Y(21),M()()(),R(22,"button",28),Ce("click",function(){Ve(e);let r=ee(2);return Be(r.testOnCurrentBoard())}),R(23,"mat-icon"),Y(24,"quiz"),M(),Y(25," Test on Current Board "),M()()()()}if(t&2){let e=ee(2);V(11),bn("",e.testAccuracy.toFixed(1),"%"),V(5),Tl("",e.correctCells,"/",e.totalTestCells,""),V(5),bn("",e.testTime.toFixed(0),"ms"),V(),J("disabled",e.isTraining)}}function NGe(t,n){if(t&1&&ke(0,"div",83),t&2){let e=ee().$implicit;J("ngClass",vx(1,mGe,e.units>10,e.units<=10))}}function MGe(t,n){if(t&1&&(R(0,"div",84),Y(1),M()),t&2){let e=ee().$implicit;V(),kt(e.units)}}function RGe(t,n){if(t&1&&(R(0,"div",78)(1,"div",79),Y(2),M(),R(3,"div",80),be(4,NGe,1,4,"div",81)(5,MGe,2,1,"div",82),M()()),t&2){let e=n.$implicit,i=ee(4);V(2),kt(e.name),V(2),J("ngForOf",i.getVisibleNodes(e.units)),V(),J("ngIf",e.units>5)}}function OGe(t,n){if(t&1&&(R(0,"div",75)(1,"h4"),Y(2,"Network Architecture"),M(),R(3,"div",76),be(4,RGe,6,3,"div",77),M()()),t&2){let e=ee(3);V(4),J("ngForOf",e.networkArchitecture)}}function FGe(t,n){if(t&1&&(R(0,"div",70)(1,"mat-card",71)(2,"mat-card-header")(3,"mat-card-title"),Y(4,"Training Analytics"),M(),R(5,"mat-card-subtitle"),Y(6,"Real-time learning progress visualization"),M()(),R(7,"mat-card-content")(8,"div",72)(9,"h4"),Y(10,"Learning Accuracy"),M(),ke(11,"ngx-charts-line-chart",73),M(),R(12,"div",72)(13,"h4"),Y(14,"Average Reward"),M(),ke(15,"ngx-charts-line-chart",73),M(),be(16,OGe,5,1,"div",74),M()()()),t&2){let e=ee(2);V(11),J("results",e.accuracyChartData)("view",_u(21,uae))("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.showLegend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabelAccuracy)("autoScale",e.autoScale),V(4),J("results",e.rewardChartData)("view",_u(22,uae))("xAxis",e.showXAxis)("yAxis",e.showYAxis)("legend",e.showLegend)("showXAxisLabel",e.showXAxisLabel)("showYAxisLabel",e.showYAxisLabel)("xAxisLabel",e.xAxisLabel)("yAxisLabel",e.yAxisLabelReward)("autoScale",e.autoScale),V(),J("ngIf",e.hasNeuralNetwork&&e.showNetworkVisualization)}}function LGe(t,n){if(t&1){let e=Xt();R(0,"div",10)(1,"div",11)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),Y(5,"AI Training Controls"),M(),R(6,"mat-card-subtitle"),Y(7,"Configure and train reinforcement learning agents"),M()(),R(8,"mat-card-content")(9,"div",12)(10,"label"),Y(11,"Select Algorithm:"),M(),R(12,"mat-select",13),Gr("ngModelChange",function(r){Ve(e);let o=ee();return co(o.selectedAlgorithm,r)||(o.selectedAlgorithm=r),Be(r)}),Ce("selectionChange",function(){Ve(e);let r=ee();return Be(r.onAlgorithmChange())}),R(13,"mat-option",14),Y(14,"Proximal Policy Optimization (PPO)"),M(),R(15,"mat-option",15),Y(16,"Dueling Double DQN"),M()()(),R(17,"div",12)(18,"label"),Y(19," Advanced Settings "),R(20,"button",16),Ce("click",function(){Ve(e);let r=ee();return Be(r.toggleAdvancedSettings())}),R(21,"mat-icon"),Y(22),M()()(),be(23,bGe,19,8,"div",17),M(),R(24,"div",18),be(25,xGe,5,0,"ng-container",19)(26,vGe,5,0,"ng-container",19),M(),R(27,"div",12)(28,"label"),Y(29,"Training Speed:"),M(),R(30,"mat-slider",20)(31,"input",21),Gr("ngModelChange",function(r){Ve(e);let o=ee();return co(o.trainingSpeed,r)||(o.trainingSpeed=r),Be(r)}),M()(),R(32,"span"),Y(33),M()(),R(34,"div",22)(35,"button",23),Ce("click",function(){Ve(e);let r=ee();return Be(r.startTraining())}),R(36,"mat-icon"),Y(37),M(),Y(38),M(),R(39,"button",24),Ce("click",function(){Ve(e);let r=ee();return Be(r.testModel())}),R(40,"mat-icon"),Y(41,"psychology"),M(),Y(42," Test Model "),M(),R(43,"button",25),Ce("click",function(){Ve(e);let r=ee();return Be(r.generateNewSudoku())}),R(44,"mat-icon"),Y(45,"refresh"),M(),Y(46," New Puzzle "),M()(),R(47,"div",26)(48,"h4"),Y(49,"Model Management"),M(),R(50,"div",27)(51,"button",28),Ce("click",function(){Ve(e);let r=ee();return Be(r.saveModel())}),R(52,"mat-icon"),Y(53,"save"),M(),Y(54," Save Model "),M(),R(55,"button",29),Ce("click",function(){Ve(e);let r=ee();return Be(r.loadModel())}),R(56,"mat-icon"),Y(57,"folder_open"),M(),Y(58," Load Model "),M(),R(59,"button",28),Ce("click",function(){Ve(e);let r=ee();return Be(r.exportModel())}),R(60,"mat-icon"),Y(61,"download"),M(),Y(62," Export "),M(),R(63,"button",29),Ce("click",function(){Ve(e);let r=ee();return Be(r.triggerFileInput())}),R(64,"mat-icon"),Y(65,"upload"),M(),Y(66," Import "),M()(),R(67,"input",30,0),Ce("change",function(r){Ve(e);let o=ee();return Be(o.onFileSelected(r))}),M()()()(),be(69,CGe,30,8,"mat-card",19),M(),R(70,"div",31)(71,"mat-card",32)(72,"mat-card-header")(73,"mat-card-title"),Y(74,"AI Learning Board"),M(),R(75,"mat-card-subtitle"),Y(76,"Watch the AI make decisions in real-time"),M()(),R(77,"mat-card-content")(78,"div",33)(79,"div",34),be(80,SGe,2,1,"div",35),M()(),be(81,DGe,4,1,"div",36),M()(),be(82,AGe,26,5,"div",37),M(),be(83,FGe,17,23,"div",38),M()}if(t&2){let e=ee();V(12),zr("ngModel",e.selectedAlgorithm),J("disabled",e.isTraining),V(10),kt(e.showAdvancedSettings?"expand_less":"expand_more"),V(),J("ngIf",e.showAdvancedSettings),V(2),J("ngIf",e.selectedAlgorithm==="ppo"),V(),J("ngIf",e.selectedAlgorithm==="dqn"),V(4),J("disabled",e.isTraining),V(),zr("ngModel",e.trainingSpeed),V(2),bn("",e.trainingSpeed,"%"),V(2),J("color",e.isTraining?"warn":"primary"),V(2),kt(e.isTraining?"stop":"play_arrow"),V(),bn(" ",e.isTraining?"Stop Training":"Start Training"," "),V(),J("disabled",e.isTraining||e.progress===0),V(4),J("disabled",e.isTraining),V(8),J("disabled",e.progress===0),V(8),J("disabled",e.progress===0),V(10),J("ngIf",e.isTraining||e.progress>0),V(11),J("ngForOf",e.getSections()),V(),J("ngIf",e.cellHighlights.length>0),V(),J("ngIf",e.showModelPerformance),V(),J("ngIf",e.progress>0)}}var cA=class t{constructor(n,e,i,r,o){this.router=n;this.sudokuService=e;this.snackBar=i;this.ppoAgent=r;this.dqnAgent=o;this.generateRandomThinkingValues(),this.accuracyChartData=[{name:"Accuracy",series:[]}],this.rewardChartData=[{name:"Reward",series:[]}]}Math=Math;loading=!0;board=[];solution=[];selectedAlgorithm="ppo";isTraining=!1;progress=0;trainingSpeed=50;episodes=0;showAdvancedSettings=!1;learningRate=3e-4;batchSize=64;entropyCoef=.01;gamma=.99;epsilon=1;epsilonDecay=.995;targetUpdateFreq=100;currentReward=0;averageReward=0;accuracy=0;actorLoss=0;criticLoss=0;avgAdvantage=0;qValue=0;explorationRate=0;currentEpisodeSteps=[];totalSteps=0;showModelPerformance=!1;testAccuracy=0;testTime=0;correctCells=0;totalTestCells=0;accuracyChartData=[];rewardChartData=[];colorScheme="cool";showXAxis=!0;showYAxis=!0;gradient=!1;showLegend=!0;showXAxisLabel=!0;xAxisLabel="Episode";showYAxisLabel=!0;yAxisLabelAccuracy="Accuracy (%)";yAxisLabelReward="Reward";autoScale=!0;thinkingProbabilities=[];thinkingQValues=[];cellHighlights=[];networkVisualization=[];cellData=[];fileInput;trainingInterval=null;currentTrainingBoard=[];hasNeuralNetwork=!1;showNetworkVisualization=!1;networkArchitecture=[];generateRandomThinkingValues(){for(let n=0;n<20;n++)this.thinkingProbabilities.push(.5+Math.random()*.5),this.thinkingQValues.push(-5+Math.random()*10)}getThinkingProbability(n){return this.thinkingProbabilities[n%this.thinkingProbabilities.length]}getThinkingQValue(n){return this.thinkingQValues[n%this.thinkingQValues.length]}ngOnInit(){return H(this,null,function*(){this.initializeBoard(),this.updateNetworkArchitecture(),this.selectedAlgorithm==="ppo"?yield this.initializePPOAgent():this.selectedAlgorithm==="dqn"&&(yield this.initializeDQNAgent())})}ngOnDestroy(){this.isTraining&&this.stopTraining(),this.ppoAgent.dispose(),this.dqnAgent.dispose()}initializePPOAgent(){return H(this,null,function*(){let n={learningRate:this.learningRate,batchSize:this.batchSize,entropyCoef:this.entropyCoef};yield this.ppoAgent.initialize(n),console.log("PPO Agent initialized")})}initializeDQNAgent(){return H(this,null,function*(){let n={learningRate:this.learningRate,batchSize:this.batchSize,gamma:this.gamma,epsilon:this.epsilon,epsilonDecay:this.epsilonDecay,targetUpdateFreq:this.targetUpdateFreq};yield this.dqnAgent.initialize(n),console.log("DQN Agent initialized")})}initializeBoard(){this.loading=!0,this.sudokuService.getNewBoard().subscribe(n=>{this.board=JSON.parse(JSON.stringify(n.grid)),this.solution=JSON.parse(JSON.stringify(n.solution)),this.currentTrainingBoard=JSON.parse(JSON.stringify(n.grid)),this.initializeCellData(),this.loading=!1})}initializeCellData(){this.cellData=[];for(let n=0;n<9;n++){this.cellData[n]=[];for(let e=0;e<9;e++)this.cellData[n][e]={row:n,col:e,value:this.board[n][e],notes:[],isOriginal:this.board[n][e]!==0,isSelected:!1,isSameNumber:!1,isHighlighted:!1}}}getSections(){let n=[];for(let e=0;e<3;e++)for(let i=0;i<3;i++){let r=[];for(let o=0;o<3;o++)for(let s=0;s<3;s++){let a=e*3+o,l=i*3+s;r.push(this.cellData[a][l])}n.push(r)}return n}toggleAdvancedSettings(){this.showAdvancedSettings=!this.showAdvancedSettings}startTraining(){return H(this,null,function*(){if(this.isTraining){this.stopTraining();return}this.selectedAlgorithm==="ppo"?yield this.initializePPOAgent():this.selectedAlgorithm==="dqn"&&(yield this.initializeDQNAgent()),this.isTraining=!0,this.progress=0,this.episodes=0,this.accuracy=0,this.averageReward=0,this.actorLoss=0,this.criticLoss=0,this.avgAdvantage=0,this.totalSteps=0,this.accuracyChartData=[{name:"Accuracy",series:[]}],this.rewardChartData=[{name:"Reward",series:[]}],this.trainWithRealAlgorithm()})}stopTraining(){this.isTraining=!1,this.trainingInterval&&(clearInterval(this.trainingInterval),this.trainingInterval=null),this.cellHighlights=[],this.resetHighlights()}resetHighlights(){for(let n=0;n<9;n++)for(let e=0;e<9;e++)this.cellData[n][e].isHighlighted=!1}trainWithRealAlgorithm(){return H(this,null,function*(){this.selectedAlgorithm==="ppo"?yield this.trainPPO():yield this.trainDQN()})}trainPPO(){return H(this,null,function*(){let e=[];for(;this.isTraining&&this.episodes<1e3;){this.currentTrainingBoard=JSON.parse(JSON.stringify(this.board)),this.currentEpisodeSteps=[];let i=0,r=0,o=100;for(;this.isTraining&&r<o;){try{let{action:s,logProb:a,value:l}=yield this.ppoAgent.selectAction(this.currentTrainingBoard),c=this.ppoAgent.applyAction(this.currentTrainingBoard,s),u={state:this.boardToState(this.currentTrainingBoard),action:s,reward:c.reward,value:l,logProb:a,done:c.done};if(this.currentEpisodeSteps.push(u),this.ppoAgent.storeStep(u),this.updateVisualization(s,c.reward),this.currentTrainingBoard=c.newBoard,i+=c.reward,r++,this.totalSteps++,c.done){this.accuracy=100;break}if(this.getValidActions(this.currentTrainingBoard).length===0)break}catch(s){console.error("Error during PPO training step:",s);break}yield new Promise(s=>setTimeout(s,Math.max(10,1e3-this.trainingSpeed*10)))}if(e.push(i),this.episodes++,this.currentReward=i,this.averageReward=e.reduce((s,a)=>s+a,0)/e.length,this.accuracy=this.calculateAccuracy(),this.ppoAgent.getTrainingStats().bufferSize>=this.batchSize){let s=yield this.ppoAgent.train();this.actorLoss=s.actorLoss,this.criticLoss=s.criticLoss,this.avgAdvantage=s.avgAdvantage}this.progress=Math.min(100,this.episodes/1e3*100),this.episodes%5===0&&this.updateCharts(),this.isTraining&&(this.initializeBoard(),yield new Promise(s=>setTimeout(s,100)))}this.isTraining&&(this.progress=100,this.isTraining=!1,this.snackBar.open("PPO Training complete!","Close",{duration:3e3}))})}trainDQN(){return H(this,null,function*(){let e=[];for(;this.isTraining&&this.episodes<1e3;){this.currentTrainingBoard=JSON.parse(JSON.stringify(this.board));let i=0,r=0,o=100;for(;this.isTraining&&r<o;){try{let{action:s,qValue:a}=yield this.dqnAgent.selectAction(this.currentTrainingBoard),l=this.dqnAgent.applyAction(this.currentTrainingBoard,s),c={state:this.boardToState(this.currentTrainingBoard),action:s,reward:l.reward,nextState:this.boardToState(l.newBoard),done:l.done};if(this.dqnAgent.storeExperience(c),this.updateVisualization(s,l.reward),this.qValue=a,this.currentTrainingBoard=l.newBoard,i+=l.reward,r++,this.totalSteps++,l.done){this.accuracy=100;break}if(this.getValidActions(this.currentTrainingBoard).length===0)break}catch(s){console.error("Error during DQN training step:",s);break}yield new Promise(s=>setTimeout(s,Math.max(10,1e3-this.trainingSpeed*10)))}if(e.push(i),this.episodes++,this.currentReward=i,this.averageReward=e.reduce((s,a)=>s+a,0)/e.length,this.accuracy=this.calculateAccuracy(),this.dqnAgent.getTrainingStats().bufferSize>=this.batchSize){let s=yield this.dqnAgent.train();this.qValue=s.qValue,this.explorationRate=s.epsilon}this.progress=Math.min(100,this.episodes/1e3*100),this.episodes%5===0&&this.updateCharts(),this.isTraining&&(this.initializeBoard(),yield new Promise(s=>setTimeout(s,100)))}this.isTraining&&(this.progress=100,this.isTraining=!1,this.snackBar.open("DQN Training complete!","Close",{duration:3e3}))})}boardToState(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)e.push(n[i][r]/9);return e}getValidActions(n){let e=[];for(let i=0;i<9;i++)for(let r=0;r<9;r++)if(n[i][r]===0){for(let o=1;o<=9;o++)if(this.isValidMove(n,i,r,o)){let s=i*81+r*9+(o-1);e.push(s)}}return e}isValidMove(n,e,i,r){for(let a=0;a<9;a++)if(n[e][a]===r)return!1;for(let a=0;a<9;a++)if(n[a][i]===r)return!1;let o=Math.floor(e/3)*3,s=Math.floor(i/3)*3;for(let a=o;a<o+3;a++)for(let l=s;l<s+3;l++)if(n[a][l]===r)return!1;return!0}updateVisualization(n,e){let i=Math.floor(n/81),r=Math.floor(n%81/9),o=n%9+1;this.resetHighlights(),this.cellData[i][r].isHighlighted=!0,this.cellData[i][r].value=o,this.cellHighlights=[{row:i,col:r,value:o}]}calculateAccuracy(){let n=0,e=0;for(let i=0;i<9;i++)for(let r=0;r<9;r++)this.currentTrainingBoard[i][r]!==0&&(e++,this.currentTrainingBoard[i][r]===this.solution[i][r]&&n++);return e>0?n/e*100:0}trainWithAlgorithm(){let n=()=>{if(this.isTraining)if(this.episodes++,this.progress=Math.min(100,this.episodes*2),this.accuracy=Math.min(95,this.episodes*.8+Math.random()*5),this.currentReward=-50+this.episodes*.5+(Math.random()-.5)*10,this.averageReward=this.currentReward*.9,this.generateNetworkVisualization(),this.episodes%5===0&&this.updateCharts(),this.progress<100){let e=1e3-this.trainingSpeed*9;setTimeout(n,e)}else this.progress=100,this.isTraining=!1,this.snackBar.open("Training complete!","Close",{duration:3e3})};n()}updateCharts(){this.accuracyChartData[0].series.push({name:this.episodes.toString(),value:this.accuracy}),this.rewardChartData[0].series.push({name:this.episodes.toString(),value:this.averageReward});let n=30;this.accuracyChartData[0].series.length>n&&(this.accuracyChartData[0].series=this.accuracyChartData[0].series.slice(-n),this.rewardChartData[0].series=this.rewardChartData[0].series.slice(-n)),this.accuracyChartData=[...this.accuracyChartData],this.rewardChartData=[...this.rewardChartData]}generateNetworkVisualization(){let n=this.selectedAlgorithm==="ppo"?[81,256,128,64,729]:[81,128,64,729];this.networkVisualization=[];for(let e=0;e<n.length;e++){let i=[];for(let r=0;r<n[e];r++)(r<10||r>n[e]-5||r%Math.ceil(n[e]/10)===0)&&i.push({id:`${e}_${r}`,value:Math.random(),size:e===0||e===n.length-1?"small":"medium"});this.networkVisualization.push(i)}}testModel(){return H(this,null,function*(){this.selectedAlgorithm==="ppo"?yield this.testPPOModel():this.selectedAlgorithm==="dqn"?yield this.testDQNModel():this.testSimulatedModel()})}testPPOModel(){return H(this,null,function*(){this.resetHighlights();let n=JSON.parse(JSON.stringify(this.board)),e=0,i=50;try{for(;e<i&&this.getValidActions(n).length!==0;){let{action:o}=yield this.ppoAgent.selectAction(n),s=this.ppoAgent.applyAction(n,o);if(this.updateVisualization(o,s.reward),n.splice(0,n.length,...s.newBoard),e++,s.done){this.snackBar.open("PPO Agent solved the puzzle!","Close",{duration:3e3});break}yield new Promise(a=>setTimeout(a,200))}}catch(r){console.error("Error testing PPO model:",r),this.snackBar.open("Error testing model","Close",{duration:3e3})}})}testDQNModel(){return H(this,null,function*(){this.resetHighlights();let n=JSON.parse(JSON.stringify(this.board)),e=0,i=50;try{for(;e<i&&this.getValidActions(n).length!==0;){let{action:o,qValue:s}=yield this.dqnAgent.selectAction(n),a=this.dqnAgent.applyAction(n,o);if(this.updateVisualization(o,a.reward),this.qValue=s,n.splice(0,n.length,...a.newBoard),e++,a.done){this.snackBar.open("DQN Agent solved the puzzle!","Close",{duration:3e3});break}yield new Promise(l=>setTimeout(l,200))}}catch(r){console.error("Error testing DQN model:",r),this.snackBar.open("Error testing model","Close",{duration:3e3})}})}testSimulatedModel(){this.resetHighlights();let n=0,e=10,i=()=>{if(n>=e){this.snackBar.open("Simulated model test complete!","Close",{duration:3e3});return}let r=[];for(let o=0;o<9;o++)for(let s=0;s<9;s++)this.cellData[o][s].value===0&&r.push({row:o,col:s});if(r.length>0){let o=r[Math.floor(Math.random()*r.length)],s=Math.floor(Math.random()*9)+1;this.resetHighlights(),this.cellData[o.row][o.col].isHighlighted=!0,this.cellData[o.row][o.col].value=s,this.cellHighlights=[{row:o.row,col:o.col,value:s}]}n++,setTimeout(i,500)};i()}saveModel(){return H(this,null,function*(){this.selectedAlgorithm==="ppo"?yield this.savePPOModel():this.selectedAlgorithm==="dqn"?yield this.saveDQNModel():this.saveSimulatedModel()})}savePPOModel(){return H(this,null,function*(){try{let n=yield this.ppoAgent.exportWeights(),e=this.ppoAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,entropyCoef:e.entropyCoef},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()};localStorage.setItem("sudoku_ai_model",JSON.stringify(i)),this.snackBar.open("PPO Model saved successfully!","Close",{duration:3e3})}catch(n){console.error("Error saving PPO model:",n),this.snackBar.open("Error saving model","Close",{duration:3e3})}})}saveDQNModel(){return H(this,null,function*(){try{let n=yield this.dqnAgent.exportWeights(),e=this.dqnAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,gamma:e.gamma,epsilon:e.epsilon,epsilonDecay:e.epsilonDecay,targetUpdateFreq:e.targetUpdateFreq},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()};localStorage.setItem("sudoku_ai_model",JSON.stringify(i)),this.snackBar.open("DQN Model saved successfully!","Close",{duration:3e3})}catch(n){console.error("Error saving DQN model:",n),this.snackBar.open("Error saving model","Close",{duration:3e3})}})}saveSimulatedModel(){let n={algorithm:this.selectedAlgorithm,weights:{},configuration:ie({learningRate:this.learningRate,batchSize:this.batchSize},this.selectedAlgorithm==="ppo"?{entropyCoef:this.entropyCoef}:{gamma:this.gamma}),stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()};localStorage.setItem("sudoku_ai_model",JSON.stringify(n)),this.snackBar.open("Model saved successfully!","Close",{duration:3e3})}loadModel(){return H(this,null,function*(){this.selectedAlgorithm==="ppo"?yield this.loadPPOModel():this.selectedAlgorithm==="dqn"?yield this.loadDQNModel():this.loadSimulatedModel()})}loadPPOModel(){return H(this,null,function*(){try{let n=localStorage.getItem("sudoku_ai_model");if(n){let e=JSON.parse(n);if(e.algorithm==="ppo"&&e.weights)yield this.initializePPOAgent(),yield this.ppoAgent.importWeights(e.weights),this.learningRate=e.configuration.learningRate,this.batchSize=e.configuration.batchSize,e.configuration.entropyCoef&&(this.entropyCoef=e.configuration.entropyCoef),this.accuracy=e.stats.accuracy,this.averageReward=e.stats.averageReward,this.episodes=e.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("PPO Model loaded successfully!","Close",{duration:3e3});else throw new Error("Invalid PPO model data")}else this.snackBar.open("No saved PPO model found!","Close",{duration:3e3})}catch(n){console.error("Error loading PPO model:",n),this.snackBar.open("Failed to load model","Close",{duration:3e3})}})}loadDQNModel(){return H(this,null,function*(){try{let n=localStorage.getItem("sudoku_ai_model");if(n){let e=JSON.parse(n);if(e.algorithm==="dqn"&&e.weights)yield this.initializeDQNAgent(),yield this.dqnAgent.importWeights(e.weights),this.learningRate=e.configuration.learningRate,this.batchSize=e.configuration.batchSize,e.configuration.gamma&&(this.gamma=e.configuration.gamma),e.configuration.epsilon&&(this.epsilon=e.configuration.epsilon),e.configuration.epsilonDecay&&(this.epsilonDecay=e.configuration.epsilonDecay),e.configuration.targetUpdateFreq&&(this.targetUpdateFreq=e.configuration.targetUpdateFreq),this.accuracy=e.stats.accuracy,this.averageReward=e.stats.averageReward,this.episodes=e.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("DQN Model loaded successfully!","Close",{duration:3e3});else throw new Error("Invalid DQN model data")}else this.snackBar.open("No saved DQN model found!","Close",{duration:3e3})}catch(n){console.error("Error loading DQN model:",n),this.snackBar.open("Failed to load model","Close",{duration:3e3})}})}loadSimulatedModel(){try{let n=localStorage.getItem("sudoku_ai_model");if(n){let e=JSON.parse(n);this.learningRate=e.configuration.learningRate,this.batchSize=e.configuration.batchSize,e.configuration.entropyCoef&&(this.entropyCoef=e.configuration.entropyCoef),e.configuration.gamma&&(this.gamma=e.configuration.gamma),this.accuracy=e.stats.accuracy,this.averageReward=e.stats.averageReward,this.episodes=e.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("Model loaded successfully!","Close",{duration:3e3})}else this.snackBar.open("No saved model found!","Close",{duration:3e3})}catch(n){console.error("Error loading model:",n),this.snackBar.open("Failed to load model","Close",{duration:3e3})}}generateNewSudoku(){this.initializeBoard(),this.resetHighlights(),this.snackBar.open("New puzzle generated!","Close",{duration:2e3})}testOnCurrentBoard(){this.testModel()}getVisibleNodes(n){return n<=5?Array.from({length:n},(i,r)=>r):Array.from({length:5},(i,r)=>r)}onCellClick(n,e){this.isTraining||console.log(`Cell clicked: (${n}, ${e})`)}onAlgorithmChange(){return H(this,null,function*(){this.isTraining&&this.stopTraining(),this.selectedAlgorithm==="ppo"?yield this.initializePPOAgent():this.selectedAlgorithm==="dqn"&&(yield this.initializeDQNAgent()),this.updateNetworkArchitecture(),this.resetTrainingStats(),this.snackBar.open(`Switched to ${this.selectedAlgorithm.toUpperCase()} algorithm`,"Close",{duration:2e3})})}resetTrainingStats(){this.progress=0,this.episodes=0,this.accuracy=0,this.averageReward=0,this.currentReward=0,this.actorLoss=0,this.criticLoss=0,this.avgAdvantage=0,this.qValue=0,this.explorationRate=0,this.totalSteps=0,this.accuracyChartData=[{name:"Accuracy",series:[]}],this.rewardChartData=[{name:"Reward",series:[]}]}updateNetworkArchitecture(){this.selectedAlgorithm==="ppo"?(this.networkArchitecture=[{name:"Input",units:81},{name:"Hidden 1",units:256},{name:"Hidden 2",units:128},{name:"Hidden 3",units:64},{name:"Policy/Value",units:729}],this.hasNeuralNetwork=!0):this.selectedAlgorithm==="dqn"?(this.networkArchitecture=[{name:"Input",units:81},{name:"Shared",units:128},{name:"Value Stream",units:64},{name:"Advantage Stream",units:64},{name:"Q-Values",units:729}],this.hasNeuralNetwork=!0):(this.networkArchitecture=[],this.hasNeuralNetwork=!1),this.showNetworkVisualization=this.hasNeuralNetwork}updatePPOConfig(){return H(this,null,function*(){if(this.selectedAlgorithm==="ppo"){let n={learningRate:this.learningRate,batchSize:this.batchSize,entropyCoef:this.entropyCoef};this.ppoAgent.updateConfig(n)}})}updateDQNConfig(){return H(this,null,function*(){if(this.selectedAlgorithm==="dqn"){let n={learningRate:this.learningRate,batchSize:this.batchSize,gamma:this.gamma,epsilon:this.epsilon,epsilonDecay:this.epsilonDecay,targetUpdateFreq:this.targetUpdateFreq};this.dqnAgent.updateConfig(n)}})}updateChartsFromLoadedModel(){let n=Math.min(10,this.episodes);for(let e=1;e<=n;e++){let i=Math.floor(this.episodes/n*e),r=e/n;this.accuracyChartData[0].series.push({name:i.toString(),value:this.accuracy*r}),this.rewardChartData[0].series.push({name:i.toString(),value:this.averageReward*r})}this.accuracyChartData=[...this.accuracyChartData],this.rewardChartData=[...this.rewardChartData]}triggerFileInput(){this.fileInput.nativeElement.click()}onFileSelected(n){let e=n.target.files[0];if(e&&e.type==="application/json"){let i=new FileReader;i.onload=r=>{try{let o=JSON.parse(r.target?.result);this.importModelFromFile(o)}catch(o){console.error("Error parsing model file:",o),this.snackBar.open("Invalid model file format","Close",{duration:3e3})}},i.readAsText(e)}else this.snackBar.open("Please select a valid JSON file","Close",{duration:3e3});n.target.value=""}importModelFromFile(n){return H(this,null,function*(){try{n.algorithm==="ppo"?(yield this.initializePPOAgent(),yield this.ppoAgent.importWeights(n.weights),this.selectedAlgorithm=n.algorithm,this.learningRate=n.configuration.learningRate,this.batchSize=n.configuration.batchSize,n.configuration.entropyCoef&&(this.entropyCoef=n.configuration.entropyCoef),this.accuracy=n.stats.accuracy,this.averageReward=n.stats.averageReward,this.episodes=n.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("PPO Model imported successfully!","Close",{duration:3e3})):n.algorithm==="dqn"?(yield this.initializeDQNAgent(),yield this.dqnAgent.importWeights(n.weights),this.selectedAlgorithm=n.algorithm,this.learningRate=n.configuration.learningRate,this.batchSize=n.configuration.batchSize,n.configuration.gamma&&(this.gamma=n.configuration.gamma),n.configuration.epsilon&&(this.epsilon=n.configuration.epsilon),n.configuration.epsilonDecay&&(this.epsilonDecay=n.configuration.epsilonDecay),n.configuration.targetUpdateFreq&&(this.targetUpdateFreq=n.configuration.targetUpdateFreq),this.accuracy=n.stats.accuracy,this.averageReward=n.stats.averageReward,this.episodes=n.stats.episodes,this.progress=100,this.updateChartsFromLoadedModel(),this.snackBar.open("DQN Model imported successfully!","Close",{duration:3e3})):this.snackBar.open("Unsupported model format","Close",{duration:3e3}),this.updateNetworkArchitecture()}catch(e){console.error("Error importing model:",e),this.snackBar.open("Failed to import model","Close",{duration:3e3})}})}exportModel(){return H(this,null,function*(){try{if(this.selectedAlgorithm==="ppo"){let n=yield this.ppoAgent.exportWeights(),e=this.ppoAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,entropyCoef:e.entropyCoef},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()},r=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`sudoku-ppo-model-${Date.now()}.json`,s.click(),window.URL.revokeObjectURL(o),this.snackBar.open("PPO Model exported successfully!","Close",{duration:3e3})}else if(this.selectedAlgorithm==="dqn"){let n=yield this.dqnAgent.exportWeights(),e=this.dqnAgent.getConfig(),i={algorithm:this.selectedAlgorithm,weights:n,configuration:{learningRate:e.learningRate,batchSize:e.batchSize,gamma:e.gamma,epsilon:e.epsilon,epsilonDecay:e.epsilonDecay,targetUpdateFreq:e.targetUpdateFreq},stats:{accuracy:this.accuracy,averageReward:this.averageReward,episodes:this.episodes},timestamp:Date.now()},r=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),o=window.URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`sudoku-dqn-model-${Date.now()}.json`,s.click(),window.URL.revokeObjectURL(o),this.snackBar.open("DQN Model exported successfully!","Close",{duration:3e3})}else this.snackBar.open("No trained model to export","Close",{duration:3e3})}catch(n){console.error("Error exporting model:",n),this.snackBar.open("Failed to export model","Close",{duration:3e3})}})}newBoard(){this.generateNewSudoku()}backToMenu(){this.isTraining&&this.stopTraining(),this.ppoAgent.dispose(),this.dqnAgent.dispose(),this.router.navigate(["/menu"])}static \u0275fac=function(e){return new(e||t)(Me(os),Me(ag),Me(_v),Me(aA),Me(lA))};static \u0275cmp=De({type:t,selectors:[["app-ai-learning"]],viewQuery:function(e,i){if(e&1&&sn(hGe,5),e&2){let r;Gt(r=Ut())&&(i.fileInput=r.first)}},decls:12,vars:2,consts:[["fileInput",""],[1,"ai-learning-container"],[1,"ai-header"],["mat-icon-button","",1,"back-button",3,"click"],[1,"ai-title"],["mat-icon-button","",1,"new-board-button",3,"click"],["class","loading-container",4,"ngIf"],["class","ai-content",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"ai-content"],[1,"ai-controls"],[1,"control-group"],[3,"ngModelChange","selectionChange","ngModel","disabled"],["value","ppo"],["value","dqn"],["mat-icon-button","",1,"toggle-button",3,"click"],["class","advanced-settings",4,"ngIf"],[1,"algorithm-description"],[4,"ngIf"],["min","1","max","100","step","1",3,"disabled"],["matSliderThumb","",3,"ngModelChange","ngModel"],[1,"action-buttons"],["mat-raised-button","",1,"primary-action",3,"click","color"],["mat-stroked-button","","color","accent",3,"click","disabled"],["mat-stroked-button","",3,"click","disabled"],[1,"model-management"],[1,"model-actions"],["mat-button","",3,"click","disabled"],["mat-button","",3,"click"],["type","file","accept",".json",2,"display","none",3,"change"],[1,"ai-board-area"],[1,"board-card"],[1,"sudoku-board"],[1,"board-grid"],["class","board-section",4,"ngFor","ngForOf"],["class","current-move",4,"ngIf"],["class","model-performance",4,"ngIf"],["class","ai-analytics",4,"ngIf"],[1,"advanced-settings"],[1,"setting-row"],[1,"slider-with-value"],["min","0.0001","max","0.01","step","0.0001",3,"disabled"],["min","16","max","128","step","16",3,"disabled"],["class","setting-row",4,"ngIf"],["min","0.001","max","0.1","step","0.001",3,"disabled"],["min","0.9","max","0.99","step","0.01",3,"disabled"],[1,"progress-section"],[1,"progress-header"],["mode","determinate",3,"value"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],["class","stat-item",4,"ngIf"],[1,"board-section"],[3,"value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted","cellClick",4,"ngFor","ngForOf"],[3,"cellClick","value","notes","isOriginal","isSelected","isSameNumber","isHighlighted","isCoachHighlighted"],[1,"current-move"],["class","highlight-info",4,"ngFor","ngForOf"],[1,"highlight-info"],[1,"move-details"],[1,"row-col"],[1,"value"],[1,"action-reasoning"],[1,"model-performance"],[1,"performance-stats"],[1,"performance-stat"],[1,"perf-label"],[1,"perf-value"],[1,"ai-analytics"],[1,"analytics-card"],[1,"chart-section"],[3,"results","view","xAxis","yAxis","legend","showXAxisLabel","showYAxisLabel","xAxisLabel","yAxisLabel","autoScale"],["class","network-visualization",4,"ngIf"],[1,"network-visualization"],[1,"network-viz"],["class","network-layer",4,"ngFor","ngForOf"],[1,"network-layer"],[1,"layer-label"],[1,"layer-nodes"],["class","node",3,"ngClass",4,"ngFor","ngForOf"],["class","node-count",4,"ngIf"],[1,"node",3,"ngClass"],[1,"node-count"]],template:function(e,i){e&1&&(R(0,"div",1)(1,"div",2)(2,"button",3),Ce("click",function(){return i.backToMenu()}),R(3,"mat-icon"),Y(4,"arrow_back"),M()(),R(5,"h2",4),Y(6,"Watch AI Learn Sudoku"),M(),R(7,"button",5),Ce("click",function(){return i.newBoard()}),R(8,"mat-icon"),Y(9,"refresh"),M()()(),be(10,fGe,4,0,"div",6)(11,LGe,84,21,"div",7),M()),e&2&&(V(10),J("ngIf",i.loading),V(),J("ngIf",!i.loading))},dependencies:[pi,Np,Ur,Yn,mo,cs,Kp,Zf,qf,Kf,Qf,Yf,Xf,Aa,Da,Fv,Ov,rh,O5,R5,$5,P5,MF,OS,AS,NS,Mv,J8,Q8,sg],styles:[".ai-learning-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;margin:0 auto;padding:1rem;height:100vh;box-sizing:border-box;max-width:100%;overflow-x:hidden}.ai-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;padding:0 .5rem;width:100%}.ai-title[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:600;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.back-button[_ngcontent-%COMP%], .new-board-button[_ngcontent-%COMP%]{color:#6b7280}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:calc(100vh - 5rem)}.loading-spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left:4px solid #3f51b5;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.ai-content[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 7rem);gap:1rem;overflow:hidden}.ai-controls[_ngcontent-%COMP%]{width:300px;min-width:250px;max-width:300px;display:flex;flex-direction:column;gap:1rem;overflow-y:auto;padding-right:.25rem;height:100%}.ai-board-area[_ngcontent-%COMP%]{width:550px;min-width:450px;max-width:550px;display:flex;flex-direction:column;align-items:center;gap:1rem;overflow-y:auto;height:100%;padding:0 .25rem}.ai-analytics[_ngcontent-%COMP%]{flex:1;min-width:350px;display:flex;flex-direction:column;height:100%;overflow-y:auto}.board-card[_ngcontent-%COMP%]{width:100%;max-width:500px}.sudoku-board[_ngcontent-%COMP%]{width:100%;max-width:450px;aspect-ratio:1;margin:0 auto}.board-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:4px;width:100%;height:100%;border:3px solid #333;background-color:#333;box-sizing:border-box;border-radius:8px}.board-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr);gap:1px;background-color:#ddd;border-radius:4px;overflow:hidden}.algorithm-description[_ngcontent-%COMP%]{background-color:#f3f4f6;border-radius:8px;padding:1.25rem;margin:.5rem 0 1.5rem;border-left:4px solid #4c1d95}.algorithm-description[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem;color:#4c1d95}.algorithm-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;line-height:1.4;color:#4b5563}.model-controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;margin-top:1rem;justify-content:space-between}.model-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:110px;display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.5rem}.save-btn[_ngcontent-%COMP%]{background:#10b981;color:#fff}.save-btn[_ngcontent-%COMP%]:hover{background:#059669;box-shadow:0 4px 12px #10b9814d}.download-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.download-btn[_ngcontent-%COMP%]:hover{background:#2563eb;box-shadow:0 4px 12px #3b82f64d}.load-btn[_ngcontent-%COMP%]{background:#f3f4f6;color:#4b5563;border:2px solid #e5e7eb}.load-btn[_ngcontent-%COMP%]:hover{background:#e5e7eb;box-shadow:0 4px 12px #0000001a}.dark-theme[_nghost-%COMP%]   .save-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .save-btn[_ngcontent-%COMP%]{box-shadow:0 4px 12px #10b98133}.dark-theme[_nghost-%COMP%]   .download-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .download-btn[_ngcontent-%COMP%]{box-shadow:0 4px 12px #3b82f633}.dark-theme[_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%]{background:#4b5563;color:#f3f4f6;border-color:#6b7280}.dark-theme[_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .load-btn[_ngcontent-%COMP%]:hover{background:#6b7280;box-shadow:0 4px 12px #0003}.chart-container[_ngcontent-%COMP%]{height:180px;margin:1rem 0;background-color:#f9fafb;border-radius:10px;padding:.5rem;box-shadow:0 1px 3px #0000000d;overflow:hidden}[_nghost-%COMP%]     .ngx-charts{float:none;overflow:visible}[_nghost-%COMP%]     .ngx-charts .line-series .line{stroke-width:2.5;stroke-linejoin:round;stroke-linecap:round}[_nghost-%COMP%]     .ngx-charts .line-highlight{display:none}[_nghost-%COMP%]     .ngx-charts .line-series-area{opacity:.25}[_nghost-%COMP%]     .ngx-charts text{font-size:10px!important;font-weight:400}[_nghost-%COMP%]     .chart-legend{display:none!important}[_nghost-%COMP%]     .ngx-charts .grid-panel.odd rect{fill:#00000005}[_nghost-%COMP%]     .ngx-charts .tick text{font-size:9px!important}[_nghost-%COMP%]     .ngx-charts .x-axis, [_nghost-%COMP%]     .ngx-charts .y-axis{font-weight:400}[_nghost-%COMP%]     .ngx-charts .axis-label{font-size:11px!important;font-weight:500!important}[_nghost-%COMP%]     .ngx-charts .circle-series circle{stroke-width:1;r:2.5}.dark-theme[_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .chart-container[_ngcontent-%COMP%]{background-color:#1f2937}.dark-theme[_nghost-%COMP%]     .ngx-charts .grid-panel.odd rect, .dark-theme   [_nghost-%COMP%]     .ngx-charts .grid-panel.odd rect{fill:#ffffff05}.dark-theme[_nghost-%COMP%]     .ngx-charts text, .dark-theme   [_nghost-%COMP%]     .ngx-charts text{fill:#d1d5db!important}.dark-theme[_nghost-%COMP%]     .ngx-charts .line-series-area, .dark-theme   [_nghost-%COMP%]     .ngx-charts .line-series-area{opacity:.15}.board-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem;width:100%;max-width:500px}.board-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;gap:.5rem}.stats[_ngcontent-%COMP%]{margin-top:1.5rem}.stat-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.75rem;padding-bottom:.75rem;border-bottom:1px dashed #e5e7eb}.stat-item[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.stat-label[_ngcontent-%COMP%]{font-weight:500;color:#4b5563}.stat-value[_ngcontent-%COMP%]{font-family:Courier New,monospace;color:#4c1d95;font-weight:600}.network-visualization[_ngcontent-%COMP%]{margin-top:1rem}.network-visualization[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1rem;text-align:center}.network-viz[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.5rem;padding:1rem;background-color:#f8fafc;border-radius:8px;overflow-x:auto}.network-layer[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem}.layer-label[_ngcontent-%COMP%]{font-size:.8rem;color:#64748b}.layer-nodes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;align-items:center}.node[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%}.node.small[_ngcontent-%COMP%]{width:8px;height:8px}.node.medium[_ngcontent-%COMP%]{width:12px;height:12px}.node-count[_ngcontent-%COMP%]{font-size:.7rem;color:#94a3b8;margin-top:.25rem}.current-move[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem;background-color:#f8fafc;border-radius:8px;border-left:4px solid #4c1d95}.current-move[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1.1rem}.highlight-info[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center;margin-bottom:.75rem}.highlight-info[_ngcontent-%COMP%]:last-child{margin-bottom:0}.move-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background-color:#fff;border-radius:6px;padding:.5rem;min-width:60px}.row-col[_ngcontent-%COMP%]{font-size:.75rem;color:#6b7280;font-weight:500}.value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#4c1d95;margin-top:.25rem}.action-reasoning[_ngcontent-%COMP%]{flex:1}.action-reasoning[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;line-height:1.4;color:#4b5563}.model-management[_ngcontent-%COMP%]{margin-top:1.5rem}.model-management[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1.1rem}.model-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}.model-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem .5rem;font-size:.85rem}.progress-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-weight:500;color:#4b5563}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-top:1rem}.action-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin:1.5rem 0}.action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;padding:.75rem}.primary-action[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4c1d95,#7c3aed);color:#fff}.primary-action[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#3c1367,#6d28d9)}.ai-analytics[_ngcontent-%COMP%]{width:100%;margin-top:1rem;clear:both}.analytics-card[_ngcontent-%COMP%]{width:100%;max-width:none}.charts-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:2rem;margin-top:1rem;width:100%;overflow-x:auto}.chart-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-width:400px}.chart-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1rem;color:#4c1d95;font-size:1rem;text-align:center}.dark-theme[_nghost-%COMP%]   .current-move[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .current-move[_ngcontent-%COMP%]{background-color:#1f2937;border-left-color:#7c3aed}.dark-theme[_nghost-%COMP%]   .current-move[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .current-move[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#c4b5fd}.dark-theme[_nghost-%COMP%]   .move-details[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .move-details[_ngcontent-%COMP%]{background-color:#374151}.dark-theme[_nghost-%COMP%]   .value[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .value[_ngcontent-%COMP%]{color:#c4b5fd}.dark-theme[_nghost-%COMP%]   .performance-stat[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .performance-stat[_ngcontent-%COMP%]{background-color:#374151}.dark-theme[_nghost-%COMP%]   .perf-value[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .perf-value[_ngcontent-%COMP%]{color:#c4b5fd}.dark-theme[_nghost-%COMP%]   .chart-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .chart-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#c4b5fd}@media (max-width: 1400px){.ai-content[_ngcontent-%COMP%]{flex-wrap:wrap}.ai-controls[_ngcontent-%COMP%]{width:30%;min-width:300px}.ai-board-area[_ngcontent-%COMP%]{width:calc(70% - 300px);min-width:450px}.ai-analytics[_ngcontent-%COMP%]{width:100%;margin-top:1rem;height:auto;max-height:600px}}@media (max-width: 1100px){.ai-content[_ngcontent-%COMP%]{flex-direction:column;height:auto}.ai-controls[_ngcontent-%COMP%], .ai-board-area[_ngcontent-%COMP%], .ai-analytics[_ngcontent-%COMP%]{width:100%;min-width:100%;max-width:100%;height:auto}.ai-board-area[_ngcontent-%COMP%]{order:1}.ai-controls[_ngcontent-%COMP%]{order:2}.ai-analytics[_ngcontent-%COMP%]{order:3}.sudoku-board[_ngcontent-%COMP%]{max-width:400px}}"]})};var dae=[{path:"",redirectTo:"menu",pathMatch:"full"},{path:"menu",component:rS},{path:"game",component:yS},{path:"settings",component:zS},{path:"ai-learning",component:cA},{path:"**",redirectTo:"menu"}];var pae={providers:[KU({eventCoalescing:!0}),JR(dae),ER(),_W()]};var uA=class t{constructor(n){this.themeService=n}title="Sudoku Game";isDarkMode=!1;ngOnInit(){this.themeService.isDarkMode$.subscribe(n=>{this.isDarkMode=n})}toggleTheme(){this.themeService.toggleTheme()}static \u0275fac=function(e){return new(e||t)(Me(dg))};static \u0275cmp=De({type:t,selectors:[["app-root"]],decls:16,vars:2,consts:[[1,"app-container"],[1,"app-header"],[1,"header-content"],["mat-icon-button","",1,"theme-toggle",3,"click"],[1,"app-content"],[1,"app-footer"],[1,"footer-content"],["href","https://sudoku-api.vercel.app/","target","_blank"]],template:function(e,i){e&1&&(R(0,"div",0)(1,"header",1)(2,"div",2)(3,"h1"),Y(4,"\u6570\u72EC Sudoku"),M(),R(5,"button",3),Ce("click",function(){return i.toggleTheme()}),R(6,"mat-icon"),Y(7),M()()()(),R(8,"main",4),ke(9,"router-outlet"),M(),R(10,"footer",5)(11,"div",6)(12,"p"),Y(13,"Powered by "),R(14,"a",7),Y(15,"Dosuku API"),M()()()()()),e&2&&(V(5),Le("aria-label",i.isDarkMode?"Switch to light mode":"Switch to dark mode"),V(2),kt(i.isDarkMode?"light_mode":"dark_mode"))},dependencies:[pi,Xx,Aa,Da,mo,Kp],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);min-height:100vh}[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh;width:100%;margin:0;padding:0}.app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:0;box-shadow:0 2px 10px #0000001a;width:100%;position:sticky;top:0;z-index:100}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;padding:1rem 2rem;width:100%}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:400;letter-spacing:1px;text-shadow:0 1px 2px rgba(0,0,0,.1)}.theme-toggle[_ngcontent-%COMP%]{color:#fff!important;background:#ffffff1a;border-radius:50%;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.theme-toggle[_ngcontent-%COMP%]:hover{background:#fff3;transform:scale(1.1)}.theme-toggle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:1.5rem;height:1.5rem}.app-content[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center;padding:2rem 1rem;width:100%}.app-footer[_ngcontent-%COMP%]{background:#ffffffe6;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-top:1px solid rgba(0,0,0,.1);width:100%;margin-top:auto}.footer-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem 2rem;text-align:center}.app-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:#6b7280}.app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3b82f6;text-decoration:none;font-weight:500;transition:color .2s ease}.app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#2563eb}body.dark-theme[_ngcontent-%COMP%]   .app-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#4c1d95,#5b21b6)!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]{background:#2d2d2de6!important;border-top:1px solid rgba(255,255,255,.1)!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#9ca3af!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#60a5fa!important}body.dark-theme[_ngcontent-%COMP%]   .app-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#93c5fd!important}@media (max-width: 768px){.header-content[_ngcontent-%COMP%]{padding:.75rem 1rem}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.app-content[_ngcontent-%COMP%]{padding:1rem .5rem}.footer-content[_ngcontent-%COMP%]{padding:1rem}}"]})};SR(uA,pae).catch(t=>console.error(t));
